[{"summary":"Moving a board to a different list updates the \"last updated\" date on all cards within the same list","key":"TRELLO-1144","url":"https://jira.atlassian.com/browse/TRELLO-1144","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe 'last updated' date on Trello cards is incorrectly modified when a card is moved between lists, resulting in outdated cards appearing in search results.\r\n\r\nh3. Steps to Reproduce\r\n # Move a card from one list to another.\r\n # Use the Trello search feature (https://trello.com/search) and sort by \"last updated.\"\r\n\r\nh3. Expected Results\r\nOnly the moved card and recently modified cards should appear as recently updated in the search results.\r\n\r\nh3. Actual Results\r\nOld cards within the same list that haven't been recently updated are incorrectly displayed as if they were updated.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T23:36:39.000+0000","comments":[]},{"summary":"People assigned to checklist items, sometimes they are missing as assignee to a checklist from mirror cards.","key":"TRELLO-1142","url":"https://jira.atlassian.com/browse/TRELLO-1142","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCheck items on a mirror card that are assigned to someone, not on the current board appear unassigned\r\nh3. Steps to Reproduce\r\n # If person is not a member of board, they will not show as assignee on mirror card checklists\r\n\r\nh3. Expected Results\r\n\r\nThe person assigned to a checklist item should be visible in all types of cards, including mirror cards.\r\nh3. Actual Results\r\n\r\nperson is not visible in the mirror card checklist\r\nh3. Workaround\r\n\r\n*We can go back to the original card to see the assignees.*","createDate":"2025-03-31T07:52:09.000+0000","comments":[]},{"summary":"Automation can't distinguish two boards with the same name when selecting a board to do an action","key":"TRELLO-1141","url":"https://jira.atlassian.com/browse/TRELLO-1141","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIf you have a board with the same name in two different Workspace, when selecting a board on the dropdown list on automation, it will display just one name, and it's not possible to know which board the automation is referring to.\r\n\r\nh3. Steps to Reproduce\r\n # Have 2 boards with the same name in 2 different Workspaces (Board01 on WS A, Board01 on WS B)\r\n # Create an automation on Board01 - WS A, selecting Board01 to move cards to . The dropdown list will show only one Board01\r\nExample: every day, copy all the cards in list \"To Do\" on board \"Tasks\" to list \"To do\" on board \"Board01\"\r\n\r\nh3. Expected Results\r\nYou want the cards to be moved on the Board01 WS A you create the automation\r\n\r\nh3. Actual Results\r\nThe cards are copied to Board01 on WS B.\r\n\r\nh3. Workaround\r\nUpdate the board name so they cannot be the same.","createDate":"2025-03-28T21:13:51.000+0000","comments":[]},{"summary":"In Trello IOS app able to add members on the card of a Template board","key":"TRELLO-1140","url":"https://jira.atlassian.com/browse/TRELLO-1140","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAble to add members on a card on a Template Board in Trello IOS app.\r\nh3. Steps to Reproduce\r\n # Create a Template Board.\r\n # Open Trello mobile app. \r\n # Try to add members to the card\r\n\r\nh3. Expected Results\r\n\r\nShould not see the option to add a member on the card.\r\nh3. Actual Results\r\n\r\nAble to add members on the card in the template board\r\nh3. Workaround\r\n\r\nNone","createDate":"2025-03-28T16:01:08.000+0000","comments":[]},{"summary":"When viewing Guest Workspace boards in the iOS app boards page, they intermittently are missing from the Guest Workspace section","key":"TRELLO-1132","url":"https://jira.atlassian.com/browse/TRELLO-1132","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen viewing Guest Workspace boards in the iOS app boards page, they intermittently are missing from the Guest Workspace boards list.\r\n\r\nh3. Steps to Reproduce\r\n1. On the boards page, scroll down to the Guest Workspaces\r\n2. Select a board to open\r\n3. Go back to the Boards page\r\n4. The board shows in the 'Recent Boards' list, but is missing under the Guest Workspaces section.\r\n\r\nAnother way to reproduce:\r\n1. On the boards page, scroll down to the Guest Workspaces\r\n2. Select the 'Boards >' to view all boards in that Workspace\r\n3. Select one of the boards to open\r\n4. Go back to the Boards page. The board shows in the 'Recent Boards' list, but is missing under the Guest Workspaces section.\r\n\r\nh3. Expected Results\r\nGuest Workspace boards are always displayed on the Boards page\r\n\r\nh3. Actual Results\r\nThe Guest Workspace boards intermittently go missing underneath the 'Guest Workspace' list.\r\n\r\nh3. Workaround\r\n\r\nTo view all Workspace boards, \r\n1. Scroll down the Boards page and find the Workspace.\r\n2. Select 'Boards >' to view all Workspace boards assigned to you.\r\n\r\nOR\r\n1. Navigate to 'Account' \r\n2. Select the 'Guest Workspace'\r\n3. Select the relevant Workspace to view all boards assigned to you.\r\n\r\nTroubleshooting suggestion: Follow this guide to clear Trello app cache on launch. Please check for any unsent changes before proceeding. (https://support.atlassian.com/trello/docs/troubleshooting-for-the-ios-app/)","createDate":"2025-03-26T06:04:33.000+0000","comments":[]},{"summary":"Workspace Table View doesn't show cards without a date assigned to you if you mark the filter \"Not marked as complete\"","key":"TRELLO-1127","url":"https://jira.atlassian.com/browse/TRELLO-1127","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWorkspace Table View doesn't show cards without a date assigned to you if you mark the filter \"Not marked as complete\"\r\nh3. Steps to Reproduce\r\n # Create multiple cards assigned to you without due/start date, others with due dates\r\n # Create a Workspace table view for this board with the filter to cards assigned to you.\r\n # Select the filter \"Not marked as complete\"\r\n # The cards without a due/start date that aren't marked as complete will disappear.\r\n\r\nh3. Expected Results\r\n\r\nThe cards without a due date should be displayed on the Workspace table view with the filter \"Not marked as complete\" selected, as they have not been completed.\r\nh3. Actual Results\r\n\r\nCards without a due date don't show up on the Workspace calendar view if you select the filter \"Not marked as complete\"\r\nh3. Workaround\r\n\r\nNone","createDate":"2025-03-24T14:22:20.000+0000","comments":[]},{"summary":"Missing access-control-allow-origin header for 4xx responses","key":"TRELLO-1104","url":"https://jira.atlassian.com/browse/TRELLO-1104","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAPI requests that result in 4xx error codes (such as *429* and  \\{*}400{*}) are missing the *access-control-allow-origin* and other *access-control-allow-** headers, preventing the power-up from accessing the *retry-after* and {*}x-rate-limit-{*}* headers.\r\n\r\nThis issue happens on multiple API endpoints, but I'm sharing the *https://api.trello.com/1/batch/* endpoint for reference.\r\nh3. Steps to Reproduce\r\n # Perform an API request to *https://api.trello.com/1/batch/* endpoint that reaches the API rate limit and returns a *429* status code.\r\n\r\nh3. Expected Results\r\n\r\nThe *access-control-allow-** headers are available on the request, allowing the requester to access the response headers.\r\nh3. Actual Results\r\n\r\nThe *access-control-allow-** headers are not available on the request.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-17T12:45:00.000+0000","comments":[{"text":"Hi all, this is Jireh from the Trello Development team.\r\n\r\nIs anyone experiencing this issue able to post screenshots of logs showing what headers are returned when an API request is rate limited? I'm currently unable to reproduce this issue.\r\n\r\nI have an API key that I've artificially rate limited to test this issue. But despite being rate limited (429 response) and not seeing the {*}access-control-allow-{*}* headers, I can still see \\{*}retry-after-{*}* and {*}x-rate-limit-{*}* headers in the response.\r\n\r\n!Screenshot 2025-03-18 at 12.42.47 PM.png|width=299,height=299!","author":"Jireh"},{"text":"Hi [~jlo@atlassian.com] \r\n\r\nAlthough you can see the {*}retry-after-{*}* and {*}x-rate-limit-{*}* headers in DevTools, you won't be able to access them from your *JS code* if you make a request from different origin. This behavior is part of the browser's [CORS|https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS] mechanism.\r\n\r\n \r\n\r\nAs I wrote on the original ticket [Missing access-control-allow-origin header for 429 response - Developer and Marketplace Support - Jira Service Management:|https://ecosystem.atlassian.net/servicedesk/customer/portal/34/ECOHELP-58073]\r\n\r\nLack of the {{[access-control-allow-origin|https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Access-Control-Allow-Headers]}} header prevents our code from accessing the response object.\r\n\r\nLack of the {{[access-control-expose-headers|https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Access-Control-Expose-Headers]}} header with retry-after and x-rate-limit-* headers listed does not allow us to calculate appropriate delay before the next retry.","author":"Planyway"},{"text":"[~192198428688] Hi, I believe I've discovered the issue that was causing Trello to not set the headers correctly when returning 429. I've deployed a fix. Can you check again to see if you are still running into the issue? ","author":"Jireh"},{"text":"Hi [~jlo@atlassian.com]!\r\n\r\nI can confirm that both allow-origin and expose-headers are present in 429 response now.\r\n\r\nOne more thing related to this issue. Could you please add the *retry-after* header to exposed headers as well? It works effectively on our backends, I believe it will also help reduce 429 errors on the frontend.\r\n\r\n \r\n\r\nSincerely yours, Planyway Team","author":"Planyway"},{"text":"[~192198428688] Got it. It should be a simple add, but because of current company-wide code freeze which limits which changes can go out for the next 2 weeks, it will be a while until I can deploy this fix. I'll let you know as soon as its out.","author":"Jireh"},{"text":"[~192198428688] Actually, I think my fix was just deployed and managed to sneak in just before our code freeze starts. Could you let me know if you see `retry-after` in the headers now? Thanks.","author":"Jireh"},{"text":"Hi [~jlo@atlassian.com]!\r\n\r\nGreat news! I can confirm that the retry-after header is now available. Thank you.","author":"Planyway"}]},{"summary":"Cursor jumps to end of text after deleting a space in card title on iOS","key":"TRELLO-921","url":"https://jira.atlassian.com/browse/TRELLO-921","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (no)\r\n\r\n \r\n\r\nWhen a user deletes a space between two words in a card's title on an iOS device, the space character is correctly removed. However, instead of the cursor positioning itself at the location of the deleted space (between the two words), it automatically jumps to the end of the text. This behavior disrupts the user's editing flow, as they have to manually reposition the cursor to continue editing.\r\nh3. Steps to Reproduce\r\n\r\nOur team is working to better understand how to reproduce the problem.\r\nh3. Expected Results\r\n\r\nOne character (space) is deleted and the cursor is positioned to delete the next character before it.\r\nh3. Actual Results\r\n\r\nOne character is deleted and the cursor jumps to the end of the title.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-17T20:19:03.000+0000","comments":[{"text":"We are unable to reproduce this issue on the latest version of Trello and latest version of iOS.\r\n\r\nWe are going to go ahead and close this issue out.\r\n\r\nIf you are still experiencing an issue here, please reach out to support.\r\n\r\n ","author":"Ron Sharon-Zipser"}]},{"summary":"When typing in a card description that has more than 80 lines in it, the typing cursor starts to lose focus","key":"TRELLO-902","url":"https://jira.atlassian.com/browse/TRELLO-902","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen typing in a card description that has more than 80 lines in it, the typing cursor starts to lose focus, shifting up and down.\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Create a description that has more than 80 lines in a card\r\n # start typing below those lines\r\n\r\nh3. Expected Results\r\nThe cursor follows the path and the experience is not affected.\r\n\r\nh3. Actual Results\r\n\r\nThe cursor shifts up and down, losing focus of what's being written.\r\n\r\nh3. Workaround\r\nCurrently, the best workaround would be creating a separate card.","createDate":"2025-01-03T16:26:13.000+0000","comments":[{"text":"This issue was fixed in the 2025.5 version of the Trello iOS app.\r\n\r\nClosing this issue out now. ","author":"Ron Sharon-Zipser"}]},{"summary":"iOS: Pressing return while editing custom field creates line break","key":"TRELLO-775","url":"https://jira.atlassian.com/browse/TRELLO-775","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nerrant line break in custom fields \r\nh3. Steps to Reproduce\r\n # add a text custom field\r\n # place the cursor anywhere but the end of the text \r\n # press return\r\n\r\nh3. Expected Results\r\n\r\nA custom field is created with no line break\r\nh3. Actual Results\r\n\r\na line break is created in a custom field \r\nh3. Workaround\r\n\r\n!Screenshot 2024-11-01 at 3.39.25 PM.png! move the cursor to the end of the text after editing the custom field ","createDate":"2024-11-01T20:39:57.000+0000","comments":[{"text":"Fixed and released in the 2025.1 version of the Trello iOS app.","author":"Ron Sharon-Zipser"}]},{"summary":"Unable to change start of week in the Custom Fields date picker","key":"TRELLO-770","url":"https://jira.atlassian.com/browse/TRELLO-770","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe date picker for Custom Fields on cards doesn't respect the language setting from the Atlassian Account. Sunday is always shown as the first day of the week regardless of which language is set.\r\nh3. Steps to Reproduce\r\n # Set language on your Atlassian account to English UK\r\n # Add a date Custom Field to a board in Trello\r\n # Open a card on that board\r\n # Open the Due date picker (week starts on Monday)\r\n # Open the date picker for the custom field (week starts on Sunday)\r\n\r\nh3. Expected Results\r\n\r\nThe date picker for Custom Fields should respect the language setting and alter the day the week starts on.\r\nh3. Actual Results\r\n\r\nThe Custom Field date picker always shows Sunday as the first day of the week.\r\nh3. Workaround\r\n\r\nNo workaround available","createDate":"2024-11-01T10:34:43.000+0000","comments":[]},{"summary":"Pasting an image via Clipboard on iOS app results to indefinite loading","key":"TRELLO-735","url":"https://jira.atlassian.com/browse/TRELLO-735","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis works in Android so the bug only exists in iOS app. \r\nh3. Steps to Reproduce\r\n # Copy an image from the internet\r\n # On iOS app, open a card and click paperclip icon to add an attachment\r\n # Select Clipboard option\r\n\r\nh3. Expected Results\r\n\r\nAn image will be uploaded\r\nh3. Actual Results\r\n\r\nThere is a loading icon that takes forever, but the image will still be uploaded. \r\n!IMG_8614.png|width=359,height=777!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. The only way to stop the loading behavior is to force close the app. But the image will still be uploaded.","createDate":"2024-10-15T06:26:03.000+0000","comments":[]},{"summary":"Using the Cut shortcut (Cmd + X) on a comment or description with formatted text will paste that Card URL instead","key":"TRELLO-698","url":"https://jira.atlassian.com/browse/TRELLO-698","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen attempting to cut (using Command+X) a hyperlink from a card comment, the clipboard stores the card's URL instead of the original hyperlink. There is another scenario below when a description is cut (using Command+X), the clipboard only stores the card's URL instead of the card description. Both of these scenarios only happen when the starting text is formatted in any way (heading text, italic, bold, ordered or undordered list, code block, strikethrough, hyperlink). Unformatted text does not have this issue. \r\nh3. Steps to Reproduce (Command+X a hyperlink in a comment)\r\n # Create a card and add a comment containing a hyperlink.\r\n # Highlight the URL by dragging your cursor over it.\r\n # Use Command+X or right-click and select \"Cut\" to remove the hyperlink.\r\n # Paste the contents of the clipboard into any text field to view the result.\r\n\r\nThis message pops-up when cutting the link:  !image-2024-10-02-10-15-22-996.png|width=426,height=107!\r\nh3. Expected Results\r\n\r\nThe original hyperlink should be removed from the comment and available for pasting elsewhere.\r\nh3. Actual Results\r\n\r\nThe hyperlink is removed from the comment, but pasting results in the Trello card URL instead of the intended hyperlink.\r\n\r\nIssue reproduced: [^Screen Recording 2024-10-02 at 10.07.21.mov]\r\nh3. Workaround\r\n\r\nUse the \"Copy\" function instead of \"Cut\" to retain the original hyperlink for pasting.\r\nh1. ^Another scenario:^\r\n\r\nAnother scenario for the same bug when a description is cut from the card.\r\nh3. Steps to Reproduce (Command+X a formatted text in the description)\r\n\r\n1. Open an existing card.\r\n2. Click in the description area\r\n3. Select some text in that description. The first word in the selection must be bold.\r\n4. Perform a command-x to cut that text\r\nh3. Expected Results\r\n\r\nThe text will disappear (as it should), and when you paste the description to another card, it should paste the exact text that you cut from the original card. \r\nh3. Actual Results\r\n\r\nThe text will disappear (as it should), but you'll see a popup message on the bottom left of the browser window that says \"{*}Card Copied to Clipboard{*}\"\r\n\r\nIf you then paste the contents of the clipboard, you'll actually be pasting the card link, and the text you cut will be gone. \r\nh3. Workaround\r\n\r\nUse the \"Copy\" function instead of \"Cut\" to retain the original description for pasting.","createDate":"2024-10-02T13:19:07.000+0000","comments":[{"text":"The description of this bug and the title do not correlate. The title is accurate to an issue I had, and was referenced by a support rep as a relevant issue. But the description here describes copying a URL from a comment.\r\n\r\nThe titular issue affected me recently as I had attempted to cut and paste the entire contents of the description of one card into another card. The result of the paste action is a link to the source card rather than the contents of the clipboard from the cut action.\r\n\r\nIt's problematic because after having performed the cut command, saved the card, and then performed the paste command in another card, the contents were presumed to be unrecoverable.\r\n\r\nI found this third-party resource that helped me recover the contents of the lost description: [https://foreverhungry.dev/posts/2021-11-24-restore-trello-card-description/]\r\n\r\nAdditionally, depending on the complexity of the description, the contents of the description do not paste properly when using CTRL + V. The actual work around is to use CTRL + SHIFT + V.","author":"DewmGuy"}]},{"summary":"Copying a card with custom fields removes the Custom Fields - already created ones and button to include","key":"TRELLO-657","url":"https://jira.atlassian.com/browse/TRELLO-657","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen you have some custom fields on a given board and copy a card from that board to another one, the button to access the Custom fields are removed from the Board menu and the Card back.\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n* Create a board A\r\n* Create a list and a card\r\n* Create 4 or 5 different Custom fields\r\n* Create a new board B\r\n* Move the card from board A to board B\r\n\r\nh3. Expected Results\r\nYou see the custom fields, and the custom fields button after moving.\r\nh3. Actual Results\r\nInitially, the button and the custom fields are missing from the board.\r\n\r\nh3. Workaround\r\nFrom testing it internally, you can either:\r\n\r\n* Refresh the browser a few times using cmd + r or ctrl + r\r\n* Reset the browser cache\r\n* Access in incognito window","createDate":"2024-09-16T21:01:45.000+0000","comments":[]},{"summary":"My Cards view not properly displaying all overdue cards","key":"TRELLO-26","url":"https://jira.atlassian.com/browse/TRELLO-26","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers are experiencing inconsistencies in the display of cards with the same name, across different lists and boards, in the new My Cards view, A performance issue arises in scenarios involving a large number of cards. The system limits the display to a maximum of 500 cards, potentially affecting the visibility of cards in the My Cards view.\r\nh3. Steps to Reproduce\r\n # Have a board with several cards assigned to you, some with identical names in lists that are similarly named but in different boards.\r\n # Some of these cards may share due dates.\r\n # Attempt to view these cards in the My Cards view.\r\n\r\nh3. Expected Results\r\n\r\nAll assigned cards should be visible in the My Cards view, regardless of the total number of cards on the board.\r\nh3. Actual Results\r\n\r\nCertain cards assigned to the user are not displayed in the My Cards view.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2024-03-01T20:24:21.000+0000","comments":[{"text":"Hi Nathan can you please help with Planyway via Trello  it is not loading.","author":"Kathy"},{"text":"Hello,\r\n\r\nI would like an update on this ticket ASAP. We have been paying for a product now for 9 months that is not working properly because of the above bug. My ticket numbers are as we follow:\r\n\r\nTRELLO-208102\r\n\r\nTRELLO-208596\r\n\r\nCA-3308450 \r\n\r\nPlease get back to me ASAP as I believe we are owed money due to this product not working and you forcing us to pay for it.\r\n\r\nThanks!","author":"Andrew Haberberger"},{"text":"Hello - I am looking for an update on this ticket. Please reach out ASAP.\r\n\r\nTRELLO-208102\r\n\r\nTRELLO-208596\r\n\r\nCA-3308450 ","author":"Andrew Haberberger"},{"text":"The engineering team is actively investigating the problem and working on a resolution. We understand your frustration and apologize for any inconvenience this may be causing. \r\n\r\nWe anticipate deploying a fix in mid-January due to the holiday change freeze period. We'll provide another update as soon as we have more specific information to share. ","author":"Jinhuan Lei"},{"text":"The engineering team pushed a fix, and we adjusted the strategy to prioritize cards with recent activity for display on the page.","author":"Jinhuan Lei"}]},{"summary":"Clicking \"upload logo\" button during quick-setup of a new page doesn't work","key":"STATUS-972","url":"https://jira.atlassian.com/browse/STATUS-972","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen creating adding a new page, the 2nd step of quick-setup asks customer to upload their logo. However when they click on the \"upload logo\" button, nothing happens.\r\n\r\nBrowser console logs show:\r\n{code:java}\r\nraven.js:447 Uncaught n {text: 'API Key not found', toString: ƒ} d @ raven.js:447 {code}\r\nh3. Steps to Reproduce\r\n # Add a new page in Statuspage\r\n # Skip the add component by clicking next.\r\n # Click \"Upload Logo\" button\r\n\r\nh3. Expected Results\r\n\r\nAbility to upload logo during quick-setup\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the browser debug console window when the Upload Logo is clicked:\r\n{noformat}\r\nraven.js:447 Uncaught\r\nn {text: 'API Key not found', toString: ƒ}\r\nd @ raven.js:447 {noformat}\r\nh3. Workaround\r\n\r\nSkip the upload logo during quick-setup by clicking next instead, and use the \"customize page and emails\" option to upload a logo.","createDate":"2025-03-28T01:54:02.000+0000","comments":[]},{"summary":"Incident : Heading not defined","key":"STATUS-970","url":"https://jira.atlassian.com/browse/STATUS-970","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe text elements such as \"www.npmjs.com website, \"Package installation \", \"Package publishing\", \"Package search \" and so on are not defined using heading markup.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Open Url:https://status.npmjs.org/ and sign in with valid credentials.\r\n# Scroll down to the \"Uptime\" section.\r\n# Scroll down to the \"Past Incidents\" section.\r\n# Navigate onto the mentioned element and observe that it is not defined\r\n# Inspect its source code.\r\n\r\nh3.Screenshot\r\n\r\n\r\nh3. Actual Results\r\nThe heading element used to convey the page structure, there are few text elements which is lacking html heading mark-up.\r\nThe text \"www.npmjs.com website, \"Package installation \", \"Package publishing\", \"Package search \"  and so on are not defined using heading markup.\r\nThis resulted in screen reader users finding it difficult to understand the page content structure.\r\n\r\nh3. Expected Results\r\nMark up the mentioned text using appropriate HTML headings. In addition, use heading levels as per specification such as <h1> should be followed by <h2>, <h3> and so on.\r\n\r\nh3.Code Snippet\r\n{code:java}\r\n<h3>Package installation</h3>\r\n{code}\r\n\r\nh3.Environment\r\nMacBook Pro (14-inch, 2021)\r\nmacOs Ventura  13.3.1 (a) (22E772610a)\r\nChrome - Version 113.0.5672.63 (Official Build) (64-bit)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2021\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest\r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T04:38:49.000+0000","comments":[]},{"summary":"Webhook Payload Missing \"Manage Subscription\" Link","key":"STATUS-969","url":"https://jira.atlassian.com/browse/STATUS-969","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn other subscriptions (e.g. Email), if the page has component subscriptions enabled, the notification contains a link to manage the subscription (https://<pageurl>/subscriptions/<subscriberID>/edit) - this allows the receiver to update the components selected for that subscription method. \r\n\r\n>> this is expected as per [https://support.atlassian.com/statuspage/docs/enable-component-subscriptions/] \r\n\r\nHowever, this link is missing in the payload sent to Webhooks. This means a webhook subscriber is unable to easily update their subscription without knowing to copy their subscriber ID from the unsubscribe link, and use it in the above link instead. \r\nh3. Steps to Reproduce\r\n # Ensure page has \"Component Subscriptions\" enabled \r\n # Add a webhook subscriber \r\n # Create/update an incident \r\n # Check the payload sent to the webhook and notice it is missing the edit subscription link that is present in email \r\n\r\nh3. Expected Results\r\n\r\nFor the payload sent to the webhook endpoint to also contain the \"Edit Subscription\" link \r\nh3. Actual Results\r\n\r\nWebhook payload does NOT contain the \"Edit Subscription\" link \r\nh3. Workaround\r\n # Look at the \"unsubscribe\" link to find the webhooks subscriber ID (this is included in the webhook payload)\r\n ** It can be found here: \"unsubscribe\":\"http://<pageURL>/?unsubscribe=<{+}*subscriberID*{+}>\r\n # Formulate the edit subscription link which looks like this: https://{+}*<pageurl>*{+}/subscriptions/{+}*<subscriberID>*{+}/edit","createDate":"2025-03-27T03:43:47.000+0000","comments":[]},{"summary":"Users with the product admin role cannot add new pages","key":"STATUS-859","url":"https://jira.atlassian.com/browse/STATUS-859","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAs per https://support.atlassian.com/statuspage/docs/what-user-permissions-can-i-grant/ a product admin should be able to add a new page. When checking it, product admins are not able to do so, as the option is missing. \r\n\r\nBeing a member of a \"product-admin\" group wasn't sufficient to add a new page within the org. Only after added the user to the \"org-admin\" group the \"+\" sign was visible\r\n\r\nh3. Steps to Reproduce\r\n # As a product admin, navigate to manage.statuspage.io;\r\n # Click on the page to be able to add a new page.\r\n\r\nh3. Expected Results\r\n# There should be an option to add a another page, as product admins should be able to do that. \r\n\r\nh3. Actual Results\r\n# The option is missing\r\n\r\n\r\nh3. Workaround\r\n\r\nAdd product admin as a billing admin","createDate":"2024-09-03T07:30:05.000+0000","comments":[]},{"summary":"Resizing the pane doesn't work, if there is a vertical scrollbar on the commit detail pane","key":"SRCTREEWIN-14539","url":"https://jira.atlassian.com/browse/SRCTREEWIN-14539","type":"Bug","priority":"","description":"Hello, SourceTree support,\r\n\r\n \r\n\r\nI pretty much enjoy using the SourceTree for my daily git works and thanks for making such a good product!\r\n\r\n \r\n\r\nJust one small problem that makes me uncomfortable is that resizing the pane by dragging the border doesn't work, if there is a vertical scroll bar on the right side of the commit detail pane.\r\n\r\nI wasn't sure when this symptom happens, but luckily found how to reproduce it while writing this ticket. :)\r\n\r\nCould you please investigate and fix it? It would be a great help. Thanks!\r\n\r\n \r\n\r\n!image-2025-03-31-17-31-04-975.png!\r\n\r\n ","createDate":"2025-03-31T08:38:11.000+0000","comments":[{"text":"It looks that I can't add a screenshot to the issue description.\r\n\r\nCould you please tell me how I can provide a screenshot with a description?\r\n\r\n ","author":"Oliver Cho"},{"text":"Hi [~caf5b4825f0f] , \r\n\r\nPlease upload screenshots using any of the below links.\r\n\r\n[https://postimages.org|https://postimages.org/] \r\n[https://pasteboard.co|https://pasteboard.co/]\r\n**\r\n\r\n \r\n\r\nThanks,\r\n\r\nReetika","author":"Reetika Narula"},{"text":"Oh, thanks [~73ddb60f0fdb] for letting me know the method.\r\n\r\nPlease check this image.\r\n\r\n!https://i.postimg.cc/90Jmfh8P/Pane-Resizing-Issue.png!","author":"Oliver Cho"}]},{"summary":"Unable to delete a Rovo org level entitlement, if multiple org level entitlements are connected to single site","key":"ROVO-120","url":"https://jira.atlassian.com/browse/ROVO-120","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is an edge case: If a site instance of Rovo gets associated with Multiple org-level instances, it's not possible to delete the unwanted org-level instances.\r\nh3. Steps to Reproduce\r\n # Activate a trial of Rovo on a site in an organisation.\r\n # Transfer the site from one org to the other. (Org consolidation)\r\n # Cancel the trial.\r\n # Try to activate the Rovo again.\r\n # Rovo will not get activated. But an Org-level instance will be created.\r\n # This will happen for each retry, leaving empty org-level instances.\r\n # When Rovo gets activated, the site-level instance will get associated with all these org-level instances.\r\n\r\nh3. Expected Results\r\n\r\nThe unwanted org-level instances can be deleted safely.\r\nh3. Actual Results\r\n\r\nThe unwanted org-level instances can't be deleted as they're all related to the site-level instance.\r\nh3. Workaround\r\n\r\nMake sure to cancel the Rovo subscription, before the org consolidation.","createDate":"2025-03-28T12:17:41.000+0000","comments":[]},{"summary":"Rovo is unable to find similar issues in Jira","key":"ROVO-109","url":"https://jira.atlassian.com/browse/ROVO-109","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen asked to find similar issues to a Rovo agent in Jira, it is unable to locate them, even though similar issues exist.\r\n\r\nh3. Steps to Reproduce\r\n # Create two identical issues in Jira \r\n# Create a Rovo agent in Jira\r\n # In the description, add instructions such as 'find similar bugs in the same Jira project'.\r\n# Add the *Find similar issues* action to the agent\r\n# Once the agent is setup, open one of the Jira issues and ask the agent to find similar issues\r\n\r\nh3. Expected Results\r\nAgent lists similar issues.\r\n\r\nh3. Actual Results\r\n\r\nAgent displays the message 'Sorry, I couldn't find any issues that matched your search criteria'\r\n\r\nUpon manually comparing the issues Rovo is able to find them similar.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-11T08:50:19.000+0000","comments":[]},{"summary":"Saving a create rule on integration on the Integration SalesForce throws the error Property [clientId] cannot be empty","key":"OPSGENIE-2515","url":"https://jira.atlassian.com/browse/OPSGENIE-2515","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUnable to save the Create Alert Rule on the Integration SalesForce Service Cloud. We are getting an error saying \"Something is wrong Property [clientId] cannot be empty.\"\r\nh3. Steps to Reproduce\r\n # Go to Settings -> Integrations -> SalesForce Service Cloud-Test1 -> Edit the Create Alert Rule -> Click on the Save button\r\n\r\nh3. Expected Results\r\n\r\nThere should not be any error.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\nProperty [clientId] cannot be empty\r\n{noformat}\r\nh3. Workaround\r\n\r\nUse the web UI to create the integration instead of using the REST API for creating the integration ","createDate":"2025-04-01T14:55:30.000+0000","comments":[]},{"summary":"Saving a create rule on integration blocked due to outgoing auth settings not setup","key":"OPSGENIE-2514","url":"https://jira.atlassian.com/browse/OPSGENIE-2514","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustomers with integrations where outgoing authentication turned off are running into an issue with saving the integration\r\nh3. Steps to Reproduce\r\n # Locate an old integration with outgoing authentication turned off\r\n # Try saving an integrations create rule by adding a \"test\" tag for example\r\n # observe error \r\n\r\nFull replication can be viewed: [https://app.screencast.com/Liyxwx1SZt63e] \r\nh3. Expected Results\r\n\r\nWith outgoing authentication turned off for the third party it should allow you to save a create rule without complaining about authentication fields set\r\nh3. Actual Results\r\n\r\nUpon trying to save an integration create rule there will be a screenshot displayed demonstrating an error and preventing saving.\r\nh3. Workaround\r\n\r\nIf receiving an error while saving a create rule under the integration you can solve the issue by turning on outgoing authentication,saving, and then turning back off. Feel free to reach out to support.atlassian.com if any issues encountered and follow along with this bug for updates from engineering. Thanks!\r\n\r\nFull work-around can be viewed here: [https://app.screencast.com/Liyxwx1SZt63e] ","createDate":"2025-03-31T18:01:58.000+0000","comments":[]},{"summary":"Opsgenie Subscription plan information is sometimes reflected incorrectly in Atlassian Admin hub","key":"OPSGENIE-2263","url":"https://jira.atlassian.com/browse/OPSGENIE-2263","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOpsgenie Subscription plan is sometimes showing up as a different plan for the same customer in the Products page in Atlassian Admin hub for the Opsgenie product.\r\nh3. Steps to Reproduce\r\n # Check Opsgenie Settings > Subscription for the customer's Opsgenie plan and user license count\r\n # Check Atlassian Admin hub > Overview or Products pages for the same customer's Opsgenie plan\r\n\r\nh3. Expected Results\r\n\r\nExpecting the Opsgenie subscription plan information to be reflected correctly in the Atlassian Admin hub.\r\nh3. Actual Results\r\n\r\nSometimes, the Atlassian Admin hub shows inaccurate Opsgenie plan information.\r\nh3. Workaround\r\n\r\nFor the Opsgenie product, the correct subscription plan information is found within Opsgenie Settings > Subscription","createDate":"2024-07-25T16:16:41.000+0000","comments":[{"text":"Hi All, \r\n\r\nThis is Deeksha from the product team. We understand that this is something that can lead to confusion and must be synced with admin.atlassian, however the team has added this item to the backlog and for now this will be revisited in 4-6 months. \r\n\r\nWe hope that the current workaround to refer to opsgenie subscription details from the product itself can provide all necessary details.","author":"Deeksha"}]},{"summary":"Forge apps cannot be added to sandbox site for free even when they are already added to production site","key":"MP-329","url":"https://jira.atlassian.com/browse/MP-329","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen customers try to add an app developed with the Forge framework to a sandbox site(via Marketplace) that has already been added to the production site and is paid subscription, they don't see the \"Add to sandbox\" option. Instead, they only get the Trial version option.\r\n\r\nThis only applies to Forge-based apps, Connect-based apps do get the \"Add to sandbox\" option and can be used for free in the sandbox as long as they are installed in the production site as well.\r\n\r\n*Important NOTE:* The issue is *only* with the front end, and the backend rightly recognises the app as already paid in production, thus a free *Standard Sandbox* offering is provisioned for forge apps as well. However, in the UI, we don't get the \"Add to sandbox\" option.\r\nh3. Steps to Reproduce\r\n # Install any forge app to a production site - Ex. Planning Poker\r\n # Open the sandbox site and go \"Find new apps\" and try to add the same app.\r\n # Observe that you get only the \"Free Trial\" button.\r\n\r\nh3. Expected Results\r\n\r\nCustomers should see the \"Add to Sandbox\" button when trying to add the app to the sandbox site.\r\nh3. Actual Results\r\n\r\nWe only see the \"Free Trial\" option.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2025-03-20T15:28:10.000+0000","comments":[{"text":"This is the related to Marketplace team. Please reachout to channel [#help-marketplace-upm|https://atlassian.slack.com/archives/CFKUKLUVD]","author":"Abhishyam Chennayipalem"}]},{"summary":"Funnel insights: app_id bug fix","key":"MP-328","url":"https://jira.atlassian.com/browse/MP-328","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nFor months after Aug 24, the reports generated with funnel insights API are showing installs that happen through EMECC and not able to show the installs done through MPAC portal.","createDate":"2025-03-20T19:30:11.000+0000","comments":[{"text":"Hey @Rodrigo Morette \r\n\r\nthe issue has been fixed, and data has been backfilled  ","author":"Manuj Bhatia"},{"text":"Fix deployed","author":"Vijay S"}]},{"summary":"Space Key not working when typing in under request for Addon","key":"MP-326","url":"https://jira.atlassian.com/browse/MP-326","type":"Bug","priority":"","description":"h3. Issue Summary:\r\nSpace Key not working under Add-On request\r\n \r\nh3. Steps to Reproduce\r\n# In cloud Jira use menu Apps → Explore more apps.\r\n# Find an app that is not installed, click on it.\r\n# Click on \"Try it free\".\r\n# In the \"Request to install\" dialog press cmd+a to select all, backspace to delete selection. \r\n# Try to type in a new request. Try to type in \"want to use addon\" (do it with typing, not copy/paste). Space bar does not work for word separation. \r\n\r\nh3. Expected Results\r\nSpace key should work when typing in under request for an Add-on\r\n\r\nh3. Actual Results\r\nSpace Key not working under Add-On request\r\n\r\n\r\nh3. Workaround\r\nAs a temporary workaround, go back in the middle of typed text and press Space.","createDate":"2025-03-20T15:05:28.000+0000","comments":[{"text":"I assume it has to do with trailing space truncation. Should be done on submit, not while typing. Not a breaking bug, but very visible and very annoying.","author":"Jānis Vanags"}]},{"summary":"Incorrect licenseType, status and maintenanceEndDate for some migrated sandbox licenses","key":"MP-319","url":"https://jira.atlassian.com/browse/MP-319","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nWe are observing the incorrect values in the [License API|https://developer.atlassian.com/platform/marketplace/rest/v2/api-group-reporting/#api-vendors-vendorid-reporting-licenses-get] for licenseType, status and maintenanceEndDate fields in certain cases where sandbox licenses are migrated from old billing system to new billing system.\r\nh3. Steps to Reproduce\r\n # Get the license detail for the migrated sandbox licenses using Marketplace reporting license API\r\n # Verify licenseType, status and maintenanceEndDate fields are incorrect.\r\n\r\nh3. Expected Results\r\n\r\n       If any active sandbox license is migrated to the new billing system, the license type should be shown as 'Free' and the status as 'Active,' without any maintenance end date.\r\nh3. Actual Results\r\n\r\n     We have seen in some cases where migrated sandbox licenses are showing inactive status with licenseType as COMMERCIAL and older maintenanceEndDate     \r\nh3. Workaround\r\n\r\nNot available at the moment","createDate":"2025-03-14T06:25:03.000+0000","comments":[{"text":"Deployed to production","author":"Vijay S"}]},{"summary":"Feedback and review notification emails are not being sent from Marketplace","key":"MP-302","url":"https://jira.atlassian.com/browse/MP-302","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe email notifications from the Marketplace are not being sent to the partner on different occasion.\r\nh3. Steps to Reproduce\r\n # App uninstalled by the customer. \r\n # The feedback email which is sent to the app owner is not sent.\r\n # Also the same with app review\r\n\r\nh3. Expected Results\r\n\r\nOnce the app is uninstalled and customer gives a feedback, the partner should receive an email.\r\nh3. Actual Results\r\n\r\nThe emails are not triggered.\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-18T11:44:50.000+0000","comments":[{"text":"It will be very useful to add a report in marketplace.atlassian.com so that we can view the list of feedbacks and reviews from a single page","author":"Hua Soon SIM [Akeles]"},{"text":"[~c26e17239a7a] I found \"Reports\" > \"Feedback details\" in the Marketplace vendor profile quite helpful. It bundles uninstallation feedback from all apps.","author":"Almuth Boehme [Communardo]"},{"text":"Thanks Almuth :D \r\nThat is useful.\r\n\r\nI will be very happy if a Review details can be added as well.\r\n\r\nFor the benefit of others, the Marketplace team has announced\r\n{panel:title=https://developer.atlassian.com/platform/marketplace/changelog/#CHANGE-2354}\r\nWe have identified an issue within our system that resulted in the absence of customer feedback on churn events via the Feedback APIs between January to February 2025.\r\n\r\nThis issue has now been resolved, and consequently, 167,332 customer feedback records will be made available across all partners. These customer feedbacks were generated during the period from August 2020 to the present date. Effective Feb 20, 2025, partners will gain access to customer feedback regarding churn events from both historical and current feedback through reporting, as well as via the following APIs\r\n{panel}","author":"Hua Soon SIM [Akeles]"},{"text":"I have not noticed emails arriving for feedback again. The marketplace reports tab does show feedback, but seems to omit the message (which is the most helpful part). I'm not sure this is actually fixed yet...","author":"Adam Ahmed"},{"text":"This may be related to ECOHELP-58300 additionally [https://ecosystem.atlassian.net/servicedesk/customer/portal/34/ECOHELP-58300]\r\n\r\n(No auto-links for issues? Can't recall if we had that b/w JAC and EAN during my tenure...)","author":"Nick Wade -Opus Guard-"},{"text":"Could you please provide an update on the timeline for resolving this issue? We appreciate the access to feedback on the marketplace; however, it hasn't completely addressed our concerns. Our support depends heavily on the feedback emails we receive, and the current blockage in this process has created some challenges for us. We would greatly appreciate your assistance in facilitating a resolution. Thank you!","author":"Diana Białoskórska"},{"text":"Looking for updates on this, too :)","author":"Britta Neugebauer [yasoon]"},{"text":"HI there, \r\n\r\nWe have not received any customer installation notices of our apps since the start of the year. Is this issue still ongoing?\r\n\r\nSteve","author":"Steve Morrell"},{"text":"The bug has been fixed","author":"Anjali Chawla"},{"text":"Hello,  \r\n\r\nWe are still not receiving feedback emails, and I would like to confirm whether this issue is still ongoing. Please provide an update. Thank you.\r\n\r\nDiana","author":"Diana Białoskórska"},{"text":"Hello [~achawla@atlassian.com]\r\nWe have also not received any email notifications. Has the fix you mentioned been deployed?","author":"Mattia (bitvoodoo ag)"},{"text":"Still no emails here ... thanks for investigating.","author":"Almuth Boehme [Communardo]"},{"text":"This issue is fixed now. You will be getting the email notifications from now. ","author":"Adarsh Kashyap"}]},{"summary":"AnonPermission preflight shows blank description in saved plan when JCMA or Jira restarted","key":"MIG-2226","url":"https://jira.atlassian.com/browse/MIG-2226","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen running JCMA preflight, sometimes the AnonPermission preflight check description on UI is blank. However on refresh it gets updated.\r\n\r\nThis happens when either JCMA is disabled/uninstalled or Jira instance restarted, and checking the details of an existing plan.\r\n\r\n!image (11).png|width=374,height=205!\r\n\r\n \r\n\r\nAll versions post JCMA 1.12.12 are potentially impacted\r\nh3. Steps to Reproduce\r\n # Create a plan in JCMA, run preflights and save plan.\r\n # Disable JCMA and then enable again.\r\n # Check the saved plan details and blank description will be there.\r\n\r\nh3. Expected Results\r\n\r\nAnonPermission should have a description message present like the other preflights.\r\nh3. Actual Results\r\n\r\nThe description is blank.\r\n\r\n*Cause:*\r\n\r\nThis happens because dashboard check was added recently in AnonPermission and UI message was updated to reflect the same. This message change is also behind a FeatureFlag. When JCMA is restarted, the in memory cache gets reset. So when checking ViewDetails, JCMA relies on getting response again from preflightCheck, but since its behind an FF and FF is not set when directly checking Plan Details, the string remains empty and UI does not show anything.\r\nh3. Workaround\r\n\r\nRefreshing the page or preflight resets the message correctly.\r\n\r\n ","createDate":"2025-04-01T05:45:22.000+0000","comments":[]},{"summary":"'Hide completed issues older than' field is not migrated along with boards ","key":"MIG-2225","url":"https://jira.atlassian.com/browse/MIG-2225","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe field in the Board configuration 'Hide completed issues older than' is not migrated from Server to Cloud migration.\r\nh3. Steps to Reproduce\r\n # Create a Kanban board and Configure it\r\n # In Board Configuration -General, Select a value for 'Hide completed issues older than' ({*}say 4 weeks{*})\r\n # Migrate the Project along with the Board\r\n # Post-migration, in the cloud the field is referred to as  \"Completed issues\" and the value for \"Choose how long completed issues stay on your board\" is by default set to *\"2 weeks\"*\r\n\r\nh3. Expected Results\r\n *  The value for 'Hide completed issues older than'  should be migrated as set in the server\r\n\r\nh3. Actual Results\r\n *  The value \"Completed issues\" is not migrated and is set to the default value of \"2 weeks\" in the cloud \r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2025-03-28T15:09:08.000+0000","comments":[]},{"summary":"\"Copy production data\" timer is not accurate","key":"MIG-2213","url":"https://jira.atlassian.com/browse/MIG-2213","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen copying production data, especially large ones, the timer does not represent the actual time to complete the whole cloning.\r\nh3. Steps to Reproduce\r\n * Go to [admin.atlassian.com|http://admin.atlassian.com/] Select your organization if you have more than one.\r\n * Select Products > Sandbox.\r\n * Under Actions in the product table, select Copy production data.\r\n * Choose copy with media files or without media files, select Copy data.\r\n\r\nRelated docs of the feature:\r\n[Manage product sandboxes|https://support.atlassian.com/organization-administration/docs/manage-product-sandboxes/]\r\n[Early access feature|https://support.atlassian.com/organization-administration/docs/early-access-feature/]\r\nh3. Expected Results\r\n * The timer should accurately represent the time for the process to complete.\r\n\r\nh3. Actual Results\r\n * Timer does not represent time to completion accurately and may present users with a wrong estimate\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n \r\n\r\nAs discussed with @[vjadhav|mailto:vjadhav@atlassian.com] and [~0da2b4edb1fb] \r\n\r\nMCS team fixed the case where estimated time with attachment is turning out lower compared to estimated time without attachment which was a bug in estimation functionality. \r\n\r\nIt is important to note that the estimated time is only an approximation and cannot be made 100% accurate. The actual migration involves factors that cannot be predicted in advance. As a follow-up action, we can request the team responsible for the UI to add a disclaimer indicating that the estimated times might not be entirely accurate and are intended solely as an estimate. So as to not cause any confusion to customer. ","createDate":"2024-02-13T06:21:20.000+0000","comments":[{"text":"Hi [~646205eda384] ,\r\nCan you please reach out to the MCS team?\r\nsince they have an ML model to get the estimates and it might not be working well.","author":"Aksh Patel"},{"text":"I have asked MCS team to assign this ticket to themselves: [https://atlassian.slack.com/archives/C05T2QT3DR9/p1741689439652449]","author":"Sonal Gupta"},{"text":"[~646205eda384] Can you please move this ticket from *CLOUD* to *MIG* and update the component to `{*}Jira - Migration Assistant - Users and Groups Migration Import{*}` as this belongs to Migration platform team -> MCS. \r\n\r\nThanks","author":"Akshay Gupta"},{"text":"Work is in progress for this and will publish PR by today EOD","author":"Manish Richhariya"},{"text":"Refer the comment section for the root cause of the issue : https://hello.jira.atlassian.cloud/browse/HIKARI-672","author":"Manish Richhariya"},{"text":"PR for fix is merged. [https://bitbucket.org/atlassian/migration-catalogue/pull-requests/1699/diff]\r\n\r\nIt is to fix case where estimated time for migration with attachment will be less than estimated time of migration without attachment. We have to verify on prod once the change is deployed over prod. As appeared from below logs. \r\n\r\n!image (4).png!\r\n\r\n ","author":"Manish Richhariya"},{"text":"[~06eb947e2f93] The reporter of the issue's profile is inactive. Do you know someone who can help us in verifying the fix ? It is an edge case which occurs for specific cloudIds or migration. ","author":"Manish Richhariya"},{"text":"We have deployed the fix which will ensure that estimated time with attachment is more or equal to estimated time without attachment. It is an edge case so we need verification from the customer for the fix. \r\n\r\nThe timer might not fully accurate as it is only an estimate which can be off at times as actual migration have factors which are beyond control and estimation cannot be fully accurate.  We should add a disclaimer if it is creating confusion to the end user. ","author":"Manish Richhariya"}]},{"summary":"Customfield in Trash can cause Link Fixing to Fail","key":"MIG-2212","url":"https://jira.atlassian.com/browse/MIG-2212","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on LMS: Yes\r\nh3. Steps to Reproduce\r\n # Setup a custom field value on an jiraissue as Data Center URL\r\n # Migrate to cloud\r\n # Delete the Customfield migrated to cloud\r\n # Run LMS/Product Link Fixes\r\n\r\nh3. Expected Results\r\n\r\nLMS should ignore customfield in the trash. \r\nh3. Actual Results\r\n{noformat}\r\nThis might be caused by a connection issue or problems on our side. Try updating the links again or contact Atlassian support. {noformat}\r\nh3. Workaround\r\n\r\nReach out to Atlassian support for legacy link fixing via [https://confluence.atlassian.com/confkb/legacy-link-fixing-after-a-successful-server-to-cloud-migration-url-links-are-broken-in-the-new-cloud-instance-1271267903.html] ","createDate":"2025-03-12T11:05:40.000+0000","comments":[{"text":"Hi team, it affects our team. Can you consider this as priority as we are currently struggling to update the production links?","author":"Bharadwaj Jannu"},{"text":"[~faaf6070d1ba] We will pick this task on 3rd April 2025. Hopefully, we will be able to release this before the end of next week.","author":"Akshay Gupta"}]},{"summary":"Doing an upgrade to JCMA 1.12.28 removes old Plans from Migration Dashboard","key":"MIG-2206","url":"https://jira.atlassian.com/browse/MIG-2206","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you migrate to JCMA 1.12.28 all the Completed plans will disappear from Migration Dashboard. This doesn't impact In progress/Saved plans \r\nh3. Steps to Reproduce\r\n # Do Migrations on a JCMA version before JCMA 1.12.28\r\n # Upgrade to JCMA 1.12.28 \r\n\r\nh3. Expected Results\r\n\r\nPre-existing Plans shouldn't be impacted. \r\nh3. Actual Results\r\n\r\n!Screenshot 2025-03-06 at 11.08.42.png|width=688,height=158!\r\n\r\ngets reset with\r\n\r\n!Screenshot 2025-03-06 at 11.08.52.png|width=749,height=320!\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-06T10:10:32.000+0000","comments":[]},{"summary":"App migration fails from 403 errors from calling migration APIs","key":"MIG-2202","url":"https://jira.atlassian.com/browse/MIG-2202","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Create a plan in JCMA or CCMA with apps that have an automated migration path\r\n # Start migration \r\n # Remove your use from site admins in target cloud site\r\n # JCMA or CCMA will start throwing 403s and app migration fails\r\n\r\nh3. Expected Results\r\n\r\nJCMA and CCMA can gracefully handle scenarios when users temporarily lose site admin access\r\nh3. Actual Results\r\n\r\nApp migration hard fails. Example logs in this scenario\r\n{noformat}\r\ncom.atlassian.jira.migration.httpclient.exceptions.UnexpectedStatusCodeException: Received an unexpected status code; expected [200], but received 403: {\"timestamp\":\"Feb 13, 2025, 7:01:30PM\",\"status\":403,\"error\":\"Forbidden\",\"path\":\"/api/migration/upload/url\"}\r\nat com.atlassian.jira.migration.httpclient.exceptions.ExceptionsKt.unexpectedStatusCode(Exceptions.kt:9)\r\nat {noformat}\r\nh3. Workaround\r\n\r\nEnsure there are no automation rules that may temporarily remove site admin access for the user performing the migration","createDate":"2025-02-22T03:07:08.000+0000","comments":[]},{"summary":"Projects fail due to race conditions","key":"MIG-2187","url":"https://jira.atlassian.com/browse/MIG-2187","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center:No\r\nh3. Steps to Reproduce\r\n # N/A\r\n\r\nh3. Expected Results\r\n\r\nSuccessful migration should happen when the source data is complete\r\nh3. Actual Results\r\n\r\nEven though a successful export happened, the import fails with errors like\r\n\r\n \r\n{noformat}\r\nproject-import We couldn't import Project XXXXX because it references Permission Scheme 'YYYY: Permission Scheme' which is missing from this migration.\r\n\r\nproject-import We couldn't import Screen Scheme 'XXXX' because it references Screen 'YYYYY' which is missing from this migration. To resolve this, identify and add the missing parent entity on your source site or delete all child entities on your source site and re-run the migration. This caused 3000 other item(s) to fail{noformat}\r\nUpon further investigation it is revealed that the referenced entities are present and are even successfully imported to cloud. \r\n\r\nThere is a timeout during the import process which leads to this error. \r\n\r\n \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior other than to retry. A workaround will be added here when available","createDate":"2025-02-13T09:46:20.000+0000","comments":[{"text":"The fix for this was rolled out on the 24th of February 2025, following testing and validation. Have not since seen any issues with the same root cause.\r\n ","author":"Maggie Pedersen"}]},{"summary":"Failed project import will not trigger app migrations","key":"MIG-2182","url":"https://jira.atlassian.com/browse/MIG-2182","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Create a data shape issue where one of the projects fails. \r\n # Trigger a migration of multiple projects along with apps. \r\n\r\nh3. Expected Results\r\n\r\nProject plan should show failed or incomplete\r\nh3. Actual Results\r\n\r\nProject plan shows in progress and apps never trigger and remain in READY state !image (2).png|width=670,height=183!!Screenshot 2025-02-10 at 12.14.36.png!\r\n\r\n!Screenshot 2025-02-10 at 12.15.37.png|width=531,height=143!\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-10T11:17:59.000+0000","comments":[{"text":"If you would like to start app migrations you can create a new plan with only apps and run the migration that way. ","author":"David Yu"},{"text":"We have identified and fixed the issue, with the fix being delivered in the next release.","author":"Adam Miritis"},{"text":"This has now been resolved with JCMA 1.12.28","author":"Adam Miritis"}]},{"summary":"Deleted Issues can cause Link Fixing to Fail","key":"MIG-2129","url":"https://jira.atlassian.com/browse/MIG-2129","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on LMS: Yes\r\nh3. Steps to Reproduce\r\n # Setup a custom field value on a jiraissue as Data Center URL\r\n # Migrate to cloud\r\n # Delete the project and move it to trash.\r\n # Run LMS/Product Link Fixes\r\n\r\nh3. Expected Results\r\n\r\nLMS should ignore issues in trash. \r\nh3. Actual Results\r\n\r\nLMS run will fail with\r\n{noformat}\r\nThis might be caused by a connection issue or problems on our side. Try updating the links again or contact Atlassian support. {noformat}\r\nh3. Workaround\r\n\r\nReach out to Atlassian support for legacy link fixing via [https://confluence.atlassian.com/confkb/legacy-link-fixing-after-a-successful-server-to-cloud-migration-url-links-are-broken-in-the-new-cloud-instance-1271267903.html] ","createDate":"2024-12-03T11:51:12.000+0000","comments":[]},{"summary":"Project Picker custom field values may fail to migrate to Cloud","key":"MIG-2098","url":"https://jira.atlassian.com/browse/MIG-2098","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen migrating with JCMA using projects with issue which contain a \"Project Picker (single project)\", the value may fail to migrate if the referred project in the field hasn't finished migrating.\r\n\r\nReproducible on Data Center: Yes\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Start Jira Server/DC;\r\n# Create the projects:\r\n** Project A (PA)\r\n** Project B (PB)\r\n** Project C (PC)\r\n# Create and associate a custom field \"Project Picker (single project)\" and associate with the 3 projects' screens;\r\n# Create an issue in each project, and fill the Project Picker field as such:\r\n** Issue PA-1, links to PB\r\n** Issue PB-1, links to PC\r\n** Issue PC-1, links to PA\r\n# Migrate all 3 projects to Cloud in the same migration.\r\n\r\nh3. Expected Results\r\n\r\nAll 3 issues have the values of the Project Picker field filled with the values configured on Server/DC.\r\nh3. Actual Results\r\n\r\nAt least one issue will have a blank value for the Project Picker field. Which one isn't deterministic, it depends on which project finished migrating first.\r\n\r\nMathematically, using this field would have a 50% chance at best of the values being populated correctly, which will only happen if the issue with the field is not the first to finish migrating.\r\n\r\nh3. Workaround\r\n\r\nMigrate the custom field values using CSV export/import.","createDate":"2024-11-12T18:32:45.000+0000","comments":[]},{"summary":"JCMA throwing the error statusCode=429 when is selected the method Migrate all data at once (MAO)","key":"MIG-1986","url":"https://jira.atlassian.com/browse/MIG-1986","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # In Jira Software, install the plugin JCMA 1.11.7 (the latest version at this moment) and try to migrate using the option *Migrate all data at once (MAO).* \r\n\r\nh3. Expected Results\r\n * Complete the migration successfully.\r\n\r\nh3. Actual Results\r\n # The migration plan is stuck on the Jira server with the status of in progress.\r\n # The migration appears to have been completed successfully on the Atlassian side; however, it was completed in less than one minute, and projects are not transferred (status of ready).\r\n # Even rate limiting is disabled the migration assistant keeps throwing the error statusCode=429\r\n # The below exception is thrown in the atlassian-jira.log or atlassian-jira-migration.log files:\r\n ** \r\n{code:java}\r\n./atlassian-jira.log JCMA-MigrationTracker-pool-4-thread-26 ERROR      [c.a.j.migration.httpclient.ServiceUnavailableBackoffRetryStrategy] Request failed with executionCount=2, maxRetries=5, statusCode=429, xFailureCategory=null \r\n\r\n./atlassian-jira-migration.log ERROR admin 1034x339x1 xns4rs 172.29.239.250,172.50.0.2 /migration-cloud-save-action.jspa [jira.migration.httpclient.ServiceUnavailableBackoffRetryStrategy] Request failed with executionCount=1, maxRetries=5, statusCode=429, xFailureCategory=null {code}\r\n\r\nh3. Workaround\r\n # Downgrade the JCMA version. In the test it was downgraded to the JCMA *1.10.17* version and the migration was successfully completed using the method {*}Migrate all data at once (MAO){*}.\r\n ** [How to install a specific version of the Jira Cloud Migration Assistant|https://confluence.atlassian.com/cloudkb/how-to-install-a-specific-version-of-the-jira-cloud-migration-assistant-1097184512.html]","createDate":"2024-08-07T20:44:54.000+0000","comments":[]},{"summary":"After an instance URL rename, the old URL keeps showing in the product links as a destination","key":"MIG-1951","url":"https://jira.atlassian.com/browse/MIG-1951","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter an instance URL rename, the old URL keeps showing in the product links as a destination, from the user experience perspective, the URL should be the new swapped URL regardless if the other URL is kept in the instance history. \r\n\r\nThis is reproducible on Data Center: (no)\r\nh3. Steps to Reproduce\r\n# After a site migration. \r\n# Change the URL. \r\n# Check the Product links.\r\n# The old URL will show as a Destination. \r\n\r\nh3. Expected Results\r\nThe URL in the destination for the product links should always match the current URL of the instance. \r\n\r\nh3. Actual Results\r\nThe URL in the destination for the product links is the old URL instead of the current URL. \r\n\r\nh3. Workaround\r\nAs we keep the URL due to historical redirects, the user can select the old URL in the product links as the redirect will continue working. ","createDate":"2024-05-13T14:24:41.000+0000","comments":[{"text":"Thanks for creating this one. It is a small thing to fix, but would help avoid confusion when selecting the destination :)","author":"Jonathan Cyr"}]},{"summary":"JCMA reopens closed Sprints in Server to Cloud migration","key":"MIG-1925","url":"https://jira.atlassian.com/browse/MIG-1925","type":"Bug","priority":"","description":"{panel:title=Atlassian Update – 19 November 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#deebff}\r\nHi everyone,\r\n\r\nThis is Aayushi from the JCMA team. We would like to thank you for all the comments and feedback on the bug you've been experiencing with JCMA re-opening closed sprints.\r\n\r\nThis bug and the various ways it occurs (as mentioned in the Description of this bug) is due to {*}Config Drift{*}. JCMA tracks and maintains a record of the entities you have migrated (e.g workflow, custom field etc.), this functionality enables it to reduce the incidence that duplicate entities are created by linking data from entities that have previously been migrated. _*You can learn more about how JCMA links your data [here|https://support.atlassian.com/migration/docs/how-the-jira-cloud-migration-assistant-links-your-data/] & [here|https://confluence.atlassian.com/cloudkb/jira-cloud-migration-assistant-duplicates-and-tracking-entities-1063170066.html]*_\r\n\r\nIn this scenario with the sprint entity if there is a *difference (drift)* in the status of the Sprint we have taken the Server/Data Center status as the source of truth which results in the JCMA behaviour you're experiencing. \r\n\r\nAfter careful consideration of all the scenarios and uses cases we determined the best approach to solve this bug would be to develop a feature that would enable you to choose the source of truth whenever a *Config Drift* scenario is detected. \r\n\r\nWhile this may not be the outcome you were expecting, changing the source of truth to Cloud may also result in another bug for use cases where the Server/Data Center status would be considered the source of truth some customers.\r\n\r\nYou can monitor progress of this feature via [MIG-2100|https://jira.atlassian.com/browse/MIG-2100] we have carried over all your comments and votes there as well.\r\n\r\nPlease share any additional information about your particular use case that you think would help us prioritise building this feature.\r\n\r\nKind regards,\r\nCloud Transitions Team\r\n{panel}\r\nh3. Issue Summary\r\n\r\nWhen migrating Projects from Server to Cloud, the migration assistant can reopen past completed Sprints in some scenarios. Some well-known scenarios are:\r\n * Sprint name already exists in destination Cloud site (expected as per MIG-1339)\r\n * Sprint was previously migrated under a different name after Project data changed\r\n * Sprint contains cross-project issues\r\n * Shared Sprints found in other Boards\r\n * In phased migrations, if migrator selects on every plan to migrate \"All dashboards\", if a gadget/ dashboard references a sprint, although the sprint belongs to a single project board, will be exported in cross project data and the server data will take prevalence over already existing cloud data;\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n\r\nThese steps only account for 1 particular scenario that is very consistent (cross-project issues):\r\n # On Server site, create *Project* A with *Sprint 1* and Issues\r\n # Perform a Server to Cloud migration using JCMA including *Project A*\r\n # On Cloud site, complete *Sprint 1*\r\n # On Server site, create *Project B* with Issues. Assign an Issue to *Sprint 1*\r\n # Perform a Server to Cloud migration using JCMA including only *Project B*\r\n\r\nh3. Expected Results\r\n\r\nConsidering *Project A* was not in the scope of the migration, this should have no impact, OR a new *Sprint 1* should be created in {*}Project B{*}.\r\nh3. Actual Results\r\n\r\n*Sprint 1* from *Project A* is reopened. This is also still applicable if the Sprint was renamed in the Server site where it will update the Sprint name in the Cloud site.\r\nh3. Workaround\r\n\r\nIf migrating in phases with the option to migrate \"All dashboards\" in each phase, prior to the migration, contact Atlassian Migration Support with the result of the below query:\r\n{code:java}\r\nSELECT\r\n    pp.ID AS DashboardID,\r\n    pp.PAGENAME AS DashboardName,\r\n    pc.ID AS GadgetID,\r\n    pc.GADGET_XML AS GadgetKey,\r\n    gup_sprint.USERPREFVALUE AS SprintID,\r\n    aosp.\"NAME\" AS SprintName,\r\n    aosp.\"START_DATE\" AS SprintStartDate,\r\n    aosp.\"COMPLETE_DATE\" AS SprintCompleteDate,\r\n    aosp.\"END_DATE\" AS SprintEndDate,\r\n    aosp.\"CLOSED\" AS SprintClosed,\r\n    aosp.\"STARTED\" AS SprintStarted,\r\n    aosp.\"RAPID_VIEW_ID\" AS RapidViewID \r\n    FROM\r\n       PORTALPAGE pp\r\n   JOIN\r\n       PORTLETCONFIGURATION pc ON pp.ID = pc.PORTALPAGE\r\n   JOIN\r\n       GADGETUSERPREFERENCE gup_sprint ON pc.ID = gup_sprint.PORTLETCONFIGURATION AND gup_sprint.USERPREFKEY = 'sprintId'\r\n   JOIN\r\n       \"AO_60DB71_SPRINT\" aosp ON gup_sprint.USERPREFVALUE = aosp.\"ID\"::text;\r\n{code}\r\nAtlassian support will be able to map the above result with the existing cloud data and will provide you the differences for the potentially impacted sprints. Having this information, migrator can take educated decision on whether to proceed in using the migrate \"All dashboard\" option with impact or not migrating dashboards (as long as all dashboards were migrated in the first migration phase). More than this, the information provided can be leveraged to modify the on premise sprints via REST/ API or database ( by setting to the on prem sprints the values existing on cloud).","createDate":"2024-06-10T13:20:53.000+0000","comments":[{"text":"{panel:title=Atlassian Update – 19 November 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#deebff}\r\nHi everyone,\r\n\r\nThis is Aayushi from the JCMA team. We would like to thank you for all the comments and feedback on the bug you've been experiencing with JCMA re-opening closed sprints.\r\n\r\nThis bug and the various ways it occurs (as mentioned in the Description of this bug) is due to {*}Config Drift{*}. JCMA tracks and maintains a record of the entities you have migrated (e.g workflow, custom field etc.), this functionality enables it to reduce the incidence that duplicate entities are created by linking data from entities that have previously been migrated. _*You can learn more about how JCMA links your data [here|https://support.atlassian.com/migration/docs/how-the-jira-cloud-migration-assistant-links-your-data/] & [here|https://confluence.atlassian.com/cloudkb/jira-cloud-migration-assistant-duplicates-and-tracking-entities-1063170066.html]*_\r\n\r\nIn this scenario with the sprint entity if there is a *difference (drift)* in the status of the Sprint we have taken the Server/Data Center status as the source of truth which results in the JCMA behaviour you're experiencing. \r\n\r\nAfter careful consideration of all the scenarios and uses cases we determined the best approach to solve this bug would be to develop a feature that would enable you to choose the source of truth whenever a *Config Drift* scenario is detected. \r\n\r\nWhile this may not be the outcome you were expecting, changing the source of truth to Cloud may also result in another bug for use cases where the Sever/Data Center status would be considered the source of truth some customers.\r\n\r\nYou can monitor progress of this feature via [MIG-2100|https://jira.atlassian.com/browse/MIG-2100] we have carried over all your comments and votes there as well.\r\n\r\nPlease share any additional information about your particular use case that you think would help us prioritise building this feature.\r\n\r\nKind regards,\r\nCloud Transitions Team\r\n{panel}","author":"aaggarwal2"}]},{"summary":"JCMA Preflights: JCMA Cross-projects boards and filters preflight does not succeeds if there are filters referencing other filters with WAS or WAS NOT IN operator","key":"MIG-1896","url":"https://jira.atlassian.com/browse/MIG-1896","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJCMA is not able to finish running the preflights in case it contains a filter with \"WAS NOT IN\" or \"WAS IN\", and other filters have a reference to it.\r\nh3. Steps to Reproduce\r\n # Install any version of JCMA greater than 1.11.0 (could be the latest one).\r\n # Navigate to the Migration Assistant home, create a migration plan including all boards and filters on it\r\n # Run the preflight checks\r\n # Check that cross-project boards and filters preflight check failed  !image-2024-05-14-15-09-06-531.png|width=529,height=107!\r\n\r\nh3. Example Data used to Reproduce the issue\r\n # Create a project with key KANBAN\r\n # Create 4 issues for this project\r\n # Create at least 4 filters with the following configuration:\r\n ** KANBAN_1: filter != KANBAN_2 AND filter != KANBAN_3 AND filter != KANBAN_4 ORDER BY created DESC, updated DESC, status DESC, Rank ASC\r\n ** KANBAN_2: Filter = KANBAN_3 OR Filter = KANBAN_4 OR Filter = KANBAN_3 OR Filter = KANBAN_4 OR Filter = KANBAN_3 OR Filter = KANBAN_4 ORDER BY created DESC, updated DESC, status DESC, Rank ASC\r\n ** KANBAN_3: project = KANBAN AND (resolved >= 2022-01-01 AND resolved < 2025-12-31 OR resolved is EMPTY) AND (resolution != duplicate OR resolution is EMPTY) AND priority in (Highest, High, Medium) AND (labels not in (frictionpoint) OR labels is EMPTY) AND status was not in (Closed, Resolved) ORDER BY created DESC, updated DESC, status DESC, Rank ASC\r\n ** KANBAN_4: project = KANBAN AND (resolved >= 2022-01-01 AND resolved < 2023-12-31 OR resolved is EMPTY) AND Status in (Backlog,Done,\"In Progress\",Open,Resolved) OR project = SCRUM AND (resolved >= 2022-01-01 AND resolved < 2023-01-01 OR resolved is EMPTY) AND Status was in (Backlog,Done,\"In Progress\",Open,Resolved) AND status in (Closed) ORDER BY key ASC, created DESC, updated DESC, status DESC, Rank ASC\r\n\r\nh3. Expected Results\r\n\r\nThe preflights should be able to run successfully on this scenario.\r\nh3. Workaround\r\n\r\nNot include boards and filters on the migration plan, or contact Atlassian support team for additional help.","createDate":"2024-05-14T18:19:56.000+0000","comments":[]},{"summary":"'Create from template' macro don't point to correct template after migration with CCMA","key":"MIG-1872","url":"https://jira.atlassian.com/browse/MIG-1872","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen migrating Confluence spaces via CCMA or Space export/import the 'Create from template' macro don't work and display the follow message when clicked on:\r\n\r\nbq.  The template selected is not available anymore.\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Create local page template in space \r\n # Create new page and add 'Create from template' macro, point it to page template from previous step\r\n # Migrate space from Server/DC to Cloud via CCMA or via manual space export/import\r\n\r\nh3. Expected Results\r\n\r\n'Create from template' macro button works on destination and a new page is created with the desired template\r\n\r\nh3. Actual Results\r\n\r\nClicking the 'Create from template' macro button causes the following message to show:\r\n\r\nbq.  The template selected is not available anymore.\r\n\r\nIf you edit the macro it'll show pointing to the first template in the list instead of the desired template.\r\n\r\nPage source points to an old Server templateid:\r\n\r\n{code:xml}\r\n<ac:structured-macro ac:name=\"create-from-template\" ac:schema-version=\"1\" ac:macro-id=\"aaaa-bbbbb-cccccc-dddddd\">\r\n<ac:parameter ac:name=\"templateName\">123456789</ac:parameter>\r\n<ac:parameter ac:name=\"templateId\">123456789</ac:parameter>\r\n<ac:parameter ac:name=\"title\">Sample title</ac:parameter>\r\n<ac:parameter ac:name=\"buttonLabel\">Add template page</ac:parameter>\r\n</ac:structured-macro>\r\n{code}\r\n\r\nWhen the actual templateid in Cloud space is different:\r\n\r\n{noformat}\r\nhttps://<cloudsite>.atlassian.net/wiki/templates?space=SPACEKEY&template=987654321\r\n{noformat}\r\n\r\n\r\n\r\nh3. Workaround\r\n\r\nEdit the macro on the page and select the desired page template that should be used and publish the change.","createDate":"2023-12-12T18:38:11.000+0000","comments":[]},{"summary":"Custom field Customer Request Type is not migrated with JCMA and may cause JQLs to break","key":"MIG-1794","url":"https://jira.atlassian.com/browse/MIG-1794","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMigrating from on-prem JSM, the custom field {*}Customer Request Type{*}, which is a locked field that has its custom field type as _Customer Request Type,_ deliberately gets merged with the locked custom field in Cloud, {*}Request Type{*}, which has the same custom field type _Customer Request Type._\r\n\r\nh3. Steps to Reproduce\r\n\r\n # Create a filter that references the custom field _Customer Request Type_\r\n # Create a JSM Project, add this custom field to that project via association with the project's screen\r\n # Create a Jira issue on that project, and populate the _Customer Request Type_ custom field with any given value\r\n # Migrate that project to an Atlassian cloud site with JCMA\r\n\r\nh3. Expected Results\r\n\r\nFilters have their JQL updated with the new custom field name.\r\n\r\nh3. Actual Results\r\n\r\n * Customer Request Type values gets added to the _Request Type_ custom field (seems intentional)\r\n * Filters break because their JQLs reference the _Customer Request Type_ custom field (seems unintentional)\r\n\r\nThe values of the {*}Customer Request Type{*}, like contexts and screens, are appended into the custom field *Request Type* in Cloud after migration.\r\n\r\nThe custom field _Customer Request Type_ does not get migrated. Instead, its values are copied to the _Request Type_ custom field.\r\nThis might cause JQL/Filters that use this custom field name to not bring the expected results.\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no automated workaround for this behavior. A workaround will be added here when available.\r\n\r\nMeanwhile, to fix the broken JQLs, users must edit them manually and reference the _Request Type_ custom field instead.\r\n","createDate":"2024-02-23T18:43:56.000+0000","comments":[{"text":"The values were also not migrated to the field \"Request Type\".","author":"Sebastian Wörz"}]},{"summary":"Archived issues linked to an epic migrated as Active when only active issues are migrated","key":"MIG-1769","url":"https://jira.atlassian.com/browse/MIG-1769","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n#  Add a Issue with epic link type.\r\n# Add another issue under that epic and archive that issue.\r\n# Migrate the project to cloud without including Archived Issues in migration.\r\n# Archived Issues in migrated to cloud as active issue.\r\n\r\nh3. Expected Results\r\nArchived Issues under an epic should have archived status after migration to the cloud. \r\n\r\nh3. Actual Results\r\nArchived Issues under an epic become active issues after migration to the cloud. As long as one of the issues related to the Epic are not Archived, the entire Epic and children will be unarchived after the migration. \r\n\r\nh3. Workaround\r\nAfter migration on cloud, change the converted issues to archived issues using [Archiving Issues API|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-archive-put]. ","createDate":"2024-02-15T08:11:36.000+0000","comments":[]},{"summary":"JCMA export throws java.lang.NullPointerException when trying to get the SLA customfield value ","key":"MIG-1747","url":"https://jira.atlassian.com/browse/MIG-1747","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJCMA export throws java.lang.NullPointerException when trying to get the corrupted SLA customfield value of an issue.The following stacktrace shows that we are trying get the SLA customfield value.\r\n{code:java}\r\n    at com.atlassian.jira.migration.export.core.customfield.jsd.JsdCustomFieldValueParser.defineSlaCustomFieldValue(JsdCustomFieldValueParser.kt:128)\r\n    at com.atlassian.jira.migration.export.core.customfield.jsd.JsdCustomFieldValueParser.deriveCustomFieldValue(JsdCustomFieldValueParser.kt:93)  {code}\r\nThis is reproducible on Data Center: Yes (with DB tweak)\r\nh3. Steps to Reproduce\r\n* Create a new JSM Project.\r\n*  Configure an SLA for this project.\r\n* Check the customfieldvalue related to one of the Jira issues.\r\n{code:java}\r\nSELECT * from customfieldvalue where issue in (select id from jiraissue where issuenum=<issue_number>and project=<project_id>) {code}\r\n\r\n* Tweak the customfieldvalue entry by assigning null to the textvalue for the field\r\n(In customer environment this value was already corrupted with no root cause)\r\n{code:java}\r\nupdate customfieldvalue set textvalue='null' where issue=<issue_id> {code}\r\n\r\n* Migrate this project.\r\nh3.  \r\n\r\nh3. Expected Results\r\n\r\nA valid/meaningful error should be displayed during the data preparation stage (Null Pointer Exception should be catched)\r\nh3. Actual Results\r\n\r\nThe Data preperation fails with the NPE error.\r\n{noformat}\r\n2024-01-16 15:49:02,646 pool-87-thread-3 ERROR Administrator 947x93539x4 14fepla 84.135.183.239 /rest/migration/latest/check/plan/<Plan_ID> [migration.export.framework.DefaultExportFailureHandler] 275c600697b36423ad6dfffb5c4f81fe47cb52b2: Exporting entity Issue <Issue_Number> failed\r\njava.lang.NullPointerException\r\n    at com.atlassian.jira.migration.export.core.customfield.jsd.JsdCustomFieldValueParser.defineSlaCustomFieldValue(JsdCustomFieldValueParser.kt:128)\r\n    at com.atlassian.jira.migration.export.core.customfield.jsd.JsdCustomFieldValueParser.deriveCustomFieldValue(JsdCustomFieldValueParser.kt:93)\r\n    at com.atlassian.jira.migration.export.core.customfield.CustomFieldValueExportHelper.exportCustomFieldValueForIssue(CustomFieldValueExportHelper.kt:86)\r\n    at com.atlassian.jira.migration.export.core.issue.V2IssueCustomFieldValueExportMapper.mapCustomFieldValues(V2IssueCustomFieldValueExportMapper.kt:62)\r\n    at com.atlassian.jira.migration.export.core.issue.IssueExporter.mapCustomFields(IssueExporter.kt:501)\r\n    at com.atlassian.jira.migration.export.core.issue.IssueExporter.exportData(IssueExporter.kt:187)\r\n    at com.atlassian.jira.migration.export.core.issue.IssueExporter.exportData(IssueExporter.kt:84)\r\n    at com.atlassian.jira.migration.export.framework.ExportService$exportJiraEntity$1$1.invoke(ExportService.kt:304)\r\n    at com.atlassian.jira.migration.export.framework.ExportService$exportJiraEntity$1$1.invoke(ExportService.kt:303)\r\n    at com.atlassian.jira.migration.metrics.TimingMetrics.time(TimingMetrics.kt:24)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportJiraEntity-0E7RQCE(ExportService.kt:303)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportByEntityImpl(ExportService.kt:247)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportByEntityImpl$default(ExportService.kt:225)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportOrThrow(ExportService.kt:125)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportOrThrow$default(ExportService.kt:119)\r\n    at com.atlassian.jira.migration.export.core.project.ProjectExporter.exportIssuesSequential(ProjectExporter.kt:402)\r\n    at com.atlassian.jira.migration.export.core.project.ProjectExporter.exportIssues(ProjectExporter.kt:315)\r\n    at com.atlassian.jira.migration.export.core.project.ProjectExporter.access$exportIssues(ProjectExporter.kt:81)\r\n    at com.atlassian.jira.migration.export.core.project.ProjectExporter$childrenActions$5.invoke(ProjectExporter.kt:207)\r\n    at com.atlassian.jira.migration.export.core.project.ProjectExporter$childrenActions$5.invoke(ProjectExporter.kt:199)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.continueWithChildrenActions(ExportService.kt:321)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportByEntityImpl(ExportService.kt:250)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportByEntityImpl$default(ExportService.kt:225)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportOrThrow(ExportService.kt:125)\r\n    at com.atlassian.jira.migration.export.framework.ExportService.exportOrThrow$default(ExportService.kt:119)\r\n    at com.atlassian.jira.migration.export.ExportFacade.exportProjectReportData(ExportFacade.kt:310)\r\n    at com.atlassian.jira.migration.preflight.reports.DataExtractorFromProjects$gatherReportsDataFromProjectParallel$futures$1$1$1.invoke(DataExtractorFromProjects.kt:170)\r\n    at com.atlassian.jira.migration.preflight.reports.DataExtractorFromProjects$gatherReportsDataFromProjectParallel$futures$1$1$1.invoke(DataExtractorFromProjects.kt:169)\r\n    at com.atlassian.jira.migration.jiraservice.JiraExtensionsKt.wrap(JiraExtensions.kt:19)\r\n    at com.atlassian.jira.migration.preflight.reports.DataExtractorFromProjects.gatherReportsDataFromProjectParallel$lambda$5$lambda$4(DataExtractorFromProjects.kt:169)\r\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    at java.base/java.lang.Thread.run(Unknown Source) {noformat}\r\nh3. Workaround\r\n\r\nWay to recover, would be to go individually on each affected issue and work on 'Recalculate all SLAs' available on the issue view, right corner.\r\n!image-2024-02-05-13-46-23-142.png|width=430,height=99!","createDate":"2024-02-05T10:47:22.000+0000","comments":[{"text":"The issue has been fixed with JCMA 1.10.17 release.","author":"Tanjot Bhatia"}]},{"summary":"CCMA migrates spaces with “Null” spacestatus","key":"MIG-1715","url":"https://jira.atlassian.com/browse/MIG-1715","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nMigration Type: server to cloud \r\n\r\nCCMA migrates spaces with “Null” spacestatus\r\nh3. Steps to Reproduce\r\n\r\n1. Use the latest CCMA 3.9.4\r\n2. Create a migration plan with a space having null spacestate. This can be identified using the below query.\r\n{code:java}\r\nselect SPACEID, SPACEKEY, SPACESTATUS FROM SPACES\r\n{code}\r\n3. The Migration will run successfully without any Errors or Warnings.\r\n4. MAUI will show this space to be migrated successfully.\r\nh3. Expected Results\r\n\r\n[Navigate|https://support.atlassian.com/confluence-cloud/docs/navigate-spaces/] to view the migrated space on cloud site. This space should be listed here.\r\nh3. Actual Results\r\n * We will be unable to see the space anywhere on the cloud UI. \r\n * This is because the *spacestatus* of this space is a NULL.\r\n\r\nh3. Workaround\r\n\r\n1. To fix this on the cloud site if the space is already migrated, update the *spacestatus* of the space to current by a DB update using the below query.\r\n{code:java}\r\nupdate spaces set spacestatus = 'CURRENT' where spacekey = ‘<SPACEKEY>’\r\n{code}\r\n2. To fix this on the Confluence server before performing the migration follow the below steps.\r\n * Go to the Space with Null value spacestatus and click on Spacetools -> Overview -> Edit Space Details\r\n * Select “Edit Space Details”\r\n * Change the status to Current and Save it","createDate":"2024-01-22T14:04:59.000+0000","comments":[]},{"summary":"JCMA doesn't migrate all single project filters by default","key":"MIG-1642","url":"https://jira.atlassian.com/browse/MIG-1642","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen migrating *without* using the \"cross-project\" or \r\n{noformat}\r\ncom.atlassian.jira.migration.export.all.filters{noformat}\r\nfilters that have only one project don't get migrated unless they have share permissions set for the project or they are configured to a board.\r\nh3. Steps to Reproduce\r\n # Create a project with no boards\r\n # Create a new private filter that uses only the single project in the JQL\r\n # Migrate the project\r\n\r\nh3. Expected Results\r\n\r\nThe filter is migrated to the destination regardless of configuration as long as it only references a single project.\r\nh3. Actual Results\r\n\r\nThe filter is not migrated at all.\r\nh3. Workaround\r\n * Add the project to the filter's share permissions.\r\n * Use the cross-project boards and filters features","createDate":"2023-11-29T00:29:53.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/MOVE-1744027","author":"Vittal Krishna"}]},{"summary":"Migrating sprints from a different project overwrites the board as null","key":"MIG-1392","url":"https://jira.atlassian.com/browse/MIG-1392","type":"Bug","priority":"","description":"*_Issue Summary_*\r\nData integrity checks within the migration flow causes sprint board associations stored on table/column \"AO_60DB71_SPRINT\".\"RAPID_VIEW_ID\" to not migrate as expected. This happens because the data integrity checks can overwrite specific data that impact the sprint board association to a null value when certain conditions are met.\r\n\r\n*_Steps to Reproduce_*\r\n # On data center you have 2 projects, Project A and Project B\r\n # Create a board and sprint (Sprint A) that includes only Project A\r\n # Put a Jira issue (PROJA-1) from Project A into Sprint A.\r\n # Now change the filter for Sprint A to a filter that only includes Project B.\r\n # PROJA-1 has Sprint field = Sprint A, but PROJA-1 is no longer showing in Sprint A (because the filter was changed).\r\n # Now migrate Project B then Project A\r\n\r\n*_Expected Results_*\r\nThe Sprint in \"AO_60DB71_SPRINT\" has a valid \"RAPID_VIEW_ID\".\r\n\r\n_*Actual Results*_\r\nThe Sprint in \"AO_60DB71_SPRINT\" has \"RAPID_VIEW_ID\" as null because PROJA-1 sprints are not treated as valid because they no longer point to Project A. No errors are thrown in the logs.\r\n\r\n*_Workaround_*\r\nNo workaround at the moment, please engage support if this issue is observed.","createDate":"2023-05-16T14:07:01.000+0000","comments":[]},{"summary":"Support the export/import of the workflow UI positioning in a Jira Server to Cloud migration","key":"MIG-217","url":"https://jira.atlassian.com/browse/MIG-217","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen migrating from DC2C, the layout of a workflow diagram is lost. Customers will lose the positioning of the statuses and transitions within a workflow, including the drop-down view of an issue transition on the issue view.\r\n\r\nh3. Steps to Reproduce\r\n# Create a workflow\r\n# Position the statuses and transitions on a set layout\r\n# Associate this workflow with a workflow scheme\r\n# Associate the workflow scheme with a project\r\n# Migrate the project\r\n\r\nh3. Expected Results\r\nThe workflow diagram layout is migrated.\r\n\r\nh3. Actual Results\r\nThe workflow diagram layout is not migrated and all statuses are centerly aligned.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-07-20T21:03:52.000+0000","comments":[{"text":"This bug is going to hit some of our project owners very hard as we have quite a few workflows with 20+ statuses so it will take a lot of work to rearrange them in Jira Cloud after the migration. I have a feeling this bug will go nowhere since it has been open for 20 months with no updates.","author":"Rick Westbrock"},{"text":"we just spent 2 MD in total effort for xxx Workflows with xxxx status, this is completely unacceptable, since it is almost impossible to do this within a migration weekend.\r\n\r\nI really wonder why there are so few votes\r\n\r\nbr\r\n\r\nChristian","author":"Christian Ritter"},{"text":"Looks like layout is just not part of the migration, thus Cloud creates is as it can. Hopefully layout will be added soon, otherwise adjusting complex workflows after the migration (which is often required due to unsupported/incompatible conditions, validator and post-functions) is the very painful and time consuming operation.","author":"Yevgen Lasman"},{"text":"I'm surprised with the number of things that are not supported as standard as part of migration, especially as Atlassian is pushing for people to migrate to cloud so hard... The process should be straight forward and we should not need to do these types of manual workarounds. I guess it is not voted on much as it is only encountered during migration, not day to day usage...","author":"Karin van Driel"},{"text":"Yet another basic feature messing up the view after migration. It's not about changing the UI, atleast persist the old settings","author":"Javish Kathuria"},{"text":"+1","author":"Patrizia Kamp - OLD account"},{"text":"+1","author":"Viktor Sapaiev"},{"text":"+1\r\n\r\nAlso think this is strange that this is not a standard feature. For use-cases outside of the standard software world, it is very common to use Jira to model and track Business Process Flows. These tend to have multiple statuses (20+ not uncommon) and multiple transitions with conditions, validators, and non-linear directions. The current way they get migrated and visualised in could make it impossible to visualise at what stage in the process the issue is really at. It takes many hours to rearrange these (our instance has 40+ complex workflows). As another user posted this cannot be done in a migration weekend, where there are already enough other technical things that need to be done.","author":"Paddy Byrne"},{"text":"https://getsupport.atlassian.com/browse/MOVE-130653\r\n\r\n ","author":"Ashvini Shukla"},{"text":"This is a must-have feature for JCMA. The migrated workflow UI badly impacts us.","author":"Sami Ahmed Shaik"},{"text":"Yeah not surprised this doesn't work... Doubt they will ever fix it either","author":"George G"}]},{"summary":"In business projects the column order set by admins is ignored and columns appear grouped by their Status category (To Do, In Progress, Done) for regular users","key":"JWMCLOUD-877","url":"https://jira.atlassian.com/browse/JWMCLOUD-877","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn business projects: the column order set by admins is ignored and columns appear grouped by their Status category (To Do, In Progress, Done) for regular users\r\nh3. Steps to Reproduce\r\n # Create a business project.\r\n # With an admin user, add a few extra columns/statuses with different status categories.\r\n # Shift the columns/status order in the board.\r\n # Access the project board with a non-admin user.\r\n\r\nh3. Expected Results\r\n\r\nThe columns are visualized in the order the admin set them.\r\nh3. Actual Results\r\n\r\nThe column reorder is only visible to the admin that made the change. For regular users, the columns are ordered first by their status category and then by their status ID apparently. For example:  !Column order comparison.png|width=413,height=216!\r\n\r\n*Notes:*\r\nIn addition, there is another bug that prevents regular users from changing the column order for themselves, it might be connected: [JWMCLOUD-873: Regular users are not able to re-order column in Business Board|https://jira.atlassian.com/browse/JWMCLOUD-873]\r\nh3. Workaround\r\n\r\nOnly possible workaround is to temporarily provide project admin privileges to standard users so they can reorder the columns themselves.","createDate":"2025-04-01T08:09:29.000+0000","comments":[]},{"summary":"Unable to see the translated status(i.e. Italian) on the Jira board status where it is clearly seen on the issue view status which is in Italian","key":"JWMCLOUD-876","url":"https://jira.atlassian.com/browse/JWMCLOUD-876","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUnable to see the translated status(i.e. Italian) on the Jira board status (i.e column) where it is clearly seen on the issue view status which is in Italian.\r\nh3. Steps to Reproduce\r\n # Go to account personal settings\r\n # Change language to Italian\r\n # Open an issue with a transition to a status named 'To Do' and it will show 'Fare' (In Italian language)\r\n # When you see the column or status on the board, the 'To Do' status will be shown which is in the English language.\r\n\r\nPlease refer to the attached screenshot.\r\nh3. Expected Results\r\n\r\nThe board's status or column should show the translated text.\r\nh3. Actual Results\r\n\r\nThe board's status or column is shown in the English language.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-01T10:26:18.000+0000","comments":[{"text":"the translation \"fare\" that i can see in one of your screenshots is not correct.  The To Di status should be translated in \"Da completare\" as it was before","author":"Elena Bertucco"}]},{"summary":"Users without Create Issue permission can't use an Open Form on Team-Mamaned projects","key":"JWMCLOUD-874","url":"https://jira.atlassian.com/browse/JWMCLOUD-874","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAccording to the documentation [Manage Access and share a form|https://support.atlassian.com/jira-software-cloud/docs/share-your-form/], when the Form is set to Open, it means \"Only people with a Jira license who can log in to your Jira site\". However, if the user doesn't have the Create Issue permission, they can't see the form.\r\n!image-2025-03-31-14-52-17-718.png|width=325,height=247!\r\nh3. Steps to Reproduce\r\n # Create a TM business project and set it to Private.\r\n # Create a Form and set it to Open, and copy the form link for following steps.\r\n # Try creating an issue from the form created on #2 using a licensed random user without access to the project.\r\n # (If step #3 couldn't reproduce the issue) Go to *Project Settings -> Access.* Add someone else from your team as Administrator and remove yourself from the user list. Try open the form again.\r\n\r\n \r\nh3. Expected Results\r\n\r\nSince the permission says, \"Only people with a Jira license can log in to your Jira site,\" all licensed users should be able to create an issue from the Form.\r\nh3. Actual Results\r\n\r\nThe following page is shown:\r\n!image-2025-03-31-14-49-55-994.png|width=323,height=252!\r\nh3. Workaround\r\n\r\nNone at the moment.","createDate":"2025-03-31T12:56:00.000+0000","comments":[]},{"summary":"Regular users are not able to re-order column in Business Board","key":"JWMCLOUD-873","url":"https://jira.atlassian.com/browse/JWMCLOUD-873","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRegular users are not able to re-order the columns on the business board\r\nh3. Steps to Reproduce\r\n\r\nTry to drag the columns to change the order.\r\nh3. Expected Results\r\n\r\nIn Business projects, users should be able to arrange the column order at their convenience and [any user having access to the business project can rearrange the columns in the board but will only be visible to that user. |https://support.atlassian.com/jira-work-management/docs/workflows-and-statuses-for-the-board/]\r\nh3. Actual Results\r\n\r\nOnly Admins are able to re-arrange the column order. \r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2025-03-28T11:19:34.000+0000","comments":[{"text":"This issue has now been fixed.","author":"Matt Di Berardino"}]},{"summary":"User picker fields (single and multiple) are not available for customize cards on business project board","key":"JWMCLOUD-872","url":"https://jira.atlassian.com/browse/JWMCLOUD-872","type":"Bug","priority":"","description":"h3. Issue Summary\r\nBusiness project board allows to add custom fields via board > [... More] > [Customize cards].\r\nPreviously user picker fields (single and multiple) are listed in this list and users could add the fields to cards.\r\n\r\nRecently it disappeared from the list, so that users can't see the user picker fields in business project board.\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to Business project board\r\n # [... More] > [Customize cards]\r\n# User picker fields are not listed\r\n\r\nh3. Expected Results\r\nUsers can add user picker fields for business project board\r\n\r\nh3. Actual Results\r\nUser picker fields are not listed in customize cards option\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T03:10:05.000+0000","comments":[{"text":"We have a fix for this issue in the deployment pipeline. ETA Tuesday evening AEDT.","author":"Sylvain - Jira - Eng"}]},{"summary":"When adding a category value to a Jira work item through the list view of a JWM team-managed project, the field value dropdown does not close","key":"JWMCLOUD-869","url":"https://jira.atlassian.com/browse/JWMCLOUD-869","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen adding a category value to a Jira work item through the list view of a JWM team-managed project, the field value dropdown does not close\r\n !image-2025-03-26-15-07-43-994.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n # Create a JWM Team-managed project\r\n # Access the List view tab\r\n # Ensure the field category is display as a column\r\n # Ensure the List view is not grouped by Category\r\n # Include a category value in an issue via the dropdown available in the column\r\n # See that the dropdown of the category available values does not close\r\n # A hard refresh in the page is required to see the value persisted.\r\n\r\nh3. Expected Results\r\nDropdown should close upon value selection confirmation.\r\n\r\nh3. Actual Results\r\nDropdown remains open and can't be closed even when clicking outside of it. A hard refresh in the page is required.\r\n\r\nh3. Workaround\r\nRefresh the page to see the value persisted.","createDate":"2025-03-26T18:13:31.000+0000","comments":[]},{"summary":"Unable to sort items in the list view if you are sorting the data on the basis of field","key":"JWMCLOUD-823","url":"https://jira.atlassian.com/browse/JWMCLOUD-823","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUnable to sort items in the list view if you are sorting the data on the basis of field\r\nh3. Steps to Reproduce\r\n # Login in Team Managed Business JWM project\r\n # Navigate to list view\r\n # Add one column in list view for example Date time field (Actual End)\r\n # Now try to sort the item on the basis of Actual End Field\r\n # You will get following exception message \r\n*_\"We can't handle the current filters, please clear to continue_* \r\n\r\nh3. Expected Results\r\n\r\nIdeally the data should be visible without any issues and it should not through below exception message:\r\n*_\"We can't handle the current filters, please clear to continue_* \r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the list view\r\n{noformat}\r\n\"We can't handle the current filters, please clear to continue  {noformat}\r\nh3. Workaround\r\n\r\nAs a workaround for the user to be able to see the list view again is to update the URL. Post performing the sorting of the actual end field the place where you have *{{sortBy=customfield_XXXX&direction=ASC}}*  change it to `{*}{{sortBy=summary&direction=ASC}}{*}  this will sort the list by summary.","createDate":"2024-11-14T12:48:27.000+0000","comments":[]},{"summary":"The columns in the List View of JWM are reset to default after user logs out and closes the browser","key":"JWMCLOUD-772","url":"https://jira.atlassian.com/browse/JWMCLOUD-772","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe columns in the List View of JWM are reset to default after the user logs out and closes the browser and are not persistent after user logs back in. \r\nh3. Steps to Reproduce\r\n # Open the list view of JWM project\r\n # Add/Remove Columns as needed\r\n # Logout of the Jira session\r\n # Close the browser \r\n # Open the browser again and login to list view\r\n\r\nh3. Expected Results\r\n * Changes made to the columns prior to closing the browser persisted\r\n\r\nh3. Actual Results\r\n * The list view shows default columns and the user loses all the changes they made to the columns\r\n\r\nh3. Workaround\r\n\r\nThe List view is storing column configuration in browser local storage which is why they are not persisting when you change browser or log out of Jira. As an alternative, you can use the \"Issues\" tab in List mode which will persist your preferences - [https://support.atlassian.com/jira-software-cloud/docs/search-for-issues-in-a-project/].","createDate":"2024-08-07T01:58:51.000+0000","comments":[{"text":"The number of people affected is actually growing in out teams, however that may be possible...","author":"Luka Meyli Gömer"},{"text":"We are experiencing the same issue.\r\n\r\nThe problem is that the individual user's settings (filters, grouping, columns etc.) are not saved on user level. They go back to defaults after the session is restored (time has passed, logged out, private mode, using another device, using another web browser).\r\n\r\nIn my opinion keeping the settings on user level is a must have functionality - same as on any internet browser (e.g. chrome, edge) - if you login on any device you'll see all your favourites etc. on any pc you use.\r\n\r\nThis bug was also mentioned in JWMCLOUD-136 (although task got changed from BUG to Suggestion! :() The bug has not been fixed yet despite Ben's comment from 5 Oct {color:#ff0000}2023{color}: +_We've noticed user level persistence has been inconsistent and we're rolling out an update to our persistence model in the coming weeks to fix this._+","author":"mjakubekova"},{"text":"We are also effected by the same issue.\r\n\r\nIs there an update on when this issues is anticipated to be fixed?","author":"Kate Kovtun"},{"text":"This bug has a negative impact on our internal rollout for using Business Projects within our organization. Following for any updates, workarounds & hoping for a fast resolution. TY!","author":"Jaime Shomock"},{"text":"This adds a lot of manual steps to continuously have to recreate the list as desired. And every user has to do this every time they log out.  We would really appreciate for this to be addressed!","author":"Karen Gonzalez"},{"text":"My organization recently changed their policy, so I am logged out now after a certain period of inactivity. For me that equates to logging in to Jira roughly twice a day. So having to continuously recreate the list makes the list view virtually unusable. Please fix ASAP!","author":"Erin Mitchell"},{"text":"Hi everyone,\r\n\r\nThis is Aidan from the Jira team. Thank you for bringing this issue to our attention, but this is the current expected behaviour of the list view.\r\n\r\nTo set the right expectations, we are closing this bug as ‘Won’t Fix' as we do not have any plans to change the behaviour of this feature. As an alternative, you can use the \"Issues\" tab in List mode which will persist your preferences - [https://support.atlassian.com/jira-software-cloud/docs/search-for-issues-in-a-project/].\r\n\r\nThank you again for providing valuable feedback to our team! I will be marking it closed for now.\r\n\r\nAidan","author":"Aidan Hunt"},{"text":"Hello, \r\nHow can you call this expected behaviour?! Our teams have been waiting over 1/2 year for this to be fixed, this is unacceptable!","author":"Luka Meyli Gömer"},{"text":"I agree with Luka, it is unacceptable to not be working on a solution. Jira publicly advertises the list view being customizable: [Customize your list by adding or removing fields | Jira Work Management Cloud | Atlassian Support|https://support.atlassian.com/jira-work-management/docs/customize-your-list-by-adding-or-removing-fields/]. This bug makes that customization unusable. I have not found the \"All Work\" tab list mode that you reference Aidan as an alternative. Please provide more information so I can assess if it is a feasible alternative for my team. Thank you.","author":"Erin Mitchell"}]},{"summary":"Branch deletion webhook faces NullPointerException cluttering the logs ","key":"JSWSERVER-26354","url":"https://jira.atlassian.com/browse/JSWSERVER-26354","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nIn certain conditions mentioned below Jira fails to delete a branch because it already doesn't exist in AO_E8B6CC_BRANCH table therefore a NullPointerException happens filling up the logs without appropriate handling or mention of what repo/branch is missing \r\n{code:java}\r\n2025-03-19 13:09:49,051+0000 http-nio-8080-exec-2356 url: /rest/bitbucket/1.0/webhook/github DEBUG anonymous 789x23101419x3 - 140.82.115.92 /rest/bitbucket/1.0/webhook/github [c.a.j.p.d.r.external.v1.HookResource] Failed to execute web-hook\r\njava.lang.NullPointerException\r\nat com.atlassian.jira.plugins.dvcs.dao.impl.BranchDaoImpl.lambda$asBranches$1(BranchDaoImpl.java:70)\r\nat com.atlassian.jira.plugins.dvcs.dao.impl.BranchDaoImpl.lambda$asBranches$0(BranchDaoImpl.java:59)\r\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\nat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\nat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) {code}\r\nConditions that might cause this :\r\n * Running scheduled DVCS synchronization prior to receiving a webhook\r\n * Deletion webhook received twice\r\n\r\nh3. Environment\r\n\r\nJira 9.6.1\r\nh3. Expected Results\r\n\r\nJira doesn't find the branch and optionally report that the branch is already nonexistent or deleted if the user picks a debugging level of logs\r\nh3. Actual Results\r\n\r\nJira throws a null pointer exception at each failing webhook with no helpful information on the impacted repository/branch \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available. ","createDate":"2025-03-27T09:06:09.000+0000","comments":[]},{"summary":"DVCS Synchronization Enters Infinite Loop Due to Queued Messages for Deleted Branches","key":"JSWSERVER-26329","url":"https://jira.atlassian.com/browse/JSWSERVER-26329","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDVCS Synchronization Enters Infinite Loop Due to Queued Messages for Deleted Branches\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Set up a Jira instance with DVCS functionality enabled, using version *10.2.0* or later. (bulk sync was added in this version).\r\n # Configure a DVCS repository with multiple branches, including some that will be deleted after initial synchronization.\r\n # Initiate a manual soft synchronization to queue messages for all branch heads.\r\n # Delete one of the branches in the GitHub repository after the initial synchronization. It's important that the branch is deleted from the repository after the message is created, but before the message queue processes it.\r\n\r\nh3. Expected Results\r\n - Jira should detect the deleted branch and remove or invalidate any queued messages related to it.\r\n - The synchronization process should complete successfully for all existing branches without errors.\r\n\r\nh3. Actual Results\r\n - Jira attempts to process the message for the deleted branch, resulting in repeated failures and retries.\r\n - The synchronization process for the affected repository does not complete successfully. In the UI we can confirm this by observing that the affected repositoriy is just spinning infinitely.\r\n - The logs will become spammed with very frequent 404 messages for the deleted branch.\r\n\r\nThe below exception is thrown in the {{atlassian-jira.log}} file:\r\n{code:java}\r\n2025-03-06 07:35:36,866+0000 DVCSConnector.MessageExecutor:thread-1 WARN      [c.a.j.p.dvcs.sync.BulkCommitsMessageConsumer] An Not Found (404) exception occurred when obtaining changeset range\r\norg.eclipse.egit.github.core.client.NoSuchPageException: Not Found (404)\r\n\tat org.eclipse.egit.github.core.client.PageIterator.next(PageIterator.java:180)\r\n\tat com.atlassian.jira.plugins.dvcs.spi.github.CustomCommitService.getChangesetPollResultForBranch(CustomCommitService.java:83)\r\n\tat com.atlassian.jira.plugins.dvcs.spi.github.GithubCommunicator.getChangesetsRangeForBranch(GithubCommunicator.java:372)\r\n\tat com.atlassian.jira.plugins.dvcs.service.remote.CachingCommunicator.getChangesetsRangeForBranch(CachingCommunicator.java:168)\r\n\tat com.atlassian.jira.plugins.dvcs.service.remote.DvcsCommunicatorWithStatsImpl.getChangesetsRangeForBranch(DvcsCommunicatorWithStatsImpl.java:156)\r\n\tat com.atlassian.jira.plugins.dvcs.sync.BulkCommitsMessageConsumer.onReceive(BulkCommitsMessageConsumer.java:75)\r\n\tat com.atlassian.jira.plugins.dvcs.service.MessageExecutor$MessageRunnable.doRun(MessageExecutor.java:368)\r\n\tat com.atlassian.jira.plugins.dvcs.service.MessageExecutor$ReleaseTokenAndEnqueueNextMessage.run(MessageExecutor.java:277)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:840)\r\nCaused by: org.eclipse.egit.github.core.client.RequestException: Not Found (404)\r\n\tat org.eclipse.egit.github.core.client.GitHubClient.createException(GitHubClient.java:622)\r\n\tat org.eclipse.egit.github.core.client.GitHubClient.get(GitHubClient.java:815)\r\n\tat com.atlassian.jira.plugins.dvcs.spi.github.GithubClientWithTimeout.lambda$get$0(GithubClientWithTimeout.java:77)\r\n\tat com.atlassian.jira.plugins.dvcs.spi.github.GithubClientWithTimeout.executeRequest(GithubClientWithTimeout.java:113)\r\n\tat com.atlassian.jira.plugins.dvcs.spi.github.GithubClientWithTimeout.get(GithubClientWithTimeout.java:77)\r\n\tat org.eclipse.egit.github.core.client.PageIterator.next(PageIterator.java:178)\r\n\t... 10 more\r\n{code}\r\nh3. Workaround 1: Force stop the affected repositories.\r\n\r\n{*}Force Stop and Sync Affected Repositories{*}: Manually abort the running synchronization for the affected repositories and initiate a forced synchronization.\r\n - Use a {{curl}} command or Postman to send a {{POST}} request to Jira's internal API endpoint. This request will abort any running synchronization for the specified repository.\r\n - *API Endpoint:*\r\n{code:java}\r\nPOST <JIRA_BASE_URL>/rest/dvcs-connector-internal/1.0/repository/{id}/abortRunningSync\r\n{code}\r\n\r\n - *Example curl Command:*\r\n{code:java}\r\ncurl -X POST -u your-username\\:your-api-token \\\r\n'<JIRA_BASE_URL>/rest/dvcs-connector-internal/1.0/repository/{id}/abortRunningSync'\r\n{code}\r\n\r\nThis will abort the runing sync for the affected repository. Do note that this is a hard stop. Data that was queued to be processed is also dropped. On next soft sync the data should be queued again and synced properly.\r\nh3. Workaround 2: Revert to Previous Sync Mechanism\r\n\r\nThe bulk commit sync feature in Jira 10.2.0 has a dark feature flag {{dvcs.connector.github.bulk.commit.soft.sync.disabled}} that can be toggled to revert to the previous, slower sync mechanism. This can help avoid the infinite loop issue caused by messages for deleted branches.\r\n\r\n*Steps:*\r\n\r\n1. Access dark feature management using the [Atlassian guide]([https://confluence.atlassian.com/jirakb/how-to-manage-dark-features-in-jira-server-and-data-center-959286331.html]).\r\n2. Add dark feature {{dvcs.connector.github.bulk.commit.soft.sync.disabled}}\r\n\r\nFuture syncs will now work using the older single commit sync mechanisms.","createDate":"2025-03-06T07:44:23.000+0000","comments":[]},{"summary":"Set Required Fields pop up not displaying when committing changes to AR Plans","key":"JSWSERVER-26255","url":"https://jira.atlassian.com/browse/JSWSERVER-26255","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen attempting to commit changes, including creating an issue from any Plans view, Jira hangs in the 'Saving in Jira...' progress screen.\r\n\r\nIn previous versions, a pop-up screen would appear prompting the user to fill in required fields, but this no longer happens.\r\n\r\nh3. Steps to Reproduce\r\n# Set required field/s\r\n# Go to the Plan and create an issue within it\r\n# Click on *Review Changes* >> *Save selected changes in Jira*\r\n\r\nh3. Expected Results\r\nThe Set Required Fields window would display\r\nExample from working versions:\r\n !Set_Required_Fields.png|thumbnail! \r\n\r\nh3. Actual Results\r\nJira hangs in the 'Saving in Jira...' progress screen:\r\n !Saving_in_Jira.png|thumbnail! \r\n\r\nh3. Workaround\r\nh4. Option 1\r\n* *Supported Custom fields* -> [Configure custom fields in Advanced Roadmaps|https://confluence.atlassian.com/pages/viewpage.action?pageId=1431244540]\r\n** If the required fields are supported, add them to the Plan settings to fix the problem\r\n** Non-supported fields need to be turned 'optional' in Jira to workaround this bug\r\n\r\nh4. Option 2\r\nEnable {{com.atlassian.portfolio.issueCreation.ShowWorkFlowValidatorFields.disabled}} [dark feature|https://confluence.atlassian.com/jirakb/enable-dark-feature-in-jira-959286331.html]:\r\n# Navigate to {{<BASE_URL>/secure/admin/SiteDarkFeatures!default.jspa}}\r\n# Add {{com.atlassian.portfolio.issueCreation.ShowWorkFlowValidatorFields.disabled}} to *Enable dark feature* and click *Add*\r\n\r\nh4. Option 3\r\n# Download the compressed [Jira Software 9.17.4|https://www.atlassian.com/software/jira/download-archives] and extract it\r\n# Go to the following directory path:\r\n** {{atlassian-jira-software-9.17.4-standalone/atlassian-jira/WEB-INF/application-installation/jira-software-application}}\r\n# Copy the following .jar files:\r\n** {{portfolio-plugin-9.17.4.jar}}\r\n** {{jira-portfolio-9.17.4.jar}}\r\n# On Jira 9.17.5, go to the following locations:\r\n** {{<Jira_Installation>/atlassian-jira/WEB-INF/application-installation/jira-software-application}}\r\n** {{<Jira_home>/plugins/installed-plugins}}\r\n# Replace the .jar below with the 9.17.4 previously copied ones:\r\n** {{portfolio-plugin-9.17.5.jar}}\r\n** {{jira-portfolio-9.17.5.jar}}\r\n\r\nh3. Solution\r\nJira Software 9.17.5 is the only affected version. The bug is fixed on version 10.0.0 onwards.","createDate":"2024-12-19T13:26:38.000+0000","comments":[{"text":"We observed this bug in *Jira V9.12.19* .","author":"AdamH"}]},{"summary":"Status breakdown progress bar shows incorrect status and colour in 9.x","key":"JSWSERVER-25315","url":"https://jira.atlassian.com/browse/JSWSERVER-25315","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe status breakdown progress bar shows all green even though the issue itself is in \"To Do\" status.\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n# Create a sample Scrum software project.\r\n# Create a new plan and linked to the newly created scrum board.\r\n# Create a new program and link to the newly created plan.\r\n# Create a new Epic in plan and submit the changes.\r\n# Open the program and check the status breakdown progress bar is all green:\r\n !jira940.png! \r\n\r\nh3. Expected Results\r\n\r\nThe status breakdown progress bar should calculate based on the issue status and shows the correct status color.\r\n\r\nh3. Actual Results\r\n\r\nThe status breakdown progress bar shows all green status that indicates the issue is completed or resolved even though the issue itself is in \"To Do\" or \"In Progress\" status.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nh3. Note\r\n\r\nThe problem is not happening in 8.22.x and 8.20.20 (LTS version)\r\n !jira82020.png! ","createDate":"2023-04-06T09:44:31.000+0000","comments":[{"text":"Hello,\r\n\r\nWhen do you plan to fix the bug, please?\r\n\r\nBest regards.","author":"Anna Tchevardov"},{"text":"Until a resolution will be provided, find below a workaround ..\r\n\r\nAdd these CSS in the Announce Banner.\r\n{code:java}\r\n<style>\r\n div.jpo-inner.jpo-inner-success{background:#14892c;}\r\n div.jpo-inner.jpo-inner-default{background:#707070;}\r\n div.jpo-inner.jpo-inner-inprogress{background:#de9f0b;}\r\n</style> {code}\r\n \r\n\r\nVincent","author":"Vincent (BleuLemon)"}]},{"summary":"The Parent Link field is not cleared when the Issue Type is changed and the Link isn't valid anymore","key":"JSWSERVER-24811","url":"https://jira.atlassian.com/browse/JSWSERVER-24811","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an issue has a Parent Link and its issue type is changed to a type on another hierarchy level, the Parent Link data remains. Consequently, the Parent Link is still visible on the issue view with a warning icon that suggests the Parent Link violates the current Hierarchy configuration and should be updated by the user.\r\n\r\nThis issue is worsened when an Epic Link is also present on the Issue that had the Issue Type changed. The presence of an Epic Link makes Jira automatically hide the Parent Link from the Screens and makes it harder to remove the leftover data.\r\n\r\nThis issue can lead to unexpected and unusual behaviour in Jira. For instance, JQL queries may produce results that differ from what is anticipated. For example, 3rd party app that provides JQL functions to iterate over the Issue hierarchy ({*}linkedIssuesOfRecursive{*}) and can return a different set of issues than Jira functions like({*}childIssuesOf{*}).\r\n\r\nh3. Steps to Reproduce\r\n\r\n*Scenario 1*\r\n # Create a new issue type called 'Initiative'\r\n # Configure the hierarchy to be above Epic (at the top level)\r\n # Create a new issue with the issue type 'Initiative'\r\n # Link an Epic to the new Initiative using the parent link\r\n # Open the Epic and use More > Move to change the issue type to 'Initiative'\r\n\r\n*Scenario 2 (inconsistent results returned from childIssuesOf(...) query)*\r\n # Create a new project.\r\n # Configure the hierarchy like this:\r\n{code:java}\r\n- EpicBusiness\r\n-- Capability\r\n--- Epic\r\n----Story \r\n{code}\r\n\r\nA) The experienced Issue follows the below scenario ...\r\n - The Capability CAP-100 has the EpicBusiness EPB-100 as Parent.\r\n - The Epic EP-100 has CAP-100 as Parent\r\n - The JQL\r\nissue in childIssuesOf(EPB-100)\r\nreturns CAP-100 and all its child : Epic (EP-100), User Story (...), Sub-Task (...)\r\n\r\nB) A user move CAP-100 as an EpicBusiness : EPB-110\r\n - The JQL\r\nissue in childIssuesOf(EPB-110)\r\nreturns always same children as when it was CAP-100\r\n - The Epic EP-100 has EPB-110 as direct Parent, an EpicBusiness ! Normally, only Capabilities should be allowed as Parent of Epic\r\n - The JQL\r\nissue in childIssuesOf(EPB-100)\r\nreturns always same children, including EPB-110 (ex-CAP-100) ! Normally, an EpicBusiness can not have a EpicBusiness as Parent.\r\n\r\nIt is causing many inconsistencies in the users activities\r\n\r\n*Scenario 3 (involved 3rd party plugin)*\r\n\r\n*1.* Install a 3rd party app that provides JQL functions to iterate over Issue hierarchy\r\n\r\n*2.* Create Issue Types \"Initiative\" and \"Capability\" and add them to a Project's Scheme\r\n\r\n*3.* Add the Parent Link Custom Field to all Screens on that Project (to make it easier to follow the steps)\r\n\r\n*4.* Configure the Roadmaps Hierarchy so that Initiative > Capability > Epic\r\n\r\n*5.* Create a set of Issues organized as such:\r\n{code:none}\r\nInitiative 1\r\n  Capability 1\r\n    Epic 1\r\n\t  Story 1\r\n  Capability 2\r\n    Epic 2\r\n\t  Story 2\r\n\r\nEpic 3\r\n  Story 3\r\n{code}\r\n*6.* Create a Filter using the 3rd party app JQL function to list the Hierarchy of the top Issue, like:\r\n{code:none}\r\nissue = \"<Initiative 1 Issue Key>\" OR issueFunction in linkedIssuesOfRecursive(\"<Initiative 1 Issue Key>\", \"is parent of\")\r\n{code}\r\n*7.* Confirm all Issues under the hierarchy of \"Initiative 1\" are listed\r\n\r\n*8.* Change the Issue Type of \"Capability 2\" to Story (Move operation also works) and set it's Epic Link to \"Epic 3\"\r\n\r\n*9.* Reload the Filter and see \"Capability 2\" (now a Story) is still being listed, though it's now in the Hierarchy of \"Epic 3\", not under \"Initiative 1\"\r\n\r\nIf you use Jira's native JQL functions, the Epic Link has precedence over the (invalid) Parent Link and \"Capability 2\" is not listed anymore:\r\n{code:none}\r\nissue = \"<Initiative 1 Issue Key>\" OR issue in childIssuesOf(\"<Initiative 1 Issue Key>\")\r\n{code}\r\nh3. Expected Results\r\n\r\n- The parent link will be cleared as you should be able to only link an issue to a parent issue of the _corresponding hierarchy level_ that you've configured for your plan.\r\n- A Move Issue with change of Type (in Roadmap Hierarchy) must break all Parent Links or be blocked while a Parent-Child link exists\r\n- A Move Issue between JSW Issue Types and JPO Issue Types should be follow same rule\r\n- The JQL childIssueOf() should return children in respect of Hierarchies. Parent Link between Issue Type in same Level hierarchy should be ignored.\r\n\r\nh3. Actual Results\r\n * The parent link data remains and the warning below can be seen next to this field:\r\n{code}\r\nThis link is inconsistent with your Portfolio hierarchy.\r\n{code}\r\n * The parent link can't be edited as there is still Epic Link\r\n * The \"Capability\" Issue has a valid Epic Link which is prioritized by Jira and an invalid Parent Link which is ignored.\r\n * The data is still left over in both DB tables:\r\n{code:java}\r\nissuelink\r\nentity_property {code}\r\n* The JQL childIssueOf() return the same results after move the ticket to another parent hierarchy issue type.\r\n\r\n\r\nh3. Workaround\r\nh4. 1. Create an automation to remove the Parent Link\r\n\r\nCreate an automation rule that will automatically clear the *Parent Link* field whenever an issue is moved to a new issue type, as explained in the KB article linked below:\r\n * [Automation For Jira - How to clear the Parent Link field when an issue is moved to a new type|https://confluence.atlassian.com/pages/viewpage.action?pageId=1206795140]\r\n\r\nh4. 2. Remove Parent Link manually\r\n\r\nTo remove the parent link: \r\n * Convert the issue back to its previous issue type(e.g. Epic).\r\n\r\n * Remove the parent link. \r\n\r\n * Convert back to the new issue type.\r\n\r\nh4. 3. Remove existing data directly from the database\r\n\r\nTo clean up existing Issues' Parent Links refer to this documentation:\r\n * [Searching for child or parent Issues using JQL functions report wrong results in Jira|https://confluence.atlassian.com/pages/viewpage.action?pageId=1282250410]","createDate":"2017-11-28T07:03:18.000+0000","comments":[{"text":"We encountered this issue as well. Using Jira Data Center 7.10.2 with Portfolio version 2.21.0.","author":"Alex Christensen"},{"text":"Workaround: Change the hierarchy in  Portfolio Administration, clear the parent link field, revert the changes you previously made. ","author":"Mihai Schwarz"},{"text":"Thanks Mihai! Works perfectly.\r\n\r\nJust created a hierarchy above Initiative and saved changes. (Didn't bother to associate isssue types or change anything else)\r\n\r\nWent to the Initiative and cleared the Parent Link field. Reverted the changes back to original state in portfolio hierarchy.\r\n\r\nWorked like a charm :)","author":"Gowri Kumar"},{"text":"In my situation I fixed by:\r\n # removing the Epic Link from the Story - which revealed the Parent Link (with the warning icon)\r\n # removing Parent Link\r\n # re-assigning Epic Link\r\n\r\n \r\n\r\nBTW, this can't be done via Bulk Edit since, for some reason, the Issue Search and Bulk Edit recognize the fact that the Parent Link is invalid and, therefore, don't show it in search results or allow it to be set to Empty in a Bulk Edit.  \r\n\r\nPreventative medicine... make sure Epics and Stories use different screen schemes (even better, remove issue type from the screens).  That way users won't be able to turn an Epic into a Story, which is what made this issue manifest in our system.\r\n\r\nDefinitely +1ing this one.\r\n\r\n ","author":"Jordan Janis"},{"text":"This definitely causes incorrect outputs in our filters and structures. It is very difficult to repair because I cannot play around with the Portfolio hierarchy while thousands of users are working with that.","author":"Simone Kaiser"},{"text":"I have this same issue and I do not know how to access the Portfolio Admin for the suggested fix nor do I want it changed for all Initiatives. Our Hierarchy is Initiative > Epic -> Story -> Sub-Task.  Someone linked 3 Initiatives under one \"parent\" initiative. We are having trouble removing the 3 initiatives and unlinking them from the parent initiative. ","author":"Kathleen Black"},{"text":"Same issue for me as Kathleen Black above - it looks like a user has created Epics under a parent Initiative... and then converted those Epics to Initiatives.  And now they themselves have Epics underneath them.\r\n\r\nNeither the issue view, issue edit nor bulk edit screens will allow me to clear the field.\r\n\r\nHowever the fix from Mihai Schwarz is quick and works.  You don't even need to assign an issue type to the dummy entry you create.","author":"Richard Cross"},{"text":"*Workaround*\r\n\r\nCreate an automation rule that will automatically clear the Parent Link field whenever an issue is moved to a new issue type, as explained in the KB article linked below:\r\nhttps://confluence.atlassian.com/jirakb/automation-for-jira-how-to-clear-the-parent-link-field-when-an-issue-is-moved-to-a-new-type-1206795140.html","author":"Julien Rey"},{"text":"Dear all,\r\n\r\nI would like to inform you that the Jira DC Development team has reviewed the following issues: [JPOSERVER-2059|https://jira.atlassian.com/browse/JPOSERVER-2059], [JSWSERVER-21939|https://jira.atlassian.com/browse/JSWSERVER-21939], [JPOSERVER-2895|https://jira.atlassian.com/browse/JPOSERVER-2895], [JPOSERVER-4360|https://jira.atlassian.com/browse/JPOSERVER-4360] and [JPOSERVER-7116|https://jira.atlassian.com/browse/JPOSERVER-7116]. After careful consideration, we have determined that they describe the same issue. Therefore, all issues will be merged into [JPOSERVER-2059|https://jira.atlassian.com/browse/JPOSERVER-2059], while the other issues will be closed. If you would like to keep track of the problem, please vote and watch [JPOSERVER-2059|https://jira.atlassian.com/browse/JPOSERVER-2059].\r\n\r\nAtlassian will continue to watch this issue for further updates, so please feel free to share your thoughts or feedback in the comments.\r\n\r\nSincerely,\r\nDaniel Dudziak\r\nJira DC Senior Software Engineer","author":"Stasiu"},{"text":"Dear all,\r\nI would like to inform you that this issue in the project JPOSERVER is being migrated to the new project JSWSERVER. Your votes and comments will remain unchanged.\r\nOur team at Atlassian will continue to monitor this issue for further updates, so please feel free to share your thoughts or feedback in the comments.\r\nSincerely,\r\nAakrity Tibrewal\r\nJira DC","author":"Aakrity Tibrewal"}]},{"summary":"Editing issue type breaks Roadmap hierarchy","key":"JSWSERVER-24805","url":"https://jira.atlassian.com/browse/JSWSERVER-24805","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a user edits an issue (either with the edit button or bulk update) to update the issue type of an issue, Roadmap does not automatically disassociate the issue from existing parent issue even if it does not match the Roadmap hierarchy configuration.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Create a hierarchy such as : L1 (Level 1 issue), L2 (Level 2 issue), L3 (Epic),...\r\n# Create an issue with Level 1 issue type.\r\n# Create 2 issues with Level 2 issue type.\r\n# Create 2 issues with Epic issue type.\r\n# Access the Roadmap plan which shows the issues.\r\n# Move the newly created Level 2 issues as child issue of Level 1 issue.\r\n# Move each of newly created Epic issues as child issue of Level 2 issues.\r\n# Review and publish the changes from plan.\r\n# Open one of the Level 2 issue in an issue view.\r\n# Edit the issue type of the Level 2 issue to Level 1 issue.\r\n# Access the plan again and we will see the Level 1 issue has an Epic issue as child issue which does not follow the Roadmap hierarchy.\r\n\r\nScreen recording: [^JPO-4277.webm] \r\n\r\nh3. Expected Results\r\n\r\n* Roadmap automatically disassociate the child issue of the parent issue if the configuration is against the Roadmap's hierarchy configuration.\r\n\r\nh3. Actual Results\r\n\r\n* Child issue remains to be associated with the parent issue even though it's against the Roadmap's hierarchy configuration.\r\n\r\nh3. Workaround\r\n\r\n# Expose \"Parent Link\" custom field by following steps [here|https://confluence.atlassian.com/advancedroadmapsserver/showing-advanced-roadmaps-custom-fields-in-jira-857058481.html] and manually remove the invalid child issues from the parent issue.\r\n# Dissociate the child issue from invalid parent issue from the Roadmap plan. Users can drag and drop the issue affected the issue from the plan.","createDate":"2020-06-17T11:00:17.000+0000","comments":[{"text":"Dear all,\r\nI would like to inform you that this issue in the project JPOSERVER is being migrated to the new project JSWSERVER. Your votes and comments will remain unchanged.\r\nOur team at Atlassian will continue to monitor this issue for further updates, so please feel free to share your thoughts or feedback in the comments.\r\nSincerely,\r\nAakrity Tibrewal\r\nJira DC","author":"Aakrity Tibrewal"},{"text":"Closing this ticket as duplicate of JSWSERVER-24811","author":"Julien Rey"}]},{"summary":"When utilizing the sprint name, Jira filter search is rather slow.","key":"JSWSERVER-21918","url":"https://jira.atlassian.com/browse/JSWSERVER-21918","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nWhen a user filter has more than 50+ sprint names selected in the advanced JQL query, it will cause the query to be running slowly. For example:\r\n{code}\r\nproject in (TEST) AND sprint in (Sprint-A, Sprint-B, Sprint-C, Sprint-D and so on....)\r\n{code}\r\n\r\nThe searching does not impact admin users.\r\n\r\nh3. Diagnose\r\n\r\nIn the thread dumps, we can see the long-running stack trace hitting 99% CPU usage is checking the number of sprints for each issue and user permissions:\r\n{code}\r\n13:17:52 - http-nio-8080-exec-6 url: /issues/, /secure/IssueNavAction!default.jspa; user: username\r\nState:RUNNABLE\r\nCPU usage:99.90%\r\nRunning for: 1:35.33\r\nWaiting for\r\nThis thread is not waiting for notification on any lock\r\nLocks held\r\nThis thread holds [0x7fca4dcb0680, 0x7fc988f45820]\r\nStack trace\r\ncom.atlassian.greenhopper.customfield.sprint.IssueCountPerSprintCollector.collect(IssueCountPerSprintCollector.java:45)\r\norg.apache.lucene.search.Weight$DefaultBulkScorer.scoreAll(Weight.java:233)\r\norg.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:184)\r\norg.apache.lucene.search.BulkScorer.score(BulkScorer.java:39)\r\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:660)\r\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:462)\r\ncom.atlassian.jira.index.stats.IndexSearcherWithStats.search(IndexSearcherWithStats.java:88)\r\ncom.atlassian.jira.index.DelegateSearcher.search(DelegateSearcher.java:169)\r\ncom.atlassian.jira.index.DelegateSearcher.search(DelegateSearcher.java:169)\r\ncom.atlassian.jira.index.UnmanagedIndexSearcher.search(UnmanagedIndexSearcher.java:9)\r\ncom.atlassian.jira.index.DelegateSearcher.search(DelegateSearcher.java:169)\r\ncom.atlassian.jira.index.ManagedIndexSearcher.search(ManagedIndexSearcher.java:15)\r\ncom.atlassian.jira.issue.search.providers.LuceneSearchProvider.search(LuceneSearchProvider.java:324)\r\ncom.atlassian.jira.issue.search.providers.LuceneSearchProvider.search(LuceneSearchProvider.java:158)\r\njdk.internal.reflect.GeneratedMethodAccessor2973.invoke(Unknown Source)\r\njdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(java.base@11.0.19/DelegatingMethodAccessorImpl.java:43)\r\njava.lang.reflect.Method.invoke(java.base@11.0.19/Method.java:566)\r\ncom.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\ncom.sun.proxy.$Proxy403.search(Unknown Source)\r\njdk.internal.reflect.GeneratedMethodAccessor2973.invoke(Unknown Source)\r\njdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(java.base@11.0.19/DelegatingMethodAccessorImpl.java:43)\r\njava.lang.reflect.Method.invoke(java.base@11.0.19/Method.java:566)\r\ncom.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:130)\r\ncom.sun.proxy.$Proxy403.search(Unknown Source)\r\ncom.atlassian.greenhopper.service.sprint.SprintIssueServiceImpl.getIssuesCountForSprints(SprintIssueServiceImpl.java:382)\r\ncom.atlassian.greenhopper.service.sprint.SprintServiceImpl.getSprintsAccessibleFromIssue(SprintServiceImpl.java:750)\r\ncom.atlassian.greenhopper.service.sprint.SprintServiceImpl.getSprints(SprintServiceImpl.java:190)\r\ncom.atlassian.greenhopper.customfield.sprint.SprintResolver.getSprintsStreamByPredicate(SprintResolver.java:84)\r\ncom.atlassian.greenhopper.customfield.sprint.SprintResolver.findSprintIdsByName(SprintResolver.java:42)\r\ncom.atlassian.greenhopper.customfield.sprint.SprintClauseValidator.validate(SprintClauseValidator.java:70)\r\ncom.atlassian.jira.jql.validator.ValidatorVisitor.validateClause(ValidatorVisitor.java:132)\r\ncom.atlassian.jira.jql.validator.ValidatorVisitor.visit(ValidatorVisitor.java:73)\r\ncom.atlassian.jira.jql.validator.ValidatorVisitor.visit(ValidatorVisitor.java:36)\r\ncom.atlassian.query.clause.TerminalClauseImpl.accept(TerminalClauseImpl.java:143)\r\ncom.atlassian.jira.jql.validator.ValidatorVisitor.getMessagesFromSubClauses(ValidatorVisitor.java:165)\r\ncom.atlassian.jira.jql.validator.ValidatorVisitor.visit(ValidatorVisitor.java:55)\r\ncom.atlassian.jira.jql.validator.ValidatorVisitor.visit(ValidatorVisitor.java:36)\r\ncom.atlassian.query.clause.AndClause.accept(AndClause.java:28)\r\ncom.atlassian.jira.bc.issue.search.DefaultSearchService.validateQuery(DefaultSearchService.java:272)\r\n{code}\r\n\r\nh3. Current Design\r\n\r\nEvery time user asks for sprint we're checking if the user has access to it and it has if the user:\r\n* is an admin,\r\n* OR has access to the board\r\n* OR has access to any issue from this sprint.\r\n\r\nh3. Suggestions\r\n\r\nTo fix that problem by creating a feature flag or cache the results to improve the performance in the future.\r\n\r\nh3. Workaround\r\n\r\nTo speed up the searching process, we recommend a workaround by replacing sprint names with sprint IDs.\r\n\r\nTo find the Sprint ID, please paste the sprint names and run the SQL query:\r\n{code}\r\nSELECT ID, NAME FROM AO_60DB71_SPRINT WHERE NAME like '%SPRINT_NAME%';\r\n{code}\r\n(i) Replace *SPRINT_NAME* with the sprint name from the filter.\r\n\r\nOr you can find the sprint id following the [Jira Software: How to identify the ID of a sprint|https://confluence.atlassian.com/jirakb/jira-software-how-to-identify-the-id-of-a-sprint-779159065.html] KB article.\r\n\r\nUpdate all the sprint names to id from the filter and then saved the filter.\r\n\r\n\r\n\r\n\r\n","createDate":"2023-08-16T12:38:57.000+0000","comments":[]},{"summary":"Adding a condition on a workflow changes the ordering of the status in the board","key":"JSWSERVER-21576","url":"https://jira.atlassian.com/browse/JSWSERVER-21576","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe status order changes in Jira board after adding a condition to the workflow\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Import the workflow and add a scheme for this workflow  \r\n[^Software-Simplified-Workflow-for-Project-TK.jwb] \r\n # Create a project with this scheme \r\n # Arrange the board columns like below  \r\n!board-columns.png|thumbnail! \r\n # Create a sprint and try to transition the issue, {{In progress}} status appears above {{Rejected}}\r\n !order-before-condition.png|thumbnail! \r\n # Edit the workflow and add a new condition for transition between {{NEW}} and {{TO DO}} \r\n !workflow-condition.png|thumbnail! \r\n # Publish the workflow\r\n !order-after-condition.png|thumbnail! \r\n\r\nh3. Expected Results\r\n{{In progress}} status should still appear above {{Rejected}}\r\nh3. Actual Results\r\n{{In progress}} status appears below {{Rejected}}\r\n\r\nh3. Workaround\r\nTransition the issue to the required status by dropping the issue in the respective box\r\n","createDate":"2022-12-19T08:53:09.000+0000","comments":[{"text":"We just added a condition and since, the cancel status appears before the done status in every boards... customers are not happy.\r\n\r\nTried using opsbar sequence property and it didn't help :(\r\n\r\nJira 9.12.14 affected :(","author":"Jonathan Claveau"},{"text":"Same issue here","author":"larndt"}]},{"summary":"The development status summary panel is timing out when under heavy load even if data is available","key":"JSWSERVER-20977","url":"https://jira.atlassian.com/browse/JSWSERVER-20977","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe development status summary panel is timing out when under heavy load even if data is available\r\nh3. Steps to Reproduce\r\n# Connect a DVCS integration (Bitbucket, Gitlab or Github) with a linked issue\r\n# Open 30+ tabs that auto-refresh (can use http://www.dummysoftware.com/easy-auto-refresh/?ref=chrome for this)\r\n# In a separate browser open that same issue and refresh a few times until you see an error message about timeout or failure to load under the dev panel:\r\n !Screenshot 2021-06-09 at 16.22.00.png|thumbnail! \r\n\r\nThe following exception is thrown into logs:\r\n{noformat}\r\n2021-06-09 15:02:19,323+0100 http-nio-2990-exec-218 WARN admin 902x36691x25 eeeqnf 127.0.0.1 /rest/dev-status/1.0/issue/summary [c.a.j.p.devstatus.provider.DefaultCoordinator] GitLab (timeout after 5000ms, cached data returned)\r\n{noformat}\r\n\r\nThere’s only 15 threads max that can fetch DVCS data at a time so this is causing contention:\r\n\r\n{code:java}\r\n   this.dvcsDataFetcherExecutor = ThreadPool.builder()\r\n                .name(\"dvcs.\" + dvcsType())\r\n                .maxThreads(15)\r\n                .boundedQueue(QUEUE_SIZE)\r\n                .build();\r\n{code}\r\n\r\nand the call to timeout. Note that increasing the timeout will not help here.\r\n\r\n\r\nh3. Expected Results\r\nDVCS data related to the issue should load in the Dev Panel.\r\nh3. Actual Results\r\nData is not loaded into the dev panel which should return either the cached existing data or the new one stored into DB after soft or hard sync.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-06-09T14:26:43.000+0000","comments":[{"text":"The issue also happens in v9.12.14","author":"olgap"}]},{"summary":"Links in Kanplan acknowledge feature in dashboards are not working","key":"JSWSERVER-19751","url":"https://jira.atlassian.com/browse/JSWSERVER-19751","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a Kanban backlog board is being used in a gadget on a dashboard, a Kanplan acknowledge section is being rendered on top of it with the following text:\r\n\r\n{quote}A bigger and better backlog has just landed\r\nWe've created a dedicated space for you to plan in the new Kanban backlog. This board will now be a distraction-free zone for your team to focus on work-in-progress.{quote}\r\n\r\nThat acknowledgment has links like \"Take me there\", \"Close\", etc, and none of them are working when viewed on the dashboard. The same links work fine when the acknowledgement is viewed in the board view.\r\n\r\nh3. Steps to Reproduce\r\n# Create a Kanban project\r\n# Create a Kanban board\r\n# Enable Kanban feature by dragging unmapped status to the leftmost column in \"Columns\" configuration of the board\r\n# Use this board in a dashboard gadget\r\n\r\nh3. Expected Results\r\nUsers are able to dismiss the alert when rendered on a dashboard.\r\n\r\nh3. Actual Results\r\nClicking on any links in the alert do nothing. Nothing is logged in the Javascript console either.\r\n \r\nh3. Workaround\r\nIt is possible to disable the banner altogether by modifying {{$JIRA_INSTALL/atlassian-jira/WEB-INF/application-installation/jira-software-installation/jira-greenhopper-plugin-xxxx.jar/atlassian-plugin.xml}} and commenting out all sections referencing KanplanAcknowledge resources:\r\n\r\n{code:xml}<!--<resource type=\"download\" name=\"KanPlanAcknowledge.js\" location=\"includes/js/rapid/ui/kanplan/KanPlanAcknowledge.js\"/>-->\r\n<!--<resource type=\"download\" name=\"KanPlanAcknowledge.soy.js\" location=\"includes/js/rapid/ui/kanplan/KanPlanAcknowledge.soy\"/>-->{code}\r\n\r\nSave the modified file in a JAR file, and restart Jira for change to take effect.","createDate":"2018-11-19T11:36:09.000+0000","comments":[{"text":"As an adminitrator of a Jira Software Server instance, the workaround worked on my Jira v7.13.0 installation.","author":"Valsaa"},{"text":"In 7.6.16 the board will only display an error:\r\n{noformat}\r\nException: Error: No jira-agile/rapid/ui/kanplan/kanplan-acknowledgeResource:\r\n \r\n$BASEURL/s/2b34135516436c66dc4008be143a9a30-CDN/-wzvu94/76018/555d62bf9c44f2f8cb402b18979ce098/c04a1d358299041d8938caf7d7bdee3f/_/download/contextbatch/js/_super/batch.js?locale=en-USLine: 25Column: 983Exception: TypeError: GH.RapidBoard.State is undefinedResource:\r\n \r\n$BASEURL/s/2a1c25626d34b91d7303e3792d9be24e-CDN/-wzvu94/76018/555d62bf9c44f2f8cb402b18979ce098/a7569d1b4834118095b0394249632b3f/_/download/contextbatch/js/greenhopper-rapid-non-gadget,atl.general,gh-rapid,jira.project.sidebar,com.atlassian.jira.projects.sidebar.init,jira.global,jira.general,-_super/batch.js?agile_global_admin_condition=true&healthcheck-resources=true&is-server-instance=true&is-system-admin=true&jag=true&jaguser=true&locale=en-US&nps-not-opted-out=true&richediton=true&whisper-enabled=trueLine: 14595Column: 269\r\n {noformat}","author":"Thomas Weißschuh"},{"text":"We face the same problem here.\r\n\r\nJust wondering: As customers pay for Atlassian support, they should be able to expect a fix for such a bug (honestly, it should be found in Atlassians own tests before the software gets released) at least in the next long term release. Instead, after more than a year Atlassian is still gathering impact. What do you charge for support when so many issues do not get fixed? Most customers are more interested in reliable software than in new features.","author":"Antje Stejskal"},{"text":"This is so crucial and basic. We do not want to look at a redundant message that we can not close or interact with every time we open our dashboard. ","author":"Hannah Bölling"}]},{"summary":"Migrating workflows on existing projects can impact Agile reporting if statuses are changed","key":"JSWSERVER-16687","url":"https://jira.atlassian.com/browse/JSWSERVER-16687","type":"Bug","priority":"","description":"h3. Summary\r\n It appears Jira Software loses viability on an issue's change history when a previously existing status is removed ( changed ) from the project's workflow. This affects the historical reporting on the various agile charts for the affected project.\r\nh3. Steps to Reproduce\r\n # Configure a workflow with the following statuses\r\n ## Open -> In Progress -> Resolved -> Closed\r\n # Create a sprint, add an issue from the backlog, transition every step from Open until Closed, and complete the sprint\r\n # Create new workflow with the following statuses\r\n ## Open -> In Progress -> Status 9\r\n # Migrate workflow, map issues in Resolved and Closed to Status 9\r\n\r\nh3. Expected Results\r\n\r\nAgile reports are unaffected by this change\r\nh3. Actual Results\r\n\r\nSprint report show issues moved from Resolved and Closed to Status 9 as being In Progress and Removed From Sprint. Cycle Time is also incorrectly calculated for these issues as well. See attached screenshots.\r\n\r\nIssue history:\r\n !issue-history.png|thumbnail!\r\n\r\nSprint report:\r\n !sprint-report-bad.png|thumbnail!\r\n\r\nNotice how the Sprint report shows issue 1 as Open instead of Status 9\r\nh3. Notes\r\n\r\nOther Agile reports may be affected from this change.\r\n While the original report comes from Jira 6.4 / Jira Agile 6.7 we reproduced this problem in Jira 7.11 too.\r\n\r\nThis can affect any status on the far right or far left for example if you leave out a to do status from the old workflow, the sprint report will not see that the issues were ever \"started\" and it will negatively affect burndown\r\nh3. Workaround\r\n\r\nModify the affect project's workflow, add changed status back, and map this status to a column in the project's agile board(respective to their position in the old board i.e. far right or far left) They do not need transitions to or from other statuses. In the example above Agile reporting is fixed by adding Resolved and Closed back to the affected project's workflow and mapping the statuses to the Done column accordingly. See attached screenshot.\r\n\r\n!sprint-report-fixed.png|thumbnail!","createDate":"2018-07-16T21:40:59.000+0000","comments":[{"text":"I'm having the exact same issue. Trying a re-index to see if that helps...at its surface this seems like a pretty big bug......we're a VERY LARGE enterprise customer running JIRA v7.6.7","author":"David Phillips"},{"text":"+1 another large enterprise customer running 7.10.1 and seeing this same issue. The work around definitely works, but is certainly inconvenient.","author":"Xaviar Steavenson"},{"text":"Also having this issue (in cloud). This impacted 4 projects during an audit period, and could have had extreme consequences for those teams.","author":"Rabbit Stoddard"},{"text":"This appears to be affecting us as well. Doing more testing but at first glance we are seeing exactly this.","author":"Josh Sisk"},{"text":"Possibly due to the creation of a new workflow and the deleting of the previously used one, the workaround does not appear to work for my organization.","author":"Mark Holden"},{"text":"I think that this problem should be a bit higher.  If they are encouraging a healthy Jira environment, but implementing unification changes for states across the instance (if you have 40 statuses that mean nearly the same thing), when you attempt to convert a workflow to utilize one and remove the old state off of the board, it messes with the area's sprint and velocity reports. In my mind, this should have snapshot of what it was when the work was done on the sprint, not how the board's current state is.","author":"Christina Robinson"},{"text":"This is affecting us as well (another very large enterprise customer). Agree that this should be ranked higher.","author":"astravalters"},{"text":"We've also seen the mismatch, do we have an idea when this issue will be better handled?","author":"William.falconer"},{"text":"Just happened to me as well with the workflow change. It's a concerning result.","author":"Logan Marks"},{"text":"We created company templates and slowly moving projects to our new template, after migrating old sprint reports does not show any story points since closing statutes haved change a lot compared to very old templates.\r\n\r\nThe workaround is not a good idea, we would have to keep old statutes in our new templates, Jira should manage this properly by itself.\r\n\r\nWe have over 9000 users and more and more are complaining about this problem, will Atlassian do something about it?","author":"Jonathan Claveau"},{"text":"Significant impact as well. We updated our workflow to add future steps, and all issues from previously closed sprints moved into our backlog. ","author":"Brendan Cannon"},{"text":"Hi Team , any solution for this issue  .  ","author":"Priyanka sharma"},{"text":"This is happening to my team, however we're on CLOUD and not server.  I added an additional workflow step (in the done category), however now Sprint Reports see them as In Progress, and not in the new status.  If you go into the query (in the sprint report) it appears in the correct status.  \r\n\r\nTLDR - if you change a workflow for issues in sprint, some may not appear to map correctly to the new statuses inside sprint reports","author":"Chris Buzon"},{"text":"We have this problem on 8.11.0 Data center.","author":"Pascal Robert"},{"text":"Can we get prioritize this issue please? Don't think *Symptom Severity: Severity 2 - Major* means it can be open for 2 years. Cmon Atlassian. ","author":"Sid"},{"text":"We have a project to cleanup the workflow statuses on our Jira instance running on 8.5.8, however, due to this issue we are unable to achieve our requirement. Please provide a solution to this issue.","author":"Sreedevi Raman Pisharody"},{"text":"This is a {color:#ff0000}SEVERE{color} and {color:#ff0000}MAJOR{color} problem with the basic functionality of Jira that renders the system useless.  If we can't make workflow changes for any reason whatsoever this is a {color:#ff0000}show stopping{color} BUG!  Using Jira Datacenter\r\n * v8.14.0#814001","author":"Recurly Operations"},{"text":"We too suffer from this problem. A recent fix in our workflow renders all reports of previous sprints useless. Detemination of velocity for multiple teams is impacted.","author":"Alex van Zanten"},{"text":"We recently made a status change in our default workfow, used by a couple of hundred teams. This known error really caught us off guard. The teams are negatively affected by this: they are missing crucial steering- and report information.\r\n\r\n- Velocity cannot be determined anymore for current sprints / releases;\r\n- Data can not be compared anymore to previous sprints;\r\n- All in all, the report information now feels 'inrealiable\" to our users.\r\n\r\nI'm really surprised, that this major error is still \"gathering impact\" and prioritized as Low. As our Jira users grow rapidly (>5000), we are continuously optimising our configuration. And we should be able to make changes - like this status change - without losing information along the way, and without users losing confidence in the tool.\r\n\r\nPlease, implement a solution for this error and give it more priority.","author":"Michelle de Bruijn"},{"text":"Hi Atlassian,\r\n\r\nI think you should read this great article I found on the web: [https://www.atlassian.com/agile/scrum/scrum-metrics]\r\n\r\nIt says:\r\n{quote}*Summary:* _Scrum metrics are specific data points that scrum teams track and use to improve efficiency and effectiveness. Scrum teams use metrics to inform decision-making and become more efficient in planning and execution, as well as set target goals and improvement plans._\r\n\r\n“If you can’t measure it, you can’t improve it,” noted famous management thinker Peter Drucker. While this isn’t a statement that applies to every facet of life, it does apply to teams practicing agile scrum. By using certain metrics, scrum teams can adjust, pivot, and refine team effectiveness.\r\n{quote}\r\nLooks like your teams don't really understand the importance of having reliable data with which to measure, track, and improve. It's possibly one the most important aspects of agile methodologies, in my (and your) opinion. Such a bizarre disconnect between your marketing/outreach and dev teams...","author":"Desmond Cox"},{"text":"Can we please get movement on this bug? It is impacting nearly a dozen of our engineering teams","author":"Abiy Kaltiso"},{"text":"Look at the logic for the BURNUP Charts which work before and after conversion with historical data!\r\n\r\n!image-2023-01-11-14-00-16-407.png!\r\n\r\n ","author":"2Manyc0des!"},{"text":"{panel:title=Atlassian Update – 07 June 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. We realize it still occurs and impacts your organization. We are now working on multiple customer requests and on new features, so we have to postpone our resolution of this issue. We’ve decided to move this issue to our long-term backlog.\r\n\r\nThe workaround for this bug is as follows:\r\nModify the affected project's workflow, add the changed status back with no transitions, and map this status to a column in the project's agile board (respective to their position in the old board i.e. far right or far left)\r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\n\r\nSławomir Zaraziński\r\n\r\nJira Developer\r\n\r\n{panel}","author":"Sławomir Zaraziński"},{"text":"We came across this bug on 7th of June 2023, just when this update comment was made.\r\n\r\nOur testing to put the status back (and bulk migrate issues back to that old status) did not resolve the problem - and we're not happy to apply this workaround en-mass unless it works for our testing.\r\n\r\nAny other things to try?\r\n\r\nCan devs tell us what the fields that the reporting is reading off - for sure they are fields we can't see with frontend - but people might be able to fix data in the database directly - if there's documentation on how the reporting functions work.","author":"Eric Lee"},{"text":"Found a quick and easy fix for this- at least in the server version.  Since the reports are based off the columns in the board instead of the issue statuses themselves (take a look at the cumulative report- you see column headings- not statuses) simply delete and re-create your columns.  \r\n\r\nWe were standardizing projects where some had the final status of \"Done\" and others \"Closed\". We wanted them all as \"Closed\", so created standard schemes and moved all projects to those schemes.  Where Done was changed to Closed, we lost all of our completed issues in our reports.\r\n\r\nWent into the board settings and deleted the column for \"done\", and replaced it with a new column \"closed\".  Viola!  All of our completed issues magically re-appeared!","author":"Michael Ballenger"},{"text":"Why has this Jira product defect has not been fixed yet? We are now encountering this issue after we renamed a few Jira statuses for standardization. We can not revert the Jira statuses that were not renamed...... ","author":"John.Morales"},{"text":"It's been 6 years since this software defect has been reported. Why isn't this defect resolved by now. Where is our Atlassian Jira Product Manager / Owner who is representing the voice of the customer. Please prioritize this product software defect instead of working on dark mode feature.","author":"John.Morales"},{"text":"HI Daniel Dudziak, this product defect has been reported for several years without a resolution. Why is Atlassian Jira Software product support not prioritizing this major product defect? All of our reports are now inaccurate and the workaround solution is not optimal. I am requesting to revisit this product defect and discuss further with your senior management and product management.","author":"John.Morales"}]},{"summary":"Timeout errors can occur when completing sprints in Scrum boards","key":"JSWSERVER-16329","url":"https://jira.atlassian.com/browse/JSWSERVER-16329","type":"Bug","priority":"","description":"h3. Summary\r\nIf completing a sprint takes longer than 60 seconds one will experience a timeout message similar to the following:\r\n !release_timeout.png|thumbnail! \r\n\r\nh3. Environment\r\n* Bulk editing large amount of issues ( 200+ ) takes longer than 60 seconds\r\n\r\nh3. Steps to Reproduce\r\n# To reproduce artificially, lower the [AJAX timeout |https://confluence.atlassian.com/jirakb/how-to-change-the-default-ajax-timeout-in-jira-server-824345485.html]to something like 10 seconds and do a sprint release on 3,000 issues\r\n# Have a large number of issues in a sprint ( 200+ )\r\n# Use remote fields, other customizations, or poor performance that results in bulk editing these issues to take longer than 60 seconds\r\n# Attempt to complete sprint, receive error message\r\n\r\n\r\nh3. Expected Results\r\nA more descriptive error message is displayed like the one we implemented for Kanban boards, https://jira.atlassian.com/browse/JSWSERVER-11775\r\n\r\nh3. Actual Results\r\nA generic timeout error is displayed\r\n \r\nh3. Notes\r\nEven though a timeout error is displayed the process does continue and issues within the sprint are completed successfully ","createDate":"2018-01-10T19:34:53.000+0000","comments":[{"text":"I experience similar issue on 7.12.3.","author":"Krzysztof Krajewski"},{"text":"We have this issue in 7.13.8, even with a small amount bulk edits to a sprint","author":"Joel Berman"},{"text":"We have on 7.13.11","author":"Gonchik Tsymzhitov"},{"text":"We have 8.5.1 and we get a timeout error when releasing issues from a Kanban board.\r\n\r\n!image-2020-05-19-13-02-41-684.png!","author":"Luís GÓIS"},{"text":"I've 8.5.0, all time when I close sprint, go timeout. When I close, I put all issue to next sprint, if Jira go time, it put them in backlog","author":"Stefano Falasca"},{"text":"We are experiencing this when clicking \"Release\" in a Kanban board. We are getting a timeout and tickets are not removed from the \"DONE\" column. This occurs for us in Jira Datacenter 8.5.5","author":"Heather Ungarten"},{"text":"Got the same going on here - running 8.7.1.  I just hit \"Complete Sprint\" and chose to move 662 issues that are not yet complete to the new move.  That timed out.  This happens every month.","author":"Mark Haller"},{"text":"Hello, \r\n\r\nwe are facing the same issues on Jira 8.13.1 and even with 50-100 issues!\r\n\r\nLuckily sometimes the process is completed, but the Banner Error is quite annoying. :)\r\n\r\n \r\n\r\nAny ETA on this?\r\n\r\nThank you!","author":"Roberto Martignano"},{"text":"We are hitting this occasionally as well in 8.13.2. \r\n\r\nThank you,\r\nDarin","author":"Darin Klein"},{"text":"We see this on Jira 8.20.6.  It really messed up the completed sprint value on the completed issues and seemed to pull in a load of issues not associated with the sprint into the Done column on the next sprint.","author":"Cyril Egan"},{"text":"Jira 8.20.2 is also affected, but this could be a temporary workaround: [https://confluence.atlassian.com/jirakb/how-to-change-the-default-ajax-timeout-in-jira-server-824345485.html]","author":"Andreas Morgner"},{"text":"Hi Team,\r\n\r\n \r\n\r\nThis really annoys our users, please try to give a fix ASAP.\r\n\r\n \r\n\r\nThanks","author":"VIMAL RAJ"},{"text":"We need this to be solved urgently as we cannot minimize a number of incomplete issues in Sprint when it's closing. Timeouts caused more and more attempts by a user to complete the current sprint. Thus, there is kind of mess in DB and hours of work to actually make the Sprint look completed successfully.","author":"Yana Stoliarova"},{"text":"v.8.20.14 also have the same error","author":"GI"},{"text":"8.20.17 as well","author":"Alexander Garanin"},{"text":"8.22.6 also have the same error.","author":"Praveen Kumar Tupakula"},{"text":"https://getsupport.atlassian.com/browse/PSSRV-67899\r\n","author":"Barış Türkkal"},{"text":"{panel:title=Atlassian Update – 25 April 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. Feedback like yours helps us release valuable Jira features that solve problems for a greater customer base. To that end, we aim to keep our issues up-to-date so they accurately reflect current customer needs. Based on the impact, we’ve decided to move this issue to our short-term backlog. \r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\n\r\nDaniel Dudziak\r\nSenior Software Engineer\r\n\r\n{panel}","author":"Stasiu"},{"text":"{panel:title=Atlassian Update – 17 July 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. We realize it still occurs and impacts your organization. We are now working on multiple customer requests and on new features, so we have to postpone our resolution of this issue. We’ve decided to move this issue to our long-term backlog. \r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\n\r\nSławomir Zaraziński\r\nJira DC Developer\r\n{panel}","author":"Sławomir Zaraziński"},{"text":"This issue is in 9.3.4 too, as well in sprint having less than 20 tickets even. ","author":"MRANJ"},{"text":"We are running Jira DC V9.4.9 and we are affected by this Bug. Could you please prioritize fixing the Bug?","author":"Mohana Sundar J"},{"text":"Still repro in 9.4.9","author":"Cedric Lavoie"},{"text":"+v8.5.4","author":"Nirmani.Kalakheti"},{"text":"+9.4.14","author":"Cedric Lavoie"},{"text":"The workaround isn't a perfect one, as Jira takes 8-10 minutes to migrate all the data to the next sprint, which means, you cannot do this during a meeting and get a live report without making everyone wait, which isn't efficient","author":"Cedric Lavoie"},{"text":"+9.4.14","author":"Cristina Axentoi"},{"text":"- 9.12.8 also have this issue, even with only 1 or 2 issues in the sprint we are getting similar issue.","author":"sai kumar"},{"text":"Maybe someone will share profiling log? \r\nwhich can help to easier detect an issue? \r\n[~77db90677e1d] how many tickets were in that sprint? \r\n\r\n","author":"Gonchik Tsymzhitov"},{"text":"[~4555db5a5f8f] the sprint has 2 issues or 20 issues the behavior is same time-out issues. I have uploaded the profiling logs to ticket PSSRV-127031","author":"sai kumar"},{"text":"[~jcurry] I cannot reproduce this step:\r\nbq. Use remote fields, other customizations, or poor performance that results in bulk editing these issues to take longer than 60 seconds\r\n\r\nCould you provide specific steps to repro?\r\nWe missed that during triage. I'm closing as \"cannot reproduce\". Feel free to reopen when repro steps are updated.\r\n\r\nWRT the \"Expected Results\", do we actually expect just a different timeout error message? My gut tells me DFTC: avoid the timeout. Either by speeding up the operation or adding a progress bar.\r\n","author":"Maciej Kwidziński"},{"text":"How was this CLOSED as CANNOT REPRODUCE?! This is still VERY ACTIVE on 9.4.23!\r\n\r\n[~mkwidzinski] ?!","author":"Cedric Lavoie"},{"text":"Hello [~0a53cb671019],\r\nI am really sorry for the inconvenience, my team is trying to escalate the issue internally to clarify steps to reproduce. I have changed the status of the bug once again, and right now it is opened in proper state. When we finish the triage process, I will make an update once again.\r\n\r\nBest regards\r\nDaniel Dudziak\r\nJira DC Developer","author":"Stasiu"},{"text":"[~ddudziak] , thank you for the update.\r\n\r\nIt literally just happened to me again, 3 minutes ago:\r\n!image-2024-07-17-10-49-21-851.png|width=497,height=254!","author":"Cedric Lavoie"},{"text":"This is affecting my users as well. Please confirm the plan to fix this.","author":"John Roberts-Davies"},{"text":"The link provided in the Steps to Repro - [https://confluence.atlassian.com/jirakb/how-to-change-the-default-ajax-timeout-in-jira-server-824345485.html] for Ajax timeout does not work anymore and looks like dead. Can you please update?","author":"Aswin Pola"},{"text":"Any progress on that? It's not a minor issue","author":"Jordi Beltran"}]},{"summary":"Remaining Estimate not updated with Split issue feature","key":"JSWSERVER-16204","url":"https://jira.atlassian.com/browse/JSWSERVER-16204","type":"Bug","priority":"","description":"Summary\r\n\r\nWhen an issue is split, the remaining estimate of the issue is not adjusted to reflect the changes in the Original Estimate.\r\n\r\nSteps to reproduce:\r\n\r\n# Set a Scrum board to use Original Estimate with Remaining Estimate as Estimate option.\r\n# Access the backlog and set an estimate of an issue to 2weeks (example). Both Original & Remaining Estimates will be 2w.\r\n# Right-click on the issue and click Split.\r\n# Set the name of the split issue and adjust the estimate of the issue (1w + 1w as an example).\r\n# Click save and check issue detail view of both issues. The remaining estimate of the original issue will remain at 2w. \r\n\r\n \r\nh3. Environment\r\n\r\nJIRA 7.5 and above. \r\n\r\n\r\nh3. Expected Results\r\n\r\nThe Remaining Estimate is updated to reflect the changes with the Original Estimate\r\n\r\nPossible solutions:\r\n* Automatically adjust the remaining estimate\r\n* Let the user input the remaining estimate during the split action\r\n\r\n \r\nh3. Actual Results\r\n\r\nThe Remaining Estimate is not updated to reflect the changes with the Original Estimate\r\n \r\n\r\nh3.Workaround\r\n\r\nManually edit the Remaining Estimate","createDate":"2017-11-17T09:22:35.000+0000","comments":[{"text":"Hello All!\r\n\r\nAlthough this bug seems minor and not really important I would like to emphasize how much it affects our users. We're using Jira as our main ALM tool. About 400 users are planning their work quarterly. Each issue is estimated original to some amount of time. Then assigned to a sprint. If estimation is higher then sprint capacity it's splitted into smaller chunks and estimations are updated accordingly. Users find themselves browsing  and searching for the original issues and correcting the original estimation manually. This makes them feel annoyed and confused. Also, a lot of times, they just forget to update the estimation and this, of course, is shown later in the sprint report. \r\n\r\nPlease find a way to fix this bug, or find a better workaround for it (maybe using a script via script runner add on?..)\r\n\r\nThanks,\r\nTanya.","author":"Tanya Gordon"},{"text":"Split issue is very helpful for future workflow and break down of early estimates in the backlog.\r\n\r\nWithout the update to remaining estimate when splitting a task this feature has low value.","author":"JOCUO"}]},{"summary":"Sprint goal field does not support/handle multi-line texts","key":"JSWSERVER-16161","url":"https://jira.atlassian.com/browse/JSWSERVER-16161","type":"Bug","priority":"","description":"When inputting a multi-line text in the Sprint Goal field, it either does not show the entire text or overlaps with the top of the backlog (see screenshots attached).\r\n\r\nh3. Steps to reproduce.\r\nEnter a text that spans multiple lines in the Sprint Goal field in an Agile Board.\r\n\r\nh3. Expected results.\r\nThe field expands and the page adjusts to show the entire text without overlapping/covering other page elements.\r\n\r\nh3. Actual results.\r\nThe field either shows a single line that does not fit the entire text or expands down covering the top of the backlog.\r\n\r\nh3. Workarounds\r\nNone","createDate":"2017-10-20T20:42:55.000+0000","comments":[{"text":"Updates?","author":"Azfar Masut"},{"text":"I need this too.  I'm very surprised this was overlooked as part of the original implementation.","author":"Phillip Saindon"},{"text":"Do you have an ETA for the fix? Why offering this new UI if its not properly supported....","author":"olga rolf"},{"text":"any update on this one?","author":"Michal Dery"},{"text":":(","author":"Lars Rieger"},{"text":"any update on this please","author":"Tony Doan"},{"text":"Any updates for this?","author":"Kari Kauppi"},{"text":" *eagerly waiting!*\r\n ","author":"Mohsen Mehrafrouz"},{"text":"Are the screenshots from Jira data centre flavor? if yes, what version of Jira data centre are you guys running? We can only type in a single line? how did you get it to accept multi line input to expose this bug? We can't get this bug to surface in V 7.13.5 of Jira data centre.","author":"Omar Rashid"},{"text":"Please vote on https://jira.atlassian.com/browse/JSWSERVER-20433","author":"Omar Rashid"},{"text":"definitely find this limitation to be quite puzzling and unfortunate.","author":"Ilya Bass"},{"text":"I would like to see this feature added as well.  Seems like a simple fix, and we often have more than one goal per sprint.","author":"Patrick McCauley"},{"text":"I like the attitude of commenters above. Not knowing Atlassian takes about 14 years to actually implement customer requests. See you in 10 years. \uD83D\uDE04","author":"Martin Dulák"},{"text":"우선 순위가 Row임에 따라 개선되지 않는 것 같습니다.\r\n\r\n다중 라인이 꼭 되길 희망합니다.\r\n\r\n ","author":"Kwon JinYoung"},{"text":"Seriously! This bug is opened for two years and no one wants to take up the monumental effort of converting a single line text box to a multi-line box? Is the impact on the customer so non-obvious that it takes two years of time to Gather impact?","author":"Shree Kumar"},{"text":"It's really frustrated when our team want to check the sprint goal with the current UI. We have couple goals to check, from UI they're messed up","author":"Long Tran"},{"text":"+1 \r\n\r\nwell, this issue has only 2 years, they really tend to implement this kind of request in sprints of 5 years =D\r\n\r\n ","author":"julio_freitas"},{"text":"Has anyone figured out what to do about this instead of waiting for Atlassian to fix this? I don't expect to be using Jira in 10 years time to see this being addressed. Obviously they have higher priorities with more value to address on their backlog!","author":"Anand Krishnaswamy"},{"text":"Not sure the priority mechanism, but priority \"low\" given so many people complaining about this issue?","author":"严兰涛"},{"text":"Any timeline for this one? ","author":"Paweł Gdula"},{"text":"How hard would it be to add the basic styling afforded descriptions and comments to Goals. I can see why this particular change is a low priority compared to other issues. But given the number of users following this and what would seem to me like a low level of effort it is surprising this is not just getting knocked out. Just add CK editor to the goal input and you are done.\r\n\r\n{color:#FF0000}*Very annoying!!*{color}\r\n\r\n ","author":"Joel Eiholzer"},{"text":"{color:#ff0000}*Very annoying!!*{color}","author":"严兰涛"},{"text":"Agree with \"Joel Eiholzer\", it is open for nearly 4 years? I wonder Jira team is working in misplaced priorities. \r\n\r\ncould you get this fixed ASAP.","author":"Kiran Vasu"},{"text":"Totally Agree. With the depreciation of the Sprint Boards on the Dashboard we now need to revert back to the Boards. Having squad goals in a better format would enrich this page.\r\n\r\nAnother option would be to add them to the insights feature which has just shown up","author":"Paul Garratt"},{"text":"I do agree with what was said, this seems like a pretty low key issue, but a nice addition for the teams working with those boards. #upvote","author":"Julian"},{"text":"*Workaround*: \r\n Add this to the announcement banner:\r\n{code:css}\r\n<style type=\"text/css\">\r\n[data-fieldname=\"sprintGoal\"] {\r\n    white-space: pre-line; \r\n}\r\n</style>\r\n{code}","author":"Kirill Kamenkov"},{"text":"Yes please.  Just enable the simple markup already available for issue descriptions.","author":"Richard Johnson"},{"text":"How can it be possible to still be opened ?\r\n\r\nIt's only 1 line of CSS to change to make it works.\r\n\r\nSprint of 2 weeks = several objectives (I mean, sure !), I can't list my objectives as a list, but I can have a stupid smiley in my comments.\r\n\r\nIt's crazy. (x)(off)(*g)(flag)(?)(n)(n)(n)(n)(n)(n)(n)(n) ( <= this I can do !)","author":"Vincent DECAUX"},{"text":"This is really annoying to see the goals in one line, it is very cheap to fix it!!","author":"Ekaterina Pantaz"},{"text":"Please fix asap ","author":"Julia Eden"},{"text":"Please fix! It's been 5 years...","author":"jcountryman"},{"text":"wow, that's agile as hell","author":"Julian"},{"text":"Any news? ","author":"ÉricH"},{"text":"Can it be fixed? It is not a big deal","author":"Grzegorz.Ryznar"},{"text":"Please fix as this is really annoying and causes consternation with the teams working on several features concurrently. ","author":"Paul Fraser"},{"text":"Hey team, is there any update? Could anybody please take care of this issue?","author":"이동훈"},{"text":"Is there a Cloud version for this bug? I'd like this functionality available there, which is what my company uses.","author":"Melanie C"},{"text":"Please fix this, during daily stand up when we walk the Jira board we should be referring to our sprint goal but we cant read it on screen. It should be the core focus of our meeting but it appears as one long line that is cut off and incomplete. ","author":"Mac McAvoy"},{"text":"Hi everyone, as you know, this is the issue ticket for the Server version. As Atlassian is transitioning to a Cloud model, and the server support will not be available starting 2024 (if I'm not wrong), I'm pretty sure there is no effort spent anymore on features or small improvements on the Server version. Aeven if they were fixing this, you still have your admin to upgrade your version installed on your server. \r\n\r\nIt's not fixed on the Cloud version, but a safe bet is to move to the cloud if you want to have this fixed.\r\n\r\n ","author":"ÉricH"},{"text":"We recently transitioned to Jira cloud, and this is an issue there as well. The Jira dev team should just move this to the Jira cloud focus backlog instead of creating a new one there and gathering dust (ahem, impact) again.","author":"Anand Krishnaswamy"},{"text":"I agree - any issues that are still existing on the cloud should be moved instead of being re-created and appearing to be new. This ticket was created 5 years ago so it should be prioritised.","author":"Lea Cairns"},{"text":"We have wanted this for years on the cloud version of Jira. \r\n\r\nPlease prioritize this :)","author":"Jens Christian Morten Laursen"},{"text":"[~37b6eef0b215], you are mistaken because you seem to have forgotten about Data Center. Atlassian is not solely transitioning to the cloud; they have instead consolidated two server versions into one.","author":"Kirill Kamenkov"},{"text":"Can we get a fix on this? It's been quite some years and this shouldn't be a big deal...","author":"Pedro Silva"},{"text":"+1 for implementation of this change. Also to allow formatting of the sprint goals field.","author":"Nicole Santamaria"}]},{"summary":"Sprint End date disregards date picker advanced setting when duration is not custom","key":"JSWSERVER-15811","url":"https://jira.atlassian.com/browse/JSWSERVER-15811","type":"Bug","priority":"","description":"h4. Summary\r\n\r\nSprint End date disregards date picker advanced setting when duration is not custom\r\nh4. Steps to reproduce the problem\r\n # Configure advanced configuration datepicker as follow:\r\n ** {{jira.date.time.picker.java.format : dd.MM.yyyy HH:mm}}\r\n ** {{jira.date.time.picker.javascript.format : %d.%m.%y %I:%M}}\r\n # Create a sprint > allocate issues\r\n # Start sprint > choose duration of 1 week (any option other than custom)\r\n\r\nh4. Expected Result\r\n\r\nDate picker will show the date following the advanced configuration\r\nh4. Actual Result\r\n\r\nDate picker does not follow the date picker format\r\n !notcustom.png|thumbnail!\r\n\r\nThis problem does not happen if user choose custom duration as default:\r\n !custom.png|thumbnail!\r\n\r\n(!) If the user chooses non-custom duration initially, and then switch back to custom, the end date will still show the wrong format of the year.\r\n\r\n \r\nh4. Workaround\r\n # Select \"Custom\" duration.\r\n # In some cases, user will have to remove the AM or PM in the Start/End date.","createDate":"2017-04-14T12:44:45.000+0000","comments":[{"text":"When I switch to custom, the year still doesn't change to 2017 (still 17). Even when using the datepicker, it returns 17.\r\n\r\n!image-2017-04-14-16-24-48-363.png!\r\n\r\nInterestingly, I cannot start the sprint, neither in custom nor in week duration setting.\r\n\r\n!image-2017-04-14-16-32-16-743.png!\r\n\r\nAs we were able to start sprints during some days, I suspect there is an issue with JIRA mixing up month and day. Having erroneous dates in the database (negative values) is a major issue as these need to be manually corrected (and we don't know how yet).\r\n\r\nPlease escalate, this renders the sprint functionality completely broken. Thank you!\r\n\r\n ","author":"FrankTrautwein"},{"text":"Workaround is to create the sprint using the custom option and set it for 11 days so the end date is on a Saturday and only uses 10 working days. \r\n\r\n ","author":"Richard Bone"}]},{"summary":"Configuring a board's Issue Details View to include custom fields with specific issue type contexts causes SafePluginPointAccess errors in the logs","key":"JSWSERVER-15307","url":"https://jira.atlassian.com/browse/JSWSERVER-15307","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nIf you configured your custom field context to only certain specific issue type, and you configure the Agile Board's 'Issue Details View' to call this custom field, {{c.atlassian.ozymandias.SafePluginPointAccess}} will be throwing error\r\nh3. Steps to Reproduce\r\n # Configure a new JIRA KANBAN board. With the filter set to one particular project\r\n # Create a custom field called 'Test'\r\n # Set the context for the field for 'Bug' issue type only\r\n # Go to the Board's configuration > Issue Detail View and add this field\r\n # Create a new issue on the board, with Task issue type\r\n # On the board, click on the issue to trigger the right details issue view panel\r\n\r\nh3. Expected Results\r\n\r\nNo error is thrown in the logs\r\nh3. Actual Results\r\n\r\nBelow exception is thrown in the atlassian.log file:\r\n{noformat}\r\n/rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\ncom.atlassian.jira.util.dbc.Assertions$NullArgumentException: config should not be null!\r\n\tat com.atlassian.jira.util.dbc.Assertions.notNull(Assertions.java:25)\r\n\tat com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl$2.call(CustomFieldTypeModuleDescriptorImpl.java:175)\r\n\tat com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl$2.call(CustomFieldTypeModuleDescriptorImpl.java:172)\r\n\tat com.atlassian.ozymandias.SafePluginPointAccess.call(SafePluginPointAccess.java:187)\r\n\tat com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl.getSupplierValueOrHtmlErrorMessage(CustomFieldTypeModuleDescriptorImpl.java:372)\r\n\tat com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl.getEditHtml(CustomFieldTypeModuleDescriptorImpl.java:172)\r\n\tat com.atlassian.jira.issue.fields.ImmutableCustomField.getEditHtml(ImmutableCustomField.java:889)\r\n\tat com.atlassian.greenhopper.web.rapid.view.detailview.DetailViewInlineEditableFieldFactory.getFieldHtmlBean(DetailViewInlineEditableFieldFactory.java:263)\r\n\tat com.atlassian.greenhopper.web.rapid.view.detailview.DetailViewInlineEditableFieldFactory.lambda$getDetailViewEditableFields$54(DetailViewInlineEditableFieldFactory.java:162)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n{noformat}\r\nh3. Notes\r\n\r\nThis is not impacting any functionality. Just on logging\r\n\r\n \r\nh3. *Workaround*\r\n\r\nJira Administrators can hide logging on the package by increasing logging level to ERROR.\r\n\r\nYou can achieve this by adding these lines into *log4j.properties*:\r\n{code:java}\r\nlog4j.logger.com.atlassian.ozymandias  = ERROR, console, filelog\r\nlog4j.additivity.com.atlassian.ozymandias = false\r\n{code}\r\nFor changes to make an effect, Jira restart is required.\r\n\r\nThe file log4j.properties is located at JIRA_INSTALL_DIR/atlassian-jira/WEB-INF/classes (as of Jira 7.12.x)\r\n\r\n(on) Mind, this would make the log lines disappear, yet would not address the root cause.\r\n The actual case had to be addressed by the plug-in vendor.","createDate":"2016-12-08T08:19:04.000+0000","comments":[{"text":"Occurs in  7.3.0 as well","author":"Tom Moore"},{"text":"Occurs in 7.3.1 too.","author":"plonnroth"},{"text":"+1 JIRA 7.3.1","author":"AndreH"},{"text":"+1 JIRA 7.3.6","author":"Robb Breckenridge"},{"text":"+1 JIRA 7.3.4","author":"Suhas P"},{"text":"+ JIRA 7.3.6","author":"Yevgen Lasman"},{"text":"+7.3.3","author":"Stefan Bittner"},{"text":"+7.4.1","author":"John Rebelos"},{"text":"+7.3.7","author":"Christian Pascher"},{"text":"+7.4.2 (lots of logging) may wish to hide it using log4j.properties file modification...","author":"Craig Solinski"},{"text":"+7.5.0 is also affected. Can this warning be hidden somehow?","author":"Anna Henke"},{"text":"Affects 7.5.0 for us as well. This is making logs very busy... ","author":"Jonathan Chatwin"},{"text":"We have a 500 users installation, all users use boards all the time. Logs are full of these warnings that bring no added value.\r\n\r\nThis issue is open for more than a year now ??? At least Atlassian should provide a work around to hide these messages ?","author":"Marc Minten (EVS)"},{"text":"Affects 7.6.2 as well.","author":"Alexis Pruitt"},{"text":"Affects 7.6.3 as well.","author":"Tarun Sapra"},{"text":"+7.4.4","author":"Kevin"},{"text":"Affects 7.8.0 as well.","author":"Christoph Schötz"},{"text":"As well as 7.8.1","author":"Yossi Zinger"},{"text":"+ 7.6.4 confirmed too.","author":"Tomas Karas"},{"text":"7.8.2 confirmed.\r\n\r\n \r\n\r\n2018-04-05 21:36:30,637 http-nio-127.0.0.1-8081-exec-25 WARN someuser 1296x7987x1 12605pv 10.111.11.218,127.0.0.1 /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\n\r\n2018-04-05 21:36:30,638 http-nio-127.0.0.1-8081-exec-25 WARN someuser 1296x7987x1 12605pv 10.111.11.218,127.0.0.1 /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\n\r\n2018-04-05 21:36:30,641 http-nio-127.0.0.1-8081-exec-25 WARN someuser 1296x7987x1 12605pv 10.111.11.218,127.0.0.1 /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\n\r\n2018-04-05 21:36:30,641 http-nio-127.0.0.1-8081-exec-25 WARN someuser 1296x7987x1 12605pv 10.111.11.218,127.0.0.1 /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.","author":"Deon Rodden"},{"text":"Yeah, really annoying... :(","author":"Matthias Schwellenberg"},{"text":"Confirmed on 7.8.2 -> /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'. ","author":"mendurim"},{"text":"Confirmed 7.10.1\r\n\r\nSure wish I knew how to block this message that causing stacktraces and filling up log rapidly...","author":"Craig Solinski"},{"text":"spotted in 7.11.2 as well.","author":"GI"},{"text":"Spotted on 7.10.2 too.","author":"Fanny Mendez"},{"text":"As seen and flooding my logs on 7.10.2 also.","author":"Steve Rhodes"},{"text":"Spotted on 7.12.1","author":"Kai Ehlig"},{"text":"Spotted on 7.7.2","author":"Mohammad Fakih"},{"text":"+1 version 7.12.1","author":"Ricardo da Silva"},{"text":"Observed in 7.11.1 as well.","author":"Sateesh Chandra"},{"text":"Seen in 7.6.6 as well. ","author":"Mike Wise"},{"text":"+1 v7.7.1#77002-sha1:e75ca93","author":"Pranjal Shukla"},{"text":"+7.12.3","author":"Pavels Avens"},{"text":"Observed in Jira Software 7.5.1 as well. ","author":"Christoffer Karlsson"},{"text":"+7.12.1","author":"Fredrik Ivansson Flinta"},{"text":"+7.10.1","author":"Jonathan Chatwin"},{"text":"Guys, it's obvious that the bug won't fix itself. Stop adding comments with affected versions - just vote for the issue and put pressure on Atlassian Support about it.","author":"Pavel Boev"},{"text":"Seen on 7.6.12 ","author":"Gonchik Tsymzhitov"},{"text":"Seen on 7.13.9","author":"korney"},{"text":"Seen on 8.5.3","author":"Tomas"},{"text":"Seen on 8.5.4","author":"Gunnar Kalb"},{"text":"Error in Servicedesk 4.19/Jira 8.19.\r\n\r\n2021-09-16 13:08:03,161+0200 http-nio-8080-exec-14 WARN h.rojahn 788x27964x1 njwtk0 172.23.0.124,172.29.96.20 /rest/servicedesk/automation/servicedeskmodules/1/then/edit-issue/27800/field [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\n\r\n \r\n\r\nAny Suggestions ?\r\n\r\n!image-2021-09-16-13-07-47-497.png!","author":"Holger Rojahn"},{"text":"Seen in 8.20.11:\r\n\r\n2022-10-19 07:44:18,520+0200 http-nio-8080-exec-147 WARN .... /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.","author":"Karsten Hain"},{"text":"seeing it on 9.6 \r\n\r\n2023-03-09 14:09:29,967+0000 http-nio-8080-exec-1436 WARN diln_epires 849x2295226x1 u4lqib 87.103.114.15,192.168.66.166 /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\n2023-03-09 14:09:29,967+0000 http-nio-8080-exec-1436 DEBUG diln_epires 849x2295226x1 u4lqib 87.103.114.15,192.168.66.166 /rest/greenhopper/1.0/xboard/issue/details.json [c.atlassian.ozymandias.SafePluginPointAccess] Unable to run plugin code because of 'com.atlassian.jira.util.dbc.Assertions$NullArgumentException - config should not be null!'.\r\ncom.atlassian.jira.util.dbc.Assertions$NullArgumentException: config should not be null!\r\n        at com.atlassian.jira.util.dbc.Assertions.notNull(Assertions.java:25)\r\n        at com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl$2.call(CustomFieldTypeModuleDescriptorImpl.java:175)\r\n        at com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl$2.call(CustomFieldTypeModuleDescriptorImpl.java:172)\r\n        at com.atlassian.ozymandias.SafePluginPointAccess.call(SafePluginPointAccess.java:390)\r\n        at com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl.getSupplierValueOrHtmlErrorMessage(CustomFieldTypeModuleDescriptorImpl.java:372)\r\n        at com.atlassian.jira.plugin.customfield.CustomFieldTypeModuleDescriptorImpl.getEditHtml(CustomFieldTypeModuleDescriptorImpl.java:172)\r\n        at com.atlassian.jira.issue.fields.ImmutableCustomField.getEditHtml(ImmutableCustomField.java:871)\r\n        at com.atlassian.greenhopper.web.rapid.view.detailview.DetailViewInlineEditableFieldFactory.getFieldHtmlBean(DetailViewInlineEditableFieldFactory.java:239)\r\n        at com.atlassian.greenhopper.web.rapid.view.detailview.DetailViewInlineEditableFieldFactory.lambda$getDetailViewEditableFields$2(DetailViewInlineEditableFieldFactory.java:157)","author":"Prometheus"},{"text":"{panel:title=Atlassian Update – 25 April 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. Feedback like yours helps us release valuable Jira features that solve problems for a greater customer base. To that end, we aim to keep our issues up-to-date so they accurately reflect current customer needs. Based on the impact, we’ve decided to move this issue to our short-term backlog. \r\n\r\nThe workaround for this bug is in the issue description.\r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\n\r\nDaniel Dudziak\r\nSenior Software Engineer\r\n\r\n{panel}","author":"Stasiu"},{"text":"{panel:title=Atlassian Update – 11 September 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\nDear Customers,\r\n\r\nWe appreciate your input which helps us to continuously improve Jira. Regarding the bug you've reported, it remains in our short-term backlog due to unforeseen delays. We apologize for any inconvenience.\r\n\r\nThe workaround for this bug is still applicable and can be found in the issue description.\r\n\r\nPlease continue watching this ticket for updates and changes that may impact your work.\r\n\r\nBest regards\r\n\r\nSławomir Zaraziński\r\nSoftware Engineer, Jira DC\r\n{panel}","author":"Sławomir Zaraziński"},{"text":"9.12 affected","author":"Arkadiusz Baka"}]},{"summary":"Searching for Sprint names with numbers through JQL returns other issues that start with the same number","key":"JSWSERVER-14856","url":"https://jira.atlassian.com/browse/JSWSERVER-14856","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen searching for the issues in a particular Sprint (eg Sprint 1) using the Sprint name in the JQL (eg Sprint = \"Sprint 1\"), it will display other issues in other sprints that start with 1 (Sprint 10, Sprint 11, Sprint 12 etc)\r\n\r\nh3. Steps to Reproduce\r\n# Create a few Sprints up to 10 or more, so that the Sprint name will be 10 or more.\r\n# Go to the Issue Navigator.\r\n# Search using the JQL (replace project name and sprint name accordingly with your own.) {code}project = \"project name\" AND Sprint = \"sprint name 1\"{code}\r\n\r\nh3. Expected Results\r\nThe Issue navigator will ONLY return issues that are in \"sprint name 1\".\r\n\r\nh3. Actual Results\r\nThe Issue navigator will also return issues that are in \"sprint name 10\", \"sprint name 11\", \"sprint name 12\" and so on.\r\n\r\nh3.Workaround\r\nSearch for the issues using the Sprint ID instead of the Sprint Name for more accurate results. \r\n\r\nYou can refer to [JIRA Software: How to search for a Sprint using JQL|https://confluence.atlassian.com/display/JIRAKB/JIRA+Software%3A+How+to+search+for+a+Sprint+using+JQL] on how to retrieve the Sprint ID.","createDate":"2016-09-13T08:23:08.000+0000","comments":[{"text":"- Affects 7.2.1 Server as well","author":"Chander Inguva"},{"text":"7.13.1 also affected","author":"Daniel Zauner"},{"text":"8.13.8 also affected. \r\n\r\n ","author":"Cloud Services"},{"text":"h3. Jira v8.20.13 also affected","author":"Stefan Matzdorf"}]},{"summary":"Changing calendar settings doesn't affect calendars within JIRA Agile","key":"JSWSERVER-12331","url":"https://jira.atlassian.com/browse/JSWSERVER-12331","type":"Bug","priority":"","description":"h3. Summary\r\nWhen changing configuration related to the calendars at *JIRA Administration > System*, some changes doesn't take place within JIRA Agile. \r\n\r\nh3. Environment\r\nJIRA Cloud\r\n\r\nh3. Steps to Reproduce\r\nChange calendar configuration format as per [Customizing the Look and Feel|https://confluence.atlassian.com/display/JIRA/Customizing+the+Look+and+Feel], in the section Date/Time format:\r\n# Go to *JIRA Administration > System > Look and Feel*\r\n# Set Date/Time format to 24 hours yyyy-MM-dd HH:mm  \r\n# Check the box at the bottom to make Monday first day of the week, as per [How to set Monday as First Day of Week|https://confluence.atlassian.com/display/JIRA063/How+to+Set+Monday+as+First+Day+of+Week+in+Date+Picker+Calendar]\r\n# Go to *JIRA Administration > System > General Configuration > Advanced Settings* and enter the format (_sysadmin_ only):\r\n- jira.date.time.picker.java.format: yyyy-MM-dd HH:mm\r\n- jira.date.time.picker.javascript.format: %Y-%m-%d %H:%M\r\n\r\nh3. Expected Results\r\nCalendars will be showing Monday as first day of the week, and time will be displayed in 24 hours format\r\n\r\nh3. Actual Results\r\nCalendars within JIRA Agile are still showing Sunday as first day of the week and am/pm format (see screenshots). The way date is displayed will change, but time seems to have no effect. In JIRA all changes have taken place correctly.\r\n\r\nh3.Workaround\r\nThere's no workaround at the moment.","createDate":"2015-07-28T10:44:24.000+0000","comments":[{"text":"*Please implement this soon*. It is very annoying for environments using ISO 8601, especially because for us 2015 has 53 weeks while the Agile (Gregorian) calendar does not allow that. This takes us to different week numbers for 2016 depending which Calendar we are checking (JIRA or Agile). For example, today should be wk. 1 but in Agile it appears to be wk. 2.","author":"Alexandra Sesovici"},{"text":"+1","author":"Kostantin Stambolov"},{"text":"Many thanks for raising this bug. Since there has not been any customer activity on this issue in over a year, we’re closing it as Timed out.\r\nIf you feel that the bug is still relevant to your needs, please leave a comment and we'll reassess it.\r\n\r\nKind regards,\r\nDong Hoang\r\nJIRA Software","author":"Hoang Dong"},{"text":"Hi @Dong Hoang,\r\nWhat do you mean by \"there has not been any customer activity on this issue in over a year\"? I am a customer and I just voted and commented on it less than 8 months ago....And yes, I am a customer.....\r\nI would very much appreciate if this is issue is reopened *and* solved.\r\nThank you.","author":"Alexandra Sesovici"},{"text":"Hi Alex,\r\n\r\nThank you very much for your correction. You are right. \r\nThis was closed by mistake and I reopened it. We will reassess it soon.\r\n\r\nRegards,\r\nDong Hoang","author":"Hoang Dong"},{"text":"To whomever it might concern:\r\n\r\nAre you really gathering impact for almost 5 years? Instead of fixing it?\r\nThere might be no \"customer activity\" here in Jira but it is discussed in forums etc on the internet. At least here in Europe we are using Monday as the beginning of the week, you know, the way it was intended.. since Sa and Su are a weekEND.\r\n\r\nSo what is the situation here, please?","author":"Tomáš Vojvoda"},{"text":"me too - this is a pain in the **** not having standard 24hour datepicker","author":"Mike Catmur"}]},{"summary":"Issues closed in future sprints do not show up in the Backlog until the Sprint is started","key":"JSWSERVER-11877","url":"https://jira.atlassian.com/browse/JSWSERVER-11877","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Software Server*. Using *JIRA Software Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSWCLOUD-11877].\n  {panel}\n\nSteps to reproduce :\r\n\r\n# Create an issue and add it to a future Sprint.\r\n# Notice that it shows up on the backlog view of the Rapid board\r\n# Now close that issue\r\n# Notice that it disappears from the backlog view\r\n# Now start the Sprint\r\n# Notice that the issue suddenly appears in the Sprint as a closed issue\r\n\r\n\r\nThis is confusing for the users.\r\n\r\n","createDate":"2015-03-19T12:27:43.000+0000","comments":[{"text":"This is not only confusing, it will wrongly report a higher commitment of story points in the velocity report.","author":"Nabil Sayegh"},{"text":"The expected behaviour should be as follows:\r\n\r\nIf an issue is closed and is not in an active sprint, it will not be shown in the Backlog (plan mode).\r\nIf an issue is in a future sprint and is closed, it will be removed from the Backlog and will not be present if/when that sprint is started.\r\nIf is it required that an issue is to be closed in a future sprint then that sprint must be started with the issue included (prior to the issue being closed).\r\n\r\nKind regards,\r\nMartin\r\nJIRA Agile","author":"Martin"},{"text":"Many thanks for raising this bug. Since there has not been any customer activity on this issue in over a year, we’re closing it as Timed out.\r\nIf you feel that the bug is still relevant to your needs, please leave a comment and we'll reassess it.\r\n\r\nKind regards,\r\nDong Hoang\r\nJIRA Software","author":"Hoang Dong"},{"text":"Still relevant for me. \r\n\r\nBest Regards\r\nDaniela","author":"Daniela Neske"},{"text":"This bug still affects us, and has for a long time. We're accustomed to working around the issue by asking our teams to clear the sprint field if they need to close a ticket before a sprint starts. But, it'd be far better if the bug was fixed. Please reconsider fixing this issue. ","author":"Jonathan Layes"},{"text":"I'm reopening this issue because a customer has experienced this recently.\r\n\r\nWhen starting a sprint, the user should be aware of all the issues that will be in the sprint.","author":"Nara So"},{"text":"This is also relevant for us, we are experiencing the same problem. ","author":"Gerben Bosch"},{"text":"This is an issue in my organisation too. JIRA Server, v7.1.10","author":"Ersan Hakki"},{"text":"This has happened in our organisation also - JIRA cloud","author":"Gerben Bosch"},{"text":"Same problem here. JIRA Server 7.2.2","author":"CGM"},{"text":"We're experiencing the same issue in JIRA 7.2.8","author":"Shafinaz Elahi"},{"text":"We're experiencing the same issue in JIRA 7.2.8","author":"Shafinaz Elahi"},{"text":"We're experiencing the same issue in JIRA 7.3.1","author":"Keimpe de Jong"},{"text":"I am experiencing this as well, although closed issues will sometimes not appear on the Backlog view and other times they appear.","author":"Kristin Lyons"},{"text":"Same happens to me. \r\n\r\nSurprinsing that this bug was reported 4 years ago and remains unsolved....","author":"Deleted Account"},{"text":"We're experiencing the same issue.","author":"Mergen Yazılım A.S."},{"text":"8.17.1 - still impacting\r\nThis bug is really annoying - confuses our users and even our internal support team like crazy, as we thought its an indexing problem at first. Alot of wasted resource to troubleshoot it.\r\n\r\nPlease get it fix!","author":"Azfar Masut"},{"text":"For us goes the same, still impacting. Please fix!","author":"Gerben Bosch"},{"text":"If default behavior can't be changed, would be good to make it configurable. ","author":"Maryia Smouzh"},{"text":"This is still an issue. We can work around it if team member clears the sprint field when they close a ticket before a sprint starts. Not everyone remembers to do that every time.","author":"Danielle Zhu"},{"text":"same issue – please help!","author":"Nikhil Laddha"},{"text":"Still an issue 2023.  Our team is experiencing this.  Jira, can you BUMP this on YOUR backlog?  The users have spoken.  Where's your product owner?\r\n\r\nJeez, looks like this issue was discovered in 2015.  SMH\r\n\r\n ","author":"Gregory Teng"},{"text":"+1 bump, this has just happened to me. Started a sprint with with about 12 issues and about 15 \"done\" issues from previous sprints suddenly appeared. All the sprint stats are now shot. Very, very disappointing and frustrating.","author":"Paul Wilson"},{"text":"This is causing reporting issues as well.  Please move this up on the list to be fixed. ","author":"jodi.klein"}]},{"summary":"Agile Board Column Configuration Missing Statuses","key":"JSWSERVER-11623","url":"https://jira.atlassian.com/browse/JSWSERVER-11623","type":"Bug","priority":"","description":"*Summary:*\r\n The JIRA Agile column configuration screen does not properly identify the statuses which belong to the board when the conditions below are met:\r\n # There is an issue type using a custom workflow, with different statuses, AND\r\n # The JQL filter used by the Board references the issue type above, OR\r\n ** e.g. Using the filter {{project = P AND issuetype = custom_type OR project = P}} will cause this problem, even though it should return the same results as the filter '_project = P_'.\r\n # The JQL filter used by the board reference to text\r\n ** e.g Using the filter {{project = P AND text ~ \"testtext\"}}\r\n\r\nThe problem happens when the project/board is configured in such a way that it has multiple workflows (for different issue types). The board seems to only consider the statuses from the first workflow listed under its workflow scheme. The other statuses from the rest of workflow in the same workflow scheme will have a warning triangle indicating that the board doesn't recognize them.\r\n\r\nMoving any of the status with the warning triangle to the 'Unmapped statuses' column will make them disappear from the column configuration screen.\r\n\r\n*Steps to Reproduce:*\r\n # Restore the attached XML backup ([^column_issue.zip]).\r\n # Navigate to Agile > Sample Scrum Project A.\r\n # Go to Board > Configure.\r\n # Go to Columns - All statuses are displayed and properly mapped to columns.\r\n # Go to General and change the 'Working Filter SSPA' to the 'Broken Filter SSPA'.\r\n # Refresh the Board configuration page for the new filter to be applied.\r\n # Click on Columns again - The status which do not belong to the workflow used by the issue type \"Test Issue Type\" will have a warning triangle with the message below:\r\n \"This status is not available in any of the workflows used by this board. To remove, drag it to unmapped statuses where it will no longer be available.\"\r\n # Dragging any of those statuses to the *Unmapped Statuses* column will make the status disappear from the column configuration screen.\r\n\r\n*Workaround*\r\n Using the sample filter above\r\n * {{project = P AND issuetype = custom_type OR project = P}} and changing it to {{project = P AND issuetype = custom_type OR project = P and issuetype in (standardIssueTypes(),subTaskIssueTypes())}}, which yields the same results seems to resolve the problem.\r\n * {{project = P AND text ~ \"testtext\"}} is to be changed to {{project = P AND text ~ \"testtext\" AND issuetype in (standardIssueTypes(),subTaskIssueTypes())}}","createDate":"2014-12-26T17:32:15.000+0000","comments":[{"text":"Could the filter be changed to just 'project = P'? This should resolve the problem as well.","author":"David Tang"},{"text":"We experience a similar issue.\r\n\r\nWhen we added the following to our Scrum Board filter:\r\nOR issuetype in (Enhancement, Defect, \"Related Defect\") \r\n\r\nall statuses not pertaining pertaining to Enhancement, Defect or \"Related Defect\" issue types were not available for mapping to board columns. Note that it was an \"OR\"  condition, and other issue types were returned from the filter. In our case, we had a \"Task\" issue type with a status of \"In Progress\" that was not available for mapping once we put in that clause. \r\n\r\nTo work around this, we temporarily removed that clause from the filter, mapped the \"In Progress\" status into a Scrum board column, and then added the clause back in. The Scrum configuration is giving us a warning that the \"In Progress\" status is not used by any workflow (even though it also notes there are 12 issues in that status), but the status mapping is persisting and working. ","author":"Robert Ramirez"},{"text":"We're seeing exactly what Robert R. is seeing. The workaround he describes in the last paragraph worked for us and we see the same warning (even though it shows there are x amount of issues in that status).","author":"Shaunt Kojabashian"},{"text":"I raised the same issue GHS-23202 and we found a work around using the sub filter.","author":"Jamie Cole"},{"text":"Good point Jamie - to be clear this was on a scrum board for us (so no sub-filter).","author":"Brian Keefe"},{"text":"This is happening to us as well. We use a custom field to define different scrum teams that work within the same Jira project. So our filter is \"project = P and 'team name'= XYZ OR project = P and issuetype = Epic\". Since multiple teams can work on one Epic, we don't want to restrict Epics to one team, and Epics have a simpler workflow than the stories, so the available mapped statuses only showed the Epic statuses\r\nIt seems that the board is filtering the statuses to the least common denominator of specified issue types (even in an OR statement)\r\nThe workaround did work for a temporary fix, but I do think that this should be higher than minor","author":"Courtney Wilson"},{"text":"-","author":"Courtney Wilson"},{"text":"We face the same problem. Our filter had the format 'project = \"PROJECT\" or id in (ID1, ID2)'. Removing the \"OR\" and the second term solved the problem for us.","author":"Julia Lahn"},{"text":"We see this on JIRA 6.4.12 with JIRA Agile 6.7.12 as well.","author":"David Marshall"},{"text":"We are seeing the same issue. Our queries referenced the project. In our case, we have a project with issue types that are tied to one of four workflows. Two workflows have custom statuses. Those statues do not show up as unmapped statuses. Therefore, the issues in those statuses do not show up on the Plan or Work board. The Sprint Report recognizes the issues but shows them as Issues Removed From Sprint. \r\n\r\nBased on the comments above, I edited the queries to specify each issue type in the project. The custom statuses now appear as unmapped statuses and can be associated with columns on the board. The issues now appear in all three modes.\r\n\r\nWe are on JIRA 6.2.5 and JIRA Agile 6.6.51","author":"Colleen Adams"},{"text":"+1 Colleen, thanks, that workaround got me out of the ditch !","author":"Kelly Arrey"},{"text":"+1 Colleen, thanks.\r\n\r\nThis bug is still present on JIRA Software 7.2.2.","author":"Luís GÓIS"},{"text":"We still see this bug as well. We found that even a simple query like {{project = MYPROJ ORDER BY Rank ASC}} was failing to pull in five different statuses. Instead, using a query like {{project = MYPROJ AND type in (standardIssueTypes(), subTaskIssueTypes()) ORDER BY Rank ASC}} works just fine and will not require maintenance in the future. \r\nI believe this is due to the complex nature of the project, with 10+ issue types and 5 workflows.","author":"Steven Behnke"},{"text":"@Steven we also had the problem before modifying the query as you did, v7.2.2 on a standard agile project here (story, bug, epic and task), one single workflow (simplified, 3 statuses).","author":"Luís GÓIS"},{"text":"Still seeing this issue on 7.3.0","author":"Jonathan Krengel"},{"text":"I'm still having this problem as well, and it's frustrating.","author":"Marta Dawes"},{"text":"Considering the issue has been around for two years, I would like to see it prioritized higher – I'm tired of see this problem in my board configurations!\r\n\r\n ","author":"Chris Mitchell"},{"text":"The same problem occurred recently in one project that had only two workflows (one of them was the {color:#205081}_The default JIRA workflow_{color} which is read-only). An issue was set to status {{Reopened}} from {{Closed}} but did not appear in the Agile board of the project. The JQL of the filter was \r\n {{project = <projectkey> ORDER BY Rank ASC}}\r\n\r\nIn the respective board configuration one could not see the status Reopened to be chosen for any column. The solution was - as mentioned above - to add the issue types.\r\n\r\nIs this a caching issue? I do not think that this an issue on behalf of the index because re-indexing did not help as well.\r\n\r\n+BTW:+ JIRA (server) version ist 7.3.6 (build number 73017) with JIRA agile 7.3.0 (build number f1feac4e04079fdc)","author":"Adi Wehrli"},{"text":"Dear Atlassian,\r\n\r\nI don't know if I have the same problem.\r\n\r\nThe project using custom and standard issue types, custom workflow and custom statuses.\r\n\r\nThe JQL is the following: \r\n{code:java}\r\nProject in (\"P\") AND labels in (L) AND status not in (Closed, Resolved) OR key in (P-6577, P-6593) ORDER BY Rank ASC\r\n{code}\r\nFor this, I got 13 JQL, some of are in the status: _Tested_. This status not appearing at the Kanban column mapping page.\r\n\r\nJust to review the issue, I create the same JQL (saved to another name), with a different kanban board and the _possible mapping statuses are different_ - but there is no _Tested_ again. \r\n\r\nReindex, restart, did not help.\r\n\r\nShould I create a support ticket for you to investigate this, or it may be the same issue?\r\n\r\nBest: Peter\r\n\r\n \r\n\r\n*Update*: we found that other technical issue was involved. Please delete this comment. :)\r\nBest: Peter","author":"Peter Cselotei - Lupus Consulting Zrt."},{"text":"I don't see this issue having to do with filters. For me it seems to be workflow scheme related.\r\n\r\nIn some cases, it seems that when you have a workflow scheme with a workflow assigned to one issue type and one to \"all unassigned\", the default workflow is not being picked up by the agile boards. The workaround is to go to the workflow scheme and instead of using \"all unassigned\", specifically assign all other issue types to that worfklow. Actually assigning even one issue type will cause the workflow to be picked up.\r\n\r\nI'm not entirely sure why this happens as it doesn't seem to happen every time but it's definitely the boards not picking up the workflow for \"all unassigned issue types\".","author":"Evangelos Vrocharis"},{"text":"We have noted this in JIRA Software 7.1.6. We're very interested to know the root cause as we have yet to identify it.","author":"Graham Horsman"},{"text":"My team has experienced this same issue in JIRA Server v7.5.2.\r\n\r\nIs there any timeline on when this issue will be addressed?","author":"Raj Vora"},{"text":"Issue seems to occur in Jira Server 8.0.2 as well","author":"Maciej Tkaczyk"},{"text":"I think I ran into this failure mode as well.\r\n* I had a project without a workflow scheme, which seems to map all issue-type names to the default\r\n* I created a workflow scheme and mapped a single issue-type name to a custom workflow\r\n\r\nThen the board refused to acknowledge the existence of the new status in the custom workflow\r\n* the new status does not show up as unmapped on the board=>columns settings\r\n* if I transition an issue to the new status, it simply disappears from the board (because it is not mapped, and apparently not mappable)\r\n\r\nI tried modifying the board filter to include another project, which then enabled the capture of some new status, but only from the new project.\r\nI deleted the project I care about, saved; then added back, saved.  Still no cigar\r\nNext will attempt some of the suggestions from earlier commentators' (modifying the filter to explicitly capture status details)\r\n\r\n...\r\nh3. Solved\r\nI managed to solve this by a seemingly trivial modification of the filter.\r\n* was: this AND that OR other AND another\r\n* changed to explicitly group: (this AND that) OR (other AND another) \r\n\r\nThat did the trick - picked up all the previously-unmapped status in every workflow, and I was able to map the new one that I cared about using.  Also note: jira still sees these explicit groupings as redundant, and ultimately deletes the parentheses in the saved filter query.  i.e., there is no actual evidence remaining after you save the new and explicitly-grouped filter query.  Next time you view it, the explicit grouping is omitted.  But the act of having done it seems to tickle the failure-mechanism in a way that provides for an effective work-around.  It hints that the underlying root-cause is a bug with the JQL parser.","author":"Mark Caruso"},{"text":"I found that if there are issues with 2 different workflows involved but they share a common status, that the board will \"decide\" which issue workflow to map the status to and only allow to drag/drop transition an that issue and not others. \r\n\r\nFor example: my filter finds Stories and Sub-Tasks. The workflow is different for the 2 issue types, but both have a status of \"In Progress\". I found that \"In Progress\" works for Sub-Tasks and I can drag them from 'New' to 'In Progress'. But I can't drag the Story from 'Backlog' to 'In Progress' - I have to edit the story and transition it and then it shows up on the board 'In Progress'\r\n\r\n ","author":"Keith Lanier"},{"text":"Solution by Mark - changed to explicitly group: (this AND that) OR (other AND another) solved the problem for us. But the user had 80 filters in 80 boards and he has to change all of them.\r\n\r\nWhen will the fix be out? Its still there in Jira 8.5.","author":"Divya TV"},{"text":"Your suggested work around did not work, but making my query super simple, saving it, and then editing again to re-complexify it worked like a charm.","author":"Tomi Bates"},{"text":"I also ran into this issue. At least I think I did. My project contains the issuetypes Improvement, Task and Sub-Task. The kanban board filter query used to be project = p ORDER by rank which resulted in no status being shown in the board configuration at all. Chaging it to project = p AND issuetypes in (standardIssueTypes(), subTaskIssueTypes()) worked. \r\n\r\nI find this really annoying as the filter returns the same issues and actually it makes no sense to me at all. Took me half a day of work. \r\n\r\nI'm running Jira 8.5.3.","author":"Manuel Bähnisch"},{"text":"I ran into this issue as well, my project contained the issueType Epic for a secondary part of the filter (an OR condition) as well as the ORDER by Rank ASC. Changing it to Project = p AND issueTypes in (standardIssueTypes(), subTaskIssueTypes()) worked for me too...didn't change anything else in my filter. \r\n\r\nI had to then \"fix\" all of the reported issues that were resolved prior to Completing the Sprint that should have stayed done with that sprint, but instead moved to the next sprint incorrectly.  Took quite a bit of work and time to get this resolved because of this.  ","author":"Jenn Rakestraw"},{"text":"Bug found in 8.13.10 as well.","author":"prusty"},{"text":"Still happening in 8.15.1.\r\nSolved by adding \r\nAND type in (standardIssueTypes(), subTaskIssueTypes()) \r\nafter the projects were declared in the JQL","author":"Jennifer D. Smith"},{"text":"Ran into this issue with Jira Data Center 8.20.2 using the following board query:\r\n \r\nproject = MyProject AND (Team = 44 OR issuetype = Epic) ORDER BY Rank ASC\r\n \r\nChanging it to this fixed the issue:\r\n \r\nproject = MyProject AND issuetype in (standardIssueTypes(),subTaskIssueTypes()) AND (Team = 44 OR issuetype = Epic) ORDER BY Rank ASC\r\n \r\n ","author":"Chris Steenwyk"},{"text":"Currently affected by this in 8.18.2","author":"Zachary Beach"},{"text":"+1","author":"Nutanix_Jira-admin"},{"text":"This is affecting Jira 8.13.4 too.","author":"Eshwar Palem"},{"text":"This is affecting Jira 8.20.2 also","author":"Muhammed Hisham Pulukkool"},{"text":"We recently updated and simplified some board *filters* and ran into the same problem. Before changing the filter we checked if the new filter was showing the same list with issues. which it did. Now we have to add additional information to the filter again to make the board work again.\r\n\r\nVery strange. It should be fixed. Affects version 8.20.8\r\nIf a filter shows the correct list of issues, it simply also must work on the Agile board. ","author":"Marcel Plomp"},{"text":"Just switched from Kanban to Scrum Board. Took the same basic filter for the Scrum Board which is already in use by the Kanban Board. Jira tells me that some statuses I want to map (which can be mapped w/o problems on the Kanban Board) aren't available for the issue types in the Filter results and therefore not available to be mapped to columns. This is nonsense since running the query manually I get issues with the missing statuses.\r\n\r\nThe query is nested.\r\n\r\n \r\n{code:java}\r\nproject = VP AND (Epos-Verknüpfung in (VP-3328, VP-4988, VP-5085) OR issue in issuessubtasks(\"Epos-Verknüpfung in ('VP-3328', 'VP-4988', 'VP-4992', 'VP-5085')\")) ORDER BY Rang {code}","author":"Danny Who"},{"text":"Doesnt seem to be seeing fix anytime soon.","author":"Vickey Palzor Lepcha"},{"text":"Having this issue still as well. The workaround posted worked for me (including the following in query).\r\n{code:java}\r\nand issuetype in (standardIssueTypes(),subTaskIssueTypes()){code}\r\nSeems it's the statuses that are unique to my sub-tasks are not appearing","author":"Jamie"},{"text":"Our users are experiencing this problem in Jira 8.20.12","author":"Emma"},{"text":"Is there any plan to fix this issue? ","author":"Danielle McGrath"},{"text":"Not sure if it is the same bug. But I have a board that includes two projects. The board column configuration page missed all status from one particular workflow of one of the projects. After identifying and removing the part of the query that caused the problem, all status appeared. I moved that part of the filter query to a subfilter and everything works as intended.\r\n\r\nOriginal query:\r\n{code:java}\r\nproject = \"Project A\" AND issuetype in standardIssueTypes() AND Sprint in openSprints() AND Sprint not in futureSprints()) OR (project = \"Project B\" AND (status not in (StatusA, StatusB) OR status in (StatusA, StatusB) AND updated > -1d)) ORDER BY Rank ASC{code}\r\nProblematic part that I moved to a subfilter\r\n{code:java}\r\nstatus not in (StatusA, StatusB) OR status in (StatusA, StatusB) AND updated > -1d{code}\r\n ","author":"Frank Scheffler"},{"text":"Hi,\r\n\r\nIssue encountered in 8.13.2.\r\n\r\nSolved with\r\n{code:java}\r\nand issuetype in (standardIssueTypes(),subTaskIssueTypes()) {code}\r\nRegards.\r\n\r\nSylvain MF","author":"Sylvain Martin-Faltot [CACIB]"},{"text":"I have added some new workflows in my scheme but sometimes all of them are displayed and applicable but sometimes some of them are missing even though you can find them in the workflow they are not fetched in the ddl of the issue. Any help please?","author":"zacharoula.brinia"},{"text":"The bug is still available in Jira 9.4.6 :(.","author":"Simone Kaiser"},{"text":"provided workaround is not working for me. If I map specific status with the done column, any issue with that status would disappear from inactive sprint. ","author":"Niteshkumar Shah"}]},{"summary":"Unable to Find Shared Saved Filter when creating a New Board","key":"JSWSERVER-11403","url":"https://jira.atlassian.com/browse/JSWSERVER-11403","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen attempting to create a new board or update a saved filter in the existing board, the user may be unable to retrieve the shared filter depending upon where it is returned in the search results.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Create the following saved filters:\r\n{noformat}\r\nCash Management - A\r\nCash Management - B\r\nCash Management - C\r\nCash Management - D\r\nCash Management - E\r\nCash Management - F\r\nCash Management - G\r\nCash Management - H\r\nCash Management - I\r\nCash Management - J\r\nCash Management - K\r\nCash Management - L\r\nCash Management - M\r\nCash Management - N\r\nCash Management - O\r\nCash Management - P\r\nCash Management - Q\r\nCash Management - R\r\nCash Management - S\r\nCash Management - T\r\nCash Management - U\r\nCash Management - V\r\nCash Management - W\r\nCash Management - X\r\nCash Management - Y\r\nCash Management - Z\r\nMan ABC\r\nMan Man\r\nMan_Man\r\n{noformat}\r\n# Create a new JIRA Agile board from an existing Saved Filter.\r\n# Attempt to enter \"Man Man\" or \"Man_Man\".\r\n\r\nh3. Expected Results\r\n\r\nThe filters are returned.\r\n\r\nh3. Actual Results\r\n\r\nThe filters are not returned.\r\n\r\nh3. Notes\r\n\r\nIt appears that there is a limitation in the number of results that the drop-down can return, and if the filter is returned after those results it does not appear. If all the 'Cash Management' filters do not exist, 'Man_Man' and 'Man Man' will appear.\r\n\r\nh3. Workaround\r\n\r\nRename the filter something else temporarily, such as A Man ABC, and then use that as it will appear at the top of the list.","createDate":"2014-10-31T14:42:27.000+0000","comments":[{"text":"Our Agile board already upgraded to version 6.6.13 and it wasn't resolve the issue.","author":"Treethawat Thanawachiramate"},{"text":"We are also impacted by this issue.  It appears when we have a number of saved filters beginning with the same number\r\n\r\nETA - We are on JIRA Data Centre 6.4.2 Jira Agile 6.7.0","author":"Lauren Eardley"},{"text":"is this problem really limited to JIRA Agile?\r\nI also can't search for filters containing a dash when i create a pie chart gadget on the dashboard","author":"Dieter Greiner"},{"text":"I have the same issue on version 6.4.11. Re-saving the filter can resolve this even in the same name.","author":"Wendy Yi"},{"text":"I am experiencing the same issue with JIRA 6.4.12 and JIRA agile 6.7.12","author":"Nayanajith Chandradasa"},{"text":"I am on 6.4.x  We renamed the filter to include an 'a' before the name and were able to use the filter.","author":"Amy Bell"},{"text":"Why is this only a minor bug? I have tried to create additional filters and none or those are showing up either. I've noticed that most of our filters are no longer showing up. I can't use these filters in either a new board or dashboard items. We have over a dozen projects and many more to add but can no longer continue. This should be a major bug.","author":"Anthony Buck"},{"text":"This is still a problem in 7.3.x...","author":"Joel Rydén"},{"text":"I'm expericencing the same with JIRA 7.2.2.\r\n\r\nAhhhhhhhhhh, I hate that, is anyone can help?\r\n\r\n \r\n\r\n \r\n\r\nThanks,","author":"Nguyễn Hải Vân"},{"text":"Dear all,\r\n\r\nJust change the filter name to a unique one and create Board then change the name again :). \r\n\r\nLike: I can't search for saved filter named AAAA_TASK_DONE then i change its name to U1NY ==> Create board with U1NY, then rename U1NY to AAAA_TASK_DONE.\r\n\r\nI do know this problem will occur again and again and we all do not know when will this problem be solved so just consider above solution as a workaround way\r\n\r\n \r\n\r\nThanks,","author":"Tran Van Huu"},{"text":"Can you update this bug to include 7.3.x?\r\n\r\n ","author":"Deleted Account"},{"text":"This is happening in the cloud version. At least the workaround worked.","author":"Liz Kao"},{"text":"We have a ton of filters in our system, and users regularly have to add special characters to the beginning of their filter names in order for it to show up in the list when selecting a filter for a board.\r\n\r\nPlease fix!","author":"Shane Wignall"},{"text":"It is so confusing and we need to explain the bug to different users all the time. Please fix the issue as soon as possible. Thank you.","author":"Frost Lai"},{"text":"I opened this ticket since I had been an administrator of Jira since 2014. My roles changed 2 years later and I'm a Jira user currently of the same company.\r\n\r\nToday the ticket still remains the same as the first day. Could Atlassian change the priority to be a higher one please?","author":"Treethawat Thanawachiramate"},{"text":"We have the same issue in Jira 7.6.6.  We have 5300 users in Jira ...  This problem we have often.  please increase priority for this issue.","author":"Jozef Cervenansky"},{"text":"Dear.\r\n\r\nBy managing programs and big projects in Jira, you can have that issue really often. Please increase the priority in order to get that solved quickly. Having this bug since 4-5 years is not professional imho (especially considering the price of the Atlassian Ecosystem).\r\n\r\n \r\n\r\nThank you.","author":"Mathieu Triquoit"},{"text":"Hello All, \r\n\r\nIt looks like the bug is triggered by using special characters in the title of your jql filter. If you re-save your filters with no capitalization and no special characters (i.e. !@#&*)(\"_\") you should be able to find them via search. It worked at least for me.","author":"Jedediah Russell"},{"text":"Same issue in Jira 8.0.2\r\n\r\nplease fix it\r\n\r\n \r\n\r\n ","author":"testcf"},{"text":"Still happening, I believe you have this issue since 2014.\r\n\r\nI agree that the severity is not \"blocker\" but man, if I add all the time trying to get 1 single filter to show on a kanban board, I think it pays it self to solve it.","author":"Ra Acosta"},{"text":"Would be great to get this fixed.  Still happening.","author":"Trudi Ersvaer"},{"text":"Yes still happening and a massive PITA. Please can we get this fixed.","author":"stevie.heyes"},{"text":"Just got caught with this too, on Jira Cloud.  Firstly the dropdown has no affordance or hint that it is scrollable. Secondly, the Filter creation dialog does allow special characters, but the selection mechanism for this dropdown doesn't find them.\r\n\r\nFor such a well-funded, well-hyped company I expected a _lot_ better.  Just how much \"gathering impact\" (read: this issue isn't sexy enough to work on) must we endure before frustrating bugs like this get addressed?","author":"John Hawksley"},{"text":"Hit with the same issue... \r\n\r\nwe have one project which has multiple teams and all teams prefer to have there team name before the filter but due to this bug its not possible to have filters after certain limit. which is a problem. Could this be fixed. i see its open from 2014 and no action is taken it . If its not planned to be fixed then the same restriction should apply to creation of filter as well it should not allow with same prefix after certain number of filters. ","author":"Mahesh Kumar"},{"text":"Same issue for me. We are an enterprise business and need to be able to find a saved filter when searching a list of filters in Wallboard gadget for example.\r\n\r\nHave tried to save filters with different names, prefix and even prefix \"aa \" and nothing seems to work. Jira has a limit on how many filters can show up in the scroll field?","author":"Paul Loveday"},{"text":"We also hit this problem. Would be great to have this fixed. ","author":"Andreas von Euw"},{"text":"Since this was initially reported in 2015, is there any chance this will get assigned to anyone soon?  It's been 4 years.  How many customers (55 right now) have to want it fixed before it gets prioritized?  Any info you can provide on the process would be helpful.  Thanks.","author":"Kelly Jaxheimer"},{"text":"We have also found out this issue and see that this is trending topic... \r\nAny idea of when would it probably be fixed?","author":"Banco de España"},{"text":"We encountered a similar issue, not with Shared Filters, but actually with Portfolio for Jira plugin and the ability to Assign Issue Sources to a Team.  The Issue Source is a searchable drop-down of Agile Boards.\r\n\r\nIt seems if you also create around 20 Agile Boards all beginning with the same string, and including special characters like hyphen or underscore, a similar bug manifests in that the drop-down doesn't list some of the Agile Boards at all (the list gets truncated somehow).\r\n\r\nEx: Create agile boards ABC_one, ABC_two, ABC_three, ABC_four, etc. and the Issue Source drop-down (in Portfolio) stops listing any boards after ABC_twenty.","author":"Jeffrey Thornsen"},{"text":"Yes, I also got same issue. Was clueless and stuck , till I searched and found that a defect is logged. \r\n\r\nWill be really helpful if this can be solved. ","author":"Santanu Kar"},{"text":"Hi All,\r\n\r\nWhat ever filter name?\r\n\r\nJust an heads up as alternative workaround \"On searching just paste exact filter name in search box\"","author":"Dharnesh"},{"text":"For us the workaround to paste the filter name does not work (Jira cloud):(","author":"Bernd Lorenz"},{"text":"Are we waiting for GOD to comment on this Jira to get this fix :)  why cant we just fix it from last 6years this Jira is open ","author":"Mahesh Kumar"},{"text":"Reporting the same issue. When will this be fixed. After migrating to Jira cloud - cannot find recently saved filters while creating new boards (scrum & kanban). It used to work before the cloud migration.\r\n\r\nHad to remove the special character - from the filter name to workaround this issue.","author":"Missy Ann Mathews"},{"text":"Hi Atlassian Team,\r\n\r\nWe faced the same issue using Jira Server 8.13.0.\r\n\r\nOur Jira users use many filters, and therefore decided to name them using special patterns. For example,\r\n{quote}tsspe.ph3.ssp.planning.long.all_tasks\r\n{quote}\r\n, where _tsspe.ph3.ssp_ is a filter prefix. And there are many filter starting from this prefix (let it be 50).\r\n\r\nAnd filter from example above is not appearing while creating or editing Kanban/Scrum Board. Copy-pasting full filter name, trying to populate it char by char do not help.\r\n\r\nAlthough, it is still available while creating/editing gadgets.\r\n\r\nAs mentioned above, workaround is to rename the whole filter to something unique, add it to a board, and then rename it to its initial name. \r\n\r\nBut this is odd and causes additional effort from teams' side.\r\n\r\nPlease take a look at this issue.","author":"Artem Tikhobaev"},{"text":"This is also impacting our environment, as users heavily rely on searches and shared filters. \r\n\r\nPlease give some priority to this. Thanks!\r\n\r\nJira 8.5.3 - Datacenter","author":"Paulo Salvador"},{"text":"Paulo - I've been frustrated by this issue as well... but saw on another thread (which I can't find the link) that the best workaround is to do the following;\r\n\r\n \r\n # Create your query w/ the exact parameters you want, but add a single quotation mark at the beginning of the query name (\"QueryName). By doing that (\"QueryName) your query will come up as one of the first items on the search.\r\n # Go to the board configuration ('General and filter') page & try to find your query in the 'Saved Filter' section (it should be right at the top).\r\n # Once you've found it, select it and leverage it for your board.\r\n # Then go back to your issue queue (\"QueryName) and remove the \" at the beginning of your query name (since you were able to find it - and it's no longer required :) ).\r\n\r\n \r\n\r\nHope the steps above helps... I know I'll be leveraging it for a while (until Atlassian fixes the issue).","author":"Samuel Hallenberg"},{"text":"Is there a cloud ticket for this? We are having the same issue there.","author":"Josh Costella"},{"text":"I have the same issue.","author":"Martin Renaud"},{"text":"Did anyone find a solution?","author":"Dav Anson"},{"text":"I have the same problem, would be great with a solution.","author":"Malin Diallo"},{"text":"I am unable to update or create a board with a specific filter b/c the drop down is not showing it, even when I enter the entire name of the shared filter.  For Cloud.","author":"Karri Adkins"},{"text":"I am also having this issue and wondering if there is any update from Jira team on this.\r\n\r\nCurrently I'm using the workaround of saving the filter as A0, A1 etc but that will only work up to 15 boards (=number of filters listed in the \"Saved filter\" dropdown). We're on Jira Cloud.\r\n\r\nThe way our teams and initiatives are set up, we will soon exceed that number (and I can confirm that the board is impacted once the associated filter drops off the \"Saved filter\" dropdown list)","author":"Siva Chandrasekaran"},{"text":"This cost us an hour too. Frustrating.","author":"evan prothro"},{"text":"Is there any update on this? ","author":"Surbhi Soni"},{"text":"We spent several hours troubleshooting this until we found this bug.  Please fix this.","author":"Anna Bosnick"},{"text":"Same issue on our end. Extremely frustrating.\r\n\r\nI've just created a copy of the board (just not to spend time for configuring from scratch). I've edited a filter and saved it as a new one... BUT I can't use it cause it does not appear in a drop-down list and I CAN'T create a new filter for an existing board cause it only allows me to edit saved filter which is currently used by the board.\r\n\r\n*{color:#de350b}bad user experience (n)(n)(n){color}* \r\n\r\n ","author":"Evgeny Bochkarev"},{"text":"Same here - very frustrating to see that this bug exists since 2014 :-o","author":"Sven Mueller"},{"text":"Wow Atlassian, this is absolutely terrible! I'm part of big org, that is not happy about this...lets get this fixed ASAP","author":"William Diaz"},{"text":"Hello All, \r\n\r\nIt looks like the bug is triggered by using special characters in the title of your jql filter. If you re-save your filters with no capitalization and no special characters (i.e. !@#&*)(\"_\") you should be able to find them via search. It worked at least for me.\r\n \r\n ","author":"Karen Souza"},{"text":"Thank you @Karen Souza, but please Jira fix it!","author":"Daniel Enrique Deternoz Milano"},{"text":"The same for Jira Plans. \r\n\r\nWhen creating plan you can't choose your filter if it's not named \"correctly\".\r\n\r\nThat causes people to keep creating duplicated filters :( blowing up JIRA.\r\n\r\nVery bad user experience.\r\n\r\n \r\n\r\n ","author":"Joanna Maciag"},{"text":"still an issue, limits usability severely","author":"Francisco Schulz"},{"text":"This issue affects Jira v9.4.9","author":"Yan Zhou"},{"text":"This is still happening on the cloud version of Jira too. ","author":"Spiro Kalapodis"},{"text":"WOW. This is so bad. This is the last straw. Moving to Azure instead. Its been a long relationship Atlassian but this is basic functionality that should be working. The number of clients that you are going to start losing is going to be considerable.","author":"Lucy Dilts"},{"text":"This issue affects v9.4.15","author":"Trenton Minx"},{"text":"This issue affects Jira v9.12.14","author":"abdelbar anakkar"}]},{"summary":"Cloned issues inherit the Completed Sprint value and can't be removed","key":"JSWSERVER-10548","url":"https://jira.atlassian.com/browse/JSWSERVER-10548","type":"Bug","priority":"","description":"Cloning issues that are with completed sprint value will inherit the value and can't be removed from UI.\r\n\r\nThe cloned issues however won't show up in the completed sprint reports.\r\n\r\nh4. Workaround 1\r\nRemove the sprint value from its field via JIRA issue navigator bulk edit:\r\n# search for the affected issues in the Issue Navigator;\r\n# click *Tools > Bulk Edit*;\r\n# select the issue and click *Next*, then select *Edit Issues* and click *Next*;\r\n# select _Change Sprint_ and edit the value accordingly - if you don't want the issue to be associated with any sprints, leave the field empty;\r\n# click *Next* and proceed with the instructions to complete the change.\r\n\r\nh4.Workaround 2:\r\n- [Clear Sprint information when cloning JIRA issue | https://confluence.atlassian.com/jirakb/clear-sprint-information-when-cloning-jira-issue-779159157.html]","createDate":"2014-03-27T15:06:15.000+0000","comments":[{"text":"IMHO this is not minor as cloning an issue is a common used feature to handle typical tasks (maintenance, bugfixing etc) but the link to the origin issue´s sprint is mixing up the reports...","author":"Hans-Hermann Hunfeld"},{"text":"This one is also related to this: \r\nhttps://jira.atlassian.com/browse/GHS-6541","author":"Hans-Hermann Hunfeld"},{"text":"The Workaround sounds easy to follow, but I got the message in that Sprint Field: \"An error occurred whilst rendering this message. ...\"","author":"Jose M."},{"text":"Hi. I have empted the field, than it works.","author":"Jose M."},{"text":"I agree this is NOT minor.  Needs to be fixed ASAP (in GHS-6541).","author":"Rob Haughey"},{"text":"Atlassian, we, too, are running into this problem - please FIX!!\r\n","author":"Chris Gray"},{"text":"It seem we have already implemented sensible logic for FixVersion values. We should do the same with Sprint values.\r\nIf the value is archived/closed, then the Cloning process should leave the value behind (not carry it into the new jira).\r\n\r\n","author":"Beth Brawley"},{"text":"Same issue here - any news on a fix?","author":"Alexis Baker"},{"text":"@Jose M. To clarify the work around... the new value must be the 'Sprint ID' value not it's name. The way I find sprint ID is to hover over the 'View in Issue Navigator' button on the Planning screen.\r\n !screenshot-1.png|thumbnail! ","author":"Rob Haughey"},{"text":" !image-2016-07-22-13-20-14-058.png|thumbnail! \r\n\r\nNot allowed to change the sprint with the bulk","author":"Silvi"},{"text":"t","author":"Atlassiansales"},{"text":"Same issue here. ","author":"Aashay Joshi"},{"text":"Putting an empty value in bulk edit does not do anything, the old sprint remains there.","author":"Hanna Walinen"},{"text":"Same issue here. When I clone an epic, all cloned issues in that epic inherit all previous sprint values, and I can't remove them. I can add a new sprint, but I can't remove the old ones.","author":"Alina"},{"text":"Such a pesky annoying thing. The choice should be left to users whether or not 'completed sprints' should be carried over at the time of cloning. 7 years since this was reported and no progress. ","author":"Kashyap K"},{"text":"More than pesky or annoying.  Either let the user remove previously completed sprint values from an issue (the bulk edit does NOT work, neither does editing an individual Issue); or give the user the choice to include/exclude the Sprint field values in the clone.\r\n\r\nHaving this fixed or not makes a big difference:  if not fixed, every Program Increment I must manually re-create a set of some 16 issues, rather than clone and tweak them for the new PI.  These represent a standard set of things we must do each PI. The difference is less than an hour vs. a full day of work.\r\n\r\nThank you.","author":"will.cummings"},{"text":"Also having this issue. In this case: \r\n * go to 'clone' for an issue with a closed sprint value\r\n * select any or none of the options (including or excluding sprint values)\r\n * Submit\r\n * Expected: Issue should clone\r\n * Actual: Get error, \"cannot clone issue, please check your connection\"\r\n\r\nI also noticed that this issue was completed in a sprint which is now closed, but the sprint value isn't showing in the main field-- it looks blank, with the \"+1\" for being in a closed sprint. That seems strange to me, and I'm pretty sure that didn't used to happen.\r\n\r\n \r\n\r\nETA: In our case, it is because we had a validation on the issue that required the affects version field, and the value in the original ticket had an archived fix version. We were able to get around this by unarchiving that version for the purposes of the clone, and then editing from there. Removing my report.","author":"Rabbit Stoddard"},{"text":"Would be great to have a way to delete a sprint out of the completed sprints field for a given ticket.","author":"Eric Sutherland"},{"text":"I've just come across this with a few of mine.  Users picked the wrong sprint, that sprint was closed.  Now can't remove the completed sprint from the list, but it was never worked on there or meant to be included.  Throws off the reports because of it, I just want to be able to clear the field, would even jump through hoops to do it, but nothing so far I've tried has worked.","author":"Shawn Berkstresser"},{"text":"How can this possibly not be fixed after 9 (NINE) years!?!?  if it's not possible, let us know, otherwise, please, you've got 114 reporting this, please take a look and fix.  Thx. ","author":"John West"},{"text":"Hi, our org is using Jira cloud. The workaround does not work. Neither does creating a fresh clone and ensuring not to clone sprint values. ","author":"Sam Speight"},{"text":"This is impacting our teams, please help to remove sprint information from Clone++","author":"Ranganath HV"},{"text":"Please fix this!","author":"Jack Robertson"},{"text":"This bug is affecting Easy Agile Programs customers who use issue cloning. \r\n\r\nWhen planning team-level issues in the app, users select a series of Jira sprints for each Increment. This means that the app shows the issues from those sprints, and issues planned in Easy Agile Programs will be added to those sprints in Jira. \r\n\r\nThe app also maintains two [custom fields|https://help.easyagile.com/easy-agile-programs/programs-custom-fields] for these issues based on these sprints. \r\n\r\n \r\n\r\nBecause cloned issues incorrectly receive sprint values, the app assumes that the issues should be in these sprints. It will show these cloned issues in the given sprints, and they'll also appear in JQL searches using the associated custom field. \r\n\r\nGiven the app uses sprints from Jira as a \"single source of truth\", we're unable to correctly handle cloned issues with incorrect sprint fields. \r\n\r\n \r\n\r\nThanks to the customer who was able to identify this bug as the root cause! ","author":"Henri Seymour {Easy Agile}"},{"text":"It would be very beneficial to my team if this bug were fixed.","author":"Katie Downing-Powell"},{"text":"[~86c315441630] - It's been over 10 years since this bug was first reported...  Doesn't look like Atlassian is interested in fixing it.\r\n\r\nI have found that _cloning a single Story_ gives you the choice to include sprint values or not.  But yeah, once the deed is done, there is no way to go back and clean it up.  Haven't tried the bulk-edit workaround in a while, but it wasn't working 3 years ago when I tried it.","author":"will.cummings"}]},{"summary":"Any gadget sends header limit error when the filter calls around 430 issues","key":"JSWCLOUD-20506","url":"https://jira.atlassian.com/browse/JSWCLOUD-20506","type":"Bug","priority":"","description":"h3. Issue Summary\r\nPie chart gadget sends header limit error when the filter calls around 430 issues.\r\nWhen clicking on any segment of the pay chart Jira sends all the called issues through the URL, if these are more that 430 the user receives a \"header too large error\"\r\n\r\nProblem is reported for other gadgets as well.\r\n\r\nh3. Steps to Reproduce\r\n # Create a filter with a JQL like issue in (ISS-1,ISS-2,ISS3,ISS-4...........) with more than 430 issues\r\n # Create a workload pie chart gadget and use the previously created filter\r\n # Click on a segment of the pie chart\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Expected Results\r\nTo display the information or one error indicating what is the problem\r\n\r\nh3. Actual Results\r\nA 400 bad request header too large error is displayed\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nIn case that search does not work, it is possible to try a different approach:\r\n* Create a new filter and refer to the existing filter. e.g filter_new = <filter used in the dashboard>\r\n* Change the gadget to use the new filter. 400 error should be resolve in most of the case","createDate":"2020-07-07T16:29:11.000+0000","comments":[{"text":"Celso, how are you? We are trying to reproduce the case with the indications you suggested, we will comment on the result shortly.\r\nPlease do not close the request yet","author":"Gastón Barros"},{"text":"compare:\r\nhttps://jira.atlassian.com/browse/JRACLOUD-80076\r\nhttps://jira.atlassian.com/browse/JRACLOUD-76393\r\nhttps://jira.atlassian.com/browse/JRACLOUD-83196","author":"Florian Reichl"}]},{"summary":"Sending an email with an invalid attachment causes the attachment to fail to be added silently","key":"JSDSERVER-16135","url":"https://jira.atlassian.com/browse/JSDSERVER-16135","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSending an email with an invalid attachment causes the attachment to fail to be added silently\r\nh3. Steps to Reproduce\r\n # Configure an incoming mail handler for the JSM project(Email Requests)\r\n # try sending an email to the incoming mail handler with an invalid attachment (ie jpeg file and saved as a png file extension)\r\n\r\nh3. Expected Results\r\n * The issue is created with the attachment added. Or\r\n * Show in the logs/ticket that the attachment failed to be attached\r\n\r\nh3. Actual Results\r\n * Attachment failed to be added silently and no errors were reported in the logs\r\n\r\nh3. Workaround\r\n\r\nCurrently not available\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_Example: 5.12.15_|_Yes_|\r\n|Most Recent Bug-Fix Release| | |\r\n|Previous Major Release| | |\r\n|Most Recent LTS| | |\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._| | |\r\n|_(Add rows as needed)_| | |","createDate":"2025-04-01T11:38:20.000+0000","comments":[]},{"summary":"Decimal separator is removed when saving float values in Assets objects","key":"JSDSERVER-16134","url":"https://jira.atlassian.com/browse/JSDSERVER-16134","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen saving an attribute value using comma as the decimal separator, the separator is removed, leading to a wrong value. The problem is inverted (dot is removed) when using locales that default to comma (such as Dutch or German).\r\nh3. Steps to Reproduce\r\n\r\n*Modality 1 - English locale*\r\n # Create an object type with a float attribute.\r\n # Give it any value with a dot decimal separator, such as 1.5.\r\n # In the list view, edit the value to use a comma as the decimal separator, such as 1,5.\r\n # The separator is removed and the value is saved as 15.\r\n\r\n*Modality 2 - German locale*\r\n # Create an object type with a float attribute.\r\n # Give it any value with a comma decimal separator, such as 1,5.\r\n # In the list view, edit the value to use a dot as the decimal separator, such as 1.5.\r\n # The separator is removed and the value is saved as 15.\r\n\r\n(In the object edit view, the issue was not reproducible. In this case, the separator is replaced by a dot or comma, depending on the locale, but the value is not modified).\r\nh3. Expected Results\r\n\r\nAssets should fully respect the usage of the default decimal separator, as some locale settings use commas instead of dots (for example, Dutch and German). Editing of float attributes should be saved correctly, and the values should also be consistently displayed depending on the locale.\r\n\r\nIn previous versions, the error message \"Number is not valid (Float)\" would be displayed. Apparently, the \"fix\" on bug [JSDSERVER-15703|https://jira.atlassian.com/browse/JSDSERVER-15703] resulted in this new behaviour.\r\nh3. Actual Results\r\n\r\nThe value is modified, as the separator is lost.\r\nh3. Workaround\r\n\r\nUse a dot or comma as a decimal separator, depending on the case.\r\nh3. Versions Tested\r\n\r\n \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|10.3.5|Yes|\r\n|Most Recent Bug-Fix Release|10.5.0|Yes|\r\n|Previous Major Release|10.3.3|No|\r\n|Most Recent LTS|10.3.5|Yes|\r\n|Previous Supported LTS|10.3.3|No|","createDate":"2025-04-01T09:06:14.000+0000","comments":[]},{"summary":"Assets Confluence Macro object information pop-up is broken","key":"JSDSERVER-16133","url":"https://jira.atlassian.com/browse/JSDSERVER-16133","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the Assets Confluence Macro to display a list of objects from an object schema in Jira, hovering over attributes referencing other objects results in a pop-up. This pop-up is broken in version 9.2 of Confluence, showing only a grey box. In previous versions of Confluence, such as 8.5, the pop-up displays the correct information about the object.\r\nh3. Steps to Reproduce\r\n # Link Confluence and Jira.\r\n # Install the Assets Confluence Macro in Confluence.\r\n # Create a sample object schema in Jira. For test purposes, you can use the default Assets IT Service Management project with sample data in JSM.\r\n # Create a page in Confluence and add the macro.\r\n # Load all objects from the object schema on the page.\r\n # Find an object that contains an attribute referencing other objects, such as Business Service Owner in the sample schema.\r\n # Hover over an entry of this attribute type, such as the example \"Wes Shults\" for object \"TESTITSM-100\".\r\n\r\nh3. Expected Results\r\n\r\nThe object information is displayed correctly (Confluence 8.5):\r\n\r\n!nobug.png|width=281,height=260!\r\nh3. Actual Results\r\n\r\nA grey box appears, covering the data (Confluence 9.2):\r\n\r\n!bug.png|width=273,height=227!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available.\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_Confluence 9.2_|_Yes_|\r\n|Most Recent Bug-Fix Release| | |\r\n|Previous Major Release| | |\r\n|Most Recent LTS| | |\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._| | |\r\n|_(Add rows as needed)_| | |","createDate":"2025-03-28T15:07:37.000+0000","comments":[]},{"summary":"Assignee, Reporter and Request Participant fields gets word wrapped","key":"JSDSERVER-16131","url":"https://jira.atlassian.com/browse/JSDSERVER-16131","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Assignee, Reporter and Request Participant field now features word wrapping, which complicates the process of selecting the appropriate user for the list.\r\nh3. Steps to Reproduce\r\n # Create an issue in JSM project\r\n # Try to add any user with a long display name or email id.\r\n\r\nh3. Expected Results\r\n\r\nComplete email-id is being shown\r\n\r\n!image-2025-03-28-18-25-56-952.png|width=578,height=251!\r\nh3. !image-2025-03-28-18-27-11-252.png|width=849,height=70!\r\nh3. Actual Results\r\n\r\nEmail Id is getting word wrapped\r\n\r\n!image-2025-03-28-18-28-40-763.png|width=594,height=316!\r\n\r\n!image-2025-03-28-18-28-08-331.png|width=701,height=113!\r\nh3. Workaround\r\n # Right-click on the Issue View screen and select \"View Page Source.\"\r\n # Search for the keyword \"Assignee/Reporter/Request Participant\" and locate the relevant sections.\r\n{code:java}\r\n<label for=\"customfield_XXXXX\">Request participants:</label>\r\n...\r\n<span id=\"customfield_XXXXX-val>\" data-name=\"Request participants:\" data-fieldtype=\"sd-request-participants\" ...\r\n{code}\r\n# Extract the customfield span id from the span id section.\r\n# Add the announcement banner below with the correct span id.\r\n{code:java}\r\n<style>\r\n  #customfield_XXXXX-val {\r\n      width: 400px !important;\r\n      max-width: 100% !important;\r\n  }\r\n</style>{code}\r\n\r\n \r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|10.3.3|Yes|\r\n|Most Recent Bug-Fix Release| | |\r\n|Previous Major Release|10.0.0|No|\r\n|Most Recent LTS| | |\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._|10.1.1 |Yes|\r\n|_(Add rows as needed)_| | |","createDate":"2025-03-28T13:03:25.000+0000","comments":[{"text":"Also see this at V10.3.4","author":"Sergio Filipe"}]},{"summary":"when using filter Issue scope AQL, empty text customfield is breaking IQL OR statement for validation","key":"JSDSERVER-16118","url":"https://jira.atlassian.com/browse/JSDSERVER-16118","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using filter Issue scope AQL, empty text custom-field is breaking IQL OR statement for validation. Issue started after upgrade from 9.12 to 10.3. It works fine in older version.\r\nh3. Steps to Reproduce\r\n # Create two Assets CF -> *ContractCF* and *Party* *group* and one text CF-> *Customer* *user*\r\n # Create an assets schema test and three Assets object-Type -> {*}Contract{*}, *Party* {*}Group{*}, *User*\r\n # Contract ObjectType should have attribute referring to party group and user object.\r\n # Create objects in all three object-type.\r\n # Now set up the context of custom-field *Party* *group* to list down all party group objects.\r\n # Set-up the context of custom-field *contractCF* to list down all contract objects and specify filter Issue scope as below. Here customfield_10234 is for *PartyGroup* and customfield_56789 is for *customer* *user.* Filter issue scope: ->\r\n{quote}  **   \"Party Group\"= ${customfield_01234} OR \"Customer User\" in ${customfield_56789} {quote}\r\n # Add all the three CF to a test project and create issue screen. \r\n # Try to create an issue and select group object in *Party* *group*\r\n # Leave the *Customer user* field empty\r\n # Select contract object in *contractCF*\r\n # Click on create issue.\r\n\r\nloom video:\r\n[https://www.loom.com/share/4d3c7caee57d43668e7298fe91470cae?sid=ee0beb5c-35fb-4afb-a28d-c0afb55f11e0]\r\nh3. Expected Results\r\n\r\n Issue should be created without any issue\r\nh3. Actual Results\r\n\r\nissue is not created until we give any value in the text field userCF. It displays error for contract object.\r\n{noformat}\r\nCould not find Assets object/s (object key of selected contract object) {noformat}\r\nh3. Workaround\r\n # Remove the OR condition with text CF. \r\n # Give any random value like N/A and you can delete that later.\r\n\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_10.3.3_|_Yes_|\r\n|Most Recent Bug-Fix Release| | |\r\n|Previous Major Release| | |\r\n|Most Recent LTS|10.3.3|Yes|\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._|9.12.4|No|\r\n|_(Add rows as needed)_| | |","createDate":"2025-03-20T08:04:57.000+0000","comments":[{"text":"Affected to 10.3.2 and 10.3.4 too.","author":"Cristina Sanz García"}]},{"summary":"Assets fails to handle Long values on Oracle DB","key":"JSDSERVER-16117","url":"https://jira.atlassian.com/browse/JSDSERVER-16117","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFew Asset objects are currently missing from the Jira UI, and the clean reindex process fails due to an SQLException. Furthermore, the Jira assets custom field is generating an error: \"Error rendering ‘com.atlassian.jira.jira-view-issue-plugin:details-module’.\"\r\nh3. Steps to Reproduce\r\n\r\nJSM version 10.3.3 is configured with Oracle Database Server 19.26.0.0.0 and Oracle JDBC Driver 19.3. Users have reported that certain objects are missing in the user interface, and the asset clean reindex operation fails with an error. The Atlassian Jira logs are showing a recurring error: {{java.sql.SQLException: Cannot extract column 23 for type java.lang.Long}}\r\nh3. Expected Results\r\n\r\nAssets clean reindex should be completed without any errors. There should not be any objects missing in the schema, and the assets custom field should accurately display the objects.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the Atlassian-jira.log file:\r\n{noformat}\r\n2025-03-17 11:17:44,858+0100 support-zip ERROR Anonymous user     [c.r.j.p.i.s.c.d.dao.sql.AbstractAOService] Error querying database:\r\njava.sql.SQLException: Cannot extract column 23 for type java.lang.Long\r\n    at com.riadalabs.jira.plugins.insight.services.core.dal.dao.sql.AbstractAOService.getObjectWithNullCheck(AbstractAOService.java:860)\r\n    at com.riadalabs.jira.plugins.insight.services.core.dal.dao.sql.AbstractAOService.findObjectAttributeValuesDTOs(AbstractAOService.java:718)\r\n    at com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectDalImpl.findDBObjectsInternal(ObjectDalImpl.java:578)\r\n    at com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectDalImpl.findDBObjects(ObjectDalImpl.java:538)\r\n    at com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectDalImpl.loadObject(ObjectDalImpl.java:358)\r\n    at io.riada.insight.index.model.ObjectIndexImpl.render(ObjectIndexImpl.java:294)\r\n    at io.riada.insight.index.model.ObjectIndexImpl.render(ObjectIndexImpl.java:65)\r\n    at io.riada.insight.index.model.InsightIndexBase$1.load(InsightIndexBase.java:101)\r\n    at io.riada.insight.index.model.InsightIndexBase$1.load(InsightIndexBase.java:98)\r\n    at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3574)\r\n    at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2316)\r\n    at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2189)\r\n    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2079)\r\n    at com.google.common.cache.LocalCache.get(LocalCache.java:4017)\r\n    at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4040)\r\n    at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4989)\r\n    at io.riada.insight.index.model.InsightIndexBase.load(InsightIndexBase.java:71)\r\n    at io.riada.insight.index.model.ObjectIndexImpl.loadObject(ObjectIndexImpl.java:172)\r\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\r\n    at java.base/java.util.concurrent.ConcurrentHashMap$KeySpliterator.forEachRemaining(Unknown Source)\r\n    at java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\r\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(Unknown Source)\r\n    at java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n    at java.base/java.util.stream.ReferencePipeline.collect(Unknown Source)\r\n    at io.riada.insight.index.filter.objectticketconnection.ObjectTicketConnectionFilterImpl.countObjectTicketConnectionsBySchema(ObjectTicketConnectionFilterImpl.java:51)\r\n    at com.riadalabs.jira.plugins.insight.services.analytics.service.InsightInstanceAnalyticsServiceImpl.getPerSchemaStats(InsightInstanceAnalyticsServiceImpl.java:102)\r\n    at com.riadalabs.jira.plugins.insight.services.analytics.service.InsightAtstSupportServiceImpl.getPerSchemaAnalytics(InsightAtstSupportServiceImpl.java:28)\r\n    at com.atlassian.troubleshooting.jira.bundle.AssetsSupportBundle.get {noformat}\r\nh3. Workaround\r\n\r\nRequired, if there is no workaround please state:\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-20T07:54:24.000+0000","comments":[]},{"summary":"An Empty Date Field Caused an NPE in the Clone Action in Automation (A4J) Rule","key":"JSDSERVER-16116","url":"https://jira.atlassian.com/browse/JSDSERVER-16116","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe presence of the field Due Date in a project's screens causes a null pointer exception in a clone action automation involving an Assets field copying a value from the trigger issue.\r\n\r\nh3. Steps to Reproduce\r\n # Create a sample object schema and a few objects.\r\n # Create a sample project.\r\n # Create an Assets object custom field, associate it with the object schema and add it to the project.\r\n # In the screens for the project, add the field Due Date.\r\n # In the project, create an automation rule:\r\n ** When: Manually triggered\r\n ** Then: Clone issue into (Same project, same issue type, Assets field \"Copy Assets Field from Trigger issue\")\r\n ** Name it something like \"Assets Clone Issue\".\r\n # Create a new issue in the project and add an object to the Assets field.\r\n # Click on More > Assets Clone Issue. A message will state the rule was executed successfully.\r\n # Go to the automation audit logs and check that the rule failed with the following error:\r\n** {code:java}\r\nUnexpected error executing rule:\r\njava.lang.NullPointerException\r\n{code}\r\n# Now, remove the Due Date field from the project screens.\r\n# Try the clone action again. It will work.\r\n\r\n(!) Recent reports indicate that, similar to the 'Due Date' field, any field primarily a date type that remains empty can result in a Null Pointer Exception (NPE) error. This occurs when using the clone/create option, which involves an operation to copy the values of Asset fields within the Automation rule (A4J).\r\n\r\nh3. Expected Results\r\n\r\nThe issue is cloned successfully.\r\n\r\nh3. Actual Results\r\n\r\nThe automation rule fails.\r\n\r\nh3. Workaround\r\n\r\nIf only the Due Date or any other removable field is involved, it could be removed from the issue view. However, if the situation involves essential custom fields that must be copied, it is advisable to implement an IF condition in the rule to verify the value of these specific fields for the time being.","createDate":"2025-03-19T15:52:01.000+0000","comments":[]},{"summary":"The creation or editing of assets objects fails due to a NullPointerException.","key":"JSDSERVER-16066","url":"https://jira.atlassian.com/browse/JSDSERVER-16066","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAssets have a limit on the number of object attributes set to the Java integer limit of 2,147,483,647. When the number of object attributes exceeds this limit, the code will fail with a Null Pointer Exception (NPE) when new objects are created or when additional attributes are added to existing objects.\r\nh3. Steps to Reproduce\r\n\r\nA straightforward method to replicate this issue is to check the maximum ID in the AO_8542F1_IFJ_OBJ_ATTR table or the sequence AO_8542F1_IFJ_OBJ_ATTR_ID_seq, ensuring it exceeds the value of 2,147,483,647.\r\nh3. Expected Results\r\n\r\nAsset object creation, editing, and deletion should function without encountering any NullPointerException.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the Atlassian-jira.log file:\r\n{noformat}\r\n2025-02-19 08:40:07,027+0000 http-nio-8080-exec-61 WARN  /rest/insight/1.0/object/create \\[c.r.j.p.i.services.core.ObjectServiceImpl] Failed to create object Test (null)\r\njava.lang.NullPointerException\r\nat com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectAttributeDalImpl.addObjectAttributeValue(ObjectAttributeDalImpl.java:360)\r\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\nat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\nat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\nat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\nat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\nat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\nat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\nat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\nat com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectAttributeDalImpl.handleValueBeans(ObjectAttributeDalImpl.java:316)\r\nat com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectAttributeDalImpl.storeValueToAttribute(ObjectAttributeDalImpl.java:254)\r\nat com.riadalabs.jira.plugins.insight.services.core.dal.impl.ObjectAttributeDalImpl.lambda$bulkChangeAttributeValues$11(ObjectAttributeDalImpl.java:660)\r\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\nat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\nat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\nat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474 {noformat}\r\nh3. Workaround\r\n\r\nRequired, if there is no workaround please state:\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_Example: 9.14.2_|_(Yes / No)_|\r\n|Most Recent Bug-Fix Release| | |\r\n|Previous Major Release| | |\r\n|Most Recent LTS| | |\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._| | |\r\n|_(Add rows as needed)_| | |","createDate":"2025-02-28T11:57:51.000+0000","comments":[]},{"summary":"User mentioned notifications are not sent after enabling notifications for agents acting as customers","key":"JSDSERVER-16061","url":"https://jira.atlassian.com/browse/JSDSERVER-16061","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe 'mention' notifications are not working for a user who is an Agent and a Customer even though the configuration settings are enabled as 'Yes, send customers both Jira Service Management and Jira notifications'.\r\nh3. Steps to Reproduce\r\n * Install JSM 5.17.0 or above\r\n * Go to Applications >> JSM Configuration >> Notifications >> Set 'Yes, send customers both Jira Service Management and Jira notifications'\r\n * Create a JSM project\r\n * Create a user and give them JSM license\r\n * Create an issue and add the newly created user as Reporter\r\n * Mention the Reporter in a comment and share it with the customers(public comment)\r\n\r\nh3. Expected Results\r\n\r\nThe Reporter user will get both 'mentioned' notification and the public comment added notification.\r\nh3. Actual Results\r\n\r\n\r\nThe Reporter only receives the public comment added notification.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|5.17.5|_Yes_|\r\n|Most Recent Bug-Fix Release|10.4.0|Yes|\r\n|Previous Major Release|10.0.0|Yes|\r\n|Most Recent LTS|10.3.2|Yes|\r\n|_Other Versions.._|5.16.5|No|","createDate":"2025-02-25T07:51:16.000+0000","comments":[]},{"summary":"Help Center | Requests: Incomplete and non-descriptive label for the button","key":"JSDSERVER-16057","url":"https://jira.atlassian.com/browse/JSDSERVER-16057","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn incomplete and non-descriptive label such as \"Edit\" is provided for the button.\r\nh3. Steps to Reproduce\r\n # Open the JSM DC Help Center instance.\r\n # Navigate to the \"Requests\" button and expand it.\r\n # Navigate to the \"All requests\" and activate it.\r\n # Using a screen reader, navigate to the mentioned button.\r\n # Listen and note that the button's label is incomplete and non-descriptive.\r\n\r\nh3. Screen Recording\r\n\r\n[^Non-descriptive label screen recording.mp4]\r\nh3. Actual Results\r\n\r\nWhen screen reader users navigate through the \"Requests\" page, they encounter an incomplete and  non-descriptive label, such as \"Edit\" for the button.\r\n\r\nAs a result, screen reader users may not fully understand the button's purpose.\r\nh3. Expected Results\r\n\r\nThe screen reader should announce unique and descriptive labels for buttons to ensure users can easily understand their purpose.\r\n\r\nIn this case, update the value of the \"aria-label\" attribute to \"Edit visible columns\" to provide a clear and specific description of the button’s function.\r\n\r\n\r\n{noformat}\r\nNote: Before implementing the label for this control, please consult with the content design team to determine the best label for this approach.\r\n{noformat}\r\n\r\n\r\n\r\nh3. Code Snippet:\r\n{code:java}\r\n<button class=\"edit-visible-columns\" data-testid=\"edit-visible-columns\" type=\"button\">\r\n    <span class=\"icon-container\">\r\n        <span data-vc=\"icon-undefined\" role=\"img\" aria-label=\"Edit visible columns\" class=\"icon\"></span>\r\n    </span>\r\n</button>\r\n {code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 133.0.6943.127 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 135.0 (64-bit)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.4.2\r\nVoiceOver - Version Latest","createDate":"2025-02-24T10:45:14.000+0000","comments":[]},{"summary":"Assets automation does not create Jira tickets","key":"JSDSERVER-16052","url":"https://jira.atlassian.com/browse/JSDSERVER-16052","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Asset automation rule for creating Jira tickets fails when the Select List (single choice) custom field is set as required and has a default value configured.\r\nh3. Steps to Reproduce\r\n # Created a custom field of type “Select List (single choice).”\r\n # Added this custom field to the issue screen.\r\n # Under the field configuration, configure custom field as \"Required.\"\r\n # Configured a default value for the custom field.\r\n # Created a Asset automation rule to create a Jira issue when the object is updated.\r\n\r\nh3. Expected Results\r\n\r\nAsset automation should create a Jira ticket.\r\nh3. Actual Results\r\n\r\n Unfortunately, the Jira issue creation failed, and observed the below errors in the logs. In the logs below, \"select\" is the name of the Select List custom field that I created.\r\n{code:java}\r\n2025-02-14 06:25:58,554 [insight-event-0] | Execute Rule action (AutomationRuleCreateJiraIssueAction): Start, id: 2, event [id: 1, aql: No aql], condition: objectType = \"SOT\"\r\n2025-02-14 06:25:58,560 [insight-event-0] | AutomationRuleCreateJiraIssueAction, Unexpected error: com.atlassian.jira.util.SimpleErrorCollection@291ce2e4[errors={customfield_10700=Select is required.},errorMessages=[],reasons=[VALIDATION_FAILED]]\r\ncom.riadalabs.jira.plugins.insight.common.exception.JiraServiceInsightException: com.atlassian.jira.util.SimpleErrorCollection@291ce2e4[errors={customfield_10700=Select is required.},errorMessages=[],reasons=[VALIDATION_FAILED]]\r\n    at com.riadalabs.jira.plugins.insight.services.jira.JIRAServiceImpl.createIssue(JIRAServiceImpl.java:590) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.jira.JIRAServiceImpl.createIssue(JIRAServiceImpl.java:543) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.action.AutomationRuleCreateJiraIssueAction.doActionSafe(AutomationRuleCreateJiraIssueAction.java:64) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.action.AbstractInsightAutomationAction.doAction(AbstractInsightAutomationAction.java:107) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.rule.impl.AutomationRuleEngineImpl.executeAction(AutomationRuleEngineImpl.java:692) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.rule.impl.AutomationRuleEngineImpl.executeActions(AutomationRuleEngineImpl.java:677) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.rule.impl.AutomationRuleEngineImpl.matchConditionAndExecuteActions(AutomationRuleEngineImpl.java:470) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.rule.impl.AutomationRuleEngineImpl.executeAsConfiguredUser(AutomationRuleEngineImpl.java:268) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.rule.impl.AutomationRuleEngineImpl.handleAsyncEvent(AutomationRuleEngineImpl.java:218) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at com.riadalabs.jira.plugins.insight.services.automation.event.AutomationRuleEventListener.onAsyncEvent(AutomationRuleEventListener.java:94) ~[insight-10.12.1-QR-0273.jar:?]\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n    at java.lang.reflect.Method.invoke(Method.java:569) ~[?:?]\r\n    at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:85) ~[guava-32.1.1-jre.jar:?]\r\n    at com.google.common.eventbus.Subscriber.lambda$dispatchEvent$0(Subscriber.java:71) ~[guava-32.1.1-jre.jar:?]\r\n    at com.atlassian.sal.core.executor.ThreadLocalDelegateRunnable.run(ThreadLocalDelegateRunnable.java:34) ~[?:?]\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\r\n    at java.lang.Thread.run(Thread.java:840) ~[?:?] {code}\r\nh3. Workaround\r\n\r\nReconfiguring the automation action to utilize an HTTP Request or executing a Groovy script can serve as a viable workaround, if feasible.","createDate":"2025-02-21T02:52:22.000+0000","comments":[]},{"summary":"SLA does not stop if the \"Resolution\" has been set twice within a workflow transition","key":"JSDSERVER-16048","url":"https://jira.atlassian.com/browse/JSDSERVER-16048","type":"Bug","priority":"","description":"h3. Issue Summary\r\nSLA does not stop if the \"Resolution\" has been twice in the same workflow transition.\r\nFor example, setting a \"Resolution\" field through workflow transition post function, whilst closing the issue through REST endpoint and setting the \"Resolution\" value within.\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Steps to Reproduce\r\n# Modify used workflow and add a post function to set Resolution field (e.g. to \"Done\"). Publish the workflow\r\n# Create a SLA that has Stop condition \"Entered Status: Done\"\r\n# Create a JSM issue that has the SLA from step 2 applied, and running once the issue is created\r\n# Close a request through REST endpoint [for issue transition| https://docs.atlassian.com/software/jira/docs/api/REST/9.12.0/#api/2/issue-doTransition]. Make sure to include \"Resolution\" value \"Done\" in the REST request body.\r\n\r\nh3. Expected Results\r\nThe SLA stops, regardless if the issue has been closed through REST request or through UI.\r\n\r\nh3. Actual Results\r\nThe SLA keeps running once the issue has been closed through REST endpoint.\r\n\r\nh3. Workaround\r\nh5. Workaround 1\r\nOne needs to make sure that the \"Resolution\" value is set only once:\r\n* Through Workflow screen pop-up,\r\n* Through Workflow post-function,\r\n* or through REST request.\r\n\r\nh5. Workaround 2\r\nMove the post function step to after the issue history event, then the problem can be avoided as JSM will see the original history item.\r\n","createDate":"2025-02-18T07:55:25.000+0000","comments":[]},{"summary":"Assets reference custom field shows error when attempting Jira move","key":"JSDSERVER-16046","url":"https://jira.atlassian.com/browse/JSDSERVER-16046","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nWhen moving issues with Asset Custom Fields that have Filter Issue Scope defined, it fails to move the issue due to error {*}Could not find Asset object/s{*}.\r\n\r\nThis issue does not occur in JSM 5.12.\r\nh3. Environment\r\n\r\nJSM 10.x\r\nh3. Steps to Reproduce\r\n # Import object schema [^jsm-error-move-issue-obj-sche_2025-02-13T02_14_04.814Z.zip]\r\n ** The object schema contains 4 objects:\r\n *** !screenshot-1.png|thumbnail!\r\n # Create 2 Asset custom fields and associate them with Create/View screens:\r\n ** Product:\r\n *** !screenshot-2.png|thumbnail!\r\n ** Model:\r\n *** !screenshot-3.png|thumbnail!\r\n # Create a ticket with the Product and Model fields filled:\r\n ** !screenshot-4.png|thumbnail!\r\n # Move this ticket to another issue type in the same project:\r\n ** !screenshot-5.png|thumbnail!\r\n\r\nh3. Expected Results\r\n\r\nIn JSM 5.12 (Jira 9.12), the Move Issue screen does not prompt updating the Model field:\r\n * !screenshot-6.png|thumbnail!\r\n\r\nThis is expected as both Product and Model are not required fields.\r\nh3. Actual Results\r\n\r\nIn JSM 10 (Jira 10), the Move Issue screen prompts updating the Model field:\r\n * !screenshot-7.png|thumbnail!\r\n\r\nAfter selecting a value from the dropdown menu, it prompts error *Could not find Asset object/s* and the Move Issue process can't proceed:\r\n * !screenshot-8.png|thumbnail!\r\n\r\nh3. Workarounds\r\n\r\nDisable the dark feature assets.aql.scope.filtering.on.issue.update by:\r\n - Going to the page: <JIRA_BASE_URL>/secure/SiteDarkFeatures!default.jspa\r\n - Adding assets.aql.scope.filtering.on.issue.update.disabled to the list of dark features","createDate":"2025-02-16T02:41:58.000+0000","comments":[]},{"summary":"Help Center | Report server for fix: Description list mark-up used unnecessarily","key":"JSDSERVER-15806","url":"https://jira.atlassian.com/browse/JSDSERVER-15806","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUnnecessary description list is provided for the mentioned instance on the page.\r\nh3. Steps to Reproduce\r\n # Open \"JSM System Dashboard\" page.\r\n # Navigate to the \"Projects\" in the header section and choose any ITSM project from the options.\r\n # Navigate to the \"Raise a request\" link in the side navigation and activate it.\r\n # Select \"Sample JSM\" link from portal page.\r\n # Select \"Report a server for fix\" link.\r\n # Navigate onto the \"Browse affected server\" > \"Show graph\" > \"Configure\" buttons and activate them.\r\n # Using screen reader navigate using left right arrow keys to the mentioned content.\r\n # Listen that the mentioned text is marked up as description list unnecessarily.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-12-11 at 6.42.38 PM.png|width=471,height=259!\r\nh3. Actual Results\r\n\r\nThe content such as \"Reference depth:\", \"Inbound References\", \"The max. number of Inbound References from the same Object Type...\" and so on is marked up as description list unnecessarily. As a result, screen reader users found it difficult to understand the content structure.\r\nh3. Expected Results\r\n\r\nScreen reader should announce the content as plain text for their users.\r\n\r\nRemove description list from the mentioned content and code it within <div> element. In addition, if required CSS can be used to maintain the presentation of the page if required.\r\n\r\n*Code Example*\r\n{code:java}\r\n<div class=\"rlabs-graph-sidebar-attribute\">\r\n<div class=\"rlabs-graph-sidebar-left-column rlabs-graph-sidebar-left-column--wider\">\r\n<label for=\"rlabs-graph-reference-depth\">Reference depth:</label></div> \r\n(...)\r\n</div>\r\n<div class=\"rlabs-graph-sidebar-attribute\">\r\n<div class=\"rlabs-graph-sidebar-left-column rlabs-graph-sidebar-left-column--wider\">\r\n<label for=\"rlabs-graph-reference-mx\">Inbound References</label></div>\r\n(...)\r\n</div>\r\n(...){code}\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.7\r\nChrome - 131.0.6778.86 (Official Build) (arm64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 118.1.1 (19619.2.8.111.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n ","createDate":"2024-12-11T12:01:31.000+0000","comments":[]},{"summary":"Help Center | report server for fix: Incomplete labels for form fields","key":"JSDSERVER-15804","url":"https://jira.atlassian.com/browse/JSDSERVER-15804","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe label provided to the image button seems to be incomplete.\r\nh3. Steps to Reproduce\r\n # Navigate to the Projects dropdown.\r\n # Select \"Sample JSM\" option.\r\n # Now activate \"Raise a request\" link from the side navigation.\r\n # Select \"Sample JSM\" link from portal page.\r\n # Select \"Report a server for fix\" link.\r\n # Observe that \"Help Center - report server for fix\" page has been appeared on the screen.\r\n # Activate the \"Browse affected server\" button.\r\n # Observe that a \"Select affected server\" modal dialog has been appeared on the screen.\r\n # Now select \"Shoe graph\" button.\r\n # Inspect the code and verify that label is incomplete.\r\n\r\nh3. Screenshot\r\n\r\n!image-2024-12-12-11-42-45-927.png|thumbnail!\r\nh3. Actual Results\r\n\r\nIncomplete label \"Hide\" is specified for the \"Hide side panel\" button.\r\nAs a result, screen reader users will not understand the purpose of the button.\r\nh3. Expected Results\r\n\r\nUpdate the hidden text for the mentioned button. As the label of the button should be descriptive enough to understand the the purpose of the button.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<button class=\"aui-button aui-button-subtle js-rlabs-graph-sidebar-hide\" title=\"Hide\" resolved=\"\"><span class=\"rlabs-graph-sidebar-icon aui-icon aui-icon-small aui-iconfont-arrows-right\">Hide side panel</span></button> {code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environments\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma Version 14.6 (23G93)  \r\nChrome - Version 129.0.6668.60 (Official Build) (arm64)\r\nFirefox- Version 112.0.1 (64-bit)\r\nSafari- Version 18.0 (19619.1.26.111.10, 19619)\r\nJAWS- Version 2023\r\nNVDA- Version 2020.3","createDate":"2024-12-11T11:43:29.000+0000","comments":[]},{"summary":"Help center | Home: Search results not programmatically identified","key":"JSDSERVER-15738","url":"https://jira.atlassian.com/browse/JSDSERVER-15738","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the \"Help center - Home\" page, As soon as user start entering in the \"What do you need help with?\" input field, The matching results gets populated below the input field.   \r\nh3. Steps to Reproduce\r\n # Open the \"Help center - Home\" page.\r\n # Navigate to the main content.\r\n # Using screen reader, type any invalid character in \"What do you need help with? input field.\r\n # Listen that the dynamically updating content is not announced by screen reader.\r\n\r\nh3. Screen Recording\r\n\r\nScreen Recording\r\n\r\n[^Help Center - Service project - Google Chrome 2024-12-09 18-01-12.mp4]\r\nh3. Actual Results\r\n\r\nWhen the users perform a valid “Search” operation in the “What do you need help with?” input field, search results are getting updated below the respective input field and for invalid search operations the message such as \"No matching search results\" displayed on the page which is not announced by screen reader. The programmatic means of identifying the presence of search result messages and suggestions are not used, so assistive technologies such as screen readers are not able to alert users to the presence of the status message/search results. Although this interaction is easier to understand for sighted users, it is not intuitive for the visually impaired.\r\nh3. Expected Results\r\n\r\nApply the following changes\r\n * Ensure that the search results/status messages that become available when the user search for inputted data in the “What do you need help with?” input field should get announced by the screen reader.\r\n * Provide the aria-live region for the search result message such as \"No matching search results\" which becomes available when the user performs an invalid search operation.\r\n * Screen reader users should be notified when the suggestions get updated in the below along with the count of suggestions. For eg: “ 4 results found” Live regions can be used to achieve this behaviour.\r\n * If this is not feasible, a hidden instruction should be announced (when the search input receives focus), notifying the users of the dynamic change. For eg: Typing letters in the search input fields update the search results, press the tab key to view the list of suggestions.”.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nEnvironment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-12-09T12:08:48.000+0000","comments":[{"text":"Closed by https://bulldog.internal.atlassian.com/browse/A11Y-617","author":"Bohdan Hulovatyi"}]},{"summary":"Behavior when editing float values is inconsistent when using German locale","key":"JSDSERVER-15703","url":"https://jira.atlassian.com/browse/JSDSERVER-15703","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using Jira with German locale, the behavior for editing float values is not consistent.\r\nh3. Steps to Reproduce\r\n # Set up a Jira environment with *German* [locale.|https://confluence.atlassian.com/jirakb/change-locale-for-jira-server-314450433.html]\r\n # Create a test object schema.\r\n # For any object, create an attribute of type {*}float{*}.\r\n # When adding or editing a value for a float attribute in the *Object Schema* view, if you add the number using a comma (the standard for German locale), the error message \"{_}Value is not valid (Float){_}\" will be shown. The error does not happen if a dot is used instead of a comma, but the value will be displayed correctly with the comma.\r\n # When adding or editing a value for the same attribute in the *Object* view, however, it is possible to do so using a comma *OR* a dot. However, the value is then displayed with a dot.\r\n\r\nh3. Expected Results\r\n\r\nAssets should fully respect the German locale settings and allow editing of float attributes with a comma. The values should also be consistently displayed with a comma.\r\nh3. Actual Results\r\n * When adding or editing a value for a float attribute in the Object Schema view, if you add the number using a comma (the standard for German locale), the error message \"Value is not valid (Float)\" will be shown. The error does not happen if a dot is used instead of a comma, but the value will be displayed correctly with the comma.\r\n * When adding or editing a value for the same attribute in the Object view, however, it is possible to do so using a comma OR a dot. However, the value is then displayed with a dot.\r\n\r\nh3. Workaround\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|5.17.4|Yes|\r\n|Most Recent Bug-Fix Release|10.2.1|Yes|\r\n|Previous Major Release| | |\r\n|Most Recent LTS|5.12.15|Yes|\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._| | |\r\n|_(Add rows as needed)_| | |","createDate":"2024-11-25T14:50:07.000+0000","comments":[{"text":"Hi there, quick addition we noticed also that this problem occurs in version 10.3.3","author":"Maxim Granzotto"},{"text":"floated value is consistent.","author":"Mohan Rao"}]},{"summary":"Adding a blank space in front of the CRON expression in one Assets Report will make the entire Assets Reports page fail to load","key":"JSDSERVER-15459","url":"https://jira.atlassian.com/browse/JSDSERVER-15459","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAdding a blank space in front of the CRON expression in one Assets Report will make the entire Assets Reports page fail to load with the following error message:\r\n{code:java}\r\nFailed to fetch reports list\r\n\r\nSomething went wrong. Please try again later. If the error persists, contact our support team.\r\n{code}\r\nh3. !image-2024-07-19-14-11-27-692.png|width=828,height=142!\r\nh3. Steps to Reproduce\r\n # Access the Assets Reports page: Assets > Report\r\n # Create a Report\r\n # Synchronize: *Advanced*\r\n # For the *Cron Schedule* field add a CRON expression with {*}a blank space in front{*}, e.g:\r\n{code:java}\r\n 0 0 1 1 */3 ?\r\n{code}\r\n # Save and Refresh the page\r\n # When refreshing the page, the entire Reports page will be blank with the \"{*}Failed to fetch reports list{*}\" error message. \r\n\r\nVideo Reproducing the issue: [^JSDSERVER-15459 - Reproducing the issue.mov]\r\nh3. Expected Results\r\n\r\nWhen entering an invalid CRON expression (with a blank space), the \"Expression is not valid\" will be presented not allowing the report to be saved. \r\nh3. Actual Results\r\n\r\nThe report CRON Expression will be updated and the below exception will be thrown in the atlassian-jira.log file:\r\n{code:java}\r\n2024-07-19 11:49:04,196-0300 http-nio-44226-exec-17 ERROR admin 709x1831x4 1xytyos 0:0:0:0:0:0:0:1 /rest/insight-widgets/1/widgets [i.r.core.rest.ExceptionErrorMapper] Oops\r\njava.lang.NumberFormatException: For input string: \"?\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:652)\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:770)\r\n\tat net.redhogs.cronparser.builder.YearDescriptionBuilder.getSingleItemDescription(YearDescriptionBuilder.java:22)\r\n\tat net.redhogs.cronparser.builder.AbstractDescriptionBuilder.getSegmentDescription(AbstractDescriptionBuilder.java:25)\r\n\tat net.redhogs.cronparser.CronExpressionDescriptor.getYearDescription(CronExpressionDescriptor.java:109)\r\n\tat net.redhogs.cronparser.CronExpressionDescriptor.getFullDescription(CronExpressionDescriptor.java:245)\r\n\tat net.redhogs.cronparser.CronExpressionDescriptor.getDescription(CronExpressionDescriptor.java:62)\r\n\tat net.redhogs.cronparser.CronExpressionDescriptor.getDescription(CronExpressionDescriptor.java:39)\r\n\tat io.riada.jira.plugins.insight.widget.model.Cron$Companion.descriptionOf(Cron.kt:80)\r\n\tat io.riada.jira.plugins.insight.widget.model.Cron.translate(Cron.kt:27)\r\n{code}\r\n!image-2024-07-19-14-12-04-780.png|width=377,height=123!\r\nh3. Workaround\r\n\r\nWe could manually fix the issue, we will need to identify the affected report CRON expression and update it or temporarily change the report synchronization to once:\r\n\r\n{panel:title= Warning|borderStyle=solid|borderColor=#ffae42|titleBGColor=#ffae42|bgColor=#ffdb9a}\r\n(!) Always [back up|https://confluence.atlassian.com/jira/backing-up-data-185729581.html] your data before performing any modification to the database. If possible, try your modifications on a test server.\r\n{panel}\r\n\r\n # Run the following SQL query to list all the reports using the CRON expression:\r\n{code:sql}\r\nSELECT \"ID\", \"NAME\", \"SYNC_PERIOD\", \"SYNC_PERIOD_CRON\" FROM \"AO_8542F1_IFJ_WIDGET\" WHERE \"SYNC_PERIOD\" = 'ADVANCED' \r\n{code}\r\n # Verify the SYNC_PERIOD_CRON and find the row with an invalid CRON expression (blank space in front of the CRON expression)e.g: \r\n!image-2024-07-19-14-39-27-475.png|width=543,height=106!\r\n # Temporarily update the affected report to SYNC_PERIOD Once, and fix the Cron using the UI. (Recommended (/))\r\n{code:sql}\r\nupdate \"AO_8542F1_IFJ_WIDGET\" SET \"SYNC_PERIOD_CRON\" = NULL, \"SYNC_PERIOD\" = 'ONCE'  WHERE \"ID\" = REPORT_ID;\r\n{code}\r\n(i) - Replace <REPORT_ID> with the affected Asset report ID.\r\n # {*}Or{*}, update the CRON Expression column running the SQL query below:\r\n{code:sql}\r\nupdate \"AO_8542F1_IFJ_WIDGET\" SET \"SYNC_PERIOD_CRON\" = '<CRON_EXPRESSION>'  WHERE \"SYNC_PERIOD\" = 'ADVANCED' AND \"ID\" = REPORT_ID;\r\n{code}\r\n(i) - Replace <CRON_EXPRESSION> with the CRON_EXPRESSION without blank space. (!) Make sure that the CRON expression is valid. \r\n(i) - Replace <REPORT_ID> with the affected Asset report ID.\r\n\r\n","createDate":"2024-07-19T17:08:22.000+0000","comments":[]},{"summary":"Customer is using Azure US Government on Azure Environment while creating an import configuration.","key":"JSDSERVER-15121","url":"https://jira.atlassian.com/browse/JSDSERVER-15121","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe customer is trying to import users and groups from Azure and it's not working. Customer is using Azure US Government on Azure Environment while creating an import configuration.\r\n\r\nInvestigating the documentation, found that we use https://graph.microsoft.com as endpoint but for Microsoft Graph for US Government needs to be https://graph.microsoft.us\r\nReference: https://learn.microsoft.com/en-us/graph/deployments#microsoft-graph-and-graph-explorer-service-root-endpoints\r\n\r\nThis is reproducible on Data Center: No\r\n\r\nh3. Steps to Reproduce\r\n\r\nCreate an Import configuration:\r\n\r\n - Set up Azure integration\r\n - Use Azure US Government as the region\r\n - Click on test\r\n\r\nh3. Expected Results\r\n\r\nImport works to import users and groups from Azure using Azure US Government on Azure Environment\r\n\r\nh3. Actual Results\r\n\r\nIt didn't import any users or groups.\r\n\r\nThe below exception is thrown in the atlassian-jira.log file:\r\n{noformat}\r\n2024-02-01 17:42:18,042+0000 insight-InsightImportThreadGroup-worker-thread-2 ERROR rterrell@kbrcloud.us     [c.r.j.p.a.i.manager.impl.UserService] Error fetching Azure User data for subscription id #000000-000-000-000-0-\r\ncom.microsoft.graph.http.GraphServiceException: Error code: InvalidAuthenticationToken\r\nError message: Inbound policy evaluation empty. Unkown failure\r\n\r\nGET https://graph.microsoft.com/v1.0/users?%24select=id%2CdisplayName%2Cmail%2CmailNickname%2CuserPrincipalName%2CusageLocation%2CaccountEnabled%2CgivenName%2Csurname%2CuserType%2CcompanyName%2CstreetAddress%2CofficeLocation%2Cstate%2Ccountry%2Ccity%2CpostalCode%2CmobilePhone%2CjobTitle%2Cdepartment%2CbusinessPhones%2ConPremisesDistinguishedName%2ConPremisesDomainName%2ConPremisesSamAccountName%2ConPremisesSecurityIdentifier%2ConPremisesSyncEnabled%2ConPremisesUserPrincipalName&%24top=25\r\nSdkVersion : graph-java/v2.3.0\r\nAuthorization : [PII_REDACTED]\r\n\r\n\r\n401 : Unauthorized\r\n[...]\r\n\r\n[Some information was truncated for brevity, enable debug logging for more details]\r\n\tat com.microsoft.graph.http.GraphServiceException.createFromConnection(GraphServiceException.java:501)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.handleErrorResponse(CoreHttpProvider.java:503)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.sendRequestInternal(CoreHttpProvider.java:423)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:220)\r\n\tat com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:200)\r\n\tat com.microsoft.graph.http.BaseCollectionRequest.send(BaseCollectionRequest.java:92)\r\n\tat com.microsoft.graph.requests.extensions.UserCollectionRequest.get(UserCollectionRequest.java:71)\r\n\tat com.riadalabs.jira.plugins.azure.imports.manager.impl.UserService.getAzureUsersForSubscriptionId(UserService.java:272)\r\n\tat com.riadalabs.jira.plugins.azure.imports.manager.impl.UserService.get(UserService.java:204)\r\n\tat com.riadalabs.jira.plugins.azure.imports.manager.impl.UserService.get(UserService.java:38)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4925)\r\n\tat com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3571)\r\n\tat com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2313)\r\n\tat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2190)\r\n\tat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2080)\r\n\tat com.google.common.cache.LocalCache.get(LocalCache.java:4012)\r\n\tat com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4920)\r\n\tat io.riada.CacheProvider.get(CacheProvider.java:49)\r\n\tat com.riadalabs.jira.plugins.azure.imports.manager.impl.UserService.getData(UserService.java:174)\r\n\tat com.riadalabs.jira.plugins.azure.imports.manager.impl.UserService.getDataHolder(UserService.java:136)\r\n\tat com.riadalabs.jira.plugins.azure.imports.manager.AzureContentManager.getDataEntries(AzureContentManager.java:26)\r\n\tat com.riadalabs.jira.plugins.azure.imports.AzureImportModule.dataHolder(AzureImportModule.java:74)\r\n\tat com.riadalabs.jira.plugins.azure.imports.AzureImportModule.dataHolder(AzureImportModule.java:43)\r\n\tat com.riadalabs.jira.plugins.insight.services.jira.module.ImportModuleDelegator.dataHolder(ImportModuleDelegator.java:56)\r\n\tat com.riadalabs.jira.plugins.insight.services.imports.common.importjobprovider.ImportJobProvider.getImportDataHolder(ImportJobProvider.java:142)\r\n\tat com.riadalabs.jira.plugins.insight.services.imports.common.importjobprovider.DataHolderFetcherJobProvider$DataHolderFetcher.fetchDataHolder(DataHolderFetcherJobProvider.java:106)\r\n\tat com.riadalabs.jira.plugins.insight.services.imports.common.importjobprovider.DataHolderFetcherJobProvider$DataHolderFetcher.executeTask(DataHolderFetcherJobProvider.java:94)\r\n\tat com.riadalabs.jira.plugins.insight.services.imports.common.importjobprovider.DataHolderFetcherJobProvider$DataHolderFetcher.executeTask(DataHolderFetcherJobProvider.java:78)\r\n\tat com.riadalabs.jira.plugins.insight.services.core.multithreadservice.InsightServiceJob.call(InsightServiceJob.java:41)\r\n\tat com.atlassian.sal.core.executor.ThreadLocalDelegateCallable.call(ThreadLocalDelegateCallable.java:38)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-02-15T14:11:39.000+0000","comments":[{"text":"This is still broken in 1.9.1 - is there a planned release this will be resolved? If not, can I update the .cfg myself?","author":"Jacob Haskamp"},{"text":"Agreed. This still does not work in 1.9.1.","author":"Rob"},{"text":"Appears to still be broken in 1.9.2","author":"Jacob Haskamp"}]},{"summary":"Order of attributes in a select field with multiple values is not respected","key":"JSDSERVER-14411","url":"https://jira.atlassian.com/browse/JSDSERVER-14411","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe order of the values in an attribute with a multi-select field is not respected.\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Create an attribute with value type *Select* and configure it to have unlimited cardinality.\r\n # Add at least three values to the configuration.\r\n # Create an object and add a few values to this attribute.\r\n\r\nh3. Expected Results\r\n\r\nThe order the values were added in should be reflected in the object view.\r\nh3. Actual Results\r\n\r\nThe order is random.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2023-09-21T11:40:03.000+0000","comments":[{"text":"Could you explain what's the order is? I've tried many times, it's just quite weird. It isn't the order in the DB, nor the alphabet order.","author":"Jacky Zhou"}]},{"summary":"Disabling Assets Plugin in server will disabling and enabling other plugins, and cause unavailable for a while","key":"JSDSERVER-12359","url":"https://jira.atlassian.com/browse/JSDSERVER-12359","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCurrently, JSM DC does not allow disabling Assets Plugin via UI, while JSM server allows. Assets can be disabled in DC with the API instead.\r\n\r\nHowever, when disabling Assets Plugin in server will disable and enable other plugins.  JSM will  get unavailable for a while.\r\n\r\nThis is reproducible on Data Center: *yes*\r\n\r\nh3. Steps to Reproduce\r\n # Have an environment of JSM 5.4.1\r\n # Move to Manage apps\r\n # Search Assets Plugin, and disable it\r\n # Wait, it will take while to finish\r\n # Move to Audit log\r\n\r\n\r\n\r\n\r\nh3. Expected Results\r\nOnly  Assets Plugin shows disabled.\r\n\r\nh3. Actual Results\r\nOther than Assets Plugin, lots of other plugins  seems disabled and then enabled.\r\n !plugins_disable_enalbe.png|thumbnail! \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-02-02T06:58:17.000+0000","comments":[]},{"summary":"Permission Error on Import Configuration","key":"JSDSERVER-12333","url":"https://jira.atlassian.com/browse/JSDSERVER-12333","type":"Bug","priority":"","description":"This bug seems a regression of https://jira.atlassian.com/browse/JSDSERVER-11292. In this case, the error is shown on import configuration but the import goes successful after the error message. The error gets fixed by adding user is to {{Insight Administrator}} role. Please find the screen shot attached. \r\n\r\nThis is reproducible on Data Center: Not always\r\nh3. Steps to Reproduce\r\n # Configure new CSV import for an object schema.\r\n # Create new user in Jira and grant the user with Insight Manager role for the object schema.\r\n # Login to Jira with the newly created user and perform a manual CSV import.\r\n\r\nh3. Expected Results\r\n\r\nCSV data imported into the object schema without issues as Insight Managers should have the permissions to *Create/Configure/Enable imports* as per the [Configuring roles and permissions|https://confluence.atlassian.com/servicemanagementserver0420/configuring-roles-and-permissions-1095772135.html] page.\r\nh3. Actual Results\r\n\r\nThe permission error popped up with the error message:\r\n{noformat}\r\nSorry, you do not have permission to perform this action.. PermissionInsightException: User <user_key> didn't have correct permission (admin)\r\n{noformat}\r\nh3. Workaround\r\n\r\nEither of the workarounds below should work:\r\n # Configure the import to sync on schedule automatically. It'll work even if the user with the Insight Manager role is used as the synchronizing account.\r\n # Grant Insight Administrator role to the user following the steps in the *Granting global permissions* section of the [Configuring roles and permissions|https://confluence.atlassian.com/servicemanagementserver0420/configuring-roles-and-permissions-1095772135.html] page to allow manual sync.\r\n # Use a [REST API|https://confluence.atlassian.com/jirakb/how-to-import-assets-object-schema-using-rest-api-1346245666.html] to start the import, authenticated by the User (Schema Manager)\r\n\r\n","createDate":"2023-01-23T01:49:54.000+0000","comments":[{"text":"I have the same problem when I want export objects. Only admin  can do this :( JSM 4.20.16 Insight 9.1.13. The the error is shown on export objets from table by role Inisght Users/Developers/Managers ","author":"Arkadiusz Baka"},{"text":"Received below error when users in Insight Manger/Developer role try to export objects:\r\n\r\nSorry, you do not have permission to perform this action.. PermissionInsightException: User JIRAUSER[] didn't have correct permission (admin).\r\n\r\nJira Data Center version: 4.20.16\r\n\r\nInsight version: 9.1.13","author":"Yuki Kang"},{"text":"A short estimation of the suggested workarounds:\r\n * ad 1: Scheduling is not possible since the \"schedule\" step would be _after_ the erroneous \"test configuration\" step. :(\r\n * ad 2: For security reasons, we cannot / are not allowed to grant global asset permissions to all users that want to import assets since they could harm asset configurations in any other object scheme.\r\n * ad 3: Since the asset functionality is intended for \"normal\" project admin users (no Jira specialists or Developers) workaround 3 (write an import script that consumes the asset API) would be far too technical in most cases. And one would be faced with such aspects like how to deal with existing assets that are not contained in the import file etc. - this functionality is already contained in the importer wizard which is intended to avoid such programming efforts. \r\n\r\nSo basically none of these workarounds is viable.\r\n\r\nTaking into account that the original bug https://jira.atlassian.com/browse/JSDSERVER-11292 has priority 'Highest' - why has this Bug only Priority 'Low'? Keep in mind that the ability to import assets is a key functionality and a key reason to use assets in Jira!","author":"Thomas Dupre"}]},{"summary":"Object Schema managers who are not Insight/Jira Admin will see a Permission Error when executing an import manually","key":"JSDSERVER-11292","url":"https://jira.atlassian.com/browse/JSDSERVER-11292","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nObject Schema managers who are not Insight/Jira Admin will see a Permission Error when executing an import manually.\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Configure new CSV import for an object schema.\r\n # Create new user in Jira and grant the user with Insight Manager role for the object schema.\r\n # Login to Jira with the newly created user and perform a manual CSV import.\r\n\r\nh3. Expected Results\r\n\r\nCSV data imported into the object schema without issues as Insight Managers should have the permissions to *Create/Configure/Enable imports* as per the [Configuring roles and permissions|https://confluence.atlassian.com/servicemanagementserver0420/configuring-roles-and-permissions-1095772135.html] page.\r\nh3. Actual Results\r\n\r\nThe permission error popped up with the error message:\r\n{noformat}\r\nSorry, you do not have permission to perform this action.. PermissionInsightException: User <user_key> didn't have correct permission (admin)\r\n{noformat}\r\nh3. Workaround\r\n\r\nEither of the workarounds below should work:\r\n # Configure the import to sync on schedule automatically. It'll work even if the user with the Insight Manager role is used as the synchronizing account.\r\n # Grant Insight Administrator role to the user following the steps in the *Granting global permissions* section of the [Configuring roles and permissions|https://confluence.atlassian.com/servicemanagementserver0420/configuring-roles-and-permissions-1095772135.html] page to allow manual sync.\r\n # Use a [REST API|https://insight-javadoc.riada.io/insight-javadoc-8.6/insight-rest/#import] to start the import, authenticated by the User (Schema Manager)","createDate":"2022-04-20T06:18:33.000+0000","comments":[{"text":"\r\nWe met on 4.20.13, with insight 9.1.12\r\n","author":"Gonchik Tsymzhitov"},{"text":"I have the same problem when I want export objects. Only admin  can do this :( JSM 4.20.16 Insight 9.1.13","author":"Arkadiusz Baka"},{"text":"This is still affecting my team, running JSM 5.4.5 and Assets 10.4.5 ","author":"Harry Hopper"},{"text":"Still in version 10.12.1 - Object schema admin still gets error about permission when try to do CSV import.","author":"Petr Michna"},{"text":"Still issue persist. on 5.12.7 ","author":"Gonchik Tsymzhitov"},{"text":"Still affecting our team, we are on Assets 10.12.1 and JSM 5.12.2 ","author":"IHsuan Wu"}]},{"summary":"Object Schema managers who are not Jira Admin will see a Permission Error when configuring an import","key":"JSDSERVER-10813","url":"https://jira.atlassian.com/browse/JSDSERVER-10813","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEver since Insight 8.6.11 / 8.6.15, the LDAP and DB imports are only configurable for Schema Managers who are ALSO Jira Admins.\r\n The Permission Check seems to be triggered even on other Import Types, and generates a Permission Error, while the Import configuration can still be saved.\r\nh3. Steps to Reproduce\r\n # Create a New Object Schema and assign User X as the Schema manager. User X is NOT a Jira / Insight Admin.\r\n # Log in as User X, navigate to the Schema Configuration>Import\r\n # Configure a new CSV Import\r\n # After Uploading a CSV file, click Test Connection or Next.\r\n\r\nh3. Expected Results\r\n\r\nCSV Connection will be tested and / or the wizard will advance to the next screen\r\nh3. Actual Results\r\n\r\nAn Error Banner is showing, BUT - the connection is tested and or the wizard does advance to the next screen\r\n Sorry, you do not have permission to perform this action.. PermissionInsightException: User JIRAUSER10300 didn't have correct permission (manager).\r\n  \r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nNo need for a workaround, as the functionality is maintained.","createDate":"2021-10-19T21:15:28.000+0000","comments":[{"text":"Object Schema managers are not able to execute a csv import job.\r\nThe workaround we have just set is to give the Manager the role “Insight Administrator“ in the “General Configuration” section. But keep in mind this gives admin permission for every insight object schema.\r\n\r\nWhich is a bit dangerous in my mind.\r\nHopefully this bug will be fixed in upcoming version.","author":"Marco Göhl"},{"text":"[~80528ef2dc57] - please see also JSDSERVER-11292 - fixed in JSM 5.0","author":"Yinon Negev"},{"text":"This should also been fixed with  [Insight 8.10.2|https://jira.atlassian.com/issues/?jql=project+%3D+JSDSERVER+AND+fixVersion+%3D+%22Insight+8.10.2%22], I'm right?","author":"Marco Göhl"},{"text":"[~80528ef2dc57] - you are correct, JSDSERVER-11292 was fixed in JSM 5.0.0 / JSM LTS 4.20.12 / Insight (Markeplace app) 8.10.2","author":"Yinon Negev"}]},{"summary":"Under some conditions, the SLA is showing in incorrect state in tickets after its configuration has been updated","key":"JSDSERVER-6671","url":"https://jira.atlassian.com/browse/JSDSERVER-6671","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn some condition. the SLA is showing in incorrect state in tickets after its configuration has been updated\r\n\r\nFor example, it is showing as running while it should be paused, based on the pause condition.\r\n\r\nNote that this issue does not occur with any type of SLA configuration change, but only with configurations that involve:\r\n - \"Assignee: From Unassigned\" as the Start Condition\r\n - at least 2 \"entered status\" conditions as the Pause Condition\r\n\r\nh3. Steps to reproduce\r\n - Create a an SLA in a Service Desk project called \"Test SLA\", using the following settings:\r\n -- with \"Issue Created\" as the start condition\r\n -- with \"Status: Waiting for customer\", \"Status: Waiting for support\" as the pause condition\r\n -- any configuration for the stop condition\r\n !Step1.png|thumbnail!\r\n - Create a new ticket, assign it to any user and note that the \"Test SLA\" is paused. This is expected, since the SLA started when the issue got created, and got paused right after because it entered the status \"Waiting for support\"\r\n !Step2.png|thumbnail!\r\n - Modify the configuration of the \"Test SLA\" by replacing the start condition from \"Issue Created\" to \"Assignee: From Unassigned\":\r\n !Step3.png|thumbnail!\r\n - Go back to the issue, and note that now \"Test SLA\" is now running (after the SLA recalculation completed):\r\n !Step4.png|thumbnail!\r\n - Run the SLA reconstruction API call from [this KB article|https://confluence.atlassian.com/jirakb/missing-or-corrupted-sla-data-in-jira-service-desk-828790603.html] to force the SLA to be recalculated against the whole issue history, and notice that the SLA is still shown as running (the API call did not help):\r\n - Make any change to the ticket (for example, change the priority), and note that \"Test SLA\" is now paused. (!) Note that the SLA shows as 1h55min and not at 2h, meaning that the pause event was purely caused by the Priority change event and not by the \"Status: Waiting for support\" event:\r\n !Step5.png|thumbnail!\r\n\r\nh3. Expected results\r\n\r\nAfter the start condition of the SLA was updated, the SLA should have been recalculated for the ticket and show the correct SLA status, which should be \"Paused\", since the condition \"Status: Waiting for customer\" is one of the SLA pause conditions.\r\nh3. Actual results\r\n\r\nThe SLA shows as \"Running\", and can only be paused if any update is made to this issue, for example if the priority field is changed.\r\n In addition to this, the timing of the SLA gets incorrect after it's paused, as it's using the timing when the priority field was changed, rather than the timing of the actual condition that should have paused the issue (\"Status: Waiting for customer\").\r\nh3. Workaround\r\n\r\nNo workaround known so far.\r\n\r\nEven the SLA reconstruction API call from [this KB article|https://confluence.atlassian.com/jirakb/missing-or-corrupted-sla-data-in-jira-service-desk-828790603.html]  won't fix the SLA.","createDate":"2019-12-12T12:55:21.000+0000","comments":[]},{"summary":"Inconsistency with how Jira notifications are sent to users treated as Customers when they are mentioned in a ticket","key":"JSDSERVER-6269","url":"https://jira.atlassian.com/browse/JSDSERVER-6269","type":"Bug","priority":"","description":"h3. +Issue description+\r\n\r\nWhen a Jira user is added as participant of a Service Desk request, this user should be treated as a customer and therefore should not be able to receive any Jira Core notification (notifications configured in the Notification Scheme, and meant for agent users).\r\n\r\nThis behavior:\r\n- is described in the documentation [Managing service desk notifications|https://confluence.atlassian.com/servicedeskserver/managing-service-desk-notifications-939926348.html]\r\n- is addressed in the feature request [JSDSERVER-6248|https://jira.atlassian.com/browse/JSDSERVER-6248]\r\n\r\nThere are 2 scenarios where the notification mechanism is not consistent:\r\n- *Scenario 1:* if a user is a participant of a Service Desk request and mentioned in an internal comment, this user won't receive a JIRA Core notification from this comment (expected behavior)\r\n- *Scenario 2:* if a user is *both a participant and a watcher* of the ticket and mentioned in an internal comment, then this user will receive a Jira Core notification from this comment (unexpected behavior)\r\n\r\nThe inconsistency between these 2 scenarios does not seem to be intentional therefore is a bug.\r\n\r\nh3. +Expected behavior+\r\n\r\nWe would expected both scenarios to lead to the same result: in both cases, the user should not receive any notification from an internal comment, since this user should be treated as a customer.\r\n\r\nTherefore, the scenario 1 is correct (based on the design), but not the scenario 2.\r\n\r\n","createDate":"2019-03-11T12:33:17.000+0000","comments":[{"text":"there is also *Scenario 3*\r\n - *Scenario 3:* if a user is *a reporter* of the ticket and mentioned in a comment, then this user will receive a Jira Core notification from this comment (unexpected behavior).","author":"Krystian Tabak"},{"text":"Hello,\r\n\r\nI met an issue that when I (an agent) mentioned @ the customer in a comment, the customer receive two notification:\r\n # notification from Service Desk portal that I have commented >>> this is expected\r\n # notification from Jira that I mentioned them even though they do not have any Jira account (just Service Desk account) >>> this is not expected as they should not receive this notification\r\n\r\nI think the issue is similiar as above and should be addressed soon.","author":"Riley Le"},{"text":"Hello Team,\r\n\r\nI've found that this \"bug\" has been \"fixed\" in JSM 5.17.0.\r\n\r\nThis is a huge problem for us, because we were actively building on this possibility. We have more than 100 workflows and it is impossible to completly separate flows where our colleagues are acting as agents and customers are present or not. It is a common case that our colleagues are reporting tickets and until a certain status the workflow is moving in a \"closed\" environment and at some point we have to invite one or more customers. After that point our agents have to be able to communicate with the help of private comments, but due to the intended behaviour our reporter colleagues are not receiving notifications about comments/changes. It is crucial to get notifications in time because of our SLA-s.\r\n\r\nWorkarounds such as using customer-level users for reporting issues instead of our agent users are not applicable due to the fact that we have thousands of filters and hundreds of dashboards, rewriting/duplicating that amount of JQL-s is impossible.\r\n\r\nIt is also impossible to rewrite all our processes - we have more than 100 workflows as mentioned before - they have been designed to serve the needs of the company.\r\n\r\nPlease consider adding the possibility to switch between the two behaviours, or at least provide a workaround to be able to return to the way Jira worked and the way that has been deemed faulty.\r\n\r\nThanks,\r\nGyula","author":"Gyula Puzder"}]},{"summary":"Share as comment button is shown only while mouseover","key":"JSDSERVER-5481","url":"https://jira.atlassian.com/browse/JSDSERVER-5481","type":"Bug","priority":"","description":"h3. Summary\r\n\r\n\"Share as comment\" button is shown only while mouseover.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Create an application link between JIRA Service Desk and Confluence\r\n# Create a service desk project\r\n# Create an issue on the project\r\n# Create a KB from the issue\r\n# Mousehover around the link to the KB in the issue\r\n !kb.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\n\"Share as comment\" should be always shown on the issue.\r\nOtherwise, any other UI which users can get to know how to share it is welcome.\r\n\r\nh3. Actual Results\r\n\r\nThe button was shown only while mouseover.\r\n\r\nh3.Workaround\r\n\r\nNo workaround.","createDate":"2017-11-08T09:20:20.000+0000","comments":[]},{"summary":"Outdated Documentation - Default service desk project configuration ","key":"JSDSERVER-4674","url":"https://jira.atlassian.com/browse/JSDSERVER-4674","type":"Bug","priority":"","description":"h3. Problem\r\nThe Default service desk project configuration documentation is outdated. \r\nhttps://confluence.atlassian.com/display/SERVICEDESKSERVER033/Default+service+desk+project+configuration\r\n\r\nThe title may also need to be changed to \"Default JIRA Service Desk project configuration\" \r\n\r\nh3. Details of problem\r\n\r\nh5. Database tables: \r\n\r\nThe article includes database tables and this list is incomplete. Example missing would be AO_C7F17E_LINGO added in 3.3. Approvals are another example of missing tables. \r\n* The other content on the page appears to be things that are unlikely to change between versions. The database tables do change as new features are released.\r\n\r\nh5. Custom Fields\r\n\r\nThe list of custom fields is outdated.\r\n* Other fields are included with JSD install, for example \"Request Participants\"\r\n* Creation of JSD projects results in the creation of additional custom fields. For example creating IT Service Desk project will create 17 custom fields if they do not already exist. Example field \"Product Categorization\"\r\n\r\nh3. Suggested Solution\r\nIt is great to have the list of database tables that are related to JSD. In addition the custom fields need to be updated. \r\n\r\nIf it will be difficult to keep this updated I suggest moving this to be a KB article so that support can assist with maintaining this. A link to the KB article could be placed on the documentation page.\r\n\r\n\r\n ","createDate":"2017-01-19T01:24:23.000+0000","comments":[{"text":"It would also be nice if text were added to ALL custom fields created by Service Desk.  As it is now, we can look at the list of custom fields and only some of them have text indicating that they were created by Service Desk but others do not.  It would be allot easier to just look at the custom fields on our instance to know which are SD and which have been created in house without having to search for the proper documentation link that may or may not be up to date.","author":"Alicia Pena"},{"text":"{panel:title=Atlassian Update - 03 March 2025|borderStyle=solid|borderColor=#6554c0|titleBGColor=#6554c0|bgColor=#eae6ff|titleColor=#ffffff}\r\n\r\nHi,\r\n\r\nAt Atlassian, our goal is to ensure we’re providing the best experience for our customers. With our new Data Center strategy, Atlassian's focus is on security, compliance, and performance and is a key driver in prioritizing bugs. Closing the bugs that do not fall into those categories will allow us to focus on the ones in the most current versions of our products.\r\n\r\nThis bug is being closed due to a lack of engagement in the last four years, including no new watchers, votes, or comments; this inactivity suggests a low impact.\r\n\r\nWe appreciate your time in submitting bugs to our product team and encourage you to continue doing so. Many features and functions in our products come from valued customers such as yourself. You can read more about [our bug fix policy here|https://confluence.atlassian.com/support/atlassian-data-center-bug-fix-policy-201294573.html] and how we prioritize bugs.\r\n\r\nTo learn more about our recent investments in Jira Service Management Data Center, please check [our public roadmap|https://www.atlassian.com/roadmap/data-center?product=jiraService&] and dashboards containing [recently resolved issues|https://jira.atlassian.com/secure/Dashboard.jspa?selectPageId=89395], [current work, and future plans|https://jira.atlassian.com/secure/Dashboard.jspa?selectPageId=94991].\r\n\r\nKind regards,\r\nJira Service Management Data Center\r\n\r\n{panel}","author":"Ishwinder Kaur"}]},{"summary":"\"Not Permitted\" when trying to \"Create KB Article\" from an issue","key":"JSDSERVER-3406","url":"https://jira.atlassian.com/browse/JSDSERVER-3406","type":"Bug","priority":"","description":"h3. Summary:\r\nAfter clicking the \"Create KB Article\" button, if a user did not used the \"Execute As\" user credentials that is being set up on Confluence side, user will get \"Not Permitted\" page instead.\r\n\r\nh3. Steps to Reproduce:\r\n# Create a Confluence Space and a user that is allowed to view and create page in the Space\r\n# Configure the Application link as mentioned in [Serving Customers with a knowledge base|https://confluence.atlassian.com/display/SERVICEDESKSERVER030/Serving+customers+with+a+knowledge+base#Servingcustomerswithaknowledgebase-IntegratingwithConfluence]\r\n# Use the \"Execute As\" configuration instead on Confluence Oauth Incoming Authentication instead of the Impersonation and use the previous created user.\r\n# Log out from Confluence and linked the previously created Confluence Space on a service desk project.\r\n# Then, open an existing issue on the project and click \"Create KB Article\"\r\n# Log in as an admin of the Confluence instead of the \"Execute As\" user.\r\n\r\nh3. Expected Results:\r\n* The user will have the draft page with the details about the issue to be created as a KB page.\r\n\r\nh3. Actual Results:\r\n* There will be a \"Not Permitted\" page shown.","createDate":"2016-02-11T15:23:57.000+0000","comments":[{"text":"This issue was detected by us; is there at least some workaround?\r\nI'd like to add that it's not necessary to be logged out to get \"Not Permitted\". If a user is logged in with his own account in Confluence prior to clicking \"create KB article\", the same problem occurs.","author":"LEGIC IT ServiceDesk"},{"text":"Hi [~jrahmadiputra] and [~roland.kisseleff],\r\n\r\nI can't seem to reproduce this issue with the steps provided. It sounds like the admin user doesn't have permissions to create a page in Confluence. Do you have more information regarding the permissions set up for your Confluence instance?\r\n\r\nThanks,\r\nAndrea","author":"Andrea"},{"text":"Hi Andrea Olrich\r\nThe main point is that application links using the \"execute as\" functionality should *always* call the linked application as the specified user. \r\nIn reality, the specified user is *never* used. These different use-cases illustrate this. As a prerequisite, let's assume we have a KB space in Confluence which is not open for anonymous access, and a user Ca in confluence which has no rights for the KB space. User Cb has rights, as does user Cc. The application link from ServiceDesk to Confluence is setup using user Cb. The same user Cb is also created in ServiceDesk directly. Note that the user directories of ServiceDesk and Confluence are separated. Now for the use-cases (always user Cb logged in ServiceDesk):\r\na) User not logged in Confluence --> asked for login (expected: use credentials of application link)\r\nb) User logged in Confluence with user Ca --> not permitted (expected: use credentials of application link)\r\nc) User logged in Confluence with user Cc --> works, but article is created under user Cc (seems ok, Cb would have been more consistent IMO)\r\nEspecially use-case a) is disappointing - creating the same user/password in both ServiceDesk and Confluence has no effect, at least in this case the same user should have been used implicitly (apparently, this works in the cloud version).\r\nI don't remember the link, but Atlassian documentation said this should work; Julian Rahmadiputra then confirmed that it works on the cloud version, but not on the standalone (which we use).\r\nSearching just now, I hit this article: https://confluence.atlassian.com/jirakb/guide-to-link-knowledge-base-to-jira-service-desk-for-unlicensed-user-816677228.html which contains interesting hints like \"Service desk requires impersonation\" and \"impersonation only works for shared user databases\". \r\nNot sure if in the mean time there's a way to allow using a knowledge base without making it fully public. It's certainly frustrating not to have a solution for a seamless KB feature in ServiceDesk.","author":"LEGIC IT ServiceDesk"},{"text":"Hello,   Let me clarify that this issue is occurring with our JIRA instance of ServiceDesk that is a SERVER (on Prem) instance and our CONFLUENCE instance is a CLOUD hosted instance.\r\n\r\nWhen i:\r\n !stepAandB.png!\r\na) click \"Create KB article\" and\r\nb) click \"Create\" \r\nI get the in line error message:\r\n !errorMsg.png!\r\n\"There was a problem contacting the application.\"\r\nThe authentication we use for these two instances is different.\r\nFor on-preim (Jira) we are using our Windows SunriseCorp AD domain accounts in the Sunriseid.com domain, for the cloud (Confluence) we are using a Matching username (bob.stahr@sunriseid.com) but the password and account is in the a atlassian.net domain.\r\n\r\nI hope this clarifies the set up.\r\n","author":"Help Desk"},{"text":"Hi [~helpdesk2],\r\n\r\nThank you for the detailed response. I can now see that the issue here is that there has been a misunderstanding on how the \"Execute As\" user works. Configuring a user and specifying them as the \"Execute As\" user in your Two-legged OAuth setup means that this user will be used to execute all *search* requests via by the application link from JIRA Service Desk to Confluence.\r\n\r\nThis user and the application link is not used for creating an article (or any other action between JIRA Service Desk and Confluence). As shown in the document linked, viewing an article also requires the user to have their own credentials in Confluence.\r\n\r\nThe intended purpose of the Execute As feature is to allow customers to search the Knowledge Base through the portal when there is not a shared user base (i.e. when a user has both Confluence and JIRA Service Desk accounts, but the credentials are different).\r\n\r\nThis guide might provide some more information: https://confluence.atlassian.com/servicedeskserver030/serving-customers-with-a-knowledge-base-761768892.html, in particular under \"How to choose the user that you want searches to be performed as\". \r\n\r\nOn a different note, the problem you are experiencing with being unable to create an article with your setup is most likely due to not having impersonation and a shared user base. There is a ticket already describing this problem and I recommend that you watch it for updates: https://jira.atlassian.com/browse/JSD-4071\r\n\r\nI hope this is helpful in at least clarifying the problem. If you have any further questions please ask.\r\n\r\nThanks,\r\nAndrea","author":"Andrea"},{"text":"Hi Andrea\r\nCorrect, most explanation I saw assumed a shared user database, which we do not have and cannot have for various reasons. Creating users with the same name on both instances didn't help either, so we're stuck with not really a working, user-friendly way of using the knowledge base feature for both supporters and customers.","author":"LEGIC IT ServiceDesk"},{"text":"The problem is still relevant, please take in work","author":"Сергей Смирнов"},{"text":"I am getting the exact same issue - it is not possible to create a kb article in the confluence space assigned to a service desk project.","author":"Jan-Niklas Staffa"}]},{"summary":"Auto-search on request forms is not displaying Request Types after refresh","key":"JSDSERVER-3332","url":"https://jira.atlassian.com/browse/JSDSERVER-3332","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Server*. Using *JIRA Service Desk Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDCLOUD-3332].\n  {panel}\n\nh3.Summary\r\n\r\nAuto-search on request forms is not displaying Request Types after reloading the page or after clicking on the _Workflow_ tab.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Navigate to {{https://<instance URL>/servicedesk/admin/<project key>/confluence-kb}}\r\n# Link it to Confluence Space\r\n# Select any Space -> Link\r\n# If the _Request Types_ are shown, refresh the page OR\r\n# Go to _Workflow_ Tab -> navigate back to _Knowledge Base_\r\n\r\nh3.Expected Result\r\n\r\n_Request Types_ are displayed\r\n\r\nh3.Actual Result\r\n\r\n_Request Types_ are not shown\r\n\r\nh3.Workaround\r\n\r\nNavigate to _Request Types_ tab and go back to _Knowledge Base_ tab.\r\n\r\nh3.Error\r\n\r\nFound below error message in the Network Console.\r\n{noformat}\r\nUncaught TypeError: Cannot read property 'requiredBooleanSelectRead' of undefined\r\n\r\ncom.atlassian.servicedesk:boolean-cell.js?locale=en-US:\r\ni.CustomCreateView.extend.render\t@\tcom.atlassian.servicedesk:boolean-cell.js?locale=en-US:3\r\n(anonymous function)\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:24\r\nj.extend.each\t@\tbatch.js?atlassian.aui.raphael.disabled=true&locale=en-US:35\r\nAJS.RestfulTable.Row.s.View.extend.render\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:24\r\nAJS.RestfulTable.i.View.extend._renderRow\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:12\r\n(anonymous function)\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:12\r\nb.map.b.collect\t@\tbatch.js?agile_global_admin_condition=true&hasConnectAddons=true&jag=true&jaguser=true&jcap=true&jp…:28\r\nAJS.RestfulTable.i.View.extend.renderRows\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:12\r\nAJS.RestfulTable.i.View.extend.populate\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:12\r\n(anonymous function)\t@\tcom.atlassian.servicedesk:restful-table.js?locale=en-US:12\r\nj\t@\tbatch.js?atlassian.aui.raphael.disabled=true&locale=en-US:41\r\nn.fireWith\t@\tbatch.js?atlassian.aui.raphael.disabled=true&locale=en-US:42\r\nd\t@\tbatch.js?atlassian.aui.raphael.disabled=true&locale=en-US:167\r\nb\t@\tbatch.js?atlassian.aui.raphael.disabled=true&locale=en-US:179\r\n{noformat}","createDate":"2016-01-26T12:35:01.000+0000","comments":[{"text":"The workaround does not work. \r\nIs it really Minor that all of your customers can't configurate displaing KB articles to the users?","author":"Гриша Дементьев"},{"text":"That's can be closed, as it works on latest LTS version 5.4","author":"Gonchik Tsymzhitov"},{"text":"{panel:title=Atlassian Update - 03 March 2025|borderStyle=solid|borderColor=#6554c0|titleBGColor=#6554c0|bgColor=#eae6ff|titleColor=#ffffff}\r\n\r\nHi,\r\n\r\nAt Atlassian, our goal is to ensure we’re providing the best experience for our customers. With our new Data Center strategy, Atlassian's focus is on security, compliance, and performance and is a key driver in prioritizing bugs. Closing the bugs that do not fall into those categories will allow us to focus on the ones in the most current versions of our products.\r\n\r\nThis bug is being closed due to a lack of engagement in the last four years, including no new watchers, votes, or comments; this inactivity suggests a low impact.\r\n\r\nWe appreciate your time in submitting bugs to our product team and encourage you to continue doing so. Many features and functions in our products come from valued customers such as yourself. You can read more about [our bug fix policy here|https://confluence.atlassian.com/support/atlassian-data-center-bug-fix-policy-201294573.html] and how we prioritize bugs.\r\n\r\nTo learn more about our recent investments in Jira Service Management Data Center, please check [our public roadmap|https://www.atlassian.com/roadmap/data-center?product=jiraService&] and dashboards containing [recently resolved issues|https://jira.atlassian.com/secure/Dashboard.jspa?selectPageId=89395], [current work, and future plans|https://jira.atlassian.com/secure/Dashboard.jspa?selectPageId=94991].\r\n\r\nKind regards,\r\nJira Service Management Data Center\r\n\r\n{panel}","author":"Ishwinder Kaur"}]},{"summary":"Able to add attachments under Alerts in JSM-O Standard Plan","key":"JSDCLOUD-16328","url":"https://jira.atlassian.com/browse/JSDCLOUD-16328","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustomers were able to add attachments under Alerts with JSM Standard Plan(Subordinate Opsgenie), but after the migration, they were asked to upgrade to add attachments.\r\nh3. Steps to Reproduce\r\n\r\nAble to add attachments under Alerts for JSM-bundled Opsgenie\r\n!image-2025-04-02-12-58-06-072.png|width=444,height=148!\r\nUnable to add attachments in the JSM-O standard plan\r\nh3. Expected Results\r\n\r\nAble to add attachments in JSM-O standard plan as well\r\nh3. Actual Results\r\n\r\nUnable to add attachments in the JSM-O standard plan\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-02T07:28:47.000+0000","comments":[]},{"summary":"JSM operations team level Notification Policy is not closing alerts after desired duration","key":"JSDCLOUD-16325","url":"https://jira.atlassian.com/browse/JSDCLOUD-16325","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn JSM operation, team level, a user can be configured when an alert could be automatically after desired duration.\r\nh3. Steps to Reproduce\r\n # Go to [https://yoursite.atlassian.net/jira/ops/teams//policies]\r\n # click on Notification policies\r\n # Select Close on the next window\r\n # Add when to close the alert and save\r\n\r\n!image-2025-04-01-16-25-29-629.png|thumbnail!\r\nh3. Expected Results\r\n\r\nThe alert should be closed when the specified period elapses.\r\nh3. Actual Results\r\n\r\nThe alert is not being closed after the desired period.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-01T20:27:10.000+0000","comments":[]},{"summary":"Global custom fields does not show for team-managed projects using API ","key":"JSDCLOUD-16324","url":"https://jira.atlassian.com/browse/JSDCLOUD-16324","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPreviously we had this bug that was recently fixed by our Engineering team:\r\n * JSDCLOUD-15831 - Team-managed project custom field linked to Form field does not show on REST API view and automation.\r\n\r\nThe workaround suggested on that bug says that:\r\n{quote} Workaround\r\n * Replace the team-managed custom field by a global custom field.\r\n * In automation rules, use [forms smart values|https://support.atlassian.com/jira-service-management-cloud/docs/access-smart-values-for-forms-and-form-fields/] to retrieve the field value.\r\n * Add the Custom Field in Request Form and save it. Then Remove the Custom field from From Request Form and Save.{quote}\r\nNow, we can't use the [API|https://support.atlassian.com/cloud-automation/docs/find-the-smart-value-for-a-field/] to find global fields in team-managed issues, as no results will be returned.\r\nh3. Steps to Reproduce\r\n # Create a custom field and make sure that it has a global context (all issues);\r\n # Associate it with all screens/projects;\r\n # Create a Form on a TMP and link the Form field with this custom field we've just created;\r\n # Select any issue from a team-managed project and search for this new field using the [API|https://support.atlassian.com/cloud-automation/docs/find-the-smart-value-for-a-field/] ;\r\n\r\nh3. Expected Results\r\n\r\nAccording to the workaround suggested in the previous bug, we should be able to find this custom field within a team-managed ticket.\r\nh3. Actual Results\r\n\r\nThe field can't be found in team-managed project issues using the following endpoint:\r\n{noformat}\r\nhttps://yoursite.atlassian.net/rest/api/3/issue/ISSUEKEY?expand=names{noformat}\r\nPS: It doesn't matter if we link the custom field with a Form field, the field won't be displayed on the API response.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-04-01T16:52:19.000+0000","comments":[]},{"summary":"Request participants in 'CC' don't get the Request created customer notification in email requests with attachments or that are forwarded","key":"JSDCLOUD-16320","url":"https://jira.atlassian.com/browse/JSDCLOUD-16320","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen raising a request via email it's expected that the Request participants in 'CC' will receive the Request created customer notification, if they are a part of the original message. \r\n\r\nThis is not happening in cases where there are attachment included, and in some scenarios were the message is being forwarded. \r\n\r\nh3. Steps to Reproduce\r\n # Make sure you have the Request created customer notification enabled\r\n # Send an email with attachment and users in CC to JSM mail handler\r\n \r\n Or\r\n\r\n # Make sure you have the Request created customer notification enabled\r\n # Send a message from email1 to email2\r\n # As email2, forward the message to JSM mail handler having email1 as CC\r\n ** This second set of steps only replicate the inconsistency in some sites not all. If they include an attachment, then it should replicate in all sites.\r\n \r\nh3. Expected Results\r\n\r\nThe users in CC should be added in as Request participants and receive the Request created and Participant added customer notifications.\r\n\r\nh3. Actual Results\r\n\r\nThe users are added in CC, but only receive the Participant added customer notifications. The Request created is not received.\r\n\r\nh3. Workaround\r\n\r\nCreate an automation that will act based on issue created, check if the requests are created via email (with the JQL 'request-channel-type = email') and Send email to the Request participants.","createDate":"2025-04-01T13:02:47.000+0000","comments":[]},{"summary":"Url in Send Message step in VSA does not work with variable","key":"JSDCLOUD-16315","url":"https://jira.atlassian.com/browse/JSDCLOUD-16315","type":"Bug","priority":"","description":"From investigation of https://getsupport.atlassian.com/browse/CES-73199\r\n\r\nh3. Issue Summary\r\nWhen using variable in a url sent by Send Message step in VSA, the rendered url is conversation is invalid.\r\n\r\nh3. Steps to Reproduce\r\n* In an intent flow, add a Send Message step.\r\n* Add a URL with a variable (could be from web request, ask information, or even the built-in ones `{{reporter.accountId}}`), .e.g. https://www.google.com/{{reporter.accountId}}\r\n* test the conversation and check the url is invalid.\r\n\r\n\r\nh3. Expected Results\r\n\r\ntest the conversation and check the url is valid.\r\nhttps://www.google.com/620d35bfe41f76006a6e0045 <--- the id will vary\r\n\r\nh3. Actual Results\r\nthe invalid link https://www.google.com/%7B%7Breporter.accountId%7D%7D\r\n\r\nh3. Workaround\r\n\r\nNot exactly a workaround, but to simply render the url as plain text (use \"unlink\" tool)\r\n","createDate":"2025-04-01T03:56:10.000+0000","comments":[]},{"summary":"Incorrect sentiment is being set for negative comments by customers","key":"JSDCLOUD-16314","url":"https://jira.atlassian.com/browse/JSDCLOUD-16314","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen some negative comments are added to the JSM requests by customers, the Sentiment field does not identify them as negative. This results in the sentiment field to be moved to neutral and not negative. This represents an incorrect customer sentiment on these JSM requests.\r\n\r\nh3. Steps to Reproduce\r\n # Create a JSM ticket and send the following comments from customer portal while reviewing the change in {color:#0747a6}*Sentiment*{color} field.\r\n\r\n * \r\n{noformat}\r\nYou're out of my league. Can you put someone more sensible in charge of this request?\r\nHow long do you want me to keep you waiting?{noformat}\r\n\r\n * \r\n{noformat}\r\nThis is realy bad{noformat}\r\n\r\n * \r\n{noformat}\r\nYou are awesome. Thank you!{noformat}\r\n\r\n * \r\n{noformat}\r\nYou are not getting anywhere. Would you please put someone who can talk to me in charge of this request?{noformat}\r\n\r\n * \r\n{noformat}\r\nYour support is useless{noformat}\r\n  !Test_the_sentiment_AI_JSM_1.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\nThe negative comments should be identified appropriately and the sentiment should move to negative instead of neutral\r\nh3. Actual Results\r\n\r\nThe sentiment is moved to neutral\r\nh3. Notes\r\n\r\nNA\r\nh3. Workaround\r\n\r\nNA","createDate":"2025-03-31T22:50:14.000+0000","comments":[]},{"summary":"Presence of duplicate Services object schemas","key":"JSDCLOUD-16308","url":"https://jira.atlassian.com/browse/JSDCLOUD-16308","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nWhile it is expected to have only 1 Services object schema in an Assets workspace, we often see more than one, causing a case of duplication.\r\nh3. Steps to Reproduce\r\n\r\nNo clear replication steps because it is difficult to understand the cause. While there can be *many different* causes, one can be when a customer signs up to a FREE site and very quickly upgrades to PREMIUM. Exact cause is unknown and hence there can be more situations leading to this bug behaviour.\r\nh3. Expected Results\r\n\r\nThe presence of only 1 Services schema\r\nh3. Actual Results\r\n\r\nThe presence of more than 1 Services schema\r\nh3. Workaround\r\n\r\nContact Atlassian Support","createDate":"2025-03-31T07:56:29.000+0000","comments":[]},{"summary":"Handling Event Syncing on JSM Chat and Work Items Causes Intermittent Delays","key":"JSDCLOUD-16307","url":"https://jira.atlassian.com/browse/JSDCLOUD-16307","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe're experiencing intermittent delays in syncing events between JSM Chat tickets and JSM work items, particularly during usage spikes. This affects various event types, including ticket creation, work item updates like transitions, and comments. The delays seem tied to queue usage spikes, resulting in slower propagation of updates to Slack or JSM depending on the origination of the event. This issue impacts timely communication and workflow efficiency between JSM and Slack integrations.\r\nh3. Steps to Reproduce\r\n\r\nN/A (Delays are intermittent depending on queue usage spikes)\r\nh3. Expected Results\r\n\r\nWork item events are synced in a reasonable timeframe (ideally occurring within a few seconds rather than stretching into many minutes)\r\nh3. Actual Results\r\n\r\nWork item events take anywhere from 5-10 minutes to sync\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T19:57:19.000+0000","comments":[]},{"summary":"Linked Alerts always on Hide When Empty section","key":"JSDCLOUD-16305","url":"https://jira.atlassian.com/browse/JSDCLOUD-16305","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe Linked Alerts field is always displayed in the More Fields (Hide When Empty) section of the issue view, even when it contains values.\r\n\r\nh3. Steps to Reproduce\r\n # Create an ITSM JSM project\r\n # Edit a request type that belongs to the Incident category\r\n # Add the Linked Alerts field to the section Hide When Empty\r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Expected Results\r\nThe field is displayed in the More Fields section when it's empty.\r\nWhen values are added to the field, it's displayed in the Details section.\r\n\r\nh3. Actual Results\r\nThe field is always displayed in the More Fields section, regardless of its content.\r\n\r\n !screenshot-2.png|thumbnail! \r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-28T17:55:13.000+0000","comments":[]},{"summary":"Show X More not translating for Slovenčina (Slovak) in Help Center page","key":"JSDCLOUD-16304","url":"https://jira.atlassian.com/browse/JSDCLOUD-16304","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you switch the *Language* under *Account Preferences* of your [Personal Jira settings|https://support.atlassian.com/jira-software-cloud/docs/manage-your-jira-personal-settings/] to e.g. Spanish or German the the _Show X more_ buttons in the Help Center get translated to their equivalents in other languages. Unfortunately this is not the case for Slovenčina (Slovak).\r\nh3. Steps to Reproduce\r\n # Make sure that your Help Center has more than 4 Topics or Portals in order to make sure that the _Show X more_ button pops up on the Topics or Featured Portals tile.\r\n # Change your that the *Language* under *Account Preferences* of your [Personal Jira settings|https://support.atlassian.com/jira-software-cloud/docs/manage-your-jira-personal-settings/] is set to Slovenčina (Slovak).\r\n # Open your Help Center.\r\n\r\nh3. Expected Results\r\n\r\nThe _Show X more_ buttons should be translated to Slovenčina (Slovak) (like it happens for other languages like e.g. Spanish or German)\r\nh3. Actual Results\r\n\r\nThe _Show X more_ button remains in English and is not translated to Slovenčina (Slovak).\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T15:43:32.000+0000","comments":[]},{"summary":"SLA starts/breach if the SLA pause status is first in the workflow","key":"JSDCLOUD-16303","url":"https://jira.atlassian.com/browse/JSDCLOUD-16303","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nSLA starts running or is breached(depening on the elapsed time) if the SLA pause status is first in the workflow\r\nh3. Steps to Reproduce\r\n # Create a SLA with below conditions\r\n!image-2025-03-28-20-22-39-109.png|width=421,height=410!\r\n # Workflow has \"Waiting for support\" as the starting status\r\n!image-2025-03-28-20-23-27-799.png|width=387,height=218!\r\n # Here, if we perform a self loop on \"Waiting for support\", the SLA starts running when it must still be in a Pause state.\r\n\r\nThe problem does not occur for any other status in the workflow, it happens only when its the first status.\r\nh3. Expected Results\r\n\r\nSLA must be in Paused state.\r\nh3. Actual Results\r\n\r\nSLA starts running.\r\nh3. Workaround\r\n * Don't have the self transition on this status\r\n * or don't set the first status as the Pause condition\r\n * or add one more status before this in the workflow","createDate":"2025-03-28T14:57:14.000+0000","comments":[{"text":"Links to https://jira.atlassian.com/browse/JSDCLOUD-5171 gathering more information around the bug in https://atlassian.slack.com/archives/C05N5Q096NA/p1743063602743939","author":"Mikey Man"}]},{"summary":"Date-Time Format Mismatch in Atlassian Operations Terraform Provider","key":"JSDCLOUD-16292","url":"https://jira.atlassian.com/browse/JSDCLOUD-16292","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the Atlassian Operations Terraform Provider to provision a {{atlassian-operations_schedule_rotation}} with a {{start_date}} that includes a timezone offset, the operation fails due to a date-time data type format mismatch between the Terraform provider and the JSM Ops API endpoints.\r\nh3. Steps to Reproduce\r\n # Follow the documentation to set up the Atlassian Operations Terraform Provider: [Set up Atlassian Operations Terraform Provider|https://support.atlassian.com/jira-service-management-cloud/docs/set-up-atlassian-operations-terraform-provider/].\r\n\r\n # Attempt to provision a {{atlassian-operations_schedule_rotation}} resource with a {{start_date}} value that includes a timezone offset, e.g., {{{}2024-11-11T09:00:00+01:00{}}}.\r\n\r\n # Apply the Terraform configuration.\r\n\r\nh3. Expected Results\r\n\r\nThe {{atlassian-operations_schedule_rotation}} should be provisioned successfully with the specified {{start_date}} and timezone offset.\r\nh3. Actual Results\r\n\r\nThe operation fails, and the following error message is displayed:\r\n \r\n{noformat}\r\nError: Provider produced inconsistent result after applyWhen applying changes to\r\natlassian-operations_schedule_rotation.these[\"Weekly rotation\"], provider\r\n\"provider[\\\"registry.terraform.io/atlassian/atlassian-operations\\\"]\"\r\nproduced an unexpected new value: .start_date: was\r\ncty.StringVal(\"2024-11-11T09:00:00+01:00\"), but now\r\ncty.StringVal(\"2024-11-11T08:00:00Z\").This is a bug in the provider, which should be reported in the provider's\r\nown issue tracker.{noformat}\r\n*Impact:* This bug is blocking important operations, as users are unable to provision schedule rotations with timezone offsets.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T17:41:46.000+0000","comments":[{"text":"https://ifountain.atlassian.net/browse/HEIMDALL-12257","author":"İbrahim Aral Özkaya"}]},{"summary":"Customer unable to search themselves in user picker field.","key":"JSDCLOUD-16282","url":"https://jira.atlassian.com/browse/JSDCLOUD-16282","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the Customer access is restricted and the permission is set to \"Customers can search for other customers within their organizations, or manually enter the email address of other customers within their project\" customers are unable to find themselves on any user picker field.\r\nh3. Steps to Reproduce\r\n # Set the customer portal to restricted under customer permission on the project\r\n # Set the customer permission to \"Customers can search for other customers within their organisations, or manually enter the email address of other customers within their project\".\r\n # Go to portal with a customer only account and try to search your self for any user picker field.\r\n\r\nh3. Expected Results\r\n\r\nUser should be able to find their own account.\r\nh3. Actual Results\r\n\r\nUser is unable to find themselves on the user picker field\r\nh3. Workaround\r\n\r\nSet the customer permission to  \"Customers can search for other customers within their project or organizations\"\r\n ","createDate":"2025-03-26T09:28:39.000+0000","comments":[]},{"summary":"Failed to link alert","key":"JSDCLOUD-16279","url":"https://jira.atlassian.com/browse/JSDCLOUD-16279","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the component \"Create incident\" is executed in an automation rule, almost every execution is failing and throwing the error in the audit log:\r\n{noformat}\r\n \r\nSuccessfully created a new incident\r\nABC-12345\r\nFailed to link alert\r\n123123123-5d38-4824-ae92-12341231-12V123C\r\n{noformat}\r\nh3. Steps to Reproduce\r\n # Have a rule with the \"{color:#00875a}*Alert created*{color}\" trigger;\r\n # Have the component \"{color:#0747a6}*Create incident*{color}\" and mark the corresponding checkboxes:\r\n ** If an alert triggers the rule, link the alert with the incident\r\n ** Don't create a new incident if the action has already created an open incident of the same type in the project\r\n # Keep creating alerts until the error pops-up in the audit log\r\n\r\nh3. Expected Results\r\nThe alert to be linked to the just-created incident.\r\n\r\nh3. Actual Results\r\nThe rule fails and the alert is not linked to the incident.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-25T13:05:05.000+0000","comments":[{"text":"The fix for this bug has been deployed.","author":"Supraja Alleni"}]},{"summary":"Searching for incidents using the Link Incidents button from alerts doesn't return incident tickets with translated incident issue types","key":"JSDCLOUD-16275","url":"https://jira.atlassian.com/browse/JSDCLOUD-16275","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSearching for incidents using the Link Incidents button from alerts doesn't return incident tickets with translated incident issue types, such as '[システム] インシデント,' even though it is recognized as an Incidents work category.\r\nh3. Steps to Reproduce\r\n # Change the system language on a site to non-English one, such as Japanese\r\n # Create a new project with ITSM template\r\n # Ensure that an issue type '[システム] インシデント' is created under the Incidents work category\r\n # Create an alert\r\n # Create an incident request with the issue type '[システム] インシデント'\r\n # Search for incident using the Link Incidents button\r\n\r\nh3. Expected Results\r\n\r\nThe request created in the step 5 is returned and selectable.\r\nh3. Actual Results\r\n\r\nThe request created in the above step 5 isn't returned.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-25T07:22:28.000+0000","comments":[]},{"summary":"Create Project : Expand/collapse state of the button not defined","key":"JSDCLOUD-16274","url":"https://jira.atlassian.com/browse/JSDCLOUD-16274","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn the “JSM cloud | All projects”, The expand/collapse state of the “More info about channel access” button is not programmatically defined.\r\n\r\n\r\nh3. Steps to Reproduce\r\nNavigate onto the above mentioned page.\r\nNavigate to the “Projects” button and activate it.\r\nNavigate onto the “Create project button and activate it, Select “Jira service management” > “IT service management” > “Use template”.\r\nNavigate to the “Team type” input field and enter any character in it.\r\nUsing screen reader, navigate onto the mentioned button/instance and activate it.\r\nListen that the expand/collapse state of the button is not announced.\r\n\r\nh3.Screenshot\r\n !Create project.png|thumbnail! \r\n\r\nh3. Actual Results\r\nOn activating \"More info about channel access\" button, the content dynamically gets expanded and collapsed below. The dynamically updating button's state is not defined programmatically.\r\nAs a result, screen reader users are not able to understand the button's functionality.\r\n\r\n\r\nh3. Expected Results\r\nThe screen reader should announce expand/collapse state of the button for their users.\r\n\r\nSet 'aria-expanded' attribute to 'false' for the button by default as the button is in the collapsed state. Ensure that the value of 'aria-expanded' attribute changes to 'true' in expanded state on user interaction via scripting.\r\n\r\nh3.Code Snippet\r\n\r\n\r\n{code:java}\r\n<button aria-expanded=\"false\" aria-label=\"More info about channel access\" ..>\r\n(...)\r\n</button>\r\n\r\n{code}\r\n\r\nh3.Environment\r\nMacBook Pro (14-inch, 2021)\r\nmacOs Ventura 13.5\r\nChrome - Version 119.0.6045.123 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2023\r\nNVDA- Version 2023.2\r\nVoiceover - Version Latest\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-25T06:26:05.000+0000","comments":[]},{"summary":"Approval messages on Android do not include Reporter information. ","key":"JSDCLOUD-16266","url":"https://jira.atlassian.com/browse/JSDCLOUD-16266","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nApprovers notifications sent to Slack on Android devices don't include the reporter information. \r\nh3. Steps to Reproduce\r\n * Install Slack on an Android Device\r\n * Connect a request type with Approvals to JSM Chat\r\n ** [Manage Settings for Approval by Email|https://support.atlassian.com/jira-service-management-cloud/docs/manage-settings-for-approval-by-email/]\r\n * Add a user as an approver to a request type connected to JSM Chat.\r\n\r\nh3. Expected Results\r\n\r\nThe reporter will be included in the approval notification similar to how it appears on the Slack desktop application:\r\n\r\n!Screenshot 2025-03-21 at 4.30.52 PM.png|thumbnail!\r\n\r\n \r\nh3. Actual Results\r\n\r\nThe notification on the Android device will not show the reporter information:\r\n\r\n!6334eca4-95be-4a55-8182-6993c1feab65.jpeg|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-21T21:37:14.000+0000","comments":[{"text":"Hi\r\n\r\nThis issue is from Slack side where their UI is not able to display all the information.","author":"Abhishek Jaiswal"}]},{"summary":"SLA goals using requestTypesInGroup() JQL don't apply to matching tickets","key":"JSDCLOUD-16262","url":"https://jira.atlassian.com/browse/JSDCLOUD-16262","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe JQL function *requestTypesInGroup()* doesn't work with SLA goals.\r\nh3. Steps to Reproduce\r\n # Create an SLA goal and add a JQL query like\r\n{code}\r\n\"Request Type\" in requestTypesInGroup(\"PROJECT_KEY\", \"REQUEST_TYPE_GROUP_NAME\")\r\n{code}\r\n # Create a ticket using one of the request types added to the relevant [request type group|https://support.atlassian.com/jira-service-management-cloud/docs/using-request-type-groups/]\r\n\r\nh3. Expected Results\r\nThe SLA goal will apply to the ticket since it matched the criteria\r\n\r\nh3. Actual Results\r\nThe SLA goal is not applied to the ticket, as if it didn't match the query.\r\n\r\nh3. Workaround\r\nManually include all relevant request types in your query\r\n{code}\r\n\"Request Type\" in (\"Request Type 1\", \"Request Type 2\", \"Request Type 3\")\r\n{code}","createDate":"2025-03-21T16:53:25.000+0000","comments":[]},{"summary":"Operations Slack integration command /jsmops whoisoncall does not function correctly if the schedule names contain a / (slash) ","key":"JSDCLOUD-16225","url":"https://jira.atlassian.com/browse/JSDCLOUD-16225","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe command /jsmops whoisoncall doesn't work as expected when the schedule names have a / (slash) in the name.\r\nh3. Steps to Reproduce\r\n # Integrate JSM Operations with Slack as per this [doc|https://support.atlassian.com/jira-service-management-cloud/docs/integrate-with-slack/].\r\n # Run the command *{{/jsmops whoisoncall <Schedule-Name>}}* where {{<Schedule-Name>}} includes a {{/ (slash).}}\r\n\r\nh3. Expected Results\r\n\r\nThe command should return the on-call participants for the specified schedule, regardless of any special characters, including slashes, in the schedule name.\r\nh3. Actual Results\r\n * The command */jsmops whoisoncall* displays all schedules, even those with a {{/}} in their name.\r\n * The command */jsmops whoisoncall <Schedule-Name>* where Schedule-Name has special characters like - (dash) works as expected.\r\n * The command */jsmops whoisoncall <Schedule-Name>* where Schedule-Name has a / (slash) shows an error like below:\r\n ** \r\n{code:java}\r\nServiceName: schedule Response: { Status: 404 Body: [ {\"message\":\"No handler found\",\"took\":0.001,\"requestId”:”xxxxxx-xxxx-xxxx-xxxxxx”} ] } Request: { URI: http://og-schedule-int-api.mesh:20027/schedules/schedule%20/%name%20Call/on-calls?customerId=xxxxxxx-xxxxx-xxxx-xxxx&identifierType=name }{code}\r\n \r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-17T11:13:32.000+0000","comments":[]},{"summary":"Unable to edit SLA configuration if the existing configuration uses JQL Reserved Keywords","key":"JSDCLOUD-16168","url":"https://jira.atlassian.com/browse/JSDCLOUD-16168","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the existing SLA configuration uses JQL reserved keywords, we're unable to edit the SLA configuration - while saving the configuration, we get the error:\r\n{noformat}\r\nSub goal JQL query is not valid\r\n{noformat}\r\nh3. Steps to Reproduce\r\n # Choose any SLA configuration which uses JQL Reserved Keywords. For example, \"Priority = Immediate\" - here, 'Immediate' is a JQL Reserved Keyword.\r\n # Edit the SLA configuration and try to save it.\r\n\r\nh3. Expected Results\r\n\r\nSLA configuration should be saved, given there are no errors in the configuration.\r\nh3. Actual Results\r\n\r\nUnable to save the SLA configuration with the error, 'Sub goal JQL query is not valid'. \r\nh3. Workaround\r\n * Avoid the usage of JQL reserved keywords till the issue is fixed.\r\n * Or, use JQL reserved keywords within double quotes.","createDate":"2025-03-10T09:20:46.000+0000","comments":[]},{"summary":"Help center layout > unable to add caption for image in Microsoft Edge","key":"JSDCLOUD-16121","url":"https://jira.atlassian.com/browse/JSDCLOUD-16121","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile editing Help center layout ([Customize] > [Edit page layout]), admins can add the image in layout and can add caption to that image.\r\n\r\nHowever, if using Microsoft Edge, unable to add caption like attached.\r\n!AtlassianSupport 1.gif|width=355,height=271!\r\nh3. Steps to Reproduce\r\n # Help center [Customize] > [Edit page layout]\r\n # Add image to the layout\r\n # Unable to add caption for image if using Microsoft Edge\r\n\r\nh3. Expected Results\r\nAble to add caption to the image\r\n\r\nh3. Actual Results\r\nUnable to add caption to the image\r\n\r\nh3. Workaround\r\n\r\nUse Chrome or Firefox, verified that the caption can be added when using other than Edge.","createDate":"2025-03-05T00:36:04.000+0000","comments":[{"text":"Since the help layout is powered by the editor, the current issue with the cursor moving to the next line when clicking on a caption in Microsoft Edge is also affecting the layout editing functionality. According to [discussions|https://atlassian.slack.com/archives/CFG3PSQ9E/p1741164495296579] with the editor team, this issue is expected to be resolved in a future version of the editor. Therefore, a fix for this problem will require the Portal to upgrade to the latest version of the editor.","author":"Pulkit Gupta"}]},{"summary":"CSV-imported issues get stuck on approval","key":"JSDCLOUD-16104","url":"https://jira.atlassian.com/browse/JSDCLOUD-16104","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssues imported via External System Import using a .csv file, in a workflow that has an approval stage immediately after creation, get stuck in approval if created in a status after the approval.\r\n\r\nIf the workflow has a status between the creation and the approval step, the behavior doesn't happen. Only if the approval is immediately after creation.\r\nh3. Steps to Reproduce\r\n # Create a workflow with an approval stage in the first status after creation\r\n # Import an issue via .csv in any status after the approval\r\n\r\nh3. Expected Results\r\n\r\nThe issue is imported in the target status and since the status doesn’t have an approval stage, no approval is required.\r\nh3. Actual Results\r\n * The issue is on a status without approval stage, but it shows as if approval is required.\r\n * The option to approve or decline doesn’t display in the issue view\r\n * Trying to override the approval stage via automation doesn’t work as well\r\n\r\nh3. Workaround\r\n * Transition issues back to the approval stage and transition the issue through the workflow.","createDate":"2025-03-03T15:23:30.000+0000","comments":[]},{"summary":"No translation for 'Help Center' under portal","key":"JSDCLOUD-16023","url":"https://jira.atlassian.com/browse/JSDCLOUD-16023","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhenever account language is changed from English to any other language, the 'HELP CENTER' heading under the Customer Portal > Profile dropdown is not getting translated.\r\nh3. Steps to Reproduce\r\n # Navigate to your Account preferences and change language to any other language other than English.\r\n # Navigate to a JSM project > Channels > Portal\r\n # On the Portal click on your profile icon dropdown on the top right of the page.\r\n\r\nh3. Expected Results\r\n\r\nThe HELP CENTER gets translated similar to everywhere else in the UI.\r\nh3. Actual Results\r\n\r\nThe HELP CENTER title does not get translated for any language:\r\n\r\n!Screenshot 2025-02-21 at 09.27.02.png|width=188,height=269!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-21T09:08:50.000+0000","comments":[{"text":"The text `HELP CENTER` is now translated in all languages, hence closing this ticket","author":"Pulkit Gupta"}]},{"summary":"Help Center | Proforma Form: Accessible name does not match with visual label","key":"JSDCLOUD-15990","url":"https://jira.atlassian.com/browse/JSDCLOUD-15990","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe accessible names do not match the visual labels of the form fields.\r\nh3. Steps to Reproduce\r\n # Open the JSM help center homepage.\r\n # Navigate to the \"Portals\" section in the main content area and activate \"Demo Project\" link.\r\n # Navigate to the \"Contact us about\" section and activate \"Demo Portal\" link.\r\n # Navigate to the \"What can we help you with?\" section and activate \"A11y Test\" link.\r\n # Navigate to the mentioned form fields and inspect the code.\r\n # Observe that the accessible names and visual labels are different and do not match.\r\n\r\nh3. Screen Recording\r\n\r\nhttps://jira.atlassian.com/secure/attachment/484992/Label%20Screen%20Recording.mp4\r\nh3. Actual Results\r\n\r\nThe accessible names \"Long text field\" and \"Short text field\" do not match with the visual labels  \"Test URL\", \"Email Address\", \"Name\", and so on of the form fields.\r\nThis will result in speech recognition users and text-to-speech users finding it confusing while interacting with the form fields.\r\nh3. Expected Results\r\n\r\nAccessible names should match the visual labels of the form fields.\r\n\r\nSpecify the accessible names as \"Test URL\", \"Email Address\", \"Name\", and so on for the corresponding form fields.\r\nh3. Code Snippet:\r\n\r\n<input aria-label=\"Test URL\" required>\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 133.0.6943.99 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 135.0 (64-bit)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.4.2\r\nVoiceOver - Version Latest","createDate":"2025-02-18T05:22:22.000+0000","comments":[]},{"summary":"Sometimes the JSM form does not load on Portal create","key":"JSDCLOUD-15882","url":"https://jira.atlassian.com/browse/JSDCLOUD-15882","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a JSM form is associated with a request type, it is possible that the page loads, but the form does not, due to unreliability in the customer's Jira database. \r\nIn some situations, if the form has required fields and this bug is triggered, the request can be submitted without those fields being filled in\r\n\r\nh3. Steps to Reproduce\r\n\r\nIt is an intermittent issue that is dependent on the load on the tenant Jira database.\r\nh3. Expected Results\r\n\r\nIf JSM form load is unavailable due to Jira unavailability, then Portal create page should not load or be able to be submitted without a form.\r\nh3. Actual Results\r\n\r\nThe Portal create page loads but the JSM form does not.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-05T01:24:31.000+0000","comments":[{"text":"This may lead to incomplete requests with missing information. We had an issue the other day where the form was attached to the issue, but none of the questions were answered. As we have some conditions in the form, only the first question was visible without any reply.","author":"Birger Robrecht [avono AG]"}]},{"summary":"Request Participant field shows all the customers irrespective of customer sharing.","key":"JSDCLOUD-15871","url":"https://jira.atlassian.com/browse/JSDCLOUD-15871","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you have an organisation selected in the Organisation field, you should be able to see that org members in the request participant drow drop. But, recently, all the users with JSm customer licenses are showing in the drop-down and none gets selected. The customer permission > customer sharing is correctly set up for the project.\r\nh3. Steps to Reproduce\r\n # Seelct the organisation in the ticket\r\n # Click on the request participant field\r\n # All the JSM customer accounts show up including Atlassian accounts irrespective of the customer sharing permission\r\n # When populated, it disappears from the selection.\r\n\r\nh3. Expected Results\r\n\r\nThe request participant should only show users for the organisation selected as per the customer sharing permission\r\nh3. Actual Results\r\n\r\nThe field shows all the customers of the entire instance, disregarding project customer permissions.\r\nh3. Workaround\r\n\r\nThere is currently no workaround for that at the moment.","createDate":"2025-02-03T13:14:58.000+0000","comments":[]},{"summary":"Provide feedback : Insufficient color contrast for standard text","key":"JSDCLOUD-15869","url":"https://jira.atlassian.com/browse/JSDCLOUD-15869","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe \"First name (optional)\" , \"Last name (optional)\" , \"Group you represent\" ,\"Specify the name of your county/city/organization\" and so on text fails to meet the required color contrast ratio.\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to the \"Jira service management\".\r\n# Navigate to the \"Help centre\".\r\n# Use any color contrast testing tool to check the color contrast.\r\n# Observe that the color contrast between the foreground text and the background is insufficient.\r\n\r\nh3.Screenshot\r\n\r\n\r\nh3. Actual Results\r\nThe \"First name (optional)\" , \"Last name (optional)\" , \"Group you represent\" ,\"Specify the name of your county/city/organization\" and so on text has an insufficient color contrast ratio with the background color. \r\n\r\nDetails:\r\nForeground: #6B778C\r\nBackground: #FAFBFB\r\nRatio: 4.1:1\r\n\r\nAs a result, low-vision and elderly users won't be able to identify the text. This will cause an unpleasant user experience for users.\r\n\r\n\r\nh3. Expected Results\r\nOn all pages, ensure that each foreground/background color combination presents a contrast ratio of at least 4.5:1 for standard text.\r\n\r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nh3.Environment\r\nMacBook Pro (16 inch, 2021)\r\nmacOs Sonoma 14.7.1 (23H222)\r\nChrome - Version 131.0.6778.265 (Official Build) (arm64)\r\nFirefox- Version 112.0. 1\r\nSafari- Version 18.2\r\nJAWS- Version 2024\r\nNVDA- Version 2024\r\n\r\n","createDate":"2025-02-03T12:29:50.000+0000","comments":[]},{"summary":"Default language selection is ignored on open portal","key":"JSDCLOUD-15867","url":"https://jira.atlassian.com/browse/JSDCLOUD-15867","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the default language for a project, incognito mode doesn't accept the performed configuration. \r\nh3. Steps to Reproduce\r\n # N/A\r\n\r\nh3. Expected Results\r\n\r\nWhen configured with a default language, on an open portal, users should be able to observe the default language chosen by the project admin.\r\nh3. Actual Results\r\n\r\nObserved language is not the default language. System and browser settings is being taken into account depending on the cache state.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-03T11:03:55.000+0000","comments":[]},{"summary":"Help Center : Missing grouping for radio buttons","key":"JSDCLOUD-15803","url":"https://jira.atlassian.com/browse/JSDCLOUD-15803","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn “Help Center” page, the  \"Male\", \"Female\" and \"None\" and so on radio buttons are not grouped with their respective instruction.\r\n\r\nh3. Steps to Reproduce\r\n# Open “Help Center” page. \r\n# Navigate through page using screen reader. \r\n# Observe that the grouping is missing for radio buttons. \r\n\r\nh3.Screenshot\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3.Screen Recording\r\n\r\n\r\nh3. Actual Results\r\nThe radio buttons such as \"Male\", \"Female\" and \"None\" are not programmatically grouped and associated with \"Gender\" instruction.\r\n\r\nThe role=”radiogroup” has been specified for the <div> element that contains radio buttons. However, it is not associated with the \"Gender\" instruction using aria-labelledby=”” attribute. \r\n\r\nAs a result, screen reader users will not understand the purpose of the radio buttons.\r\n\r\nh3. Expected Results\r\nThe screen reader should announce the instruction along with the label for the radio buttons.\r\n\r\nProvide id=”” to the <label> element that contains the instruction. \r\n\r\nProvide aria-labelledby=”” attrubute on <div role=”radiogroup” …> element. \r\n\r\nRefer id=”” value of instruction in aria-labelledby=”” attribute. \r\n\r\n\r\nh3.Code snippet\r\n\r\n{code:java}\r\n<label id=\"a1\">Gender</label>\r\n<div role=\"radiogroup\" aria-labelledby=\"a1\" ..>\r\n<fieldset>\r\n<legend>Gender</legend>\r\n<label class=\"css-1kddo3z\">\r\n<input name=\"customfield_10081\" type=\"radio\" class=\"css-114i3dp\" value=\"10136\">\r\n<span class=\"css-b9c6gp\">male</span>\r\n</label>\r\n...\r\n</div>\r\n {code}\r\n\r\n\r\nInclude the instruction “Gender” within <legend> element. Use <fieldset> and <legend> elements to group the instruction and radio buttons.\r\n\r\n\r\n{code:java}\r\n<fieldset>\r\n<legend>Gender</legend>\r\n<label class=\"css-1kddo3z\">\r\n<input name=\"customfield_10081\" type=\"radio\" class=\"css-114i3dp\" value=\"10136\">\r\n<span class=\"css-b9c6gp\">male</span>\r\n</label>\r\n...\r\n</fieldset>\r\n{code}\r\n\r\nh3.Environment\r\nMacBook Pro (16 inch, 2021)\r\nmacOs Sonoma 14.7.1 (23H222)\r\nChrome - Version 131.0.6778.265 (Official Build) (arm64)\r\nFirefox- Version 112.0. 1\r\nSafari- Version 18.2\r\nJAWS- Version 2024\r\nNVDA- Version 2024\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-27T06:19:30.000+0000","comments":[]},{"summary":"Links within a knowledge base article from Confluence DC are broken after upgrade","key":"JSDCLOUD-15760","url":"https://jira.atlassian.com/browse/JSDCLOUD-15760","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nInternal links within knowledge base articles from Confluence DC are broken when integrated with Jira Service Management (JSM) Cloud. The issue is observed after a Confluence server upgrade.\r\nh3. Steps to Reproduce\r\n\r\n1. Open a knowledge base article through the suggestions feature while creating a ticket in JSM Cloud\r\n\r\nWorking Link:\r\n{{[https://atlassiansite.atlassian.net/servicedesk/customer/portal/5/article/204997110]}}\r\n\r\n2. Within the open article, click on an internal link that redirects to another knowledge base article.\r\n\r\nLink Before Click:\r\n{{[https://atlassiansite.atlassian.net/plugins/servlet/servicedesk/customer/confluence-server/portal/5/abcd/spaces/PROD/pages/204997110/some+page|https://atlassiansite.atlassian.net/plugins/servlet/servicedesk/customer/confluence-server/portal/5/shim/spaces/PROD/pages/204997110/6524+6525+News]}}\r\n\r\n{{Link after Click:}}\r\n\r\n{{[https://atlassiansite.atlassian.net/servicedesk/customer/article/204997110]}}\r\n\r\n{{3. The working link has reference of portal ID where as the non-working link has no portal reference. }}\r\n\r\n \r\n\r\n \r\nh3. Expected Results\r\n\r\nThe internal link should open the referenced article within the JSM Cloud portal seamlessly, preserving the intended navigation flow for users.\r\nh3. Actual Results\r\n\r\nClicking on the internal link leads to an error page instead of resolving correctly.\r\n\r\nExample (Resolved Link):\r\n{{https://atlassiansite.atlassian.net/servicedesk/customer/article/204997110}}\r\n\r\nThis disrupts the navigation flow, preventing users from accessing related knowledge base articles efficiently.\r\nh3. Workaround\r\n\r\nNo workaround is currently present for this behavior.","createDate":"2025-01-20T18:05:29.000+0000","comments":[]},{"summary":"New request form pre-filled with previous form's values","key":"JSDCLOUD-15700","url":"https://jira.atlassian.com/browse/JSDCLOUD-15700","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using URL context to pre-fill request forms on the Customer Portal, data is retained if we navigate back to the Customer Portal and open the same request form.\r\nh3. Steps to Reproduce\r\n * Open the request from URL using the customer portal URL for pre-populating the Summary & Description in the request form. (Screenshot attached)\r\n\r\n{code:java}\r\nhttps://nishanto.atlassian.net/servicedesk/customer/portal/2/group/7/create/18?summary=test&description=test{code}\r\n * Navigate back to the Customer Portal and open the same request form. The pre-filled data is still present even when the data is not pre-filled using the URL. (Screenshot attached)\r\n\r\n{code:java}\r\nhttps://nishanto.atlassian.net/servicedesk/customer/portal/2/group/7/create/18 {code}\r\nh3. Expected Results\r\n * Pre-filled data should be removed when we navigate back to the customer portal and open the same request form again.\r\n\r\nh3. Actual Results\r\n * Pre-filled data still retained when we navigate back to the customer portal and open the same request form again.\r\n\r\nh3. Workaround\r\n * If we again go back to the Customer Portal and open the same request form, the pre-filled data is removed.","createDate":"2025-01-09T07:30:52.000+0000","comments":[]},{"summary":"Newly created Syncs(Jira Integrations) are created with default false statement","key":"JSDCLOUD-15687","url":"https://jira.atlassian.com/browse/JSDCLOUD-15687","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe newly created JSM sync integrations by default get the \"false\" statement for the wrong condition.\r\n\r\n!image-2025-01-07-12-09-35-104.png|width=193,height=122!\r\nh3. Steps to Reproduce\r\n # Go to Settings > Products > Syncs  \r\n # Create a Sync for a different site with a service project\r\n # Once the integration is created the default values are shown with \"False\" statement. Example: The comment author is Empty is the actual condition, however, it is shown as Comment Author Equals False. Refer to the screenshot shared.\r\n\r\nh3. Expected Results\r\n - The default values shown should be the same as the ones displayed in the integration settings.\r\n\r\nh3. Actual Results\r\n - The values shown are different when the Create alert condition is opened. Causing the confusion.\r\n\r\nh3. Workaround\r\n\r\nThe current workaround involves opening the Create alert conditions, removing them, and then recreating the values that display the incorrect condition on the UI.","createDate":"2025-01-07T06:40:48.000+0000","comments":[{"text":"The newly created different site Sync will not have the “False” statement.\r\nPlease try the workaround to fix existing Syncs.","author":"Yavuz Guler"}]},{"summary":"Virtual agent conversation from help centre is not recorded.","key":"JSDCLOUD-15670","url":"https://jira.atlassian.com/browse/JSDCLOUD-15670","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nVirtual agent conversation from the help centre is not being recorded in the Conversation tab of Jira portal.\r\nh3. Steps to Reproduce\r\n # Enable virtual agent with intents in your environment.\r\n # Open help centre and do not select any portal start a conversation with the virtual agent.\r\n\r\nh3. Expected Results\r\n\r\nConversations should be recorded in the conversation tab on Jira agent view.\r\nh3. Actual Results\r\n\r\nConversations are not recorded in the Conversation tab.\r\nh3. Workaround\r\n\r\nOnce you login to the help centre select the portal in which you want to raise the ticket and then start the conversation.","createDate":"2024-12-30T17:42:17.000+0000","comments":[]},{"summary":"Form: Insufficient color contrast for selected state of user interface controls","key":"JSDCLOUD-15650","url":"https://jira.atlassian.com/browse/JSDCLOUD-15650","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe color contrast fails to meet the minimum requirement of a 3:1 ratio for the selected user interface controls.\r\nh3. Steps to Reproduce\r\n # Open the Help Center page in JSM.\r\n # Navigate to \"Portals\" section and activate \"Demo Service Project\".\r\n # Navigate to \"Contact us about\" and select \"General\" option.\r\n # Navigate to \"What can we help you with?\" and select \"Dummy Request\" option.\r\n # Fill the form and submit the form by activating the \"Send\" button.\r\n # Navigate to the mentioned elements.\r\n # Use any color contrast testing tool to check the color contrast.\r\n # Observe that the color contrast between the mentioned elements and the adjacent color is insufficient.\r\n\r\nh3. Screenshot\r\n\r\n!image-2024-12-26-13-03-46-379.png|width=408,height=222!\r\nh3. Actual Result\r\n\r\nWhen the user submit the form by selecting the checkboxes and radio button, the \"1.1.1 Non-text Content\", \"1.3.1 Info and Relationships\" checkboxes, and \"No\" radio button in the selected state with foreground #A4ADBA focus indicator color has a color contrast ratio of 2.1:1 with #F4F5F7 background color.\r\n\r\nThis will make it difficult for people with low vision and color blindness to identify the selected user interface controls after the form is submitted, that have insufficient contrast.\r\nh3. Expected Result\r\n\r\nThe contrast ratio between the foreground border color of the mentioned checkboxes and radio button and its background color should be sufficient.\r\n\r\nEnsure that the color contrast for the foreground border color of user interface controls is 3:1 with the background color.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.1.1\r\nChrome - Version 120.0.6099.71 (Official Build) (arm64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest","createDate":"2024-12-26T07:29:57.000+0000","comments":[{"text":"Thank you for the attention with this bug.\r\n\r\nOne partial workaround that we've suggested for impacted users is to temporarily edit the form, which will bring contrast to acceptable levels. However, this has a negative impact on productivity especially at scale.","author":"Josh"},{"text":"I hope this gets addressed soon, some of our forms are very detailed and this makes visibility of what field options are selected a challenge for my agents.","author":"Matthew Honeysett"}]},{"summary":"Virtual Agent shows correct results with certain phrases but suddenly retracts them","key":"JSDCLOUD-15635","url":"https://jira.atlassian.com/browse/JSDCLOUD-15635","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen searching for a term in JSM help center, Jira lists knowledge base pages which matches the term, presenting accurate result. However, abruptly, it's shown that no answer could be found.\r\n\r\nAfter this, if we click to see search results, the page is again listed, as it happened when we started to type the term.\r\n\r\nThis can cause confusion for customer experience when trying to get knowledge about the issue they're facing.\r\nh3. Steps to Reproduce\r\n\r\nIt was possible to reproduce the issue following the steps below (texts being used as example):\r\n # Link a Confluence space as the Knowledge base to a JSM project\r\n # Create a new page with the title _Encompass Printing Error_\r\n # For the page text use the following:\r\n{quote}This article demonstrates how to resolve the error shown below when attempting to print from encompass |uD83D|uDCD8 Instructions Close Encompass Open Adobe Acrobat\r\nClick Edit Click...Security (Enhanced) Uncheck the box for \"Run in Appcenter\" at the top of the page Click \"Yes\" at the prompt and then \"OK\" at the bottom of the preferences then restart the app Re-open Encompass\r\n{quote}\r\n # Publish the page and go to your JSM Help Center\r\n # Search for the term *encompass* in the search bar and hit *enter* to initiate VA conversation\r\n\r\nAs a result, AI Answers will trigger and start typing out an output based on the article; {*}However, it abruptly terminates{*}.\r\n\r\nClicking on search results displays the article itself.\r\nh3. Expected Results\r\n\r\nThe Virtual Agent will display the expected page.\r\nh3. Actual Results\r\n\r\nThe Virtual Agent will ask you to rephrase the question.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-12-23T17:00:01.000+0000","comments":[{"text":"+1 vote\r\n\r\nWe have also observed this behaviour quite frequently when doing our Virtual Agent testing in the JSM Help Center.","author":"Matt Lane"},{"text":"We have identified the root cause of the problem and have started exploring solutions to address this.\r\n\r\nOriginally, this was intended as an improvement where we attempt to identify hallucinated answers (incorrect or irrelevant responses) and prevent it being suggested to the user so that the user sees only high confident answers. However, the way it is being done currently is causing confusion and affecting user experience as the response is removed midway through the streaming without providing any explanations for this behaviour.\r\n\r\nAs next steps, we will evaluate various approaches and come back with a timeline for the fix.","author":"Shashank Rao"},{"text":"[~3491933893d1] it should be noted that, at least in our case, the solution that is briefly presented before being removed is CORRECT.","author":"Peter Daniledes"},{"text":"Hi,\r\nMy team is also experiencing this issue. \r\nWhen we type certain words or phrases, we initially see a response being generated, and links start to appear, but they ultimately get overwritten by the 'please rephrase' message.\r\nThe main concern is that the words the VA is failing to recognize are the ones our users ask about the most.\r\n\r\nCan we get an ETA? Not an exact date, but at least an estimate of which quarter this fix might be deployed?\r\nIssue related in Atlassian support platform: [https://support.atlassian.com/requests/PCS-387013|https://support.atlassian.com/requests/PCS-387013/]\r\n\r\nThank you!","author":"Mir O."}]},{"summary":"Help Centre : Accordion not programmatically determined","key":"JSDCLOUD-15623","url":"https://jira.atlassian.com/browse/JSDCLOUD-15623","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe “Test” accordion is not programmatically determined. \r\nh3. Steps to Reproduce\r\n\r\n# Create a Jira Service Management project.\r\n# Access Customer Portal settings in the project.\r\n# Customize the Help Center layout, branding, and request types.\r\n# Open the “Help Center“ page.\r\n# Navigate to the mentioned instances.\r\n# Inspect the code and observe that role=”button” is defined inappropriately to the parent <div> element.\r\n \r\n h3.Screenshot\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Actual Results\r\nThe role=”button” is inappropriately defined on the parent <div> of the “Test” accordion. Additionally, the aria-expanded and aria-control attribute is not defined. \r\nAs a result, the screen reader users cannot use the accordion functionality effectively.\r\n\r\nh3. Expected Results\r\nThe accordion should expand/collapse when the users interact with it using a keyboard or a screen reader. The state should also be announced using screen readers for its users.\r\n\r\nApply the following changes → \r\n\r\nRemove the role=\"button\" from the parent <div> element.\r\n\r\nCode \"Test\" with native HTML <button> tag.\r\n\r\nInitially set the 'aria-expanded' attribute to 'false' for the button. Ensure that the value of the 'aria-expanded' attribute changes on user interaction via scripting to 'false' in the collapsed state and 'true' in the expanded state.\r\n\r\nDefined the id in the parent <div> which contains the content such as \"Dell Inc. (Dell) is committed to compliance with the...\" and defined the aria-control attribute on the <button> element and pass an id in it.\r\n\r\nThe content should also be visually hidden when the “Test” accordion collapses in the state.\r\n\r\nh3.Code snippet\r\n\r\n{code:java}\r\n<button aria-expanded=\"false\" aria-control=\"one\" class=\"sc-chbbiW iWJLMX\">Test</button>\r\n<div id=\"one\" class=\"sc-kxynE iSGaAR\"><p>Dell Inc. (Dell) is committed to compliance with the laws and regulations in each country into which the company ships our products. Our products are designed and tested to meet the appropriate worldwide standards for Product Safety, Electromagnetic Compatibility, Ergonomics and other regulatory compulsory requirements, when used for their intended purpose.</p>\r\n(...)\r\n</div>\r\n{code}\r\n\r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3.Environment\r\n\r\nMacBook Pro (16 inch, 2021)\r\nmacOs Sonoma 14.7.1 (23H222)\r\nChrome - Version 131.0.6778.265 (Official Build) (arm64)\r\nFirefox- Version 112.0. 1\r\nSafari- Version 18.2\r\nJAWS- Version 2024\r\nNVDA- Version 2024\r\nVoiceover - Version Latest\r\n","createDate":"2024-12-20T03:36:42.000+0000","comments":[]},{"summary":"When migrating a Portal-only Account to an Atlassian Account, it shows an error when the account has a large amount of associated requests","key":"JSDCLOUD-15612","url":"https://jira.atlassian.com/browse/JSDCLOUD-15612","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen migrating \"Portal only customer\" to \"Atlassian Account\" it may result this error in the UI \"Something went wrong. Try again later.\"\r\nDespite the error, an Atlassian Account with a Jira Service Management customer license is created. However, the Portal-only-customer account status remains \"Active.\"\r\nIt failed due to the Portal-only-customer being a request participant for a big amount of tickets. (more than 70K tickets)\r\n\r\nh3. Steps to Reproduce\r\n# Create 70k tickets and assigned the customer account as request participant\r\n# Go to admin.atlassian.com > Products > select \"site\" > Portal-only customers\r\n# Select a user > Action > Migrate to Atlassian account\r\nit shows error.\r\n\"Something went wrong\r\nTry again later.\"\r\n\r\nh3. Expected Results\r\nThe portal-only customer should be migrated to an Atlassian Account, and the user status should change to \"Inactive.\"\r\n\r\nh3. Actual Results\r\nAtlassian account created but portal only customer account still set to Active. The \"Something went wrong. Try again later.\" error will pop up.\r\n\r\nh3. Workaround\r\n# Manually retry:  Data migration for migrated account are idempotent which means they can be harmlessly retried as many time as you wish.  If any data migration fails, the portal only customer account will remain active so just keep retrying until it succeed. But wait at least 3 minutes between retries \r\n\r\n","createDate":"2024-12-19T06:56:16.000+0000","comments":[{"text":"A fix for this bug has been released.  Please contract Atlassian support if you are still experiencing this same problem.","author":"Yuting Qin"},{"text":"Large migrations now happen in resumable batches. This error should now be fixed","author":"mo"}]},{"summary":"The default priority on priority field does not match the Priority scheme and Priority in the Customer Portal.","key":"JSDCLOUD-15576","url":"https://jira.atlassian.com/browse/JSDCLOUD-15576","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe default priority on the priority field in the Customer Portal, when accessing anonymously, does not match the default priority on the Priority scheme.\r\nh3. Steps to Reproduce\r\n\r\n1. Change the default priority on the Priority Scheme and save the changes.\r\n2.-Login to the Customer Portal as 'Anonymous'. to raise a ticket.\r\n3.-Check the Priority Field.\r\nh3. Expected Results\r\n\r\nThe Request Form's default priority must match the Priority Scheme's default priority.\r\nh3. Actual Results\r\n\r\nThe new default priority is not reflected if the user does not log in to the portal or enters as Anonymous.\r\nIf the user logs in to the *Customer Portal,* the default priority matches the default priority on {*}Priority Scheme{*}.\r\nh3. Workaround\r\n\r\nSet Priority value as default in Request Form.\r\n * Navigate to Request Type\r\n * Click on desired Request > Under Request Form > Add Priority field \r\n * Expand Priority field > Use preset value and hide from portal > Select Default priority as Low.\r\n\r\nThe user must log in to the portal.","createDate":"2024-12-13T15:37:33.000+0000","comments":[]},{"summary":"Assist app remove the agent user from agent channel as soon as added to the channel, if the user has access for more than 1000 projects","key":"JSDCLOUD-15487","url":"https://jira.atlassian.com/browse/JSDCLOUD-15487","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen an agent user is added to the Slack agent channel, after that user is removed from the agent channel with following message immediately.\r\n\r\n{code}\r\n@<user name> \r\nisn't an agent in your <project name> service project, so we've removed them from this channel and sent an access request to your admins.\r\n{code}\r\n\r\nThis is happened if the site has many projects and the user has access for more than 1000 projects.\r\n\r\nCurrently, there is 1000 projects limits which backend system can retrieve the user's projects.\r\nSo if the user has access for more than 1000 projects as an agent (permission: SERVICEDESK_AGENT, BROWSE_PROJECTS, ASSIGNABLE_USER), system fails to get the user's permission for the project. Then Assist remove the user from the channel.\r\n\r\n\r\nh3. Steps to Reproduce\r\n # The site has more than 1000 projects and user has access for more than 1000 projects.\r\n # Add that user to the agent channel\r\n # Assist app remove the user from agent channel\r\n\r\nh3. Expected Results\r\nAgent user is added to the agent channel successfully.\r\n\r\nh3. Actual Results\r\nAgent user is removed from the agent channel as soon as the user is added\r\n\r\nh3. Workaround\r\nDecrease the number of projects that the user has access. Once the user can be added to a channel, the user's permissions can be reverted.","createDate":"2024-12-04T07:12:43.000+0000","comments":[]},{"summary":"Forms: JSM Portal and Form builder UI still shows the option to upload media even though the feature is not supported yet","key":"JSDCLOUD-15465","url":"https://jira.atlassian.com/browse/JSDCLOUD-15465","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe option to upload media is present on the portal and in the form builder UI.\r\nh3. Steps to Reproduce\r\n * *Forms builder*\r\n ** Go to Project settings -> Forms\r\n ** Click \"Create form\"\r\n ** In the form builder, press the key \"/\" to open the insert dropdown. Or click the \" + \" button in the editor toolbar. Type in \"Media\"\r\n\r\n * *Customer portal*\r\n ** Create a Form with a paragraph field\r\n ** Create a Request type which uses the form with paragraph field and show it on the portal\r\n ** Go to the portal and do a request with the request type which uses the form with paragraph field\r\n ** In the paragraph field of the form, type /\r\n ** The element context menu is open, and Image, video or file element is proposed (OK) (see Screenshot attached)\r\n ** Selecting Image, video or file element in the context menu, closes the context menu but does nothing else (KO)\r\n\r\nh3. Expected Results\r\n\r\nThe \"Image, video or file\" option shouldn't show up because we don't current support the feature.\r\nh3. Actual Results\r\n\r\nThe \"Image, video or file\" option shows up\r\n * !Screenshot 2024-11-29 at 4.01.11 PM.png|width=187,height=142!\r\n * !Screenshot 2025-02-13 at 12.14.58.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2024-11-29T05:14:14.000+0000","comments":[{"text":"The option to upload media is also present on the portal for a customer on a paragraph field of a form. Also there the feature seems not supported, such causing irritation by customers on how to upload media.","author":"Frederic Teller"}]},{"summary":"Disabling a Virtual Agent on a project does not remove the option to Chat with that team's Virtual Service Agent in the Help Center","key":"JSDCLOUD-15394","url":"https://jira.atlassian.com/browse/JSDCLOUD-15394","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the Virtual Agent is disabled by setting all intents to Test and by disabling Atlassian Intelligence answers, the option to 'Chat with a team's Virtual Service Agent' still exists in the Help Center view. \r\nh3. Steps to Reproduce\r\n # Enable the Virtual Agent on a project. \r\n # Disable the Virtual Agent with the steps from [Turn off the Virtual Service Agent in your project|https://support.atlassian.com/jira-service-management-cloud/docs/turn-off-the-virtual-agent-in-your-project/]\r\n # Navigate to the Help Center.\r\n # The option to 'Chat with a teams Virtual Service Agent' is still displayed. \r\n # Clicking on this option, will redirect you to the Portal instead. \r\n\r\nh3. Expected Results\r\n\r\nThe option to Chat with a team's Virtual Agent is removed for the project where the Virtual Agent is disabled.\r\nh3. Actual Results\r\n\r\nThe project will still be displayed to Chat with that project's Specific Virtual Agent. \r\n\r\n!Screenshot 2024-11-21 at 11.59.37 AM.png|thumbnail!\r\n\r\nClicking on that option will just redirect the user to the portal for that project. \r\n\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-21T18:56:40.000+0000","comments":[{"text":"Hi [~clevine],\r\n\r\nPlease refer to this page for instructions on how to disable virtual service agent on HelpCenter\r\n\r\nhttps://support.atlassian.com/jira-service-management-cloud/docs/use-the-virtual-agent-in-your-help-center/\r\n\r\n ","author":"jwen"},{"text":"[~d8755a29083f] please read the description more closely - this is not about disabling the virtual service agent on the Help Center","author":"Peter Daniledes"},{"text":"Hi [~clevine] [~f99dc54f1bb7] \r\n\r\nWe've fixed the bug, could you help verify if everything looks good now? Thanks!","author":"jwen"},{"text":"Confirmed - thank you!","author":"Peter Daniledes"}]},{"summary":"Workflow Validator does not work if \"Request Type\" has incorrect value after issue is Moved","key":"JSDCLOUD-15385","url":"https://jira.atlassian.com/browse/JSDCLOUD-15385","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAs presented on [https://jira.atlassian.com/browse/JSDCLOUD-5901:]\r\n{quote}When an issue type is changed on a ticket, it will break the request type mapping and the request type field will be displayed as {_}No match{_}. However, if the ticket is viewed in the issue navigator list view, the request type field shows the previous request type value so searching for request type null/empty would not return a value.\r\n{quote}\r\nWhich resulted on:\r\n{quote}As the original Request Type is still stored on the Issue (despite the Issue Type and Request Type not matching), we have changed the behaviour so that the original Request Type will now show on the Issue View (as it does in Filters & Queues).\r\n\r\nOn Issue View, we have highlighted that the Request Type is Invalid so that users can select a valid Request Type for that Issue Type - this will then update the Request Type value on the Issue, and the new value will show in all views (Queues, Issue View, etc).\r\n{quote}\r\nHowever, providing a value to the [Request Type field is not required (JSDCLOUD-8406)|https://jira.atlassian.com/browse/JSDCLOUD-8406], so if no Agent fixes the value, then any Workflow validators that would verify if this field was not populated won't work. This occurs when changing the issue type directly or moving issues to own/other projects.\r\nh3. Steps to Reproduce\r\n # Create a ticket via the customer portal. Make sure the request type is valid.\r\n # Change the issue type of the ticket OR move the request into another Project\r\n # Do not pick a new value to the \"Request Type\" field\r\n # Use any transition associated with the issue that has a Validator for \"Request Type\" field (Field Required Validator)\r\n\r\nh3. Expected Results\r\n\r\nTransition would fail with the associated error message on the Validator\r\nh3. Actual Results\r\n\r\nIssue status transition occurs even with \"Request Type\" presents an invalid value\r\nh3. Workaround\r\n\r\nMultiple workaround options are available:\r\n * Use [Automation to set Customer Request Type When Issue is Moved or Created via Jira|https://confluence.atlassian.com/jirakb/automatically-set-customer-request-type-when-issue-is-moved-or-created-via-jira-1026039858.html].\r\n * Configure [Default Request Types for your Issue Types|https://support.atlassian.com/jira-service-management-cloud/docs/choose-default-request-types-for-your-issue-types/].\r\n * If by any reason a static Request Type value cannot be set by the above options (e.g. JSM Agents must decide the appropriate one for each issue), then it will be necessary to set a [Value Field Condition|https://support.atlassian.com/jira-cloud-administration/docs/configure-advanced-issue-workflows/#Conditions] instead of a Validator. That way, the transition will NOT be available, unless one of the matching Request Types is set.\r\n\r\nTheres a caveat to the third option above, due to the bug [JRACLOUD-79309|https://jira.atlassian.com/browse/JRACLOUD-79309] the solution shared on [Using Customer Request Type in a Workflow Condition|https://community.atlassian.com/t5/Jira-Service-Management/Using-Customer-Request-Type-in-a-Workflow-Condition/qaq-p/709177] must be used, where a portalKey and Key pair for EACH request type is used as condition:\r\n # Get issue ID (not key) by hovering over the \"move\",\"convert to subtask\", or other ption from the \"..\" dropdown.\r\n # Use the ID on the following endpoint this to the endpoint:\r\n{code:java}\r\nhttps://<siteName>.atlassian.net/rest/servicedesk/1/servicedesk/request/<issueID>/request-types{code}\r\n^Update <siteName> and <issueID> accordingly^\r\n\r\n # The response will contain several entries, one for each request type, look for this information:\r\n{code:java}\r\n{\r\n[...]\r\n      \"id\": 15,\r\n      \"cvId\": 1,\r\n      \"portalKey\": \"itsm\",\r\n      \"portalId\": 1,\r\n      \"key\": \"newhires\",\r\n[...]\r\n    }\r\n{code}\r\n\r\n # Note the \"portalKey\" and \"key\" pair values in the response, there will be one set FOR EACH Request Type available on the project.\r\n # Combine those in as `<portalKey>/<key>` in the workflow \"Value Field\" condition, using \"Option ID\" and you need to perform this to all possible request types available:\r\n!image-2024-11-20-16-06-00-642.png|thumbnail!\r\n # Ensure that you pick \"Any of the Following Condition\" on the Condition list:\r\n!image-2024-11-20-16-06-41-077.png|thumbnail!\r\n\r\nThis should now only allow a issue to transition into the given status if any of the valid Request Type values are associated.","createDate":"2024-11-20T19:10:47.000+0000","comments":[]},{"summary":"Hyperlinks in the Request Type description redirect users to the Request Type form rather than directing them to the intended link.","key":"JSDCLOUD-15377","url":"https://jira.atlassian.com/browse/JSDCLOUD-15377","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nHyperlinks in the Request Type description redirect users to the Request Type form rather than directing them to the intended link.\r\n\r\n!image-2024-11-19-18-20-01-957.png|thumbnail!\r\nh3. Steps to Reproduce\r\n # Add a hyperlink to the description text of the request type.\r\n # Navigate to the request type list available on the portal.\r\n # Select the hyperlink within the description of the request type. (The link is getting highlighted when hovering mouse over the link)\r\n\r\nh3. Expected Results\r\n\r\nShould direct to the correct link.\r\nh3. Actual Results\r\n\r\nRedirect to the request form.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-19T17:15:02.000+0000","comments":[]},{"summary":"Apply filters by categories does not fetch results in portal.","key":"JSDCLOUD-15285","url":"https://jira.atlassian.com/browse/JSDCLOUD-15285","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe customer has several portals where they wish to search the knowledge base by category. When a keyword search is conducted, results are successfully returned. However, when attempting to filter by categories, no results are displayed.\r\nh3. Steps to Reproduce\r\n # We can successfully retrieve results when performing a search through the help center.\r\n\r\n # Results are also fetched without issue when we navigate inside the project and use the search button (magnifying glass).\r\n\r\n # However, when we attempt to refine the search by clicking on categories, no further results are shown.\r\n\r\nh3. Expected Results\r\n\r\nIt seems that when we try to filter the search results by categories, no results are being fetched.\r\nh3. Actual Results\r\n\r\nPlease have a look at below screen recording\r\n[^Portal_SearchByCategory.mov]\r\nh3. Workaround\r\n\r\nNo workaround","createDate":"2024-11-07T12:13:58.000+0000","comments":[]},{"summary":"JSM processor and puller marks an email as read however no ticket is created on the instance","key":"JSDCLOUD-15230","url":"https://jira.atlassian.com/browse/JSDCLOUD-15230","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAt times, you would observe that Jira Service Management has marked an email as read however when you view the Jira instance, you would notice that an issue has not been created.\r\n\r\nFor companies that receive hundreds of emails per day for this ticketing system, the resolution in the Confluence article is not a Resolution. It's a Workaround.\r\nh3. Steps to Reproduce\r\n # Connect a custom mail handler to your Service project.\r\n # Send an emailed request to the connected mailbox.\r\n # Wait for the JSM mail puller and processor to pull and read the emailed request.\r\n\r\nh3. Expected Results\r\n\r\nA new ticket is created from the emailed request processed by JSM.\r\nh3. Actual Results\r\n\r\nNo new ticket is created on the service project, and no error shows on the connectivity logs or JSM puller logs. One possible cause is a timeout while Jira Service Management was creating the email.\r\nh3. Workaround\r\n - [https://confluence.atlassian.com/jirakb/making-jira-service-management-read-mails-that-are-already-read-891139597.html]\r\n{quote} * Go to your incoming mail server.\r\n * Find the email that was marked as read.\r\n * Select the email and *{{mark it as unread}}* {_}(Reopen the email){_}.\r\n * After a minute, Jira Service Management email process should run and read the email.{quote}\r\n\r\nh4. Feature suggestion\r\n - [Send email processing failure notification when email puller failed to pull email|https://jira.atlassian.com/browse/JSDCLOUD-12506].","createDate":"2024-10-30T20:29:57.000+0000","comments":[{"text":"Any company using Jira and processing numerous emails would not have this as a low priority.  How can a basic function be listed as low?  Question to other users finding this article - is your company willing to pay someone to check every email against tickets?  I know that mine does not have the resources for that.  If I am going to pay people to track each email, I would be asked by my senior management why we are paying for Jira.  ","author":"Matt Russell"}]},{"summary":"UI is failing to load objects and keep crashing when there are less than 20k reference objects ","key":"JSDCLOUD-15128","url":"https://jira.atlassian.com/browse/JSDCLOUD-15128","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUI is failing to load objects and keeps crashing when there are less than 20k reference objects.\r\n\r\nAssets limits are defined below: \r\n * https://support.atlassian.com/jira-service-management-cloud/docs/how-much-data-can-you-store-in-assets/\r\n\r\nh3. Steps to Reproduce\r\n # Create two object types.\r\n # Create an attribute and make one object an object type with a Link.\r\n # Set the maximum cardinality.\r\n\r\nh3. Expected Results\r\n\r\nUI should be able to load objects without crashing.\r\nh3. Actual Results\r\n\r\nUI is getting crashed.\r\n\r\n!image-2024-10-15-17-04-34-346.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-15T15:14:02.000+0000","comments":[]},{"summary":"When opening a request from the Portal, an error message is shown","key":"JSDCLOUD-15110","url":"https://jira.atlassian.com/browse/JSDCLOUD-15110","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe have received reports from customers that when they try to load a request from the Portal, they receive an error message:\r\n\r\n!image-2024-10-11-09-12-45-247.png|width=336,height=212!\r\n\r\n\"There was a problem loading, please refresh and try again.\"\r\n\r\nThis happens even if they are the reporters of the tickets and starts happening randomly. \r\nh3. Steps to Reproduce\r\n # From the Customer Portal, navigate to the Request Lists.\r\n # Try to open a Request that has been shared with you, or where you are the Reporter.\r\n\r\nh3. Expected Results\r\n\r\nThe request should load correctly.\r\nh3. Actual Results\r\n\r\nAn error message is shown: \"There was a problem loading, please refresh and try again.\"\r\nh3. Workaround\r\n\r\nIt has been observed that this could be an issue with the web browser. Please try the following:\r\n * Clear cookies and cache.\r\n * Try using a different network.\r\n * Try reinstalling the web browser.\r\n * Use a different web browser. For example, if you are using Chrome, try with Firefox.","createDate":"2024-10-11T15:17:15.000+0000","comments":[]},{"summary":"Insights Automation: Imported automation configuration from production to sandbox/production , the lookupobject action still refering to the production schema","key":"JSDCLOUD-15091","url":"https://jira.atlassian.com/browse/JSDCLOUD-15091","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen admin using the automation configuration that was imported from production to sandbox , the *lookupobject* action still referring to the production Insight schema. The same applies when admin copy the imported configuration. *This is also applicable when an automation is exported and imported between 2 production instances.*\r\nh3. Steps to Reproduce\r\n # In production, create a Insight schema called Schema A. ( If its a new instance , create a different object schema first , this is to assure the id will not match when we import it to Sandbox)\r\n # Then , create an object type and objects\r\n # Then, create automation and use *lookupobject* actions to search object in Schema A. Can us Name=\"xxx\" iql. Add Log action to check the response value.\r\n # Now create sandbox instance.\r\n # Create Schema A in Insight and import the same data from production to Sandbox.\r\n # Now , export the automation from production and import it to Sandbox.\r\n # Execute the automation and monitor the log response.\r\n\r\nh3. Expected Results\r\n\r\nIt should return a different object key , based on Sandbox\r\nh3. Actual Results\r\n\r\nReturn the objectKey from Production insight.\r\nh3. Workaround\r\n\r\nOpen the imported automation configured , in the \"Lookup Object\" action , select a different schema and change it back to the original schema.","createDate":"2021-08-12T03:03:19.000+0000","comments":[{"text":"When you export the rule from A4J it contains all the information needed to execute the rule. In the lookupObjects case it contains the workspaceId:\r\n\r\n\r\n{code:java}\r\n\"value\": {\r\n  \"workspaceId\": \"f1668d0c-828c-470c-b7d1-8c4f48cd345a\",\r\n  \"schemaName\": \"Human Resources\",\r\n  \"schemaId\": \"1\",\r\n  \"customSmartValue\": {\r\n    \"id\": \"_customsmartvalue_id_1629155285558\",\r\n    \"name\": {\r\n      \"type\": \"FREE\",\r\n      \"value\": \"lookupObjects\"\r\n    },\r\n    \"type\": \"IQL\",\r\n    \"query\": {\r\n      \"type\": \"SMART\",\r\n      \"value\": \"objectType == Employee\"\r\n    },\r\n    \"lazy\": false\r\n  }\r\n},\r\n{code}\r\nThe sandbox instance and the prod instance have different workspaceIds (how it routes to Insight). Does this behaviour work correctly with Issue based automation rules? If anything I would have expected the rule to not run.","author":"Greg Ferguson"},{"text":"Am I looking at this wrong or has this issue been outstanding since August 2021?!","author":"Collin Willis"}]},{"summary":"(JSM) When a customer with the default language selected as anything other than English creates a request from the portal, the Automation rule is not able to translate Request Type and performs no action.","key":"JSDCLOUD-15087","url":"https://jira.atlassian.com/browse/JSDCLOUD-15087","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a customer with the default language selected as *Dutch* (or anything other than what is default in the site) creates a request from the portal, the Automation rule is not able to translate Request Type and performs no action.\r\n\r\nThis happens even if the rule is running with the Automation user.\r\n\r\nh3. Steps to Reproduce\r\n # Configure Request Types of a project with the language set to English.\r\n # Translate the name of the Request Type to Dutch.\r\n # Create an Automation rule with the condition in which the above Request Type is selected.\r\n\r\nh3. Expected Results\r\n\r\nThe Automation rule work successfully\r\nh3. Actual Results\r\n\r\nWhen a customer creates a request from the portal of this Request Type, the Automation rule will fail\r\nh3. Workaround\r\n * You need to use the automation condition as \"Advance Compare Condition\" instead of \"Issue Fields Condition\".\r\n * Add \"issue.Request Type.requestType.id\" in First value and request type id in second value. You can refer to the below screenshot.\r\n !image-2022-06-09-19-37-44-502.png|thumbnail!\r\n * To get the request type id go to Project settings >> Request type>> open the request type >> copy the last number shown in your URL.\r\n !image-2022-06-09-19-37-28-436.png|thumbnail!","createDate":"2022-02-03T13:26:41.000+0000","comments":[{"text":"Steps to reproduce or not correct btw.\r\n\r\n1. Set the default language of the project to Dutch (or something else than English)\r\n2. Translate a request type to English\r\n3. Set your preferred language to English\r\n4. Create an automation rule that has a condition based on the selected request type. The dropdown you'll see is presented in English (the config will store the 'name' as english)\r\n5. Change your preferred language back to Dutch (or something else than English)\r\n6. Create a request based on the type that should match the automation rule \r\n7. The automation rule will ignore the condition (In the webhook, the request type name comes through in Dutch)","author":"Andreas Knecht"},{"text":"This is going to be hard to fix thanks to NextGen projects. \r\n\r\nBit of history - due to Nextgen we no longer compare field values (e.g. Request Type values) by id but by name, due to the fact that NextGen creates multiple request types with the same name, but different ids in every project, which would break global/multi-project automation rules.\r\n\r\nWith this Bug in particular the root problem is that we store the field value name based on the language setting of the user configuring the rule. However we then get the field value name translated in whichever language of the user that triggered the webhook event.\r\n\r\nThe only way to fix this:\r\n * Get Jira to provide an 'untranslatedName' for request types (both in REST responses and webhook bodies). We do this with issue types and other things like field names already\r\n * Store the 'untranslatedName' in the rule config as the name.","author":"Andreas Knecht"},{"text":"I had the same issue reported here. My language is Spanish. so we created the request types in Spanish. The automation rule was succesfully created but failed in the first execution. To solve the problem, I changed the language to English and edit the rule. Thus, the automation started to work properly. Then I changed again my language to Spanish to continue working in my preferred language.","author":"Deleted Account"},{"text":"Same here. Most of our clients are from Poland but they have customers from all over so this is a must for us. Otherwise, i would have to change my profile language and add 3 or more customer request translations to my automation rule.","author":"Adam Gołaszewski"},{"text":"The priority –> Low. Why?\r\n\r\nThis is serious customer satisfaction problem. ","author":"Muhammet Ayal"},{"text":"Hi Team, is there any release date? ","author":"Muhammet Ayal"},{"text":"Hi everyone, \r\n\r\nWe have a workaround solution for the Request type problem.\r\n\r\nIf you choose automation condition as \"Advance Compare Condition\"  instead of \"Issue Fields Condition\"- it is working properly.\r\n\r\nThe smart value notation:  \r\n{code:java}\r\n{{issue.Request Type.requestType.id}} {code}\r\n ","author":"Muhammet Ayal"},{"text":"Any news about this bug? Any estimated date?","author":"Alvaro Riera Elena"},{"text":"When can we expect the bug fix?","author":"Erki Tammik"},{"text":"Our team is awaiting you to fix this bug. High affect on us, because our processes is multi-language. Thanks","author":"Aleksandr 2easy"},{"text":"Hey all,\r\n\r\nif you need to evaluate more than one Request Type ID, you can't evaluate a comma separated list of ID's, in our case this did not work:\r\n{code:java}\r\n{{issue.Request Type.requestType.id}}\r\n\r\ncontains\r\n\r\n25,26,28 {code}\r\nWhat you want to do is, evaluate a regular expression, that contains the values and are recognized as a whole, the following is working in our environment:\r\n\r\n{{ }}\r\n{code:java}\r\n{{issue.Request Type.requestType.id}}\r\n\r\ncontains regular expression\r\n\r\n\\b(25|26|28|29|30|31|32|33|34|35|40|72|73|122)\\b {code}\r\n \r\n\r\nCheers, Alex","author":"Alex Ziegltrum"},{"text":"@Makarand Gomashe, any estimated time to arrive?","author":"Aleksandr 2easy"},{"text":"I've also just encountered this bug and will need to apply the workaround for several automations in our project.\r\n\r\nAny estimation for it's resolution?\r\n\r\nJust as a closing note and to give some feedback, the amount of simple actions that require so much extra work due to bugs is insane, and most of them have been open for several years and are still on gathering interest or gathering impact.","author":"DavidBernardoSI1996"},{"text":"Yes, I'm affected as well. However the workaround provided by the support agent to work with request id's is a good solution.","author":"Noah Hofmann"},{"text":"This is the workaround I need. IDs are always better than strings. ;)","author":"Michael Scholz"},{"text":"That solution is not acceptable, if Atlassian provides multiple languages ​​in its system this must be supported by the ENTIRE system, the solution is either for the system to search in all installed languages ​​or for the selector to display the name, but uses the ID as value and therefore do what you have to do using the ID and this must be applied to the entire system.\r\nThis error is not is only in the request type; it is in all systems. In the workaround, explain how to select a request type, but this solution does not function when we have to edit a request, for example.","author":"Aaron P."},{"text":"Since now 3 years but no final solution :( You can do better atlassian, we know it.","author":"Tobias Magnus"},{"text":"Hi everyone,\r\n\r\nThis is Gaurav from the JSM Automation team. Thank you for your patience as we progressed in fixing this bug. It has taken longer than expected. We are in the last leg of closing this issue. We will be rolling out the fix starting this week.\r\n\r\nBest,\r\n\r\nGaurav Arora","author":"Gaurav Arora"}]},{"summary":"Custom Priorities breaks SLA configuration when user profile language is changed ","key":"JSDCLOUD-15024","url":"https://jira.atlassian.com/browse/JSDCLOUD-15024","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustom Priorities breaks SLA configuration when user profile language is changed \r\nh3. Steps to Reproduce\r\n # Set your profile language to English (UK/US)\r\n # Create a custom priorities, lets call it 'Critical'\r\n # Now setup a SLA goals with 'Critical' priority and simple JQL something like \"project = <project_name>\" then save the configuration\r\n # Change your profile language to non English like Spanish/Portugal/Polish\r\n # Navigate back to SLA configuration page within your project, click Edit goals. \r\n\r\nh3. Expected Results\r\n\r\nSLA configuration should be displayed correctly \r\nh3. Actual Results\r\n\r\nYou get an error message in two different places:\r\n # At JQL filter- which translates to \"{_}{{This SLA has one or more errors.}}{_}\"\r\n # At Priority column - Which translates to \"{_}{{This priority no longer exists. Check your Jira priorities or delete this time goal.}}{_}\"\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-01T11:41:37.000+0000","comments":[]},{"summary":"Customer notification set to off or unsubscribed without human interaction","key":"JSDCLOUD-14987","url":"https://jira.atlassian.com/browse/JSDCLOUD-14987","type":"Bug","priority":"","description":"h3. Issue Summary\r\nBy default, customer would be able to set the notification to off/on via link in the customer notification template or via portal.\r\n\r\nBoth option must be click by the user. However , for this bug , the notification was set to off without human interatction.\r\n\r\nThis only happened when the ticket shared with an organization and a public comment was added to the ticket and triggered the customer notification\r\n\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Create an organization in a JSM project.\r\n # Make sure the project using the default customer notification template with the link to turn off the notification.\r\n# As a customer, create a ticket via portal and share it with an organization.\r\n# Then , ask an agent to add a public comment.\r\n# Wait till customer notification triggered to the customer (reporter).\r\n\r\nh3. Expected Results\r\nView the issue via portal , and notice the notification remain as on for the reporter.\r\n\r\nh3. Actual Results\r\nView the issue via portal , and notice the notification set to off for the reporter. This may happened for request participant too.\r\n\r\nh3. Workaround\r\nThe workaround is to remove the link from customer notification template :-\r\n* For HTML , remove this section :-\r\n{code}\r\n<span class=\"jsd-link-separator\">&middot;</span>\r\n    <a class=\"jsd-unsubscribe-link\" href=\"${request.disable.notifications.url}\">Turn off this request's notifications</a>\r\n{code}\r\n* For \"Plain Text\" ,  to remove for customer receiving with plain text template and remove the *Turn off this request's notifications: {{${request.disable.notifications.url}}}\"*","createDate":"2024-09-25T05:03:33.000+0000","comments":[{"text":"Hi, we are still experiencing this issue and impacts efficiency as jobs are not progressing as quickly as they should, because tagged users don't get notified that the ticket is awaiting their input.","author":"Clea Laird"},{"text":"any other ideas besides removing the HTML code for the unsubscribe link?\r\n\r\nwe did that and it keeps disabling notifications on all tickets, but just for one project in the instance (so far)","author":"Julian Coira"}]},{"summary":"Anonymous access with strict SSO asks new user to login with password","key":"JSDCLOUD-14986","url":"https://jira.atlassian.com/browse/JSDCLOUD-14986","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAnonymous access with strict SSO on Portal asks new user to login with password\r\nh3. Steps to Reproduce\r\n\r\n[Anonymous access|https://support.atlassian.com/jira-service-management-cloud/docs/set-up-and-manage-help-center-access/#Set-up-anonymous-access-to-your-help-centers] is enabled for Help Center\r\n\r\n[Portal is set to Open|https://support.atlassian.com/jira-service-management-cloud/docs/set-up-and-manage-portal-access/#Set-up-an-open-portal]\r\n\r\n[Password login is disabled|https://support.atlassian.com/jira-service-management-cloud/docs/configure-settings-to-authenticate-your-customers/#Disable-single-sign-on], SSO enforced\r\n # New user emails JSM Project \r\n # Receives confirmation email for issue creation with :\r\n{code:java}\r\n<a class=\"jsd-issue-link\" href=\"${request.url}\">View request</a>  {code}\r\n\r\n # User clicks on link in email received to see their requests - _https://<SITE>.atlassian.net/servicedesk/customer/portal/<PORTAL-ID>/<ISSUE-KEY>?token=<TOKEN>-s&sda_source=notification-email_\r\n # Their email address is prefilled and cannot be edited\r\n # A button is shown saying \"sign up with password\" even though password login is disabled.\r\n # Error received 'sd.signup.error.sso.is.enforced\" \r\n\r\nh3. Expected Results\r\n\r\nThe service provider-initiated login experience in the help center will be:\r\n # # The customer navigates to [https://INSTANCE.atlassian.net/servicedesk/customer/portals|https://instance.atlassian.net/servicedesk/customer/portals]\r\n # The customer enters their *Email* *address* and selects {*}Continue{*}.\r\n # The customer selects *Continue with single sign-on* and is redirected to their identity provider.\r\n\r\n[https://support.atlassian.com/security-and-access-policies/docs/configure-saml-single-sign-on-for-portal-only-customers/#Just-in-time-provisioning-with-SAML]\r\nh3. Actual Results\r\n\r\nError received 'sd.signup.error.sso.is.enforced\" \r\nh3. Workaround\r\n\r\nUpdate the Customer Notification templates and replace the {request.url} with the Single Sign On URL.\r\n\r\n[Create and edit the content of your customer notifications|https://support.atlassian.com/jira-service-management-cloud/docs/edit-the-content-of-your-customer-notifications/#:~:text=done%22.%20%24%7Bissue.resolution%7D-,Request%20URL,-The%20URL%20of] ","createDate":"2024-09-25T01:31:08.000+0000","comments":[{"text":"https://hello.jira.atlassian.cloud/browse/FLUX-9655","author":"VVV☁"}]},{"summary":"Not possible to save changes made on Virtual Agent Standard workflows when the user language is not English.","key":"JSDCLOUD-14983","url":"https://jira.atlassian.com/browse/JSDCLOUD-14983","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using a language other than English, it is not possible to edit the standard workflow messages on Virtual agent\r\nh3. Steps to Reproduce\r\n # Go to Personal Settings and change the language\r\n # Go to Project Settings > Virtual Agent > Standard workflows,\r\n # Open the match intent workflow and try to change any message and click on save.\r\n\r\nAn error message like below (if the language was changed to spanish)\r\n{quote}\r\nNo hemos podido guardar tus cambios\r\n\r\nIt looks like there are errors in one or more steps. Please update those, then try saving again.\r\n{quote}\r\n\r\nh3. Expected Results\r\nThe workflow would be saved with the changes\r\n\r\nh3. Actual Results\r\n\r\nIt is not possible to save the changes.\r\n\r\nh3. Workaround\r\n\r\nThe only workaround at the moment would be by changing the personal settings language to English, then you would be able to save the changes.","createDate":"2024-09-24T18:47:37.000+0000","comments":[]},{"summary":"SAML-synced customers in JSM can edit their profile details in the portal","key":"JSDCLOUD-14957","url":"https://jira.atlassian.com/browse/JSDCLOUD-14957","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJSM Customers who are synced via SAML SSO can still edit their profile details (name and password) in the service desk portal. This creates confusion as changes made in the Atlassian profile do not sync with the SAML Identity Provider (IDP). There is no setting to restrict these customers from editing their profile, leading to potential miscommunication and user confusion.\r\nh3. Steps to Reproduce\r\n # Sync customer’s account in JSM via SAML SSO.\r\n # Log in to the Jira Service Management portal as the SAML-synced customer.\r\n # Navigate to the profile section in the service desk portal.\r\n # Edit the profile details, such as the customer’s name or password.\r\n # Save the changes.\r\n\r\nh3. Expected Results\r\n\r\nCustomers who are synced via SAML SSO should not be able to edit their profile information (name, password) in the service desk portal, or a restriction option should be available to prevent such edits.\r\nh3. Actual Results\r\n\r\nCustomers are allowed to edit their profile information in the portal.\r\nh3. Workaround\r\n\r\nThere is no direct workaround to restrict profile editing. However, an announcement banner can be added to the service desk portal, informing users that profile changes in the Atlassian service desk portal won’t affect their SAML profile.","createDate":"2024-09-20T16:13:29.000+0000","comments":[{"text":"As a Quick Fix, Can the change Password would be disabled for the SAML SSO Customers.\r\n\r\n \r\n\r\nThanks & Regards\r\n\r\nPA","author":"PA"},{"text":"SAML SSO does not restrict the account from being edited/updated and so this is not a bug.\r\nSCIM (System for Cross-domain Identity Management) is required to restrict account information from being edited and development of this is currently on the roadmap. Once this is released users will be able to lock/sync portal-only account settings.","author":"Lilian Wang"}]},{"summary":"Automation rule to transition issues upon creation fails and causes workflow corruption if there's an attachment included","key":"JSDCLOUD-14930","url":"https://jira.atlassian.com/browse/JSDCLOUD-14930","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-2089].\n  {panel}\n\nh3. Steps to reproduce\n1. Create a new Service Desk project.\n2. Add an automation rule with the following setup:\n* *WHEN*: Issue created\n* *IF*: Issue matches - Issue Type is \"IT Help\"\n* *THEN*: Transition issue to {{Respond to customer}}\n\n3. Add the \"Attachment\" field to the IT Help type on the customer portal.\n4. Create two issues via Service Desk > Create a Service Desk Request, one with an attachment and one without (the attachment can be anything, I've been using a text file containing the word \"test\").\n\nh3. Expected results\nBoth issues will be transitioned to {{Waiting for customer}}.\n\nh3. Actual results\nThe issue with no attachment transitions correctly, but the issue with the attachment remains in {{Waiting for support}}.\n# The Customer Request view says \"Your request status changed to Requester action Needed\" but the status isn't updated to match: [^request.png] \n# In the database, the status actually shows that its in {{Waiting For Support}}, but the transitions on the issue shows that its in {{Waiting for Customer}}. See [^TransitionsAreIncorrect.png]\n# The transition seems to have activated for a second or less, before reverting back to {{Waiting For Support}}. If you have the JIRA Suite Utilities plugin installed, you can actually see the status *was* in {{Waiting for Customer}} for one second. See [^JSUTransitions.png]\n# Running the Integrity Checker for workflows shows us exactly what the problem is: [^IntegrityChecker.png] the workflow current step have been corrupted by the automation due to the attachment bug. The integrity checker is able to fix it. \n\nh3. Workaround\nRemove the *Attachment* from the Visible Fields form so that users are forced to attach their files after the requests have been created.\nConsidering the same data from the *Steps to Reproduce* section, the workaround can be applied with the steps below:\n# Navigate to the desired Service Desk configuration screen.\n# Go to *Settings > Request Types*.\n# Select *IT Help > Edit fields*.\n# In the *Visible fields* section, remove the *Attachment* field.","createDate":"2024-09-17T12:47:23.000+0000","comments":[]},{"summary":"Export HTML Report in Jira search does not show Assets objects custom field values.","key":"JSDCLOUD-14906","url":"https://jira.atlassian.com/browse/JSDCLOUD-14906","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile filtering issues in Jira, select the *Assets objects* custom field as the column and go to *Export* {*}Issues{*}-> {*}Export HTML Report{*}, no values of the *Assets objects* are displayed:\r\n\r\n!image-2024-09-12-20-08-58-477.png|width=1195,height=176!\r\nh3. Steps to Reproduce\r\n # Go to *Filters* -> *View all issues*\r\n # In the List View, select the Columns that are *Assets objects* field/s.\r\n # Select *Export* {*}Issues{*}-> *Export HTML Report*\r\n\r\nh3. Expected Results\r\n\r\nAssets objects field with values should be displayed\r\nh3. Actual Results\r\n\r\nThere are no values for the field.\r\nh3. Workaround\r\n\r\nUse CSV Export under Export Issues.","createDate":"2024-09-12T14:37:38.000+0000","comments":[{"text":"We are also impacted by this and this is a great annoyance for us.\r\n\r\nWe need to present monthly reports to our customers about our tickets, which must include the asset the issue was logged against. With the HTML export, this should be an easy task. Right now our only option is to use CSV export, which includes a lot of manual work to convert to acceptable form. So this bug is actually costs us about 10 hours of work every month.","author":"Peter Meszaros"},{"text":"Hello\r\n\r\nCan you give an update on this case?\r\n\r\nthx","author":"Peter Meszaros"}]},{"summary":"New Parent Field on the JSM Request Type is not working as expected.","key":"JSDCLOUD-14753","url":"https://jira.atlassian.com/browse/JSDCLOUD-14753","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe newly introduced Parent Field as the Community Post : [New Parent Field|https://community.atlassian.com/t5/Jira-articles/Introducing-the-new-Parent-field-in-company-managed-projects/ba-p/2377758]\r\nWhen added to a JSM Request Type is not fetching all the EPIC Links / Parent Links as previously fetched by the EPIC Link Field which is deprecated.\r\nh3. Steps to Reproduce\r\n # Take a JSM Project and navigate to Project Settings > Request Type\r\n # Add the newly created PARENT Field to the Request Type ( any one )\r\n # Try to open the request type in portal or internally via create issue button \r\n # Search for the EPIC Links / Parent Links in Parent Field\r\n\r\nh3. Expected Results\r\n * It should show EPIC Links across all the JSW Projects with Issue Numbers \r\n\r\nh3. Actual Results\r\n * It is Blank and does not show anything currently \r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-08-21T02:49:25.000+0000","comments":[{"text":"Hi! \r\n\r\nWhile I agree this is Low priority, it should be considered a blocker for the removal of the Epic Link field. \r\n\r\nThanks! ","author":"Tim Nelson"}]},{"summary":"Users cannot view all their requests in Jira Service Management portal due to being part of multiple organizations","key":"JSDCLOUD-14705","url":"https://jira.atlassian.com/browse/JSDCLOUD-14705","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Jira Service Management, users who belong to a large number of customer organizations may find that their requests do not appear in the portal. Instead, the interface displays that no requests could be found. However, these users can still view requests specifically created by them by changing the filter option to \"{*}Created by me{*}\".\r\nh3. Steps to Reproduce\r\n # Add a user to a large number of customer organizations.\r\n # Impersonate or ask the user to log in as the user and navigate to the Jira Service Management customer portal.\r\n # Attempt to view all requests shared with the organizations using the \"{*}All{*}\" filter.\r\n\r\nh3. Expected Results\r\n\r\nThe user should successfully view all requests shared with their organizations.\r\nh3. Actual Results\r\n\r\nThe UI displays that no requests are available. By using browser developer tools, the following error can be observed:\r\n{noformat}\r\nHandler dispatch failed; nested exception is java.lang.StackOverflowError\r\n{noformat}\r\nh3. Workaround\r\n\r\nUsers can switch the filter to \"{*}Created by me{*}\" to view requests they have personally submitted. Additionally, reducing the number of organizations a user belongs to may alleviate the issue.","createDate":"2024-08-14T17:42:31.000+0000","comments":[{"text":"Affected users will not see an explicit error in the UI but can diagnose the issue using browser developer tools in the Network tab. The API call to retrieve requests returns a 500 error, with the error message:\r\n\r\n- *POST* https://<your_site>.atlassian.net/rest/servicedesk/1/customer/models\r\n- *Status Code:* 500\r\n- *Error Message:* \"Handler dispatch failed; nested exception is java.lang.StackOverflowError\"\r\n- *Request Payload:*\r\n{code:json}\r\n{\r\n    \"options\": {\r\n        \"portalWebFragments\": {\r\n            \"portalPage\": \"MY_REQUESTS\"\r\n        },\r\n        \"allReqFilter\": {\r\n            \"selectedPage\": 1,\r\n            \"filter\": \"\",\r\n            \"reporter\": \"all\",\r\n            \"statusFilters\": [],\r\n            \"statuses\": [\"open\"],\r\n            \"requestTypeFilters\": []\r\n        }\r\n    },\r\n    \"models\": [\r\n        \"portalWebFragments\", \r\n        \"xsrfToken\", \r\n        \"allReqFilter\", \r\n        \"requestsColumnSettings\", \r\n        \"portalsAndStatuses\", \r\n        \"portalsAndRequestTypes\"\r\n    ],\r\n    \"context\": {\r\n        \"helpCenterAri\": \"ari:cloud:help::help-center/<unique_id_1>/<unique_id_2>\",\r\n        \"clientBasePath\": \"https://<your_site>.atlassian.net/servicedesk/customer\"\r\n    }\r\n}\r\n{code}\r\n\r\nThis indicates the system's inability to handle the user's requests shared with their organizations.","author":"Yuri Moura"}]},{"summary":"Clicking on Hyperlinks under a request type opens in same tab","key":"JSDCLOUD-14605","url":"https://jira.atlassian.com/browse/JSDCLOUD-14605","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nHyperlinks in service requests open in the same tab instead of a new tab. This behavior is inconvenient for users submitting tickets, and this request is for the hyperlinks to open in new tabs.\r\nh3. Steps to Reproduce\r\n * *Add a Field to the Request Form:*\r\n ** Navigate to the request type configuration.\r\n ** Add a field (for eg \"instructions\") for the request type within the request form.\r\n * *Insert a URL in the Field:*\r\n ** Within the newly added field, enter a URL under the \"Request form help and instructions\" section (e.g., {{{}[https://www.atlassian.com|https://www.atlassian.com/]{}}}).\r\n * *Navigate to the Portal:*\r\n ** Go to your Jira Service Management portal.\r\n ** Use the search option in the top right corner to find the request type.\r\n * *Select the Request Type:*\r\n ** Click on the intended request type from the search results.\r\n * *Fill Out and Submit the Request Form:*\r\n ** Complete the request form as desired.\r\n ** Click on the hyperlink included in the \"instructions\" field.\r\n * *Verify the Issue:*\r\n ** Observe that the URL opens in the same tab, not in a new tab.\r\n\r\n[^Screen Recording 2024-07-30 at 10.00.27 PM.mov]\r\nh3. Expected Results\r\n\r\n \r\nThe URL should open in a new tab, which occurs if you navigate to the request type through the portal groups.\r\nh3. Actual Results\r\n\r\nURL Opens in same tab in browser\r\nh3. Workaround\r\n\r\n \r\nNavigate to the desired request type through the portal groups instead of using the search function.","createDate":"2024-07-30T16:26:53.000+0000","comments":[{"text":"We are facing the same problem, and customers are losing data due to it.:(","author":"Anzar Khan"}]},{"summary":"When editing an issue through Slack in Jira - Slack integration with Assist, Components field is not available to be set if included in Issue View","key":"JSDCLOUD-14579","url":"https://jira.atlassian.com/browse/JSDCLOUD-14579","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen editing an issue through Slack in Jira - Slack integration with Assist, _Components_ field is not available to be set if included in Issue View in _Project Settings > Request Types_ in Jira side.\r\nh3. Steps to Reproduce\r\n # Having Jira & Slack integrated through Assist feature, make sure you have Components field added in \"Issue view\" for one Request Type in _Project Settings > Request Types_\r\n # Go to Slack, within agent channel, and try to edit a ticket that was created through Assist feature in Slack\r\n # Components field cannot be found in order to set a value for it - even though this is added to Edit issue view in Jira side.\r\n\r\n # However, if you add this field to Request Form option, it's shown within \"Request Fields\" section:\r\n\r\n!image-2024-07-25-12-28-37-583.png|width=242,height=310!\r\nh3. Expected Results\r\n\r\n_Components_ should be available to be edited as any other field.\r\nh3. Actual Results\r\n\r\n_Components_ is not listed to be edit unless you add this to Request Form view in {_}Project Settings > Request Types{_}.\r\nh3. Workaround\r\n\r\nNo workaround to be used at this moment besides adding _Components_ field to Request Form.","createDate":"2024-07-25T15:31:20.000+0000","comments":[]},{"summary":"Don't allow Search bar to display content from another projects when multiple help centers are enabled","key":"JSDCLOUD-14537","url":"https://jira.atlassian.com/browse/JSDCLOUD-14537","type":"Bug","priority":"","description":"h3. Problem Definition\r\n\r\nWhen there are multiple Service Desk help centers, the search bar on the portal dedicated for a project allows searching for entities from another projects (request type forms etc) on the site which are currently hidden on the page layout.\r\n\r\nh3. Suggested Solution\r\n\r\nSearch bar should only display content from the dedicated project for the help center and not show any other content from other projects.","createDate":"2024-07-19T14:23:30.000+0000","comments":[{"text":"Yes please! This is erally really needed! I would love if this is bubbled up in priority and I am sure I can vouch for many. Please push this, Atlassian.\r\n\r\nThanks in advance.","author":"Yatish Madhav"},{"text":"There is more to this.  Request types and recently used request types display at the bottom, allowing users to click and select them, outside of the help desk they are trying to access, causing customers (anonymous users) to click and enter tickets to help desks that do not supporrt them.  It is causing a nightmare of an issue.  You can't support customers if you don't get the tickets, and you can't support customers if you get others help desk ticket's.  It is a horrible situation and risks those of us managing these, across so many help desks, a monumental amout of extra work.  Not to mention how unprofessional of a view this as from the customer's standpoint on why is their ticket moving to a different place.  \r\n\r\n \r\n\r\nI am now in a situation of losing my entire organiazation's base supporting the use of JSM for helps desks for this specific reason.  We were on a campaign to using JSM as our customer facig solution, now we have halted our rollout in its entirity.  This plan has been in place for over a year, to now be in a place we have to seek an alternate solution, end result:  different product.","author":"Karri Adkins"},{"text":"One more vote for this, I would call it a 'bug'. Since you are giving the option to select linked projects, it does not make any sense to be able to find stuff from unlinked projects. Also this may be a security concern in some implementations.\r\n\r\n{color:#FF0000}*Atlassian, you need to rate this up!*{color}\r\n\r\n ","author":"Dimitar I. Dimitrov"}]},{"summary":"Forms dropdown field can't load options from linked custom fields on Team Managed projects","key":"JSDCLOUD-14507","url":"https://jira.atlassian.com/browse/JSDCLOUD-14507","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn JSM Team Managed Projects, when we create a dropdown custom field in one Request Type and use it as a linked field in a Form that will later be associated with a different Request Type, the dropdown field in the form is not able to populate the options in the portal, we see a \"No options\" message.\r\nh3. Steps to Reproduce\r\n\r\n1. On a *Team Managed* project\r\n2. Go to *Project Settings* > *Request Types*\r\n3. On any of the existing request types, create a dropdown custom field\r\n4. Add details and a few options > click *Save changes*\r\n5. Click on the field you created and drag it to the right panel, this will remove it from the request type > click *Save changes*\r\n6. Go to *Project Settings* > *Forms*\r\n7. Create a new or edit an existing Form\r\n8. Add a dropdown form field, and link it with the Jira Field created earlier > click *Save changes*\r\n9. Navigate to the Form *Settings* panel, on the top of the screen\r\n10. Enable the *Attach to request types* option and select two request types: the one where you created the field and another one, where the Jira linked field was never added.\r\n11. Click *Save changes*\r\n12. Go to the portal and try to open a ticket for the Request type where the linked field was created. *The dropdown will load all the options.*\r\n13. Go back to the portal and try to open a ticket for the Request type that never had the linked field added to it. *The dropdown will appear without any options.*\r\nh3. Expected Results\r\n\r\nThe Forms field should load the options in the Portal even if the linked Jira field was never added to the request type. For team-managed projects, Jira Custom fields exist for the entire project, regardless of whether they were explicitly added to the request type form.\r\nh3. Actual Results\r\n\r\nForms loads but the dropdown field is loaded without any options.\r\nh3. Workaround\r\n\r\nWe must add the Jira linked field to the Request type Form, save it, then remove the field and save it again to allow the Form to recognize it.","createDate":"2024-07-16T19:47:29.000+0000","comments":[{"text":"We are going to merge this bug with https://jira.atlassian.com/browse/JSDCLOUD-13206 as they are choice field caused by the same issue and have same walk around.","author":"Lee Wang"}]},{"summary":"Clicking on a link to an article outside of spaces defined in JSM KB results in not found error","key":"JSDCLOUD-14409","url":"https://jira.atlassian.com/browse/JSDCLOUD-14409","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a user clicks a link to an article which lies outside of a space defined in JSM KB settings, it results in Not found error. \r\nh3. Steps to Reproduce\r\n # Create an article inside a space defined in a JSM site, KB settings.\r\n # Edit this article and copy link of another article which lies in a space not defined in KB settings.\r\n # Go to Help centre search. Search for the article create in Step 1. Open it and then click on the link copied in Step 2. The user should see \"Not found\" error.\r\n\r\nh3. Expected Results\r\n\r\nThe product expectation is that whenever a user clicks on link to any article that is not part of the spaces defined in a JSM site, it should open in a new tab asking for credential.\r\nh3. Actual Results\r\n\r\nNot found Error occurs whenever a user clicks on a link that points to an article in a space not part of JSM.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-07-10T08:14:43.000+0000","comments":[{"text":"Having a fix in place for this behavior would be great for improving the support workflow for multiple teams within our organization, without cluttering the knowledge base results or risking unintended sharing of internal only articles with Customers of the Help Center.\r\n\r\n[https://support.atlassian.com/requests/CES-71362/] ","author":"Naomi"}]},{"summary":"In iPad, Time Field under Forms incorrectly allows selection of time other than hour or 30mins ","key":"JSDCLOUD-14393","url":"https://jira.atlassian.com/browse/JSDCLOUD-14393","type":"Bug","priority":"","description":"h3. Problem\r\n\r\n*Form field* for *Time* allows 30-min increments only like 6:00, 6:30, 7:00 etc. When using iPad, the time field allows setting time other than hour or 30mins (e.g. 8:00 or 8:30) i.e. setting it to 8:01. When submitting the request, the form does not throw an error or continue. Three issues:\r\n * Form field in iPad offers time other than hour or 30mins\r\n * Form field accepts input other than hour or 30mins\r\n * When create request fails due to incorrect value for form field, it does not throw an error, but stays on page.\r\n\r\nh3. Steps to Reproduce\r\n * Create a time picker field under forms and use this forms in a Request Type.\r\n * Open customer portal on iPad and navigate to this time picker\r\n * Click on the time picker field and you will be able to set 1 minute increments for time.\r\n\r\n!Time_Picker_iPad_1mins.jpg|width=196,height=147!\r\n * Repeat this on web browser and the time increments are only in 30 min intervals.\r\n!TimePicker_WebBrowser_30min.jpg|width=213,height=313!\r\n\r\nh3. Expected Results\r\n\r\nThe time picker should behave the same way as it behaves in web browser. \r\nh3. Actual Results\r\n\r\nThe time picker field allows selecting time in 1 min interval, which is not possible using web browser, which is incorrect.\r\nh3. Workaround\r\n\r\nNo known workaround.","createDate":"2024-07-09T03:13:10.000+0000","comments":[{"text":"Thank you for the thorough testing and notes [~c93dc34a6037] ","author":"josh.clearihan"},{"text":"We are going to update the native time picker to the same as Portal's Time Picker for Mobile and iPad. So that user'd be only be able to select time in XX:00 or XX:30 as Jira did.\r\n\r\nThis fix is put into our short term backlog and is expected to be fixed this quarter.","author":"Lee Wang"},{"text":"The fix for this has now been fully rolled out.","author":"Luke C"},{"text":"Thank you all for the work and prioritisation involved. This has been very helpful for our salespeople on the road using i-devices.","author":"josh.clearihan"}]},{"summary":"When user is added to Approver Group, Request is Stuck at Approval Step even after meeting criteria","key":"JSDCLOUD-14294","url":"https://jira.atlassian.com/browse/JSDCLOUD-14294","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nUsers who are members of administration groups and don't have Jira application access, won't have permission to projects on Customer Portal.\r\nh3. Steps to Reproduce\r\n * Modify workflow to add an approval condition with approvals from 2 from each Group.\r\n\r\n!ApprovalStep_condition.jpg|width=336,height=163!\r\n * Create a new request and add 3 groups to *Approver Groups* field.\r\n\r\n!AddGroups_to_Request.jpg|width=232,height=126!\r\n * Get required approvals from all groups but one group. In the last group, get approval from all but 1 person.\r\n * Add an user to the last group, who has already approved the request as part of another group.\r\n * Now refresh the ticket and you will see the ticket stuck in *Submitting Approval* or *Waiting for 1 approval* state.\r\n\r\n!Approval_criteria_met.jpg|width=249,height=198!!SubmittingApproval.png|width=496,height=150!\r\nh3. Expected Results\r\n * The request should be in approved state.\r\n\r\nh3. Actual Results\r\n * The ticket stuck in *Submitting Approval* or *Waiting for 1 approval* state.\r\n\r\nh3. Workaround\r\n * Transition the issue to a different status and move it back to waiting for Approval state. This would reset and running again the approvals should resolve the issue.\r\nOR\r\n * Remove and add back an Approver group from the ticket. This would reset and running again the approvals should resolve the issue.","createDate":"2024-06-26T09:27:10.000+0000","comments":[]},{"summary":"On-screen keyboard in iPad/iPhone covers date time picker and unable to set when using Customer Portal","key":"JSDCLOUD-14243","url":"https://jira.atlassian.com/browse/JSDCLOUD-14243","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nWhile raising requests in Customer Portal, the on-screen keyboard is covering major part of the date time picker. In iPad, the on screen keyboard takes most of the space degrading the user experience - per my measurements, 34.5% space is available for the portal, once the keyboard pops up.\r\n\r\nReproduced in: iPad 12 pro (5th gen), iPad Air 3rd gen\r\nh3. Steps to Reproduce\r\n * Configure a JSM project to have date-time picker field.\r\n * Open customer portal on iPad and navigate to date time picker\r\n * Click on the date time picker field and you can see it partially covered by the keyboard.\r\n\r\n!image-20240527-013346.png|thumbnail!\r\nh3. Expected Results\r\n\r\nThe date time picker should use the available space to display rather than hiding behind keyboard.\r\nh3. Actual Results\r\n\r\nThe date time picker field is partially visible making the selection difficult.\r\nh3. Workaround\r\n\r\nNo known workaround.","createDate":"2024-06-14T06:26:40.000+0000","comments":[{"text":"As this relates to the same problem identified in JSDCLOUD-14141 can you please confirm this fix will also be rolled out by the 28th June? ","author":"josh.clearihan"}]},{"summary":"Approval notifications on first workflow steps are not being sent","key":"JSDCLOUD-14193","url":"https://jira.atlassian.com/browse/JSDCLOUD-14193","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira Service Management approval notifications are not being sent if the approval step is set on the first status.\r\n\r\nThis is reproducible on Data Center: No\r\nh3. Steps to Reproduce\r\n\r\nIf the approver selection is done during the issue creation step,\r\n * Set up approval to be the first status of the workflow.\r\n * Set up approval selection via the approval field (or other custom field) during issue creation.\r\n * Create the issue, and define the approver during creation.\r\n * *No approver notifications are received.*\r\n\r\nh3. Expected Results\r\n\r\nApprover notifications are expected to be sent.\r\nh3. Actual Results\r\n\r\nNo notifications are sent.\r\nh3. Workaround\r\n\r\nNo workaround is available; the customer needs to interact with it (removing and re-adding the approver) or include another step before the approval in order to get the approver notified.\r\n ","createDate":"2024-06-07T15:13:57.000+0000","comments":[{"text":"Workaround I currently put in place for this bug, if interested:\r\n # Update current approvals automation to include the following:\r\n ## Add a 'Re-fetch issue data' action\r\n ## Add a 'Send Email' action with 'Approvers' as 'To':\r\n ### Set Content:\r\n #### This request \\{{issue.key}} created by \\{{issue.reporter.displayName}} is awaiting approval.\r\n #### Please click here to Approve / Decline the request:\r\n #### <a href=\"\\{{issue.url.customer}}\">View Request</a> \r\n\r\nResults in an email with a simple link to the request via Portal.","author":"Troy S"},{"text":"Alternative workaround.\r\n\r\nThe create should go to a status called \"auto triage\".\r\nThis triggers an automation to transition the ticket to the next status (e.g. Awaiting Approval) where the Approvals works as expected.\r\nHide the Auto Triage status from the user to reduce spam emails.","author":"James Rickards (Spark-Nel)"},{"text":"[~37e400ef951a] [~7754d956d748] [~e6a44ab66654] [~f3d976c04485]   Not sure which of these Siddharth Chopra's is correct, but per the email received Siddharth Chopra marked this issue closed / Cannot Reproduce. However, this is reproducible in our environment.  Has this been resolved via some other ticket?  ","author":"Rosa M Fossi"},{"text":"Hello [~9d9af72ec197], I'm sorry if you're still facing the issue. We confirmed it to be not reproducible among multiple internal environments. However, if that's not the case for you, we will reopen this. Can you please confirm whether the intended notification is for the email or the notification sent through the Assist bot in Slack or both?","author":"Siddharth Chopra"},{"text":"Hi [~f3d976c04485], happy new year and thanks for your response.  Our scenario involves Assist / Slack notification (issue persisted for us as recently as Dec 17th).  Paulene Nguyen from support referred me to this bug ticket. \r\n{quote}G'day Rosa,\r\n\r\nI hope you're doing well! My name is Paulene and I'll be the Support Engineer assisting you with this request.\r\n\r\nBased on the description, Assist is not sending approval requests in Slack for the ITS service project.\r\n\r\nUpon reviewing the affected tickets, it looks like approval is the first status of the workflow. I was able to confirm that this is being caused by a bug. If approval is the first status of the workflow, approval notifications are not sent.\r\n\r\nPlease feel free to review the bug report below:\r\n * Approval notifications on first workflow steps are not being sent\r\n{quote}","author":"Rosa M Fossi"},{"text":"In our case, the automatic approval email was not sent.  I haven't tried reproducing this year and it is low priority due to workaround working.  Happy to spend 10m with someone from Atlassian to show them in our instance.  The only difference to the steps to reproduce in the description are that we are using a multiuser custom field, if that makes a difference.","author":"James Rickards (Spark-Nel)"},{"text":"I can confirm that this now works for us on both a Team Managed and Company Managed project.","author":"James Rickards (Spark-Nel)"},{"text":"Please reopen the bug as it's clearly not fixed yet. See PCS-381417 as reference.\r\n\r\nAlso, voting on closed tickets is not possible. ","author":"Jared Schmitt"}]},{"summary":"New users are sometimes not automatically added to JSM organizations by domain mappings","key":"JSDCLOUD-14143","url":"https://jira.atlassian.com/browse/JSDCLOUD-14143","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe feature for automatically adding customers to organizations based on their domain, as detailed in [Managing customers and organizations on Jira Service Management|https://community.atlassian.com/t5/Jira-Service-Management-articles/Managing-customers-and-organizations-on-Jira-Service-Management/ba-p/2677857#M4206], is not functioning as expected.\r\n\r\nDespite proper configuration, customers sometimes are not automatically added to designated organizations. This affects both Atlassian accounts and Portal-only accounts\r\nh3. Steps to Reproduce\r\n\r\nThis is not consistently reproducible \r\n * Add a domain mapping to an organization as per [Managing customers and organizations on Jira Service Management just got easier!|https://community.atlassian.com/t5/Jira-Service-Management-articles/Managing-customers-and-organizations-on-Jira-Service-Management/ba-p/2677857#M4206]\r\n * Configure User Access Settings for that same domain to have the customer role for JSM\r\n * Have a new account with the email domain configured above sign up to the Help Center\r\n\r\nh3. Expected Results\r\n\r\nThe user is added automatically to the designated organization\r\nh3. Actual Results\r\n\r\nThe user may not be added automatically to the designated organization.\r\nh3. Workaround\r\n\r\nManually add the user to the organization","createDate":"2024-06-03T07:18:26.000+0000","comments":[{"text":"I understand this is rated low given the workaround, but please understand that a member of my support team needs to have org admin level access so they can manage organizations (not ideal), and must monitor new registration email notifications multiple times a day, and then check to see if they were properly added to the organization, otherwise add them manually. Our situation is such that if a user navigates to our help portal, they self-register to submit requests, view our knowledge base, and engage with us on tickets. It is manually intensive to have to validate they were added to the proper organization - and I can confirm this is inconsistently reproducible, we have to add ~50% of new users manually. This is error prone, and a problem because if not done in a timely manner, the customer notifies us that they cannot see their requests, which spins off an entirely new discussion to explain why. Thank you for considering this and hopefully moving this up in priority.","author":"Zane Shewalter"},{"text":"We have the same problem.\r\n\r\nHowever, we aim to map customers automatically to organizations based on their domain. We use SAML SSO, so our customers can log in to the customer portal of JSM. When a customer with a specific domain that is already linked to an organization logs in and submits a ticket, the customer is not automatically added to the organization. And since we don't know the E-Mails of our customers beforehand, we don't have a workaround for this. So this bug is somehow critical for us. We would have to check every time a customer submits a ticket and map him to an organization. ","author":"Hamdad Mohamed Amin (C/HRE-JMP4-DE BD/SIX-AP)"},{"text":"Hi,\r\n \r\nThis is Alison from the Jira Service Management Engineering team. We have released a fix which should have resolved this bug and will be marking this as closed.\r\n \r\nIf this is still an issue for you, please let us know. \r\n \r\nThank you,\r\n \r\nAlison","author":"Alison"}]},{"summary":"On-screen keyboard in iPad/iPhone covers drop down menus and they float on screen","key":"JSDCLOUD-14141","url":"https://jira.atlassian.com/browse/JSDCLOUD-14141","type":"Bug","priority":"","description":"h3. Problem\r\nWhile raising requests in Customer Portal, the on-screen keyboard is covering major part of the drop down menus and the menu floats around the page without link to the input field. In iPad, the on screen keyboard takes most of the space degrading the user experience - per my measurements, 34.5% space is available for the portal, once the keyboard pops up. \r\n\r\nReproduced in: iPad 12 pro (5th gen), iPad Air 3rd gen\r\n\r\nh3. Steps to Reproduce\r\n * Configure a JSM project to have drop down menu field.\r\n * Open customer portal on iPad and navigate to drop down menu.\r\n * Select the drop down menu field and move the page up/down.\r\n * The drop down menu will start floating away from the input field.\r\n!Floating_Drop_down_menu.jpg|width=284,height=194!\r\n\r\nh3. Expected Results\r\nThe drop down options should use the available space to display rather floating away.\r\n\r\nh3. Actual Results\r\nThe drop down is either partially visible making the selection difficult or move away from the input field.\r\n\r\nh3. Workaround \r\nNo known workaround.","createDate":"2024-05-31T06:51:02.000+0000","comments":[{"text":"We understand this bug blocks the experience on iPad and iPhone, and we are currently looking into the fix. Current estimation for the roll out of the fix is by June 28th.","author":"Lee Wang"},{"text":"Thanks, Lee Wang. Can you please provide an update regarding this fix being rolled by June 28th. Are we on schedule?","author":"josh.clearihan"},{"text":"This issue has just been fixed. Select field in customer portal should work smoothly on iPad and iPhone.","author":"Lee Wang"}]},{"summary":"Language Translation(German) not working for system fields(impact , urgency) after ticket is created","key":"JSDCLOUD-14126","url":"https://jira.atlassian.com/browse/JSDCLOUD-14126","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nLanguage Translation(German) not working for system fields(impact, urgency) after ticket is created. During ticket creation system field values shows translated values according to the language selected in User profile but after ticket creation values shows English value in both Portal and from Issue View.\r\nh3. Steps to Reproduce\r\n # Enable *German* Language Support in Project.\r\n # Add *Urgency* , *Impact* fields to Request Type\r\n # Navigate to Customer Portal with customer account.\r\n # Set Browser Language and Profile Language as {*}Deutsch{*}.\r\n # Create Ticket from Portal for the Request Type which has Urgency and Impact.\r\n # Observe the field values are translated to German during creation. \r\n # After ticket creation it shows as English in both PORTAL and from Issue view.\r\n!image-2024-05-29-19-35-52-074.png|width=404,height=203! \r\n!image-2024-05-29-19-36-14-962.png|width=396,height=219! \r\n!image-2024-05-29-19-36-46-219.png|width=343,height=117!\r\n\r\n[^Screen Recording 2024-05-17 at 16.02.27_2024-05-21T12_29_59.833Z.mov]\r\nh3. Expected Results\r\n\r\nField options should be visible in the German language after ticket creation\r\nh3. Actual Results\r\n\r\nField options are not translated into German language after ticket creation.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-29T14:12:00.000+0000","comments":[]},{"summary":"\"New option...\" is always shown in Customer Portal for drop down fields under Forms","key":"JSDCLOUD-14122","url":"https://jira.atlassian.com/browse/JSDCLOUD-14122","type":"Bug","priority":"","description":"h3. Summary\r\nWhen *drop down* fields and *multi-select drop down* fields are present in forms and they have *Other* option, the customer portal always shows *_{color:#0747A6}New option{color}_* field. When the *Other...* option is selected, the *_{color:#0747A6}New option{color}_* text field is editable.\r\n\r\nh3. Environment\r\n* JSM Cloud\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to Forms and create a Form with a *drop down* and *multi-select drop down* fields. Ensure that you have *Other...* choice added to it.\r\n!Form_builder_options.jpg|thumbnail!\r\n# Use this form in a request type.\r\n# Go to Customer Portal and choose this request type. The page should show the *drop down* and *multi-select drop down* fields. \r\n# Note that the *New option* text field is always shown, even when the *Other...* choice is not selected.\r\n!CustomerPoral_forms.jpg|thumbnail!\r\n\r\nh3. Expected Results\r\n* The *_{color:#0747A6}New option{color}_* text field should be offered to only *Other...* option and should be hidden for all other choices.\r\n\r\nh3. Actual Results\r\n* The *_{color:#0747A6}New option{color}_* is shown always, irrespective of the choice selected for *drop down* and *multi-select drop down* fields.\r\n\r\nh3. Notes\r\nIssue easily reproducible on your cloud site.\r\n\r\nh3.Workaround\r\nNA","createDate":"2024-05-28T06:10:10.000+0000","comments":[]},{"summary":"Searching for team-managed request forms on the portal shows no results","key":"JSDCLOUD-14087","url":"https://jira.atlassian.com/browse/JSDCLOUD-14087","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSearching for request forms from team-managed projects in the portal isn't working correctly. \r\n\r\nThe search works normally for company-managed projects.\r\nh3. Steps to Reproduce\r\n # Create a team-managed Jira Service Management project.\r\n # Create a new request type, using a template or not, and name it \"Unique Name\".\r\n # Go to the help center and search for \"Unique Name\"{_}.{_}\r\n\r\nh3. Expected Results\r\n\r\nThe \"Unique Name\" request form is returned from the search.\r\nh3. Actual Results\r\n\r\nNo search results and a \"We couldn’t find a match for your search\" message is displayed.\r\nh3. Workaround\r\n\r\nNavigate to the portal and find the request form manually, without searching.","createDate":"2024-05-17T16:39:48.000+0000","comments":[]},{"summary":" Assets: Ampersand sign (&) in users display name is rendered as HTML entity &amp; within user type attribute","key":"JSDCLOUD-14060","url":"https://jira.atlassian.com/browse/JSDCLOUD-14060","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf users' display name contains an ampersand sign (&) then on Assets UI under user type attribute is represented with HTML entity\r\n{noformat}\r\n&amp;{noformat}\r\nThis is reproducible on Data Center: (no) \r\nh3. Steps to Reproduce\r\n # Create an Atlassian Account with display name which contains {*}ampersand sign (&){*}. For example, I created an account A&A@example.test.com which made the display name as *A&A* \r\n # Create a object with user type attribute\r\n # Add the user created in *step#1* in the user attribute\r\n\r\n{*}Note{*}: Also tested with other special characters like:\r\n– Plus sign +\r\n– Hyphen -\r\n– Underscore _\r\n– Tilde ~\r\nfor these characters it shows correct display name\r\nh3. Expected Results\r\n\r\nUsers display should be *A&A* in the Assets view\r\nh3. Actual Results\r\n\r\nWe see user display name as\r\n{noformat}\r\nA&amp;A{noformat}\r\n!Assets_ampersand_UI_bug.png|width=379,height=278!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-14T17:27:31.000+0000","comments":[]},{"summary":"Forms report: Paragraph field with the incorrect format in PDF","key":"JSDCLOUD-14031","url":"https://jira.atlassian.com/browse/JSDCLOUD-14031","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen generating a Form PDF, the Form Paragraph field type, line breaks, and the structure of words and sentences are not respected when exporting the form to PDF, causing a change in its format.\r\nh3. Steps to Reproduce\r\n # Create a Form with a paragraph field\r\n # Populate this field with text\r\n # Download a PDF version of the form\r\n # It shows the text in an incorrect format\r\n\r\nh3. Expected Results\r\n\r\nThe text should be in the same format as the form attached to the issue.\r\nh3. Actual Results\r\n\r\nThe Form Paragraph field type, line breaks, and the structure of words and sentences are not respected when exporting the form to PDF, causing a change in its format.\r\n * Screen recording showing this behavior: [^Screen Recording 2024-05-07 at 16.32.34.mov]\r\n\r\nh3. Workaround\r\n\r\nNo workaround.","createDate":"2024-05-07T14:53:44.000+0000","comments":[{"text":"This is affecting my team as well, I have just logged a support ticket for this one too.","author":"Jovin Jovinsson"},{"text":"It is quite embarrassing that on forms that collect formal information the words are cut incorrectly. It is unpresentable that the hyphenation don't works (spanish).\r\n\r\n ","author":"Ignacio Coupeau"},{"text":"We have the same problem at home with a strong impact since these forms are used in a legal framework...","author":"Théo LANDRIN"}]},{"summary":"KB Articles cannot be accessed by Anonymous users when IP Allowlist is enabled.","key":"JSDCLOUD-13983","url":"https://jira.atlassian.com/browse/JSDCLOUD-13983","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nKB Articles cannot be accessed by Anonymous users when IP Allowlist is enabled.\r\nh3. Steps to Reproduce\r\n # Enable IP Allowlist for Jira and Confluence products.\r\n # Enable Anonymous access for customer portal, Set Project to Open, Set Anonymous access in confluence space, KB Settings set to Anyone.\r\n # Navigate to customer portal without login and type in summary. KB Articles will be suggested.\r\n # Click on the KB Article and observe the error.\r\n!image-2024-04-29-15-30-01-910.png|width=426,height=243!\r\n\r\nh3. Expected Results\r\n\r\nUsers should able to access the KB articles without login\r\nh3. Actual Results\r\n\r\nUsers are getting error messages while accessing the KB without login\r\nh3. Workaround\r\n\r\nUsers need to login in order to access the KB articles\r\n\r\nOr\r\n\r\nAdd the [Atlassian outbound IP addresses|https://support.atlassian.com/organization-administration/docs/ip-addresses-and-domains-for-atlassian-cloud-products/#Outgoing-Connections] in the allowlist under admin panel.\r\n* Go to admin.atlassian.com. Select your organization if you have more than one.\r\n* Select Security > IP allowlisting.","createDate":"2024-04-29T10:25:23.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/PCS-378503","author":"Jhaman Advani"}]},{"summary":"Hidden Request Type is showing in Help Center","key":"JSDCLOUD-13756","url":"https://jira.atlassian.com/browse/JSDCLOUD-13756","type":"Bug","priority":"","description":"h3. Summary:\r\nEven though a request type is already being hidden in a project, it is still searchable through the Help Center.\r\n\r\nh3. Steps to Reproduce:\r\n# Create a Service Desk Project.\r\n# Navigate to the Project Administration Page.\r\n# Select \"Request Types\" and create a New Group.\r\n# In that New Group, create a new Request Type.\r\n# Navigate to the Service Desk Help Center and search the Request Type, it will be showing.\r\n# Back to the Project Administration page and delete the Group.\r\n# Automatically, the request type will be moved to \"Hidden from portal\" group.\r\n# Do another search of the request type on the Help Center.\r\n\r\nh3. Expected Result:\r\n* The request type would not be showing as a search result.\r\n\r\nh3. Actual Result:\r\n* The request type is showing in the search result.","createDate":"2024-03-08T16:52:09.000+0000","comments":[{"text":"We are experiencing this issue and I am not sure why it is Low priority or Minor severity.  I would rank it much higher.\r\n\r\nIt allows our customers to use request forms that they should not have access to.  Additionally it undermines their trust in the search feature.  When it returns results that it clearly shouldn't, customers will quickly lose faith in the search's ability to correctly find what they are looking for and stop using it all together.  This will negatively impact our ability to ensure as many tickets are diverted as possible with the self-help articles we publish.\r\n\r\nThis is a fundamental flaw with the search results that needs to be correctly as soon as possible.","author":"Steven Schroeder"},{"text":"The issue has been fixed. Hidden RequestTypes should no longer surface in Help Center Search.","author":"Milan Bhuva"}]},{"summary":"JSM Form PDF exports doesn't resolve links in text/paragraph field type","key":"JSDCLOUD-13750","url":"https://jira.atlassian.com/browse/JSDCLOUD-13750","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen exporting a Form comprising of text/paragraph field types with URL links as PDF, the link text is rendered as follows:\r\n{color:#0747A6}+This is an example URL link+{color}\r\n\r\nHowever, there's no link associated with the text, thus clicking on the text does nothing.\r\n\r\nh3. Steps to Reproduce\r\n # Create Form with text or paragraph field type\r\n # Enter a link in this field and submit form\r\n# Export the Form as PDF\r\n# Click on the link text\r\n\r\nh3. Expected Results\r\nThe user is redirected to the link destination.\r\n\r\nh3. Actual Results\r\nNothing happens.\r\n\r\nh3. Workaround\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-03-07T04:02:48.000+0000","comments":[{"text":"We will this bug be worked on and released? ","author":"Vaughan Rivett"}]},{"summary":"Unable to rename the Email request type for team-managed projects","key":"JSDCLOUD-13712","url":"https://jira.atlassian.com/browse/JSDCLOUD-13712","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUnable to rename the Email request type for team-managed projects. Receive the following error:\r\n{code}\r\nWe couldn't save your changes\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to *Project settings > Request types > Email request*\r\n # Rename it to anything\r\n # Click the check button\r\n\r\nh3. Expected Results\r\nEmail request type is renamed.\r\n\r\nh3. Actual Results\r\nError is thrown.\r\n\r\n403 error for PUT call to\r\n{code}\r\n/rest/internal/1.0/issueLayouts/\r\n{code}\r\n\r\nh3. Workaround\r\nNone","createDate":"2024-02-28T05:35:36.000+0000","comments":[]},{"summary":"Forms report : Attached PDF Download has a distorted layout within the table","key":"JSDCLOUD-13696","url":"https://jira.atlassian.com/browse/JSDCLOUD-13696","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the Attached Form PDF on an issue when downloaded, the PDF shows a distorted layout of merged table row.\r\nh3. Steps to Reproduce\r\n # Create a FORM With a table (3-4 columns, 3-4 rows)\r\n # Merge all the columns in the middle row and put a long text field in the table.\r\n # Put 1-2 sentences in the long text fields of the row.\r\n # Download a PDF version of the FORM \r\n # It shows entire text in one cell instead of merging it to other cells \r\n\r\nh3. Expected Results\r\n\r\nText should be visible as it shows up in the submitted form.\r\nh3. Actual Results\r\n\r\nWhen cells are merges, PDF removes the merged column cells and shows the long text field in one cell.\r\nh3. Workaround\r\n\r\nNo workaround.","createDate":"2024-02-23T14:44:58.000+0000","comments":[{"text":"How long can it take to resolve something this simple. Sending out forms that look like this to our customers is not acceptable. Please raise the urgency on this.","author":"Reynard Botha"}]},{"summary":"The time zone isn't formatted correctly on the JSM portal profile page for Atlassian accounts","key":"JSDCLOUD-13658","url":"https://jira.atlassian.com/browse/JSDCLOUD-13658","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFor certain time zones, the Time Zone field on the customer portal profile page for Atlassian accounts is formatted as `timezone.zone.country.region`.\r\nh3. Steps to Reproduce\r\n # Log in to JSM customer portal with an Atlassian account\r\n # Navigate to the profile page at \"\\{site_url}/servicedesk/customer/user/profile\"\r\n # Click \"Edit account preferences\" \r\n # Change the timezone to \"Australia/Victoria\"\r\n # Go back to the profile page and refresh\r\n\r\nh3. Expected Results\r\n\r\nThe timezone will be displayed as \"Victoria\"\r\nh3. Actual Results\r\n\r\nThe timezone is displayed as \"timezone.zone.australia.victoria\"\r\nh3. Workaround\r\n\r\nNo available workaround","createDate":"2024-02-15T04:33:16.000+0000","comments":[{"text":"{panel:title=Atlassian Update - February 13, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"FORMS : Date/Time field is showing additional Vertical scroll bar in Customer Portal","key":"JSDCLOUD-13649","url":"https://jira.atlassian.com/browse/JSDCLOUD-13649","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen adding Date/Time field in FORM and viewing the FORM in Customer Portal, we can see a vertical scroll bar kind of view appears in portal.\r\nh3. Steps to Reproduce\r\n # Create a FORM and Date/Time field.\r\n # Attach Form to a Request Type.\r\n # Navigate to customer portal and open the Request Type.\r\n # Could see small scroll bar view in portal.\r\n\r\n!Screenshot 2024-02-06 at 21.48.08.png|width=540,height=254!\r\nh3. Expected Results\r\n\r\nVertical Scroll bar should not appear in UI.\r\nh3. Actual Results\r\n\r\nVertical Scroll bar should appears in UI.\r\nh3. Workaround\r\n\r\nOnly option to use Date field or move Date/Time field from FORMS to Request Form.","createDate":"2024-02-12T14:31:57.000+0000","comments":[]},{"summary":"Field is Required error message as soon as the Form gets loaded in Portal","key":"JSDCLOUD-13638","url":"https://jira.atlassian.com/browse/JSDCLOUD-13638","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen Form is loaded in Customer Portal, there is a error message appears *This field is required* under Description field , as soon as the FORM loads in customer portal.\r\n\r\nIdeally error should appear only during Submit action but this error appears as soon as the FORM gets loaded in Portal.\r\nh3. Steps to Reproduce\r\n # Create a FORM and add Paragraph field.\r\n # Link Paragraph field with Jira Description Field and select Response Required.\r\n # Attach the FORM with Request Type.\r\n # Navigate to Customer Portal and select Request Type.\r\n # As soon as FORM loads, we see error under Description field : *This field is required*\r\n\r\nh3. Expected Results\r\n\r\nError message should not appear as soon as FORM loads. Error should appear only during Submit action.\r\nh3. Actual Results\r\n\r\nError message appears as soon as FORM loads.\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-02-09T15:08:56.000+0000","comments":[{"text":"We have also been seeing this as of today at least, on both our production and sandbox sites.\r\n\r\nIt is quite annoying and unfriendly to the customers so I hope this gets solved quickly and doesn't stay on \"Long Term Backlog\" status forever. \r\n\r\nPair this with the screen jumping up and down due to a Statuspage frame loading too obviously and the customer experience of creating a request in our portals is horrible, to say the least.","author":"Michiel S."},{"text":"Can we please have urgent action on this? It's embarrassing for us in service management, and confusing for our customers ","author":"Eli Devlin"},{"text":"We also have some of these multi-line paragraph fields in some of our portals and it just doesn't look nice:\r\n\r\n!image-2024-03-26-11-55-46-817.png!","author":"Gabriel Ender"},{"text":"The status changed to \"Closed\" with the resolution \"Fixed\", but I don't see any details about the fix, no fix version, etc.\r\n\r\nIs it fixed or did someone from Atlassian just decide to close it?","author":"Michiel S."},{"text":"We identified the root cause and implemented a fix to ensure that the error message now only displays during the submission action, as expected. Users will no longer encounter the error message when loading the form in the Customer Portal.","author":"Osama Hisham Abuqaoud"},{"text":"I'm still seeing the error in our Jira Cloud instance. \r\n\r\nWe're on the Bundled release track with the next scheduled on May 14, 2024 and the last one being Apr 09, 2024.\r\n\r\nDoes that mean we have to wait until May 14th?","author":"Michiel S."}]},{"summary":"Assets for JSM: When the Edit Assets field attributes Action is used to clear an already empty Attribute, an error is thrown.","key":"JSDCLOUD-13612","url":"https://jira.atlassian.com/browse/JSDCLOUD-13612","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the Edit Assets field attributes Action in Automation for Jira to try and clear an Attribute on an Object where that Attribute is already empty, an error is thrown:\r\n\r\nh3. Steps to Reproduce\r\n # Create an Automation Rule that uses the Edit Assets field attributes Action and have it clear an Attribute.\r\n # Run the Rule on an Issue where the affected Custom Field's Object has no value for the Attribute.\r\n\r\nh3. Expected Results\r\n\r\nThe Audit Log records No Action Taken.\r\n\r\nh3. Actual Results\r\n\r\nThe Audit Log shows *Some Errors* with a message like this:\r\n{noformat}\r\nEdit Object attributes.\r\nObjects were skipped\r\nABC-123 (Attribute = '')\r\nError updating Object(s)\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nUse a Condition to prevent the Action from running if the Value is already empty.","createDate":"2023-10-27T12:56:57.000+0000","comments":[{"text":"I am sad to see that this is set to merely Low priority. Some of our automation rules have become more complex because we have to check if the field is empty before trying to clear it and we prefer to keep the rules as streamlined as possible.","author":"Rick Westbrock"},{"text":"The workaround only works if you update attribute by attribute, causing massive increases in automation rules or us being required to turn of all error logging. ","author":"Krister Broman [Advania]"},{"text":"This is even more annoying if you use a branch to loop over several objects and have some optional fields you want to update. You can't build complex if-else-statements in a branch. You can either duplicate the branch or use dummy values instead of empty values.","author":"Birger Robrecht [avono AG]"},{"text":"This is related to https://jira.atlassian.com/browse/JSDCLOUD-11236","author":"Rodney Dsouza (Atlassian Certified Expert)"},{"text":"A workaround that might be acceptable to some is to use a conditional like this: \\{{if(CellPhone.isEmpty(),\"None\",CellPhone)}}\r\n\r\nThis assumes it is okay for your scenario to put in the string \"None\" as a placeholder for empty value.\r\n\r\nNote that in the above example CellPhone is a variable that is a string.\r\n\r\nI believe for an array you would use isEmpty without the parentheses.   And in other cases you check for null with something like  \\{{if(equals(variable,NULL),\"None\",variable)}}\r\n\r\nThis type of conditional is available with Cloud, not sure about Server/DC.  Documentation here: [https://support.atlassian.com/cloud-automation/docs/jira-smart-values-conditional-logic/]","author":"Rodney Dsouza (Atlassian Certified Expert)"}]},{"summary":"Setting up SLAs per priority will not work properly when different languages are involved","key":"JSDCLOUD-13560","url":"https://jira.atlassian.com/browse/JSDCLOUD-13560","type":"Bug","priority":"","description":"h3. Issue Summary\r\nSetting up SLAs per priority will not work properly when different languages are involved\r\n\r\nh3. Steps to Reproduce\r\n # Change your Atlassian Account to a language other than English at https://id.atlassian.com/manage-profile/account-preferences\r\n #* This was replicated using Brazilian Portuguese\r\n # Setup SLAs on a project with priorities shown in that language\r\n # Add a default SLA\r\n\r\nh3. Expected Results\r\nSLA follows the priorities selected\r\n\r\nh3. Actual Results\r\nSLAs will all fall under the default SLA, not matching the defined priorities\r\n\r\nh3. Workaround\r\nSet the SLA using English as your language.\r\n\r\n*Note:* when accessing the SLA using a different language than the one used to set it up, it'll also show an error besides each priority.\r\n !Screenshot 2024-01-24 at 15.36.50.png|thumbnail! ","createDate":"2024-01-24T18:43:35.000+0000","comments":[{"text":"Hi, I can confirm that this also happens with the Spanish language.\r\n\r\n*These types of errors in a Jira Cloud solution are incomprehensible.*","author":"Fernando Calvo"},{"text":"Same in French, not working","author":"Mathieu RATES"},{"text":"Please fix the issue, we have reported on January 30th 2024!!!\r\n\r\n ","author":"Fernando Calvo"},{"text":"[~sfroestl@atlassian.com] FYI","author":"Himanshu Malhotra"}]},{"summary":"JSM \"Link Space\" dropdown doesn't show all results when connected to Confluence Data Center","key":"JSDCLOUD-13373","url":"https://jira.atlassian.com/browse/JSDCLOUD-13373","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen someone searches for spaces in Link Spaces in the JSM Project linked to the on-prem Confluence site, the search doesn't work. \r\nh3. Steps to Reproduce\r\n # Create an app tunnel and app link between the cloud JSM and On-prem Confluence using this [link|https://support.atlassian.com/organization-administration/docs/configure-application-tunnels/]. \r\n # Go to JSM project > Project Settings > Knowledge Base, and then click on link space. \r\n # In the drop-down menu, try searching any existing spaces.\r\n # This is a problem if the customer has thousands of spaces. \r\n\r\nh3. Expected Results\r\n\r\nWe shall get the expected search results back. For example, Co should return all the spaces starting with Co. \r\nh3. Actual Results\r\n\r\nNo results are returned.\r\nh3. Workaround\r\n\r\nWhen the space is not listed in the dropdown due to the known bug, there is a REST API method that may work, this requires some familiarity with browser Developer Tools and the Terminal tool:\r\n * Navigate to {*}Project Settings > Knowledge Base>, and click on Link Space{*}.\r\n * Select the Confluence server and space. If the desired space is not available in the dropdown, then open *Developer Tools in your browser first* then link *any listed space* from the drop down.\r\n * In the Developer Tools' network tab, locate the linked-spaces endpoint, right-click it, and select \"Copy as cURL\".\r\n * Paste the cURL command into a text editor and modify the following parameters:\r\n ** spaceName\r\n ** spaceKey\r\n ** Set isConfluenceServer to true\r\n ** It should look something like below:\r\n{code:java}\r\n--data-raw '{\"applinkId\":\"<YOUR_APP_LINK_ID>\",\"isConfluenceServer\":true,\"spaceDetails\":[{\"spaceName\":\"<YOUR_SPACE_NAME>\",\"spaceKey\":\"<YOUR_SPACE_KEY>\"}]}'\r\n{code}\r\n\r\n * After making the above changes, paste the entire cURL command into a command-line terminal and execute it.\r\n * Refresh your webpage to check if the Confluence space is now linked.","createDate":"2023-12-01T03:49:58.000+0000","comments":[]},{"summary":"Team Managed projects - The message to unlink fields from the form is being shown when not expected causing confusion","key":"JSDCLOUD-13270","url":"https://jira.atlassian.com/browse/JSDCLOUD-13270","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n*This is specific to Team Managed projects.* \r\n\r\nAs per recent release to avoid duplicate fields from being shown in the portal\r\n\r\n[https://confluence.atlassian.com/cloud/blog/2023/10/atlassian-cloud-changes-oct-23-to-oct-30-2023#AtlassianCloudchangesOct23toOct30,2023-jira.service.management]\r\n\r\nnow, when the user links a field in the form to a Jira field that is used in the Request Type (request form), then in the form builder, the user is shown the message indicating that duplicates would be removed from the request type configuration to allow this linking and when user clicks {*}Remove Fields{*}, they are allowed to save the form.\r\n\r\n!Message-about-duplicates-form-builder.png|thumbnail! \r\n \r\n\r\nOn navigating to the Request Form now, the field is not actually removed but a message says the field will not appear in some places in the portal. So user believes the duplicate issue is taken care of. In the portal now, the field  (in this case Description field) is not shown but the field on the form is shown - which is expected behavior.\r\nSee screenshot below.\r\n\r\n  !request-form-message-about-duplicates.png|thumbnail!\r\n\r\nBut then, if the user makes any other changes in the Request Form and saves, the message is shown again saying that to avoid duplicates, the fields in the form will be unlinked.\r\n\r\nSee screenshot below:\r\n\r\n  !message-about-unlinking-duplicate-fields.png|thumbnail!\r\n\r\nThis is confusing because we want to let the users save their current request form format, but that means with the field not appearing in the portal, so no duplicates. In this case, telling them that we will be removing duplicates from the form and not allowing to save the request form changes until that is done is what makes the user go in circles.\r\n\r\n*Note* - this is not an issue in Company managed projects because in the company managed projects, when the user clicks on Remove fields in the form after linking the form field to the Jira field, the field is removed from the Request form, but it remains in the issue view. So in company managed projects, the user can make other changes to the request form and save and the message about unlinking is not shown. This appears to be an issue for team managed projects only.\r\nh3. Steps to Reproduce\r\n # From the form builder, link a form field to a Jira field that is also shown in the Request Form. Save changes and click on Remove fields in the message that pops up.\r\n # Navigate to the Request form. Make any changes and save. Now there is a message that pops up saying that the duplicate field will be removed from the form as well. \r\n\r\nh3. Expected Results\r\n\r\nWhen user has consented to remove the fields from being shown in the portal to avoid duplicates, user should be allowed to make changes in the request form and save. The intent is to not allow duplicates, which is satisfied, because the field is not shown in the portal as per the message. So, the message in the Request form to unlink fields in the form should not be shown. (this is when the customer knows and acknowledges that the field in the request form that is also linked to a form field, will not be shown in the portal)\r\nh3. Actual Results\r\n\r\nA message is shown to the user that we will be removing duplicates from the form and user is not allowed to save request form changes until that is done. So now the form field is also unlinked and user has to go back to the form to link the field.\r\n\r\nRefer video attached for the differences between company managed project behavior and team managed project behavior.\r\nh3. Workaround\r\n\r\n \r\n\r\n*Notes:*\r\n\r\nRelated to this rollout here:\r\n\r\n[https://confluence.atlassian.com/cloud/blog/2023/10/atlassian-cloud-changes-oct-23-to-oct-30-2023#AtlassianCloudchangesOct23toOct30,2023-jira.service.management]\r\n{quote}\r\nh4. No more duplicate fields on forms containing linked Jira fields\r\n\r\nAvoid fields appearing twice on request types that use forms. Now when you’re in the form builder and link a form field to a Jira field that is already in use on an associated request type, we’ll remove it for you on the request form. The same goes when configuring your request types. Form fields will be unlinked in forms that contain linked Jira fields that are duplicated. This means customers and agents will no longer have to see two of the same field on the one request.\r\n\r\n[Find out how to link a form field to a Jira field|https://support.atlassian.com/jira-service-management-cloud/docs/link-a-form-field-to-a-jira-field/], or see examples to understand more about [duplicate form fields and Jira fields|https://support.atlassian.com/jira-service-management-cloud/docs/about-duplicate-form-fields-and-jira-fields/].\r\n{quote}","createDate":"2023-11-07T01:20:40.000+0000","comments":[{"text":"This isn't just adding confusion, \r\n\r\nIt's also unlinking fields that were linked in a Form, and then deleting the linked field from the request type so it won't show up in the issue view. \r\n\r\nI use Summary and Description in most of my forms and link them to other questions so I can keep the form short.\r\n\r\nThe summary field links and works just fine, and never gets deleted because it's required. \r\n\r\nThe description field has been getting deleted from the request type screen if it's linked to a form field. The error message appears and says it'll delete the Description field from the request type (issue view). Then when I try to open an existing ticket in the agent view/customer view, the description field is nowhere to be found. ","author":"Ben Gallant"},{"text":"Thanks Ben I'll have a look into that","author":"Tyler Wang"},{"text":"Hi everyone,\r\n\r\nThis is Carlie from the JSM team. This bug is fixed and I confirmed the functionality to be working as expected. ","author":"Carlie Hamilton"},{"text":"Doesnot work for: [https://getsupport.atlassian.com/browse/CHAT-28747] ","author":"Seerat"}]},{"summary":"Error when performing transitions from the portal with invalid original/remaining estimate values","key":"JSDCLOUD-13230","url":"https://jira.atlassian.com/browse/JSDCLOUD-13230","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSame issue as https://jira.atlassian.com/browse/JRACLOUD-78327 but for portal transitions only. \r\n\r\nWhen trying to transition a request in the customer portal where the remaining estimate on the issue is not a whole number of minutes, the transition fails with error \"Specify a valid value for Remaining estimate\"\r\nh3. Steps to Reproduce\r\n # Configure time tracking using these steps [https://support.atlassian.com/jira-cloud-administration/docs/configure-time-tracking/] \r\n # Navigate to *Issues > Issue Features > Time Tracking > Edit Global Settings* and set 'Time Display Format' to *Hours* and 'Default Unit' to *Minute*\r\n # Log work for a request by navigating to *Activity > Work Log > Log Work* in issue view.\r\n # Input a remaining estimate in hours that does not equal a whole number of minutes (i.e. 3.08h) \r\n ** Setting a similar value in the \"Original Estimate\" field will also result in an error\r\n # Open the request in portal\r\n # Transition the request from the portal\r\n\r\nh3. Expected Results\r\n\r\nThe transition is successful\r\nh3. Actual Results\r\n\r\n!image-2023-10-30-19-29-39-430.png|width=499,height=45!\r\n\r\n \r\n{code:java}\r\n{\r\n    \"errors\": [\r\n        {\r\n            \"errorMessage\": \"Specify a valid value for Remaining estimate\",\r\n            \"field\": \"timetracking_remainingestimate\"\r\n        }\r\n    ],\r\n    \"reasonKey\": \"transition failed validation\",\r\n    \"reasonCode\": \"400\"\r\n}{code}\r\n \r\nh3. Workaround\r\n\r\nChange the time tracking settings \"Time display format\" to \"Pretty\"","createDate":"2023-10-30T08:31:09.000+0000","comments":[{"text":"{panel:title=Atlassian Update - October 28, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Forms data connection intermittent instability issues resulting in HTTP 500 errors","key":"JSDCLOUD-13217","url":"https://jira.atlassian.com/browse/JSDCLOUD-13217","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSetting up a Data Connection to be used with Forms occasionally runs into instability issues where the connection admin panel returns a HTTP 500 error or form fields using the data connection return no data.\r\n\r\nRelevant documentation:\r\n * [Create, edit, test, or delete data connections for forms|https://support.atlassian.com/jira-service-management-cloud/docs/create-edit-test-or-delete-data-connections-for-forms/]\r\n * [Add or unlink a data connection from a form|https://support.atlassian.com/jira-service-management-cloud/docs/add-or-unlink-a-data-connection-from-a-form/]\r\n\r\nh3. Steps to Reproduce\r\nh4. Data Connection configuration\r\n # Navigate to *Settings* > *Issues* > *Data connections*\r\n # Click Edit for an existing data connection\r\n # Move between the Connect and Test settings - can be done without an authorization token\r\n\r\nh4. Form field\r\n # Create or edit the form you want to add a data connection to. [Learn how to create or edit a form|https://support.atlassian.com/jira-service-management-cloud/docs/create-or-edit-a-form/].\r\n # Select the form field you want to connect.\r\n ** To use a data connection on a form field, the form field needs to be a multiple choice, dropdown, or radio field.\r\n # In the right hand panel, under {*}Data connection{*}, select your desired data connection.\r\n # Associate the form with a request type\r\n # Navigate to the customer portal and select the request type configured with the form\r\n # Click on the field that has the data connection\r\n\r\nh3. Expected Results\r\nh4. Data Connection configuration\r\n\r\nNo errors are seen when testing the connection\r\nh4. Form field\r\n\r\nThe field populates the data\r\nh3. Actual Results\r\nh4. Data Connection configuration\r\n\r\nThe configuration page has the following front-end error:\r\n{quote}HTTP Response: 500 ERROR\r\n\r\nUnexpected error during connection.\r\n{quote}\r\nIn the backend the following can be seen:\r\n{code:json}\r\n{\r\n    \"code\": 500,\r\n    \"headers\": [],\r\n    \"contentType\": \"application/json\",\r\n    \"itemLocations\": []\r\n}{code}\r\nScreenshot of error:\r\n\r\n!data_connection_configuration_error.png|width=349,height=180!\r\nh4. Form field\r\n\r\nNo data is returned in the drop down. Reviewing the network tab, when populating the field the following request returns an empty array:\r\n\r\nRequest:\r\n{code:java}\r\nRequest URL: https://your-site.atlassian.net/gateway/api/proforma/portal/cloudid/42a-5c0-19e044-7a2d94c2440-4f0dd9139/api/3/portal/1/requesttype/124/formchoices\r\nRequest Method: GET\r\nStatus Code: 200 OK{code}\r\nResult:\r\n{code:json}\r\n{\r\n    \"fields\": {},\r\n    \"dataConnections\": {\r\n        \"c8-5d-4cb70107def984cb9-4b660b2f-469\": []\r\n    }\r\n}{code}\r\nh3. Workaround\r\n\r\nThe issue appears to be intermittent, therefore trying the connection again or refreshing the request form where the field value is not returning resolves the issue.","createDate":"2023-10-25T17:48:01.000+0000","comments":[{"text":"Glad to see this is being addressed. It’s requiring us to perform the workaround multiple times a day. ","author":"Robby Ibrahim"},{"text":"A patch has been rolled out to resolve this.","author":"Evan Bennett"}]},{"summary":"Linked form checkbox/dropdown field on team managed project are not shared across request types","key":"JSDCLOUD-13206","url":"https://jira.atlassian.com/browse/JSDCLOUD-13206","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Team Managed Projects, If we create a custom field of *Checkbox/Dropdown* type in one Request Type and create a Form for different Request with same custom field, then the Checkbox field or drop down field does not appear in  forms configured in portal/request forms or create new issue section. \r\nh3. Steps to Reproduce\r\n * Create a *Team Managed project.*\r\n * For any *Request Type* > Create a *custom field of type* {*}Checkbox/Dropdown{*}{*}{*} > Add options > click *save changes.* Remove the field from Custom request form and save changes.\r\n * Now create a *Form* and add checkbox/dropdown field. Link this to Jira Field created in above step.\r\n * Associate the form with above request type.\r\n * Navigate to customer portal and we can see the checkbox/dropdown is loading fine.\r\n * Now create a new request type.\r\n * Create form and add checkbox/dropdown field. Link Jira custom Field created in second step.\r\n * Associate the form with New request type.\r\n * Navigate to customer portal and we can see the checkbox/dropdown is not loading.\r\n * Now navigate to New Request Type , add the custom field created of checkbox/dropdown type in customer request form > Click Save changes > Remove the field from Custom request form and save changes\r\n * Navigate to customer portal and we can see the checkbox/dropdown is loading fine.\r\n\r\nh3. Expected Results\r\n\r\nWhen the Form has Linked Jira field, it should load in Portal even if the field not added to Customer Request Form.\r\nh3. Actual Results\r\n\r\nForms loads without custom field.\r\nh3. Workaround\r\n\r\nAdd the Custom Field in Request Form and save it. Then Remove the Custom field from From Request Form and Save.","createDate":"2023-10-24T13:44:36.000+0000","comments":[{"text":"[https://getsupport.atlassian.com/browse/PCS-304506]","author":"Lee Wang"}]},{"summary":"Project Administrators unable to Change Email Request Type when a Custom Incoming Mail is Present","key":"JSDCLOUD-13108","url":"https://jira.atlassian.com/browse/JSDCLOUD-13108","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a service project has Default mail account and custom mail account for receiving requests, then project administrators are unable to change the request type of either of these accounts.\r\nh3. Steps to Reproduce\r\n # Service project should have a Default mail account and a custom mail account in the Emails Requests page of the project\r\n # Ensure that the user who is trying to make the change of the emailed request type is a project administrator\r\n # Even when the emailed request type is saved the selected emailed request will not show up and the old value would continue to show up without any errors.\r\n\r\nh3. Expected Results\r\n\r\nProject administrators should be able to change the emailed request type even if the project has both Default mail account and custom mail account. Project administrators are able to change the request type for emailed request when the project has only Default mail account.\r\nh3. Actual Results\r\n\r\nThe below error is seen in browser console when a project administrator makes changes to a service project that has a default mail account and a custom mail account\r\n{noformat}\r\n{errorMessage: \"You don't have permission to administer this service project\"}reasonCode: \"403\"reasonKey: \"sd.jsm.admin.servicedesk.common.error.permissions\" {noformat}\r\nh3. Workaround\r\n\r\nThe user should be part of jira-administrators group to make the change.","createDate":"2023-09-26T07:58:51.000+0000","comments":[]},{"summary":"Email Description Formatting Issue with Embedded Images","key":"JSDCLOUD-13058","url":"https://jira.atlassian.com/browse/JSDCLOUD-13058","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen emails contain +inline embedded images in HTML format (base64)+, the email body exceeds the character limit in Jira Service Management's Description field, resulting in improper formatting and truncation.\r\n\r\nThe message will be show in the description: *\"...This comment is truncated as it exceeds the character limit.”*\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Send an email with an inline embedded image in HTML format (base64) that causes the body to exceed the character limit.\r\n\r\nh3. Expected Results\r\nThe description should match the email body, even if it is trimmed to fit within the character limit. Inline embedded images shouldn't be included if that causes issues.\r\n\r\nh3. Actual Results\r\nThe description is truncated and appears as raw text due to exceeding the character limit.\r\n\r\nh3. Workaround\r\nCurrently, there is no workaround available. For more information on embedding images in HTML emails, refer to this article: [\"Embedding Images in HTML Email: Have the Rules Changed?\"|https://mailtrap.io/blog/embedding-images-in-html-email-have-the-rules-changed/]","createDate":"2023-09-11T15:04:16.000+0000","comments":[]},{"summary":"Fields randomly removed from Request Type configuration","key":"JSDCLOUD-13027","url":"https://jira.atlassian.com/browse/JSDCLOUD-13027","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSometimes some of the fields disappear from the Request Type configuration without any user changes to the screen, context of the field or the layout itself. \r\nh3. Steps to Reproduce\r\n\r\nThere have not been any specific steps to reproduce this behaviour yet.\r\nh3. Expected Results\r\n\r\nThe field should be available on the Request Type page. If set to visible on the configuration, the field should be available for the portal users as well.\r\nh3. Actual Results\r\n\r\nThe field is not available on the Request Form \r\nh3. Workaround\r\n\r\nAdd the field again to the affected request type and save.","createDate":"2023-09-04T06:41:59.000+0000","comments":[{"text":"Hi,\r\n\r\nJust to comment on this, we have started seeing this behaviour after we attached a proforma form to the request. This form has some of the fields linked to Jira custom field (to ensure we can see those in the issue view in JSM, and are able to JQL them in our filters)\r\n\r\nPrior to the proforma form introduction into the request - we have never seen this happenning.\r\n\r\nPlease note by proforma I'm referring to the JSM built in forms capability, which Atlassian introduced once they have bought the proforma standalone marketplace app;","author":"Boris Zozoulia"}]},{"summary":"KB Articles and Topics are failing to load in JSM when connected to Confluence Server/Data Center with \"404 Not Found\" error","key":"JSDCLOUD-12988","url":"https://jira.atlassian.com/browse/JSDCLOUD-12988","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nTopics in JSM are failing to load if the page is linked to Confluence Server\r\nh3. Steps to Reproduce\r\n\r\nFirst, link your JSM Cloud to Confluence self-hosted Server/Data Center ([Application Tunnels|https://support.atlassian.com/organization-administration/docs/connect-to-self-managed-products-with-application-tunnels/]), then carry out either of the following:\r\n # Create a topic for your help center as covered in [this article|https://support.atlassian.com/jira-service-management-cloud/docs/create-and-manage-topics-in-your-help-center/].\r\n # Save the topic configuration and page layout.\r\n # Try to access the topic.\r\n\r\nOR\r\n # [Setup JSM Knowledge Base|https://www.atlassian.com/software/jira/service-management/product-guide/getting-started/knowledge-management] on the local Confluence instance and [add Articles|https://support.atlassian.com/jira-service-management-cloud/docs/write-knowledge-base-articles/]\r\n # Search for a Knowledge Article at the customer portal\r\n # Hit Enter to see the full result list and not just the pre-populated results\r\n # Right click and open in new tab\r\n\r\nh3. Expected Results\r\n\r\nThe article should load when the user clicks on the link to that page OR Opens it at a new tab\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the UI.\r\n{noformat}\r\nNot Found\r\nThe knowledge base article could not be found.\r\n{noformat}\r\nThis happens because the faulty link does not contain the *portal ID* and correct *article ID* OR the {*}URL is missing \"servicedesk/customer\"{*}:\r\n{noformat}\r\n<site>.atlassian.net/servicedesk/customer/article/${article_id}\r\n<site>.atlassian.net/portal/${portal_id}/article/${article_id} {noformat}\r\nInstead, users should be routed to:\r\n{noformat}\r\n<site>.atlassian.net/servicedesk/customer/portal/${portal_id}/article/${article_id}  {noformat}\r\n^Note that the working URL should contain *servicedesk/customer* and both *${portal_id}* and *${article_id}*^\r\n\r\n*(!) This problem is not reproducible when linking the topics/articles to pages in Cloud. (!)*\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-08-18T19:52:42.000+0000","comments":[{"text":"*Small workaround*\r\n # Go to your JIRA Service Management project where your knowledgebase is set up.\r\n # Click on '{*}Knowledge Base{*}' in the sidebar.\r\n # Click on the article you want your users to see.\r\n # Copy the URL of the '{_}Shareable URL{_}' box.\r\n # Go to the settings for the same project.\r\n # Click '{*}External Resources{*}' in the sidebar.\r\n # Click '{*}Add link{*}'.\r\n # Select '{*}Self-help resource{*}' in the '{_}Type{_}' box, paste the copied URL into the '{_}URL{_}' box, give the article a name and description, and click '{*}Add{*}' when you've filled in all the fields.\r\n # Navigate to your Support Center portal. Click on '{*}Customize{*}' on the right and then on '{*}Edit home page layout{*}'.\r\n # If you have already created a topic, skip to the next step.\r\nClick '{*}Create Topic{*}' and give it a name (e.g. {_}Knowledge Base{_}).\r\n # Select the portal to which you've added the external resource.\r\nClick the *External Resources* tab.\r\nAdd the external resource you have created to your topic.\r\nClick *Done* and then click {*}Publish Layout{*}.\r\n # When you go to your Support Center portal, you'll see the topic and the article(s) you've provided.\r\nClicking on the article will display the article you originally intended the user to see.\r\n\r\nI hope this is of some help.","author":"Michael K"}]},{"summary":"Mandatory requirement for Attachment field is not checked from the Issue Create screen","key":"JSDCLOUD-12977","url":"https://jira.atlassian.com/browse/JSDCLOUD-12977","type":"Bug","priority":"","description":"Attachment field has been marked as *Required* in the request form within the JSM project. The field also has a red asterisk showing that it is mandatory. However when creating an issue using the Create button from within Jira and using the request type fields, the mandatory requirement is not checked. Please see screenshot below, which shows the error message for all other fields, but not the attachment field. \r\n\r\nSee Screenshot - Issue-Create-Jira-Dev-Tools.png\r\n\r\nUser is allowed to create an issue when other mandatory fields are filled in and without adding an attachment even though this field is marked as *Required.* Ticket is successfully created without errors.\r\n\r\nOn the other hand, there is an error shown when the issue is created from the portal. See attachment - Issue-create-portal-error.png\r\n\r\n \r\n\r\n{*}Workaround{*}:\r\n # It is possible to use workflow validators on the Create Issue transition to check for the attachment field as a required field.\r\n # To do this, the steps to follow are:\r\n\r\n ** Navigate to your project > Project settings > Workflows > Click to Edit the related workflow\r\n ** On Diagram mode, click in the create issue transition > *validators*\r\n ** Click on Add Validator\r\n ** Select the {*}Field required validator{*}{*},{*} and click Add\r\n ** Now, select the Attachment field and enter any error message you would like to be shown. Click Add.\r\n ** Publish the workflow ensuring to create a backup if needed.\r\nAdditional Details on setting up a validator can be found here:\r\n\r\n ** [Advanced workflow configuration - Validators|https://confluence.atlassian.com/adminjiracloud/advanced-workflow-configuration-776636620.html#Advancedworkflowconfiguration-validators]","createDate":"2023-08-17T20:57:23.000+0000","comments":[{"text":"The workaround is not ideal for all scenarios as we are using the Action button to run Automation Rules to create issues in other projects and some of the required fields are not available to be captured.","author":"Kathy Sitzberger"},{"text":"The bug is fixed so closing this ticket.","author":"Sayani Ghosh"}]},{"summary":"A project admin is not able to view the details of the older announcements when there are multiple languages configured.","key":"JSDCLOUD-12925","url":"https://jira.atlassian.com/browse/JSDCLOUD-12925","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA licensed user with an *Admin role in the JSM project* is not able to view the details of the *older announcements* when there are multiple languages configured on the service project.\r\n\r\nOpen the *Customize>Portal announcement* options from the portal.\r\nh3. !image-2023-08-03-16-00-45-214.png|width=238,height=67!\r\nh3. Steps to Reproduce\r\n # From your service project add an additional language (go to *Project settings* > *Language support* *>* {*}Add languages){*}. \r\n # Pick a user having only a JSM agent license.\r\n # Add the user with an admin role to a JSM project.\r\n # Open portal > click on Customize > portal announcement> the Message title and the message fields are blank. \r\n # Change the project role of this user to the Service desk team\r\n # Recheck the portal announcement > the Message title and the message fields have some content from the last announcement posted.\r\n\r\nh3. Expected Results\r\n\r\nThe user with an admin role in a JSM project should be able to view the previous content on the portal announcement without adding the user to Jira Administrator group.\r\nh3. Actual Results\r\n\r\nThe project admin is not able to view the details of the older announcements. However, as an agent with a service desk team role, he is able to.\r\nh3. Workaround\r\n\r\nSince the issue is due to the additional languages configured on the service project you can try the below options \r\n # Navigate to user management and add the user to Jira Administrator group or remove the additional language added to the service project.","createDate":"2023-08-03T09:05:19.000+0000","comments":[]},{"summary":"Saving the request type configuration for a request form causes fields configured in the Default issue view tab to be lost","key":"JSDCLOUD-12916","url":"https://jira.atlassian.com/browse/JSDCLOUD-12916","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you go to request type configuration for a single request type, and save it while viewing the Request Form, the fields configured in the Default tab of the issue view will be lost and moved back into the \"Hidden when empty\" section, if and only if tabs are being used for the issue view.\r\nh3. Steps to Reproduce\r\n # Configure a request type with tabs on the issue view and add some fields in the Default tab. Tabs on the issue view can be added by adding tabs on the associated screen for the issue type.\r\n # Go to the Request Form page when configuring the request type and save it (e.g. change \"Request type description\")\r\n # Now go back to the Issue View page. Some or all of the fields added to the Default tab are lost and moved out.\r\n\r\nh3. Expected Results\r\n\r\nIssue view should not change after saving the request type when viewing the Request form.\r\nh3. Actual Results\r\n\r\nSome or all of the fields added to the Default tab are lost and moved out after saving the request type when viewing the Request form.\r\nh3. Workaround\r\n * Don't use any field tabs in JSM screens.\r\n\r\n*OR*\r\n * Use only field tabs other than *Default* in JSM screens\r\n\r\n*OR*\r\n * Don't make any changes to Request Form after configuring Issue View *Description fields*\r\n\r\n*OR*\r\n * Reapply the Issue View *Description fields* configuration after any changes to Request Form\r\n\r\n*OR*\r\n * Use workflow validators to make field value required despite making the field require in field configuration","createDate":"2023-08-02T02:02:58.000+0000","comments":[{"text":"Hello, \r\nThis bug is still present... When we make a change in the Dynamic form, fields in the issue view screen are just gone...\r\n!https://scontent.fsof11-1.fna.fbcdn.net/v/t1.15752-9/403402138_1841619176255086_6917542741469932246_n.png?_nc_cat=100&ccb=1-7&_nc_sid=8cd0a2&_nc_ohc=TiHH-AAgREgAX_Pnmy5&_nc_ht=scontent.fsof11-1.fna&uss=beb3134fec21a201&odm=ZWNvbnQud29ya3BsYWNlLmNvbQ&oe2=6597FCCD&oh=03_AdRLBvu-rd-zAfx_QU5-O68o-eS-vcpJt1NCFwWduNJBPg&oe=65708FD5!","author":"Stefan Peev"},{"text":"We have this same issue with a customer that uses field tabs in JSM. Every time we make even the smallest change to wording on their forms it bumps a number of fields to hidden when empty.\r\n\r\nIt would be great if this known bug could be fixed!","author":"Joanna Cox"},{"text":"I am also having this problem and have reconfigured the Issue View screens for all my Request Types many, many, many times. Does anyone at Atlassian have a suggestion for how we can fix this problem? Or an acceptable workaround, besides \"don't use tabs\" or \"reapply the Issue View Description fields configuration after any changes to Request Form\" are made? The latter is my current workaround because my users need those fields but I have to continuously review every screen and reapply those fields when they move/are gone)? We'd really appreciate an update, thank you!","author":"Susan Waldrip"},{"text":"Hi Susan, \r\n\r\nNo unfortunately no updates. We just have this as a known bug we have to manage. Every time we make form changes to customers that use tabs in their JSM Projects the fields move and we have to move them back. Very frustrating, I hope this can be fixed soon!\r\n\r\n\r\nJo ","author":"Joanna Cox"},{"text":"Hi Jo,\r\n\r\nThanks for the response. Sorry you're having this problem, as well. I'll try removing the tabs in my Issue Views and see if that fixes the problem, will post results.\r\n\r\nSusan\r\n\r\n======== FOLLOW-UP: ========\r\n\r\nI removed the tabs and things seemed to settle down. That's unfortunate since all these extra fields on the main screen and \"other fields\" section make the Agent screen (Issue View) a lot harder to use and manage. I tried putting some on Forms for Agents to attach but then you have to link the form fields to Jira/JSM fields to be searchable, etc. Would appreciate an update from Atlassian on whether this will be addressed in the near future, thanks!","author":"Susan Waldrip"},{"text":"We too have this issue. I have had Atlassian support suggest I add my comments here, for what effect that will have on Atlassian providing any update or fix I'll never know, but there we go.\r\n\r\nIt's frustrating that the workaround is to remove tabs; these are required for a reason. \r\n\r\nEven more frustrating is the lack of response from Atlassian.","author":"Helen J"},{"text":"Hello all,\r\nMy scenario is little different. I have 7 tabs and 58 fields all together on my VIEW/EDIT screen(also issue view in request type). If all the fields in the field configuration are turned OPTIONAL or if the request type mapping is deleted, the system is working perfectly. But if all/some of the fields in the field configuration are turned REQUIRED - I could only see 3 tabs and 10-12 fields all together on my VIEW/EDIT screen(also issue view in request type). Create screen and screen configuration were always fine and no data is lost when configured/reconfigured in any ways mentioned above.\r\nIt would be great if Atlassian fixes this irritating Bug ASAP. Thanks!","author":"Koushik Kadambala"},{"text":"The given workarounds are not working for me. What is the workaround suggested in my case please?\r\nHere is my case:\r\nMy scenario is little different. I have 7 tabs and 58 fields all together on my VIEW/EDIT screen(also issue view in request type). If all the fields in the field configuration are turned OPTIONAL or if the request type mapping is deleted, the system is working perfectly. But if all/some of the fields in the field configuration are turned REQUIRED - I could only see 3 tabs and 10-12 fields all together on my VIEW/EDIT screen(also issue view in request type). Create screen and screen configuration were always fine and no data is lost when configured/reconfigured in any ways mentioned above.\r\nIt would be great if Atlassian fixes this irritating Bug ASAP. Thanks!","author":"Koushik Kadambala"}]},{"summary":"Assist exposes request types from closed projects","key":"JSDCLOUD-12900","url":"https://jira.atlassian.com/browse/JSDCLOUD-12900","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen creating tickets via Assist (Via app, or using the /assist command), the bot is displaying a list of all connected projects to all users, regardless if the user has access to the project.\r\nh3. Steps to Reproduce\r\n # Trigger the Assist bot (either on the Assist bot create button, using the /assist command)\r\n # View the dropdown with available request types.\r\n\r\nh3. Expected Results\r\n\r\nOnly projects where the Slack user has access should be displayed.\r\nh3. Actual Results\r\n\r\nAll connected projects are displayed - regardless of their customer permissions.\r\nh3. Workaround\r\n\r\nGo to Project settings > Chat > Settings and enable \"Hide project during issue creation\" and ensure +only+ authorized users are added to the request channel for the project. This will ensure no customers without access to the project via Help Center will have access to it via Assist.","createDate":"2023-07-26T17:58:16.000+0000","comments":[{"text":"The issue we experience is more serious. Customer users can not only see projects they have no authorization to access (are not part of the organization associated with those projects) but can also create tickets in projects they have no access to. I would suggest bumping the priority to Critical.","author":"Kasia Wakarecy"}]},{"summary":"Assets custom field shows \"no options\" when accessed through Customer portal ","key":"JSDCLOUD-12864","url":"https://jira.atlassian.com/browse/JSDCLOUD-12864","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe custom field lists no objects and instead shows “no-options” for unlicensed users on the customer portal when “{*}Filter issue scope (AQL)”{*} has a project name defined.\r\nh3. Steps to Reproduce\r\n # Create a custom field of type \"Assets objects\".\r\n # Now, in the Contexts and Default value > \"Assets object/s field configuration\" define the project name (Project = ABC) in the Filter issue scope (AQL)\r\n\r\nh3. Expected Results\r\n\r\nFor the customers of Project ABC, the custom field should display all options to choose from in the customer portal for unlicensed users.\r\nh3. Actual Results\r\n\r\nFor the customers of Project ABC, the custom field shows \"no options\" for unlicensed users.\r\nh3. Workaround\r\n\r\nWe can create another *\"Text\"* type attribute (maybe Project1) in the schema and copy the project name into this attribute using the value available in the actual \"Project\" type attribute for Asset objects.\r\n\r\nOnce this is done, we can then use the text type attribute created earlier in the AQL of the custom field which will fix the problem since they are not restricted in terms of only available for JSM licensed users.","createDate":"2023-07-17T11:27:18.000+0000","comments":[{"text":"Hi Team, this functionality is indeed very useful. The fact that it's not working as expected for customers also limits some implementation possibilities. We trust it can be resolved in a timely manner!","author":"Cristian Iorio"}]},{"summary":"Accessing emailed approval links through a different browser session silently fails","key":"JSDCLOUD-12812","url":"https://jira.atlassian.com/browse/JSDCLOUD-12812","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a Jira Service Management project is configured with an Approval step in their workflow and this triggers an _Approval required_ customer notification and the notification is enabled with the _Approve_ or _Decline_ buttons, using the approval link with a user account's session silently fails.\r\n\r\nThis looks to be somewhat of an edge case and a number of steps need to be in place for the issue to occur. The behavior somewhat changes on the account access to the ticket itself meaning if the account in the browser session does not have access to the ticket, the user will see a permission error in the browser.\r\n\r\nThe primary problem occurs when both users (the intended approver) and the user accessing the approver link have access to view the issue. The most likely occurrence of this issue would be where a user has two active Atlassian Accounts where one account's email address is an alias to the other therefore emails are going to the same inbox.\r\n \r\nh3. Steps to Reproduce\r\n\r\nProject setup:\r\n # Create a Jira Service Management project and configure a workflow to have an Approval workflow step\r\n # Configure the Project settings > Customer notifications > Approval required notification to allow approving or declining the approval step via the buttons\r\n\r\nUser setup:\r\n # Create an Atlassian Account for the user ie: test@example.com\r\n # Create a separate Atlassian Account for the alias ie: test+alias@example.com\r\n # Ensure both accounts have access to the project\r\n\r\nIssue setup:\r\n # Add one of the accounts to the field configured for the approval step\r\n # Ensure the other account is able to access the ticket ie they're a reporter or request participant for example\r\n # Transition the issue to trigger the approval workflow so that an email is sent to the user in the approval field\r\n\r\nBrowset setup\r\n # Ensure that you are logged into the Atlassian Account that is not the approver in your browser\r\n # When the email is received click the approve button\r\n\r\nh3. Expected Results\r\n\r\nThe user should see an error to indicate they are unable to approve the issue as they are not an approver.\r\nh3. Actual Results\r\n\r\nThe customer portal view of the ticket is loaded and no approval action is taken. This failure is silent and there is no indicator of errors to the user to suggest they are interacting with the page using the wrong account.\r\n\r\n{*}Note{*}: If the _Approvers can use 'Approve' and 'Decline' buttons without being signed in_ is selected for the approval notification settings, because there is an authenticated session in the browser, this issue still happens.\r\nh3. Workaround\r\n\r\nThe primary workaround would be to ensure the user's most appropriate account is selected for approval and they are authenticated as that user in the portal.\r\n\r\nIf there is a need for the user to have multiple Atlassian accounts that share a single inbox, copying the button link and navigating to it in a new incognito or private browser window should either approve if the user does not have to be logged in or will ask the customer to authenticate in the portal.","createDate":"2023-06-30T20:34:40.000+0000","comments":[]},{"summary":"Unable to search objects with in Assets custom field on Customer portal & Issue view","key":"JSDCLOUD-12809","url":"https://jira.atlassian.com/browse/JSDCLOUD-12809","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFailing to list options while searching for objects with in the assets custom field on the customer portal and Jira issue view\r\nh3. Steps to Reproduce\r\n # Create assets custom field and link it with the Request type.\r\n # Navigate to customer portal > Request type and try searching for objects within the custom field. We will notice no options popping up.\r\n # In the backend or splunk logs we will notice below error:-\r\n ** \r\nmessage: CMDB error response: com.atlassian.servicedesk.cmdb.client.model.CmdbErrorResponse@4ae67650[errors={},errorMessages={No matching attribute for AQL clause (\"Name\" LIKE *)}]\r\n\r\nThis happens when the filter attribute list doesn't match the object attributes  to display list\r\nh3. Expected Results\r\n\r\nThe user should be able to search for objects\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\nThe user fails to search options on assets custom field. {noformat}\r\nh3. Workaround\r\n\r\nRemoving the attribute listed from {*}\"{*}{*}Allow search filtering by these attributes{*}{*}\"{*} in the custom field configuration does address the issue.\r\n\r\nAdding it to the object attributes to display also works\r\n\r\n","createDate":"2023-06-30T08:44:56.000+0000","comments":[{"text":"Thank you for raising this bug and bringing it to our attention. After our investigation into this issue, we weren’t able to reproduce the behavior within our instances. We would like to get to the root cause of what you’re experiencing. Could you provide some more details or screenshots of the issue and configuration to help us narrow down this case?\r\n\r\n \r\n\r\nTom","author":"Thomas Barker"},{"text":"Hi.\r\n\r\n\r\n\r\nAfter further investigation into this issue, we weren’t able to reproduce the behavior within our instances. To set the right expectations, we are closing this bug to focus on our upcoming roadmap for all users. \r\n\r\nIf this is still an issue for you, please let us know.\r\n\r\nThank you for providing valuable feedback to our team!\r\n\r\nTom","author":"Thomas Barker"}]},{"summary":"Export of a large number of objects with references times out and shows an \"unresponsive\" page error or returns an export CSV of 0 bytes","key":"JSDCLOUD-12774","url":"https://jira.atlassian.com/browse/JSDCLOUD-12774","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen exporting a large number of Objects with a large number of Object References on those Objects, the Export will timeout resulting in the user seeing a page saying the Site is unresponsive or the Export CSV is of size Zero Bytes, or the error message \"upstream request timeout.\"\r\nh3. Steps to Reproduce\r\n # Create a lot of objects (19,000+) in an Object Type.\r\n # Create a lot of object references on those objects (10+ each).\r\n # Attempt to export them all from the Object Type.\r\n\r\nh3. Expected Results\r\n\r\nThe Export completes successfully.\r\nh3. Actual Results\r\n\r\nThe Export time outs and an unresponsive site page is returned or the Export CSV is Zero Bytes.\r\nh3. Workaround\r\n\r\nExport fewer objects at a time, such as with these AQL queries:\r\n{noformat}\r\nKey < ABC-5000\r\nKey > ABC-4999 AND Key < ABC-10000\r\nKey > ABC-9999 AND Key < ABC-15000\r\netc...\r\n{noformat}","createDate":"2023-06-21T14:44:16.000+0000","comments":[{"text":"I'm glad that Atlassian support understands the workaround. In the meantime of the bug being resolved, Support needs to be responsible for compiling these exports into a single export file for customers. When I have 50,000+ records I need to export, I don't have time to spend exporting and then compiling together.","author":"Nate Whitehead"},{"text":"My workaround is a scheduled export of the assets using the API with admin credentials. I use PowerShell and at the same time I create exception reports and put the files on a network folder.","author":"Erdinc"}]},{"summary":"Hyperlink is not working with single request type","key":"JSDCLOUD-12672","url":"https://jira.atlassian.com/browse/JSDCLOUD-12672","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nHyperlink is not working with single request type\r\nh3. Steps to Reproduce\r\n * in the JSM agent view\r\n * Go to Project -> Project Settings -> Request Types\r\n * Keep only one Request under the Project\r\n * Give it a description like \"{{{}Get assistance for general IT problems and questions. [music | {}}}{{{}[https://www.bestwebsite.com|https://www.bestwebsite.com/]{}}}{{{}]{}}}\"\r\n * Now go to customer portal and try to create a Request Ticket with the same request Type set above, you will not be able to navigate to [https://www.bestwebsite.com/] upon click.\r\n\r\nh3. Expected Results\r\n\r\nHyperlink should work with single request type\r\nh3. Actual Results\r\n\r\nHyperlink is not working with single request type\r\nh3. Workaround\r\n\r\nNeed to create two request type to make hyperlink work\r\n\r\n ","createDate":"2023-05-23T13:08:54.000+0000","comments":[{"text":"It is fixed now :) ","author":"Tanmay Tandon"}]},{"summary":"Unable to clear a selected object in a single-value Asset custom field in customer portal","key":"JSDCLOUD-12646","url":"https://jira.atlassian.com/browse/JSDCLOUD-12646","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nWhen you have added an asset custom field that can store a single object, once you select an object from the drop-down, you cannot clear the selected value from the customer portal\r\nh3. Environment\r\n\r\n.\r\nh3. Steps to Reproduce\r\n # Add an asset custom field which can store single values to a request type.\r\n # Open customer portal and go to this request type.\r\n # Navigate to the asset custom field added in the first step and select an object from the drop-down.\r\n # Let's say, you now want to clear the selected object and want to leave the field empty\r\n\r\nh3. Expected Results\r\n\r\n_You shall be able to do so similar to other fields like single select_\r\nh3. Actual Results\r\n\r\n_There is no way to clear the selected value. You would have to refresh the page._\r\nh3. Workaround\r\n\r\n_Make the asset field multi-value to get an option to remove the selected object. You can then configure *Field has single value* [validator|https://support.atlassian.com/jira-cloud-administration/docs/configure-advanced-issue-workflows/#Validators] in the *Create issue* transition of your workflow associated with the request type. This validator will ensure that only a single value is selected in the multi-value field._\r\nh3. Notes","createDate":"2023-05-17T08:03:56.000+0000","comments":[]},{"summary":"Checkbox field not reset post ticket creation in portal ","key":"JSDCLOUD-12636","url":"https://jira.atlassian.com/browse/JSDCLOUD-12636","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen we add *Checkbox* field in Request Form, after ticket creation and go back to Request Form , checkbox value is not cleared. It retained the last chosen value.\r\nh3. Steps to Reproduce\r\n # Create *Checkbox* type Custom field and add it to Request Form.\r\n # Navigate to Request Form in the portal. Fill all required fields and also select some values in my checkbox custom fields.\r\n # Submit the request and Ticket will be created.\r\n # Click *Back* button in the browser immediately after ticket creation.\r\n # The checkbox custom fields are already filled with the values of my previous request. Other fields are not pre-selected.\r\n\r\nPFA Recording with details.\r\nh3. Expected Results\r\n\r\nCheckbox field should be cleared like other fields.\r\nh3. Actual Results\r\n\r\nCheck box values are retained from previous requests.\r\nh3. Workaround\r\n\r\nSelect the correct value required in the custom field.","createDate":"2023-05-12T17:25:30.000+0000","comments":[{"text":"{panel:title=Atlassian Update - May 11, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"The default approvers set through the preset value of the request form won't display some approvers","key":"JSDCLOUD-12631","url":"https://jira.atlassian.com/browse/JSDCLOUD-12631","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf the context field of the custom field *Approvers* (multi-user picker field) is empty and the default approvers of this field are set through the preset values option in the request form of the request type, the *Approvers* field won't display some approver names when we try to create a request for this request type from the agent view. But it works fine if we create requests through the customer portal.\r\n\r\nIf the context field in the *Approvers* field has a default value, only that user can be set as the default approver.\r\nh3. Steps to Reproduce\r\n # Edit the context of the custom field *Approvers* to have no default value\r\n # Set a default approver or approvers for any request type under Project Settings > Request Type > Approvers using _Use preset value and hide from portal_ option.\r\n # Try to create a request for that request type from the agent view\r\n\r\nh3. Expected Results\r\n\r\nWhen we try to create a request from the agent view, we can see all the users added as approvers in the \"Approvers\" field\r\nh3. Actual Results\r\n\r\nWhen we try to create a request from the agent view, not all the users added as approvers are listed in the \"Approvers\" field\r\nh3. Workaround\r\n # Suggest the agents create requests through the request portal or\r\n # Create an automation rule for the request type to add the approvers in the approval field after the creation of the request.","createDate":"2022-10-28T08:51:38.000+0000","comments":[]},{"summary":"Portal Announcement message appears Empty for Agents when language support is added.","key":"JSDCLOUD-12608","url":"https://jira.atlassian.com/browse/JSDCLOUD-12608","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the User is added as Project Admin and edit the Portal Announcement, message fields appear Empty.  \r\nThis is happening only when additional language is added in Language Support and additional language is not Available to Customers.\r\nh3. Steps to Reproduce\r\n # Add a user as Project Admin.\r\n # Navigate to Language Support > Add languages > Make Sure Available to Customers is toggled OFF.\r\n # Login as Project Admin > Navigate to Project Settings > Portal Settings > Click on Manage portal Announcements > Click Portal Announcement\r\n # Message Title and Message appears Empty even though the announcements are already added.\r\n\r\nh3. Expected Results\r\n\r\nUsers should be able to edit the existing Announcement without any issue.\r\nh3. Actual Results\r\n\r\nAnnouncement message appears empty for the agents.\r\nh3. Workaround\r\n * Either we need to make one of the additional language available to Customer.\r\n * Or remove all the additional languages from Project.","createDate":"2023-05-04T13:12:08.000+0000","comments":[]},{"summary":"Labels are visible for JSM customers on descriptions of each knowledge base on a customer portal","key":"JSDCLOUD-12576","url":"https://jira.atlassian.com/browse/JSDCLOUD-12576","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nLabels are visible for JSM customers on descriptions of each knowledge base on a customer portal.\r\nh3. Steps to Reproduce\r\n # Create knowledge bases with labels\r\n!AtlassianSupport 2023-04-27 at 11.16.03.png|width=300!\r\n!AtlassianSupport 2023-04-27 at 11.15.40.png|width=300!\r\n # Navigate to the service project > [Knowledge base]\r\n # Create a category and add the pages created in Step 1 to it\r\n # Navigate to the customer portal and access the knowledge base category\r\n # The pages added in Step 3 are displayed\r\n\r\nh3. Expected Results\r\n\r\nThe description of the knowledge base is displayed without any labels under the page title.\r\nh3. Actual Results\r\n\r\nThe description of the knowledge base is displayed with labels under the page title.\r\n!AtlassianSupport 2023-04-27 at 11.16.41.png|width=300!\r\nh3. Workaround\r\n\r\nRemoving labels from pages should resolve the issue, but it's not ideal because the labels are used for the feature: [Only show articles labeled|https://support.atlassian.com/jira-service-management-cloud/docs/how-do-you-automatically-present-articles-to-customers-in-a-request/]","createDate":"2023-04-27T02:29:40.000+0000","comments":[{"text":"{panel:title=Atlassian Update - May 1, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"All workflow status are visible customer on portal to filter the request","key":"JSDCLOUD-12486","url":"https://jira.atlassian.com/browse/JSDCLOUD-12486","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAll workflow statuses are visible for customers on the portal to filter the request\r\nh3. Steps to Reproduce\r\n # Navigate to Portal > Requests\r\n # Click on the Status drop-down and all the statuses project-wise are listed.\r\n\r\nh3. Expected Results\r\n\r\nThe internal statuses should not be visible on the portal.\r\nh3. Actual Results\r\n\r\nCustomers should be able to control the statuses that are allowed to be displayed in the portal.\r\nh3. Workaround\r\n\r\nNone at the moment","createDate":"2023-04-04T07:12:15.000+0000","comments":[]},{"summary":"Request types hidden in portal still appear on the \"My Request\" filter","key":"JSDCLOUD-12484","url":"https://jira.atlassian.com/browse/JSDCLOUD-12484","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUnable to hide request types hidden from the Requests page of the portal.\r\nh3. Steps to Reproduce\r\n # Navigate to Request Types under a project and hide a Request Type\r\n # Navigate to Portal > Requests\r\n # Click on the Request Type drop-down and all the request types are listed.\r\n\r\nh3. Expected Results\r\n\r\nThe Request types hidden on the portal shouldn't be visible.\r\nh3. Actual Results\r\n\r\nThe request type hidden on the portal is still available for selection.\r\nh3. Workaround\r\n\r\nNone at the moment","createDate":"2023-04-04T06:54:21.000+0000","comments":[]},{"summary":"Preset values on the request form don't all display when creating an issue internally","key":"JSDCLOUD-12465","url":"https://jira.atlassian.com/browse/JSDCLOUD-12465","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using a User Picker (multiple users) custom field and having preset values filled in on the Request Types Request Form the list is truncated when creating an Issue and after the issue is created. This also seems to be related to the size of the screen you are creating the Jira Issue from and how much scale that user picker field has to display those preset users.\r\nh3. Steps to Reproduce\r\n # Navigate to a Service Projects Project Settings > Request Types\r\n # Select any Request Type and select the Request Form Tab\r\n # Add a field you know is a User Picker (multiple users field), such as Approvers to the Request Form, and select 'Use preset value and hide from portal'\r\n # Fill out for example 10 users as approvers in the Approvers field\r\n # Add that field to the issue View as a Description field\r\n # Create a new Jira issue with that Request Type. Only a few users will display in that Create Issue Screen and not the whole list\r\n\r\nh3. Expected Results\r\n\r\nAll preset users defined in that user picker field are available and show in both the Request Form and Issue View of a Request Type when creating an Issue.\r\nh3. Actual Results\r\n\r\nOnly a few preset users are displayed in the user picker field on the Issue View when creating an Issue internally.\r\nh3. Workaround\r\n\r\nAdd new approvers after the Issue is Created.","createDate":"2023-03-29T18:31:02.000+0000","comments":[{"text":"For starters, thank Christian Beaulieu and Atlassian Support for a timely response to my posted issue.  Much appreciated!\r\n\r\nChristian's summary seems to capture the essence of the issue.  To be clear, we are seeing different results when we create the request from the Portal versus Agent View.  When creating this request from the portal (on a request type configured as suggested by Christian), all defaulted approvers are included in the User Picker field, as expected.  But, when creating the same request using the \"Create\" button in Agent View, we only see a subset of the approvers get included in the same field.  So, same request type but different results depending on where the request originated.  \r\n\r\nFeel free to ask me for any additional information, as needed.\r\n\r\nThanks much!","author":"Gordon Moss"},{"text":"{panel:title=Atlassian Update - March 28, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"EPIC Name field shows required in customer portal on some Jira Sites","key":"JSDCLOUD-12401","url":"https://jira.atlassian.com/browse/JSDCLOUD-12401","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEPIC Name Field Shows as a mandatory field on the portal even though in field configuration it is an Optional \r\nh3. Steps to Reproduce\r\n # Create a Jira Service Management Project \r\n # Add a new Issue Type names EPIC \r\n # Assign this EPIC Issue Type to a Request Type \r\n # Login to the customer portal of this project \r\n # Navigate to this Request Type \r\n\r\nh3. Expected Results\r\n\r\nEPIC name field should be an optional Field \r\nh3. Actual Results\r\n\r\nEPIC name field is shows as an Mandatory Field \r\nh3. Workaround\r\n\r\nThe issue is not always reproducible , expect for some Jira Sites. \r\nThere is no current known workaround , recommendation is to not use EPIC issue type as its purposed to be used under Jira Software Projects only. ","createDate":"2023-03-14T14:16:59.000+0000","comments":[{"text":"Impacted Site : [https://propertyguru.atlassian.net|https://propertyguru.atlassian.net/] ","author":"Aslam K M"},{"text":"{panel:title=Atlassian Update - March 13, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Assets Automation: Unable to select Object Type/Schema in any Assets action if the schema has many Object Types or Schemas","key":"JSDCLOUD-12354","url":"https://jira.atlassian.com/browse/JSDCLOUD-12354","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn The Create Object action, when we select an object type, the object type gets cleared from the selection automatically after 1-2 seconds. However, on the left panel, we still see the old object type as a selection.\r\n\r\nThis only affects Schemas with a large number of object types (more than 30).\r\n\r\nIt is only an UI issue - the object type remains selected internally and the automation rule should still continue work.\r\n\r\n{*}Note{*}: {color:#172b4d}+This behaviour will be the same for when you select an Object Schema in a \"Lookup objects\" actions.+{color}\r\nh3. Steps to Reproduce\r\n # Create a schema with more than 30 object types\r\n # Create a rule containing the Create object action.\r\n # After opening the Object type dropdown, notice that not all object types are displayed. The list returned is only a subset of all object types in that schema.\r\n # Search for an object type that is NOT in the initial list and select it.\r\n\r\nh3. Expected Results\r\n\r\nObject type should remain selected.\r\nh3. Actual Results\r\n\r\nObject type disappears from the UI.\r\nh3. Workaround\r\n\r\nIgnore the UI, the object type is actually still selected internally and the automation rule should still work.","createDate":"2023-03-12T23:57:35.000+0000","comments":[{"text":"Confirm this is happening for me - while it still has the Object type selected, I cannot view or select attributes for that object, seemingly due to the Object type disappearing from the dropdown UI.\r\n\r\nUPDATE: it will work sporadically (with it disappeared from the UI), but I had to refresh the automation rule and keep trying until the attributes became available.","author":"Paul Bourque"},{"text":"Can anyone address this? We have noticed the same behavior in automation, when using Lookup objects action and when trying to select schema (in case there are more than 25 schemas in total). It seems you can select the desired schema and save the rule, but once you save it \"Schema\" option within the action will be 'cleared' (although, the rule will still work).","author":"Tomislav Tobijas"},{"text":"h3. Use Case: Automated Creation of IT Assets in Jira Cloud Automation\r\n\r\n{*}Description{*}:\r\nAn IT administrator seeks to streamline the IT asset management process by automating the recording of new devices—such as laptops, servers, and peripherals—directly into a centralized Configuration Management Database (CMDB) within Jira. By leveraging Jira Cloud Automation, the administrator establishes an automation rule designed to add new asset objects to the CMDB in response to specific events or actions. This initiative aims to minimize manual effort and establish a consistent, centralized data source for all IT assets. However, the CMDB in Jira features an extensive array of object types (exceeding 30), encompassing a diverse range of devices, including monitors, routers, printers, and mobile devices, each with unique requirements.\r\nh4. Objectives of the Use Case:\r\n * {*}Efficiency Improvement{*}: Automating the creation of IT assets not only saves time but also reduces the need for manual data entry.\r\n * {*}Data Consistency{*}: Automated processes help mitigate the risk of errors or discrepancies in the recorded information.\r\n * {*}Transparency and Availability{*}: Centralized, always-up-to-date data provides IT teams with enhanced visibility, facilitating quicker and more informed decision-making.\r\n * {*}Process Optimization{*}: Through automation, assets can be seamlessly added or updated, such as when a device is inventoried, relocated, or processed at various stages of management.\r\n\r\nh3. Steps to Create the Automation Rule:\r\n # {*}Rule Creation{*}:\r\n\r\n ** The IT administrator initiates the process by accessing Jira Cloud Automation and crafting a new rule utilizing the *\"Create Object\"* function.\r\n ** This rule is specifically designed to be triggered upon the receipt of a new ticket related to IT inventory for a device.\r\n # {*}Object Type Selection{*}:\r\n\r\n ** In the *\"Create Object\"* section, the administrator opens the dropdown menu to select the appropriate object type, such as \"Laptop\" or \"Router.\"\r\n ** Due to the CMDB schema containing over 30 object types, the dropdown menu only displays a limited subset of these objects initially. As a result, the desired object type must be searched manually.\r\n ** Unfortunately, once an object type is selected, it is removed from the list instantly, rendering it impossible to select again, further complicating the process.\r\n\r\nh3. Request for Action:\r\n\r\n[~7260236ab89d] , please raise the priority for this incident. This is not merely a medium issue; the entire functionality is compromised and non-operational. Your prompt attention to this matter is crucial to restoring effective asset management capabilities.\r\n\r\nThank you!","author":"Felix Haverkamp"},{"text":"This seems like a serious flaw in a basic functionality connecting JSM and the Asset area. Being unable to save the item selected in the Object type list, but having it go to another item is beyond annoying!\r\n!image-2024-11-11-11-29-56-049.png!","author":"Daniel Vest"}]},{"summary":"User picker field in the customer portal experiences slow performance","key":"JSDCLOUD-12317","url":"https://jira.atlassian.com/browse/JSDCLOUD-12317","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe user picker field can experience performance degradation within the Jira Service Management Customer Portal, causing delays to load the list of available users in the field.\r\n\r\nThis looks to impact both system fields such as _Reporter_ as well as User Picker custom fields added to the form.\r\n\r\nThe behavior has been observed in both company-managed and team-managed projects.\r\nh3. Steps to Reproduce\r\n # Create a Jira Service Management team-managed project\r\n # Set the project to Private\r\n # Add a group to the project for access with a large number of users (this has been noted with ~18,000 users for example)\r\n # Navigate to the Customer Portal for the project and load a request form\r\n # The reporter field will have a spinning icon waiting 15 - 30 seconds to load the list of users available\r\n\r\nh3. Expected Results\r\n\r\nThe user list is returned in a reasonable amount of time.\r\nh3. Actual Results\r\n\r\nLoading can take ~ 15 to 30 seconds for the user list to display.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-03-01T18:10:19.000+0000","comments":[{"text":"When do we expect this bug to be assigned?  Sev 2 Major seems like it should have been picked up since this was created back in March 2023.","author":"Eugene B"},{"text":"Our company was told that Atlassian cloud would be able to support the scale of our instance prior to migrating, but instead we find that due to the size of our instance this important feature is slow to the point of inusability. When will fixing this be prioritized?","author":"Brandon T. Wood"},{"text":"We ran into this problem and found what looks like to be a large oversight when developing the user query.\r\n\r\nWhen you @ mention user in the standard issue view, the query has a 'maxResults' flag and is quite responsive. When you @ mention a user in the portal view, it's a completely different query and does NOT have a 'maxResults' flag which I'm certain is causing the huge delay in user lookups.\r\n\r\nI will admit I don't know how complicated the code is for JSM, or what spaghetti code is holding it together, but if a 'maxResults' flag could be added to this query, it would probably solve these problems.","author":"Justin N."},{"text":"This is becoming a significant impediment to our global adoption of the tool.  Pretty please, with extra toppings, bump this up the list.","author":"Chrissy Clements"},{"text":"Hi all, thank you for the waiting. We have an improvement ready to be rolled out, and the plan is to start to roll out in a few days.","author":"Jason Huang"},{"text":"Hi all, the rollout of the improvement has been completed. We will continue to monitor the change for a few days before closing this ticket. Thanks for your patience.","author":"Jason Huang"},{"text":"The performance of user pickers on our instance has significantly improved! The rolled out improvement seems to have helped a lot :)","author":"Luke Collins"},{"text":"Our monitoring showed that the chance of long response time has been significantly reduced.\r\n\r\nThis issue is now closed.","author":"Jason Huang"}]},{"summary":"URL does not contain the portal ID when navigating to a KB article from another KB article via hyperlink","key":"JSDCLOUD-12313","url":"https://jira.atlassian.com/browse/JSDCLOUD-12313","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssue occurs when you navigate to a KB article from another KB article via hyperlink\r\nURL does not contain the portal ID when navigating to a KB article from another KB article via hyperlink\r\n\r\nExample incorrect URL: [https://foo-org.atlassian.net/servicedesk/customer/article/642959422.|https://atendimento-totvs.atlassian.net/servicedesk/customer/article/642959422.]\r\n\r\nCorrect URL for the same page: [https://foo-org.net/servicedesk/customer/portal/7/article/642959422.|https://atendimento-totvs.atlassian.net/servicedesk/customer/portal/7/article/642959422]\r\n \r\nThe hyperlink is actually for [https://foo-org.atlassian.net/plugins/servlet/servicedesk/customer/confluence-server/portal/7/shim/pages/viewpage.action?pageId=642959422.|https://atendimento-totvs.atlassian.net/plugins/servlet/servicedesk/customer/confluence-server/portal/7/shim/pages/viewpage.action?pageId=642959422] \r\n\r\nThis is somehow resolving into an incorrect URL (see above).\r\nh3. Steps to Reproduce\r\n\r\nBehavior observed in customer instance.\r\n\r\nI am unable to replicate the behavior observed in the customer's instance. \r\n # Spin up a confluence server, same version as customer.\r\n # Apply updates to system apps as needed/prompted\r\n # Configure application tunnel \r\n # Configure application link between JSM and Confluence instances using tunnel established in step 4\r\n # Create a space on Confluence\r\n # In this space create a parent page with a couple of child pages\r\n ## One child page should be copied\r\n ## Another child page should have a child of its own\r\n ## One child page should be blank (to eliminate issues with other macros)\r\n # In a JSM project, link to and configure the KB\r\n # In the help center or portal, display the KB pages \r\n # In my instance, all children links displayed and worked as expected.\r\n\r\nh3. Expected Results\r\n\r\nUsers should be able to navigate via hyperlink to any KB\r\nLinks will be displayed as part of project's KB and work\r\nLinks from child pages will work\r\nh3. Actual Results\r\n\r\nLinks do not work\r\nThe URL when resolved, is missing the portalID\r\nh3. Workaround\r\n\r\nSearching for the same article (that does not work when hyperlinked) in the search bar and opening it from the search results will work.","createDate":"2023-03-01T05:00:03.000+0000","comments":[]},{"summary":"Form Builder: In preview mode an Assets Custom Fields doesn't utilize the Filter Issue Scope query for the provided options.","key":"JSDCLOUD-12243","url":"https://jira.atlassian.com/browse/JSDCLOUD-12243","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen creating a Form that has Assets Custom Fields on it, the Preview Pane on the Form Builder doesn't use the Filter Issue Scope query for the valid options when previewing the form.\r\n\r\n \r\n{panel:title=Update 16 Feb 2023 - This issue won't be fixed}\r\nThis issue only affects the Form Builder Preview, the Filter Issue Scope works when a form is attached to an issue (or being used to create an issue). The reason the preview doesn't work is that the form is not associated or attached to a specific issue/request type. We are not planning on fixing this issue.\r\n\r\nWork around: To test this is working, you will need to actually goto to the relevant portal page, or attach the form to an existing issue.\r\n\r\nThanks,\r\n\r\nSimon - PM for JSM Forms\r\n{panel}\r\n \r\nh3. Steps to Reproduce\r\n # Create a Form.\r\n # Add 2 Assets Custom Fields to the Form and link them to the appropriate Custom Fields\r\n # Modify one of the Assets Custom Field's configurations to use input from the other to determine the valid Objects\r\n # Set the other Custom Field's value in the Preview\r\n # Try to set the modified Custom Field's value.\r\n\r\nAs a more detailed example, have 2 Custom Fields in your Jira Site:\r\n # Affected Applications\r\n # Affected Servers\r\n\r\nConfigure Affected Applications to be filtered based on what is chosen in Affected Servers in the Custom Field's Configuration via the Filter Issue Scope.\r\n\r\nPut both of these Fields on a Form, linked to the Custom Fields, and navigate to the Preview Pane.\r\n\r\nSelected a Server in Affected Servers.\r\nSee that the Applications listed in Affected Applications are all Applications, not just the ones applicable to the Server that was selected.\r\ni.e. Filter Scope is being applied, but Filter Issue Scope is not.\r\nh3. Expected Results\r\n\r\nThe dropdown only shows valid options for the 2nd custom field.\r\nh3. Actual Results\r\n\r\nThe Assets Custom Field lists all possible options for the 2nd custom field, regardless of the 1st's value.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-02-09T17:51:50.000+0000","comments":[{"text":"This is intended behaviour.\r\n\r\nFilter Issue Scope is only available in the context of where an issue type is available. In the Form Builder, there is no issue type, as the form could be used on any issue type, so Filter Issue Scope is ignored. However, Filter Scope is still applied.\r\n\r\nFilter Issue Scope will be applied when viewing an issue or creating an issue, so this behaviour only affects the Form Builder.","author":"Ryan Fallah"},{"text":"Please see the update provided in the description.\r\n\r\nWe will not be fixing this issue.","author":"Simon Herd"}]},{"summary":"Approvers Field ( Multi User Picker Field )  does not show the Preset and Hidden Values ","key":"JSDCLOUD-12192","url":"https://jira.atlassian.com/browse/JSDCLOUD-12192","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * Custom Field User Picker ( Multiple Users ), Does not show the Preset and Hidden Values, as we set in the Request Forms/Request Type Page in the Jira Issue View. (Even when we enable: Use Request Type Fields)\r\n\r\nh3. Steps to Reproduce\r\n\r\n_You can either use the predefined approvers field or create a new custom approvers field._\r\n\r\nCreate a Custom Field\r\n # Settings ( Cog Wheel ) > Custom Fields.\r\n # Create a new - Multi User Picker Field\r\n # Apply it to any screen, preferably a Approvals Workflow Screen.\r\n\r\nAdd a Preset Value\r\n # Go to the associated project of that screen applied in Step 3. \r\n # Project Name > Project Settings > Request Types.\r\n # Open the associated screens Request Type , Request Form Page.\r\n # Drag the field you created to the View Screen and then Add a Value after checking \r\n\"Use Preset Value and Hide from Portal\" then Click Save.\r\n\r\nSearch for the Preset Value\r\n # Now create a new issue using the same Issue and request type\r\n # Check to see if you are able to see the value of the custom field preset\r\n # Check \"Use Request type fields\" new feature and see behaviour.\r\n\r\nh3. Expected Results\r\n\r\nShould show the Preset and Hidden Value\r\nh3. Actual Results\r\n\r\nThe preset and hidden value that you entered is above Steps is not seen.\r\nh3. Workaround\r\n * Create an automation rule for the request type to add the approvers in the approval field after the creation of the request.","createDate":"2023-01-26T16:23:03.000+0000","comments":[{"text":"Hi,\r\n\r\nthis bug strongly affects my customer. Unfortunatelly the workaround with automation would take a lot of time as the customer has many request types with \"multi user\" custom field. It would be very helpful to have this bug fixed. \r\n\r\nThank you for your consideration to fix this bug. \r\n\r\nBest regards, \r\n\r\nKlara","author":"Klara Bras"}]},{"summary":"When profile language is non-English, the create modal shows Request types in English","key":"JSDCLOUD-12175","url":"https://jira.atlassian.com/browse/JSDCLOUD-12175","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nTranslated custom fields are not displayed in Create issue (Modal) when translated fields are set (matching the user's profile set language value).\r\nh3. Steps to Reproduce\r\n # Select a non-English language in your [profile settings|https://id.atlassian.com/manage-profile/account-preferences?ref=jira&src=personalsettings].\r\n # Click Create, select a Project with language support setup for the language used in the profile settings. \r\n # Select an existing Request Type (With translated fields setup for that request type)\r\n # Select Use request type fields\r\n\r\nh3. Expected Results\r\n\r\nThe Custom Fields with translations should be displayed in the language the user has set in their profile (Matching the translated fields in Project settings > Language support > [Language]), example screenshots:\r\n\r\n*Personal Profile:*\r\n\r\n\r\n!image-2024-05-16-08-15-22-996.png|width=431,height=230!\r\n\r\n*Language Options for Data Change / Modificación de datos Request Type:*\r\n\r\n!image-2024-05-16-08-17-17-574.png|width=560,height=262!\r\n\r\n*Create Issue Modal:*\r\n\r\n!image-2024-05-16-08-20-34-985.png|width=486,height=443!\r\nh3. Actual Results\r\n\r\nThe custom fields below the option 'Use request type fields' are displayed in English.\r\nh3. Workaround\r\n\r\nNone at this time.","createDate":"2023-01-23T02:56:49.000+0000","comments":[{"text":"!2023-01-17 13_20_51-ITSM Service Desk - Anfragetypen - Serviceprojekt - Jira_2023-01-17T12_25_06.141Z (1).png!","author":"Jane Parry"},{"text":"No worries [~psujono] ! Is there any update on this?","author":"Jane Parry"},{"text":"{panel:title=Atlassian Update - April 17, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Using custom text to hide email signatures breaks inline images that are below the custom text line","key":"JSDCLOUD-12002","url":"https://jira.atlassian.com/browse/JSDCLOUD-12002","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe custom detection for email signatures allows Jira administrators to configure custom texts or special characters for the Jira mail handler to detect email signatures as documented here: [Hide email signatures from the issue view and portals|https://support.atlassian.com/jira-service-management-cloud/docs/hide-email-signatures-in-the-issue-view-and-portals/#Custom-detection]\r\n\r\nHowever when an inline image is added below the custom text, the image is not added as an attachment or processed, showing an error for {_}Preview unavailable{_}.\r\nh3. Steps to Reproduce\r\n # Navigate to Settings > Products > Email requests.\r\n # Under the _Hide email signatures in issues and portals_ section, mark {*}Custom detection{*}.\r\n # Add a text such as {_}Regards,{_}.\r\n # Send an email to a Jira Service Management project's mail handler with the body containing the word _Regards,_ and an inline image underneath it.\r\n # Open the created ticket, which should have a Signature section within the Description area. The image will appear broken and no attachments will have been added to the ticket.\r\n\r\nh3. Expected Results\r\n\r\nThe inline image under the signature demarcation is processed and added as an attachment.\r\nh3. Actual Results\r\nThe attachment is not processed and a broken thumbnail is displayed within the signature section of the Description:\r\n\r\n!broken_signature_attachment.png|width=454,height=229!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-11-15T20:21:49.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Ashish from the JSM team. I have great news that we have fixed this issue. Thank you for your patience! \r\n\r\nIf this is still an issue for you, please let us know. Thank you again for providing valuable feedback to our team!\r\n\r\nBest,\r\n\r\nAshish","author":"ajaiswal"}]},{"summary":"Cache issue - Portal groups newly created are not immediately displayed and deleted portal groups continue to be displayed","key":"JSDCLOUD-11993","url":"https://jira.atlassian.com/browse/JSDCLOUD-11993","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere seems to be a cache issue in the Project settings Request Types and Portal Settings > Portal groups screens.\r\n\r\nThis causes newly created portal groups to not be displayed immediately after navigating to the Edit Portal Groups option on the request type. The newly created portal group is visible after refreshing the browser.\r\n\r\nSimilarly a portal group deleted from the portal settings > portal groups screen is visible in the Request types > Edit Portal groups option. Error is however displayed when the deleted group is chosen. This also disappears only after browser is refreshed.\r\n\r\nRefresh should happen automatically on navigating to the screen from another screen on page load and should not need manual refresh.\r\n\r\nIssue was observed and video recorded on Chrome browser. Issue also seen in incognito mode.\r\nh3. Steps to Reproduce\r\n\r\n*Issue #1:*\r\n # Create a new portal group by navigating to Project Settings > Portal Settings -> Portal groups; Enter a name and associate a request form and save.\r\n # Navigate to Request Types screen under Project Settings. Click on Edit Portal groups from the Request type -> More options -> Edit portal groups. \r\n # Newly created group that was also associated to a request form earlier is not seen here. Click cancel.\r\n # Refresh the browser.\r\n # Now click on More options > Edit Portal groups. The group created in Step 1 is seen now.\r\n\r\n*Issue #2:*\r\n # Create a new portal group using Request types -> More options -> Edit portal groups -> Create group. Click Save.\r\n # Navigate to Portal Settings -> Portal groups and delete the group created earlier and confirm deletion.\r\n # Navigate back to Request types -> More options -> Edit portal groups, and the recently deleted group remains as an option.\r\n # On saving after selecting the deleted group error message 'This group does not exist' is seen. \r\n # Click cancel and refresh the browser.\r\n #  More options -> Edit portal groups, and the recently deleted group is not shown now.\r\n\r\nPlease see attached video.\r\nh3. Expected Results\r\n\r\n*Issue #1:*\r\n\r\nThe newly created Portal group should be shown when the user navigates to the Request Types > More Options > Edit Portal groups screen, without needing a manual browser refresh.\r\n\r\n*Issue #2:*\r\n\r\nThe deleted portal group should not be shown as an option in Request Types > More Options > Edit Portal groups screen when the user navigates to this screen.\r\nh3. Actual Results\r\n\r\n*Issue #1:*\r\n\r\nThe newly created Portal group is not shown when the user navigates to the Request Types > More Options > Edit Portal groups screen, unless a manual browser refresh is done.\r\n\r\n*Issue #2:*\r\n\r\nThe deleted portal group continues to be shown as an option in Request Types > More Options > Edit Portal groups screen when the user navigates to this screen until a manual refresh is done in the browser.\r\nh3. Workaround\r\n\r\nPerform a browser refresh to refresh the screen.","createDate":"2022-11-10T08:09:11.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Duy from the Jira Service Management team. Thank you for raising this bug and bringing it to our attention. After examining this issue, we weren’t able to reproduce the behavior within our instances. To set the right expectations, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management users.\r\n\r\nIf this is still an issue for you, please let us know. Thank you again for providing valuable feedback to our team!\r\n\r\nBest,\r\n\r\nDuy","author":"Duy Nguyen JSM"}]},{"summary":"Transitioning issues from \"Any Status\" to \"Itself\" from the queue causes an error","key":"JSDCLOUD-11916","url":"https://jira.atlassian.com/browse/JSDCLOUD-11916","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you have a workflow transition where you can \"move\" issues from \"Any Status\" to \"Itself\", you cannot use this transition from the Project Queue view (bulk transition) for any issue.\r\n\r\nThe use case for this setup:\r\n\r\nWhile having different queues within the same project, users might need to move the tickets between the queues, and change/add values for different fields and components. With that, having a transition from any status to itself and adding a transition screen for that helps to address this requirement.\r\nh3. Steps to Reproduce\r\n # Edit the workflow for a given Issue/Request Type and add a transition from \"Any Status\" to \"Itself\":\r\n\r\n!image-2022-10-12-11-45-44-289.png|width=319,height=317!\r\n\r\n!image-2022-10-12-11-44-40-920.png|width=406,height=172!\r\n # Access the JSM Project > Queues > Select an issue > hit the \"Transition\" Button > Select the self-transition we previously configured:\r\n\r\n!image-2022-10-12-11-48-10-637.png|width=451,height=185!\r\nh3. Expected Results\r\n\r\nThe ticket should be transitioned to the same status\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the logs:\r\n{noformat}\r\nstack:  java.lang.NullPointerException: stepDescriptor\r\n\tat java.util.Objects.requireNonNull(Unknown Source)\r\n\tat com.atlassian.jira.workflow.JiraWorkflowUtils.getLinkedStatusId(JiraWorkflowUtils.java:31)\r\n\r\n    ext:  {  [-]  \r\n      err:  {  [-]  \r\n        location:  com.atlassian.jira.workflow.JiraWorkflowUtils:getLinkedStatusId  \r\n        type:  java.lang.NullPointerException  \r\n      }  \r\n      jira:  {  [-]  \r\n        request:  {  [-]  \r\n          id:  c768300d141ed8bb87a9b77a0af5d16a  \r\n          ipaddr:  54.81.76.127  \r\n          method:  POST  \r\n          normuri:  BulkTransitionIssue  \r\n          traceId:  2b063e9200718535  \r\n          traceSampled:  false  \r\n          url:  /secure/BulkTransitionIssue.jspa\r\n\r\nmessage:  Failed to serialize JSON for bulk transition.  \r\nmicros_container:  jira {noformat}\r\nFrom the UI:\r\n{code:java}\r\nThe tickets couldn’t be transitioned Try again soon or get in touch with our support team. {code}\r\n!image-2022-10-12-11-51-58-111.png|width=362,height=131!\r\n{code:java}\r\nAn unknown error occurred. If it persists, please contact support {code}\r\n!image-2022-10-12-11-51-40-318.png|width=452,height=104!\r\nh3. Workaround\r\n\r\nThe suggested workaround is to open the ticket on a new tab and execute the transaction directly through the issue view.","createDate":"2022-10-12T14:55:25.000+0000","comments":[{"text":"Hi [~rsilva@atlassian.com],\r\n\r\nThank you for reporting the issue.\r\n\r\nIt seems it is a frontend bug where the request payload's field member is not populated upon transitioning.\r\nh4. Example of other working transitions\r\n\r\n!image-2022-10-13-10-31-59-094.png!\r\nh4. Example of transition from \"Any status\" to \"Itself\"\r\n\r\n!image-2022-10-13-10-31-22-192.png!\r\n\r\nLooks like the model it uses to resolve a payload needs an update, as it doesn't support the \"Itself\" transition.\r\n\r\nI have transitioned this bug to *long term backlog* and created a bug for our team.\r\nh4. JSM Fission Backlog Bug\r\n\r\n[https://jdog.jira-dev.com/browse/FSN-2764]","author":"Berkan Yuksel"},{"text":"We have multiple customers that shuffle issues between teams a lot and opening the issue every time they have to change team is tedious and time consuming. Can this be resolved so we can easily use looping transitions to do this and update multiple fields at the same time from the queue. Many thanks.","author":"Roy van den Berg"}]},{"summary":"Uncheck 'show transition in the customer portal' on a transition has no effect and still shows the transition in the portal","key":"JSDCLOUD-11866","url":"https://jira.atlassian.com/browse/JSDCLOUD-11866","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn approval step has two transitions. We have the option to uncheck 'show transition in the customer portal' for each transition but it does not seem to be honored - even if the deny transition is unchecked to not have it show in the portal the Approve and Deny buttons are shown allowing the user to transition to denied from the portal. If this is the case, why have the option to uncheck/check the box?\r\n\r\nThis is important because Customer transitions in the portal behave differently than other workflow transitions as specified in the [documentation|https://support.atlassian.com/jira-service-management-cloud/docs/show-a-workflow-transition-in-the-portal/]. Unfortunately, Conditions or validators do not apply to the customer portal. There is sometimes a need to hide or block certain transitions from showing up in the customer portal.\r\nh3. Steps to Reproduce\r\n # In the agent view, select a workflow step that has an approval configured.\r\n # Ensure that 'show transition in the customer portal' is checked for the Approve transition only.\r\n # Ensure that the 'show transition in the customer portal' is *unchecked* for the Denied transition.\r\n # Save and publish the workflow\r\n # Create a ticket that uses this workflow and select approver if required.\r\n # Navigate to the ticket on the customer portal as the approver and verify if the option to Deny is not shown\r\n\r\nh3. Expected Results\r\n\r\nApprover should not see the Deny option in the portal\r\nh3. Actual Results\r\n\r\nApprover is shown both Approve and Deny options\r\nh3. Workaround\r\n\r\nInstead of configuring an approval the workaround would be to use a normal transition.","createDate":"2022-09-27T17:05:58.000+0000","comments":[{"text":"This is an interesting ticket, thank you for raising it! The way the Approvals function is structured is as a module that gathers Approve/Decline recommendations, then performs a transition on the approvers' behalf. This model is why you’re seeing the behaviour you are – the transition setting is not applied because you’re not seeings transitions in the portal, you’re seeing an Approval module. That being said, what you’ve reported does make a lot of sense. What we’re going to do is move this ticket to our long term backlog, so we don’t lose it, it can gather popularity, and so we can consider it in future feature planning.","author":"Brian Doidge"},{"text":"{panel:title=Atlassian Update - September 29, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"User is unable to create new JSM request types","key":"JSDCLOUD-11646","url":"https://jira.atlassian.com/browse/JSDCLOUD-11646","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssue in creating new request types in JSM projects. An error in the _Create request type_ modal, asks the user to refresh the page. Once refreshed, accessing the newly created request type flags an error in the UI indicating something had gone wrong.\r\nh3. Steps to Reproduce\r\n # Navigate to a JSM project\r\n # Go to Project settings > Request types\r\n # Click the _Create request type_ button on the page\r\n # Enter the name of the request type and choose any issue type for it - maybe choose Task.\r\n # Click next and do not select any portal groups then click the button to create the request type.\r\n # An error is shown on the modal saying there was an error creating the request type.\r\n # Refresh the page and the request type will be present. Click on the request type and both the customer form and issue view return an error, screenshot attached.\r\n\r\nh3. Expected Results\r\n\r\nUser should be able to create and view a new request type.\r\nh3. Actual Results\r\n\r\nError in create request type modal -\r\n{code:java}\r\nWe couldn't create a new request type. Try refreshing the page.{code}\r\nOn refreshing, request type is present but when the user open the request type to view an error shows -\r\n{code:java}\r\nSomething's gone wrong\r\nWe couldn't load this request type. Try refreshing the page.{code}\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2022-07-28T09:08:25.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 15, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Anchors do not work with better rendering experience for KB articles","key":"JSDCLOUD-11641","url":"https://jira.atlassian.com/browse/JSDCLOUD-11641","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWe have recently rolled out a feature that will render the KB articles from the customer portal in a improved and cleaner way. Though, it seems that there are some issues when the articles have anchors.\r\n\r\nh3. Steps to Reproduce\r\n# Upon [connecting your JSM project to a Confluence space|https://support.atlassian.com/jira-service-management-cloud/docs/set-up-a-knowledge-base-so-customers-can-serve-themselves/], go to Confluence and create a new page using the current editor;\r\n# Add some [Lorem Ipsum|https://www.lipsum.com/] text to the page, so it can be long enough to be scrolled;\r\n# At the bottom of the page, add an Anchor macro;\r\n# Highlight a piece of text in the first line of your text, in the top of the page, then hit *CTRL + K* / *Command + K* to insert a hyperlink;\r\n# In the link, insert _#AnchorName_;\r\n# Publish the page;\r\n# Navigate to this article in your customer portal and click over the anchor link you created.\r\n\r\nh3. Expected Results\r\nYou are placed where you added the anchor, in the bottom of the page.\r\n\r\nh3. Actual Results\r\nThere are two outcomes we can get:\r\n* After 3-5 seconds we are redirected to the anchor;\r\n* Nothing happens at all (this one occurs more often when you have more than one anchor link)\r\n\r\nh3. Workaround\r\nEngage with the support team raising a [new support ticket|https://support.atlassian.com/contact/#/] and ask them to disable this feature for now, so the anchor links will work properly.","createDate":"2022-07-25T16:51:13.000+0000","comments":[{"text":"Hi Team, \r\n\r\nIs there any recent updates for this Bug logged in July?\r\n\r\n\r\n\r\n \r\n\r\n ","author":"Michelle Beetham"},{"text":"Thanks for reporting this issue. Our team is looking into this and currently exploring some options to resolve. I am not able to provide a timeline at the moment but will do once we have a certain level of confidence to resolve this issue. Thanks!","author":"Lennon Liao"},{"text":" Hi Team, \r\n\r\n \r\n\r\nAre there any updates on this?","author":"Michelle Beetham"}]},{"summary":"Users (be it SSO enabled or manually invited) are unable to access spaces linked to JSM projects as knowledge base articles","key":"JSDCLOUD-11618","url":"https://jira.atlassian.com/browse/JSDCLOUD-11618","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers (be it SSO enabled or manually invited) are unable to access spaces linked to JSM projects as knowledge base articles\r\nh3. Steps to Reproduce\r\n- Create a JIRA project (Service Project). (A respective KB space will already gets created on confluence)\r\n- Go to Project Settings -> Knowledge Base -> Who can access = “All Logged in users”.\r\n- Invite a test user to the site with no Product Access.\r\n- Go to Org Portal -> Products -> User Access Settings -> Approved Domains _(There must not be any domain with pre-approved access, specially the domain of the user that you are testing with)_\r\n- Make sure that the test user is not logged in to any of the Atlassian/confluence site on the browser where you are testing. So, better try in incognito mode. _(Else, you will not be able to replicate the bug, because once the user is logged in to any of the confluence sites, the system will allow the user to enter the KB confluence space without any error.)_\r\n- Copy the KB confluence page URL, and try accessing it with the Test user’s account in Incognito mode.\r\n- The error will show up.\r\n\r\nh3. Expected Results\r\n\r\nUnlicensed users should be able to access the Confluence page with a direct URL to the space.\r\nh3. Actual Results\r\n - Access the direct link to the knowledge base article, it takes you to id.atlassian.com for login and after login throws an error: \r\n!screenshot-1.png|thumbnail!\r\n{code:java}\r\n<user email id> doesn't have access to Confluence on <domain name>{code}\r\nh3. Workaround\r\n* No workaround as of now.","createDate":"2022-07-20T11:28:02.000+0000","comments":[]},{"summary":"Insight Status Attribute using object schema status displays \"Unknown\" in Customer Portal","key":"JSDCLOUD-11576","url":"https://jira.atlassian.com/browse/JSDCLOUD-11576","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn *Object Schema Status* configured in an Insight Status attribute will display as \"Unknown\" within an Insight Custom Field in the Customer Portal when raising a request.\r\n\r\n!Screen Shot 2022-07-13 at 2.33.02 pm.png!\r\n\r\n{*}Note{*}: This issue only occurs when raising requests through the portal. When creating an issue from within Jira, the Status attribute value/label displays correctly\r\nh3. Steps to Reproduce\r\n\r\n*1. Insight Object (Schema) configuration*\r\n * Configure a status within an Object schema\r\n!Screen Shot 2022-07-13 at 2.39.16 pm.png|thumbnail!\r\n * Configure an object type in this schema with a *Status attribute* and add the status under Type Value\r\n!Screen Shot 2022-07-13 at 2.44.34 pm.png|thumbnail!\r\n\r\n*2. Insight custom field configuration*\r\n * Add the status attribute to *Allow search filtering by these attributes* under the *Insight objects field configuration*\r\n*!Screen Shot 2022-07-13 at 2.45.25 pm.png|thumbnail!*\r\n\r\n*3. Request type configuration*\r\n * Add the Insight custom field to the *Request from* section to any request type configured within the portal\r\n!Screen Shot 2022-07-13 at 2.46.10 pm.png|thumbnail!\r\n\r\n*4. Navigate to the portal, and create a new request of the above-configured request type*\r\n\r\n*5. Select the Insight Custom field and search for the Object containing the Object schema status*\r\n\r\n*6. Notice the value/label is \"Unknown\"*\r\n\r\n \r\nh3. Expected Results\r\n\r\nDisplay the *value/label* of the Status attribute.\r\n\r\nThis works as expected for *Global insight statuses:*\r\n\r\n!Screen Shot 2022-07-13 at 2.43.02 pm.png|thumbnail!\r\nh3. Actual Results\r\n\r\nObject schema statuses are displayed as \"Unknown\" in the portal request view\r\nh3. Workaround\r\n\r\nConfigure a Global status instead of an Object Schema status if you need to display the value of the status within an Insight Custom field on the Portal.","createDate":"2022-07-13T04:50:23.000+0000","comments":[{"text":"{panel:title=Atlassian Update - July 13, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Export of insight objects with references fails intermittently with different errors","key":"JSDCLOUD-11566","url":"https://jira.atlassian.com/browse/JSDCLOUD-11566","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nExporting objects with references to other object types results in one of the below errors on the browser:\r\n{noformat}\r\n{\r\n\"errorMessages\": [\r\n\"An error has occurred. Please contact the administrator.\"\r\n],\r\n\"errors\": {}\r\n}\r\n{noformat}\r\n{noformat}\r\n{\r\n\t\"errorMessages\": [\r\n\t\t\"Something went wrong. Contact administrator\"\r\n\t],\r\n\t\"errors\": {}\r\n} {noformat}\r\nh3. Steps to Reproduce\r\n # Open an object type that has objects with references\r\n # Click the gear icon and select *Export objects*\r\n # Select format as *User friendly* or *Data consistent* and click *Export*\r\n\r\nh3. Expected Results\r\n\r\nExport objects successfully in a CSV file\r\nh3. Actual Results\r\n\r\nExport fails with one of the above errors\r\nh3. Workaround\r\n\r\n[https://confluence.atlassian.com/jirakb/exporting-insight-objects-fails-with-error-something-went-wrong-contact-administrator-1114819862.html]","createDate":"2022-07-12T00:55:31.000+0000","comments":[{"text":"Esse erro atrapalha muito nosso dia a dia, pois quando dou o erro de exportar, tenho que abrir um chamado e acaba atrasando nossas atividades que dependem dessa informação.","author":"Renata Braga"}]},{"summary":"Issues fail to create in mobile device browsers when Date and Time form fields are set to required","key":"JSDCLOUD-11548","url":"https://jira.atlassian.com/browse/JSDCLOUD-11548","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using Jira Service Management's *Forms* feature with a Date and Time field that is set to required on the form, a validation error for the time field prevents issues raised via the Customer Portal from sending.\r\n\r\nThe time field displays an error {_}Enter a valid value{_}, even though such is entered. This behavior impacts browsers within mobile devices and not the Jira Cloud mobile application.\r\n\r\nThis is currently confirmed to impact iOS devices.\r\nh3. Steps to Reproduce\r\n # Create a form within Project settings > Forms in a Jira Service Management project\r\n # Add a *Date & Time* field type and check the _Response required_ box\r\n # Within the form settings associate the form with *Request form* and a request type\r\n # On a mobile device's browser ie Safari, Chrome or Firefox visit the customer portal and navigate to the request type the form is associated with\r\n # Try to create a ticket with the necessary fields filled out\r\n\r\nh3. Expected Results\r\n\r\nTicket is created.\r\nh3. Actual Results\r\n\r\nAn error displays under the time field on the form indicating {_}Enter a valid value{_}.\r\nh3. Workaround\r\n # Remove the field response requirement on the form for the *Date & Time* field\r\n # If the requirement is necessary, have users submit tickets for request types that have these types of fields via a desktop browser","createDate":"2022-07-07T17:40:28.000+0000","comments":[{"text":"[https://getsupport.atlassian.com/browse/CES-27623]\r\n\r\n ","author":"Abhishek Yadav"},{"text":"The fix for this has now been fully rolled out.","author":"Luke C"}]},{"summary":"Forms API/Automation: Multiple attach/copy forms actions executing simultaneously results in undefined behaviour","key":"JSDCLOUD-11516","url":"https://jira.atlassian.com/browse/JSDCLOUD-11516","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen we have different automation rules and/or API requests that are triggered at the same time to add different forms, some forms may not be added to the ticket. There is a concurrency/race condition problem occurring when multiple *Attach forms* actions are triggered simultaneously. So, if we add two forms at exactly the same time, one of them may end up becoming overwritten.\r\nh3. Steps to Reproduce\r\n\r\nCreate different automation rules to attach different forms to the ticket using the same trigger(i.e. {_}Issue created{_}) and/or use concurrent public API requests to attach forms to the issue.\r\nh3. Expected Results\r\n\r\nThe forms will be added to the ticket.\r\nh3. Actual Results\r\n\r\nSome forms will not be attached to the ticket, even though the Audit log associated with the automation shows that the form has been attached and/or the public API request was successful.\r\nh3. Workaround\r\n\r\nThe current workaround is to restructure the logic and rules so that only one Forms action executes at a time on the issue. We can see more details about it in the following document:\r\n - [Forms not adding to issue via automation|https://confluence.atlassian.com/jirakb/forms-not-adding-to-issue-via-automation-1311474136.html]","createDate":"2022-06-29T15:53:55.000+0000","comments":[{"text":"This has been highlighted by Atlassian support as also an issue for REST API for submitting forms during the same transaction window because the forms object on the issue cannot handle concurrent calls.\r\n\r\nThe REST API puts the request on a queue, so the response from the service is that it was successful, even though only one of the API calls were honoured. So, there is nothing in the HTTP response values to indicate that all other calls were dishonoured.","author":"Ben Salvage"},{"text":"We are moving where forms data is stored and changing how the form index is stored to solve this concurrency bug.\r\n\r\n(This means that forms data will no longer be available via the Jira entity property REST API, and the Forms REST API will need to be used instead.)\r\n\r\nThis requires us to migrate all existing forms data and is expected to be complete during FY25Q2 (likely Nov-Dec 2024).","author":"Evan Bennett"},{"text":"[~ce32e1789db7] is this still expected to be complete in Nov-Dec 2024?","author":"Mathew Lederman"},{"text":"We are working on fixing the concurrency bug, which involves significant changes to how we store and retrieve data.\r\n\r\nThis involves migrating data. At this stage, we expect this work to be completed by mid-January 2025. We will provide further updates as we make progress. In the meantime, please follow the [workaround|https://confluence.atlassian.com/jirakb/forms-not-adding-to-issue-via-automation-1311474136.html] to avoid this issue.","author":"Ashok Ramdoss"},{"text":"We identified a total of 21 cloud IDs associated with this JAC. Today, we migrated 11 out of the 21 clouds affected by this JAC to a new datastore, so the issue should have been resolved for those customers. \r\nWe are also working on the rest of the tenants to migrate their data into the new datastore. We aim to migrate majority of the impacted customers to the new data store before the end of next week, followed by all of the other JSM form customers. I will provide further updates as we make progress on the migration task.","author":"Ashok Ramdoss"},{"text":"We migrated 6 more cloud IDs this week. So, we migrated 17 clouds out of the 21 cloud IDs listed in this JAC. We are continuously working on this prioritised list and will soon start migrating all the tenants to the new data store.","author":"Ashok Ramdoss"},{"text":"We have rolled this out to most of the customers impacted by this, except one large customer out of the 21 customers mentioned in this JAC. For everyone else, this should be fixed now.","author":"Ashok Ramdoss"},{"text":"All the impact tenants mentioned in this JAC ticket are migrated, so this issue is resolved for the tenants mentioned in this ticket. We also migrated other tenants that we suspect might be impacted by this issue. And planning to migrate all the JSM form tenants in the coming weeks.","author":"Ashok Ramdoss"},{"text":"We started the mass migration for all the forms customers from this week. Soon (in few weeks), we will complete the migration for all JSM forms customers.","author":"Ashok Ramdoss"},{"text":"Hey, we were referenced here from a support ticket we opened.\r\nWe saw that automation rules with Attach Forms action use the internal, incrementing id to indicate which form to attach. We were wondering if the migration will change that","author":"Jira Adapter Dev"}]},{"summary":"Exporting Insight Objects as CSV from a long IQL query fails with error HTTP 400 Bad Request","key":"JSDCLOUD-11438","url":"https://jira.atlassian.com/browse/JSDCLOUD-11438","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen trying to export a list of Insight objects from a very long query on IQL search, it fails with the error HTTP 400 Bad Request.\r\nh3. Steps to Reproduce\r\n * Search with a heavy amount of fields. In this case, we had 158 tags. Example query used:\r\n\r\n{code:java}\r\n\"Tag\" IN (\"TAB3030\",\"TAB3031\",\"TAB3032\",\"TAB3033\",\"TAB3034\",\"TAB3035\",\"TAB3036\",\"TAB3037\",\"TAB3038\",\"TAB3039\",\"TAB3040\",\"TAB3041\",\"TAB3042\",\"TAB3043\",\"TAB3044\",\"TAB3045\",\"TAB3046\",\"TAB3047\",\"TAB3048\",\"TAB3049\",\"TAB3050\",\"TAB3051\",\"TAB3052\",\"TAB3053\",\"TAB3054\",\"TAB3055\",\"TAB3056\",\"TAB3057\",\"TAB3058\",\"TAB3077\",\"TAB3060\",\"TAB3061\",\"TAB3062\",\"TAB3063\",\"TAB3064\",\"TAB3065\",\"TAB3066\",\"TAB3068\",\"TAB3069\",\"TAB3070\",\"TAB3067\",\"TAB3072\",\"TAB3059\",\"TAB3073\",\"TAB3074\",\"TAB3075\",\"TAB3076\",\"TAB3078\",\"TAB3071\",\"TAB3079\",\"TAB3080\",\"TAB3081\",\"TAB3082\",\"TAB3083\",\"TAB3084\",\"TAB3086\",\"TAB3087\",\"TAB3088\",\"TAB3089\",\"TAB3090\",\"TAB3091\",\"TAB3092\",\"TAB3093\",\"TAB3094\",\"TAB3095\",\"TAB3096\",\"TAB3097\",\"TAB3098\",\"TAB3099\",\"TAB3100\",\"TAB3101\",\"TAB3102\",\"TAB3103\",\"TAB3104\",\"TAB3105\",\"TAB3106\",\"TAB3107\",\"TAB3085\",\"TAB3205\",\"TAB3211\",\"TAB3212\",\"TAB3213\",\"TAB3214\",\"TAB3215\",\"TAB3216\",\"TAB3217\",\"TAB3218\",\"TAB3221\",\"TAB3115\",\"TAB3116\",\"TAB3117\",\"TAB3118\",\"TAB3119\",\"TAB3127\",\"TAB3128\",\"TAB3129\",\"TAB3140\",\"TAB3141\",\"TAB3147\",\"TAB3148\",\"TAB3149\") {code}\r\n * Try to export as CSV\r\n\r\nh3. Expected Results\r\n\r\nShould generate a file.\r\nh3. Actual Results\r\n\r\nAn error HTTP 400 Bad Request displayed on screen:\r\n\r\n!Screen Shot 2022-06-10 at 14.21.15.png|thumbnail!\r\nh3. Workaround\r\n\r\nStep1 - Create an auxiliary attribute e.g. \"export batch\" as number.\r\n\r\nStep2 - Use AQL to bulk edit the objects and add a common export batch number.\r\n\r\nStep3 - Use AQL with export batch to get a complete set exported.","createDate":"2022-06-10T04:22:20.000+0000","comments":[{"text":"(y) we're having the same issue","author":"Andrew Lee"},{"text":"This has been sitting around for a year with zero movement. How are customers that utilize assets expected to navigate Databases of 1000s of assets with this bug. Please prioritize! ","author":"Cory Marino"},{"text":"Hey Team - there hasn't been any updates on this issue, we are really struggling and resolving this issue would help Atlassian offer a better product. Please keep us updated!","author":"Yar"},{"text":"When will this be addressed? It's really difficult to even export 500 records running an AQL. ","author":"Obed Samuel"},{"text":"FIX IT. This is basic functionality!! We pay a ton of money for your Cloud products. It boggles the mind that a simple query and export to CSV still doesn't work. Come on Atlassian! This worked fine on-premises with Server edition; you forced us to cloud.","author":"Rich Nacinovich"},{"text":"I'm flabbergasted that a cloud service anno 2024 isn't capable of giving 3 columns of data on 250 CI's in a CMDB.\r\n\r\nAnd this \"fantastic innovative\" product can't do something that excel is able to do since the 90's.\r\n\r\n \r\n\r\nProposed solution by helpdesk, export EVERYTHING to excel and filter everything there ..... Then why nog manage the whole CMDB in Excel while we are at it?\r\n\r\nMove up this bug from backlog to the next release for fixing please!","author":"Meurice Frank"},{"text":"We have the same problem.\r\nI'm surprised that it hasn't been solved yet :(","author":"ryckdossantos"}]},{"summary":"Insight Objects Custom Fields with translated names misbehave with JQL search","key":"JSDCLOUD-11385","url":"https://jira.atlassian.com/browse/JSDCLOUD-11385","type":"Bug","priority":"","description":"h3. Issue Summary\r\nInsight Objects Custom Fields with translated names misbehave with JQL basic search\r\n\r\nh3. Steps to Reproduce\r\n # Create an Insight Objects custom field and add a translation to it\r\n#  !image-2022-05-31-13-44-18-783.png|thumbnail! \r\n # Switch your profile language to the same language as the translation\r\n # Perform a basic search with that field\r\n\r\nh3. Expected Results\r\nThe search will be completed and results are shown\r\n\r\nh3. Actual Results\r\nAn error is thrown *\"Error CMDB field config not found\"*\r\n\r\nInvestigation notes:\r\n* In JQL search, searching for the \"cf[id]\" works:\r\n** !image-2022-05-31-13-44-29-210.png|thumbnail! \r\n* Basic Search will display the translated name, while the URL will display the original name:\r\n** !image-2022-05-31-13-44-41-071.png|thumbnail! \r\n* JQL search for the original name *and* the translated name will fail (with the latter throwing a \"field not found\" error)\r\n** !image-2022-05-31-13-44-48-340.png|thumbnail! \r\n** !image-2022-05-31-13-44-54-831.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nUse JQL search with the \"cf[customfield_id]\" syntax which relies only on the field id and not on its name (translated or not)","createDate":"2022-05-31T16:45:10.000+0000","comments":[]},{"summary":"Assets Automation: Validate Syntax for Object Attributes in Automation is failing","key":"JSDCLOUD-11372","url":"https://jira.atlassian.com/browse/JSDCLOUD-11372","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Validate Syntax present on the Edit Issue action and the IQL condition within automation is failing for Insight Custom Fields and Object Attributes, with the following error:\r\n{code:java}\r\nAn unknown error occurred. Please reload and try again.{code}\r\nh3. Steps to Reproduce\r\n # Create a new Automation Rule > Any Trigger;\r\n # Add a conditional like \"{_}IQL condition{_}\"\r\n # Add an action like \"{_}Then: Edit Issue Fields{_}\"\r\n # Inside this Edit Issue Filed, select an Insight Custom Field, and on the syntax field add something like object attribute = \"attribute value\":\r\n!image-2022-05-26-15-44-27-795.png|width=337,height=205!\r\n # Click on the \"validate syntax\" and see the following error:\r\n!image-2022-05-26-15-45-54-323.png|width=383,height=197!\r\n\r\nh3. Expected Results\r\n\r\nThe Syntax Validation should happen for the values added on the IQL/JQL field or in the IQL condition.\r\nh3. Actual Results\r\n\r\nThe below error is thrown in the UI:\r\n{noformat}\r\nAn unknown error occurred. Please reload and try again. {noformat}\r\nh3. Workaround\r\n\r\nDon't validate the syntax in the rule. Instead, validate it in the object schema and enter the AQL in the rule. The rule should work fine.","createDate":"2022-05-26T18:48:34.000+0000","comments":[{"text":"Hello Team, we are in the mist of updating our process to automate them as much as we can. we have a portal for request and by not having this automation work, means we need an individual to triage instead of automating it.","author":"y.poulin"},{"text":"same very annoying bug need to be fixed ","author":"Gediminas Kulys"},{"text":"Same Problem here","author":"Julian Becher"},{"text":"We're affected as well.","author":"Noah Hofmann"},{"text":"I had this error when I was trying to do an AQL automation within a service project. When I built the same automation in Settings -> System -> Global automation it worked. Maybe this helps someone (on)","author":"Kisaruni Hofmann Ndosi"}]},{"summary":"Incorrect mapping for Language Support - Traditional Chinese","key":"JSDCLOUD-11256","url":"https://jira.atlassian.com/browse/JSDCLOUD-11256","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Language Support in JSM for Traditional Chinese (中文 (繁體)) is mapped to Simplified Chinese (中文 (简体)), resulting in the customer portal not displaying the correct language support.\r\nh3. Steps to Reproduce\r\n # In the JSM {*}Project Settings{*}, add *Chinese (Taiwan)* language\r\n # Ensure that any language *other* than *Chinese (Taiwan)* is set as the *PROJECT DEFAULT*\r\n !language_support_2.jpg|thumbnail! \r\n # Set the language in [Account preferences|https://id.atlassian.com/manage-profile/account-preferences] to Traditional Chinese (中文 (繁體))\r\n # Navigate to the customer portal of project\r\n\r\nh3. Expected Results\r\n\r\nPortal displays Traditional Chinese (中文 (繁體))\r\nh3. Actual Results\r\n\r\nPortal displays the *Project Default* language\r\nh3. Workaround\r\n\r\nSetting the language in [Account preferences|https://id.atlassian.com/manage-profile/account-preferences] to Simplified Chinese (中文 (简体)) displays Traditional Chinese (中文 (繁體)) in the portal\r\nh5. Gif animation demonstrating issue and workaround\r\n !language_support.gif|thumbnail! ","createDate":"2022-05-02T05:24:43.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/PCS-96635","author":"Rex"},{"text":"{panel:title=Atlassian Update - May 1, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Sending an email with an invalid attachment causes the attachment to fail to be added silently","key":"JSDCLOUD-11181","url":"https://jira.atlassian.com/browse/JSDCLOUD-11181","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSending an email with an invalid attachment causes the attachment to fail to be added silently\r\n\r\nh3. Steps to Reproduce\r\n # Have an invalid attachment (ie jpeg file and saved as png file extension)\r\n # Send an email with the invalid attachment\r\n\r\nh3. Expected Results\r\n\r\n* Issue is created with the attachment added. Or\r\n* Show in the logs/ticket that the attachment failed to be attached\r\n\r\nh3. Actual Results\r\n\r\nAttachment failed to be added silently.\r\n\r\nh3. Workaround\r\n\r\nNone","createDate":"2022-04-07T16:08:31.000+0000","comments":[{"text":"Happening to me but not always.","author":"Steven Camilleri"}]},{"summary":"JSM permission validator asks to grant to \"Service Project Customer - Portal Access\" users all permissions including Assign and Delete","key":"JSDCLOUD-10837","url":"https://jira.atlassian.com/browse/JSDCLOUD-10837","type":"Bug","priority":"","description":"h3. Issue Summary\r\nJSM permission validator asks to grant to \"Service Project Customer - Portal Access\" users all permissions including Assign and Delete, even though they are not mandatory permissions.\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to Jira Service Management Permission Scheme for a test Project\r\n # Validate {*}Assign{*}/{*}Delete Issues{*} Permission is assigned to the Role *Service Project Customer - Portal Access*\r\n # Remove either or both {*}Assign{*}/{*}Delete Issues{*} Permission per below screenshot  !Screenshot 2022-02-01 at 7.11.59 PM.png|width=474,height=265!\r\n # Browse through the issue and navigate back to the Jira Service Management Permission Scheme for above test Project and we are presented with the Permission error below:  !image-2022-02-01-19-15-24-029.png|width=675,height=309!\r\n\r\nh3. Expected Results\r\n\r\nWe should not have been presented with the *Permission error*\r\n\r\nPer below article, If you choose to use custom permission schemes, which are different from the mandatory permissions for the project roles in the typical service desk context then we will be presented with the Jira Service Management permission errors.\r\n * [Customize Jira Service Management permissions|https://support.atlassian.com/jira-cloud-administration/docs/customize-jira-service-management-permissions/]\r\n\r\nThis article lists the mandatory permissions for Service Desk Customers and below is the snippet for your quick reference:\r\n||Service Desk Customers|The permissions for customers must be granted to the *Service Desk Customer - Portal Access* security type, not the *Service Desk Customers* role. The Portal Access security type lets customers access the customer portal, but not Jira. The security type reads the role to determine who are customers. * Create Issues (Customers can create requests and view requests they have submitted via the customer portal)\r\n * Browse Projects (Customers can access the project in the customer portal)\r\n * Add Comments (Customers can comment on their requests.)\r\n * Create Attachments (Customers can add attachments to their requests)\r\n * Assign Issue (This permission is mandatory for the *Assignee* field to work. The *Assignee* field is an optional hidden field and it automatically channels issues to certain team members.)|\r\n\r\nHowever, we see that Assign/Delete permission is not mandatory and we should not have got the error. \r\nh3. Actual Results\r\n\r\nWe are presented with the *Permission error* below:\r\n!image-2022-02-01-19-15-24-029.png|width=549,height=251!\r\nh3. Workaround\r\n\r\nWe can just ignore this error and continue as currently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2022-02-01T14:00:49.000+0000","comments":[{"text":"{panel:title=Atlassian Update - February 1, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"},{"text":"Your popup error message encourages product admins to give delete issue permissions to customers!!!\r\n\r\nAtlassian is actively advising to create a security problem. Please fix this, it's not hard.","author":"Jonathan_nor"}]},{"summary":"\"Authenticate portal users\" with Confluence Server fails when Confluence Server Base URL has a context path","key":"JSDCLOUD-10564","url":"https://jira.atlassian.com/browse/JSDCLOUD-10564","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n*Cloud Jira Service Management* is connected to a *Confluence Server* instance, where the Confluence Server instance is hosted on a Base URL with a context path (e.g. https://myconfluence.server.com/wiki).\r\n\r\nWhen attempting to connect the Cloud JSM Project to a *Knowledge base* from the Confluence Server instance, the testing of a valid [Authenticate portal user|https://support.atlassian.com/jira-service-management-cloud/docs/authenticate-portal-users-to-access-knowledge-base-articles] fails with *{color:red}Credentials are invalid{color}.*\r\n\r\n !JSMCloudAuthenticateError.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n\r\n# Setup a *Confluence Server* instance with a Base URL that has a context path (e.g. https://myconfluence.server.com/wiki)\r\n#* Create a new user called *testuser* with any password of your choice\r\n# Set up an Application Link from the *Cloud Jira Service Management* to the *Confluence Server* instance Base URL (i.e. to https://myconfluence.server.com/wiki)\r\n# Create a *Cloud Jira Service Management* and go to the *Project Settings* \r\n# Click on *Knowledge base*\r\n# Unlink the Confluence Cloud Space if it is already linked\r\n# Click *Link Space* and link to a Space from the *Confluence Server* instance\r\n# In the *Authenticate portal users*, enter the earlier created *testuser* and press the (/) to test the authentication\r\n\r\nh3. Expected Results\r\n\r\nThe user authentication test should be successful.\r\n\r\n !JSMCloudAuthenticateSuccessful.png|thumbnail! \r\n\r\nh3. Actual Results\r\nThe user authentication test will fail with *{color:red}Credentials are invalid{color}.*:\r\n\r\n !JSMCloudAuthenticateError.png|thumbnail! \r\n\r\nh3. Root cause investigation\r\n\r\nCloud JSM invokes the user authentication to the *Confluence Server instance* on the URL without the context path, e.g. https://myconfluence.server.com/rest/api/user/current (x)\r\n\r\nCloud JSM should be invoking the the user authentication to the *Confluence Server instance* on the URL with the context path, e.g. https://myconfluence.server.com/wiki/rest/api/user/current (/)\r\n\r\nh3. Workaround\r\n\r\nNone (unless it is acceptable to run Confluence Server without a context path).","createDate":"2021-11-11T10:34:47.000+0000","comments":[{"text":"\"Authenticate portal users\" is NOT the only place that this is happening.\r\n\r\nWe have a setup described in this issue: JSM Could linked to Confluence Server, which has Base URL with a context path, and a space from the Confluence Server instance is linked to the JSM Cloud project as a knowledge base.\r\n\r\nThe only place we can see Confluence articles in JSM is the project knowledge base section https://<domain>.atlassian.net/jira/servicedesk/projects/<projetcKey>/knowledge/articles .\r\n\r\nHowever, in the issue view (https://<domain>.atlassian.net/browse/<issueKey>) the \"knowledge base\" section in \"details\" shows \"(!) We couldn’t load your articles\" and knowledge base does not appear on the portal, much like described in issue https://jira.atlassian.com/browse/JSDCLOUD-5621\r\n\r\nIn browser console there is a message \"Fetch failed loading: GET https://<domain>.atlassian.net/rest/servicedesk/knowledgebase/latest/articles/<issueKey> \", navigating to this url returns error 400 \"Service not found in the knowledge base server.\"\r\n\r\nIn our reverse-proxy log there are a lot of messages like these:\r\n\r\n[14/Dec/2021:15:50:37 +0200] 54.155.106.147 TLSv1.2 ECDHE-RSA-AES128-GCM-SHA256 - www.<ourDomain>.lt \"GET /rest/api/search?excerpt=highlight&start=0&cql=siteSearch%2B%7E%2B%22test%22%2BAND%2Btype%2Bin%2B%28%22page%22%29%2BAND%2Bspace%2Bin%2B%28%22<spaceKey>%22%29 HTTP/1.1\" 404 196 665 \"-\" \"Apache-HttpClient/4.5.13 (Java/1.8.0_302)\"\r\n\r\nNotice the absence of context path before \"/rest/api/search\".","author":"Laura Savičienė"},{"text":"Hello, everyone.\r\n\r\nMy name is Bruno Siqueira, and I am a software engineer working on this bug. We just released a fix for this issue that should be available for everyone affected. \r\n\r\nLet us know if you face any other issues,\r\n\r\nWarm regards,","author":"Bruno"},{"text":"Works like a charm now. Didn't even have to change the entered credentials (earlier marked as invalid) - upon loading the configuration screen, they were shown as validated. Thank you for the quick resolution!","author":"Laura Savičienė"}]},{"summary":"Insight field with reporter/project placeholder in filter issue scope returns nothing for some customers in customer portal","key":"JSDCLOUD-10549","url":"https://jira.atlassian.com/browse/JSDCLOUD-10549","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an Insight field has its filter issue scope setting configured with ${reporter}, this field does not return any objects for some customers in the customer portal.\r\nh3. Steps to Reproduce\r\n # Navigate to your Service Desk project - Project settings > People\r\n # Invite an user as a Service Desk Customer from there\r\n # Create an Insight object with Jira User attribute. e.g. Owner\r\n # Assign the user invited in step 2 to the Owner attribute of the object\r\n # Set up an Insight custom field with this query in filter issue scope field: {{\"Owner\" == ${reporter.label}}}\r\n # Log in as the user in step 2\r\n # Try to use the Insight field in customer portal\r\n\r\n*Note:* For customers invited via the Customers page, they can successfully select the object where they are the Owner of in the customer portal.\r\n*Note:* this issue happens for project due to the same root cause (lack of reporter and project info being passed for the filter query)\r\nh3. Expected Results\r\n\r\nWe expect at least 1 object to be returned and displayed as an option in the Insight field.\r\nh3. Actual Results\r\n\r\nThere is no results displayed in the Insight field.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2021-11-08T22:33:31.000+0000","comments":[{"text":"You might be able to use this as a workaround for tickets raised where the value is blank and couldn't be set for the request. https://confluence.atlassian.com/jirakb/automatically-add-object-linked-to-reporter-to-insight-field-on-ticket-creation-1142431084.html","author":"Gary Blower (Clearvision)"},{"text":"The objects do display on the portal if the customer is a Jira Software user but not if they are a JSM customer ONLY.\r\n\r\n \r\n\r\nWe also have the JSM Customer group added under the Schema as Users but still no luck.\r\n\r\n \r\n\r\n ","author":"Iman Attia"},{"text":"Also tested with: \"User\" LIKE ${reporter.label} OR \"User\" = \"(currentUser())\" - both do not work for JSM customers","author":"Iman Attia"},{"text":"Resolved with: \"Assigned User\" IN{color:#ff0000} *currentReporter()*{color}","author":"Iman Attia"},{"text":"Using this placeholder ${project.label} also causes the same problem","author":"Arto Kovalainen"},{"text":"I tried this in the custom field but still see the same issue.\r\n\r\nOwner.user IN currentReporter()  this works as I can see the assets in the custom field.\r\n\r\nReporter is changed on the form, assets in the custom field update so I can see that reporters assets, select and get the issue.","author":"Steven Lees-Smith"}]},{"summary":"Search in help center display project names that does not exist on the site","key":"JSDCLOUD-10382","url":"https://jira.atlassian.com/browse/JSDCLOUD-10382","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen searching for request types in the help center, typing keywords could cause the search to show results for non-existing projects of the site\r\nh3. Steps to Reproduce\r\n# Navigate to the customer portal\r\n# Search for multiple keywords (eg: 'sof')\r\n\r\nh3. Expected Results\r\nOnly show results for projects of the site\r\nh3. Actual Results\r\nThe result shows projects that doesn't exist on the site.\r\nUpon click on the request type, the correct project would be selected\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-09-21T03:35:46.000+0000","comments":[{"text":"This bug has been fixed and rolled out to 100% users","author":"Vasu Garg"}]},{"summary":"Incomplete translations for different languages under Project Settings> request types ","key":"JSDCLOUD-10286","url":"https://jira.atlassian.com/browse/JSDCLOUD-10286","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe translation is incomplete for different languages under Project Settings> request types\r\nh3. Steps to Reproduce\r\n # Change language to French/Dutch under Account Preferences\r\n # Open a JSM project and navigate to Project Settings> Request Types\r\n\r\nh3. Expected Results\r\n\r\nUnder one of the request types, the description should be fully translated to French/Dutch\r\nh3. Actual Results\r\n\r\nThe description is seen as below:\r\n\r\n!Screenshot 2021-08-23 at 11.04.28 AM.png|thumbnail!\r\n\r\nCustomize the types of Incidenten your project will use. These will appear in your project navigation under '[Incidenten|https://soundofsilence.atlassian.net/jira/servicedesk/projects/TSD/section/incidents]'.\r\n Make these request types available in your customer portal by editing your\r\n [Portalgroepen|https://soundofsilence.atlassian.net/jira/servicedesk/projects/TSD/settings/portal-settings/portal-groups]\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-08-23T05:38:11.000+0000","comments":[{"text":"Hello, \r\nthis issue affects my instance. It was working fine for over 2 years and now suddenly it stopped and it affects multiple of my service management projects where there are hundreds of people everyday reporting their issues.  \r\nPlease do your best to resolve the bug as soon as possible. \r\n\r\nRegards,\r\nJakub","author":"Jakub Szczygielski"}]},{"summary":"Portal Introduction formatted text not loading in the Help Center.","key":"JSDCLOUD-9750","url":"https://jira.atlassian.com/browse/JSDCLOUD-9750","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen formatting the Introduction text under *Project Setting -> Portal Setting* using [Text Formatting Notation|https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all] it does not load the first time we open the Help Center.\r\n If we open the Project portal and then navigate back it loads as expected.\r\nh3. Steps to Reproduce\r\n # Open a Jira Service Management Project go to *Project Setting -> Portal Setting* and add the Introduction Text and format it using [Text Formatting Notation|https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all]\r\n # Open the Help Center, now we notice that the Introduction text that was added will not load\r\n\r\nRecording: [^Screen Recording 2021-02-17 at 5.31.57 PM.mov]\r\nh3. Expected Results\r\n\r\nWhen opening the Help Center the formatted text should load.\r\nh3. Actual Results\r\n\r\nWhen opening the Help Center the formatted text does not load.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-02-23T07:47:23.000+0000","comments":[]},{"summary":"When loading Service Desk-specific project settings on a tenant that no longer has an active Jira Service Desk subscription, a misleading error page is shown.","key":"JSDCLOUD-9498","url":"https://jira.atlassian.com/browse/JSDCLOUD-9498","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a Jira instance has a Service Desk project and no active Jira Service Desk subscription, a user can still navigate to the project's Service Desk-specific project settings pages, and sees a variety of error pages.\r\n\r\nh3. Steps to Reproduce\r\n # Create a new Jira instance that has an active Jira Service Desk subscription\r\n # Create a Service Desk project\r\n # Cancel/de-activate the Jira Service Desk subscription\r\n # Navigate to the Service Desk project's \"Portal settings\" page (or another Service Desk project settings page)\r\n\r\nh3. Expected Results\r\n * The option to navigate to the \"Portal settings\" page is not present; or\r\n * An error page is displayed that calls out that the Jira Service Desk subscription is inactive\r\n\r\nh3. Actual Results\r\n * An error page is displayed: either just a big error icon or a page saying \"You must be a Service Desk Agent to view this page\"\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-10-27T23:21:07.000+0000","comments":[{"text":"{panel:title=Atlassian Update - October 27, 2021|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Linking a space with multiple projects causes the KB redirect to wrong URL","key":"JSDCLOUD-9425","url":"https://jira.atlassian.com/browse/JSDCLOUD-9425","type":"Bug","priority":"","description":"h3. Issue Summary\r\nLinking a space with multiple projects causes the KB redirect to wrong URL. When this happen, it looses the Original portal/project hierarchy and ability to submit a new request (at the end of the page).\r\n\r\nh3. Steps to Reproduce\r\n * Link a space to multiple JSD projects\r\n * Navigate to JSD main portal and browse through the KB articles.\r\n * Click the KB article that belongs to the space which is linked to multiple JSD projects\r\n * It redirects to: [https://xxxx.atlassian.net/servicedesk/customer/kb/view/12345]\r\n\r\nh3. Expected Results\r\nJSD should redirect to [https://xxxx.atlassian.net/servicedesk/customer/portal/7/article/88704364]\r\n\r\nh3. Actual Results\r\nJSD redirects to : [https://xxxx.atlassian.net/servicedesk/customer/article/23756904]\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-09-21T13:23:32.000+0000","comments":[{"text":"{panel:title=Atlassian Update - September 21, 2021|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Users in customer role only are unable to create requests via the REST API","key":"JSDCLOUD-8961","url":"https://jira.atlassian.com/browse/JSDCLOUD-8961","type":"Bug","priority":"","description":"h3. Summary\r\nUsers that exist only in the customer role should still be able to create requests via the REST API.  Trying to reproduce this today by following the documentation in [POST /rest/servicedeskapi/request|https://developer.atlassian.com/cloud/jira/service-desk/rest/#api-rest-servicedeskapi-request-post] I find this is not possible to do.  It appears that this endpoint is only working for users in the Agent role.  But the existing docs do not make it clear that being an agent is required here. (I understand it is required to be an Agent to use the RaiseOnBehalfOf parameter, but I'm not trying to use that one in this case).\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a classic Jira Service Desk project\r\n# Invite a customer to join that service desk (that is not currently in your Jira site)\r\n# Have the customer login to the customer portal successfully at least once to make sure it works and they can see the request types there\r\n# As a customer, create a REST API token for yourself as per [Basic auth for REST APIs|https://developer.atlassian.com/cloud/jira/service-desk/basic-auth-for-rest-apis/]\r\n# Try as a customer to create a request in that portal via the REST API using basic auth, this example uses curl {code:borderStyle=solid}\r\ncurl --request POST \\\r\n  --url 'https://[redacted].atlassian.net/rest/servicedeskapi/request' \\\r\n  --header 'Accept: application/json' \\\r\n  --header 'Authorization: Basic [redacted]' \\\r\n  --header 'Content-Type: application/json' \\\r\n  --data '{\r\n  \"serviceDeskId\": \"2\",\r\n  \"requestTypeId\": \"17\",\r\n  \"requestFieldValues\": {\r\n    \"summary\": \"Request JSD help via REST\",\r\n    \"description\": \"Example description\"\r\n  }\r\n}' \r\n{code}\r\n\r\nh3. Expected Results\r\nRequest is created successfully with the customer that is making this request as the reporter.\r\n\r\n\r\nh3. Actual Results\r\ncurl command returns result of \r\n{code:borderStyle=solid}\r\n{\"errorMessage\":\"You don't have permission to access this Service Desk.\",\"i18nErrorMessage\":{\"i18nKey\":\"sd.agent.servicedesk.error.project.nopermission\",\"parameters\":[]} \r\n{code}\r\n \r\nh3. Notes\r\nFrom reading the documentation on this, it is not clear that a customer would be unable to perform this action.  \r\n\r\nh3.Workaround\r\nThis works if the user is an Agent, but that work-around is not viable in all use cases.","createDate":"2020-03-18T22:08:53.000+0000","comments":[{"text":"Hello, Basic or OAuth authentication fail to connect to Jira Service Management with role 'Customer' (Error 401).\r\n\r\nIs there a solution for a Customer to use the Jira REST API to access requests - other than creating an 'Agent' role for a client, as we are not allowed to grant internal access to Customer.\r\n\r\nOr is it by design that 'Customer' has no access to Jira REST API.\r\n\r\nThanks","author":"Francois-Xavier Sauvage"}]},{"summary":"Name for \"issuetype\" field is returned as \"Issue Type\" instead of \"Request Type\" in REST API for next-gen JSD projects","key":"JSDCLOUD-8606","url":"https://jira.atlassian.com/browse/JSDCLOUD-8606","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the issue REST API (/rest/api/3/issue/\\{issueIdOrKey}), the name for the \"issuetype\" field is returned as \"Issue Type\" for next-gen JSD projects when it should be \"Request Type\". In our native apps, we display the field name in our Issue screen and showing an \"Issue Type\" can be confusing/misleading.\r\nh3. Steps to Reproduce\r\n # Find or create an issue in a next-gen JSD project\r\n # Fetch the issue via the issue REST API (/rest/api/3/issue/\\{issueIdOrKey})\r\n # Inspect the JSON\r\n\r\nh3. Expected Results\r\n\r\nThe name for the \"issuetype\" field is \"Request Type\"\r\nh3. Actual Results\r\n\r\nThe name for the \"issuetype\" field is \"Issue Type\"\r\n{noformat}\r\n\"editmeta\": {\r\n    \"fields\": {\r\n[...]\r\n      \"issuetype\": {\r\n        \"required\": false,\r\n        \"schema\": {\r\n          \"type\": \"issuetype\",\r\n          \"system\": \"issuetype\"\r\n        },\r\n        \"name\": \"Issue Type\",\r\n        \"key\": \"issuetype\",\r\n[...]{noformat}\r\n \r\nh3. Workaround\r\n\r\nWe could rename the field name client-side but that would require the same change in all clients and can lead to localisation mismatches.","createDate":"2019-11-11T07:39:02.000+0000","comments":[{"text":"Hi [~sstiefel],\r\n\r\nIn Next-gen projects, issue types and request types have actually been combined into a single entity. This means that issue type name and request type name are the same thing - or put differently, the request type name IS the issue type name. Therefore this is expected behaviour.\r\n\r\nI'd like to close this off as not a bug, however please confirm this makes sense and that I've understood the bug report properly.\r\n\r\nCheers,\r\n\r\nOliver","author":"oli"},{"text":"Thanks [~owessels] for the explanation!\r\n\r\nYour comment above makes sense. However, I am still a bit confused about the name of this new issue type/request type *field.* To customers, is it still exposed as an \"Issue type\" or should it be called \"Request type\"?\r\n\r\nAt the moment, the *field name* is returned as \"Issue Type\" from the endpoint (see screen shot below). If that's correct, then there is no bug and this issue can be closed.\r\n\r\n!Screen Shot 2019-11-12 at 4.53.29 pm.png|thumbnail!","author":"Simon Stiefel"},{"text":"That's a good point [~sstiefel] - there is a little bit of a mix of the naming between the UI and the API, which would be good to clarify. I've had a chat to the team and asked them to add a reply to this ticket to indicate the outcome.","author":"oli"},{"text":"Hey [~sstiefel],\r\n\r\nLet me see if I can clarify that for you! As [~owessels] mentioned above, in next-gen we combined issue types and request types. In terms of fields, perhaps the more correct way to think about it is we removed the \"Request Types\" field completely (in classic this was the `vp_origin` custom field) and put all the portal functionality for request types into the new issue types UI.\r\n\r\nSo it's expected that the field returned is called \"issue type\". In the web UI we have special logic to change this text to \"Request types\" in the navigation (and the field name doesn't appear in the new issue view) based on the project type. \r\n\r\nOur initial comms that went out can be found here if this still doesn't make sense: [https://blog.developer.atlassian.com/developing-for-jira-service-desk-cloud-next-gen-projects/]\r\n\r\nHope that helps!","author":"Ben Wong"},{"text":"Hi [~owessels] and [~bewong],\r\n\r\nThanks for the detailed clarification! That makes sense now. I have filed a ticket with our team to change the name of the field in the mobile UI to \"Request type\" if we're in a JSD next-gen project.\r\n\r\nThanks again!","author":"Simon Stiefel"}]},{"summary":"Incomplete Portal translation","key":"JSDCLOUD-8345","url":"https://jira.atlassian.com/browse/JSDCLOUD-8345","type":"Bug","priority":"","description":"h3. Incomplete Portal translation\r\nFields like *Raise this request on behalf of*, *What can we help you with?* are not translated to the default project Language set on the project.\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Steps to replicate:\r\n* Go to the Project Settings of the JSD project\r\n* Language Support\r\n* Select a Language other than English as the Default Language.\r\n* Access the Customer Portal for the project.\r\n* Try creating the issue \r\n* Observe that most of the fields are not translated.\r\n\r\nh3. Expected result\r\nThe fields like *Raise this request on behalf of*,  *What can we help you with?*  are also translated.\r\n\r\nh3. Current result\r\nThe fields like *Raise this request on behalf of*,  *What can we help you with?*  are not translated.\r\n\r\nh3. Workaround\r\nAsk the user to set the user's preferred language to the required Language.\r\nThis will translate the whole Portal accordingly.","createDate":"2019-08-11T15:26:06.000+0000","comments":[{"text":"I have a variation of this where I only have one language active for Jira Service Desk (Danish) where parts of the interface is not translated.\r\n\r\n \r\n\r\nMy question on the forums lead me here: [Community Post|https://community.atlassian.com/t5/Jira-Service-Desk-questions/Where-to-translate-this/qaq-p/1331474?utm_source=atlcomm&utm_medium=email&utm_campaign=accept_as_solution_reminder&utm_content=topic#U1333869]","author":"lars-itl"},{"text":"This is also the case for customisable texts like:\r\n\r\n \r\n\r\n\"Welcome to the Help Center\" and \"Find help and services\"\r\n\r\n \r\n\r\nThey are not translated either when only one language active (Dutch); with both the helpdesk and Jira default language set.\r\n\r\nAny update on if and when this will be fixed? As it stands now the UX for non-english people is very poor because not all fields are translated\r\n\r\n \r\n\r\n ","author":"Rein van Meeteren"},{"text":"Please fix this ASAP. Jira Service Desk has SO MANY translation issues that it's hard to understand how Atlassian is not ashamed of it.","author":"Angel"},{"text":"Hello. I already had problems with request types and their translation. Now the same thing happens to us with the translations of the portal, in the following texts:\r\n- Contact us\r\n- What can we help you with?\r\nthat are not translated into Portuguese, unless each user has it so defined.\r\n\r\nRegards","author":"Avaco Sistemas"},{"text":"https://getsupport.atlassian.com/browse/PCS-153130","author":"Harshitha P"},{"text":"My organization is also experiencing this issue.  The request types on the help portal do not get translated (2023) which is significantly hindering adoption at our non-english offices.","author":"David Drosdick"},{"text":"Please take this 4 year old Bug seriously,\r\n\r\nHere in Switzerland we have 4 national languages and Jira should allow a 100% multilingual tool.","author":"hector.martin"},{"text":"Are there any updates on this issue.  I don't see how this would be on the Long Term Backlog as it affects using the application with any other languages.","author":"Dan Breyen"}]},{"summary":"Unable to add request type to the request type groups in a Next Gen Service Desk project","key":"JSDCLOUD-8264","url":"https://jira.atlassian.com/browse/JSDCLOUD-8264","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nUnable to add request type to the request type groups in a Next Gen Service Desk project\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Create a Service Desk Next Gen Project \r\n# Navigate to the portal\r\n# Click on customize (on the right side of the portal)  !screenshot-1.png|thumbnail! \r\n# Click on Request type group > add group > add request type\r\n\r\nh3. Current Result\r\n\r\nNo request type being added even after adding the group. The list is cleared almost immediately\r\n\r\nh3. Expected Result\r\nRequest type gets added to the group\r\n\r\nh3. Workaround\r\n\r\nNo workaround at the moment.\r\n\r\nh3. Notes\r\n\r\n- Found _40_ error code in Network Console.\r\n{code}\r\n{\"errors\":[{\"errorMessage\":\"The request type you are trying to view does not exist.\"}],\"reasonKey\":\"sd.customerview.error.requestTypeNotFound\",\"reasonCode\":\"404\"}\r\n{code}","createDate":"2019-07-11T03:49:44.000+0000","comments":[{"text":"The bugfix for this issue was released on Friday July 12th.","author":"Peter Grasevski"}]},{"summary":"Clicking \"Yes\" at \"Did this article help?\" doesn't get counted toward \"Requests deflected\" report","key":"JSDCLOUD-8251","url":"https://jira.atlassian.com/browse/JSDCLOUD-8251","type":"Bug","priority":"","description":"h3. Steps to Reproduce\r\n# Set a knowledge base space at a JSD project\r\n# Navigate to Jira Service Desk project and select \"Reports\" > \"Requests deflected\"\r\n# In a new tab, access the portal, and navigate to a kb article there\r\n# Click \"Yes\" at \"Did this article help?\" \r\n# Reload 2\r\n\r\nh3. Expected Results\r\nThe count of \"Requests deflected in portal\" increases\r\n\r\nh3. Actual Results\r\nNothing changes when reloaded\r\n \r\nh3. Workaround\r\nN/A","createDate":"2019-07-08T02:31:02.000+0000","comments":[{"text":"How do I reopen this? It's madness that there's no documentation anywhere about what happens to the \"Did this article help?\" Metrics .. ","author":"Cronje van Heerden"}]},{"summary":"Page keeps loading when a Jira administrator with no permission to a private next-gen project tries to view service desk specific features. ","key":"JSDCLOUD-8220","url":"https://jira.atlassian.com/browse/JSDCLOUD-8220","type":"Bug","priority":"","description":"h3. Summary  \r\nPage keeps loading when a Jira administrator with no permission to a next-gen project tries to view service desk specific features.\r\n  !error.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n# With *Administer Jira* global permission on your instance, create a private next-gen service desk project and do not add yourself to any role in the People section\r\n# Navigate to the Project > Project settings \r\n# Try to view JSD specific features like Customer notifications, Channels > Customer Permissions, Email, Widget, Customer portal\r\n\r\nh3. Expected Results\r\nAn error message to suggest that you do not have permission to view this. \r\n\r\nh3. Actual Results \r\nThe page keeps loading without any error message. In developer console 404 response is received:\r\nRequest URL: https://skahol.atlassian.net/rest/servicedesk/1/servicedesk/NTRNLSDNXT/settings/requestsecurity?_=1561443963365\r\nRequest Method: GET\r\nStatus Code: 404\r\n{quote}\r\n{\"errors\":[{\"errorMessage\":\"Project was not found\"}],\"reasonKey\":\"sd.admin.servicedesk.error.missingproject\",\"reasonCode\":\"404\"}\r\n{quote}\r\n\r\nh3. Notes\r\nError is reported correctly when you try to view a few SD features like Project settings > *Automation*\r\n !automation.png|thumbnail! \r\n","createDate":"2019-06-25T06:30:14.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 4, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Attachment drag and drop in Customer Portal freezes screen","key":"JSDCLOUD-8214","url":"https://jira.atlassian.com/browse/JSDCLOUD-8214","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFile drag and drop in the customer portal sometimes freeze the screen, only being possible to exit by refreshing the page, which makes the customer lose all inputs entered in the request fields.\r\nh3. Steps to Reproduce\r\n # Go to the Customer Portal.\r\n # Select a Request type that contains the Attachments field.\r\n # Drag a file from your computer and drop anywhere.\r\n !print2.png|thumbnail!\r\n # Observe that the file is successfully attached to the ticket but the screen gets blocked, not being possible to edit fields or submit the request.\r\n !print.png|thumbnail!\r\n\r\nh3. Expected Results\r\nThe file is uploaded successfully and the page doesn't freeze.\r\n\r\nh3. Actual Results\r\nThe file is uploaded successfully and the page freeze.\r\n\r\nh3. Notes\r\n\r\n_Dated: 21/Jun/2019 2:06 PM_\r\n\r\nThe CSS element {{*.cp-portal-dropzone.dropzone-active*}} is what blocks the screen.\r\nUnticking the *visibility* checkbox in Chrome DevTools unblocks the screen, solving the error.\r\n\r\n!print3.png|thumbnail!\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.\r\n","createDate":"2019-06-21T14:06:25.000+0000","comments":[{"text":"This is impacting one of our Customers ","author":"Adam Johnson"},{"text":"Impacting a number of our customers","author":"Glenn Summerfield"},{"text":"How is such a simple but extremely annoying issue not being properly prioritized? @Jira \r\n\r\nI'm getting tired of explaining to my customers that drag and drop doesn't work.","author":"Support Manager"},{"text":"Hi Folks!\r\n\r\nAs a part of our efforts to make sure that our bug reports have as much useful information in them as they can, I've gone through and reverified this issue, updated the issue description to make it a bit clearer.\r\n\r\nSince this bug is not very consistent and even harder to reproduce, therefore, we request you if you can reliably reproduce this bug or know the steps, please contact us via [Atlassian Support|https://support.atlassian.com] referencing this bug report.\r\nCheers,\r\n\r\nAsim\r\nAtlassian Support","author":"Asim K"}]},{"summary":"\"Browse Project\" permission set for Reporter overrides the customer permission that results the project getting exposed in the customer portal","key":"JSDCLOUD-8167","url":"https://jira.atlassian.com/browse/JSDCLOUD-8167","type":"Bug","priority":"","description":"h3. Steps to Reproduce\r\n # In JSD project A, set the customer permission as \"Who can access the portal and send requests to <project key>?\": \"Customers my team adds to the project\"\r\n # Confirm that the project has no customers added\r\n # Edit the permission scheme to add \"Browse Project\" permission to \"Reporter\" or \"custom user pick field\" or current assignee\r\n # Access the portal by a customer that has access to customer portal(customer that is added to another project B)\r\n\r\nh3. Expected Results\r\n\r\nCustomer will only see project B\r\nh3. Actual Results\r\n\r\nCustomer sees both project A and B\r\nh3. Workaround\r\n\r\nRemove \"Reporter\" or \"custom user pick field\" from \"Browse Project\" permission","createDate":"2019-05-29T05:05:45.000+0000","comments":[{"text":"This is not exclusive to Reporter. Any user field assigned to the Browse Project permission also causes the portal to be visible externally. Therefore the only workaround is to remove all user fields from the permission and lose the functionality of internal users being able to see only their tickets in the normal issue view.","author":"Andrew Whitley"},{"text":"It would be great to see this bug squashed!","author":"Allen Yi"},{"text":"Hi all, \r\n\r\nRecently our team also focuses on this topic again and we found an article which might be a workaround for this bug.\r\n\r\nHere you are: [https://confluence.atlassian.com/jirakb/restrict-users-to-only-see-their-assigned-work-items-in-jira-cloud-1279066436.html]\r\n\r\nIn a nutshell, we set up issue security scheme and applied on this project. Meanwhile, we removed \"current assignee\", \"reporter\", and \"user custom field value\" which cause the exposure in the customer portal.\r\n\r\nWe followed the steps mentioned in this article and tested. It works!\r\n\r\nAlthough there might be other concern or difficulty resulted from this setting, we consider that it can be shared here for reference.\r\n\r\nHope this sharing can also work for your teams.  :)\r\n\r\n ","author":"Veronica Liu"}]},{"summary":"Chrome local storage error (in the console) when viewing a portal ticket, preventing accessing the ticket","key":"JSDCLOUD-8144","url":"https://jira.atlassian.com/browse/JSDCLOUD-8144","type":"Bug","priority":"","description":"h3. Summary\r\nSome Chrome users can face a local storage error (visible console), preventing them from viewing their tickets\r\n{code}\r\nFrom the console - is_arguments.js:12 DOMException: Failed to execute 'setItem' on 'Storage': Setting the value of '/customerview/session' exceeded the quota.\r\n\r\n \r\nAnother one - Uncaught DOMException: Failed to execute 'setItem' on 'Storage': Setting the value of 'atlassian-analytics.unknown.lock' exceeded the quota.\r\n{code}\r\n\r\nHere's the screen that will be rendered:\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Customer Impact\r\nCustomer unable to access customer portal tickets (should still be able to navigate / raise tickets, the problem is not being able to view them)\r\n\r\nh3. Environment\r\nCloud\r\n\r\nh3. Steps to Reproduce\r\nTBD at this point\r\n\r\nh3. Expected Results\r\nPortal user can view their ticket.\r\n\r\nh3. Actual Results\r\nPortal user runs into the above error and can't view their ticket\r\n\r\nh3.Workaround\r\nClearing the local storage.\r\nIn the Developer Tools, click Application > Local Storage(sidebar) > Find the domain where the problem is experienced > Clear All (stop sign)","createDate":"2019-05-20T22:35:38.000+0000","comments":[{"text":"A fix for this has been deployed to production at 2:10pm Sydney time on May 21. Resolving.","author":"Clement Capiaux"},{"text":"Perhaps the fix for JSDCLOUD-8144 could help with [a similar issue in Jira and in Confluence|https://confluence.atlassian.com/jirakb/functionality-in-jira-and-confluence-fail-due-to-exceeding-chrome-quota-762874705.html].","author":"MichaelL"}]},{"summary":"Knowledge base: the search query returns zero results when using a colon(:) in the middle of the query","key":"JSDCLOUD-8129","url":"https://jira.atlassian.com/browse/JSDCLOUD-8129","type":"Bug","priority":"","description":"h3. Summary\r\n * Knowledge base allows for related articles to be displayed in a panel on the full issue view\r\n !Screen Shot 2019-05-14 at 21.11.28.png|thumbnail!\r\n * Search queries using a colon \":\" in the middle returns zero results e.g. \"String1: string2\"\r\n * If a colon is used in the middle of the query, then the whole query is invalid and zero results are returned\r\n|!Screen Shot 2019-05-14 at 15.40.16.png|thumbnail!|!Screen Shot 2019-05-14 at 15.40.39.png|thumbnail!|\r\n\r\n * If the title of an article has a colon in it, then the colon isn't highlighted when searching\r\n !Screen Shot 2019-05-14 at 21.13.49.png|thumbnail!\r\n\r\nh3. Environment\r\n * Cloud\r\n\r\nh3. Steps to Reproduce\r\n # Create a Confluence article with a colon in the article title e.g. \"My article: printer cleaning\"\r\n # Navigate to an issue in the same project\r\n # See under \"Related knowledge base articles\" and click \"Search knowledge base\"\r\n # Try a search query such as\r\n{noformat}\r\nMy article: printer\r\n{noformat}\r\n\r\nh3. Expected Results\r\n * The article called \"My article: printer cleaning\" is found in the search results\r\n\r\nh3. Actual Results\r\n * No articles are found\r\n\r\nh3. Notes\r\n* Using the above example, if one were to search \"My article:\", then the search would return results\r\n* This bug also affects customer searches in the portal\r\n * The issue/request Summary is used as a search query to find related articles. The same applies - zero results of there is a colon in the middle of the search query.  See under \"Related knowledge base articles\"\r\n|!Screen Shot 2019-05-14 at 21.41.40.png|thumbnail!|!Screen Shot 2019-05-14 at 21.42.07.png|thumbnail!|!Screen Shot 2019-05-14 at 21.42.21.png|thumbnail!|\r\n\r\n(Optional - If Necessary)\r\n\r\nh3. Workaround\r\n* Search will work as long as the colon is not in the middle\r\n","createDate":"2019-05-14T13:42:49.000+0000","comments":[{"text":"searching in servicedesk/customer/portals is also broken\r\ntherefore I would not rate it as \"low\", because selfservice is one of the key features of Jira SD","author":"Andreas Aufmuth"},{"text":"{panel:title=Atlassian Update - November 4, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"},{"text":"\"solution\" rejected!","author":"Andreas Aufmuth"}]},{"summary":"Customer unable to search Knowledge Based article from Customer Portal","key":"JSDCLOUD-8098","url":"https://jira.atlassian.com/browse/JSDCLOUD-8098","type":"Bug","priority":"","description":"h3. Summary\r\nCustomer unable to search knowledge based article from Customer Portal eventhough the permission was open for any active user without confluence licence.\r\n\r\nh3. Customer Impact\r\nCustomer unable to search KB from Customer Portal. If they have direct link , they can open it.\r\n\r\nh3. Environment\r\nCloud\r\n\r\nh3. Steps to Reproduce\r\n# Link JSD project with Confluence space.\r\n# The permission , set to *Everyone with access to your service desk can read articles without a Confluence license. This option is best if you want to share knowledge base articles with your customers.*\r\n# Then , login customer portal as customer (without license)\r\n# Try to search the KB\r\n\r\nh3. Expected Results\r\nCustomer should be able to search the KB\r\n\r\nh3. Actual Results\r\nCustomer unable to search the KB. Only agent can search for the KB.\r\n\r\nFrom Console , there's error :-\r\n{noformat}\r\nError: undefined missing confluence/api/navigator-context\r\n{noformat}\r\n !Screenshot 2019-04-29 at 6.57.29 PM.png|thumbnail! \r\n\r\nh3. Notes\r\nAgent able to search the KB.\r\n\r\nh3.Workaround\r\nNo workaround","createDate":"2019-04-29T12:06:03.000+0000","comments":[{"text":"Everyone watching this ticket, a fix reached production at around 11:20am AEST time (one hour ago), and the functionality should now be fully restored.\r\nApologies for the inconvenience caused by this problem!\r\n\r\nPlease feel free to comment here if you are still experiencing the problem.","author":"Clement Capiaux"},{"text":"(/) Thank you!","author":"Charles Johnson"}]},{"summary":"SSO users trying to interact with the customer portal after session expiry presents a 401 page instead of redirecting users to a login page. ","key":"JSDCLOUD-8058","url":"https://jira.atlassian.com/browse/JSDCLOUD-8058","type":"Bug","priority":"","description":"h3. Summary\r\nWhen a user with an expired session-cookie navigates to the JSD customer portal instead of being redirected to login they are presented with a 401 error page.\r\n\r\nh3. Steps to Reproduce\r\n# Create an account for the customer portal that uses SSO.\r\n# Login\r\n# Manually edit the session-cookie to make it invalid.\r\n# Reload the customer portal.\r\n\r\nh3. Expected Results\r\nUser is redirected to the login page.\r\n\r\nh3. Actual Results \r\nUser is taken to a 401 error page. \r\n\r\nh3. Notes (Optional - If Necessary)\r\nThis could possibly affect non-SSO users.\r\n\r\nh3. Workaround \r\nClear browser cache and cookies then reload the page, this will direct the user to the correct login page. ","createDate":"2019-04-09T07:03:30.000+0000","comments":[{"text":"How can this be a medium priority as many users cannot use the web portal to submit ticket?   The service desk web portal is the main entry point to access my help desk team.  My help desk will receive more calls for weeks (if not months) because there's a bug in your software.  ","author":"Sylvain Audet"},{"text":"This issue is still ongoing and we are working with our Jira team to fix this issue. As this issue has todo with our underlying Jira system the issue has been moved Jira Cloud. For further updates see JRACLOUD-71895","author":"kohlerfc"}]},{"summary":"Viewing an exported Excel CSV for Service Desk Issues containing Portal Only Customer will show the ID instead of Name","key":"JSDCLOUD-8047","url":"https://jira.atlassian.com/browse/JSDCLOUD-8047","type":"Bug","priority":"","description":"{panel:title=Case Note|borderStyle=solid|borderColor=#000000|titleBGColor=#f4a742|bgColor=#efd4b1}\r\nh3. *Problem Statement*\r\n\r\nViewing an exported Excel CSV for Service Desk Issues containing *Portal Only Customer* will show the ID instead of Name\r\nh3. *Steps to replicate*\r\n # Create a Service Desk Project and invite a Portal Only Customer on the Project\r\n # Customer to Raise a new Request and confirm that the reporter field is the same Portal Only Customer.\r\n # Go to Issue Navigator and search for the issue\r\n # Click on the Share filter result and Click on Export Excel CSV\r\n\r\n*Expected Result*\r\n The Reporter column shows the correct name on Excel CSV Sheet\r\n\r\n*Actual Result*\r\n !Screenshot 2019-04-02 at 3.42.04 PM.png|width=768,height=301!\r\nh3. *Workaround*\r\n # Go to Site Administration page https://<instance>.atlassian.net/admin/\r\n # Click on Jira Service Desk > Portal Only Customer\r\n # Click on Customer's drop-down menu and migrate customer to Atlassian Account{panel}","createDate":"2019-04-02T07:17:08.000+0000","comments":[{"text":"Hi there! I am closing this as a duplicate of https://jira.atlassian.com/browse/JSDCLOUD-6281 (older ticket with more votes).\r\n\r\nPlease watch and vote on that ticket to receive updates for this problem.\r\n\r\n[~ashohaimi] please update the summary/description of the other issue if you believe that it's unclear.","author":"Andrea"}]},{"summary":"When setting a customer account's password, the potentially different&existing logged in user/session will be used in audit log to record the password change, causing confusion and making it look like a password hijack","key":"JSDCLOUD-8013","url":"https://jira.atlassian.com/browse/JSDCLOUD-8013","type":"Bug","priority":"","description":"h1. Steps to reproduce\r\n1. Log in as {{brian.nguyen+customer@atl-paid-dev.com}}\r\n2. In a different browser invite {{brian.nguyen+customer2@atl-paid-dev.com}} to a service desk\r\n3. In the first browser, goto the sign up link provided in the email\r\n4. Provide a username and password\r\n5. Navigate to the tenant's audit log: {{<tenant_url>/auditing/view}}\r\n\r\nh1. Expected result\r\nAudit log renders the password change:\r\n* by {{brian.nguyen+customer2@atl-paid-dev.com}}\r\n* for {{brian.nguyen+customer2@atl-paid-dev.com}}\r\n\r\nh1. Actual results\r\nAudit log will render the password change as if {{brian.nguyen+customer@atl-paid-dev.com}} changed the password for {{brian.nguyen+customer2@atl-paid-dev.com}}'s account, causing confusing by making it look like a customer account could override some other customer account's password.\r\n !audit-log-symptom.png|thumbnail! \r\n\r\nh1. Workaround\r\nNone.\r\n\r\nh1. Notes\r\nAdditionally:\r\n* this might affect other flows like portal signup / reset password. Let's make sure we consider them when fixing too\r\n* consider adding an entry in the audit log when the invite is sent out if possible","createDate":"2019-03-18T06:39:33.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 4, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Connect add-ons stop showing up when navigating between portal forms","key":"JSDCLOUD-7981","url":"https://jira.atlassian.com/browse/JSDCLOUD-7981","type":"Bug","priority":"","description":"Steps to reproduce:\r\n\r\nOn an instance with a connect add-on that uses the portal header:\r\n\r\n1. Go to a request create page, say /portal/group/123/create/1\r\n2. Pick another request type in the group\r\n3. Wait for everything to load\r\n4. Pick the first request type again\r\n5. The connect add-on is missing\r\n\r\nYou can navigate to any request type that has already been loaded and the connect-addon would be missing.\r\n\r\nWorkaround:\r\nRefresh the page","createDate":"2019-03-05T06:49:37.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 4, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Setting Due Date with German Language results in portal requests failed to be created.","key":"JSDCLOUD-7940","url":"https://jira.atlassian.com/browse/JSDCLOUD-7940","type":"Bug","priority":"","description":"*Summary*\r\n\r\nCreating a \"Due Date\" hidden field for a Request Type in a Service Desk project while the system language being \"German\" will lead to customers unable to create requests via the portal. The customer will hit into the \"This form contains a hidden field that does not have a valid default value configured\" error.\r\n\r\n*Steps to Reproduce*\r\n # Go to General Configuration\r\n # Change Indexing Language to _German_\r\n # Change Default Language to _Deutsch (Deutschland)_\r\n # Change Default user time zone to _Europe_ and Timezone to _(GMT+01:00) Berlin_\r\n # Go to the Service Desk project > Request Type > set \"Due Date\" as a hidden field \r\n # Change the date picker field (e. g Due Date) to any date in December (e.g 4/Dez/32 10:00 PM)\r\n\r\n\r\n*Expected Results*\r\n\r\n- JIRA should be able to recognize \"Dez\" abbreviation for December\r\n \r\n\r\n*Actual Results*\r\n\r\n !error1.PNG|thumbnail! \r\n \r\n*Note*\r\nIf the same hidden field is viewed from a English profile in the instance it will show the following:\r\n\r\n !error2.PNG|thumbnail! \r\n\r\nIt will look correct in one language profile and show an error in another, the same goes for the Customer Portal, depending on which language: \r\n\r\n- If the system is set to German, the date will be set to 2/Dez/29, the English profile customers will not be able to create tickets. Because Jira is expecting the input to be 2/Dec/29\r\n- If the language profile is switched to English and the due date is set to 2/Dec/29, the German profile customers will not be able to create tickets. Because Jira is expecting the input to be 2/Dez/29\r\n\r\n\r\n*Workaround 1*\r\n\r\nChange the due date to a month which is both acceptable in English and German, such as 4/Nov/20, the value \"Nov\" is accepted in both languages. \r\n\r\n\r\n*Workaround 2:*\r\n\r\nFrom within JIRA, change the date format from 02/Dez/29 to 02.12.29.  \r\n\r\n# Navigate to *General Configurations* > click on \"Advanced Settings\":\r\n\r\nUpdate your settings so that they match what is shown below:\r\n# *jira.date.picker.javascript.format=%d.%m.%y*\r\n# *jira.date.time.picker.javascript.format=%d.%m.%y %H:%M*\r\n# *jira.date.time.picker.java.format=d.MM.yy H:mm*\r\n# *jira.date.picker.java.format=d.MM.yy*\r\n\r\n ","createDate":"2019-02-06T09:51:31.000+0000","comments":[{"text":"Hi,\r\n\r\nIt also happens in Jira Server.  Is there any plan for this bug?\r\n\r\nWe are present in different countries and languages and it is a big issue for us. Date format with month as MMM is perfect to us to avoid issues with numeric date formats... 10/9/2019 is September 10th or October 9th?\r\n\r\nThe workaround we use is to set this default date as post function, using JWT where it is possible to use numeric date format\r\n\r\n ","author":"Rafael Corredor"},{"text":"Hello,\r\n\r\n \r\n\r\nToday one person came to me reporting this bug. He is using Jira in Finnish language and the problem occurs. The date picker picks the date e.g. 10th of October in following format:\r\n\r\n26/Loka/20\r\n\r\nBut the correct and accepted format is:\r\n\r\n26/Lokakuuta/20\r\n\r\nIf I type the \"kuuta\" to the end of the month name then Jira accepts the entered date. Please fix this asap!\r\n ","author":"Jussi Sarén"}]},{"summary":"Date/time format in request form is not changed by date/time format in Look and Feel settings","key":"JSDCLOUD-7911","url":"https://jira.atlassian.com/browse/JSDCLOUD-7911","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen changing the date/time format in Look and Feel Settings the date/time in request form will not change\r\nh3. Environment\r\n * Jira Service Desk Cloud\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to https://<instance.atlassian.net>/secure/admin/LookAndFeel!default.jspa\r\n # Change *Complete Date/Time Format* to *yyyy/MMM/dd h:mm a*\r\n # Change *Day/Month/Year Format* to yyyy/MMM/dd\r\n # Date/time format on Project Queues and within the tickets will reflect the new format\r\n # Date/time format in Portal request form will not change\r\n\r\nh3. Expected Results\r\n # Date/time format in Portal request form reflect the new format\r\n\r\nh3.  Actual Results\r\n # Date/time format in Portal request form will not change (reflecting as dd/MMM/yyyy)\r\n\r\nh3. Workaround\r\n\r\nUse \"jira.date.time.picker.javascript.format\" and date picker \"jira.date.picker.javascript.format\" to change the format. This can be found under Jira Settings -> General Config -> Advanced settings. See  [https://confluence.atlassian.com/jira/changing-the-due-date-input-format-192536.html] to see how you can configure that date formats.\r\n\r\n ","createDate":"2019-01-21T23:40:49.000+0000","comments":[{"text":"Hi [~ezhapa] , You can configure the date time format in the request from under advanced settings in Jira Settings screen. To get there you need to do the following.\r\n * Goto Jira settings. This can be found in the bottom left corner of the Agent view with a little cog\r\n * Goto 'System' settings\r\n * Goto 'General configuration'\r\n * Press on 'Advanced Settings' in the top right corner\r\n\r\nOnce there you can change the format of the date time picker under \"jira.date.time.picker.javascript.format\" and date picker \"jira.date.picker.javascript.format\" (See attached image ). These follow linux formatting standards for display dates. ","author":"kohlerfc"},{"text":"Hi @Chris Kohler, @Enida Zhapa,\r\n\r\nI can date/time format in request form.\r\n\r\nBut I don't know what each parameter \"%d-%h-%Y\", \"%e-%h-%y %l%M %P\" used in jira.date.picker.javascript.format, jira.date.time.picker.javascript.format means.\r\n\r\n \r\n\r\nIs there any reference site or document? \r\n\r\nThank for your help.\r\n\r\n \r\n\r\n ","author":"YongDuk Kim"},{"text":"Hi [~kim.yongduk1], \r\n\r\nPlease see [https://confluence.atlassian.com/jira/changing-the-due-date-input-format-192536.html] for information on how to configure these.","author":"kohlerfc"},{"text":"I have also raised the suggestion in Jira Cloud that they should consolidate and use consistent date/time configuration.\r\n\r\nhttps://jira.atlassian.com/browse/JRACLOUD-71451","author":"kohlerfc"}]},{"summary":"Portal: Unable to select time using the date/time picker when using the portal in Dutch/German","key":"JSDCLOUD-7885","url":"https://jira.atlassian.com/browse/JSDCLOUD-7885","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen using the current/\"old\" help center in either Dutch or German, the date/time picker on the request form doesn't allow the customer to conveniently pick a time.\r\nh3. Environment\r\n * JSD Cloud\r\n * \"Old\"/current help center\r\n\r\nh3. Steps to Reproduce\r\n # Place a date/time picker in a request/portal form\r\n # Navigate to the portal\r\n # Try to set a date/time value\r\n\r\nh3. Expected Results\r\n * The customer is able to select a time and set a date/time value\r\n\r\nh3. Actual Results\r\n * Challenging for customers to pick a time\r\n * The mouse pointer is over the \"Hour\" picker:\r\n !Jan-03-2019 11-34-15.gif!\r\n\r\nh3. Notes\r\n * The tool-tip is longer than the width of the date picker, so the picker \"flickers\"\r\n * Seems to affect the portal when the language is set to Dutch or German\r\n\r\nh3. Workaround\r\n * Slowly move the mouse pointer to the right of the picker as shown in this video: [^date_time_picker.mov]\r\n * Use the [new help center|https://confluence.atlassian.com/servicedeskcloud/blog/2018/12/our-new-help-center-is-ready-for-your-customers-to-experience](instructions in the linked blog post). Please keep in mind that due to JSDCLOUD-6874, the calendar months/days will be in English","createDate":"2019-01-03T10:43:26.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 7, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"New help center/iOS:  The date/time picker is hidden by the keyboard in the portal","key":"JSDCLOUD-7879","url":"https://jira.atlassian.com/browse/JSDCLOUD-7879","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen trying to edit a time/date picker field on the portal via a mobile web browser, the keyboard on iOS cannot be minimized so that the entire calendar/time picker is visible.  The page scroll is locked - so it's not possible to scroll up/down to reveal the hidden portion(s) of the calendar/time picker.  Android users are able to minimize the keyboard and choose the desired date/time.\r\n\r\nh3. Environment\r\n* Jira\r\n* iOS\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to the portal\r\n# Try to edit a date/time picker field\r\n\r\nh3. Expected Results\r\n* A calendar/time picker appears in full and the user is able to choose a time/date by tapping on a time/date option\r\n\r\nh3. Actual Results\r\n* The keyboard covers the calendar/time picker\r\n* User is unable to minimize the keyboard so that the entire calendar/time picker is visible\r\n !Image 2018-12-19 at 16.32.01.jpeg|thumbnail! !Image 2018-12-19 at 16.32.01-2.jpeg|thumbnail! \r\n\r\nh3. Notes\r\n* Issue occurs when using the \"new help center\"\r\n* Able to replicate issue on multiple iOS devices\r\n* Confirmed that the issue occurs on iOS 11.4.1\r\n* Issue occurs in Chrome and Safari\r\n* Time picker is not scrollable on either Android or iOS\r\n* Unable to scroll up/down to reveal the hidden portion of the calendar/time picker\r\n\r\nh3.Workaround\r\n * Turn off the new help center: Navigate to Project Settings > Portal Settings > View and customize; under Try the new help center, put the toggle switch into the \"off\" position.  Please quote this bug ticket number in the feedback form.\r\n !Screen Shot 2018-10-11 at 11.37.11 PM (1) (1).png|thumbnail! ","createDate":"2018-12-31T09:05:00.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 4, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"JSD Portal / Status Page integration broken","key":"JSDCLOUD-7824","url":"https://jira.atlassian.com/browse/JSDCLOUD-7824","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe JSD / SP integration triggers 401 errors when loading JSD portal pages (and possibly any other Connect add-on integration in the portal)\r\nh3. Environment\r\n - Service Desk\r\n - Status Page connect integration\r\n\r\nh3. Steps to Reproduce\r\n # Install the JSD/SP integration and navigate to the portal\r\n # Navigate to the portal \r\n\r\nh3. Expected Results\r\n\r\nAn iframe should load with the JSD/SP integration.\r\nh3. Actual Results\r\n\r\nA 401 error happens in the console, preventing the connect add-on integration iframe to load.\r\n\r\nh3. Workaround\r\n\r\nNone at the moment.","createDate":"2018-11-26T20:36:30.000+0000","comments":[{"text":"Symptoms encountered don't impact the customer portal / StatusPage integration ==> closing this.","author":"Clement Capiaux"}]},{"summary":"New help center: Unable to paste(ctrl+v) images from clipboard on the request form using IE11 ","key":"JSDCLOUD-7816","url":"https://jira.atlassian.com/browse/JSDCLOUD-7816","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nThe ctrl+v keyboard shortcut doesn't allow customers to paste images from the clipboard(copy/paste) in the customer portal using IE11. This issue only seems to occur on the new help center. Additionally, it's not possible to paste by right-clicking and choosing \"Paste\".\r\nh3. Environment\r\n\r\nJSD Cloud\r\nh3. Steps to Reproduce\r\n # Log into the portal where the new help center is enabled\r\n # Start filling out a request form\r\n # Copy an image to the OS clipboard\r\n # Paste the image into the form using ctrl+v\r\n\r\nh3. Expected Results\r\n * The image/item is added to the comment as an attachment\r\n !Screen Shot 2018-11-23 at 13.44.43.png|thumbnail!\r\n(taken to using old help center)\r\n\r\nh3. Actual Results\r\n * Nothing happens/changes\r\n\r\nh3. Notes\r\n * The keyboard shortcut works on other browsers such as Chrome and Firefox\r\n * Similar/related issues:\r\nJRACLOUD-65670\r\nJRACLOUD-62233\r\nJSDCLOUD-6351\r\n\r\nh3. Workaround\r\n * Use another browser\r\n * Turn off the new help center: Navigate to Project Settings > Portal Settings > View and customize; under Try the new help center, put the toggle switch into the \"off\" position.  Please quote this bug ticket number in the feedback form.\r\n !Screen Shot 2018-10-11 at 11.37.11 PM (1).png|thumbnail! ","createDate":"2018-11-23T12:52:41.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nI'm marking this ticket as closed as we no longer support IE 11 in Jira Service Desk Cloud. Please see https://confluence.atlassian.com/cloud/supported-browsers-744721663.html and https://community.atlassian.com/t5/Feedback-Forum-articles/Retiring-IE11-support-for-Atlassian-cloud-server-and-data-center/ba-p/1185312 for more information.\r\n\r\nCheers,\r\nNick Robson\r\nJira Service Desk team","author":"Nick Robson"}]},{"summary":"New help center: date picker language not aligned with Jira settings","key":"JSDCLOUD-6874","url":"https://jira.atlassian.com/browse/JSDCLOUD-6874","type":"Bug","priority":"","description":"h3. Summary\r\n * When using the new help center in a non-English language, the language in the date picker is displaying in English\r\n * On the old help center, the name of the day/month is translated correctly\r\n  \r\nh3. Environment\r\n\r\n * Jira Service Desk\r\n * \"new help center\" enabled\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to the customer profile page by clicking on the user's avatar > Profile({{https://<instance_name>.atlassian.net/servicedesk/customer/user/profile}}) and change the language to a non-english language\r\n # Create a new request in the help center\r\n\r\nh3. Expected Results\r\n * The calendar is displayed in the correct language\r\n\r\nh3. Actual Results\r\n * The calendar is displayed in English\r\n * Not highlighted in the screenshot, but the days are also in English\r\n\r\n||Old help center||New help center||\r\n|!Screen Shot 2018-10-11 at 11.57.06 PM.png|thumbnail!|!Screen Shot 2018-10-11 at 11.57.50 PM.png|thumbnail!|\r\nh3. Notes\r\n * This issues only happen in the \"new help center\"\r\n * In the example above, the \"Use ISO8601 standard in Date Picker\" setting is set to \"Yes\". The \"Use ISO8601 standard in Date Picker\" setting also has no effect on the date picker in the \"new help center\"; Jira settings > System > Look and feel({{https://<instance_name>.atlassian.net/secure/admin/LookAndFeel!default.jspa}})\r\n\r\nh3. Workaround\r\n\r\n \r\n\r\n*This Workaround is obsolete*\r\n * Turn off the \"new help center\": Navigate to Project Settings > Portal Settings > View and customize; under \"Try the new help center\", put the toggle switch into the \"off\" position.  Please quote this bug ticket number in the feedback form.\r\n !Screen Shot 2018-10-11 at 11.37.11 PM.png|thumbnail!","createDate":"2018-10-12T07:59:32.000+0000","comments":[{"text":"Is there any update on this? A similar thing is happening in a client site, however, their default language in both Advanced Settings and Look and feel are English (UK), but the date/time field when displayed in the live portal form or the portal details on the issue view are in English (US)","author":"Kirsty Davies"},{"text":"I'm also seeing this in the time registration modal. Everything is English UK, the date and time settings in Look and Feel are set to ISO and 24h clock, but then I see 4/19 9:30 AM on the form.","author":"Kristian Thy"},{"text":"Hi Everyone,\r\n\r\nOur engineering team has advised that this bug has been fixed and the fix has been shipped to production Cloud sites.  This issue will now be closed.\r\n\r\nThanks,\r\nDerrick","author":"Derrick Nguyen"},{"text":"[Derrick|https://jira.atlassian.com/secure/ViewProfile.jspa?name=dnguyen4], you state this has been fixed and yet I still see the same wrong format. Can you please update, as you have closed a ticket that should still be open until the job is complete.","author":"Gemma"}]},{"summary":"New help center: date picker format not aligned with Jira settings","key":"JSDCLOUD-6851","url":"https://jira.atlassian.com/browse/JSDCLOUD-6851","type":"Bug","priority":"","description":"h3. Summary\r\n * When the date format is changed in Jira({{https://<instance_name>.atlassian.net/secure/admin/AdvancedApplicationProperties.jspa}}), the date picker field in the \"new help center\" should conform to the settings defined in Jira\r\n * Currently, when the date format has been changed e.g. {{dd.MM.yyy}} instead of the default {{d/MMM/yy}} format, the dates are either displayed incorrectly(dates in the future) or a false error message is thrown(dates in the past)\r\n * This issue doesn't occur in the old help center\r\n \r\nh3. Environment\r\n\r\n * Jira Service Desk\r\n * \"new help center\" enabled\r\n\r\nh3. Steps to Reproduce\r\n # Define the date format in Jira settings > System > General settings; Advanced Settings({{https://<instance_name>.atlassian.net/secure/admin/AdvancedApplicationProperties.jspa}}). For demonstration purposes, we are using {{dd.MM.yyyy}}:\r\n !Screen Shot 2018-10-11 at 9.36.54 PM.png|thumbnail!\r\n # Add a date picker(type) field to the appropriate Request Type|https://confluence.atlassian.com/get-started-with-jira-service-desk/create-service-desk-request-types-917968307.html]\r\n # Ensure that the \"new help center\" is enabled. Navigate to Project Settings > Portal Settings > View and customize; under \"Try the new help center. Click the toggle switch to the \"on\" position\r\n # Navigate to the help center and try to enter dates into the date picker\r\n\r\nh3. Expected Results\r\n * Correct date displayed when entered using the expected date format\r\n * Customer is allowed to enter dates as per the format defined in the \"Advanced Jira Settings\"\r\n\r\nh3. Actual Results\r\n\r\nWhen setting a date in the past:\r\n||Old help center||New help center||\r\n|!Screen Shot 2018-10-11 at 10.19.12 PM.png|thumbnail!|!Screen Shot 2018-10-11 at 10.12.21 PM.png|thumbnail!|\r\n\r\nWhen setting a date in the future:\r\n !year_3100_1.2018-10-11 22_02_41.gif!\r\nh3. Notes\r\n * This issues only happen in the \"new help center\"\r\n * In the example above, the \"Use ISO8601 standard in Date Picker\" setting is set to \"Yes\". The \"Use ISO8601 standard in Date Picker\" setting also has no effect on the date picker in the \"new help center\"; Jira settings > System > Look and feel({{https://<instance_name>.atlassian.net/secure/admin/LookAndFeel!default.jspa}})\r\n\r\n * The date picker seems to work correctly when using the default {{d/MMM/yy}} format\r\n\r\nh3. Workaround\r\n * Turn off the \"new help center\": Navigate to Project Settings > Portal Settings > View and customize; under \"Try the new help center\", put the toggle switch into the \"off\" position.  Please quote this bug ticket number in the feedback form.\r\n !Screen Shot 2018-10-11 at 11.37.11 PM.png|thumbnail!","createDate":"2018-10-11T20:21:56.000+0000","comments":[]},{"summary":"Unable to export 'Portal only customers' using Firefox","key":"JSDCLOUD-6458","url":"https://jira.atlassian.com/browse/JSDCLOUD-6458","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nUnable to generate an export of 'Portal only customers' using the Firefox browser\r\nh3. Steps to Reproduce\r\n # Login to the instance on the Firefox browser (standard browsing mode or private window)\r\n # Navigate to 'Jira Administration > User Management > Jira Service Desk > Portal only customers'\r\n # Click on the 'Export users' button\r\n\r\nh3. Expected Results\r\n # File should be exported successfully\r\n\r\nh3. Actual Results\r\n # No prompt saying that the file was exported and is ready for download\r\n # No download file in the Downloads folder\r\n # A busy 'spinner' appears next to the button for a few seconds\r\n !Screen Shot 2018-09-20 at 9.35.44 AM.png|width=246,height=92!\r\n\r\nh3. Workaround\r\n # Use a different browser, e.g Google Chrome","createDate":"2018-09-19T23:37:24.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 4, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Word Export: Organizations and Request Participants field values are not displayed","key":"JSDCLOUD-6397","url":"https://jira.atlassian.com/browse/JSDCLOUD-6397","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen exporting an issue to Word format(either from Issue Navigator or directly on the issue), the values for the \"Organizations\" and \"Request Participants\" fields are not displayed in the resulting .doc file.\r\nh3. Environment\r\n * JSD Cloud\r\n\r\nh3. Steps to Reproduce\r\n # Create a test issue where a reporter\r\n\r\nh3. Expected Results\r\n * In the .doc file, the correct values for the \"Organizations\" and the \"Request Participants\" fields are shown\r\n\r\nh3. Actual Results\r\n * This is an export of an issue where the \"Organizations\" and \"Request Participants\" fields have a value set:\r\n !Screen Shot 2018-08-22 at 11.59.36 AM.png|thumbnail!\r\n\r\nh3. Notes\r\n * As long as the \"Organizations\" field or \"Request Participants\" field has a value set, the exported .doc file will not have the values shown as _blank_.\r\n * This bug applies to portal, email or JSD originated issues\r\n * The behaviour when the \"Organizations\" and \"Request Participants\" fields don't have a value set is correct, the field values are displayed as \"None\"\r\n !Screen Shot 2018-08-22 at 11.59.42 AM.png|thumbnail!\r\n\r\nh3. Workaround\r\n * It's possible to create custom fields and create a [workflow post function|https://confluence.atlassian.com/adminjiracloud/advanced-workflow-configuration-776636620.html#Advancedworkflowconfiguration-postfunctions] to copy the field values on transition and have the data displayed in the custom field instead of the original fields\r\n* The post functions can be added to as many transitions within a workflow as required\r\n* For \"Request Participants\", a \"User Picker (multiple users)\" custom field can be used\r\n* For \"Organizations\", a \"Text Field (multi-line)\" custom field can be used\r\n*  Example custom fields:\r\n !Screen Shot 2018-08-22 at 2.55.31 PM.png|thumbnail! \r\n !Screen Shot 2018-08-22 at 2.54.46 PM.png|thumbnail!\r\n* Example post function on a transition:\r\n !Screen Shot 2018-08-22 at 2.56.30 PM.png|thumbnail!\r\n* Example exported .doc file:\r\n !Screen Shot 2018-08-22 at 11.59.06 AM.png|thumbnail!\r\n* Notes: the field will only update when the issue is transitioned(and a post function exists)\r\n* It might be possible to use a [jira:issue_updated webhook|https://developer.atlassian.com/server/jira/platform/webhooks/] to listen for events and then use REST API to fetch/copy(update) the relevant fields.  Please keep in mind that third-party development is outside of our standard support scope and we are unable to provide assistance with scripting.  For more information, please see:\r\n** [JSD Cloud REST API|https://developers.atlassian.com/cloud/jira/service-desk/rest/#api-request-issueIdOrKey-participant-get]\r\n** [Jira Cloud REST API|https://developer.atlassian.com/cloud/jira/platform/rest/#api-api-2-issue-issueIdOrKey-get]\r\n** [ScriptRunner for Jira|https://marketplace.atlassian.com/apps/6820/scriptrunner-for-jira?hosting=cloud&tab=support] has a [\"ScriptListener\"|http://scriptrunner-docs.connect.adaptavist.com/jiracloud/script-listeners.html] feature which allows a script to run when a webhook event has been triggered.  ScriptRunner is supported by the add-on vendor - Adaptavist.","createDate":"2018-08-22T10:28:14.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 7, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Desk users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Desk Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Viewing a JSD customer profile doesn't work","key":"JSDCLOUD-6365","url":"https://jira.atlassian.com/browse/JSDCLOUD-6365","type":"Bug","priority":"","description":"h3. Summary\r\nViewing a customer profile leads to {{/people/search}}.\r\n\r\nh3. Steps to Reproduce\r\n# Create a new JSD ticket through the portal on behalf of a new user so a new JSD customer is being created.\r\n# Navigate to the customers overview in JSD\r\n# Click on the customer\r\n\r\nh3. Expected Results\r\nShow customer profile\r\n\r\nh3. Actual Results\r\nShows all users in my instance without customers listed\r\n!Screenshot_20180802_110334.png|thumbnail! \r\n\r\nh3. Notes\r\nWe use the same link to navigate to a JSD customer in our own app (Atlas CRM) which doesn't work for the same reason.\r\n","createDate":"2018-08-08T03:52:45.000+0000","comments":[{"text":"Closing this ticket as it's a duplicate of\r\nhttps://jira.atlassian.com/browse/JSDCLOUD-6361\r\n\r\n-----\r\nAtlassian Dev team","author":"ari"}]},{"summary":"Portal Logo Does Not Appear on Initial Load","key":"JSDCLOUD-6359","url":"https://jira.atlassian.com/browse/JSDCLOUD-6359","type":"Bug","priority":"","description":"h3. Summary\r\nCustomers who have a Custom Portal Logo have noticed that it does not initially appear when a Customer lands directly on the Portal Page\r\n\r\nh3. Steps to Reproduce\r\n# Edit the Portal Settings for a Service Desk Project and add a Custom Logo\r\n# Visit the Customer Portal for this Service Desk Project\r\n\r\nh3. Expected Results\r\nPortal Logo appears \r\n\r\nh3. Actual Results\r\nPortal Logo does not initially load until the user clicks on one of the Request Type Groups:\r\n !screenshot-1.png|thumbnail! \r\n !screenshot-2.png|thumbnail! \r\n\r\nNo errors in browser console\r\n \r\nh3. Notes\r\nIf the Customer navigates initially from the Help Center to the Service Desk Project, the Portal Logo loads\r\n\r\nh3.Workaround\r\nThe New Service Desk Portal appears to load the Logs without Issues (https://confluence.atlassian.com/servicedeskcloud/blog/2018/06/coming-soon-meet-the-new-help-center) \r\nEngage with Support to enable it. ","createDate":"2018-08-03T23:57:22.000+0000","comments":[{"text":"I've confirmed this is broken if you refresh the portal page. If you navigate to the portal from anywhere else, it works.\r\n\r\nSince this problem is fixed in the new portal design, I'm going to close this issue as this will be bug will be made redundant when the new design is rolled out to everyone.\r\n\r\nAs a workaround, you can go to {{https://<your site name>/servicedesk/customer/portals?customize=true}} and enable the new help center.","author":"Brian Nguyen"}]},{"summary":"Creating SLA Goals Using Quotes For Organization Gives Irregular Results","key":"JSDCLOUD-6108","url":"https://jira.atlassian.com/browse/JSDCLOUD-6108","type":"Bug","priority":"","description":"*Summary*\r\n\r\n When SLA *Goals* JQL are set with the Organization field it can lead to irregular results based on how the quotes are utilized. The irregular results would usually lead to the SLA not being applied on an issue key even though the JQL gives the green tick on the SLA being configured. \r\n\r\n \r\n\r\n \r\n\r\n*Steps to Reproduce*\r\n # Go to the SLA page of the Service Desk Project\r\n # Create a new SLA and name it\r\n # Set an easy *Start* condition such as: *Issue Created*, the *Pause* and *Stop* conditions can be anything.\r\n # In the *Goal* section start creating a JQL such as the following: \r\n\r\n{code:java}\r\n\r\nOrganizations = \"Test\" {code}\r\n\r\n # The JQL will prompt you a \"green tick\" indicating the JQL is valid and you can *Update* and click on *Save* to apply the JQL\r\n # Create an issue to the Service Desk portal and ensure this customer is apart of the Organization Test. \r\n # When the ticket is created the *Goal* will not be applied to the newly created ticket despite meeting the conditions. \r\n\r\n  \r\n\r\n \r\n\r\n*Expected Results*\r\n\r\nThe *JQL* set in the Goal's JQL should be applied to the ticket that meets the condition for the *Organizations*. \r\n\r\n \r\n\r\n*Actual Results*\r\n\r\nThe *JQL* set in the Goal's JQL does not apply to the ticket that meets the condition for the *Organizations*. \r\n\r\n \r\n\r\n*Workaround:*\r\nDespite giving you the \"green tick\" which indicates that the JQL is correct it in fact does not process the JQL that you have configured, there are a number of rules with the quote. \r\n\r\n*Scenario A: Organization Only JQL* \r\n\r\n**If the JQL only contains the Organization, remove the quotes and it will work. \r\n\r\n\r\n{code:java}\r\n Organizations = Test {code}\r\n \r\n\r\n*Scenario B: Organization and Other Conditions JQL Version 1*\r\n\r\n**If the JQL only contains the *Organization* and another condition, in this case if the *Organization* has quotes, ensure the second condition also has quotes, this applies to the third and so on condition, all of it must have quotes to work:\r\n\r\nSUCCESS: \r\n{code:java}\r\nOrganizations = \"Test\" AND priority = \"High\"{code}\r\n FAILURE:\r\n{code:java}\r\nOrganizations = \"Test\" AND priority = High{code}\r\n \r\n\r\n*Scenario C: Organization and Other Conditions JQL Version 2*\r\n\r\n**If the JQL only contains the *Organization* and another condition, in this case if the *Organization* does not have quotes, the second condition does not have to remove quotes, this applies to the third and so on condition:\r\n\r\nSUCCESS: \r\n{code:java}\r\nOrganizations = Test AND priority = High{code}\r\n SUCCESS:\r\n{code:java}\r\nOrganizations = Test AND priority = \"High\"{code}\r\n \r\n\r\n*Note:*\r\n\r\n**This issue does not occur with *Issue Navigator*, regardless of quote or no quote, the search result is accurate, only replicated so far in the SLA *Goal* JQL column. \r\n\r\n ","createDate":"2018-04-17T17:31:22.000+0000","comments":[{"text":"Due to an extended period of inactivity and low interest this bug has been auto-closed. If you’re still experiencing this issue, please comment and we’ll re-open to triage.\r\n\r\nCheers,\r\n\r\nDylan - Service Enablement @ Atlassian","author":"Dylan"}]},{"summary":"Service Desk KB articles open in a New tab. Feature or Bug?","key":"JSDCLOUD-5942","url":"https://jira.atlassian.com/browse/JSDCLOUD-5942","type":"Bug","priority":"","description":"h3. Summary\r\nWhen a user clicks on a Related article within the Service Desk KB view, a new tab is opened. If we click on the same link within Confluence view then it opens the link in the same tab.\r\n\r\nh3. Steps to Reproduce\r\n# Open a Service Desk KB article.\r\n# Click on a related article, it opens in a new tab.\r\n\r\nh3. Expected Results\r\nShould it show as a new tab or on the same tab?\r\n\r\nh3. Actual Results\r\nLinks open in a new tab.","createDate":"2018-02-13T01:01:00.000+0000","comments":[{"text":"This is intended behaviour, we always open in a new tab when a user clicks on a link in a KB article when viewing from Service Desk.\r\n\r\nThere is currently no way to override this behaviour.\r\n\r\nThis behaviour exists mostly for legacy reasons, there's no plans to change this behaviour in the near future.\r\n\r\nGoing to mark this issue as 'Done' for now, we can re-assess if more customers ask for this.","author":"chao"},{"text":"Please consider providing a choice.\r\n\r\nGiving us no ability to change how a hyperlink opens for our front-facing KB articles should be reconsidered.\r\n\r\nFor example, we prefer a decision-based, step-by-step, multi-page troubleshooter. It does not work right when each page opens in new tab.\r\n\r\nWe would appreciate the consideration.\r\n\r\n ","author":"Paul Petrin"},{"text":"Agreed. Showing the pages in Service Desk works well. Opening links in a new tab is jarring","author":"Robert O'Regan"},{"text":"It's actually the /remotepageview endpoint of Confluence that injects a <base> attribute into the DOM. We would like to use that endpoint to integrate Confluence pages into our app. Unfortunately, the \"always opens in new tab\" is unacceptable for our use case. Seems like we'll have to implement our own remotepageview endpoint now.\r\n\r\nIt would be awesome if Atlassian folks could add a query parameter that turns this behaviour off. If the query parameter is optional, then you won't even need to touch existing client code ...","author":"Alexander Weickmann"},{"text":"Thinking this over for another day, we came to the conclusion that the current behavior is not so bad at all. In the sense of \"it's a feature, not a bug\".\r\n\r\nIf the links would open within the iframe:\r\n * The entire Confluence layout would be shown. To embed the Confluence page, service desk calls the special /remotepageview endpoint from Confluence. However, any links on that page still point to the normal page view, and thus will have the full layout\r\n * You could open external links as well. This would completely break the Service Desk context.\r\n * The navigation with the embedded content does not have browser back and forward buttons","author":"Alexander Weickmann"},{"text":"I would also like this issue to be fixed and for Atlassian to reconsider changing this. It is not user friendly at all.\r\n\r\nAt the very least, even if you have to open a new tab, the navigation \"crumb\" menu should not reset.\r\n\r\nExample: I open service desk (Help Center), click on my service desk product (Service Desk 2), click on user guides (Service Desk 2 User Guides), then choose a user guide (User Guide 1), then choose an article (How to log in)\r\n\r\nWhen on the \"User guide 1\" page, the top bar would show: Help Center / Service Desk 2 / Service Desk 2 User Guides / User Guide 1\r\n\r\nWhen on the \"How to log in page\", the top bar only shows: Help Center / Service Desk 2 / How to log in\r\n\r\nThese \"breadcrumbs\" should represent the actual page order, regardless of the fact that the article was opened in a new tab in order for the customer to easier find their way back to the previous page.","author":"Alexandra Bobrow (Instech)"},{"text":"Please fix this so that it behaves like Confluence pages, in the least. Better yet, add the option to choose whether links open in the same tab or another tab. Having help center pages open in a new tab by default is a poor experience since customers do not expect that to happen within the same environment.\r\n\r\nMy request is for all the ways we can link to other pages:\r\n* regular hyperlinks on text\r\n* content by label macro\r\n* children display macro\r\n* other macros with page links...","author":"Laura Sands"},{"text":"We agree with Laura. Users of the helpdesk are lost when they read 10 articles!","author":"Arjan van Duivenboden"},{"text":"We have a guide with links to the \"next step\" or \"previous step\" that would work much better if the links opened in the same tab. Please add support for this. \r\n\r\nYou mentioned \"we can re-assess if more customers ask for this.\"\r\n\r\nHow many more customer requests for this feature do you need before you re-assess? ","author":"Gammy Pichardo"},{"text":"We are running into accessibility issues with this, too. By default, we want all pages to open in the same tab so we don't have to add disclaimers each time something is going to open in a new tab. ","author":"Cassandra Rinker"},{"text":"Please dont ignore this issue and fix! Customers starting to ask us whether JSD is a finished product or if they are beta testing... Quite disappointing.","author":"Thomas"},{"text":"We are not exited with this behaviour as well.\r\n\r\nPlease implement the standard functionality for links: Click > same tab, <CTRL> Click > new tab.\r\n\r\nThanks","author":"mathias.friederich"},{"text":"This is an accessibility issue. Recommendations are for articles to not open in new tabs. Please re-open and resolve this functionality error. ","author":"Sarah Fischer"},{"text":"Is anyone at Atlassian reading these comments? As with a lot of the changes you guys make, it seems like you do whatever you want regardless of customer feedback. ","author":"Gammy Pichardo"},{"text":"Spoiler: They aren't.","author":"Thomas"},{"text":"Please re-open the issue. This is a big problem for us here at Mercedes-Benz HQ as well. This could possibly be a show-stopper for our Confluence implementation for our IAM internal and user documentation. Much appreciated! ","author":"christopher.mensah-bonsu"},{"text":"This \"feature\" actually has an unintended consequence which I have not seen reported anywhere else. When a KB article opens in a new tab, the breadcrumb gets built on the fly, and the previous crumb is broken. This ONLY happens when you open an article in a new tab. \r\n\r\n1. open an article in a new tab\r\n\r\n2. click the previous crumb to go back one level\r\n\r\n \r\n\r\nexpected: the resulting page is the parent of the previous\r\n\r\nactual: the result page is a reload of the child page. It only happens to previous parent, not the grandparent.","author":"Jason Eley"},{"text":"We will walk away probably from Confluence as a KB as this bug is a showstopper for our customers. Atlassian why not use the CTRL key for a week to work with your own public KB and you will experience immediately that the current implementation is super-annoying.\r\n\r\nAnybody has experience ein pluging another Knowledge Base product? Any workaround like guest access?","author":"Henri Volk [amily]"},{"text":"Thanks for reopen. Can we raise the priority please?","author":"Henri Volk [amily]"},{"text":"We are also seeing this issue. It would be nice to see a configuration option in the creation of the link and the macros used for creating links to related articles that would allow for the linked content to be opened in the current tab, new tab, or new window.\r\n\r\nIn general, our users would prefer that the content be opened in the current tab, allowing them to use the browser's back button.","author":"Travis Honegger"},{"text":"As someone new to the KB world, this seems like such a basic functionality to have CHOICE between opening the article in the current tab, new tab, or new window.  Reconsider implementing this functionality.","author":"Brian Weglarz"},{"text":"Very annoying","author":"Andrew Dysert"},{"text":"Having every link open in a new tab is a really terrible user experience and has us thinking twice about using the Knowledge Base functionality to deliver our customer help docs. Certainly hope this gets \"fixed\" someday.","author":"Charles Blaxland"},{"text":"I really want this functionality changed. This is just one of many examples of where Confluence and Service Desk are lagging behind alternative products in terms of experience for both the end-user and the service desk user.","author":"Jarrad"},{"text":"We desperately need this feature to e.g. implement a \"home\" button via url in the JSD customer portal.","author":"mb"},{"text":"We are seriously fed up with the Confluence KB integration into JSM for our external customers and we will start to evaluate other KBs to present our content.\r\n * Anybody has experience with other KB systems? / can recommend other products?\r\n * anything that integrates with JSM (not a must have anymore)\r\n\r\nAs there seems to be zero progress we need to move it.\r\n\r\nThanks\r\nHenri","author":"Henri Volk [amily]"},{"text":"@Henri / [~accountid:58b33c6e73c4] \r\n\r\nHave you taken a look at ServiceNow? They have a better KB integration than Atlassian Jira with Confluence. The only problem for me was that the company that used the ServiceNow didn't organize them very well. But if you organize them well initially, it would be a good alternative product.\r\n\r\nI don't think a lot will happen in this bug report anymore because prio is low and it has been open since 2018… Some tickets here are more than 10 years old without resolution or they just get closed without any solution.\r\n\r\nBR","author":"mb"},{"text":"I agree, Henri. At a certain point we need to say \"enough is enough\". The minimum would be to change the default behaviour to not open in a tab. What is that - 10 minutes of work? 15? And this is something that is absolutely best-practice. I avoid all websites that open links in new tabs without asking.","author":"Harald Breitkreutz"},{"text":"@mb Thanks, contacted them now","author":"Henri Volk [amily]"},{"text":"We'll look into ServiceNow as well, thanks for the tip! ","author":"Gammy Pichardo"},{"text":"We just migrated our customer-facing documentation to Bookstack (open source, self hosted) due to this issue (and a few others). We kept our customer support in JSM though, because we use Jira internally, but it does mean our support ticketing and knowledge base are no longer integrated with each other.","author":"Charles Blaxland"},{"text":"The only reason our team hasn't changed away from Confluence as a customer knowledge base is time. As soon as we have the time we will be moving, and it will be primarily because of this issue - it is just such a bad user experience for our customers.\r\n\r\nIMO, Jira and Confluence just aren't keeping up with the rest of the market options now-a-days.","author":"Jarrad"},{"text":"Thanks @Charles, I see there are also hosted versions, I'll look into that.","author":"Henri Volk [amily]"},{"text":"How has this issue has persisted >3 yrs with only 40 customers reporting!  Must be that most users have only a single page KB?  We have an extensive KB that we hope users will use before submitting tickets - maybe this is why Jira won't implement - it will mean less tickets!!","author":"David Dixon"},{"text":"@David I think most customers are fed up with writing Bug Reports and sending messages to Atlassian because they don't change anything for years anyway. Some Tickets here are open for 10+ years without resolution or get closed without any work being done. Even when the task would be as trivial as opening a tab in the same page.\r\n\r\nI have also encountered a lot of bugs myself that I won't even bother to disclose anymore because it's pointless.","author":"mb"},{"text":"Of course this is a minor issue, but one would hope that would mean it would be a quick fix. The current KB implementation gives the appearance to customers that our entire Service Management system is flawed. ","author":"Guy Renko"},{"text":"Also amazed this basic functionality isn't here. Will be considering other KB implementations, while just dealing with this in the short-term.","author":"Simon Helgerod"},{"text":"Can a Product Manager for Jira Service Management chime in to give their perspective on the current browsing UX for Knowledge Base spaces?\r\n\r\nAs a PM for our company, we are adopting Service Management for our support portal and the current behavior greatly limits the UX for our customers. Just browsing a knowledge base opens many tabs, which is not expected, and requires the non-experienced user to manually close each tab, or a more experienced browser might know how to close all tabs to the right, but that takes awareness of where the first tab is in the ribbon.\r\n\r\nWebsite best practices and customer expectations are that links within a site should default to reusing the current tab, and users can use common browser features to force a link to display in a new tab or new window, and site developers should be allowed to control the UX for individual links to force a link, typically external to site, to open in a new tab.\r\n\r\nAlthough this issue is listed as minor, it does immediately undermine the users' experience and their impression on the company that is using the Service Management service. Every user is impacted by this non-ideal UX. Sure a user can just close tabs, but every user has to do it.","author":"Scott Richardson"},{"text":"[~7d648cc8d2ed] I agree this is as basic as it gets, I wouldn't hold your breath though, this has been open for almost six years now....","author":"Derek Hixon"},{"text":"I second Scott Richardsons comment; can someone from Jira Service Management please comment on this issue and enlighten us as to why it has seemingly not been looked into for over 6-7 years? \r\nThis might seem as a minor issue for backend developers, but for persons mainly dealing with frontend functionalities that have limited to none in experience in backend workflows and setups, this comes across as an unprofessional and outdated function. It also confuses, frustrates and stresses same users simply trying to digest information. \r\n\r\nPlease educate us and bring light to this issue. \r\n\r\nThanks beforehand","author":"Anna Thenberg"},{"text":"I would like to understand if this is going to be resolved soon.  We are putting more and more resources into updating and improving our Service Desk KB.  But this lack of being able to navigate the heirarchy of pages without open window after window is fustrating.   It's clearly designed to host  a set of FAQ and not optimzed for a Knowledge base.","author":"Larry Gerard"}]},{"summary":"Logo not showing in customer portal","key":"JSDCLOUD-5906","url":"https://jira.atlassian.com/browse/JSDCLOUD-5906","type":"Bug","priority":"","description":"h3.Summary\r\n\r\nLogo not showing in customer portal after refreshing the page.\r\n\r\nh3.Steps to Reproduce\r\n\r\n# Project settings;\r\n# Portal settings;\r\n# Click on *View and customize* (or access \"View and customize\" from the Help Centre /servicedesk/customer/portals page)\r\n# Upload a new logo and save\r\n\r\nNote: an other way of reproducing this would be to clear your cache when reloading any page and it also randomly happens)\r\n\r\nh3.Expected Results\r\n\r\nLogo is displayed without refreshing the page.\r\n\r\nh3.Actual Results\r\n\r\nLogo is not showing and the Help Centre name shows up instead.\r\n\r\nRefresh the page or navigate away to display the configured logo.\r\n !Logo1.png|thumbnail! \r\n !Logo2.png|thumbnail! \r\n\r\nh3.Workaround\r\n\r\nRefresh the page or navigate to a different page so the logo starts appearing","createDate":"2018-01-29T11:36:30.000+0000","comments":[{"text":"[~esantos@atlassian.com] I've been trying to reproduce and here are my findings:\r\n# when I upload the new logo it gets previewed correctly (logo change from the customise panel is not saved yet)\r\n# when I save the changes, the logo doesn't show up and the text is then displayed (the url is then: https://xxxxxxxx.atlassian.net/servicedesk/customer/portals?no-redirect=true)\r\n# if I refresh or navigate any other url from tha point the logo then displays fine and I don't hit the problem any more\r\n\r\nCan you confirm that the problem is in step #2 after saving the logo change and that after navigating or refreshing then the logo has no problem rendering?\r\n\r\nEDIT: we checked a little more and it appears that clearing your cache when loading a page also gets the logo to not show up from time to time (e.g. use case of \"first time loading the image without having it cached in the browser\" type of caching issue). I've updated the description of the ticket to reflect that","author":"Clement Capiaux"},{"text":"[~ccapiaux] Yes, the problem is when saving the changes. The logo is not rendering, after refreshing the page the logo display normally.","author":"Eduardo Santos"},{"text":"Due to an extended period of inactivity and low interest this bug has been auto-closed. If you’re still experiencing this issue, please comment and we’ll re-open to triage.\r\n\r\nCheers,\r\n\r\nDylan - Service Enablement @ Atlassian","author":"Dylan"}]},{"summary":"Request type field shows previous request type value in issue navigator list view","key":"JSDCLOUD-5901","url":"https://jira.atlassian.com/browse/JSDCLOUD-5901","type":"Bug","priority":"","description":"h3. Summary\r\nWhen an issue type is changed on a ticket, it will break the request type mapping and the request type field will be displayed as _No match_. However, if the ticket is viewed in the issue navigator list view, the request type field shows the previous request type value so searching for request type null/empty would not return a value.\r\n\r\nh3. Steps to Reproduce\r\n# Create a ticket via the customer portal. Make sure the request type is valid.\r\n# Change the issue type of the ticket.\r\n\r\nh3. Expected Results\r\nThe request type shows no match and the field is empty in the issue navigator list view.\r\nh3. Actual Results\r\nThe request type shows no match and the field shows the previous value in the issue navigator list view.\r\n \r\nh3. Notes\r\nThis affect both tickets when changing the issue type directly or moving issues to own/other projects.","createDate":"2018-01-26T15:23:35.000+0000","comments":[{"text":"Can we please have this fixed?\r\n\r\n ","author":"Farah S Noshirwani"},{"text":"This is causing problems with our JQL queries and automations.","author":"Reiss Snooks"},{"text":"Hi, the corresponding issue on JSDSERVER seems to be this one : JSDSERVER-6395\r\n\r\nThe Request Type management when editing IssueType or moving ticket leads to a bunch of issues and is one of the most serious problems with JSD. ","author":"Thomas Papougnot"},{"text":"My team is also impacted by this bug. We'd like to get it resolved to get our validators working properly.","author":"Jeret Shuck"},{"text":"Hey folks!\r\n\r\nFor all of you that are being affected by this, here it goes a possible workaround:\r\n # Create a new automation rule (not legacy automation)\r\n # The best trigger for this is the *Field value changed*:\r\n ** *Fields to monitor for changes*: Issue Type\r\n ** *For*: Edit Issue (Transition issue can be added here too)\r\n # For action, pick *Edit Issue* action\r\n ** Select *More Options* and paste the JSON below:\r\n\r\n{code:json}\r\n{\r\n    \"fields\": {\r\n        \"Request Type\": null\r\n    }\r\n}\r\n{code}\r\nThat's it! This should be enough to free you from this bug. :D\r\n\r\nHere are a few considerations:\r\n # This rule can be created under the *Scope* of *Single Project*\r\n # In some sites, this field is called *Customer Request Type* instead of *Request Type*, this should reflect in the *JSON* too.","author":"Yuri Moura"},{"text":"@Yuri - You'll need to make a small correction. See below:\r\n\r\n \r\n{    \"fields\": {        \"Customer Request Type\": null    }\r\n}","author":"Jeret Shuck"},{"text":"Hi all, thank you for your interest here. We are reviewing this bug and are looking to see when we can implement a fix. We are very much aware that this is a blocker for many of you, particularly those who have issues with JQL and automation. We will provide an update in the next few weeks on this once we have have understood the work involved and what the impacts are. \r\n\r\nThanks for your patience and sorry for the inconvenience,\r\n\r\nJehan","author":"Jehan Gonsalkorale"},{"text":"Hi all, \r\n\r\nSorry for the delay here, we are reviewing top priorities for our team and will see when we can fix this bug. Apologies for the inconvenience, I know this is a pain for you all and hope to fix this as soon as we are able to. \r\n\r\nBest regards,\r\n\r\nJehan Gonsalkorale\r\n\r\nProduct manager, Jira Service Management","author":"Jehan Gonsalkorale"},{"text":"Hi everyone,\r\n\r\nThis is Rachel Crossman from the Jira Service Management Product Management team. Thank you for your patience as we work on investigating this bug.\r\n\r\nLooking into this, we've identified complexity in the potential solutions, as there could be unintended flow-on impacts to other areas of the product experience related to request types. We're continuing to investigate safe resolutions, and we will update here again in the new year as we dive deeper into the options.\r\n\r\nThank you again for your patience!\r\n\r\nRachel \r\n\r\n ","author":"Rachel Crossman"},{"text":"Hi everyone,\r\n\r\nThis is Rachel Crossman from the Jira Service Management Product Management team. Thank you for your patience as we've looked into this bug. \r\n\r\nOn further investigation, we have found that the original Request Type is still associated with the Issue (in the database), but that the Issue Type & Request Type are not connected in that project, and are an \"invalid\" pairing. Because they are an invalid pairing, it is causing some inconsistencies in what is shown across different product experiences (Issue View & Portal; vs Issue Navigator and Queues). \r\n\r\nTo resolve this inconsistency, we will be updating the Issue View and Portal Views to show the _original_ Request Type, so it will match what is shown in the Issue Navigator, Queues and other JQL-based experiences. We will be including some UI prompts on Issue View to indicate that the Request Type is Invalid and that it needs to be updated. We have decided to do this, rather than hide the Request Type in the JQL-based experiences as suggested on this bug, as it is true to the real state of the database. \r\n\r\nI will provide an update here again soon, with a timeline for the resolution. \r\n\r\nWe are looking now into solutions to the root cause of this problem, and how we can better prevent this Invalid state from occurring, as well as more ways to alert and surface any Issues that are in this state. \r\n\r\nIf you have any questions, comments, or feedback about this issue and our proposed solution, please do reach out here and I'd be happy to book in time to chat!\r\n\r\nKind regards,\r\n\r\nRachel\r\n\r\n ","author":"Rachel Crossman"},{"text":"Hi everyone,\r\n\r\nThank you again for your feedback. We have now fixed this issue, and will be closing this bug.\r\n\r\nAs the original Request Type is still stored on the Issue (despite the Issue Type and Request Type not matching), we have changed the behaviour so that the original Request Type will now show on the Issue View (as it does in Filters & Queues).\r\n\r\nOn Issue View, we have highlighted that the Request Type is Invalid so that users can select a valid Request Type for that Issue Type - this will then update the Request Type value on the Issue, and the new value will show in all views (Queues, Issue View, etc).\r\n\r\nWe have identified that the Move Issue/Change Issue Type experiences are the most common cause for Issues ending up in this state, and are looking into this as a separate item of work. Please follow [Update request type upon issue type change|https://jira.atlassian.com/browse/JSDCLOUD-1835] for further updates.\r\n\r\nThank you,\r\n\r\nRachel Crossman\r\n\r\nSenior Product Manager - Jira Service Management\r\n\r\n ","author":"Rachel Crossman"}]},{"summary":"Unable to navigate from portal view to agent view in new Jira experience when project key = PROJECTS","key":"JSDCLOUD-5882","url":"https://jira.atlassian.com/browse/JSDCLOUD-5882","type":"Bug","priority":"","description":"h3. Summary\r\nIf Project Key = \"PROJECTS\", navigating from portal view\r\nhttps://INSTANCEDOMAIN/servicedesk/customer/portal/1/PROJECTS-1\r\nto https://INSTANCEDOMAIN/projects/PROJECTS/issue/PROJECTS-1 is not possible and will show an infinite loading page.\r\n\r\nh3. Steps to Reproduce\r\n# Create a project with Project Key = \"PROJECTS\"\r\n# Navigate to any issues via the portal, eg: https://INSTANCEDOMAIN/servicedesk/customer/portal/1/PROJECTS-1\r\n# Click on the Issue Key, eg: PROJECTS-1\r\n\r\nh3. Expected Results\r\nPage is navigated to https://INSTANCEDOMAIN/projects/PROJECTS/issue/PROJECTS-1\r\nh3. Actual Results\r\nConsole shows error\r\n{{Expected to find web-item by key(s) [com.atlassian.servicedesk.project-ui:sd-project-sidebar-queues,servicedesk.agent.queues], but it couldn't be found in the JIRA navigation component}}\r\n \r\nh3. Notes\r\nIssue does not exist in old Jira experience\r\n\r\nh3.Workaround\r\nAccess to the agent view via direct link, eg: https://INSTANCEDOMAIN/browse/PROJECTS-1","createDate":"2018-01-23T08:38:12.000+0000","comments":[{"text":"Due to an extended period of inactivity and low interest this bug has been auto-closed. If you’re still experiencing this issue, please comment and we’ll re-open to triage.\r\n\r\nCheers,\r\n\r\nDylan - Service Enablement @ Atlassian","author":"Dylan"}]},{"summary":"Condition does not work when comparing Request Type to a string","key":"JSDCLOUD-5701","url":"https://jira.atlassian.com/browse/JSDCLOUD-5701","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nCondition does not work when comparing to a string.\r\nWhen adding Request type to compare, it does not match.\r\nh3. Steps to Reproduce\r\n\r\nOn the workflow, on the transition to \"In progress\" add a Condition with the configuration below:\r\n\r\nField: Request Type (Customer Request Type Custom Field)\r\nCondition: !=\r\nValue: Any request type\r\nComparison Type: String\r\nh3. Expected Results\r\n\r\nThe button to transition the status to \"In progress\" should not appear until the request type is changed.\r\nh3. Actual Results\r\n\r\nThe transition appears and status can be changed.\r\nh3. Notes\r\n\r\nIt does not work if adding the value as a number or option ID as well.\r\nh2. Workaround\r\n\r\nhttps://confluence.atlassian.com/jirakb/how-to-use-request-types-in-workflow-conditions-1346050746.html","createDate":"2017-10-31T18:18:41.000+0000","comments":[{"text":"Per a support ticket we recently submitted, it sounds like this bug also affects \"Status Category\" in the \"Value Field\" workflow condition, which is currently not usable at all. This is also described in [https://community.atlassian.com/t5/Jira-questions/Value-Field-Condition-Current-Status-Status-Category/qaq-p/2229228] .\r\n\r\nA workaround for \"Status Category\" is instead using \"Status\" (which _is_ usable). However, this is not ideal, of course, since the condition must be reviewed and possibly updated any time the workflow statuses are changed.","author":"Joe Snyder"},{"text":"This bug is impacting badly to our projects and workflows.","author":"Sami Shaik"}]},{"summary":"Pagination Shows Wrong Value When Search Box has Query Entered","key":"JSDCLOUD-5595","url":"https://jira.atlassian.com/browse/JSDCLOUD-5595","type":"Bug","priority":"","description":"Summary\r\n\r\nWhen a customer tries to search for a custom query within the *Request* option of the customer portal of an instance, the results shown per page changes as you move from one page to another without any consistency. If there is no query entered in the search bar, the results displayed are correct and as you navigate from one page result to the next there is no issue, the issue per page count is correct. This is only apparent when a custom query is entered within the search functionality of the *Requests* portion of the customer portal. In some cases, it displays that there are a total of 4 pages of issue count to navigate but if you click on Page 2 of Page 4 all of a sudden it decreases to 3 pages only instead maintaining the initially seen 4 pages to navigate.\r\n\r\nSteps to Reproduce\r\n # Open any customer portal access page > Click on the top corner *Requests* > Choose *All Requests*/ *Organization*/*My Request (as long as the issue count displayed per page is more than 1 page)\r\n # In the search field (Request contains...) > search any query that will produce a result with more than 1 page of content.\r\n # The results will be filtered based on the custom query > Scroll down and note the page number and the issue count per page\r\n!Page_1.png|width=489,height=638!\r\n\r\n - Example: Page 1 (1-20 of 27)\r\n\r\n # Click on the Page 2 and notice the change in the issue count and the page number\r\n!Page_2.png|width=691,height=424!\r\n\r\n - Example: Page 2 (21-27 of 7) , the page navigation can disappear as well depending on the total issue count that is filtered from the query\r\n\r\nExpected Results\r\n\r\nTo be able to navigate through the pages and view the filtered issue based on the custom query properly.\r\n\r\nActual Results\r\n\r\nFiltered issue based on custom query changes from page to page without consistency and is hard to actually check and navigate through the issues in a proper manner.","createDate":"2017-09-08T15:53:17.000+0000","comments":[]},{"summary":"Users unable to see issues with security level configured in Service Desk Customer Portal","key":"JSDCLOUD-5585","url":"https://jira.atlassian.com/browse/JSDCLOUD-5585","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nService Desk customer unable to view all requests that have been raised by other customers in the same organization if the request has an issue security level configured.\r\n\r\nHowever they _can_ still access such issues if they access it via a direct link (only if Issue Security level is given to Service Desk Customer - Portal Only Access).\r\n\r\n \r\n\r\nh3. Steps to Reproduce\r\n # Create an Issue security level which includes Administrator role and \"Service Desk Portal - Customer Access\"\r\n # Set the security level in an issue\r\n # Invite a new user as a service desk customer\r\n # Assign the service desk customer as a participant of the issue\r\n # As the customer, go to the Service Desk portal and select Requests -> All requests\r\n\r\nh3. Expected Results\r\n\r\nIssue should be visible to the customer\r\n\r\n \r\n\r\nh3. Actual Results\r\n\r\n_Issue is not visible, however can be accessed with direct navigation (if customer has a direct link)_\r\n\r\n ","createDate":"2017-09-05T23:21:51.000+0000","comments":[{"text":"Hi,\r\n\r\nCan you please provide the time line when this issue can be fixed.because it is still not working.\r\n\r\nThanks.!!","author":"Harvesh Kumar"},{"text":"Hi all,\r\n\r\nThis issue is a duplicate of JSDCLOUD-5582. Please vote & watch that issue for regular updates instead.\r\n\r\nCheers,\r\n\r\nAtlassian Support","author":"Dylan"}]},{"summary":"The option \"Service Desk Customer - Portal Access\" is not working on Issue Security","key":"JSDCLOUD-5582","url":"https://jira.atlassian.com/browse/JSDCLOUD-5582","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen you add the option \"Service Desk Customer - Portal Access\" to an *Issue Security Level*, it is not allowing service desk Customer to view issues.\r\n\r\n \r\nh3. Environment\r\nh3. v3.3.0-OD-1000.2047.0\r\nh3. Steps to Reproduce\r\n # In a Service Desk project, add a default security issue level to all your newly created issues\r\n # Add the Field Security Level to your Service Desk Screens and to the request types to properly configure the security level to all issues created on the customer portal\r\n # Add the option \"Service Desk Customer - Portal Access\" to the default Issue Security level\r\n # As a customer, create a new issue and navigate to *All requests*\r\n\r\nh3. Expected Results\r\n\r\nThe user should be able to see his own request.\r\nh3. Actual Results\r\n\r\nThe number of requests is properly displayed on the customer portal, however, the user is not able to see his own request or get notifications about any updates on his ticket.\r\n\r\nh3. Notes\r\n# The same issue occur when using \"Reporter\" and possibly other JIRA fields\r\n# If a request has Issue security with option \"Service Desk Customer - Portal Access\", automation with the option \"User who triggered the rule\" will also not run. Using *Service Desk Customers* allows the automation to run.\r\n\r\n\r\nh3. Workaround\r\n\r\nAdd the Customer users in a different way to the *issue security level*. e.g: project role *Service Desk Customers*.\r\n","createDate":"2017-09-05T15:07:31.000+0000","comments":[{"text":"This is a duplicate of JSDCLOUD-5585","author":"Grégory Joseph"},{"text":"Apologies for any inconvenience this may have caused.\r\n\r\nThe Atlassian development team has rolled out a fix for this bug.\r\n\r\nPlease let us know if the problem is still happening on your instance. \r\n\r\nThanks,\r\n\r\nAtlassian - JIRA development team","author":"Saman Homayounnejad"},{"text":"Hi ,\r\n\r\nThis is still not working.Can you please suggest me.","author":"Harvesh Kumar"},{"text":"Hi,\r\nit´s still not working. Your Workaround ist not the best way, because we need only Service Desk Customer - Portal Access in the security level. If uers are in project role Service Desk Customers, they will see issues with this security level in Service Desk and in Customer Portal.\r\nWill this problem be solved?\r\n\r\nMany Thanks","author":"przemyslaw.wesolka729326708"},{"text":"Hello [~Przemyslaw.Wesolka729326708],\r\n\r\nI am from our Atlassian Cloud support, this bug is currently no longer reproducible, would you mind opening a ticket on our [Atlassian Support system|https://support.atlassian.com/] providing additional details for us to check? Which project/issues and affected users would be very helpful. All this information will be restricted to you and Atlassian support on the ticket you raise.\r\n\r\nThank you for reaching out,\r\n\r\nRodrigo Becker\r\nAtlassian Cloud Support","author":"Rodrigo B."}]},{"summary":"ServiceDesk request type icons not shown on Queues page","key":"JSDCLOUD-5576","url":"https://jira.atlassian.com/browse/JSDCLOUD-5576","type":"Bug","priority":"","description":"*Description of the problem:*\r\n\r\nRequest type icons are not shown on queue page. The issue does not happen on the portal, project Settings/Request type page, and on the issue view.\r\n\r\n*Steps to reproduce:*\r\n\r\nNavigate to https://<instance>/projects/PROJECTKEY/queues/\r\n\r\n*Error in the developer tool:*\r\n\r\n_viewavatar:1 GET [https://<instance>/secure/viewavatar?avatarType=SD_REQTYPE&avatarId=null|https://wes-it.atlassian.net/secure/viewavatar?avatarType=SD_REQTYPE&avatarId=null] 404 ()_\r\n\r\n_avatarId=null_\r\n\r\n \r\n\r\n \r\n\r\n ","createDate":"2017-08-31T16:28:00.000+0000","comments":[{"text":"Closing this issue as duplicate of JSDCLOUD-5575","author":"ari"}]},{"summary":"Agents who has \"JIRA new experiance\" enabled can't return to JIRA Service Desk project after they clicked on Raise a Reqiest sidebar element","key":"JSDCLOUD-5559","url":"https://jira.atlassian.com/browse/JSDCLOUD-5559","type":"Bug","priority":"","description":"Steps:\r\n0. Log in as Service desk licensed user (agent for example)\r\n1. Enable JIRA New Experiance for that user\r\n2. Go to Service Desk project page\r\n3. Click on 'Raise a request' link in a side bar\r\n4. Try to go back to jira project by using:\r\n * /browse/[prokect_key] link\r\n * JIRA dashboard and than navigating to project through JIRA\r\n\r\nResult: You're being redirected to customer portal all the time\r\n\r\nWorkaround: Go to this project issue link and from there click on any other item in project side bar or go directly to any other JSD project page, e.g.  /projects/[project key]/queues","createDate":"2017-08-24T03:38:52.000+0000","comments":[]},{"summary":"Unable to upload a Help Center logo when using a non-English language preference","key":"JSDCLOUD-5500","url":"https://jira.atlassian.com/browse/JSDCLOUD-5500","type":"Bug","priority":"","description":"h4. Summary\r\n\r\nUnable to upload a Help Center logo when using a non-English language preference\r\n\r\nh4. Prerequisites\r\n\r\nYour account must be using a non-English language preference, e.g. French.\r\n\r\nh4. Workaround\r\n\r\n# Navigate to the customer portal profile page\r\n# Change your language preference to English\r\n# Save changes\r\n# Change your language preferences back to your desired language.\r\n\r\nYou will now be able to upload a logo.","createDate":"2017-07-21T08:18:18.000+0000","comments":[]},{"summary":"Password reset feature has no effect on customer accounts on JIRA Service Desk","key":"JSDCLOUD-5387","url":"https://jira.atlassian.com/browse/JSDCLOUD-5387","type":"Bug","priority":"","description":"h3. Summary\r\n* When trying to reset a customer password via the JIRA Service Desk Project > Customers tab, the JIRA Service Desk administrator is directed to User Management e.g. https://{{INSTANCE_NAME}}.atlassian.net/admin/users/view?username={{CUSTOMER_EMAIL_ADDRESS}}.\r\n* Password reset email is sent, but the URL in the password reset link resets the customer's Atlassian ID password.\r\n* JIRA Service Desk customers do not authenticate using Atlassian ID.\r\n* The password reset feature has no effect on the JIRA Service Desk customer account - the password on a customer account(portal only) stays the same.\r\n\r\nh3. Environment\r\n* JSD 1000.1313.0\r\n\r\nh3. Steps to Reproduce.\r\n# Create new customer in JSD.\r\n# Customer accepts invitation sent via email.\r\n# Customer sets a \"Display name\" and password e.g. \"Password123\".\r\n# JIRA Service Desk admin resets customer password by hovering the mouse pointer over the customer account; More > Administer.  The JIRA Service Desk Admin is directed to User Management(https://{{INSTANCE_NAME}}.atlassian.net/admin/users/view?username={{CUSTOMER_EMAIL_ADDRESS}}).\r\n# Password email sent to customer.\r\n# If customer doesn't have an Atlassian ID, customer is prompted to sign up for an Atlassian ID.  If the customer has an Atlassian ID, then the customer is prompted to reset the Atlassian ID password.\r\n# After the customer sets a new password.\r\n# Customer tries to log into the Service Desk Portal with new credentials - login fails.\r\n\r\nh3. Expected Results\r\n* Password is reset and access to the Service Desk Portal is granted.\r\n\r\nh3. Actual Results\r\n* Customer receives an error message: \"Sorry, your email and password are incorrect - please try again.\"\r\n* Access is not granted.\r\n \r\nh3. Notes\r\n* Using the original password(\"Password123\" in our example) that was set will allow the customer to log into the Service Desk Portal.  \r\n* The password reset feature has no effect on the JIRA Service Desk customer account.\r\n\r\nh3.Workaround\r\n* Navigate to: https://{{INSTANCE_NAME}}.atlassian.net/admin/jira-service-desk/portal-only-customers/view?username={{USERNAME}} (in most cases the email address is the username) and update the customer's password from there","createDate":"2017-05-23T13:13:25.000+0000","comments":[{"text":"This is the wrong link for portal only customers. The correct link to edit a portal only customer is https://{{INSTANCE_NAME}}.atlassian.net/admin/jira-service-desk/portal-only-customers/view?username=USERNAME (in most cases the email address is the username). That page allows to set a new password for customers. Please note that this type of user can only ever log in through INSTANCE_NAME.atlassian.net/servicedesk/customer/portal as going to INSTANCE_NAME.atlassian.net/ will redirect the user to the Atlassian Account login page which only allows Atlassian Account users to log in.\r\n\r\nWe are currently in the process of enabling Atlassian Account on all sites (step 1) as well as a new Identity platform (step 2). Once step 1 is complete, portal only customers need to be managed in a separate section in Site Administration: JIRA Service Desk > Portal only customers. Until step 2 is complete, the existing user link still partially works (as noticed in this issue, reset password does not!). I suspect the customer reached the page due to JSDCLOUD-5322 as navigating in the site admin UI should never point a portal only customer to the old link.\r\n\r\nAs a side note: We do not recommend converting accounts, unless users actual need licenses. See [https://confluence.atlassian.com/cloud/select-the-right-account-for-your-jira-service-desk-customers-873871210.html#SelecttherightaccountforyourJIRAServiceDeskcustomers-HowdoIknowwhichaccountisbestformycustomers?] and  [https://confluence.atlassian.com/cloud/select-the-right-account-for-your-jira-service-desk-customers-873871210.html#SelecttherightaccountforyourJIRAServiceDeskcustomers-MysitetransitionedtoAtlassianaccounts.HowcanIgivelicensestocustomersIwanttocollaboratewithinJIRAorConfluence?]","author":"Michael Ruflin"},{"text":"The root problem here is that the original user edit link still works, but shows a broken experience. We are soon completing the Identity Platform migration, at which point the link will cease to work and that should clear up the confusion mentioned in this ticket","author":"Michael Ruflin"}]},{"summary":"Unable to administer customers on JIRA Service Desk","key":"JSDCLOUD-5356","url":"https://jira.atlassian.com/browse/JSDCLOUD-5356","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nAfter enabling Atlassian Account, JIRA is returning an error message (*_User does not exist)_* when navigating to *administer user* on Service Desk.\r\nh3. Environment\r\n\r\nCloud - JIRA v1000.929.1\r\nh3. Steps to Reproduce\r\n\r\n  # Navigate to a Service Desk Project\r\n\r\n  # Click on *customers*\r\n\r\n  # Roll the mouse on a customer which doesn't have a JIRA Account (Restricted Portal) > More > Administer User.\r\nh3. Expected Result\r\n\r\nIt displays the Site Administration screen and the default options (*Log in as User, Reset password, etc)*\r\nh3. Actual Results\r\n\r\nIt displays an error message: _User *user1* does not exist._\r\n\r\n \r\nh3. _Workaround:_\r\n\r\n_Convert the user to Atlassian Account enable again the *Administer User* option._","createDate":"2017-05-02T20:11:17.000+0000","comments":[{"text":"cc: [~aromanenko]","author":"Kiran"},{"text":"This is a duplicate of this bug\r\nhttps://jira.atlassian.com/browse/JSDCLOUD-5322\r\nThere is a workaround described in linked ticket.","author":"ari"}]},{"summary":"Password strength information hint not on user signup form when anonymous request creation enabled","key":"JSDCLOUD-5351","url":"https://jira.atlassian.com/browse/JSDCLOUD-5351","type":"Bug","priority":"","description":"When anonymous request creation is enabled, the sign up form in the customer portal does not display password policy information in the modal that appears next to the password field.\r\n\r\n*Steps to reproduce*\r\n # Create a project with JSD and enable public signup for that project, make sure anonymous request creation is disabled\r\n # View that project as an anonymous user in the customer portal\r\n # Navigate to the sign up page and note that there is a password recipe indicator to the right of the password field\r\n # Enable anonymous request creation for that project\r\n # Reload the sign up page—the password recipe indicator will no longer be there\r\n\r\n \r\n\r\n*Expected results*\r\n\r\nProjects with anonymous request creation enabled should have the password policy information on the sign up form","createDate":"2017-05-02T03:33:35.000+0000","comments":[{"text":"Due to an extended period of inactivity and low interest this bug has been auto-closed. If you’re still experiencing this issue, please comment and we’ll re-open to triage.\r\n\r\nCheers,\r\n\r\nDylan - Service Enablement @ Atlassian","author":"Dylan"}]},{"summary":"Keep me logged in is not working for Customer Portal","key":"JSDCLOUD-5268","url":"https://jira.atlassian.com/browse/JSDCLOUD-5268","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nKeep Me Logged In tick-box not working in Customer Portal\r\nh3. Environment\r\n * JIRA Service Desk 3.3.0-OD-1000.964.0\r\n * Chrome\r\n * Firefox\r\n\r\nh3. Steps to Reproduce\r\n # Log in to Customer portal with \"Keep me logged in\" Tickbox is ticked.\r\n # Perform some actions in portal.\r\n # Close down browser.\r\n # Open the browser back.\r\n # Navigate to portal.\r\n\r\nh3. Expected Results\r\n - Is Still logged in to portal even after browser restart.\r\n\r\nh3. Actual Results\r\n - Still get prompted to log in.\r\n\r\nh3. Notes\r\n\r\nFound out the cookies *Expires when the browsing session ends*. Refer below screenshot :-\r\n\r\n!cookies.png|thumbnail!\r\n\r\n ","createDate":"2017-03-04T03:49:49.000+0000","comments":[{"text":"This is definitely a problem if the instance is not opted-in to Atlassian account, as we essentially ignore it for local customers. After Atlassian account is enabled, we actually remove the checkbox completely. I'm tempted to ignore that specific problem as it'll be fixed eventually when Atlassian account is rolled out for everyone.\r\n\r\nHowever, we should update our sessions such that the cookies persist across sessions. I believe 30 days is a common and reasonable length of time.","author":"Brian Nguyen"}]},{"summary":"Enabling StatusPage for JSD add-on breaks the project 'Raise a request' option","key":"JSDCLOUD-5261","url":"https://jira.atlassian.com/browse/JSDCLOUD-5261","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhile the StatusPage add-on for JSD is enabled, the option inside of Service Desk to 'Raise a request' does not function properly. Clicking that button will open the overlay, but it will be empty and no customer information can be entered.\r\nh3. Environment\r\n\r\nJIRA Service Desk Cloud\r\nh3. Steps to Reproduce\r\n # Install the StatusPage for JSD add-on for Cloud ([https://marketplace.atlassian.com/plugins/jsd-status-page/cloud/overview])\r\n # As an agent, go to queue view and choose *Raise a request* from the left hand navigation panel\r\n\r\nh3. Expected Results\r\n\r\nThe customer portal overlay loads on top of the page and you are able to select a request.\r\nh3. Actual Results\r\n\r\nThe customer portal overlays loads but shows a blank page and there is no possibility to raise a request.\r\n\r\n!image-2017-01-26-20-20-53-719.png|thumbnail!\r\nh3. Workaround\r\n\r\nAccessing the portal URL in a separate browser window allows you to access the portal with no issues. \r\n\r\nIf you strictly need to use *Raise a request* feature from inside the JSD project, then the only workaround is to disable the StatusPage add-on.","createDate":"2017-01-26T19:07:51.000+0000","comments":[{"text":"Navigating to portal as agent from queue view now works properly with Status Page app installed.","author":"Gerry Tan"}]},{"summary":"Internal comment tab doesn't respond in pop-up windows","key":"JSDCLOUD-5184","url":"https://jira.atlassian.com/browse/JSDCLOUD-5184","type":"Bug","priority":"","description":"h3. Summary\r\nWhen adding comments in pop-up windows in SD requests, the 'Internal comment's tab is not responding.\r\n\r\nFor example, if you have a Service Desk project which is shown in an Agile board, when viewing it in the Detail View in Backlog or Active Sprint pages, if you click to comment on it, the pop up page has an 'Internal Comment' tab that doesn't respond anymore.\r\n\r\nThis is also failing when transitioning the issue when it has comment in the transition screen. The pop-up window to transition has an 'Internal comment' tab that doesn't respond.\r\n\r\nh3.Workaround\r\nThe Internal comment functionality can also be accessed directly from the ticket. Navigate to the issue and add any internal comments there.\r\n\r\nh3. Environment\r\nReplicated in these versions:\r\n* JIRA v7.2.0-OD-03-005\r\n* JIRA Service Desk v3.2.0-OD-04-003-D20160224T230516\r\n* JIRA Agile v7.2.2-D20160223T031242\r\n\r\nh3. Steps to Reproduce\r\n\r\nh4. Scenario 1. When transitioning\r\n# Create a Service Desk project\r\n# Create a request in this project\r\n# Make sure you have a transition to the customer with comments (should be there by default as 'Respond to Customer')\r\n# Click the transition\r\n# Click the 'Internal comment' tab\r\n\r\nh4. Scenario 2: In an Agile board\r\n# Create a Service Desk project\r\n# Create a board (either Scrum or Kanban) associated with this project (showing issues from it)\r\n# Make sure you have requests in the project\r\n# Go to the boards Backlog or Active Sprint page, where there is at least one issue\r\n# Click it to open its Detail View\r\n# In 'Comments' section, click the 'Comment' button\r\n#* A Comment pop-up window will appear\r\n# Click the 'Internal comment' tab\r\n\r\nh3. Expected Results\r\nIn both cases, the 'Internal comment' tab should be selected and this message should appear:\r\n{quote}\r\nYour comments will not be visible to customers on the portal.\r\n{quote}\r\n\r\nh3. Actual Results\r\nThe tab doesn't respond.\r\n\r\nNo errors in logs, but this appears in JavaScript console when accessing the board:\r\n{noformat}\r\nRapidBoard.jspa:1 Uncaught (in promise) undefined\r\nhttps://theeagle-sd.atlassian.net/rest/dev-status/1.0/issue/summary?issueId=undefined&_=1456420549436 Failed to load resource: the server responded with a status of 400 (Bad Request)\r\n{noformat}\r\n\r\nh3. Notes\r\nThis is a very recent bug, because I cannot replicate in these versions (which at the time that the affected version was release, some instances were still using):\r\n* JIRA v7.2.0-OD-02-009\r\n* JIRA Service Desk v3.2.0-OD-03-003-D20160217T060814\r\n* JIRA Agile v7.2.1-D20160217T041804\r\n\r\nThere was a similar bug:\r\nhttps://jira.atlassian.com/browse/JSD-2292\r\n\r\nBut this current bug seems to start happening in a much earlier version. As I mentioned above, version JIRA SD v3.2.0-OD-03 was not affected and that other bug is for version 2.5.4.","createDate":"2016-02-25T17:20:27.000+0000","comments":[{"text":"This +bug+ significantly impacts my workflow efficiency. There are already too many things where the ability to modify some aspect of an issue requires navigating away from the Kanban view. Since this literally just broke yesterday, how hard can it be to find and fix or rollback to the prior version?\r\n\r\nThanks.","author":"Richard Kaye"},{"text":"Richard, I totally agree. We are experiencing a lot of problems with our authorisation flows. If I understand correctly, this could take days or months before it will be solved.\r\n\r\nTo Atlassian : could you please rollback to the previous version ?\r\n\r\nThanks,\r\nIngrid","author":"Ingrid Wauters"},{"text":"This is a massive issue. I second being rolled back to a working version. This is mission critical.","author":"Leo Vogel"},{"text":"This issue severely impacts our work efficiency.","author":"David Vogel"},{"text":"Yeah, please fix this or do a roll-back. I cannot understand that this hasn't been tested...","author":"Dennis Brouwer"},{"text":"Hi, I need to add my input here - this is causing major troubles with one of my clients.\r\n\r\nPlease can this be addressed as a matter of urgency?","author":"Cheryl Childs [Dreamsmiths]"},{"text":"Any idea - when this will be solved ?\r\nI searched: \"respond to customer\" on https://support.atlassian.com/servicedesk/customer/portal/23 \r\nGot a KB-article about configuration or licensing issues. But none of them apply - I cannot figure out where the configuration should be, nor where to what license info should be changed to.","author":"Theo"},{"text":"If you think this issue is important to resolve, vote for it!\r\n--Tim Szczesuil, Invaluable","author":"Tim Szczesuil"},{"text":"They should have never released a version with a broken function. If so : Rollback.","author":"Dennis Brouwer"},{"text":"Workflow efficiency is reduced, please fix it soon.\r\nThank you!","author":"Syeda Nuzhat Tahseen"},{"text":"This needs to be fixed ASAP. This is a major functionality reduction that should have never been released in the first place. \r\n\r\nDoes Atlassian even test before they release updates? You would think someone would have noticed this.","author":"Kyle Parker"},{"text":"...You think they dont?","author":"Theo"},{"text":"How can we wote for this issue?","author":"Theo"},{"text":"6 days with no resolution. I'm never going to get back all the lost time and productivity caused by this bug. Can someone from Atlassian please give an update on the status of this issue?\r\n\r\nTheodor, in case you're still puzzled by how to vote there is a link in the People section in the upper right corner of this page.","author":"Richard Kaye"},{"text":"Hi guys,\r\n\r\nSorry for the frustration this issue is causing you. We definitely understand that this is having a major impact to many of you in terms of workflow and efficiency.\r\n\r\nWe are working to fix the underlying problem and are planning to deploy a fix in the next few days.\r\n\r\nIn the meantime, it is still possible to work around this issue by using the comments section of the full issue view screen in JIRA.\r\n\r\nWe will post any further updates on this issue.\r\n\r\n-JIRA Service Desk Team","author":"shihab"},{"text":"+Still broken+. Still making my life _more difficult_ rather than less difficult. Yes, there is a workaround but it turns a fairly straightforward single step commenting process into multiple steps that +use more of my precious time+. Aren't you guys supposed to be \"agile\"?","author":"Richard Kaye"},{"text":"Hi guys - just a quick update - the fix has been deployed to all Cloud instances.\r\n\r\nApologies again for the frustration this has caused.\r\n\r\nIf you are still experiencing issues with this please raise a support request on https://support.atlassian.com/\r\n\r\nCheers,\r\n\r\n-JIRA Service Desk Team","author":"shihab"},{"text":"Thank you. It's really a shame it had to take so long. It's also a shame that this made it out in the first place. Hopefully a learning experience...","author":"Richard Kaye"}]},{"summary":"Newly Created Service Desk does not Respect the Permission Setting with Project Role","key":"JSDCLOUD-5153","url":"https://jira.atlassian.com/browse/JSDCLOUD-5153","type":"Bug","priority":"","description":"Steps to replicate:\r\n\r\n# Create a new Service Desk request with new project\r\n# Remove all the groups from the people's tab\r\n# Remove all the groups from project role\r\n# Navigate to https://<intstance name>/servicedesk/customer/portals\r\n# Notice the project created is visible in the portal\r\n# Issue can be still created\r\n\r\nExpected behavior, since the all users does not have permission to even browse the project, it should not allow the project to be viewable on the portal at the first place.\r\n\r\nSuspect: There are a new flag that allows customer to view the portal. Remove the flag seems to be fix the issue.\r\n\r\nWorkaround:\r\nRun the follow query:\r\n{noformat}\r\nupdate \"AO_54307E_SERVICEDESK\" set \"OPEN_CUSTOMER_ACCESS\" = null where \"OPEN_CUSTOMER_ACCESS\" = 1;\r\n{noformat}\r\n\r\nThis will unflag the *\"OPEN_CUSTOMER_ACCESS\"* flag and it should be remain hidden for unintended group.\r\n\r\n","createDate":"2014-08-26T06:58:34.000+0000","comments":[]},{"summary":"No error when reaching character limit in Help Center Name field","key":"JSDCLOUD-5130","url":"https://jira.atlassian.com/browse/JSDCLOUD-5130","type":"Bug","priority":"","description":"h3. Summary\r\nWhen editing JIRA Service Desk Configuration, and adding a name in *Help Center Name* over 30 characters, it is not saved, yet no error is given.\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to {{/secure/admin/ViewSystemInfo.jspa}}\r\n# Next to *Help Center Name* enter a title over 30 characters.\r\n# Click the checkbox to attempt to save.\r\n\r\nh3. Expected Results\r\nGenerally when you click the checkbox, it loads a bit, and then saves.\r\n\r\nh3. Actual Results\r\nSee the *loading* icon, and then the field remains editable for user to attempt with a different name. No error is thrown.\r\n\r\nFrom Network tab on Chrome:\r\n{noformat}\r\nRemote Address:104.192.140.97:443\r\nRequest URL:[URL]/rest/servicedesk/1/servicedesk-data/global-portal-settings\r\nRequest Method:PUT\r\nStatus Code:400 Bad Request{noformat}\r\n\r\nh3.Notes\r\n[Branding your Customer Portal|https://confluence.atlassian.com/display/SERVICEDESK/Branding+your+Customer+Portal] mentions usage of the field, but does not say there is any restriction on the length.\r\n \r\nh3.Solution / Workaround\r\nChoose a title under 30 characters","createDate":"2015-05-07T15:26:17.000+0000","comments":[{"text":"Hi, I couldn't reproduce this problem any more:\r\n* nor by going to {{/secure/admin/ViewSystemInfo.jspa}} - this isn't accessible any more these days in Cloud (and even then I suspect that Jira specific screen has never been able to manage the JSD Help Centre Name value)\r\n* nor by accessing {{/servicedesk/admin/<project-key>/portal-settings}} and modifying the portal name (I've set a pretty long string as the portal name and it didn't error, and is now visible in the portal UI).\r\n\r\nIf this is still a problem in JSD Cloud, feel free to re-open this ticket :)\r\n","author":"Clement Capiaux"}]},{"summary":"Request types hidden by deleting parent group appear in shared portal search","key":"JSDCLOUD-5079","url":"https://jira.atlassian.com/browse/JSDCLOUD-5079","type":"Bug","priority":"","description":"Summary\r\nWhen a request type group is deleted, the request types within that group should be hidden when searching in the portal. These are hidden from searching in the project's portal as expected, but not when searching in the shared customer portal.\r\nh3. Steps to Reproduce\r\n # Create a new Service Desk project\r\n # Delete the 'General' request type group, which should hide all of the request types in that group in the Customer Portal\r\n # Navigate to the Customer Portal for that project\r\n # Search for 'emp', notice that no results are found matching this request type and project\r\n # Navigate to the shared portal Help Center\r\n # Search for 'emp', notice that request types within the deleted group from the project are appearing, e.g. \"Employee exit\"\r\n\r\nh3. Expected Results\r\n\r\nRequest types from the group that was deleted should not appear in the shared portal Help Center search.\r\nh3. Actual Results\r\n\r\nRequest types that should be hidden are appearing in the search results.\r\n\r\n ","createDate":"2017-03-07T22:24:36.000+0000","comments":[]},{"summary":"As an admin, Could Not Invite Some Customers, User Not Found when inviting a user","key":"JSDCLOUD-5043","url":"https://jira.atlassian.com/browse/JSDCLOUD-5043","type":"Bug","priority":"","description":"h3. Summary\r\nUnable to invite a Customer to a Service Desk that is currently either an inactive user, or the user was removed from the instance and still is associated with a JIRA issue(reporter, assignee, or comment added).\r\n\r\nThis is due to the user having already existed in JIRA and has association with a JIRA Issue, therefore JIRA is maintaining a copy of the user in its database.\r\n\r\nh3. Environment\r\n* JIRA 7.1.0-OD-05-006\r\n* JIRA Service Desk 3.1.0-OD-12-001\r\n\r\nh3. Steps to Reproduce\r\n# Add a user to JIRA\r\n# Create a JIRA Issue as the user, assign issue to user, or add comment as user\r\n# Delete the user from JIRA, or mark the user as inactive (both trigger the same results)\r\n# Try to invite the user to Service Desk Project as Customer\r\n\r\nh3. Expected Results\r\nAn error should be displayed with more accurate verbage regarding the issue, and provided documentation/direction on how to fix.\r\n\r\nh3. Actual Results\r\nReceive vague/unhelpful error {color:red}*Could not invite some customers, user not found.*{color}\r\n\r\nh3.Workaround if user has been removed entirely\r\n# Visit User Management on the instance (https://<instance>.atlassian.net/admin/users)\r\n# Click Create User and re-create the user with the email address that failed the Service Desk customer invite.\r\n-- When creating the user, ensure that no application access is selected\r\n# After the User has been added, select *Restricted Portal* access\r\n# Proceed to the Service Desk and re-invite the Customer\r\n\r\nh3. Workaround if user has been deactivated\r\n# Check the inactive users in User Management (https://<instance>.atlassian.net/admin/users?activeFilter=inactive)\r\n# Navigate to the user's User Management profile\r\n# Remove from any unwanted Groups/Applications\r\n# Re-activate user\r\n# Invite to Service Desk","createDate":"2016-02-05T10:47:20.000+0000","comments":[{"text":"Hi\r\n\r\nI being having issue when inviting customers to multiple projects which is critical since i am unable to add same customer to multiple projects. Await fix for the above solution. \r\n\r\nRegards\r\nDinuk ","author":"dinukc126216109"},{"text":"Hi \r\n\r\nAs the issue being fixed ? ","author":"dinukc126216109"},{"text":"Atlassian,\r\n\r\nI'm thrilled that I was pointed to a workaround for this bug. We've been plagued by quite a few users that are mysteriously unable to access our Service Desk because of this. The workaround is fine for now, I hope you can get this fixed soon. \r\n\r\nIs there a way to identify all of my inactive users so I can restore their access all at once?\r\n\r\nThanks!","author":"Spenser Rubin"},{"text":"This seems to be yet another situation where we are being told to grant someone Global Admin rights to work aound this issue.  The person who manages our serive desk does not have global rights and cannot perform the work around steps as outlined here.  Just as with the Start // Manage Sprint situation, you are now telling us to grant Global Admin rights or further burden the I.T. support staff with more tasks.\r\n\r\nIs there an ETA for when this issue will be resolved, as this is very disruptive to my team.  We would prefer that our client-facing Service Desk team manage this process, not the internal I.T. support team.","author":"Sean McDonald"}]},{"summary":"Customer portal logo broken on IE11","key":"JSDCLOUD-5041","url":"https://jira.atlassian.com/browse/JSDCLOUD-5041","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nIn JIRA Service Desk, IE11 will only render a custom logo on a customer portal if the image is in a .PNG format. .BMP, .JPG, .GIF logos will break in IE11(see screenshots). Chrome, Firefox and Safari will render the any of the mentioned image formats without issue.\r\n  \r\n||IE11||Chrome||\r\n|!Screen Shot 2017-03-10 at 4.47.25 PM.png|width=182,height=128!|!Screen Shot 2017-03-10 at 4.47.12 PM.png|thumbnail!|\r\nh3. Environment\r\n\r\nJIRA Service Desk 3.3.0-OD-1000.1015.2\r\n\r\nJIRA 1000.815.2\r\nh3. Steps to Reproduce\r\n\r\n_On JIRA Service Desk:_\r\n # Navigate to: [NameOfYourProject] > Project Settings > Portal Settings: Logo\r\n # Click \"Choose logo\" and select a .BMP, .JPG or .GIF image\r\n # Save the selection\r\n # Access the customer portal in IE11\r\n\r\nh3. Expected Results\r\n\r\nLogo image is rendered in IE11\r\nh3. Actual Results\r\n\r\nImage is not rendered in IE11 (see screenshot in Summary)\r\nh3. Notes\r\n * Renaming an image to .PNG will not work - the image needs to be converted to a .PNG\r\n * Firefox , Chrome, Safari will render all the mentioned image formats\r\n * Testing was conducted on the following browsers:\r\n ** Firefox 51.0.1 (64-bit)\r\n ** Safari 10.0.3\r\n ** Chrome 56.0.2924.87 (64-bit)\r\n ** IE11 11.0.9600.18097\r\n\r\nh3. Workaround\r\n\r\nConvert your logo to a .PNG image and upload to your customer portal.","createDate":"2017-03-10T15:32:31.000+0000","comments":[{"text":"Same for the on-premise version 3.4.1","author":"Walter Haas"}]},{"summary":"Table of Contents Macro does not display on KB Pages from within the Customer Portal","key":"JSDCLOUD-3565","url":"https://jira.atlassian.com/browse/JSDCLOUD-3565","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-3565].\r\n{panel}\r\n\r\n\r\n{panel:bgColor=#79F2C0}\r\n*Confluence Table of Contents macro is now supported on Jira Service Desk Cloud knowledge base *\r\nHi all, just want to let you all know table of content macro is now supported on Jira Service Desk Cloud. Go try it out today!{panel}\r\nh3. \r\n\r\nSummary\r\n\r\nWhen a Confluence KB Space is linked to a Service Desk project, the Table of Contents Macro is not displayed on any page containing the macro when viewing from the Customer Portal as a Customer.\r\nh3. Steps to Reproduce\r\n # Link a Confluence KB Space to a Service Desk Project\r\n # Add a Table of Contents Macro to any page of the Space\r\n # Visit the Customer Portal directly from the Portal URL\r\n # Search for the page that contains the Table of Contents Macro\r\n # Select the Page to view it\r\n\r\nh3. Expected Results\r\n\r\nThe page loads in a modal window and should contain all content added to the page, including the Table of Contents Macro.\r\nh3. Actual Results\r\n\r\nThe Table of Contents Macro is omitted from the page, and all other page content works as intended.\r\nh3. Workaround\r\n\r\nThe workaround we found is to use the Table of Contents Zone macro in the *New Confluence Editor* instead. Brief steps are as follows:\r\n\r\n1. Add *Table of Contents Zone* to the page.\r\n 2. Edit the macro and include the main body/text of the page is inside of the macro.\r\n !Screen Shot 2019-12-06 at 10.56.37 AM.png|thumbnail!\r\n\r\n3. Save the macro and publish the page.\r\n !Screen Shot 2019-12-06 at 10.57.57 AM.png|thumbnail!\r\n\r\n4. Go to the portal and search for this page.\r\n 5. The complete page shows up including the macro output.\r\n !Screen Shot 2019-12-06 at 10.57.38 AM.png|thumbnail!","createDate":"2016-03-18T19:53:01.000+0000","comments":[{"text":"Hi, we are having this issue too","author":"Paul Pulham"},{"text":"Hi, our customers are suffering from this bug, too. ","author":"Deleted Account"},{"text":"Hello, we're also having this issue which is quite annoying when an article contains multiple sections not quickly accessible from the TOC.","author":"Fabien Gomez"},{"text":"For us it is a pretty important topic, and we need it for the fluent integration between JIRA Service Desk and Confluence KB. It must be possible to guide our customers with the content in the KB without relying on search only.","author":"Rine le Comte"},{"text":"It is actually worrying to see that this issue was first logged in March 2016! \r\n\r\nWhen can we expect it to be fixed?","author":"Rine le Comte"},{"text":"Get people to vote for it :)","author":"Paul Pulham"},{"text":"This is a pain. I hope Confluence and JIRA Service Desk teams have a chat about this.","author":"John Walker"},{"text":"This problem was first reported in 2016 and is till not solved, or even planed for a upcoming release?! This is not a voting issue, this should automatically be included to be fixed in a upcoming release. This worries me a lot! :(","author":"Johanna Lund"},{"text":"I agree with Johanna above. Considering this started in 2016, this should really be resolved by now...","author":"Sharlyne Tsai"},{"text":"I would also agree, if you don't plan on fixing this BUG I would rather see you remove the macro as to not confuse anyone else thinking it will work.","author":"Deleted Account"},{"text":"For us, this bug is the straw that broke the Camel's back... \r\n\r\n ","author":"sarah@leadermes.com"},{"text":"So far as this stupid VOTING crud, we are in business and do not have time to play *POPULARITY GAMES* with BUSINESS-CRITICAL functions.\r\n\r\nWe do not run our business this way. Our customers expect stuff to work, and if not, we fix it.\r\n\r\nFor a HELP DESK, what is more critical than presenting the KNOWLEDGE BASE docs accurately?  Our have tons of subjects and REQUIRE a TOC.\r\n\r\nNot happy, as much as we LOVE all of the Atlassian products.  This was a very disappointing shock.","author":"Ira Chandler"},{"text":"Appreciate the removal of the workaround.\r\n\r\n ","author":"Ira Chandler"},{"text":"{color:#d04437}*https://jira.atlassian.com/browse/CONFCLOUD-52734*{color}\r\n\r\n12 Votes \r\n\r\nFrom #52734 that is a later DUPLICATE of this.  The votes there should be *ADDED* to these, since you so enjoy Bug Roulette.","author":"Ira Chandler"},{"text":"Ira (and others) - Not that it \"fixes\" the issue - the one \"workaround\" we are using (at the moment) includes:\r\n * using the ToC macro for documents which we can add as a shortcut in our Help Desk \r\n * creating a manual ToC using hyperlinks for documents which are needed/linked within issues\r\n\r\nNot ideal and not great and very annoying - but I thought I would share (and I do realize you mentioned having a significant number of documents and it may not work for you :)).  ","author":"Deleted Account"},{"text":"Karen, we ALWAYS appreciate a suggestion.  ANY suggestion.  That is the only workaround that we were able to figure out, also.\r\n\r\nIt *COULD* be workable.  The challenge is the frequency of change of the rather complex docs.  Thanks to Confluence, everyone on our small dev or support teams edits the docs frequently.  Every week or so, we generate fresh PDFs and post them to our support site - currently Mantis BugTracker (highly modified).  Confluence works well for that purpose, especially with Numbered headings and TOC macros.  \r\n\r\nWith frequent changes to the docs, every couple of days on average, deploying every week, the maintenance would be pretty time-consuming.\r\n\r\nThe idea here was the our customers could use the LATEST version of the docs, and we did not have to formally \"publish\" them (necessarily) for download.  How foolish of us.\r\n\r\n*What is REALLY AGGRAVATING is that we don't seem to be able to DISABLE the BROKEN Search KnowledgeBase functionality.*  We would prefer to NOT present the doc results at this point.  If we REMOVE all the docs, the darned SEARCH bar REMAINS and the user gets NO DOCS FOUND (or whatever).  If we could DELETE the search bar, that would be the best workaround at this time.  I am sure there is a listed bug report for that too, since everything that needs to be changed is a \"Pending Bug Report\"...","author":"Ira Chandler"},{"text":"Hi, is there an ETA for this to be resolved?","author":"Zaheer Haral"},{"text":"Zaheer, they use a stupid VOTING method to decide what to fix.  This has only 31 votes so they will continue to ignore this egregious problem.\r\n\r\nVote for this and do not expect ANYTHING to happen.  This method of bug fixes is total BULLS#|T.","author":"Ira Chandler"},{"text":"Why are we having to \"vote\" for this?  It's obvious functionality that is clearly broken, so why would you not just fix it instead of having dozens of frustrated users (aka paying customers) wait several years for a solution?\r\n\r\nService Desk KB articles are created in Confluence.  Documents in Confluence can include built-in macro functions like the ToC and others.  Thus, the output of those macros should be visible to Service Desk users viewing the KB articles.  This seems obvious – why have a multi-year popularity contest about this?\r\n\r\n ","author":"Marc Jensen"},{"text":"Marc Jensen, what the Heck do you think you are, a PAYING CUSTOMER? What gives you the RIGHT to EXPECT things to work?\r\n\r\nThere were more votes, but they allowed the subject to be duplicated and refuse to merge the votes.  Not that it matters, because there appear to be very few ppl using the Service Desk, anyway. Since we have to fight votes from the main product, NOTHING will ever get done.\r\n\r\nThese products are generally great and we love them.\r\nh1. _+*THE COMPANY SUCKS how they DON'T DO SUPPORT.*+_\r\n\r\n \r\n\r\n ","author":"Ira Chandler"},{"text":"I hesitate to add here since this issue has some heated commentary, but I'd like to express strong support for a fix to this bug.\r\n\r\nWe're rolling out a Jira Service Desk Help Center at our university, and the lack of TOC macro functionality is going to require a rework of hundreds of Confluence articles... please fix this, or explicitly state in your product documentation that not all Confluence macros are compatible with Jira Service Desk. (A real shame!)","author":"S Helms"},{"text":"Your comment is welcome. Just know it is falling on deaf ears.\r\n\r\nThey just don't care.","author":"Ira Chandler"},{"text":"The Table of Contents macro is now working for us in the customer portal. Can anyone else confirm/deny?\r\n\r\nTHANK YOU, ATLASSIAN!!! *:)(y)*","author":"S Helms"},{"text":"We will test later today.  If so, that would be insanely great news...","author":"Ira Chandler"},{"text":"I can confirm that it is *NOT* working, at least not for us.","author":"Marc Jensen"},{"text":"I was so excited when I read a comment that said it was working. Unfortunately, I can also confirm, it is not working in our system either. :(","author":"Sharlyne Tsai"},{"text":"Can confirm is *NOT* working on portals which require customer login/account.","author":"Abel Lineberger"},{"text":"Sharon, can you detail if your customers are:\r\n # required to login to access your knowledge base?\r\n # if so, do they see the Atlassian login screen (have an Atlassian account) or the service desk portal login screen?\r\n\r\nOne last thing, have you validated it works from an account that does not have an Atlassian ID?  (Used an email account not affiliated with an Atlassian ID, and browsed to the site using a Private or Incognito session?)\r\n\r\nThanks!","author":"Abel Lineberger"},{"text":"I was hoping that we had some good news. \r\n\r\nShame.\r\n\r\n ","author":"John Walker"},{"text":"It's not working. Doesn't matter if users are logged in or not. (n):(","author":"Mick Rae"},{"text":"I'm sorry to give false hope, but perhaps what we've found might be useful for someone. (Maybe the developers as they work on this?)\r\n\r\nWe got the TOC macro to work for us, but after research it is working only on pages that are using the Page include macro. This helps us a little, because we are using the Page include macro only on pages restricted to our agents that require sign-in to view.\r\n\r\nHowever, on pages that do not require sign-in the Page include macro is \"unable to render\" and completely worthless. \r\n\r\nAgain, sorry for false hope, maybe this limited use workaround will help someone with a similar use case.","author":"S Helms"},{"text":"Thanks Sharon. \r\n\r\nThis is one of things that is quite hard to test in all it's variations. I get the feeling that the Jira devs / bosses rarely experience this issue because their config is differently set. \r\n\r\nOut of sight-out of mind.","author":"John Walker"},{"text":"...which makes me think. Instead of requesting a fix to this issue, we could request that the Service Desk gets tested better. :) which might yield better results. ","author":"John Walker"},{"text":"\"Maybe the developers as they work on this...\"\r\n\r\nWhen pigs fly.\r\n\r\n{color:#de350b}*THEY DON'T CARE.*{color}","author":"Ira Chandler"},{"text":"I was thrilled to find the TOC macro was a solution to my Service Desk formatting needs (as Atlassian gives us a small amount of the page to put content for customers in the portal- another issue), only to find this bug once I configured it and found it wasn't working. So my work-around to another issue was a fail as well. There's no reason a bug this old shouldn't be resolved. ","author":"Sandra Soucie"},{"text":"I'll simply add that we have this macro on every page in our knowledge base (it's actually in the top section on every template).  As of right now the macro simply collapses cleanly, so when and *if* Atlassian decides to fix this and the other issues plaguing the Service Desk knowledge base, hopefully all of these pages will get internal navigation.  {color:#FF0000}Absolutely amazing how things slide when the developer fails to eat their own dog food.{color}","author":"Abel Lineberger"},{"text":"Sandra you might also want to review and VOTE on:\r\n # JSDCLOUD-3983 - Use full page to display knowledge base article\r\n # JSDCLOUD-4923 - Jira Service Desk Customer Portal is too small to view Knowledge-base articles","author":"Abel Lineberger"},{"text":"Thanks Abel, I already have. But alas, these major issues don't seem to get attention in SD.","author":"Sandra Soucie"},{"text":"The inherent unfairness of this asinine voting lottery is weighted for the most commonly-used functionality.  We PAY for Service Desk.  Are OUR votes compared to those of the general population?  Seems so.\r\n\r\nHow in the world is that fair.  We ***PAY*** for service desk to work and something as rudimentary as listing our wiki pages there is part of the integration for which we decided to risk our support business.  Our business relies VERY heavily on our Docs way more than FAQ or KB or actually registering issues.  So we are VERY hard hit with this ridiculous BUG they refuse to fix.\r\n\r\nLove/hate relationship.  Love SO MUCH of Confluence and Jira.  But this sours everything every day we have to spirit them over to a BOX.COM site to DOWNLOAD a PDF, when the wiki page could have been available in the support center directly...  And formatted better than the derived PDF.\r\n\r\n*How can a company who does so much right get this SO WRONG?*","author":"Ira Chandler"},{"text":"Voting for this as well! My users are internal at the moment, but they still need helpful navigation for viewing the content I'm writing for them. Please fix this soon!","author":"Carolynn Carriger"},{"text":"Thanks Carolynn. The more people who vote the better. ","author":"John Walker"},{"text":"We are facing this issue as well . What is required from your end to prioritise the solution for this bug? Is it only based on number of votes ?\r\n\r\nPlease let us know if you need more details .\r\n\r\n ","author":"Karthik Sriraman"},{"text":"Karthik, don't hold your breath.  They have already escalated this and decided it is *NOT IMPORTANT ENOUGH TO FIX*.\r\n\r\nThey also have multiple issues registered for this and refuse to merge them to get a more realistic COUNT of votes.\r\n\r\nApparently, it is ONLY about the votes.  We users of JSD just don't have the weight to make them fix a KNOWN BUG that is debilitating for our use.\r\n\r\nLove the products, but their bug fix policies *SUCK*.","author":"Ira Chandler"},{"text":"Vote, seems like this has been around a while but it is annoying, please fix.","author":"Brett Hone"},{"text":"Brett, please see the OTHER issues for this and vote for them too.\r\n\r\nWhat is really upsetting is that they are rolling out a *RIDICULOUS update* to the JSD/Support Center where there is now a completely *USELESS* screen that our customers have to CLICK through to GET to where they submit a ticket.  They EMPHASIZE the SEARCH, which is WORTHLESS TO US since the confluence documents CANNOT be displayed - ours are complex and *useless without the display of the Table Of Contents*.  What good is a long document that does not have a hot linked Table Of Contents???\r\n\r\nThey spent time on a *useless, annoying, superfluous update that NOBODY ASKED FOR*.  But they can't fix a basic flaw that makes our Confluence PAGES TOTALLY USELESS, and to add insult to injury, they HIGHLIGHT the Search that is only good to display our Confluence pages without Tables of Contents.\r\n\r\nBRILLIANT...\r\n\r\n ","author":"Ira Chandler"},{"text":"I'm amazed that this issue was raised in 2016 and now in 2019 it still exists!!\r\n\r\nIf you have it working in Confluence, how hard it is to make it work on where it matters the most??? Where our customers need easy to use KB? Thank god I'm on a trial period, Atlassian just lost another customer. So much for conversion.\r\n\r\n ","author":"Gil"},{"text":"We are equally shocked.  They just rolled out an \"improvement\" to the Support Center with a TOTALLY unnecessary front page, but they can't fix this basic functionality.  And the new page emphasizes the SEARCH and results in Confluence pages without TOCs.  Ours are complex, and the lack of TOC makes them TOTALLY UNUSABLE.","author":"Ira Chandler"},{"text":"Is there a work around to link on the page to jump down at least? The link functionality doesn't allow that anymore. ","author":"Melissa"},{"text":"@Melissa\nYou can use \"anchor\" links for navigating. Create anchor macro where you want to jump to and then add a link for the same through the link functionality -> advanced\n\nNot ideal, but the best option until this is fixed I guess. ","author":"Shriram Kidambi"},{"text":"Shiram, thanks for the tip.  That will work, but requires a HUGE amount of manual work that we are not willing to do because Atlassian has their head in the dark place...  and is useless on ALL of our product docs that MUST be PDF export compatible.  ","author":"Ira Chandler"},{"text":"Atlassian, can you link this bug to the related one here? https://jira.atlassian.com/browse/CONFCLOUD-57322","author":"Mike Doolittle"},{"text":"Yes, Mike, that is the same issue.  There are several floating around.  *Atlassian DOES NOT CARE*.  I listed them and requested they merge them and tally the votes.  No interest in helping with that.","author":"Ira Chandler"},{"text":"This bug has become even more significant now that the *new Confluence editor* is about to be released. The new editor does not currently have the *Anchor macro*, and the Confluence developers are suggesting that we use the *Table of Contents macro* instead.\r\n\r\nHowever, as users of both Confluence and Jira Service Desk, we know that using the TOC macro is not a good workaround because *it is broken in the customer portal*.\r\n\r\nAtlassian developers – please help, and resolve at least one of these issues before the new Confluence editor is rolled out to everyone!","author":"S Helms"},{"text":"@Sharon, good luck with that.\r\n\r\nI suggest everyone who is interested in getting this fixed begin a campaign of CALLING in to their support and SUBMITTING online issues on this *BUG*.  They track that.","author":"Ira Chandler"},{"text":"Yeah, this is not going to be fixed any time soon.\r\n\r\nAnd that's not even the biggest problem with the portal view.\r\n\r\nTry the stupid narrow view that doesn't allow for proper viewing of screenshots. \r\n\r\nNot having the ability to click on a screenshot and expend it.\r\n\r\nOccupying screen real-estate with the redundant 'Was this article helpful' floating to the right, from an already narrow view.\r\n\r\n \r\n\r\nClearly, QA simply didn't work on this product.\r\n\r\n \r\n\r\n ","author":"Gil"},{"text":"Hi all,\r\n\r\nThanks for voting and commenting on this issue. We currently do not plan on focusing efforts to resolve this behaviour in the near future. That being said the team is exploring how we can ship a better *out of the box* knowledge experience with Jira Service Desk Cloud.\r\n\r\nI just want to re-iterate, we do listen carefully to customer feedback and we are always keen to understand how Jira Service Desk plays a role in your organisation. If you are open to a short interview to discuss your requirements, I encourage you to contact our Product Manager, Vincent Wong, via email at vwong@atlassian.com.\r\n\r\nYour feedback is key to helping us understand how we can continue improving your experience with our products.\r\n\r\nThanks!\r\nDylan\r\nAtlassian - Service Enablement","author":"Dylan"},{"text":"That's very sad news, and also contradicting at the same time.\r\n\r\n??That being said the team is exploring how we can ship a *{color:#ff0000}better {color}out of the box* knowledge experience with Jira Service Desk Cloud. ??\r\n\r\n \r\n\r\nHow about live up to the word \"better\" and just fix what supposed to be working in the first place?\r\n\r\nHow can you honestly think we'll believe you, your team, Atlassian when you write \"We currently do not plan on focusing efforts to resolve this behaviour in the near future\" and then write \"That being said the team is exploring how we can ship a better *out of the box* knowledge experience with Jira Service Desk Cloud.\"\r\n\r\n \r\n\r\nSeriously? What's there to explore? You write that \"we do listen\", yet you clearly DO NOT! You might \"hear\" us but you're not listening. We need TOC working! How about starting there for \"better out of the box\"?\r\n\r\nTOC suppose to work out of the box.\r\n\r\nNo exploration needed. We, mere mortals, tell you that we want this fixed, yet you ignore and set sail to explore brave new worlds as if it's some rocket science. Stop \"exploring\" and fix the basic things we all need, and then go and explore. \r\n\r\nDo you want to provide better OOTB experience? Stop looking and see what's in front of you!\r\n\r\n \r\n\r\np.s. - last week my team and I noticed that some articles in our KB had their TOC working. I assumed it was 'silently' fixed.\r\n\r\n ","author":"Gil"},{"text":"Nope, still not working.  At least not for us.\r\n\r\nDylan, and anyone else from Jira who actually looks at these comments...  Please stop acting like this is some new feature that people are asking for.  It's not.  It's BROKEN FUNCTIONALITY.  Honestly, this is Commercial Software Development 101: Before spending lots of time working on new features and improvements, you make sure that what you've already created actually WORKS.\r\n\r\nI'm happy to email Vincent Wong, as you suggested – but honestly, we shouldn't have to do that.  Jira Service Desk is not a high-end complex case management tool, we all know that.  We use it because it does have one really cool, helpful, and extremely worthwhile feature.  That feature is instant, seamless integration with Confluence for KB articles.\r\n\r\nIn other words, one of the main reasons ANY of your customers are using this product AT ALL, is that we all really like how easy it is to publish things in Confluence, and Service Desk promises to extend that to customer-facing KB documents.\r\n\r\nSo we shouldn't have to beg, or vote, or argue, or plead with you in order to have someone recognize that this is important.  The fact that so many Confluence macros simply do not work at all in SD is just... broken.  In a lot of cases, it makes the product actually have negative value, since it creates more work than it saves.\r\n\r\nYou want to know how you \"ship a better out of the box knowledge experience\"?  It's actually pretty easy.  You start by taking the features that are ALREADY in the box.  And then you make them work the way they're supposed to.\r\n\r\n ","author":"Marc Jensen"},{"text":"Marc, it was working last week, so much that I edited old articles and added TOC to them.\r\n\r\nThis morning I realised it stopped working. The timing couldn't be any more suspicious with Dylan's announcement and the fact it's not working anymore.\r\n\r\nFunny, they can build all these products but can't have TOC working for articles. \r\n\r\n ","author":"Gil"},{"text":"Guys as frustrating as this is, please don't yell at Dylan. I've been in his shoes before with having to relay internal info to customers that wasn't ideal but it also wasn't my fault. Dylan's just doing is his job with updating us on the status which is good. Now the status isn't what anybody wanted and yeah it kind of sucks that they're sending us to an email address but apparently that's the person we need to talk to in order to get attention on this. Berating them in this ticket thread won't help get this issue resolved.","author":"Carolynn Carriger"},{"text":"Carolynn, I re-read Marc's comments and find them SPOT ON.  He is clear, concise, analytical, and accurate.  If you think those comments are too brusque, maybe you have not suffered enough from the lies that Atlassian has spouted about this for the last years.  What about releasing NEW front pages for JSD when the existing one DOES NOT WORK, and the new ones make the problem worse by HILITING the SEARCH that is impotent without TOCs in our complex documents.\r\n\r\nCarolynn, I will NOT hide my frustration and disgust at the abuse Atlassian has dealt me, my company, and all others who desperately need this BROKEN SOFTWARE fixed.  \r\n\r\nWhile I will always be civil, ANYONE at Atlassian NEEDS to appreciated our intense displeasure at their abuse.  He should PASS our ANGER up the chain and let the incompetent management know the results of their flawed approach to ignoring customers who report NON-FUNCTIONAL software...\r\n\r\nHe is welcome to pass the heat up the line to whatever passes as \"management\" at that ridiculous organization.  Let them KNOW how we feel.  \r\n\r\n{color:#de350b}*IT HAS BEEN YEARS SINCE WE WERE DECEIVED.*{color}  \r\n\r\nAnd they continue to jerk us around.","author":"Ira Chandler"},{"text":"Dylan, please re-read what you wrote.  Do you see how INSANE it sounds?\r\n\r\nYou profess to deliver a MAJOR and SIGNIFICANT feature.  You hook us into investing in it, and it does not work.  There is no workaround.  The functionality, critical to the operation of JSD as DESIGNED, simply DOES NOT WORK.\r\n\r\nAnd you pass down some corporate gobbledygook techspeak about an OUT OF THE BOX EXPERIENCE?\r\n\r\nYou sound like they have you on drugs and you will repeat any nonsensical rationalization they pour on your head.\r\n\r\nPlacing multiple requests to FIX a broken function IN DETAIL is not enough, we have to stroke the ego of this Wong guy and be INTERVIEWED so he can magically find out what we want - to \"DISCUSS OUR REQUIREMENTS\".  RUDE!  Maybe, just maybe, Wong can READ THIS THREAD and COMPREHEND IT?  Make TOC work in JSD.  How freaking simple can we state the need?\r\n\r\nWe have been clear.  CRYSTAL CLEAR.  This is ALL we ask.  TOC in JSD.  Simple.\r\n\r\nDon't RE-engineer the product, just make this work.\r\n\r\nHow dense are you people?\r\n\r\nHow rude can you be with your statements of \"listening carefully to customer feedback\"?  This is NOT feedback, this is a BUG REPORT that is unequivocal.\r\n\r\nJSD is about to NOT play a role in our organization.  How about that?","author":"Ira Chandler"},{"text":"Same issue here... Table of contents not working when confluence knowledge base article is shown in service desk portal...","author":"Jelmer Spiekstra"},{"text":"Hello,\r\n\r\nI am new to Service Desk and I'm experiencing the same issue. Seeing that this bug is almost 4 years old, I must be honest in expressing that by not being able to have a working table of contents for my articles and my readers, it's going to be a pain to figure out another way to make my knowledge base easy to use. It's certainly going to add hours of work to make sense of it all. I'm already discovering other handy features within Confluence are broken in translation; I have spent a lot of time setting up articles to find out later that anchor macros, links to headers, and emoji's (including several custom ones I'd imported and added to articles) also are dysfunctional. \r\n\r\nI've submitted a community question relating to the header links issue here: https://community.atlassian.com/t5/Jira-Service-Desk-questions/Header-links-open-new-browser-tab-to-the-customer-portal-instead/qaq-p/1228601\r\n\r\nI really wish that there was documentation on what features I can actually use. It might save me loads of time. Better yet, Jira should remove the broken macros and other tools from the KB article editor in Confluence altogether so we aren't fooled into thinking they'll work.\r\n\r\n*All said, according to the bug severity rating, there should be a workaround available. What is that workaround?* Below is the priority description. (I disagree that it is a 3; I think it should be a 2 because job function is somewhat impaired. Plus one of their examples for priority 2 is precisely what is happening here – \"specific editing features fail\"!)\r\n\r\n_Priority 3 - Medium_\r\n\r\n_The application or specific feature isn't working as expected, but there is a workaround available. Users' experience is impacted, but their job function is not impaired._\r\n\r\nOne last thing – I noticed that Jira's own help articles seem to support links to headers. Or perhaps they're using yet another working feature that I haven't discovered yet. Does anyone know what they might be doing, and if it's available to us customers? (As it should be.)\r\n\r\nThank you all,\r\n\r\nLaura\r\n\r\n ","author":"Laura Sands"},{"text":"Laura, the fact that Atlassian does not \"(eat its own) dogfood\" its cloud products is a standing complaint for a few years.  You are absolutely correct that Atlassian uses 3rd party tools to generate its support environment and knowledgebase that are not available to cloud users.","author":"Abel Lineberger"},{"text":"Abel, I can handle them not eating their own dogfood, ***IF*** they were responsive to the people who were forced to eat it. \r\n\r\nLaura, THERE IS NO WORKAROUND.  They will mention that you can MANUALLY create a MANUAL TABLE and MANUALLY create LINKS in the Headings.  Some of our Tables have scores of links and we use the NUMBERED SECTION macro and that makes it UNMANAGEABLE to attempt to do manually.  *THERE IS NO WORKAROUND, and they just do not care.*\r\n\r\nAll I get from them is blah blah blah BS and only once have they actually admitted they have NO INTENT ON FIXING IT.  \r\n\r\nBut they had time to \"fix\" (rework) the main portal page to EMPHASIZE SEARCH - that we cannot use effectively.\r\n\r\n*Get on their Facebook page and ads and talk about this.*\r\n\r\n ","author":"Ira Chandler"},{"text":"A BRILLIANT lady has found a simple workaround -  NO THANKS TO ATLASSIAN!\r\n\r\n[https://community.atlassian.com/t5/Jira-Service-Desk-questions/Header-links-open-new-browser-tab-to-the-customer-portal-instead/qaq-p/1228601?utm_source=atlcomm&utm_medium=email&utm_campaign=immediate_general_answer&utm_content=topic#U1235513]\r\n\r\nThank you Sharon.\r\n\r\n**** you, Atlassian, for ignoring this for years and refusing to fix it, and not researching to find this workaround.  ","author":"Ira Chandler"},{"text":"Ira - Partial joy on the workaround.  I can see it generates a TOC, but the automatically generated anchor links don't seem to work.  Did your implementation get that working?","author":"Abel Lineberger"},{"text":"Here's a workaround that I found. You can try using the \"Children Display\" macro instead of the TOC or Page Tree. This is primarily for linking to subsequent articles rather than in-article page headers. For those suffering from that navigation problem, this seems to work well. The only limitation is that you have to choose to either display descendants or not. The macro doesn't allow for expandable top level navigation. It's either all out there or just the top level.\r\n\r\n \r\n\r\n \r\n\r\nEDIT: I guess you can't upload images to comments in here. Just go and play with the \"Children Display\" macro. It's pretty intuitive. ","author":"Chris Mendicino"},{"text":"@abel, I am unclear what you mean by \"automatically generated anchor links\".  The TOC that is generated has all the items listed as hyperlinks, and when I click them from the TOC, it jump to that topic and it shows on the top of the browser window.  Am I missing something?\r\n\r\nWe did nothing more than create the doc, set the H1-H5 pgh types, create a standard TOC, publish, edit, delete the standard TOC, insert the TOC Zone macro, publish and it works.\r\n\r\nCould it be that we create a standard TOC first (that does not work in JSD) and then replaced it with the new TOC Zone crap?\r\n\r\nThat would be a simple fix.\r\n\r\n ","author":"Ira Chandler"},{"text":"Thanks, @chrismendicino. I'll keep the children display option in mind. For now I'm using TOC-zone per Sharon's instructions at [https://community.atlassian.com/t5/Jira-Service-Desk-questions/Header-links-open-new-browser-tab-to-the-customer-portal-instead/qaq-p/1228601#U1237802.] ","author":"Laura Sands"},{"text":"@Chris - I tried the Children Display and cannot get it to display Headings in the document itself.  I tried various settings but do not ever see headings of any level listed.  Since there are no \"child\" docs, I get a list of nothing at all.  What am I missing?","author":"Ira Chandler"},{"text":"AND, the converted doc using the \"Table of Content ZONE\" works fine.\r\n\r\nBUT!!!\r\n\r\nIf you try to copy or cut the content from within the TOCZ macro, it loses ALL formatting, specifically headings.  So apparently, once the content is copied INTO the TOCZ macro, it will never come out again with formatting.  This is likely another wonderful feature that Atlassian will ignore for the five years.","author":"Ira Chandler"},{"text":"Hi Folks!\r\n\r\nAs a part of our efforts to make sure that our bug reports have as much useful information in them as they can, I've gone through and reverified this issue, updated the issue description to make it a bit clearer, and found then verified a workaround.\r\n\r\nThanking [Sharon Helms|https://community.atlassian.com/t5/user/viewprofilepage/user-id/976803] for his [Atlassian community post|https://community.atlassian.com/t5/Jira-Service-Desk-questions/Header-links-open-new-browser-tab-to-the-customer-portal-instead/qaq-p/1228601?utm_source=atlcomm] kindly providing a workaround. We understand this may not be optimal and require manual modification of the existing pages, however, we hope it will help give our customers something to go off until an official fix for the bug is deployed.\r\n\r\nCheers,\r\n\r\nAsim\r\nAtlassian Support","author":"Asim K"},{"text":"And what you do NOT mention, after having the community do the work for the VENDOR - ATLASSIAN who refuses to fix this after years of requests - is the the TOCZ macro is weird.\r\n\r\nIn MY experience, once you paste content into it, *you CANNOT copy and paste it OUT of the TOCZ with its formatting*.  All you get is unformatted plain text.\r\n\r\nI suppose this could be YET ANOTHER bug that Atlassian decides to IGNORE for the next millenia...\r\n\r\nMaybe you could verify THAT bug and get them to actually FIX it?","author":"Ira Chandler"},{"text":"Note that using the table of contents zone prohibits the use of columns and excerpts from the area included in the zone.","author":"Abel Lineberger"},{"text":"@asim - Comment on the inability to copy/paste with formatting from a TOCZ, as well as inability to column or excerpt???","author":"Ira Chandler"},{"text":"@asim  - *HOW* is this a valid workaround. when you can no longer EDIT the page once inserted on a TOCZ?  You cannot cut or paste out the TOCZ without losing formatting.\r\n\r\nHow can you pretend that this is a workaround when it PROHIBITS you from actually editing the page once converted?\r\n\r\nWhen is this TOCZ bug going to be fixed?  Another [LONG TERM BACKLOG]???","author":"Ira Chandler"},{"text":"4 years and it's still not solved... This is ludicrous, just admit you do not intend to fix it.","author":"Stefan Anghel"},{"text":"Not enough integrity, Stefan.","author":"Ira Chandler"},{"text":"Dark feature is much much more important than having ToC working for customers.\r\n\r\nIt's funny, Atlassian is \"all about customers\", but don't care about their Customer's Customers.\r\n\r\nOnce you get that big, you start losing sight of people.\r\n\r\nI'm pretty sure Dark Feature will win votes if it went head to head with \"Cure for Coronavirus\".","author":"Gil"},{"text":"FINALLY!!! Thank you!! Looks good!!!!","author":"Sharlyne Tsai"},{"text":"@everyone here: if you could change to another KBase solution for your customers, what would it be? I am just getting started on a new JSD-Confluence project, and do not have so many articles that I would not pivot to something else at this early stage. We will have many articles and TOC is critical to helping the customers understand the major concepts of the docs. Just common sense. JSD-Confluence \"out of the box\" will cause more frustration for our customers.","author":"Mike Tocci"},{"text":"Mike, yes.  TOC is critical.  The only possible workaround seems to be using the TOC*ZONE* macro around the whole body.  There are some big limitations using that, but we have had to employ it, since WE cannot find a palatable replacement for JSD at this time.  We ARE actively looking, and as soon as we get some bandwidth, we are *OUTA HERE*!\r\n\r\nAtlassian has consistently shown that progressing through their own echo-chamber of new features is FAR more important than fixing the ones that impact existing customers.  They even work AGAINST us, like the latest update to the JSD entry screen that EMPHASIZES the search function, that is rendered useless since the resulting Confluence docs cannot have a TOC.  our docs are long and complex, and useless without TOC.  So instead of fixing that, five year old BUG, they doubled down on the search and spent time to release that.  Hideous decisions by an obviously deaf and brain dead company.\r\n\r\nGood luck finding a KB alternative.  We will post here if we find something viable...","author":"Ira Chandler"},{"text":"I guess one way to look at it is: Atlassian, like everyone, relies heavily on page tree and TOC style orientation to help customers work their way through complex information. Like this: [https://confluence.atlassian.com/get-started-with-confluence-cloud/before-you-start-space-ace-934720197.html]\r\n\r\nI want to do that for my customers too without having to buy something else besides JSD and Confluence. JSD is supposed to be the point of entry to support.","author":"Mike Tocci"},{"text":"Hi Mike,\r\n\r\nI checked the other day when the fix came out and it worked... now it appears to have broke again... ","author":"Sharlyne Tsai"},{"text":"Same here. I checked on the day the \"fix\" came out and it worked. Good thing I didn't immediately start updating hundreds of pages, because it's not working any more. Hugely disappointing.","author":"S Helms"},{"text":"I created a support ticket already. Hopefully it will be addressed soon...","author":"Sharlyne Tsai"},{"text":"Hi all,\r\n\r\nWe rolled out a fix for the TOC macro last week as some of you may have seen, but we had to roll it back as it caused regressions in other content. We're continuing to work on the fix and it will be out soon, after we've checked as much content as possible to make sure no further regressions occur.\r\n\r\nThanks for your patience.","author":"wilson"},{"text":"No prob.  After *{color:#FF0000}FOUR YEARS{color}*, what is a few more months?","author":"Ira Chandler"},{"text":"we are waiting for updates","author":"Anna Pososhenko"},{"text":"For four years.","author":"Ira Chandler"},{"text":"Hi everyone, \r\n\r\nWe've rolled the new fix out to 100% - TOC should be displayed in your knowledge base articles once again. \r\n\r\nThanks for the feedback, all the best.","author":"Dylan"}]},{"summary":"SLA disappears if the \"Stop\" condition refers to a past event","key":"JSDCLOUD-3562","url":"https://jira.atlassian.com/browse/JSDCLOUD-3562","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-3562].\r\n{panel}\r\nh3. Summary\r\n\r\nThe SLA disappears if the stop condition is set to an event that issue/s have already gone through.\r\nh3. Steps to Reproduce\r\n # Create a new SD project, using the default SLA settings for \"Time to response\" and \"Time to resolution\";\r\n # Create a new issue under that project and assign it to an user;\r\n # Go to the configuration of any SLA and add \"Assignee: Changed\" as a \"Stop\" condition;\r\n # Go back to the assigned issue, notice the SLA is missing;\r\n\r\nh3. Expected Behavior\r\n\r\nStop the SLA and register completion based on occurrence of event. In this case, the SLA of the issue should be stopped and continue showing.\r\nh3. Actual Behavior\r\n\r\nIf you check the missing SLA through the below REST API, you will notice that it has the start and stop events right, with the stop condition matching the event of assignee changed.\r\n\r\n{{<JIRA-Base-URL>/rest/servicedesk/1/servicedesk/<Project-Key>/sla/debug/issue/<Issue-Key>/metric/<SLA-ID>/data}}\r\n\r\nOn the other hand, {{completeSLAData}} is an empty array. See example below.\r\n{code:none|bgColor=#f8f8f8}\r\n{\r\n  \"timeline\": {\r\n    \"events\": [\r\n      {\r\n        \"date\": 1480957099020,\r\n        \"dateString\": \"2016-12-05T16:58:19.020Z\",\r\n        \"types\": [\r\n          \"START\"\r\n        ]\r\n      },\r\n      {\r\n        \"date\": 1480957273121,\r\n        \"dateString\": \"2016-12-05T17:01:13.121Z\",\r\n        \"types\": [\r\n          \"STOP\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  \"completeSLAData\": [],\r\n  \"metricId\": 88,\r\n  \"definitionChangeDate\": 1480957283855,\r\n  \"definitionChangeMsEpoch\": 1480957283855,\r\n  \"definitionChangeDateString\": \"2016-12-05T17:01:23.855Z\",\r\n  \"customFieldId\": 10603,\r\n  \"customFieldName\": \"Time to first response\",\r\n  \"metricCreatedDate\": 1480957098664\r\n}\r\n{code}\r\nh3. Workaround\r\n\r\nManually reconstruct the SLA for this issue, which will use the timestamp of \"Stop\" event to set the complete SLA data. In order to do so, perform a {{POST}} request on {{<JIRA-Base-URL>/rest/servicedesk/1/servicedesk/sla/admin/task/destructive/reconstruct?force\\=true}} with a JSON array of affected issues.\r\n\r\nSee example below using cURL.\r\n{code:none|bgColor=#f8f8f8}\r\ncurl -X POST -H \"Content-Type: application/json\" -d '[\"ISSUE-3\"]' -u 'admin':'admin' http://localhost:8080/jira/rest/servicedesk/1/servicedesk/sla/admin/task/destructive/reconstruct\\?force\\=true\r\n{code}\r\n{panel:title=Legend|borderStyle=solid|borderColor=#6a8eb3}\r\n(i) * {{ISSUE-3}} is the issue key;\r\n * {{'admin':'admin'}} are the credentials of a System Administrator - 'username':'password';\r\n * {{[http://localhost:8080/jira/]}} is JIRA's base URL;{panel}","createDate":"2016-03-18T10:01:47.000+0000","comments":[]},{"summary":"As administrator, able to select Customer Account as Project Lead / Default assignee","key":"JSDCLOUD-3366","url":"https://jira.atlassian.com/browse/JSDCLOUD-3366","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-3366].\n  {panel}\n\nh3. Summary\nCustomer Accounts (therefore, Customer Portal Access only) are coming up as an option to use as a Project Lead/Default Assignee in Service Desk.\n\nh3. Environment\n* JIRA 7.1.0-OD-05-006\n* JIRA Service Desk - 3.2.0-OD-01-001-D20160127T101633\n\nh3. Steps to Reproduce\n# On an instance with SD and valid customer accounts, navigate to a project (any type, does not need to be SD)\n# Go to *Project Administration > Users and Roles*\n# Click *Edit Defaults* in top-right\n# Type the name of a customer account, and it displays in the search results.\n\n !Screen Shot 2016-02-02 at 10.58.44.jpg|thumbnail! \n\nh3. Expected Results\nThe search results should only display users that should have access to be added as a Project Lead. Especially not Customer accounts.\n\nh3. Actual Results\nCustomer accounts are displayed as potential options for Project Lead\n\nh3.Workaround\nNo workaround","createDate":"2016-02-02T10:02:59.000+0000","comments":[{"text":"Due to an extended period of inactivity and low interest this bug has been auto-closed. If you’re still experiencing this issue, please comment and we’ll re-open to triage.\r\n\r\nCheers,\r\n\r\nDylan - Service Enablement @ Atlassian","author":"Dylan"}]},{"summary":"SD Notification Configuration Contains Inaccurate Info","key":"JSDCLOUD-3346","url":"https://jira.atlassian.com/browse/JSDCLOUD-3346","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-3346].\n  {panel}\n\nh3. Summary\n\nUnder Applications > Service Desk Configuration, the following description is under Notifications:\n{quote}This setting controls all service desk projects. If this setting is enabled, customers receive email notifications when they raise a request through the Customer Portal, when their request is resolved, when another user comments on their request, and when there is a change in the request's status.{quote}\n\nAs SD customers are no longer notified when a status transition occurs in a request, this information needs to be updated to avoid confusion.\n\nh3. Steps to Reproduce\n# Navigate to Applications > Service Desk Configuration\n# Look under Notifications\n\nh3. Expected Results\nThe info on being notified during status transitions should not be there.","createDate":"2016-01-27T22:10:11.000+0000","comments":[]},{"summary":"Automation throws 'error.retrieving.project' WARN stack traces in the logs.","key":"JSDCLOUD-3232","url":"https://jira.atlassian.com/browse/JSDCLOUD-3232","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-3232].\n  {panel}\n\nh3. Summary:\nThere will be multiple WARN stack traces in the logs in regards of JIRA Service Desk Automation.\n\nh3. Steps to Reproduce.\n# Create two Service Desk Project, e.g. SD A and SD B.\n# On \"SD B\" navigate to the _Project Administration > Automation_.\n# Create a \"Reopen on Customer Comment\" rule and confirm.\n# Run the following Query:\n{code:sql}\nselect p.id,p.pname,pr.\"PROJECT_ID\",rl.\"NAME\",rl.\"DESCRIPTION\",wh.\"MODULE_KEY\" from \"project\" p \nright join \"AO_9B2E3B_RSETREV_PROJ_CONTEXT\" pr on (p.id = pr.\"PROJECT_ID\")\njoin \"AO_9B2E3B_RULESET_REVISION\" rl on (pr.\"RULESET_REVISION_ID\" = rl.\"RULE_SET_ID\")\njoin \"AO_9B2E3B_WHEN_HANDLER_CONFIG\" wh on (rl.\"ID\" = wh.\"ID\");\n{code}\n# There will be a result for each project Automation Rule.\n# Navigate to \"SD B\" project administration and delete the project.\n# Create a Request in \"SD A\" and Resolved the ticket.\n# As the Reporter, access the ticket in \"Customer Portal\" view and comment on the ticket.\n\nh3. Expected Result:\n* Nothing happen as there is no \"Reopen on Customer Comment\" rule in \"SD A\" without any stack trace in the logs.\n\nh3. Actual Result:\n* Nothing happen as well but there will be a WARN stack trace like below written in the logs.\n{code}\n2016-01-01 20:44:14,471 http-nio-8705-exec-4 WARN admin 1244x2604x1 1rreza0 0:0:0:0:0:0:0:1 /rest/servicedesk/1/servicedesk/customer/comment [c.a.s.p.a.i.e.whenhandler.event.AllEventListenerEventWhenHandlerVisitor] Event when handler execution of com.atlassian.servicedesk.plugins.automation.servicedesk-automation-modules-plugin:servicedesk-commented-automation-rule-event-when-handler failed with error error.retrieving.project : 'error.retrieving.project'\n2016-01-01 20:44:14,471 http-nio-8705-exec-4 WARN admin 1244x2604x1 1rreza0 0:0:0:0:0:0:0:1 /rest/servicedesk/1/servicedesk/customer/comment [c.a.s.p.a.i.e.whenhandler.event.AllEventListenerEventWhenHandlerVisitor] Event when handler execution of com.atlassian.servicedesk.plugins.automation.servicedesk-automation-modules-plugin:servicedesk-commented-automation-rule-event-when-handler failed with error error.retrieving.project : 'error.retrieving.project'\n2016-01-01 20:44:14,471 http-nio-8705-exec-4 WARN admin 1244x2604x1 1rreza0 0:0:0:0:0:0:0:1 /rest/servicedesk/1/servicedesk/customer/comment [c.a.s.p.a.i.e.whenhandler.event.AllEventListenerEventWhenHandlerVisitor] Event when handler execution of com.atlassian.servicedesk.plugins.automation.servicedesk-automation-modules-plugin:servicedesk-commented-automation-rule-event-when-handler failed with error error.retrieving.project : 'error.retrieving.project'\n{code}\n\nh3. Notes:\n* Run the same query below and there will be an automation rule that did not have any project specified as it is deleted:\n{code:sql}\nselect p.id,p.pname,pr.\"PROJECT_ID\",rl.\"NAME\",rl.\"DESCRIPTION\",wh.\"MODULE_KEY\" from \"project\" p \nright join \"AO_9B2E3B_RSETREV_PROJ_CONTEXT\" pr on (p.id = pr.\"PROJECT_ID\")\njoin \"AO_9B2E3B_RULESET_REVISION\" rl on (pr.\"RULESET_REVISION_ID\" = rl.\"RULE_SET_ID\")\njoin \"AO_9B2E3B_WHEN_HANDLER_CONFIG\" wh on (rl.\"ID\" = wh.\"ID\");\n{code}\n !Screen Shot 2016-01-01 at 6.25.49 PM.png|thumbnail! \n* If we delete an existing Automation Rule while the Project is still exist, the row about that automation rule will still be exist.\n* Tried to do the same for an Automation Rule that is deleted while the Project is still exist could not replicate the same stack trace to be thrown.\n* This is WARN stack trace, it should not affect JIRA operations as it is a WARNING.","createDate":"2016-01-01T10:26:26.000+0000","comments":[{"text":"I am seeing this same issue on JSD 7.0.10 when trying to add a comment to an issue via a rest call on a transition change.\n\nHere is my error message:\n2016-03-15 17:18:20,052 http-nio-8080-exec-15 WARN testuser 1038x154763x1 853ccv 127.0.0.1,127.0.0.1 /rest/api/2/issue/M1-69/transitions [c.a.s.p.a.i.e.whenhandler.event.AllEventListenerEventWhenHandlerVisitor] Event when handler execution of com.atlassian.servicedesk.plugins.automation.servicedesk-automation-modules-plugin:servicedesk-commented-automation-rule-event-when-handler failed with error error.retrieving.project : 'error.retrieving.project'","author":"Chris Whitten [Comskil]"},{"text":"In my case it appears to be because there is an existing ticket with the same subject in a non-Service Desk project.  We have projects with mail handlers enabled.  A user sends to one of those email addresses which creates a ticket in that project.  They then reply to an email on that same thread but change the destination email to the one associated with our Service Desk.  Service Desk ticket is not created and the error listed is generated in atlassian-servicedesk.log.","author":"sean.seward"}]},{"summary":"Warning Banner still appear after attaching the right File on the request form.","key":"JSDCLOUD-3224","url":"https://jira.atlassian.com/browse/JSDCLOUD-3224","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-3224].\n  {panel}\n\nh3. Summary:\nIf we attach an empty text file on the Request form, a Warning Banner will appear. But, the warning did not disappear even when the right file is attached on the request.\n\nh3. Steps to Reproduce:\n# Create a Service Desk project.\n# Add the \"Attachment\" field on one of the Request Type.\n_Service Desk Project Administration > Request Types > select the Request > Edit fields_\n# Navigate to the Customer Portal and select the request type\n# Create an Empty Text File and select it on the form.\n# A warning will appears.\n# Attach another Text File that is not empty.\n\nh3. Expected Result:\n* The warning will disappear and the file is attached.\n\nh3. Actual Result:\n* The file is attached and the warning still appears.\n\nh3. Notes:\n* If the warning did not disappear, at least it should behave like it will automatically disappear even though there is no file attached yet.","createDate":"2015-12-24T11:05:55.000+0000","comments":[{"text":"Fixed this issue in another ticket: https://jira.atlassian.com/browse/JSD-3104","author":"Albert"}]},{"summary":"Broken images in SD emails","key":"JSDCLOUD-2324","url":"https://jira.atlassian.com/browse/JSDCLOUD-2324","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-2324].\n  {panel}\n\nh3. Summary\n\n*Images are broken in email:*\nThis is a problem with the JIRA Service Desk. When an image is attached by an internal account or by a customer, the image that shows up in the automated email is broken.\n\nh3. Steps to Reproduce\n\nSteps to Reproduce \\[bug 1\\]:\n# Create a Service Desk ticket as an agent or as a customer. Here is the portal: \n# Make sure your Agent account is the assignee. Make sure your customer account is the customer on the ticket.\n# Log in as an Agent  and navigate to the Service Desk.\n# Open that ticket on behalf of a customer for editing and go to \"More\" and select \"Attach Files\".\n# Make an external comment and attach an image to it.\n# Log into the email account associated with the customer account. You should see the email come through with a broken image for the attached email. \n\n\\[bug 2\\] The problem also happens the vice-versa direction, and presumably this is the same underlying issue:\n# Log in as a Customer  and navigate to your list of open tickets.\n# Edit the same ticket and add an image to a comment.\n# Log into the email account associated with your Agent account\n\n\\[bug 3\\] A third related problem is when you comment and add the attachment on the same time, JIRA doesn't recognize that it exists when it sends the email, so the email contains an error message for the attachments, saying it doesn't exist, even though it is successfully added to the ticket. Another email is sent right after saying the attachment was added:\n# Same steps as above, only add the attachment on commenting, by clicking the attachment icon\n\n\\[bug 4\\] This can also be replicated with emoticons.\n\nh3. Expected Results\n\nThe customer should receive an automated email with that external comment. \n\nh3. Actual Results\n\\[bug 1 and 2\\] In first two cases, the images are broken:\n!attachment_after_commenting.png|thumbnail!\n\n\\[bug 3\\] The third problem shows this:\n!attachments_when_commenting.png|thumbnail!\n\n\\[bug 4\\] Here is the emoticons problem:\n!emoticons.png|thumbnail!\n\nh3. Note\n\nIt seems that an agent emailing him/herself does not cause this problem.\n\nh3.Workaround\nNone so far.","createDate":"2015-09-15T16:58:56.000+0000","comments":[{"text":"Attachments are broken for external emails parsed by the mail handler as well. Emails with attachments are ignored entirely and not ingested into Service Desk.","author":"JaredMunir"},{"text":"This is a duplicate of JSD-1370, and is a result of images not being correctly inlined, and therefore unless the email client shares a session with JIRA (web browser client perhaps) the images will not render correctly.\n\nThe fix for this, is actually blocked by the JIRA issue JRA-41675, and therefore I would recommend watching both issues for updates.\n\nUltimately it will require a JIRA upgrade as well as Service Desk upgrade when everything is released. However, at the moment it is not possible to give any estimate as to when this will be fixed.","author":"Matthew McMahon"},{"text":"Hi [~jsilveira]\n\nIn regards to the issue of not being able to add an attachment to a comment at the same time as making the comment, may I ask if this is happening when you are adding large images for examples? \n\nIf possible, can this be raised as a separate concern?","author":"Matthew McMahon"}]},{"summary":"Request type icons are not aligned correctly in the agent view","key":"JSDCLOUD-2230","url":"https://jira.atlassian.com/browse/JSDCLOUD-2230","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-2230].\n  {panel}\n\nKnown affected locations in the agent view:\n* agent issue view\n* request types list configuration\n* request types picker\n* old navigation customer portal preview button icon\n* queue \"Customer request type\" column display","createDate":"2015-08-19T07:40:22.000+0000","comments":[]},{"summary":"New Navigation does not have public sign up options","key":"JSDCLOUD-2162","url":"https://jira.atlassian.com/browse/JSDCLOUD-2162","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-2162].\n  {panel}\n\nh3. ***Summary***\nWith the previous navigation menu, there is an option to configure the Public signup option. The new navigation view at {{https://<instance URL>/servicedesk/agent/<PKEY>/settings/customers}} does not have an option to configure public signup.\n!Screen Shot 2015-07-31 at 12.42.28 PM.png|thumbnail!\n\nh3. ***Workaround***\n# Expand Navigation sidebar\n!Screen Shot 2015-07-31 at 2.05.27 PM.png|thumbnail!\n# *Switch back to old navigation*\n!Screen Shot 2015-07-31 at 2.05.08 PM.png|thumbnail!\n# Go to *People* tab > *Customers*\n# Public signup option available at the top right of the portal ( {{https://<instance URL>.atlassian.net/servicedesk/agent/<PKEY>/people/customers}} )\n!Screen Shot 2015-07-31 at 2.09.08 PM.png|thumbnail!","createDate":"2015-07-31T06:14:13.000+0000","comments":[{"text":"Hi [~namir]\n\nThank you for your report.\n\nThe new navigation has moved around some settings.\n\nTo find the public sign up options, please have a look under:\n\n* Settings > Request Security\n\nRegards\nMatt\nJIRA Service Desk developer","author":"Matthew McMahon"}]},{"summary":"Automation rule to transition issues upon creation fails and causes workflow corruption if there's an attachment included","key":"JSDCLOUD-2089","url":"https://jira.atlassian.com/browse/JSDCLOUD-2089","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-2089].\n  {panel}\n\nh3. Steps to reproduce\n1. Create a new Service Desk project.\n2. Add an automation rule with the following setup:\n* *WHEN*: Issue created\n* *IF*: Issue matches - Issue Type is \"IT Help\"\n* *THEN*: Transition issue to {{Respond to customer}}\n\n3. Add the \"Attachment\" field to the IT Help type on the customer portal.\n4. Create two issues via Service Desk > Create a Service Desk Request, one with an attachment and one without (the attachment can be anything, I've been using a text file containing the word \"test\").\n\nh3. Expected results\nBoth issues will be transitioned to {{Waiting for customer}}.\n\nh3. Actual results\nThe issue with no attachment transitions correctly, but the issue with the attachment remains in {{Waiting for support}}.\n# The Customer Request view says \"Your request status changed to Requester action Needed\" but the status isn't updated to match: [^request.png] \n# In the database, the status actually shows that its in {{Waiting For Support}}, but the transitions on the issue shows that its in {{Waiting for Customer}}. See [^TransitionsAreIncorrect.png]\n# The transition seems to have activated for a second or less, before reverting back to {{Waiting For Support}}. If you have the JIRA Suite Utilities plugin installed, you can actually see the status *was* in {{Waiting for Customer}} for one second. See [^JSUTransitions.png]\n# Running the Integrity Checker for workflows shows us exactly what the problem is: [^IntegrityChecker.png] the workflow current step have been corrupted by the automation due to the attachment bug. The integrity checker is able to fix it. \n\nh3. Workaround\nRemove the *Attachment* from the Visible Fields form so that users are forced to attach their files after the requests have been created.\nConsidering the same data from the *Steps to Reproduce* section, the workaround can be applied with the steps below:\n# Navigate to the desired Service Desk configuration screen.\n# Go to *Settings > Request Types*.\n# Select *IT Help > Edit fields*.\n# In the *Visible fields* section, remove the *Attachment* field.","createDate":"2015-07-13T07:55:20.000+0000","comments":[{"text":"Hi [~nmason],\n\nThis works as design because there are 2 events running when a new request is created with an attachment:\n- Create issue\n- Issue comment (adding attachment is being treated as adding a comment)\n\nAnd there are 2 automation rules in your SD project which are configured to get status updated accordingly.\n- Create issue -> New automation rule which you described above -> Status = \"Waiting for Customer\"\n- Issue comment (by adding attachment) -> Default automation rule of SD project (Transition on comment) -> Status = \"Waiting for Support\"\n\nAny more concern, more than happy to discuss. Otherwise, I'll close this shortly as \"Worked as design\" resolution.\n\nRegards,\nNga Lai\nJIRA Service Desk Team","author":"Nga Lai"},{"text":"Create a request with an attachment when there is only one automation rule for that SD project:\n1. Customer create a request for IT help in Customer Portal\n2. It meets condition in automation rule -> status is changed to \"Waiting for customer\" - that's why you also see the message in CP \"Your request status changed to Requester action Needed.\"\n3. Then attachment of that request is added via a comment which made the status change to \"Waiting for support\" - this is from the setting of Workflow\n\t\t\nThese 3 activities happen at the same minute but in a sequence like that.\nThe root cause of this problem is because we separate \"create a request\" and \"attachment\" into 2 activities and then the automation rule interferes in the middle of them.\ncc [~bbaker] [~miruflin] \n","author":"Nga Lai"},{"text":"When adding an attachment during issue creation on the customer portal, the ticket is created, then a comment is added with the attachment. It seems that this creates an awkward race condition with specific automation rules. \n\nTo fix this, we will probably need to re-do the way we do attachments on create, so they are part of a single operation instead of two.","author":"Ed Zhang (Automation)"},{"text":"Hi,\n\nPlease could I have an update on this?\n\nRegards,\n\nTom Devonald","author":"Tom Devonald"},{"text":"This is also causing us problems for issues raised by email (even if the email itself doesn't have an attachment, many have logos which are being added as attachments), so the workaround added on Thursday won't work in that situation. For more details, please see our service desk ticket number SDS-7035.","author":"Vikki Short"},{"text":"I couldn't reproduce it in the latest version in cloud. If the old status is displayed then it's an outdated status because the automation rule ran after the data was loaded for the immediate request details view.","author":"Dominik Franke"}]},{"summary":"JIRA Service Desk does not follow JIRA Translation","key":"JSDCLOUD-2049","url":"https://jira.atlassian.com/browse/JSDCLOUD-2049","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-2049].\n  {panel}\n\nh5. Issue Summary\nWhen a user translates his statuses in JIRA and sets his language to a preferred language, if he navigates to customer portal of Service Desk, some of the language change is not obeyed and this also affects emails sent by Service Desk to the users.\n\nAttached are 2 Screenshots that can serve as samples:\n* !E-mail notification.jpg|thumbnail!\n* !E-mail notification1.jpg|thumbnail!\n\nh5. Expected Behaviour\nThe notification all over should follow the specified translations to the language rather than English Language.\n\nh5. Actual Behaviour\nSome statuses or messages generated by JIRA still contain some parts in English, even despite the customer specifying the appropriate translation for them within JIRA.","createDate":"2015-07-02T08:46:50.000+0000","comments":[{"text":"Let me add that this does also affect Version 2.5.4 on my side.\n\nAnd the customer portal is also affected. Not only E-Mail.","author":"Michel Pittelkow"},{"text":"Out of box statuses display correct translation on a Customer Portal for other non static texts multi language support please watch [JSD-25|https://jira.atlassian.com/browse/JSD-25]","author":"Sergey Zaporozhtsev"}]},{"summary":"Customer does not get prompt message when accessing JIRA page","key":"JSDCLOUD-1806","url":"https://jira.atlassian.com/browse/JSDCLOUD-1806","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-1806].\n  {panel}\n\n*Steps to reproduce:*\n# Create a new SD customer and login to Customer Portal\n# Using the same browser, navigate to JIRA or JIRA Agile page (i.e {{https://<instance name>/secure/RapidBoard.jspa?rapidView=1&view=planning.nodetail}})\n\n*Current Result:*\n- It returns to Customer Portal page ({{https://<instance name>/servicedesk/customer/portals}})\n\n*Expected Result:*\n- Customers should be prompted with a message (e.g You are not authorized to access this page or You need to have JIRA application access to continue)","createDate":"2015-04-24T13:31:22.000+0000","comments":[]},{"summary":"Wrong status shown when transitioning SD issue using comments","key":"JSDCLOUD-1752","url":"https://jira.atlassian.com/browse/JSDCLOUD-1752","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-1752].\n  {panel}\n\nWhen we have an issue in 'Waiting for Customer' status and the customer triggers the transition to 'Waiting for Support' by commenting on the issue, the customer's comment is added, but the page is not refreshed after the transition is made. \n\nThat results in the page showing the old status (Waiting for Customer) and the customer has to refresh the page to see the new status.\n\nThis makes the customers confused, as it is not clear that the transition was correctly triggered.","createDate":"2015-04-08T16:42:05.000+0000","comments":[{"text":"We're using JSD 3.0.10 (last stages of evaluation) and this is still an issue.\nOur customers report to be confused by this behavior. \nThe usability of the customer portal suffers a lot. \n\nAny plans to fix that in the near future?\n\nAny update on this is appreciated.\nBest Regards.\n Julia","author":"J. D."},{"text":"Can't believe that this bug is still around after two years. Please do something. It does cause quite a bit of confusion.","author":"Tony Pieri"},{"text":"Another 1 1/5 years with no solution","author":"Amith Kumar"}]},{"summary":"Issue created with no indication of success","key":"JSDCLOUD-1632","url":"https://jira.atlassian.com/browse/JSDCLOUD-1632","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-1632].\n  {panel}\n\nIf you navigate to a service desk via the link at the top of a jira instance\n\nhttp://cl.ly/image/1m2Y1t320J3C\nService Desk menu -> All Service Desks\n\nhttp://cl.ly/image/011m401V1900\nFind a desk -> Customer Portal\n\nThis opens up a dialog. Now, attempt to file a ticket from this dialog. When I clicked on the submit button on the create ticket form, I got a spinner for around 20 seconds. Because of this latency I went to another tab or got a coffee or something, I don't remember what.\n\nWhen I came back, my spinner was gone and the form was still present with indication of success or failure. I clicked create again. This time I had the same experience. No indication of success or failure.\n\nThe ticket in question was created 3 times before I decided to click around in the interface to figure out if it was getting created or not.","createDate":"2015-03-09T06:32:31.000+0000","comments":[{"text":"This sounds like the problem when Customer Request Type has been hidden on a project.","author":"Matthew McMahon"}]},{"summary":"Non-Latin characters don't work in Request Name / Display names for customer portal fields","key":"JSDCLOUD-1419","url":"https://jira.atlassian.com/browse/JSDCLOUD-1419","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-1419].\n  {panel}\n\nSteps:\n\n1. Go to Settings > Request types and then click Edit fields for any of request types.\n2. Fill in Display names in Russian, Greek or some other language using a non-Latin alphabet. (you can copy and paste this: \"Описание\").\n3. Save and refresh.\n\nResult: \nNon-latin characters are lost, question marks are shown instead.\n\n*The same problem exists for Request names.*","createDate":"2015-01-28T08:28:07.000+0000","comments":[{"text":"Hi Alex Timofeyev,\nCould you create a support ticket at https://support.atlassian.com? \nThat way we can provide you with support specific to your circumstances and with higher security. \nThe credentials should be the same as for this site (https://jira.atlassian.com).\nThanks!\nJIRA Service Desk Product Team","author":"Chuong Nam Nguyen"},{"text":"Hi,\n\nI have created a ticket: SDS-4089.\n\nAlex","author":"Alex Timofeyev"},{"text":"Same problem here, I believe it's Windows OS related. On MacOS we have no problems with Greek characters on request names, queues etc.\n\nAlex, any news from SDS-4089 you can share before we submit another ticket as well?","author":"angel"},{"text":"[~aggelosp], we've been advised by Atlassian support to change collation of the database to resolve that. But since we are on Microsoft SQL database, the issue was not with collation, but with field type. All plugins use database tables that have varchar and text field types.  But for unicode nvarchar and ntext are necessary. So, we changed the database definition for the relevant fields, and it works now!\n\nLook for tables AO_54307E_xxxxxx.","author":"Alex Timofeyev"},{"text":"Thanks a lot [~Alext1]. From my understanding this a ActiveObjects framework bug right, it should be handled transparently when creating tables on SQL Server to use nvarchar column type, no? Is this raised as an issue somewhere?","author":"angel"},{"text":"[~cnguyen] Is there a related issue we can follow to track progress? I hope this is something that is going to be fixed soon.","author":"angel"},{"text":"This has been fixed in the underlying ActiveObjects library, and will be available with the next major release for new instances of JIRA.\n\nExisting tables will not be updated, due to its complexity and risk.\n\nTherefore best suggestion would be to export to zip, create a new JIRA instance, then import.","author":"Matthew McMahon"},{"text":"This issue seems not just affecting the Request Name / Display Name, but most of the Service Desk element. This is what have been reported by a user:\n{quote}\n1.\tQueue name: Service desk -> Queues -> Add new queue -> add queue name «Новая очередь» -> Create -> result is «????? ???????».\n2.\tReport name: Service desk -> Reports -> New report -> add report name «Новый отчет» -> Create -> result is «????? ?????».\n3.\tLabel name at report series: Service desk -> Reports -> Edit -> Add a series -> add label name «Метка» -> Add & Save -> result is «?????».\n4.\tSLA metric name: Service desk -> SLA -> new metric -> add metric name «Новая метрика» -> assign any START and STOP conditions -> save & update -> resuli is «????? ???????».\n5.\tCalendar name: Service desk -> SLA -> Calendar -> new calendar -> add calendar name «Календарь» -> save -> result is «?????????».\n6.\tHolyday name: Service desk -> SLA -> Calendar -> edit calendar -> add holyday name «Праздник» -> save & update -> result is «????????».\n7.\tRequest name and groups: Service desk -> Settings -> Request types -> add request name « Название запроса» and group name « Группа» -> add -> result «???????? ?????» at request name and «????» at group name.\n8.\tWorkflow status name to show customer: Service desk -> Settings -> Request types -> edit fields -> Workflow Statuses -> add status name to show customer «Статус» -> Save -> result is «??????».\n9.\tCustomer portal name: Service desk -> Settings -> Portal settings -> change customer portal name to « Центр поддержки» -> save -> refresh screen or navigate to customer portal -> result -> « ????? ?????????».\n10.\tConfluence space name: Service desk -> Settings -> Confluence KB -> Link to a knowledge base -> Select application Confluence -> Select space named «Документы» -> Link -> result space name «?????????».\n11.\tLabel name at article restrict: Service desk -> Settings -> Confluence KB -> add a Confluence label «Метка» at Restrict to articles with labels -> Update & refresh screen -> result is «?????».\n12.\tAutomation rule name and description: Service desk -> Settings -> Automation -> New rule -> for example Custom rule -> add rule name «Правило» and rule description «Описание» -> add any condition and action at WHEN IF THEN -> Save -> open created rule -> result «?????» at rule name and «??????» at rule description.\n{quote}\n\nCheers,\nJulian.","author":"Julian"},{"text":"Sorry for the notification, accidentally triggered the shortcut keys","author":"Julian"}]},{"summary":"Service Desk Customer cannot view public JIRA when logged in to JIRA Service Desk ","key":"JSDCLOUD-1367","url":"https://jira.atlassian.com/browse/JSDCLOUD-1367","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for {*}JIRA Service Desk Cloud{*}. Using {*}JIRA Service Desk Server{*}? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-1367].\r\n{panel}\r\n{panel:title=Update as of 25 May 2022}\r\nHi everyone,\r\n\r\nThanks for your patience with us on this bug, I understand it must be inconvenient to use the workaround for the time being. My engineering team is currently in the process of transferring components and will be learning/ramping up on their new area within the coming months. \uD83D\uDE42 We are currently in the process of sorting through all of your customer feedback and identifying what we will be able to reasonably take on and add to our roadmap during the coming months. I will update you as soon as we have more solid plans!\r\n\r\nWarm regards,\r\n\r\nMichelle\r\n{panel}\r\n{panel:title=Update : 13th October, 2020}\r\nHi everyone,\r\n\r\nThanks for your patience. We are currently in the process of assigning ownership to these requests so they can be expedited. I have assigned an owner to this ticket who will triage it and provide an update. Please note that this is currently not on our short-term backlog.\r\n\r\nCheers,\r\nThe Service Desk Team\r\n{panel}\r\nh3.  \r\n\r\nIssue Summary\r\n\r\nThe customers (both portal-only customers and the ones having Atlassian account) can see the issues in the [public Jira projects|https://confluence.atlassian.com/adminjiracloud/allowing-anonymous-access-to-your-project-779172888.html] when they are not logged in to JIRA Service Desk portal. Once they login to the JIRA Service Desk portal, however, they can't any longer view the issues in the public Jira projects. Keeps on getting redirected to the JIRA Service Desk portal.\r\nh3. Steps to Reproduce\r\n # Create or use a [public Jira project|https://confluence.atlassian.com/adminjiracloud/allowing-anonymous-access-to-your-project-779172888.html].\r\n # View an existing issue in the publicly accessible Jira project via a browser where you're not signed in to any Atlassian cloud product.\r\n # Issue views successfully.\r\n # In the same browser, open another tab and log in with an existing portal-only customer in a Jira service desk portal of the same public project.\r\n # Try to view the same issue again from step#: 2\r\n # You will be redirected to the Jira service desk portal.\r\n # (Optional) - [Migrate the portal-only-user to the Atlassian account|https://confluence.atlassian.com/cloud/manage-jira-service-desk-customer-accounts-913213935.html#ManageJiraServiceDeskcustomeraccounts-HowcanIgivelicensestocustomersIwanttocollaboratewithintrueorConfluence?].\r\n # Repeat steps 2-6 again\r\n\r\nh3. Expected Results\r\n\r\nThe publicly accessible project issues should be accessible in both cases i.e. When the portal-only customer account is logged into the portal or not logged in.\r\nh3. Actual Results\r\n\r\nThe publicly accessible project issues are accessible only when the customer is not logged into the portal.\r\nh3. Workaround\r\n\r\nA possible workaround could be to use two different browsers until this bug is fixed. One browser window to login to the portal and another browser to view the public issues. Alternatively, the same browser can be used with one standard window and another private browsing (incognito) to view public issues.\r\n{panel:title=Example Use Case|borderStyle=dashed|borderColor=#cccccc|titleBGColor=#f7d6c1|bgColor=#ffffce}\r\nAll our customers can have a service desk customer account which they need to ask support. If a customer uses this service desk to e.g. request a feature, we might log this as a feature request in our \"public\" jira (a jira project where anyone can view the issues and see their progress). Typically, the service desk ticket is then closed with a message that a feature request is made (with a link to it) and that we plan to deliver this feature then or then.\r\n\r\nAn anonymous user can - like expected - view the ticket. If that user then clicks on login, he can login using his service desk customer login, and can still see the ticket and navigate the public jira project. However, once he visits the service desk portal, he cannot return to the public jira project anymore, as he keeps being redirected to the service desk interface.\r\n\r\nHowever, we want all users (anonymous and service desk customers) to view and browse our public jira project.\r\n{panel}","createDate":"2015-01-16T15:17:49.000+0000","comments":[{"text":"I would also vote for this fix/feature.\n\nIt is very confusing for our internal customers to need to log out to view some tickets, while needing to log in to request personal help.","author":"Jared Kipe"},{"text":"Hello,\n\nAfter a discussion with Atlassian support (SDS-5664), I really think that this issue is a (functional) bug. It is really hard to make Service Desk customer log off, check the Jira project that is supposed to be public and then log in again to answer on the Service Desk issue. I won't say that it is blocking but it is a major issue.\nWould it be possible to re-qualify it?\n\nBest regards.","author":"Jean-Denis Coffre"},{"text":"Hi,\nI do agree on make this as a bug rather than a suggestion. System would still allow SD customer to view public JIRA issue instead of doing redirection to share portal.\nThanks","author":"Thong Bui Quang"},{"text":"Hi,\n\nAn update on progress with this issue, is that we began work on constructing a solution.\n\nThe intention was to \"trick\" JIRA into believing that a Service Desk customer can also be considered an anonymous user inside JIRA. However we soon realised that this has design challenges and leads to what we would consider an even more confusing experience for customers. For example, the follow user flow might help illustrate the situation:\n\n* The user logins in to the portal\n\n!no1-image2015-7-22 10-6-42.png|thumbnail!\n\n* Now they KNOW they are logged in. They end up at some place that links them back into JIRA\n\n!no2-image2015-7-22 10-8-19.png|thumbnail!\n\n* Ok now they are in JIRA platform and our effectively anonymous code has kicked in. But WAT - JIRA tells them to login\n\n!no3-image2015-7-22 10-10-47.png|thumbnail!\n\n* But have logged in right - they did it themselves. Ok so maybe they wont see that. They navigate some more, say to the dashboard\n\n!no4-image2015-7-22 10-18-19.png|thumbnail!\n\n* Now the call to action here is login - wat? And if they do try to login they get this\n\n!no5-image2015-7-22 10-19-55.png|thumbnail!\n\n* ok I am out of here this is freaking me out. Let me press back button and get to the portal again where I am safe\n\n!no6-image2015-7-22 10-22-33.png|thumbnail!\n\n----\n\nAs you can see from the user flow, there are many inconsistencies with the attempted approach. While this might achieve the purpose of this issue, it will likely only raise further concerns / confusion for customers.\n\nSo rather than simply living with this experience, and marking this issue as fixed, we are going back to the drawing board.\n\nThe intention is that the finished result will be a seamless / deliberate user experience within JIRA and JIRA Service Desk, that leaves no place for confusion.\n\nThank you for your patience.\n\nRegards\nMatt\nJIRA Service Desk developer\n\n\n\n\n\n","author":"Matthew McMahon"},{"text":"Perhaps have two separate session cookies, one for jira and one for jira-servicedesk.\nServicedesk would check for the servicedesk cookie, and load that session if set, otherwise check for the jira cookie and load that session if set, otherwise display the login.\nJira would check for the jira cookie and load that session if set, otherwise the anon user would be used and the login form shown.\n\nThe login capabilities of servicedesk could be thrown away and replaced with the stock jira login form, setting the appropriate cookie upon successful auth.","author":"Jared Kipe"},{"text":"How about at least adding an option to offer \"regular\" (JIRA) public sign-up when Service Desk-only public sign-up is disabled? So that if you disable Service Desk public signup, users aren't redirected to a sign-in page that doesn't give them any option when they don't already have an account (unlike if they click on the \"Sign in\" link at the top of the page).","author":"David [old account]"},{"text":"Hey Everyone,\nWe've been evaluating the Service Desk for several weeks now and this issue appears to be a blocker problem for us. Has any of the commenters here found any satisfying workaround?\n@Matthew McMahon [Atlassian], can I ask if there's been any progess on this work? Also, wouldn't something like @David [Innovalog] 's suggestion be possible, so basically to bypass the SD sign-up for the time being and let users create a public JIRA account, which would let them view and vote on public issues?\n( @Jamie Gaard [Atlassian], just so you know)","author":"Levente Szabo [Midori]"},{"text":"We are also looking for a solution for this issue and have been waiting for several months now. We cannot let our customers know about existing feature requests for our add-ons without telling them to log out of Service Desk or use a private browsing window.\n\nI'd be very happy to get an update on the progress here.","author":"Almuth Boehme [Communardo]"},{"text":"We also have this problem! Would love a fix!","author":"Matt Loszak"},{"text":"I just tried reproducing the problem, and couldn't. Apparently, the HelpDesk login is now independent from the Jira/Confluence login. Are you seeing the same?\r\n\r\nHere is what I tried:\r\n * I logged out of my Cloud instance\r\n * I navigated to /servicedesk/customer/portals\r\n * It asked me to log in or create an account. I created an account (a \"customer\" account)\r\n * I received the email, validated my new account, ended up on the portal\r\n * from there, I was able to create new SD requests\r\n * AND, I was also able to navigate to any public Confluence and Jira page! In fact, when I navigated to Jira or Confluence, I was considered as \"anonymous\" (not logged in)!\r\n\r\nIt looks like Atlassian might finally have solved the problem by separating the HelpDesk login from the \"normal\" Jira Cloud login. Are you guys seeing the same?","author":"David Fischer"},{"text":"I have just tested this and can confirm that this is still a problem, this is a blocker for us using JSD for customer support. Ideally we want customers to be able to view bugs etc.","author":"Deleted Account"},{"text":"This pretty much makes the Jira Service Desk and Jira integration useless for us. We can't point customers to feature requests since they can't see them because of their SD account.","author":"Mohammed Davoodi"},{"text":"I would like to request that the summary of this issue is altered to use the correct terminology (description is also badly worded):\r\n{noformat}\r\n Service Desk Customer cannot view public issue when logged in to JIRA Service Desk{noformat}\r\nThis more accurately describes the problem and how serious it is. The more attention this gets the better.\r\n\r\nThe fact this got its priority slashed recently is genuinely a little depressing _-_ we _try_ to provide a seamless Software/Service Desk service for customers. Atlassian should try hosting their support desks and software projects on the same installation themselves in order to better see the problem.","author":"Mike Harrison [The Plugin People]"},{"text":"This issue still happening in Cloud. The description provide a link to see the current status of this issue but it seems it's a broken URL from *August 2015*\r\n\r\nhttps://jira.atlassian.com/browse/JSD-1367?focusedCommentId=774574&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-774574","author":"Italo Qualisoni [e-Core]"},{"text":"This issue is very annoying because we have to explain to customers every time we tell their suggestion is on our public tracker.\r\n\r\nThey are the most probable people who want to vote or comment, but they cannot do it, which does not make sense.\r\n\r\nI hope Atlassian raises the priority of this issue and puts into a real backlog.","author":"Shunsuke Osawa"},{"text":"Consider this me begging someone from Atlassian to provide an update on this bug. Maybe the reporter, Janice can help? It punishes customers who use both Software and Service Desk - don't you want to be encouraging users to purchase multiple products instead? The current state is not something that can just be lived with - customers (ours _and_ yours) are unable to receive the service they expect. As per my previous comment, this issue is named wrongly which limits its exposure.","author":"Mike Harrison [The Plugin People]"},{"text":"Seems ironic that we are all on this page operating in a way that we desire for our users. I'm very confident this can be fixed by the Atlassian team. I just don't understand what they're waiting on.","author":"Deleted Account"},{"text":"I would love for Atlassian to explain why this functionality is possible with their version of Jira Software and Service Desk, but not with the one they sell.\r\n\r\nAs Atlassian system owners for our companies, much of how we learn is by using the products with Atlassian directly. I can reach out to Atlassian Support Portal, I can vote, watch, or comment on an Atlassian JSDCLOUD bug or feature. \r\n\r\nYet, when I turn around and try to offer the same service to my customers, it fails.\r\n\r\nAdvice to all, don't use Jira Service Desk or Software based on how you see Atlassian use it themselves, its a totally different product that they are selling you that is full of limitations.","author":"Brian B."},{"text":"Hi Folks!\r\n\r\nAs a part of our efforts to make sure that our bug reports have as much useful information in them as they can, I've gone through and reverified this issue, updated the issue description to make it a bit clearer.\r\n\r\nCheers,\r\n\r\nAsim\r\n Atlassian Support","author":"Asim K"},{"text":"This is real problem. We want to use Jira software to better manage our non-Service desk projects. However our users can't even view the issues. Being able to link tickets across projects is a real positive feature. \r\n\r\nI have just setup a project, and added Public sharing which explicitly states that \"including logged in Users\" can browse the project. Even when the project is not public, the User can't browse the project. \r\n\r\nThis ticket is over 5 Years old, and clearly a bug. This is also preventing sales of your product. How do we get this in front a the Altassian marketing team ?\r\n\r\n \r\n\r\n!image-2020-05-12-22-15-41-127.png!","author":"Stewart Tayles"},{"text":"Come on guys. Please fix this. How many years does it take to fix this once and for all?","author":"Karel Kyovsky"},{"text":"I'm pretty tired of explaining to customers they need to logout of service desk to view our Jira issues.","author":"Mohammed Davoodi"},{"text":"Hey!  Just though I'd add a +1 here.\r\n\r\nJSD  users don't seem to play well with Jira or Confluence.     \r\n\r\nCheers,\r\nBrendan","author":"Brendan Patterson"},{"text":"*JSD doesn't play well with others* so we're at the point of trying to find time to either split JSD out into its own instance (which breaks all existing support links :/), or move the docs and 'software' projects to another domain (all references to public bugs and things hanging off/integrating with that have to change :/), just to fix this problem. So tired of 'cant see the bug / doc page' explanations, going on years now.","author":"Andy Brook"},{"text":"Hi everyone,\r\n\r\nThanks for your patience. We are currently in the process of assigning ownership to these requests so they can be expedited. I have assigned an owner to this ticket who will triage it and provide an update. Please note that this is currently not on our short term backlog.\r\n\r\nCheers,\r\nJason and the Service Desk Team","author":"Jason D'Cruz"},{"text":"Any new news? This issue is making me consider moving off of JSM in order to have a better user experience. ","author":"Julia @ 55 Degrees"},{"text":"Hey all, \r\n\r\nIt's been a while since we have updated this request. It is on our radar, but it is not currently planned. \r\n\r\nWe are working on some tangential projects which might cast some light on this request. I will update accordingly, otherwise we will review again in 6 months.\r\n\r\nCheers, \r\n\r\nBen. ","author":"BK Paton"},{"text":"That's sad news, Ben. I'd expect that at least integration between Atlassian products themselves should work without such workarounds which you can't explain in a good way to users in our support.\r\n\r\nNevertheless, thanks for the update.","author":"Matthias Gaiser [K15t]"},{"text":"I agree with Matthias! \r\nAs a customer requesting support for a product, I already had contact with this bug twice recently. Seeing this bug is not being addressed within the next months and estimating that I am not the only customer struggling with this, this bug is really causing a lot of work and costs for all companies using the JSD for support. For the support this means additional requests that are only with respect to problems on \"how to use the service desk\", taking away valuable time that could be put into helping customers seeking the support for their product.\r\n\r\nBecause we as a company are using Atlassian ourselves, this bug will be the reason on why we will not start using JSD as a customer facing interface in the future.","author":"Paul Rinnert"},{"text":"Hi there. Does the assignee change mean that this ticket will be worked on this year? ","author":"Joe Baldwin"},{"text":"I'd guess not. It was probably automation changing the assignee. I've been watching the ticket since 2020...","author":"Leslie Gilbert {Appfire}"},{"text":"I found that this issue also impacts the usage of Smart Links. When an agent pastes a link to a public Jira ticket, the default behavior is for this link to turn into a 'Smart Link' and be displayed 'Inline'.\r\n\r\nBut on the customer's side the Inline Smart Link can't render properly because it can't fetch the link to the public Jira ticket when logged in as the Customer, so the customer only sees text of the Issue number, like PROJECT-12345, rather than a hyperlink.\r\n\r\nWe have to ask each of our agents individually to change their [Link preferences|https://id.atlassian.com/manage-profile/link-preferences] for URLs to add the domain of our Atlassian Jira Cloud instance as an exception to only use a standard URL hyperlink format because support for managing this at the project or instance level is not yet implemented, see [https://jira.atlassian.com/browse/JRACLOUD-79892|https://jira.atlassian.com/browse/JRACLOUD-79892:].","author":"Stevan"}]},{"summary":"\"Change Password\" link is not hidden when \"External User Management\" is ON","key":"JSDCLOUD-976","url":"https://jira.atlassian.com/browse/JSDCLOUD-976","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-976].\n  {panel}\n\n*Steps to Reproduce*:\n# Integrate JIRA with Crowd/LDAP\n# Set the Permission to \"Read/Write\"\n# Move it to the top of the Directory List.\n# Navigate to _JIRA Administration > General Configuration > Edit Settings_\n# Turn On the \"External User Management\" option.\n# Navigate to the current User Profile and the \"Change Password\" link is gone.\n# Access JIRA Service Desk Customer Portal.\n# Access the User Profile.\n\n*Expected Result*:\nThe \"Change Password\" is removed from the profile same as JIRA User Profile as expected from \n- https://jira.atlassian.com/browse/JRA-27280\n\n*Actual Result*:\nThe \"Change Password\" link is still appear and if the Directory permission in Crowd is set to true for \"Modify User\" the password will be changed.\n\n!pass.PNG|thumbnail!","createDate":"2014-10-17T15:06:19.000+0000","comments":[]},{"summary":"JIRA Stops working after Disabling or Uninstalling JIRA Service Desk","key":"JSDCLOUD-337","url":"https://jira.atlassian.com/browse/JSDCLOUD-337","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Service Desk Cloud*. Using *JIRA Service Desk Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JSDSERVER-337].\n  {panel}\n\nh3. +Steps to Reproduce:+\n# Install JIRA Service Desk;\n# Create a Project through JIRA Service Desk;\n# Disable or Uninstall JIRA Service Desk.\n\nh3. +Expected Behavior:+\nJIRA would hide/remove any configuration regarding JIRA Service Desk, and would continue to run normally.\n\nh3. +Actual Behavior:+\n* JIRA's dashboards stop working; \n* It is not possible to log in but through login.jsp;\n* Accessing a project is not possible;\n* Trying to view the Permission tab through the project created throws an error.\n\n----\nh3. +Workaround+\n\n*+Option 1:+* Reinstall/Re-enable JIRA Service Desk.\n\n*+Option 2:+*\n# If unable to log in, access JIRA through http://<jira-address>/login.jsp\n# Navigate to *Administration » Issues » Permission Scheme*;\n# Delete \"*• (Anyone)*\" from all permissions in all permission schemes.\n\n*+Option 3:+*\nDelete these from the database using:\n{code:SQL| borderStyle=dashed| borderColor=#6A8EB3 |bgColor=#F8F8F8}\nDELETE FROM schemepermissions WHERE perm_type = 'sd.customer.portal.only';\n{code}\n(!) If deleting through the database, please make sure to create a backup. Also, make sure to shutdown JIRA first, and restart it afterwards.\n\n----\nh4. +Notes:+\nThis seems to be happening because JIRA Service Desk does not remove or hide the *Service Desk Customer - Portal Access (Anyone)* permission, and when JIRA tries to load it the following is thrown in the screen:\n{noformat:borderStyle=dashed| borderColor=#6A8EB3 |bgColor=#F8F8F8}\njava.lang.NullPointerException\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeManager.hasSchemePermission(DefaultPermissionSchemeManager.java:499)\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeManager.hasPermission(DefaultPermissionSchemeManager.java:467)\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeManager.hasSchemeAuthority(DefaultPermissionSchemeManager.java:393)\n{noformat}\nThis also appears in the logs:\n{noformat:borderStyle=dashed| borderColor=#6A8EB3 |bgColor=#F8F8F8}\n2014-02-14 14:37:39,773 http-bio-8080-exec-1 ERROR matheus 877x158x5 1fqd1vy 192.168.10.104 /rest/gadget/1.0/issueTable/jql [common.error.jersey.ThrowableExceptionMapper] Uncaught exception thrown by REST service\njava.lang.NullPointerException\n        at com.atlassian.jira.issue.search.parameters.lucene.DefaultPermissionQueryFactory.collectProjectTerms(DefaultPermissionQueryFactory.java:171)\n        at com.atlassian.jira.issue.search.parameters.lucene.DefaultPermissionQueryFactory.getQuery(DefaultPermissionQueryFactory.java:68)\n        at com.atlassian.jira.issue.search.parameters.lucene.PermissionsFilterGeneratorImpl.getQuery(PermissionsFilterGeneratorImpl.java:38)\n        at com.atlassian.jira.issue.search.providers.LuceneSearchProvider.getPermissionsFilter(LuceneSearchProvider.java:522)\n        at com.atlassian.jira.issue.search.providers.LuceneSearchProvider.getHits(LuceneSearchProvider.java:281)\n        at com.atlassian.jira.issue.search.providers.LuceneSearchProvider.search(LuceneSearchProvider.java:414)\n{noformat}\n ","createDate":"2014-02-14T17:51:13.000+0000","comments":[{"text":"Wow, this one is a doozy! Hard to automate a test for I can imagine. There's all sorts of other data and configuration changes that get left behind if you uninstall SD. I've had to go through and remove schemes, configurations, fields. Not pretty ","author":"MattS"},{"text":"This is a duplicate of JRA-36940, which is fixed in JIRA 6.2. It is caused by JIRA Service Desk adding entries to the {{schemepermissions}} table in order to provide specific permissions. When the plugin is uninstalled this causes problem with JIRA as it does not know what those permissions related to.\n\nThis is fixed in JIRA 6.2 as it ignores the permissions in the table.","author":"Dave C"},{"text":"David, when you say \"manually\" you must be referring to something Service Desk does on install right? Was the fix for JIRA to ignore the new permissions somehow?","author":"MattS"},{"text":"[~matt.doar] on install Service Desk inserts records into the {{schemepermissions}} table. When the plugin is installed, that's OK, however when it isn't JIRA has no idea what those records are for and throws the exception in this bug.\n\nI'm not entirely sure on the actual coding changes in JIRA to handle this, other than knowing the bug was fixed.","author":"Dave C"}]},{"summary":"Using h6 in the Rich Text gadget converts all characters to upper-case","key":"JRASERVER-78712","url":"https://jira.atlassian.com/browse/JRASERVER-78712","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen using the h6 header size on a Rich Text gadget, all the text in the header will be converted to upper-case.\r\n\r\nh3. Steps to Reproduce\r\n # Add the Rich Text gadget to a dashboard\r\n # Add a h6 size header with its text in lower-case\r\n # Save the changes\r\n\r\nh3. Expected Results\r\nThe text will be displayed in lower-case:\r\n !expected_results.png|thumbnail! \r\n\r\nh3. Actual Results\r\nThe text will be displayed in upper-case:\r\n !actual_results.png|thumbnail! \r\n\r\nh3. Workaround\r\nIt seems to affect only the h6 header size. Any other header size from h1 to h5 works fine.","createDate":"2025-03-28T14:28:54.000+0000","comments":[{"text":"Hi [~rrosa@atlassian.com] \r\nI can not replicate this bug in Jira 10.3.2 version.\r\nI attached screen recording with my replication.\r\n\r\nI am closing this issue for now, if there will be any additional information please reopen it.","author":"Adrianna Musialik"}]},{"summary":"Atlassian DC installers are not accessible for screen reader users","key":"JRASERVER-78711","url":"https://jira.atlassian.com/browse/JRASERVER-78711","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAtlassian DC installers such as “Jira” or “JSM” cannot be accessed by screen reader users with jaws\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Download any Atlassian DC installers such as “Jira” or “JSM” in the windows\r\n# Try to install any of the products with the installers using jaws\r\n# Observe that the options within the installers cannot be accessed with a screen reader users\r\n\r\n\r\nh3.Screenshot\r\n !screenshot-1.png|thumbnail! \r\nh3.Screen Recording\r\nhttps://www.loom.com/share/4d227630a14c4e32b44117648fe883f3\r\n\r\nh3. Actual Results\r\nWhen screen reader users try to install any of the Atlassian DC products such as “Jira” or “JSM”, in the second dialog (second step) it is not accessible for the screen reader users, the options cannot be focused and operable with screen reader\r\n\r\nButtons such as Next and Cancel are not announced by the screenreader\r\n\r\nAs a result, Screen reader users gets confused and will not be able to install the products independently and \r\n\r\n\r\nh3. Expected Results\r\nMake sure that the entire installation process should be accessible to all the screen reader users across all the platforms\r\n\r\n Support ticket: A11Y-369: Atlassian DC Installers Do Not Work with Screen Readers Properly\r\nh3.Environment\r\n\r\n\r\nMacBook Pro (16 inch, 2021)\r\nmacOs Ventura 13.5\r\nChrome - Version 115.0.5790.170 (Official Build) (arm64)\r\nFirefox- Version 112.0. 1\r\nSafari- Version 16.5 (18615.2.9.11.4)\r\nJAWS- Version 2023\r\nNVDA- Version 2023\r\nVoiceover - Version Latest\r\n \r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T05:23:35.000+0000","comments":[]},{"summary":"Universal plugin manager IS_READONLY check reporting false positives ","key":"JRASERVER-78708","url":"https://jira.atlassian.com/browse/JRASERVER-78708","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nWhen installing fresh installation or upgrading to Jira 10.5.0 UPM (The Universal Plugin Manager (v7.1.5)) runs a newly introduced check to verify the ownership of the directory JIRA-HOME OR JIRA-SHARED-HOME/upmconfig part of [Secure app installations with app signing|https://community.atlassian.com/forums/Data-Center-discussions/Introducing-App-signing-A-key-step-to-improve-App-security/td-p/2840244] . The check fails not for the directory ownership check as its intended but gives false positive because the directory doesn't even exist\r\nh3. Environment\r\n\r\n10.5.0\r\nh3. Steps to Reproduce\r\n # Install Jira 10.5.0 or upgrade UPM to v7.1.5\r\n\r\nh3. Expected Results\r\n\r\nUPM starts properly and runs the checks IS_READONLY / IS_NOT_SELF_OWNED with no problems , the plugins checks the existence of the paths before checking their ownership\r\nh3. Actual Results\r\n * UPM throws an error misleading the administrator as if upmconfig is having the wrong permission while it does not even exist \r\n\r\n{code:java}\r\n2025-03-27 09:52:31,243 Caesium-1-3 ERROR ServiceRunner     [signing.api.config.UpmConfig] UPM configuration Safety Check failed : UpmConfig Directory failed safety check! /var/atlassian/application-data/jira/upmconfig is not readonly, /var/atlassian/application-data/jira/upmconfig belongs to the current user [jira]\r\n{code}\r\n \r\nh3. Workaround\r\n * Currently there is no known workaround for this behavior. A workaround will be added here when available.\r\n * The error is harmless and can be ignored.\r\n\r\nh3.  ","createDate":"2025-03-27T11:23:27.000+0000","comments":[{"text":"Hello,\r\n\r\nThis bug has been fixed in UPM (7.1.6 and above) and will be shipped with the next Jira bugfix release.","author":"Etienne Lacazedieu"},{"text":"This is where you can download the jar-file\r\n[https://maven.artifacts.atlassian.com/com/atlassian/upm/atlassian-universal-plugin-manager-plugin/7.1.6/]","author":"Peter Adrial"}]},{"summary":"Unable to add a user during the second attempt to search for the Single User Picker field in JQL Basic Search.","key":"JRASERVER-78703","url":"https://jira.atlassian.com/browse/JRASERVER-78703","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe problem occurs during the Basic Search but not in the Advanced Search.\r\nIn the single-user picker field with project-specific context, selecting one user and then clicking the 'Search' button prevents the selection of any other users in the second attempt, resulting in a 'No matches' message even though the user is available in the dropdown options. However, during the first search attempt, multiple users can be found and selected simultaneously without this issue.\r\nh3. Steps to Reproduce\r\n\r\n1. Create a custom field named 'Test Single User project' of type User Picker (Single User). \r\n2. Create three test users \r\n3.  Navigate to the Search Issue page. Under Basic Search, try to filter by 'Test Single User project'. In the first search, input the email addresses/username of the test users, and options appear in the dropdown for selection, as shown below:\r\n\r\n!image-2025-03-25-17-53-28-690.png|width=464,height=208!\r\n4. Select a test user and click search\r\n5. Try searching for another user by entering their email address/username to select them from the list.\r\nh3. Expected Results\r\n\r\nThe dropdown should include the matching users.\r\nh3. Actual Results\r\n\r\nThe dropdown shows ‘No Matches’\r\nh3. Workaround\r\n\r\nChange the context to global  for the affected custom field \r\nOR\r\ncreate a new custom field with global context for the purpose.\r\nPlease refer to [Configuring custom field contexts|https://confluence.atlassian.com/adminjiraserver/configuring-custom-field-contexts-1047552717.html#Configuringcustomfieldcontexts-context_configuration]","createDate":"2025-03-25T12:27:40.000+0000","comments":[]},{"summary":"The \"Manage App\" page incorrectly show the Proforma App as a paid app","key":"JRASERVER-78702","url":"https://jira.atlassian.com/browse/JRASERVER-78702","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAs mentioned in the [Proforma listing on the Atlassian Marketplace|https://marketplace.atlassian.com/apps/1215833/proforma-forms-checklist-for-jira?tab=overview&hosting=datacenter], the Proforma is free for Jira users who are using JSM (Jira Service Management) on any version from 10.3.0:\r\n{quote}\r\nFor Jira Service Management Data Center 10.3 (and later) license holders, ProForma is free of charge! Explore our ProForma installation and licensing guide\r\n{quote}\r\n\r\nHowever, whenever a Jira Admin tries to upgrade the Proforma app via the page *⚙ > Manage Apps > Manage Apps*, the Proforma app is diplayed in the UI as a paid app, causing a lot of confusion, since this app should be free.\r\n\r\n\r\nh3. Steps to replicate\r\n\r\n- Install JSM on the version 10.3.0\r\n !JSM_Version.png|thumbnail! \r\n- Download a Proforma version from [the version history page|https://marketplace.atlassian.com/apps/1215833/proforma-forms-checklist-for-jira/version-history] that *is not the latest version*, for example 10.3.2-DC\r\n- Install this version in the JSM application via the page *⚙ > Manage Apps > Manage Apps*\r\n-- (i) To be able to upload this version via the Manage Apps page, you will to follow the steps from the KB article [How to re-enable plugin upload in Jira Data Center|https://confluence.atlassian.com/display/JIRAKB/How+to+re-enable+plugin+upload+in+Jira+Data+Center]\r\n- After the app is installed, check its listing in the page page *⚙ > Manage Apps > Manage Apps*\r\n\r\nh3. Expected behavior\r\n\r\nWe should see an option to upgrade the app to the latest version *for free*.\r\n\r\nh3. Actual behavior\r\n\r\n- The message below is shown:\r\n{code}\r\nYou may update this app but the newest version isn't free. You can purchase a license through Atlassian.\r\n{code}\r\n- The update button is shown as \"Paid Update\"\r\n\r\n !PaidUpdateButton.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nIgnore the message saying that the app is not for free, and simply click on the *Paid Update* button. The app will be upgraded for free without the need to enter any license:\r\n !AfterClickingOnPaidUpdate.png|thumbnail! ","createDate":"2025-03-24T10:48:22.000+0000","comments":[]},{"summary":"Jira 10 no longer allows customizing webhooks queue size and number of consumers","key":"JRASERVER-78697","url":"https://jira.atlassian.com/browse/JRASERVER-78697","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Jira 9.x, the WebHooks queue size and the number of consumers were configurable.\r\n\r\nHowever, since Jira 10.0.0, these configurations have changed to hardcoded values, with the queue size set to a non-customizable limit of 250 and 5 consumers.\r\n\r\nThis change results in webhook events being discarded when the queued tasks exceed this limit, with no workaround available, representing a regression from previous versions.\r\n\r\nh3. Steps to Reproduce\r\n # Configure some 10 WebHooks to listen to all the events available and do not \"Exclude body\"\r\n # Setup a JMeter or other request automation to simulate Issue updates, transitions and comment creations.\r\n\r\nh3. Expected Results\r\n\r\nJira should allow for the customization of the WebHooks queue size and the number of consumers to handle events as in previous Jira versions. This would allow busier instances to process webhooks without dropping them.\r\n\r\nh3. Actual Results\r\n\r\nWebHooks queue size and the number of consumers are hardcoded to 250 and 5 respectively.\r\n\r\nThe below exception is thrown in the atlassian-jira.log file and webhook events are not processed.\r\n{noformat}\r\n2025-03-17 10:20:32,856+0000 JiraTaskExecutionThread-93 ERROR user     [c.a.event.internal.AsynchronousAbleEventDispatcher] There was an exception thrown trying to dispatch event [com.atlassian.jira.event.issue.IssueEvent@53f06a8a[issue=kanban-145,comment=<null>,worklog=<null>,changelog=[GenericEntity:ChangeGroup][issue,112345][author,User][created,2025-03-17 11:20:32.704][id,556466],eventTypeId=2,sendMail=false,params={eventsource=action, baseurl=https://jira.test.com},subtasksUpdated=true,spanningOperation=Optional.empty]] from the invoker [com.atlassian.event.internal.ComparableListenerInvoker@daad2a]\r\njava.lang.RuntimeException: Task com.atlassian.webhooks.internal.DefaultWebhookService$$Lambda$11221/0x00007f6699b97b98@33b3e06d rejected from java.util.concurrent.ThreadPoolExecutor@6401247d[Running, pool size = 5, active threads = 5, queued tasks = 250, completed tasks = 2000]. Listener: com.atlassian.jira.plugins.webhooks.spi.JiraWebhookEventPublisher event: com.atlassian.jira.event.issue.IssueEvent\r\n    at com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:53)\r\n    at com.atlassian.diagnostics.internal.platform.monitor.event.EventSystemMonitor.invokeMonitored(EventSystemMonitor.java:105) {noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-19T14:58:29.000+0000","comments":[{"text":"{panel:title=Atlassian Update – April 1, 2025|borderStyle=solid|borderColor=#ebf2f9|titleBGColor=#ebf2f9|bgColor=#ffffff}\r\nHi everyone,\r\n \r\nThank you for your patience while we worked on this bug. We are pleased to announce its patch, available in the Jira Data Center 10.3.5 LTS release and the upcoming 10.6.0 release. To receive the fix, you'll need to [upgrade Jira|https://confluence.atlassian.com/adminjiraserver/upgrading-jira-applications-938846936.html].\r\n\r\nPlease note that the steps to tune the webhook performance parameters in Jira 10 have changed. For instructions, please consult [Tuning webhook performance parameters in Jira Data Center|https://confluence.atlassian.com/pages/viewpage.action?pageId=1540850335]. Additionally, the default parameters were not modified during this patch, so organizations reaching service limits will need to apply the suggested parameters.\r\n\r\nIf you have any questions, please reach out to our [Support Team|https://support.atlassian.com/].\r\n{panel}","author":"Benjamin S"}]},{"summary":"Can not upload attachments to wiki markup custom field when creating issue in new tab","key":"JRASERVER-78695","url":"https://jira.atlassian.com/browse/JRASERVER-78695","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCan not upload attachments to wiki markup custom field when creating issue in new tab.\r\n\r\nWhen creating a new issue by opening a new tab (rather than the modal popup), wiki editor custom field cannot be used to add attachments. The system attachment field or description fields can be used for this purpose, but not a custom field with wiki editor.\r\n\r\nThe custom field wiki editor has the attachments button disabled in the condition described above.\r\n\r\nThis is the Create Issue form in a new tab where the attachments button gets disabled in the custom field (Environment) wiki editor:\r\n !attachment_disabled.png|thumbnail! \r\n\r\nThis is the Create Issue form in a modal popup where the attachments button is enabled in the custom field (Environment)  wiki editor:\r\n !attachment_enabled.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n# add a custom field with wiki editor to the create screen\r\n# Cmd+Click Create Issue will open the create form in a new tab\r\n# in the form, the custom field with wiki editor has the attachment button disabled\r\n# the system field with wiki editor has the attachment button enabled\r\n\r\nh3. Expected Results\r\nThe custom field with wiki editor has the attachment button enabled.\r\n\r\nh3. Actual Results\r\nThe custom field with wiki editor has the attachment button disabled.\r\n\r\n\r\nh3. Workaround\r\n\r\n# Use the modal popup to create new issues rather than a new tab.\r\n# Alternately, do not use a custom field description to replace the system field description","createDate":"2025-03-19T10:45:17.000+0000","comments":[]},{"summary":"Notification pop up for issue creation does not automatically disappear.","key":"JRASERVER-78692","url":"https://jira.atlassian.com/browse/JRASERVER-78692","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn Jira 10.2.x and 10.3.x, the notification pop up for issue creation does not disappear automatically. This is inconsistent with the notification pop up for issue edit in the same version (which disappears automatically).\r\n\r\nh3. Steps to Reproduce\r\n# Set up Jira 10.2.x or 10.3.x\r\n# Create an issue\r\n\r\n\r\nh3. Expected Results\r\nThe notification pop up will show up at the top right, and will disappear automatically after a few seconds.\r\n\r\nh3. Actual Results\r\nThe notification pop up will show up at the top right, but *will not* disappear automatically after a few seconds.\r\n(i) In 10.3.x, the issue creation notification pop up is missing the *aui-will-close* class.\r\n\r\n10.3.x - issue creation:\r\n{code}\r\n<div class=\"aui-message closeable aui-message-success\">Issue <a class=\"issue-created-key issue-link\" data-issue-key=\"SCRUM-25\" href=\"/jira/browse/SCRUM-25\">SCRUM-25 - Test Issue 1</a> has been successfully created.<button type=\"button\" class=\"aui-close-button\" aria-label=\"Close\"></button></div>\r\n{code}\r\n\r\n10.3.x - issue edit:\r\n{code}\r\n<div class=\"aui-message closeable aui-message-success aui-will-close\">SCRUM-25 has been updated.<button type=\"button\" class=\"aui-close-button\" aria-label=\"Close\"></button></div>\r\n{code}\r\n\r\nh3. Workaround\r\n* Close the pop up window manually, OR\r\n* Refresh the page, OR\r\n* Access different page, OR\r\n* Add this to the announcement banner which will hide the notification after 1000ms (this is unsupported customization, script is provided as is)\r\n{code}\r\n<script type=\"text/javascript\">\r\nfunction autocloseCreateNotification(loadEvent) {\r\n    url = loadEvent.currentTarget.responseURL;\r\n    if (url !== null && url !== undefined && url.indexOf(\"/QuickCreateIssue.jspa\") >= 0) {\r\n        waitToAutocloseCreateNotification();\r\n    }\r\n};\r\n\r\n// Wait 1000ms for the AUI notification to pop up before deleting it.\r\nfunction waitToAutocloseCreateNotification() {\r\n    window.setTimeout(function() {\r\n        auiContainer = document.getElementById('aui-flag-container');\r\n        if (auiContainer !== null) {\r\n            auiNotifications = auiContainer.getElementsByClassName('aui-flag');\r\n            for (let auiNotification of auiNotifications) {\r\n                if (auiNotification.getAttribute('aria-label').indexOf('has been successfully created') >= 0) {\r\n                    auiNotification.remove();\r\n                }\r\n            }\r\n        }\r\n    }, 1000);\r\n}\r\n\r\n// The impacted notification banner appears when an issue is created via a subrequest, so we need to override XMLHttpRequest after loading each subrequest.\r\nvar defaultXMLHttpRequest = window.XMLHttpRequest;\r\nfunction modifiedXMLHttpRequest() {\r\n    var XHR = new defaultXMLHttpRequest();\r\n    XHR.addEventListener(\"load\", autocloseCreateNotification);\r\n    return XHR;\r\n}\r\nwindow.XMLHttpRequest = modifiedXMLHttpRequest;\r\n</script>\r\n{code}","createDate":"2025-03-19T00:59:37.000+0000","comments":[]},{"summary":"The watcher field is not added to all \"Create Issue\" screens when enabling the Dark Feature \"com.atlassian.jira.initialwatchers.enabled\"","key":"JRASERVER-78664","url":"https://jira.atlassian.com/browse/JRASERVER-78664","type":"Bug","priority":"","description":"h3. Issue Description\r\n\r\nAs per [Jira 9.13.0 release notes|https://confluence.atlassian.com/jirasoftware/jira-software-9-13-x-release-notes-1319569020.html#JiraSoftware9.13.xreleasenotes-add-watchers], Jira 9.13.0 introduced a new feature allowing watchers to be added to an issue from the \"Create Issue\" screen.\r\n\r\nAs explained in the section *Add watchers while creating issues* of the release notes, to enable this feature, it is necessary to [enable the dark feature|https://confluence.atlassian.com/jirakb/how-to-manage-dark-features-in-jira-server-and-data-center-959286331.html] {*}com.atlassian.jira.initialwatchers.enabled{*}.\r\n\r\nBy design, when this dark feature is enabled, the *Watchers* field should be added to all the \"Create Issue\" screens.\r\n\r\nHowever, if the *Assignee* field is missing from the main tab of at least 1 \"Create Issue\" screen, the dark feature will fail to add the *Watchers* field to all the \"Create Issue\" screens (it might manage to add this field to some screens though). As a result:\r\n - Some \"Create Issue\" Screens will be automatically added the *Watchers* field as illustrated below:\r\n!ExpectedBehavior_WatcherFieldIsAdded.png|thumbnail!\r\n - Some \"Create Issue\" screens will be missing the *Watchers* field as illustrated below\r\n!NonExpectedBehavior_WatcherFieldIsMissing.png|thumbnail!\r\n\r\nh3. Steps to replicate\r\n\r\nThere are 2 ways to replicate this bug.\r\nh4. Method 1\r\n - Install Jira on any version from 9.13.0\r\n - Open the configuration of 1 \"Create Issue\" screen\r\n - Remove the *Assignee* field from this screen\r\n!StepsToReplicate_Method1.png|thumbnail!\r\n - Enable the dark feature *com.atlassian.jira.initialwatchers.enabled*\r\n!DarkFeaturePage.png|thumbnail!\r\n - Open the configuration all the \"Create Issue\" screens in the whole Jira application and check if the *Watchers* field was added to them\r\n\r\nh4. Method 2\r\n - Install Jira on any version from 9.13.0\r\n - Open the configuration of 1 \"Create Issue\" screen\r\n - Create a new tab\r\n - Remove the *Assignee* field from the main tab, and add it to the new tab\r\n!StepsToReplicate_Method2.png|thumbnail!\r\n - Enable the dark feature *com.atlassian.jira.initialwatchers.enabled*\r\n!DarkFeaturePage.png|thumbnail!\r\n - Open the configuration all the \"Create Issue\" screens in the whole Jira application and check if the *Watchers* field was added to them\r\n\r\nh3. Expected behavior\r\n\r\nThe *Watchers* field should be added to all the \"Create Issue\" screen in the whole Jira application.\r\nh3. Actual behavior\r\n - The *Watchers* field is missing from all of some \"Create Issue\" screens\r\n - Checking the Jira application logs, the error below will be thrown:\r\n{code:java}\r\n2025-03-05 15:52:09,297+0000 http-nio-8080-exec-3 url: /jira/secure/admin/SiteDarkFeatures.jspa; user: admin ERROR admin 952x2326x1 o143wk 172.29.215.252,172.50.0.2 /secure/admin/SiteDarkFeatures.jspa [c.a.event.internal.AsynchronousAbleEventDispatcher] There was an exception thrown trying to dispatch event [com.atlassian.jira.config.FeatureEnabledEvent@37339cdc] from the invoker [com.atlassian.event.internal.ComparableListenerInvoker@7f3db280]\r\njava.lang.RuntimeException: Index: 15, Size: 14. Listener: com.atlassian.jira.plugins.initialwatchers.InitialWatchersSetup event: com.atlassian.jira.config.FeatureEnabledEvent\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:53)\r\n\tat com.atlassian.diagnostics.internal.platform.monitor.event.EventSystemMonitor.invokeMonitored(EventSystemMonitor.java:105)\r\n\tat com.atlassian.diagnostics.internal.platform.monitor.event.MonitoredListenerInvoker.invoke(MonitoredListenerInvoker.java:38)\r\n\tat com.atlassian.event.internal.ComparableListenerInvoker.invoke(ComparableListenerInvoker.java:48)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.lambda$null$0(AsynchronousAbleEventDispatcher.java:37)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:85)\r\n\tat com.atlassian.diagnostics.internal.platform.monitor.event.MonitoredEventDispatcher.dispatch(MonitoredEventDispatcher.java:36)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.publish(EventPublisherImpl.java:114)\r\n\tat com.atlassian.event.internal.LockFreeEventPublisher.publish(LockFreeEventPublisher.java:40)\r\n\tat com.atlassian.jira.config.feature.DefaultFeatureManager.changeSiteDarkFeature(DefaultFeatureManager.java:282)\r\n\tat com.atlassian.jira.config.feature.DefaultFeatureManager.enableSiteDarkFeature(DefaultFeatureManager.java:219)\r\n\tat com.atlassian.jira.web.action.admin.darkfeatures.SiteDarkFeatures.doExecute(SiteDarkFeatures.java:57)\r\n\t... 1 filtered\r\n\tat com.atlassian.jira.web.action.JiraWebActionSupport.execute(JiraWebActionSupport.java:1382)\r\n\t... 7 filtered\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\r\n\t... 48 filtered\r\n\tat com.atlassian.servicedesk.internal.web.ExternalCustomerLockoutFilter.doFilter(ExternalCustomerLockoutFilter.java:55)\r\n\t... 4 filtered\r\n\tat com.atlassian.greenhopper.jira.filters.ClassicBoardRouter.doFilter(ClassicBoardRouter.java:56)\r\n\t... 7 filtered\r\n\tat com.atlassian.jira.plugin.mobile.web.filter.MobileAppRequestFilter.doFilter(MobileAppRequestFilter.java:59)\r\n\t... 4 filtered\r\n\tat com.atlassian.jira.plugin.mobile.login.MobileLoginSuccessFilter.doFilter(MobileLoginSuccessFilter.java:54)\r\n\t... 3 filtered\r\n\tat com.atlassian.diagnostics.internal.platform.monitor.http.HttpRequestMonitoringFilter.doFilter(HttpRequestMonitoringFilter.java:54)\r\n\t... 8 filtered\r\n\tat com.atlassian.web.servlet.plugin.request.RedirectInterceptingFilter.doFilter(RedirectInterceptingFilter.java:21)\r\n\t... 48 filtered\r\n\tat com.atlassian.oauth2.scopes.web.ReadWriteScopeFilter.doFilter(ReadWriteScopeFilter.java:46)\r\n\t... 3 filtered\r\n\tat com.atlassian.troubleshooting.thready.filter.AbstractThreadNamingFilter.doFilter(AbstractThreadNamingFilter.java:46)\r\n\t... 21 filtered\r\n\tat com.atlassian.jira.security.JiraSecurityFilter.lambda$doFilter$0(JiraSecurityFilter.java:66)\r\n\t... 1 filtered\r\n\tat com.atlassian.jira.security.JiraSecurityFilter.doFilter(JiraSecurityFilter.java:64)\r\n\t... 16 filtered\r\n\tat com.atlassian.pats.web.filter.TokenBasedAuthenticationFilter.doFilter(TokenBasedAuthenticationFilter.java:82)\r\n\t... 3 filtered\r\n\tat com.atlassian.oauth2.provider.core.web.AccessTokenFilter.doFilter(AccessTokenFilter.java:82)\r\n\t... 26 filtered\r\n\tat com.atlassian.jira.servermetrics.CorrelationIdPopulatorFilter.doFilter(CorrelationIdPopulatorFilter.java:30)\r\n\t... 5 filtered\r\n\tat com.atlassian.plugins.authentication.sso.web.filter.loginform.DisableNativeLoginAuthFilter.doFilter(DisableNativeLoginAuthFilter.java:55)\r\n\t... 3 filtered\r\n\tat com.atlassian.plugins.authentication.basicauth.filter.DisableBasicAuthFilter.doFilter(DisableBasicAuthFilter.java:70)\r\n\t... 3 filtered\r\n\tat com.atlassian.servicedesk.internal.web.CustomerContextSettingFilter.lambda$invokeFilterChain$0(CustomerContextSettingFilter.java:221)\r\n\tat com.atlassian.servicedesk.internal.api.util.context.ReentrantThreadLocalBasedCodeContext.rteInvoke(ReentrantThreadLocalBasedCodeContext.java:136)\r\n\tat com.atlassian.servicedesk.internal.api.util.context.ReentrantThreadLocalBasedCodeContext.runOutOfContext(ReentrantThreadLocalBasedCodeContext.java:89)\r\n\tat com.atlassian.servicedesk.internal.utils.context.CustomerContextServiceImpl.runOutOfCustomerContext(CustomerContextServiceImpl.java:47)\r\n\tat com.atlassian.servicedesk.internal.web.CustomerContextSettingFilter.outOfCustomerContext(CustomerContextSettingFilter.java:212)\r\n\tat com.atlassian.servicedesk.internal.web.CustomerContextSettingFilter.doFilterImpl(CustomerContextSettingFilter.java:140)\r\n\tat com.atlassian.servicedesk.internal.web.CustomerContextSettingFilter.doFilter(CustomerContextSettingFilter.java:129)\r\n\t... 4 filtered\r\n\tat com.atlassian.jwt.internal.servlet.JwtAuthFilter.doFilter(JwtAuthFilter.java:37)\r\n\t... 8 filtered\r\n\tat com.atlassian.web.servlet.plugin.request.RedirectInterceptingFilter.doFilter(RedirectInterceptingFilter.java:21)\r\n\t... 4 filtered\r\n\tat com.atlassian.troubleshooting.thready.filter.AbstractThreadNamingFilter.doFilter(AbstractThreadNamingFilter.java:46)\r\n\t... 3 filtered\r\n\tat com.atlassian.web.servlet.plugin.LocationCleanerFilter.doFilter(LocationCleanerFilter.java:36)\r\n\t... 29 filtered\r\n\tat com.atlassian.jira.servermetrics.MetricsCollectorFilter.doFilter(MetricsCollectorFilter.java:25)\r\n\t... 25 filtered\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:840)\r\nCaused by: java.lang.IndexOutOfBoundsException: Index: 15, Size: 14\r\n\tat java.base/java.util.ArrayList.rangeCheckForAdd(ArrayList.java:756)\r\n\tat java.base/java.util.ArrayList.add(ArrayList.java:481)\r\n\tat com.atlassian.jira.issue.fields.screen.FieldScreenTabImpl$LayoutItems.add(FieldScreenTabImpl.java:230)\r\n\tat com.atlassian.jira.issue.fields.screen.FieldScreenTabImpl$LayoutItems.access$300(FieldScreenTabImpl.java:208)\r\n\tat com.atlassian.jira.issue.fields.screen.FieldScreenTabImpl.addFieldScreenLayoutItem(FieldScreenTabImpl.java:133)\r\n\tat com.atlassian.jira.plugins.initialwatchers.InitialWatchersSetup.lambda$addCustomField$1(InitialWatchersSetup.java:115)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.LinkedList$LLSpliterator.forEachRemaining(LinkedList.java:1242)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat com.atlassian.jira.plugins.initialwatchers.InitialWatchersSetup.addCustomField(InitialWatchersSetup.java:112)\r\n\tat com.atlassian.jira.plugins.initialwatchers.InitialWatchersSetup.onFeatureEnabled(InitialWatchersSetup.java:85)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:42)\r\n\t... 328 more\r\n{code}\r\n\r\nh3. Workaround\r\n\r\nN/A","createDate":"2025-03-06T10:51:06.000+0000","comments":[{"text":"Interesting. What happens if the dark feature is enabled and the Watchers field gets added, then you remove the Watchers field. Does it get added back to the Create screen automatically? I'm hoping not","author":"Matt Doar"}]},{"summary":"Velocity allowlist does not include batched email notification templates","key":"JRASERVER-78661","url":"https://jira.atlassian.com/browse/JRASERVER-78661","type":"Bug","priority":"","description":"h3. Issue Summary\r\nModifications to the batched email notification templates in Jira 10 will not be reflected because the batched email templates are not in the velocity allowlist \r\n\r\nh3. Steps to Reproduce\r\n # Install Jira 10.3.2\r\n # [Customize batched email notification templates|https://confluence.atlassian.com/adminjiraserver103/customizing-email-content-1489807903.html]\r\n\r\nh3. Expected Results\r\nModifications are reflected in batched email notifications \r\n\r\nh3. Actual Results\r\nModifications are not reflected and the following error is thrown in atlassian-jira.log:\r\n{noformat}\r\nCaesium-1-4 ERROR ServiceRunner     [c.atlassian.velocity.DefaultVelocityManager] Exception getting message body from Velocity: org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'templates/email-batch/html/template.vm'\r\norg.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'templates/email-batch/html/template.vm'\r\n{noformat}\r\n\r\nh3. Workaround\r\nAdd the batched email notification templates to the velocity allowlist located at (JIRA-INSTALL-DIR)/atlassian-jira/WEB-INF/classes/velocity-default.properties:\r\n{code}\r\n# starts at line number 1001\r\ntemplates/email-batch/html/template.vm, \\\r\ntemplates/email-batch/html/footer.vm, \\\r\ntemplates/email-batch/html/hr-bottom.vm, \\\r\ntemplates/email-batch/html/IssueUpdateBatcher-content.vm, \\\r\ntemplates/email-batch/html/IssueUpdateBatcher-header.vm, \\\r\ntemplates/email-batch/html/IssueUpdateBatcher-history.vm, \\\r\ntemplates/email-batch/html/IssueUpdateBatcher-subject.vm, \\\r\ntemplates/email-batch/html/IssueUpdateBatcher.vm, \\\r\ntemplates/email-batch/html/spacer.vm, \\\r\ntemplates/email-batch/html/template.vm, \\\r\ntemplates/email-batch/shared/mention-text.vm, \\\r\ntemplates/email-batch/text/IssueUpdateBatcher-subject.vm, \\\r\ntemplates/email-batch/text/IssueUpdateBatcher.vm\r\n{code}","createDate":"2025-03-05T23:55:38.000+0000","comments":[]},{"summary":"Project Administrators cannot bulk archive issues","key":"JRASERVER-78659","url":"https://jira.atlassian.com/browse/JRASERVER-78659","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFor Jira DC v10.0 onwards, Project Administrators cannot bulk archive issues. They have the required permissions for 'Archive Issues,' and the user group holds global permission for 'Bulk Change.'\r\nh3. Steps to Reproduce\r\n # Login to Jira 10.x.x as admin user\r\n # Create a test user with 'Project Administrator' Role for a Test project\r\n\r\n # Create a group (for eg. 'RG-JIRA-GENERAL-USR') and assign test user to this group\r\n # Navigate to Global Permissions and provide the \"Bulk Change\" permission to this group.\r\n\r\n # Go to 'test' project>Project Setting > Permission. Ensure that the \"Administrator\" role, which the test user is part of, has the \"Archive Issue\" permission.\r\n\r\nNow that the setup is complete, we can proceed to bulk archive issues from the 'Test' project by logging in as the Test User.\r\n # Go to Issues>Search Issues> Filter by project 'test'\r\n # Click on Tools\r\n # Select one or more issue > Click Next\r\n # Choose Operations> Archive Issue> Next\r\n\r\n5. An error screen was displayed below:\r\n\r\n!image-2025-03-05-18-35-29-200.png|width=533,height=191!\r\nh3. Expected Results\r\n\r\nUser should be able to perform Bulk Archive operation if having required permissions\r\nh3. Actual Results\r\n\r\nStarting with v10.0, admin privileges are asked, or error 403 occurs while bulk archiving.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-05T13:03:56.000+0000","comments":[]},{"summary":"App licensing breaks with ClassCastException errors","key":"JRASERVER-78645","url":"https://jira.atlassian.com/browse/JRASERVER-78645","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThere are conditions within Universal Plugin Manager (UPM) that may break its licensing feature.\r\nThis may make the current node unusable to end-users, specially those features related to licensed Marketplace Apps.\r\n\r\nh3. Steps to Reproduce\r\n # Install a vanilla instance of Jira Software Data Center.\r\n  #* This was validated on JSW DC versions 10.4.0, 9.12 and 9.4.\r\n # Install a Marketplace App that will show a status of _DATA CENTER UPDATE AVAILABLE_.\r\n  #* See details about App statuses in [Upgrading Server apps when you migrate to Data Center|https://confluence.atlassian.com/enterprise/upgrading-server-apps-when-you-migrate-to-data-center-998660310.html].\r\n  #* Don't apply a license to the App.\r\n # Go to _Versions & licenses_ admin page.\r\n # Edit the Jira Software license key and paste a new license.\r\n  #* You may use a trial license or one from [Timebomb licenses for testing server apps on the Atlassian Marketplace|https://developer.atlassian.com/platform/marketplace/timebomb-licenses-for-testing-server-apps/]\r\n # Click on _Update license_\r\n  #* This triggers a {{POST /rest/plugins/applications/1.0/installed/jira-software/license}} request that results on a HTTP 400 status with a valid response from Jira.\r\n # On the UI, a pop-up with \"app will be impacted by this change\" is shown.\r\n !screenshot-1.png|thumbnail! \r\n # Click on _Cancel_ which won't proceed with the license change.\r\n\r\n\r\nh3. Expected Results\r\nNo feature is impacted by this and Jira works normally as no change was committed.\r\n\r\nh3. Actual Results\r\nUPM licensing features break.\r\n\\\\\r\n\\\\\r\nErrors similar to the below are seen on the logs.\r\n{code}\r\n2025-02-27 21:40:07,796+0000 http-nio-8080-exec-34 url: /rest/plugins/1.0/notifications; user: admin ERROR admin 1300x5712x4 19l3vjv 10.224.56.123,10.232.36.32 /rest/plugins/1.0/notifications [c.a.p.r.v2.exception.ThrowableExceptionMapper] Uncaught exception e34db11b-7d2d-4a55-9884-bc346b2ce076 thrown by REST service: class com.atlassian.upm.license.internal.HostApplicationLicense cannot be cast to class com.atlassian.upm.license.internal.HostApplicationLicense (com.atlassian.upm.license.internal.HostApplicationLicense is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @17b9c842; com.atlassian.upm.license.internal.HostApplicationLicense is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @74babcaa)\r\njava.lang.ClassCastException: class com.atlassian.upm.license.internal.HostApplicationLicense cannot be cast to class com.atlassian.upm.license.internal.HostApplicationLicense (com.atlassian.upm.license.internal.HostApplicationLicense is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @17b9c842; com.atlassian.upm.license.internal.HostApplicationLicense is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @74babcaa)\r\n\tat com.atlassian.upm.license.internal.host.AbstractHostLicenseProvider.getEdition(AbstractHostLicenseProvider.java:84)\r\n\tat com.atlassian.upm.license.internal.host.AbstractHostLicenseProvider.getHostApplicationLicenseAttributes(AbstractHostLicenseProvider.java:356)\r\n\tat com.atlassian.upm.impl.UpmHostApplicationInformationImpl.isHostDataCenterEnabled(UpmHostApplicationInformationImpl.java:49)\r\n\tat com.atlassian.upm.license.impl.LicensedPlugins.isWrongAppType(LicensedPlugins.java:146)\r\n\tat com.atlassian.upm.license.impl.LicensedPlugins.checkForWrongAppTypeAction(LicensedPlugins.java:127)\r\n\tat com.atlassian.upm.license.impl.LicensedPlugins.getPrimaryPluginActionRequired(LicensedPlugins.java:115)\r\n\tat com.atlassian.upm.rest.representations.UpmRepresentationFactoryImpl.createInstalledMarketplacePluginRepresentation(UpmRepresentationFactoryImpl.java:249)\r\n\tat com.atlassian.upm.rest.representations.InstalledMarketplacePluginRepresentation$PluginToRepFunction.apply(InstalledMarketplacePluginRepresentation.java:226)\r\n\tat com.atlassian.upm.rest.representations.InstalledMarketplacePluginRepresentation$PluginToRepFunction.apply(InstalledMarketplacePluginRepresentation.java:206)\r\n\tat com.atlassian.upm.notification.rest.representations.NotificationRepresentationFactoryImpl$ToNotificationRepresentation.apply(NotificationRepresentationFactoryImpl.java:260)\r\n\tat com.atlassian.upm.notification.rest.representations.NotificationRepresentationFactoryImpl$ToNotificationRepresentation.apply(NotificationRepresentationFactoryImpl.java:218)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\r\n\tat com.atlassian.upm.notification.rest.representations.NotificationRepresentationFactoryImpl.getNotificationGroup(NotificationRepresentationFactoryImpl.java:160)\r\n\tat com.atlassian.upm.notification.rest.representations.NotificationRepresentationFactoryImpl.getNotificationGroupCollection(NotificationRepresentationFactoryImpl.java:119)\r\n\tat com.atlassian.upm.notification.rest.resources.NotificationCollectionResource.getNotifications(NotificationCollectionResource.java:75)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor1387.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:146)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:189)\r\n\tat org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:93)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:478)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:400)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81)\r\n\tat org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:256)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:248)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:244)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:292)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:274)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:244)\r\n\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265)\r\n\tat org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:235)\r\n\tat org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684)\r\n\tat org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:394)\r\n\tat org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:346)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:359)\r\n\tat com.atlassian.plugins.rest.v2.jersey.JerseyOsgiServletContainer.doFilter(JerseyOsgiServletContainer.java:80)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:432)\r\n\tat com.atlassian.plugins.rest.v2.servlet.RestDelegatingServletFilter.doFilter(RestDelegatingServletFilter.java:84)\r\n{code}\r\n{code}\r\n2025-02-27 21:40:18,081+0000 http-nio-8080-exec-53 url: /secure/WorkflowUIDispatcher.jspa; user: admin ERROR admin 1300x5735x1 19l3vjv 10.224.56.123,10.232.36.32 /secure/WorkflowUIDispatcher.jspa [c.a.jira.workflow.OSWorkflowManager] Caught exception while attempting to perform action 21 from workflow 10105 on issue 'SCRUM1-6'\r\njava.lang.ClassCastException: class com.atlassian.upm.api.util.Option$Some cannot be cast to class com.atlassian.upm.api.util.Option (com.atlassian.upm.api.util.Option$Some is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @17b9c842; com.atlassian.upm.api.util.Option is in unnamed module of loader org.apache.felix.framework.BundleWiringImpl$BundleClassLoader @74babcaa)\r\n\tat com.atlassian.upm.license.internal.impl.PluginLicenseRepositoryImpl.getCachedLicense(PluginLicenseRepositoryImpl.java:332)\r\n\tat com.atlassian.upm.license.internal.impl.PluginLicenseRepositoryImpl.getPluginLicense(PluginLicenseRepositoryImpl.java:148)\r\n\tat com.atlassian.upm.license.internal.impl.PluginLicenseManagerImpl.getLicense(PluginLicenseManagerImpl.java:42)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:56)\r\n{code}\r\n\\\\\r\n\\\\\r\nTrying to access UPM UI (Manage Apps or Find New Apps) throws an error on UI as below.\r\n !screenshot-2.png|thumbnail! \r\n\\\\\r\n\\\\\r\nFeatures related to licensed Apps may break, possibly making the node unusable to end-users.\r\nFor example, trying to use a feature from a licensed Marketplace App as a post-funtion breaks the workflow as below.\r\n !screenshot-3.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\nRestart the affected node.\r\n","createDate":"2025-02-27T21:53:57.000+0000","comments":[{"text":"{panel:title=Atlassian Update – 05 March 2025|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. Feedback like yours helps us release valuable Jira features that solve problems for a greater customer base. To that end, we aim to keep our issues up-to-date so they accurately reflect current customer needs. Based on the impact, we’ve decided to move this issue to our short-term backlog.\r\n\r\nThe workaround for this bug is as follows: Restart the affected node.\r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\n\r\n_Oleksandr Tkachenko_\r\n\r\n_Principal Software Engineer_\r\n\r\n{panel}","author":"Oleksandr Tkachenko"}]},{"summary":"Create Issue: Option names within the comboboxes are not announced","key":"JRASERVER-78642","url":"https://jira.atlassian.com/browse/JRASERVER-78642","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe option names within the comboboxes are not announced by the screen reader.\r\nh3. Steps to Reproduce\r\n # Open the Jira DC instance.\r\n # Navigate to the header section and activate the \"Create\" control to open the \"Create Issue\" modal.\r\n # Using a screen reader, navigate to the mentioned comboboxes.\r\n # Press the \"Alt + Down Arrow\" key and use the \"Down Arrow\" key to navigate through the options.\r\n # Observe that the options are not announced by the screen reader.\r\n\r\nh3. Screen Recording\r\n\r\n[^Dropdown screen recording.mp4]\r\nh3. Actual Results\r\n\r\nWhen screen reader users navigate through the options within the comboboxes, such as \"Project\", \"Issue Type\", \"Fix Version/s\", \"Priority\", \"Sprint\", \"Labels\", and others in the \"Create Issue\" modal, the option names are not announced. Instead, the screen reader remains silent, even though the options are changing visually.\r\n\r\nAs a result, screen reader users are unable to interact with the options in these comboboxes and find it difficult to navigate through the available choices.\r\nh3. Expected Results\r\n\r\nEnsure that the option names in the combobox are announced for screen reader users.\r\n\r\nIn this case, Along with defining role=“combobox”, “aria-expanded”, “Aria-controls”, “aria-haspopup”, on the <input> element.\r\n\r\nThe <input> element should \\{{Use \"aria-activedescendant\" }}attribute to determine the active option. This attribute uses the \"id\" of the active option.\r\n\r\nOn the parent <ul> containing the list of options, use role=\"listbox\". On the child <li> elements, use role=\"option\". As well, use aria-selected attribute to programmatically determine the selected option.\r\n\r\nAlternatively:\r\n\r\nMake sure that the option names of the combobox are announced by the screen reader along with the focused value and number of results.\r\n\r\nFor instance, when user focuses on first combobox option out of 4 items. It should announce as “option <option name> focused, 1 of 4. 4 results available”.\r\n\r\nThe part of static text i.e “option focused, 1 of 4. 4 results available.” coming from live region and in <span> element should be updated with option name programmatically according to user interaction with this combobox options.\r\n\r\nFor more information refer the following resource:\r\n\r\n[ARIA Combobox Pattern|https://www.w3.org/WAI/ARIA/apg/patterns/combobox/]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 133.0.6943.127 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 135.0 (64-bit)\r\nJAWS- Version 2023 and 2025\r\nNVDA- Version 2024.4.2\r\nVoiceOver - Version Latest","createDate":"2025-02-27T09:32:16.000+0000","comments":[]},{"summary":"Issue View | Comment: Incomplete information conveyed to screen reader users","key":"JRASERVER-78640","url":"https://jira.atlassian.com/browse/JRASERVER-78640","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn incomplete user information is announced by the screen reader.\r\nh3. Steps to Reproduce\r\n # Open Jira DC instance.\r\n # Navigate to the header section, activate the \"Issues\" control, and open any issue.\r\n # Navigate to the \"Add comment\" control and activate it.\r\n # Using a screen reader, navigate to the \"Comment\" field and type \"AT\" symbol.\r\n # Using the \"Down Arrow\" key, navigate through the list of names.\r\n # Observe that only the user’s name is announced, but the complete user information is not.\r\n\r\nh3. Screen Recording\r\n\r\n[^Mention Announcement Screen Recording.mp4]\r\nh3. Actual Results\r\n\r\nWhen screen reader users navigate to the \"Comment\" field and type the \"@\" symbol to trigger the \"Mention\" dropdown, incomplete information about the users is announced. The screen reader only announces the provided username (e.g., \"Chirag2025\") instead of the complete user information, such as the \"display name\", \"email address\", and \"username\", which are visible to sighted users.\r\n\r\nAs a result, screen reader users are unable to access the full information.\r\nh3. Expected Results\r\n\r\nEnsure that complete user information is conveyed to screen reader users.\r\n\r\nIn this case, make sure to add the \"Display Name\" and \"Email Address\" information to the accessible name list so screen reader users can access this information and differentiate between users, rather than relying solely on the provided usernames.\r\n\r\nFor example, specify the information in the accessible name list as \"Chirag Goyal chirag.goyal@test.com\", \"John Smith john.smith@test.com\", etc. This will help screen reader users access the complete information.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 133.0.6943.127 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 135.0 (64-bit)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.4.2\r\nVoiceOver - Version Latest","createDate":"2025-02-26T11:07:14.000+0000","comments":[]},{"summary":"Multithreaded index catch-up may fail if it encounters comment versions or worklogs versions without corresponding jiraaction entries","key":"JRASERVER-78627","url":"https://jira.atlassian.com/browse/JRASERVER-78627","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf the new multithreaded index catch-up feature introduced in [JRASERVER-76237: Index catch-up of Comments and Worklogs isn't multi-threaded during Jira startup|https://jira.atlassian.com/browse/JRASERVER-76237] encounters comment versions or worklogs versions without corresponding rows in the *jiraaction* table, it can fail and trigger a full reindex, significantly prolonging node startup times.\r\n\r\nIf full reindexing on startup is disabled the situation is even worse - Jira will mark the node startup as failed, causing other services such as the task scheduler not to start. Subsequently running a full reindex does not improve this situation; when the node is restarted to bring up the task scheduler, the index catch-up will run again and fail again. This has particularly severe consequences during a non-ZDU upgrade when all nodes have been shut down, and the first node to start fails to recover the index.\r\nh3. Steps to Reproduce\r\n # Set up a clustered Jira environment with two nodes.\r\n # Stop node 2.\r\n # Add the startup parameter *-Dcom.atlassian.jira.startup.allow.full.reindex=false* to node 2.\r\n # Log into node 1 and create a new Jira issue.\r\n # Add a comment to the newly created Jira issue.\r\n # Immediately run the following SQL query on the Jira database:\r\n{code:sql}\r\nDELETE FROM jiraaction WHERE id = (SELECT MAX(comment_id) FROM comment_version);\r\n{code}\r\n\r\n # Repeat steps 5 and 6 ten times.\r\n # Start node 2.\r\n\r\nh3. Expected Results\r\n\r\nJira should recover its index on startup normally.\r\nh3. Actual Results\r\n\r\nJira fails to recover its index. If full reindexing on startup has been disabled, the Jira node will then fail to start:\r\n{noformat}\r\n2025-02-25 06:57:08,044+0000 main INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] Reindexing comments.\r\n2025-02-25 06:57:08,047+0000 main WARN      [c.a.jira.index.AccumulatingResultBuilder] java.util.concurrent.ExecutionException: java.lang.NullPointerException: Cannot invoke \"com.atlassian.jira.issue.comments.Comment.getIssue()\" because \"entity\" is null\r\njava.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.NullPointerException: Cannot invoke \"com.atlassian.jira.issue.comments.Comment.getIssue()\" because \"entity\" is null\r\n        at com.atlassian.jira.index.FutureResult.await(FutureResult.java:40)\r\n        at com.atlassian.jira.index.AccumulatingResultBuilder$CompositeResult.await(AccumulatingResultBuilder.java:177)\r\n        at com.atlassian.jira.issue.index.IndexLock.obtain(IndexLock.java:50)\r\n        at com.atlassian.jira.issue.index.DefaultIndexManager.await(DefaultIndexManager.java:936)\r\n        at com.atlassian.jira.issue.index.DefaultIndexManager.lambda$reindexRelatedEntityUnderWriteLock$18(DefaultIndexManager.java:1044)\r\n        at com.atlassian.jira.util.thread.JiraThreadLocalUtils.lambda$wrap$1(JiraThreadLocalUtils.java:156)\r\n        at com.atlassian.jira.issue.index.DefaultIndexManager.withReindexLock(DefaultIndexManager.java:431)\r\n        at com.atlassian.jira.issue.index.DefaultIndexManager.reindexRelatedEntityUnderWriteLock(DefaultIndexManager.java:1041)\r\n        at com.atlassian.jira.issue.index.DefaultIndexManager.reindexCommentsInParallel(DefaultIndexManager.java:1028)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n        at com.atlassian.jira.config.component.SwitchingInvocationHandler.invoke(SwitchingInvocationHandler.java:38)\r\n        at jdk.proxy3/jdk.proxy3.$Proxy98.reindexCommentsInParallel(Unknown Source)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.reindexCommentsByIds(DefaultIndexRecoveryManager.java:363)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.reindexOutdatedEntities(DefaultIndexRecoveryManager.java:310)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.reindexWithVersionCheckEntitiesUpdatedInTheLast(DefaultIndexRecoveryManager.java:247)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager$ReplaceIndexRunner.catchUp(DefaultIndexRecoveryManager.java:536)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager$ReplaceIndexRunner.run(DefaultIndexRecoveryManager.java:494)\r\n        at com.atlassian.jira.util.thread.JiraThreadLocalUtils.lambda$wrap$1(JiraThreadLocalUtils.java:156)\r\n        at com.atlassian.jira.issue.index.DefaultIndexManager.withReindexLock(DefaultIndexManager.java:431)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n        at com.atlassian.jira.config.component.SwitchingInvocationHandler.invoke(SwitchingInvocationHandler.java:38)\r\n        at jdk.proxy3/jdk.proxy3.$Proxy83.withReindexLock(Unknown Source)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.recoverIndexFromBackup(DefaultIndexRecoveryManager.java:172)\r\n        at com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.safeRecoverIndexFromBackup(DefaultIndexRecoveryManager.java:139)\r\n        at com.atlassian.jira.index.DefaultIndexFetcher.recoverIndexFromMostRecentSnapshot(DefaultIndexFetcher.java:108)\r\n        at com.atlassian.jira.cluster.DefaultClusterManager.pickIndexSnapshotFromSharedHome(DefaultClusterManager.java:439)\r\n        at com.atlassian.jira.cluster.DefaultClusterManager.checkIndexOnStart(DefaultClusterManager.java:221)\r\n        at com.atlassian.jira.startup.ClusteringLauncher.clusterSynchronizedCheckIndex(ClusteringLauncher.java:99)\r\n        at com.atlassian.jira.startup.ClusteringLauncher.start(ClusteringLauncher.java:130)\r\n        at com.atlassian.jira.startup.DefaultJiraLauncher.postDBActivated(DefaultJiraLauncher.java:177)\r\n        at com.atlassian.jira.startup.DefaultJiraLauncher.lambda$postDbLaunch$2(DefaultJiraLauncher.java:154)\r\n        at com.atlassian.jira.config.database.DatabaseConfigurationManagerImpl.doNowOrEnqueue(DatabaseConfigurationManagerImpl.java:305)\r\n        at com.atlassian.jira.config.database.DatabaseConfigurationManagerImpl.doNowOrWhenDatabaseActivated(DatabaseConfigurationManagerImpl.java:202)\r\n        at com.atlassian.jira.startup.DefaultJiraLauncher.postDbLaunch(DefaultJiraLauncher.java:144)\r\n        at com.atlassian.jira.startup.DefaultJiraLauncher.lambda$start$0(DefaultJiraLauncher.java:109)\r\n        at com.atlassian.jira.util.devspeed.JiraDevSpeedTimer.run(JiraDevSpeedTimer.java:31)\r\n        at com.atlassian.jira.startup.DefaultJiraLauncher.start(DefaultJiraLauncher.java:107)\r\n        at com.atlassian.jira.startup.LauncherContextListener.initSlowStuff(LauncherContextListener.java:162)\r\n        at com.atlassian.jira.startup.LauncherContextListener.initSlowStuffInBackground(LauncherContextListener.java:147)\r\n        at com.atlassian.jira.startup.LauncherContextListener.contextInitialized(LauncherContextListener.java:105)\r\n        ... 5 filtered\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n        ... 5 filtered\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)\r\n        ... 8 filtered\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n        ... 2 filtered\r\nCaused by: java.util.concurrent.ExecutionException: java.lang.NullPointerException: Cannot invoke \"com.atlassian.jira.issue.comments.Comment.getIssue()\" because \"entity\" is null\r\n        at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n        at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)\r\n        at com.atlassian.jira.index.FutureResult.await(FutureResult.java:38)\r\n        ... 75 more\r\nCaused by: java.lang.NullPointerException: Cannot invoke \"com.atlassian.jira.issue.comments.Comment.getIssue()\" because \"entity\" is null\r\n        ... 2 filtered\r\n        at com.atlassian.jira.issue.index.DefaultIssueIndexer$CommentOperation.shouldDeindex(DefaultIssueIndexer.java:1202)\r\n        at com.atlassian.jira.issue.index.DefaultIssueIndexer$CommentOperation.shouldDeindex(DefaultIssueIndexer.java:1195)\r\n        at java.base/java.util.stream.Collectors.lambda$partitioningBy$62(Collectors.java:1396)\r\n        at java.base/java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n        at java.base/java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1707)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\r\n        at com.atlassian.jira.issue.index.DefaultIssueIndexer.lambda$processInnerBatch$6(DefaultIssueIndexer.java:339)\r\n        at com.atlassian.jira.index.SimpleIndexingStrategy.apply(SimpleIndexingStrategy.java:7)\r\n        at com.atlassian.jira.index.SimpleIndexingStrategy.apply(SimpleIndexingStrategy.java:5)\r\n        at com.atlassian.jira.index.MultiThreadedIndexingStrategy$1.call(MultiThreadedIndexingStrategy.java:47)\r\n        at com.atlassian.jira.index.MultiThreadedIndexingStrategy$1.call(MultiThreadedIndexingStrategy.java:43)\r\n        at com.atlassian.jira.util.concurrent.BoundedExecutor$2.call(BoundedExecutor.java:68)\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.base/java.lang.Thread.run(Thread.java:840)\r\n2025-02-25 06:57:08,057+0000 main ERROR      [c.a.jira.cluster.DefaultClusterManager] Current node: jira_node2. Couldn't recover index even though it had been found in shared. Current list of other nodes: [jira_node1]\r\ncom.atlassian.jira.index.IndexingFailureException: Indexing completed with 1 errors\r\n[...]\r\n2025-02-25 06:57:08,064+0000 main INFO      [c.a.jira.cluster.DefaultClusterManager] Current node: jira_node2. Will not trigger full foreground reindex, because system property com.atlassian.jira.startup.allow.full.reindex is set to false.\r\n2025-02-25 06:57:08,064+0000 main ERROR      [c.a.jira.cluster.DefaultClusterManager] Failed to prepare local index. Jira is in an unhealthy state.\r\n2025-02-25 06:57:08,070+0000 main INFO      [c.a.j.index.ha.DefaultNodeReindexService] [INDEX-REPLAY] Created node re-index service, paused=true, running period=5sec, delay=10sec\r\n2025-02-25 06:57:08,070+0000 main INFO      [c.a.j.index.ha.DefaultNodeReindexService] [INDEX-REPLAY] Pausing node re-index service\r\ncom.atlassian.jira.index.ha.DefaultNodeReindexService$StackCollector\r\n[...]\r\n2025-02-25 06:57:08,073+0000 main INFO      [c.a.jira.cluster.DefaultClusterManager] Failed to get index on this node. Blocking the start of this instance.\r\n2025-02-25 06:57:08,092+0000 main INFO      [c.a.jira.cluster.DefaultClusterManager] Done checkIndexOnStart in: PT3.717612766S\r\n[...]\r\n2025-02-25 06:57:08,352+0000 main ERROR      [c.a.jira.upgrade.UpgradeLauncher] Skipping, JIRA is locked.\r\n2025-02-25 06:57:08,354+0000 main INFO      [c.a.jira.scheduler.JiraSchedulerLauncher] JIRA Scheduler not started: JIRA startup failed.\r\n2025-02-25 06:57:08,407+0000 main INFO      [c.a.jira.startup.LauncherContextListener] Startup is complete. Jira is ready to serve.\r\n{noformat}\r\nh3. Workaround\r\n\r\nThe problem can also be worked around by taking a [database backup|https://confluence.atlassian.com/display/ADMINJIRASERVER/Backing+up+the+database], then clearing the affected rows from the *comment_version* table:\r\nh4. MySQL / MS SQL\r\n{code:sql}\r\nDELETE cv FROM comment_version cv LEFT JOIN jiraaction ja ON cv.comment_id = ja.id JOIN jiraissue ji ON cv.parent_issue_id = ji.id WHERE cv.deleted = 'N' AND ja.id IS NULL AND (ji.archived IS NULL OR ji.archived != 'Y');\r\n{code}\r\nh4. PostgreSQL / Oracle\r\n{code:sql}\r\nDELETE FROM comment_version WHERE comment_id IN (SELECT cv.comment_id FROM comment_version cv LEFT JOIN jiraaction ja ON cv.comment_id = ja.id JOIN jiraissue ji ON cv.parent_issue_id = ji.id WHERE cv.deleted = 'N' AND ja.id IS NULL AND (ji.archived IS NULL OR ji.archived != 'Y'));\r\n{code}","createDate":"2025-02-25T07:43:44.000+0000","comments":[{"text":"This is a serious problem for behaviour that is now the default in Jira DC. More than a \"Low\" priority I would have thought","author":"Matt Doar (Adaptavist)"},{"text":"Hi, [~190ec6ed4e2b]! \r\n\r\nThanks for your comment, we've adjusted the priority to the highest.","author":"Sławomir Zaraziński"},{"text":"FYI, the comment_version entry without a corresponding comment can be a result of removing a comment via Jira Java API [com.atlassian.jira.issue.comments.CommentManager.delete(comment, false, user)|https://docs.atlassian.com/software/jira/docs/api/9.12.18/com/atlassian/jira/issue/comments/CommentManager.html#delete-com.atlassian.jira.issue.comments.Comment-boolean-com.atlassian.jira.user.ApplicationUser-]. It's important, that the second argument dispatchEvent is false. If this parameter is true the comment_version entry is deleted, too.","author":"Henning Tietgens"},{"text":"Hey all, \r\n\r\nSharing some extra context for this as it was a significant impact to our environment, and I feel is likely to impact a large % of users\r\n # This JAC only covers orphaned comment_versions, however the same bad scenario happens if you have orphaned worklog_version entries - postgres query to check/cleanup if you have any problematic worklog_version entries\r\n**** *USE AT YOUR OWN RISK, VERIFY IN A NON-PROD ENVIRONMENT AND/OR BACKUP YOUR DB BEFORE RUNNING ANY DELETES, THESE QUERIES NOT PROVIDED BY ATLASSIAN* ***\r\n\r\n{code:java}\r\n-- check for orphaned worklog versions\r\nSELECT wv.worklog_id FROM worklog_version wv LEFT JOIN worklog wl ON wv.worklog_id = wl.id WHERE wl.id IS NULL AND deleted = 'N';\r\n-- if rows is > 0\r\n\r\nDELETE \r\nFROM\r\n  worklog_version AS wv\r\nWHERE\r\n  wv.worklog_id IN (\r\n    SELECT wv.worklog_id FROM worklog_version wv LEFT JOIN worklog wl ON wv.worklog_id = wl.id WHERE wl.id IS NULL AND deleted = 'N';\r\n  )\r\n;  \r\n{code}\r\n\r\n # And I've just been able to confirm that a comment_version will become orphaned if you delete a comment from the UI as well, not only via the Java API, at least for our environment. We cleaned up the comment_version table 3 days ago, and since then we've had ~ 100 re-orphaned records per day. The comment delete action doesn't show in the ticket history though, because - why would it?\r\n\r\n \r\n\r\nCCM","author":"Craig Castle-Mead"},{"text":"v10.3.1 is also affected with this bug","author":"Vignesh Kumar"},{"text":"There should be a note in the release notes or the release should be removed as this bug passes QA!","author":"Tim Eddelbüttel"}]},{"summary":"Jira Dashboard Rich Text Gadget Rendering Issue with Multiple Gadgets","key":"JRASERVER-78609","url":"https://jira.atlassian.com/browse/JRASERVER-78609","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: YES\r\nh3. Steps to Reproduce\r\n # Install any Jira version 9.17 or later.\r\n # Navigate to any dashboard.\r\n # Add multiple Rich Text gadgets with different text content in their bodies.\r\n # Attempt to interact with the gadgets by double-clicking the gadget bar, moving positions, expanding/minimizing, etc.\r\n # Observe the random malfunctioning behavior, where text content fails to render correctly.\r\n\r\nh3. Expected Results\r\n\r\nEach Rich Text gadget should display its respective content independently and correctly without interference from other gadgets.\r\nh3. Actual Results\r\n\r\nThe rendering of the Rich Text gadgets malfunctions, leading to the first gadget potentially being overlaid with the second gadget's information.\r\n\r\nThe behavior is random, and gadgets may fail to render the text.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-18T19:50:05.000+0000","comments":[{"text":"This issue is also affecting our team and would be a high priority for us to get fixed.","author":"Kevin DiBiase"},{"text":"We are also facing this same issue and would be interested in getting this fixed ASAP","author":"Evan Clark"},{"text":"We are also facing this issue in Jira v10.3.3, can this be prioritized?","author":"asan nayek"},{"text":"Affecting our team using 10.4.1.","author":"Nick George"},{"text":"Affecting our team using 10.3.4","author":"Kyle Li"},{"text":"Updated to 10.5.0 in hopes of a fix but the issue persists on that version","author":"Nick George"}]},{"summary":"Unable to perform vertical scroll in _Configure fields_ section on _edit issue_ screen","key":"JRASERVER-78606","url":"https://jira.atlassian.com/browse/JRASERVER-78606","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the recent versions of Jira v10.3.X and above, the vertical scroll bar in “Configure fields” on “edit issue\" screen is missing. This limits the visibility of number of customfields available in the instance to short list of 28-30 entries (max).\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Assuming your system is set up with many - probably custom - fields (see System Requirements note below).\r\n # Access any issue from GUI (see System Requirements note below).\r\n # Click on Edit Issue.\r\n # Click on configure fields → Select “Custom Fields” or “All Fields”.\r\n # No scroll bar is present.\r\n # {*}+Note+{*}: Scroll bar is present if you resize the browser Window.\r\n\r\nh4. System Requirements\r\n\r\nThis only happens when there are lots of fields present when trying to \"configure fields\" as detailed below - maybe over 30 fields are required.\r\n\r\nIt also only happens when the browser window isn't quite large enough to accommodate all the fields that should be shown when attempting to \"configure fields\".\r\nh3. Expected Results\r\n\r\nThe vertical scroll bar is present when using \"configure fields\" on edit issue screen. This should help users to view all the customfields available in the instance.\r\nh3. Actual Results\r\n - The vertical scroll bar is missing under both filter conditions: “Custom Fields” or “All -Fields”.\r\n - This actually limits the number of customfield visibility to only 28-30 entries (max) and rest of the customfields are not visible/selectable for users. This will be problematic for instances with large number of fields.\r\n\r\nh3. Workaround\r\n\r\nChange the size of the browser window whilst the \"configure fields\" dialog is present.\r\n\r\nOne way of doing this is to open the \"Developer Tools\" option within the browser page (not in a separate window) and select the \"Network\" option. This will enable the option to view the scroll bar and you can make changes as required. *OR* use the standard (create, edit) issue screen configuration pages to make changes for respective issue types in the system.\r\n\r\n(i) You can minimize the developer tools section (after opening) to perform the operations.","createDate":"2025-02-18T10:38:21.000+0000","comments":[]},{"summary":"Jira logs excessive warnings regarding form parameters and servlets, need fix for Platform 7","key":"JRASERVER-78601","url":"https://jira.atlassian.com/browse/JRASERVER-78601","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nMany parts of Jira put excessive log messages into the log files regarding form parameters, and servlets. Most prominently, this can be seen when logging in through the login gadget on the dashboard. This was fixed earlier using [-JRASERVER-30406-|https://jira.atlassian.com/browse/JRASERVER-30406] by adding the below lines in logging.properties\r\n{code:java}\r\n# Suppress log spam about the request body - https://jira.atlassian.com/browse/JRASERVER-30406\r\ncom.sun.jersey.spi.container.servlet.WebComponent.level = SEVERE\r\ncom.sun.jersey.spi.container.servlet.WebComponent.filterFormParameters.level = SEVERE {code}\r\nNow with the Platform 7 update that included the Jersey update (JAX-RS 2) as mentioned in the [release notes|https://confluence.atlassian.com/jirasoftware/jira-software-10-0-x-release-notes-1416825224.html%C2%A0] the package seem to have migrated from {{{}com.sun.jersey (Jersey 1.x){}}}to {{org.glassfish.jersey(Jersey 2.x)}}\r\n{quote}These changes will only impact Marketplace partners who develop apps. The underlying libraries, Jackson and Jersey, have been upgraded to the latest versions. REST v2 also makes use of JAX-RS 2. [Check out the REST v2 migration guide|https://bitbucket.org/atlassian/atlassian-rest/src/8.0.x/UPGRADE_720.md]\r\n{quote}\r\nHence, the old fix does not seem to be working for Jira 10 and above. \r\nh3. Steps to Reproduce\r\n # Log out of Jira\r\n # Visit the System Dashboard\r\n # Log in to Jira\r\n\r\nh3. Expected Results\r\n\r\nThe log in completes with no warnings.\r\nh3. Actual Results\r\n\r\nBelow exception is thrown in the {{catalina.out}} file:\r\n{noformat}\r\n07-Feb-2025 09:02:24.164 WARNING [http-nio-8080-exec-8 url: /jira/rest/api/2/settings/baseUrl; user: admin] org.glassfish.jersey.servlet.WebComponent.filterFormParameters A servlet request to the URI https://<base-url>/jira/rest/activity-stream/1.0/preferences?_=1738918943981 contains form parameters in the request body but the request body has been consumed by the servlet or a servlet filter accessing the request parameters. Only resource methods using @FormParam will work as expected. Resource methods consuming the request body by other means will not work as expected.\r\n07-Feb-2025 09:02:46.903 WARNING [http-nio-8080-exec-11 url: /jira/rest/activity-stream/1.0/preferences; user: admin] org.glassfish.jersey.servlet.WebComponent.filterFormParameters A servlet request to the URI https://<base-url>/jira/rest/activity-stream/1.0/preferences?_=1738918966735 contains form parameters in the request body but the request body has been consumed by the servlet or a servlet filter accessing the request parameters. Only resource methods using @FormParam will work as expected. Resource methods consuming the request body by other means will not work as expected.  {noformat}\r\n!https://getsupport.atlassian.com/images/icons/emoticons/information.png|width=16,height=16!  Note that the URL will vary wildly depending on the specific usage - this is but one example.\r\nh3. Workaround \r\n # Shut down Jira\r\n # Edit {{{}$jira-install/conf/logging.properties{}}}, and add the following at the bottom:\r\n{code:java}\r\norg.glassfish.jersey.servlet.WebComponent.level = SEVERE\r\norg.glassfish.jersey.servlet.WebComponent.filterFormParameters.level = SEVERE {code}\r\n# Restart Jira for the changes to take effect","createDate":"2025-02-14T05:31:30.000+0000","comments":[]},{"summary":"Unable to Start Jira with CIFS Shares as Shared Directory Locations","key":"JRASERVER-78594","url":"https://jira.atlassian.com/browse/JRASERVER-78594","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nNFS and SMB/CIFS shares are supported as the locations of the shared directory. Jira fails to start when CIFS shares are configured as the locations for the shared directory.\r\n\r\nThis is reproducible on Data Center: YES\r\nh3. Steps to Reproduce\r\n # Install Jira version 9.16 and Start the Jira application.\r\n # Configure a CIFS share and mount it within the Jira instance.\r\n # Copy the contents from the local home directory to the CIFS share home directory.\r\n # Create the cluster.properties file by configuring the shared home (i.e., the CIFS location).\r\n # Restart Jira. The application start correctly with the shared home path configured in the previous steps.\r\n # Proceed to install Jira version 10.3.3.\r\n # Conduct an upgrade of Jira from version 9.16 to 10.3.3.\r\n # Following the upgrade, the Jira application fail to start, displaying the errors outlined below.\r\n\r\n{code:java}\r\n2025-02-11 15:52:22,201+0000 main INFO      [c.a.jira.startup.TemporaryDirectoryCleaner] Cleaning the temporary directory located at /install/atlassian-jira-software-10.3.3-standalone/temp\r\n2025-02-11 15:52:22,202+0000 main INFO      [c.a.jira.startup.TemporaryDirectoryCleaner] Finished cleaning the temporary directory.\r\n2025-02-11 15:52:22,570+0000 main INFO      [c.a.j.config.database.SystemDatabaseConfigurationLoader] Reading database configuration from /jirasoftware-home/dbconfig.xml\r\n2025-02-11 15:52:22,943+0000 main INFO      [c.a.j.config.database.SystemDatabaseConfigurationLoader] Reading database configuration from /jirasoftware-home/dbconfig.xml\r\n2025-02-11 15:52:32,953+0000 main INFO      [c.a.j.config.database.SystemDatabaseConfigurationLoader] Reading database configuration from /jirasoftware-home/dbconfig.xml\r\n2025-02-11 15:52:32,960+0000 main WARN      [c.a.s.service.lock.ConfigFileLock] Lock file /mnt/shared/secrets-config.yaml.lock is stale, removing it.\r\n2025-02-11 15:52:32,984+0000 main INFO      [c.a.j.config.database.SystemDatabaseConfigurationLoader] Reading database configuration from /jirasoftware-home/dbconfig.xml\r\n2025-02-11 15:52:43,293+0000 main INFO      [c.a.j.config.database.SystemDatabaseConfigurationLoader] Reading database configuration from /jirasoftware-home/dbconfig.xml\r\n2025-02-11 15:52:43,301+0000 main WARN      [c.a.s.service.lock.ConfigFileLock] Lock file /mnt/shared/secrets-config.yaml.lock is stale, removing it.\r\n2025-02-11 15:52:44,154+0000 main INFO      [c.a.jira.startup.JiraStartupLogger] \r\n    \r\n    ___ Starting the JIRA Plugin System _________________\r\n    \r\n2025-02-11 15:52:51,663+0000 main INFO      [c.a.j.config.database.SystemDatabaseConfigurationLoader] Reading database configuration from /jirasoftware-home/dbconfig.xml\r\n2025-02-11 15:53:01,716+0000 main INFO      [c.a.jira.startup.JiraStartupLogger] Running Jira startup checks.\r\n2025-02-11 15:53:01,717+0000 main INFO      [c.a.jira.startup.JiraStartupLogger] Jira pre-database startup checks completed successfully.\r\n2025-02-11 15:53:01,762+0000 main INFO      [c.a.j.config.database.DatabaseConfigurationManagerImpl] The database is not yet configured. Enqueuing Database Checklist Launcher on post-database-configured-but-pre-database-activated queue\r\n2025-02-11 15:53:01,763+0000 main INFO      [c.a.j.config.database.DatabaseConfigurationManagerImpl] The database is not yet configured. Enqueuing Post database-configuration launchers on post-database-activated queue\r\n2025-02-11 15:53:01,778+0000 main INFO      [c.a.jira.startup.LauncherContextListener] Startup is complete. Jira is ready to serve.  {code}\r\nh3. Expected Results\r\n\r\nJira should start without any errors following the upgrade.\r\nh3. Actual Results\r\n\r\nThe Jira startup process is not completing successfully, resulting in messages such as \"The database is not yet configured\" and \"Lock file /mnt/shared/secrets-config.yaml.lock is stale, removing it.\" Additionally, unable to access Jira after the startup attempt.\r\nh3. Workaround\r\n\r\nDisable the secret storage using the [property|https://confluence.atlassian.com/adminjiraserver/setting-properties-and-options-on-startup-938847831.html] below :\r\n\r\n \r\n{code:java}\r\n-Datlassian.secret.service.state=disabled{code}\r\n ","createDate":"2025-02-12T07:04:58.000+0000","comments":[{"text":"You've encountered a major issue with Jira when using CIFS shares for the shared directory after upgrading to version 10.3.3. Thanks for detailing the steps to reproduce the problem—it helps understand the context. Users should be aware of these compatibility issues, especially since upgrading versions can cause unexpected behavior. Have you reported this to Atlassian's support team? It may help get faster resolution. [Monkey Mart|https://monkeymart.io/online]","author":"Immanuel Johnston"}]},{"summary":"Accessing 'System Info' option from the Systems menu throws \"403 - Forbidden\" errors for the users having Jira Administrator privileges ","key":"JRASERVER-78583","url":"https://jira.atlassian.com/browse/JRASERVER-78583","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAccessing '{*}System Info{*}' option from the Systems menu throws \"{*}403 - Forbidden{*}\" errors for the users having Jira Administrator privileges while it works properly for users with Jira System Administrator privileges.\r\n\r\nHowever, this works well for both roles Jira Administrator, Jira System Administrator privileges in the older versions.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Install Jira Software Version 10.3.0 or higher.\r\n # Create 2 user accounts one with '{*}Jira Administrator{*}' and 'another one with {*}Jira System Administrator{*}' privileges.\r\n # Login as user with user with '{*}Jira Administrator{*}' privileges.\r\n # Access the administration option and navigate to '{*}System --> System Info{*}' option.\r\n # Repeat the same for user with {*}Jira System Administrator{*}' privileges.\r\n\r\nh3. Expected Results\r\n\r\nAs described in this KB article [Managing global permissions|https://confluence.atlassian.com/adminjiraserver/managing-global-permissions-938847142.html] - ideally only users with Jira System Administrator privileges should be able to view or manage tasks from the the Systems menu. However it works both both roles in the older versions (tested for multiple versions in 9.12.X).\r\n\r\nIf there are no specific restrictions implemented in 10.X versions  - then users under both roles '{*}Jira Administrator{*}' and '{*}Jira System Administrator{*}' should be able to view or manage tasks from the the Systems menu.\r\nh3. Actual Results\r\n\r\nUsers with *'Jira Administrator'* role privileges can access the Systems menu. However, accessing the System Info option throws \"403 - Forbidden\" error in GUI.\r\n\r\nOther options like monitoring, clean-up, audit logs are accessible for both roles.\r\nh3. Workaround\r\n\r\nGrant the users with Jira System Administrator privileges if there is a need to access System Information.","createDate":"2025-02-07T13:30:46.000+0000","comments":[{"text":"This behavior also affects *Application Links.* Users also receive error 403 when trying to create a new application link. ** ","author":"Vasti Marucci"}]},{"summary":"Memory graph is no longer visible in the System Info page","key":"JRASERVER-78554","url":"https://jira.atlassian.com/browse/JRASERVER-78554","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen loading into the system info page, there used to be a memory graph that showed the current memory usage of Jira. However, this image is now gone and has been replaced by a white rectangle.\r\nh3. Steps to Reproduce\r\n # Install 10.3.X\r\n # Go to Admin -> System -> System Info\r\n # Scroll down to Memory usage\r\n # See that the memory graph is blank and contains a \"spacer\" image if loaded in a new tab.\r\n\r\nh3. Expected Results\r\n\r\nMemory graph should still be present.\r\nh3. Actual Results\r\n\r\nMemory graph image is no longer available.\r\nh3. Workaround\r\nTo cause the Memory graph to show, change the theme back to Original:\r\n* Select the profile Icon in the top right\r\n* Go to themes\r\n* Select Original","createDate":"2025-01-29T11:48:26.000+0000","comments":[]},{"summary":"When uploading logo in look and feel with white background, some fonts are incorrectly set as same white background","key":"JRASERVER-78547","url":"https://jira.atlassian.com/browse/JRASERVER-78547","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen uploading, or changing manually, the look and feel text colors to white. Some text items in Jira menu become invisible (but still functional).\r\n\r\nThis bug is an extension of JRASERVER-77608, the differences will be placed below.\r\n\r\nThis is reproducible on Data Center: (yes) \r\nh3. Steps to Reproduce\r\n # Open Administration menu and go to Look and Feel menu\r\n # Upload a *RED* logo with a white (tested with black logos and failed)\r\n(i) Alternatively can change the \"Header navigation - highlight text color\", \"Drop-down menu item - text color\" and \"Primary button - text color\" to white (#ffffff), but the main idea is to use the logo upload\r\n # Open the project settings and observe the issue type, or open an issue search in advanced and start typing\r\n\r\nh3. Expected Results\r\n\r\nAll items are visible.\r\nh3. Actual Results\r\n\r\nFor Jira 10.3.0 this change heavily affect Jira, severe compromising Jira colors (as the JRASERVER-77608).\r\n\r\nFor Jira 10.3.1 and later, it affects only a few items, such as the issue types in project settings, and the autocomplete data in issue search (in both cases the text is blank in a blank background).\r\n\r\nExample from 10.3.2:\r\n - Logo\r\n!logo_example.png!\r\n - Errors:\r\n!e1.png|thumbnail! !e2.png|thumbnail!\r\n \r\nh3. Workaround\r\n\r\n * Go to the look and feel and change the items \"Header navigation - highlight text color\", \"Drop-down menu item - text color\" and \"Primary button - text color\" to a different color. or\r\n * Change the theme to dark. ","createDate":"2025-01-27T21:36:50.000+0000","comments":[]},{"summary":"Setting the drop-down menu item text color to white (#ffffff) in Look and Feel settings hides the Issue types dropdown fields","key":"JRASERVER-78467","url":"https://jira.atlassian.com/browse/JRASERVER-78467","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSetting the Drop-down menu item - text color to white (#ffffff) in Look and feel settings causes the Issue types dropdown in Project settings to be hidden.\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Open Administration menu on Jira \r\n # Go to Look and Feel menu\r\n # Update Drop-down menu item - text color to white (#ffffff)\r\n # Navigate to any project ->Project Settings\r\n\r\nh3. Expected Results\r\n\r\nThe Issue types dropdown text in the Project Settings are visible and are not impacted by the color change  !Screenshot 2025-01-20 at 5.25.19 PM.png!\r\nh3. Actual Results\r\n\r\nThe Issue types dropdown text in the Project Settings is hidden (white text on white background)  !Screenshot 2025-01-20 at 5.32.10 PM.png!\r\nh3. Workaround\r\n # Choose a different colour for the \"Drop-down menu item - text colour\" that is not white.\r\n # Click the revert button to restore the default color settings.","createDate":"2025-01-20T12:03:53.000+0000","comments":[{"text":"This is a critical concern about us moving forward into Jira 10.xxx","author":"Bill Wallace"}]},{"summary":"Create issue : Role defined inappropriately","key":"JRASERVER-78463","url":"https://jira.atlassian.com/browse/JRASERVER-78463","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe “close” button is inappropriately coded as link.\r\nh3. Steps to Reproduce\r\n # Open \"Jira - Home\" page.\r\n # Navigate and activate \"Create\" button in header section.\r\n # Navigate and activate \"Configure Fields > Where is my field?\" in the modal dailog.\r\n # Navigate through the page using the “TAB” key with screen reader running.\r\n # Navigate to the mentioned button in the modal dailog.\r\n # Notice that inappropriate role information is read out by the screen reader.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2025-01-20 at 4.12.36 PM.png|width=590,height=326!\r\nh3. Actual Results\r\n\r\nThe “close” button is coded as <a> inappropriately present in the modal dailog. however, the mentioned interactive element functions as a button.\r\n\r\nAs a result, screen reader users are communicated with inappropriate role information.\r\nh3. Expected Result\r\n\r\nARIA role should be appropriately used with correct semantics and its unnecessary usage should be avoided.\r\n\r\nApply the following changes →\r\n\r\n1.Native implementation:\r\n * Code the mentioned interactive element using the native <button> element.\r\n\r\n * Modify the scripts to ensure that the mentioned button works appropriately.\r\n\r\n2.ARIA Implementation:\r\n * Provide role=\"button\" on the <a> element.\r\n\r\n * Modify the scripts to ensure the mentioned interactive elements are keyboard-operable.\r\n\r\nA working example of an accessible button can be found at: [https://www.w3.org/WAI/ARIA/apg/patterns/button/]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.7\r\nChrome - Version 131.0.6778.265 (Official Build) (arm64)\r\nFirefox- Version 134.0 (64-bit) \r\nSafari- Version 18.2 (19620.1.16.111.6, 19620)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest","createDate":"2025-01-20T10:13:02.000+0000","comments":[]},{"summary":"Header : Color alone used to distinguish links","key":"JRASERVER-78447","url":"https://jira.atlassian.com/browse/JRASERVER-78447","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nColor alone is used to distinguish \"Atlassian End User Agreement\", \"Apache Software Foundation\", and so on links.\r\nh3. Steps to Reproduce\r\n # Open the \"Home\" page.\r\n # Navigate to the header section.\r\n # Navigate to the \"Help\" > \"About Jira\" buttons and activate them > a modal appears.\r\n # Navigate to the mentioned links in the \"Atlassian Jira and Jira Plugins\" modal dialog.\r\n # Observe that color alone is used to distinguish the above mentioned links.\r\n\r\nh3. Screenshot 1\r\n\r\n!Screenshot 2025-01-17 at 7.06.40 PM.png|width=482,height=229!\r\nh3. Screenshot 2\r\n\r\n!Screenshot 2025-01-20 at 9.49.26 AM.png|width=483,height=212!\r\nh3. Screenshot 3\r\n\r\n!Screenshot 2025-01-20 at 9.51.02 AM.png|width=494,height=229!\r\nh3. Actual Results\r\n\r\nThe #0B66E4 color alone is used to identify the \"Atlassian End User Agreement\", \"Apache Software Foundation\", \"org.jclarion:image4j:0.7:jar\" and so on links in the \"Atlassian Jira and Jira Plugins\" modal dialog that becomes available on activating the \"Help\" and \"About Jira\" buttons in the header section.\r\n\r\nThe mentioned links have a low contrast ratio of 2.7:1 with the surrounding text.\r\n\r\nThis will make it difficult for low-vision users and those with color blindness to distinguish the links within the block of text.\r\nh3. Expected Results\r\n\r\nUsers should be able to easily identify the links within the block of text.\r\n\r\nTo make it easy for all users to recognize links the best practice is to persistently underline them or provide any other visual cue such as formatting the text as bold or italic. If the above solution is not feasible, change the color of the link so that they have a contrast ratio of at least 3:1 with the surrounding text.\r\n\r\nMoreover, it is best practice to ensure that the underline appears not only when the mouse is hovered over the link but also when the link receives the keyboard focus.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.7\r\nChrome - Version 131.0.6778.86 (Official Build) (arm64)\r\nFirefox- Version 134.0 (64-bit) \r\nSafari- Version 18.1.1 (20619.2.8.11.12)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest","createDate":"2025-01-17T13:23:37.000+0000","comments":[]},{"summary":"Header : Missing alt attribute for informative image","key":"JRASERVER-78445","url":"https://jira.atlassian.com/browse/JRASERVER-78445","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe 'alt' attribute is missing for the \"Jira logo\" informative image.\r\nh3. Steps to Reproduce\r\n # Open the \"Home\" page.\r\n # Navigate to the header section.\r\n # Navigate to the \"Help\" > \"About Jira\" buttons and activate them > a modal appears.\r\n # Navigate to the mentioned informative image and inspect the code.\r\n # Notice that the 'alt' attribute is not specified for the mentioned informative image.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2025-01-17 at 5.14.12 PM.png|width=486,height=270!\r\nh3. Actual Results\r\n\r\nThe \"alt\" attribute is not provided for the \"Jira logo\" informative image in the \"Atlassian Jira and Jira Plugins\" modal dialog that becomes available on activating the \"Help\" and \"About Jira\" buttons in the header section.\r\nAs a result, screen reader announces the image as unlabelled.\r\nh3. Expected Results\r\n\r\nAlternate text of the informative image should be read out by the screen reader.\r\n\r\nProvide alternate text for the mentioned informative image such as \"Jira logo\" using 'alt' attribute. Ensure that the alternate text is descriptive of the image purpose.\r\n\r\n*Code Example:*\r\n{code:java}\r\n<img class=\"main-about-jira-logo\" src=\"/images/atlassian-jira-logo-large.png\" alt=\"Jira logo\"> {code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.7\r\nChrome - Version 131.0.6778.86 (Official Build) (arm64)\r\nFirefox- Version 134.0 (64-bit) \r\nSafari- Version 18.1.1 (20619.2.8.11.12)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest","createDate":"2025-01-17T11:28:53.000+0000","comments":[]},{"summary":"Header : Color alone used to distinguish link","key":"JRASERVER-78435","url":"https://jira.atlassian.com/browse/JRASERVER-78435","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nColor alone is used to distinguish the \"Disable Keyboard Shortcuts\" link.\r\nh3. Steps to Reproduce\r\n # Open the \"Home\" page.\r\n # Navigate to the header section.\r\n # Navigate to the \"Help\" > \"Keyboard Shortcuts\" buttons and activate them > a modal appears.\r\n # Navigate to the mentioned link in the \"Keyboard Shortcuts\" modal dialog.\r\n # Observe that color alone is used to distinguish the above mentioned link.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2025-01-17 at 3.42.54 PM.png|width=486,height=230!\r\nh3. Actual Results\r\n\r\nThe #0B66E4 color alone is used to identify the \"Disable Keyboard Shortcuts\" link in the \"Keyboard Shortcuts\" modal dialog that becomes available on activating the \"Help\" and \"Keyboard Shortcuts\" buttons in the header section.\r\n\r\nThe mentioned link has a low contrast ratio of 2.7:1 with the surrounding text.\r\n\r\nThis will make it difficult for low-vision users and those with color blindness to distinguish the link within the block of text.\r\nh3. Expected Results\r\n\r\nUsers should be able to easily identify the link within the block of text.\r\n\r\nTo make it easy for all users to recognize links the best practice is to persistently underline them or provide any other visual cue such as formatting the text as bold or italic. If the above solution is not feasible, change the color of the link so that they have a contrast ratio of at least 3:1 with the surrounding text.\r\n\r\nMoreover, it is best practice to ensure that the underline appears not only when the mouse is hovered over the link but also when the link receives the keyboard focus.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.7\r\nChrome - Version 131.0.6778.86 (Official Build) (arm64)\r\nFirefox- Version 134.0 (64-bit) \r\nSafari- Version 18.1.1 (20619.2.8.11.12)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest","createDate":"2025-01-17T10:37:08.000+0000","comments":[]},{"summary":"Sidebar: Redundant image and textual link with redundant alt text","key":"JRASERVER-78432","url":"https://jira.atlassian.com/browse/JRASERVER-78432","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Redundant image and textual link with redundant alt text is provided for the image link.\r\nh3. Steps to Reproduce\r\n # Open the \"Project\" page.\r\n # Navigate to the \"Sidebar\".\r\n # Navigate to the mentioned image and textual link.\r\n # Inspect the code of the image link and textual link.\r\n # Notice that both links open the same but are defined in separate <a> tags.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2025-01-20 at 3.41.30 PM.png|width=818,height=455!\r\n\r\n \r\nh3. Actual Results\r\n\r\nThere are adjacent image and textual links such as \"Jira DC VPAT 2025\" which point to the same destination but are defined in separate <a> tags. Also the alternate text of the image link is same as the text of the textual link. As a result, screen reader users are presented with a repeated information of link which opens the same page.\r\nh3. Expected Results\r\n\r\nImage and text links with same destination should be merged into a single link.\r\n\r\nEnsure that the image and text link that point to the same destination are combined into a single link as a link block.\r\n\r\nApply the following changes:\r\n * Define the image and the link text within a single <a> element instead of separate <a> elements.\r\n * Ideally alternate text must be provided to all image links using the \"alt\" attribute. In this instance, since the image and the textual link point to an identical destination page, use an empty ‘alt’ attribute. \r\n * Use CSS if necessary to maintain the presentation of the content.\r\n\r\n \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 131.0.6778.265 (Official Build) (64-bit)\r\nFirefox- Version 134.0.1 (32-bit)\r\nSafari- Version 18.1.1 (20619.2.8.11.12)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.4.2\r\nVoiceover - Version Latest","createDate":"2025-01-17T10:04:49.000+0000","comments":[]},{"summary":"Jira to ignore the decimal separator used.","key":"JRASERVER-78336","url":"https://jira.atlassian.com/browse/JRASERVER-78336","type":"Bug","priority":"","description":"h3. Issue Summary\r\nRecently the ticket https://jira.atlassian.com/browse/JRACLOUD-30128 was fixed for Jira Cloud, allowing users to use period or comma separators when logging time and still logged the time correctly.\r\n\r\nFor example: Logging 1,5h and 1.5h will log the same time in Cloud, whereas depending on the language settings in your profile for DC, this can cause 1,5h to log as 15hours instead.\r\n\r\nh3. Steps to Reproduce\r\n# Set User language to English\r\n# Create issue on Jira\r\n# Log 1,5h and see 15h logged\r\n# Log 1.5h and see 1.5h logged\r\n\r\n\r\nh3. Expected Results\r\nJira should log time regardless of separator used.\r\nh3. Actual Results\r\nDepending on user language settings, Jira will ignore the separator used and log time incorrectly.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-12-12T13:43:58.000+0000","comments":[{"text":"This issue causes a lot of trouble, as we use Jira with a very large user base in different business critical areas. Please have a look at it.","author":"Jan Schweiger"},{"text":"Thank you [~7550ef5838c5] for creating this ticket, after having discussed this problem over support.  :)\r\n\r\nIn order to let your development besser assess and understand impact, I'll comment here what I explained you in the support ticket.\r\n\r\nI hope that this bug will get high prioritization, since this is a very common and severe issue, especially in Europe and in project business.\r\n\r\nLet’s figure it out that one has a work package with 10 activities. At the end, a bill will be issued to the customer basing on the time bookings in Jira. Each hour costs the customer 100€.\r\n\r\nFor each activity 7.5 hours are spent (total: 75 hours, 7,500€).\r\n\r\nHowever, a user logs for one of those activities 7,5 hours. Since this person uses Jira in English, this time will be logged by Jira as 75 hours. The total of hours will be in this case 142.5 instead of 75, and the customer will be issued a bill of 14,250€ instead of 7,500€. Almost twice as much.\r\n\r\nI think that none of us would like to be that customer. !https://pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/caa27a19-fc09-4452-b2b4-a301552fd69c/32x32/1f642.png|width=20,height=20!","author":"Manuel Marinucci"}]},{"summary":"Jira 10 forcibly decodes encoded ASCII characters in webhook URLs","key":"JRASERVER-78312","url":"https://jira.atlassian.com/browse/JRASERVER-78312","type":"Bug","priority":"","description":"*Issue Summary:*\r\n\r\nIn Jira 10, webhooks do not preserve URL encoding after being triggered, causing potential failures in processing by external services.\r\n\r\n*Steps to Reproduce:*\r\n * Upgrade to, or performa clean installation of, Jira 10.0.0\r\n\r\n * Configure a webhook with a URL containing the %3D characters.\r\nExample:\r\n{code:java}\r\nhttps://webhook.site/87749b79-cde2-4add-91da-4538b46f01ec/TOKEN=%3D {code}\r\n\r\n * Trigger the webhook to send a request.\r\n\r\n*Expected Results:*\r\n\r\nThe webhook request should preserve URL encoding in the query parameters, resulting in a correctly formatted URL:\r\n{code:java}\r\nPOST /87749b79-cde2-4add-91da-4538b46f01ec/TOKEN=%3D?{code}\r\n \r\n*Actual Results:*\r\nIn Jira 10.0.0 and later, the webhook request does not preserve URL encoding, resulting in an incorrect URL:\r\n{code:java}\r\nPOST /87749b79-cde2-4add-91da-4538b46f01ec/TOKEN== HTTP/1.1\r\n{code}\r\n \r\n*Impact:*\r\n\r\nThis bug affects the functionality of webhooks that rely on special characters being URL-encoded, potentially leading to authentication failures and disruptions in integrations with external services.\r\n\r\n*Workaround:*\r\n\r\nTry one of the following workarounds to address the issue:\r\n\r\n1. *Secure admin webhooks:* Use this feature to avoid passing security tokens via URLs.\r\n2. *Re-generate tokens:* Generate new tokens until they don't contain problematic characters like `%3D`.\r\n3. *Outbound HTTP/S proxy:* Use a network proxy to re-write webhook URLs for proper encoding.\r\n\r\nThese options provide temporary solutions until a permanent fix is available.","createDate":"2024-12-05T23:59:22.000+0000","comments":[{"text":"FYI, this behavior also manifests in 10.3.1 and 10.4.0.","author":"Dave Liao (Braze)"},{"text":"Any estimate on when a fix will be available to end users? Hoping for this to drop in 10.4.2...","author":"Dave Liao (Braze)"}]},{"summary":"Sorting comments on issues with a large number of comments loads indefinitely","key":"JRASERVER-78254","url":"https://jira.atlassian.com/browse/JRASERVER-78254","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen trying to sort comments from an issue with many comments (1000, for example), Jira may never complete the request, leaving it loading in the UI indefinitely.\r\n\r\nh3. Steps to Reproduce\r\n# Access an issue with 1000 comments\r\n# Click on \"Load more older comments\" to expand the list of comments\r\n# Hold the Shift key, then click on \"Load more older comments\" again to load all comments\r\n# Click on \"Newest first\" or \"Oldest first\" to sort the comment order\r\n\r\nh3. Expected Results\r\nThe comments are eventually displayed in the chosen sort order.\r\n\r\nh3. Actual Results\r\nThe request loads indefinitely with no response:\r\n !Screenshot 2024-11-25 at 13.25.04.png|thumbnail! \r\n \r\nh3. Workaround\r\nNo workaround is available.","createDate":"2024-11-25T16:27:09.000+0000","comments":[]},{"summary":"Issue View : Screen reader users are unable to navigate through the custom fields","key":"JRASERVER-78251","url":"https://jira.atlassian.com/browse/JRASERVER-78251","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe users are unable to navigate through the custom fields using the NVDA screen reader software.\r\nh3. Steps to Reproduce\r\n # Open the Homepage of the JSM.\r\n # Navigate to the Projects and open any project.\r\n # Navigate to the issues and select any issue that has custom fields present.\r\n # Using the NVDA screen reader, navigate to the \"Details\" section and move within it using the \"Down\" arrow key.\r\n # Observe that the custom fields are not rendered to them.\r\n\r\nh3. Screenshot\r\n\r\n \r\nh3. Screen Recording\r\n\r\n \r\nh3. Actual Results\r\n\r\nWhen screen reader users navigate to the \"Details\" section using the \"Down Arrow\" key and try to interact with the custom fields, such as \"Test\", \"Demo\", and so on, these fields are not rendered for them. The screen reader's focus skips these fields and directly moves to the \"Description\" section. This occurs because role=\"application\" is inappropriately specified for the <div> element containing the custom fields section.\r\nAs a result, screen reader users are unable to interact with the custom fields.\r\nh3. Expected Results\r\n\r\nEnsure that the screen reader users can navigate through the custom fields.\r\n\r\nIn this scenario, remove the role=\"application\" from the source of the <div> element.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 130.0.6723.59 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 131.0.3 (64-bit)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.3.1\r\nVoiceOver - Version Latest","createDate":"2024-10-21T07:49:21.000+0000","comments":[{"text":"This also prevents NVDA's search function from finding any values inside the custom field list.","author":"David Dunham"},{"text":"We have checked this issue and we are not able to reproduce it. The custom fields are focusable using NVDA. It is part of customer escalation and raised by the Atlassian Enterprise Accessibility team. It would be great if you could take  opinion from Kelly on this.","author":"Shruti Chabukswar"},{"text":"NVDA will happily announce custom fields and their values if you hover over them.  The problem is when iterating over all fields with down arrow, it will skip over the custom field section and go straight to Description.  I tried it on this issue and it happens here too.","author":"David Dunham"},{"text":"Hi, what's the latest? Are you able to reproduce now?","author":"bradcaugust"},{"text":"Hey [~11ef63462df3] , \r\n\r\nI've moved this one to the Jira DC team as this issue is on the issue view page and the components mentioned and that I've investigated aren't just JSM related.\r\n\r\nWe aren't able to replicate using typical keyboard navigation methods, but understand that it could still be an issue when using NVDA.","author":"Jim Alexander"},{"text":"Hi, checking in. Have you managed to reproduce it? What is the latest?","author":"bradcaugust"},{"text":"Hi, I have a screen recording that I can upload, but I don't seem to be able to. Maybe the ticket needs to be reopened?\r\n\r\nI'm disappointed that you guys couldn't work this out internally – that I have to be the one to give a second recording of the same problem. Don't you all have an accessibility team, the ones that already recreated this problem and posted the existing video? I'm also disappointed in the generally poor accessibility across JIRA.","author":"bradcaugust"},{"text":"I agree with Bradley that I don't understand why you are having so much trouble reproducing this since your own Accessibility team was able to.  The attached recording, made by that team, clearly shows the screen reader jumping past the field called \"Chirag\".  In addition to not reading the fields while iterating through, it also prevents NVDA from being able to search for values within the custom fields section.\r\n\r\nThe fix, which I think is detailed on the original support ticket (A11Y-954), is to remove *role=\"application\"* from the *<div>* that surrounds the custom fields.  It's a simple fix that I've already implemented in my own environment by injecting some extra JavaScript into the page, but screen reader users elsewhere could really benefit from this very simple change on your end.","author":"David Dunham"},{"text":"My recording, if I'm able to upload it at some point, is recreating the problem on this very ticket. NVDA can't get into the below custom fields. It just reads \"Application space\", and doesn't say any of the things inside. So it goes from the labels to Description with only \"Application space\" in between. It doesn't read those fields and you can't search for them either.\r\n * \r\n*Introduced in Version:*\r\n * \r\n*Symptom Severity:*\r\n * \r\n*UIS:*\r\n * \r\n*Bug Fix Policy:*\r\n * \r\n*Bug Type:*","author":"bradcaugust"}]},{"summary":"color: Color value is invalid","key":"JRASERVER-78054","url":"https://jira.atlassian.com/browse/JRASERVER-78054","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere is  an issue when customers try to copy links from other pages, somethimes, when it's copied on a Jira comment, it add an error on the jira comment:\r\ncolor: Color value is invalid\r\n\r\nCustomer were using color themes from - [https://developer.atlassian.com/cloud/trello/power-ups/color-theme-compliance/using-atlassian-design-tokens/]\r\nh3. Steps to Reproduce\r\n # Paste this --> \\{color:var(--ds-text, #172b4d)}Please, let me know if you want to add this funcionalities or if you prefer to close this ticket.\\\\{color}\r\n # It will show color: Color value is invalid in the comment section of a ticket.\r\n\r\nh3. Expected Results\r\n\r\nThe error should not be shown\r\nh3. Actual Results\r\n\r\n!image-2024-09-10-12-29-50-985.png|width=706,height=134!\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nThere is no workaround","createDate":"2024-09-10T10:30:39.000+0000","comments":[{"text":"that happens not only in the comments, we have incident's descriptions  that are almost impossible to read because of the many \"color is invalid\"!","author":"Giorgia Gastaldi"},{"text":"I have the same problem (Jira DC v. 10.3.2 LTS)","author":"Volohov"},{"text":"In version Jira DC 9.15.2 I get the following result consistently:\r\n\r\n!image-2025-02-14-13-03-57-757.png|width=165,height=55!\r\n\r\nWay to reproduce:\r\n # opening comment\r\n # format a dotted list\r\n # insert (from Notepad++)  two rows of text _with an empty row_ in between\r\n # home - backspace - return - up - end - del - del - return\r\n # add the comment (the fault already visible in text mode before adding the comment)\r\n\r\n(EDIT: Sorry, doesn't seem I have permission to add image/attachment)","author":"Jonas Frid"},{"text":"Version 10.3.3 LTS is also affected by the problem. \r\n\r\nIt also appears in the comments and in the description. ","author":"Lea-Madlen Jetter"},{"text":"Hey [~c308fd28544d], you rock! Thanks for providing your \"Konami Code\" – I was able to reproduce the bug in 10.3.4 with those steps. Here's a quick Loom demo: [JRASERVER-78054 Reproduction|https://www.loom.com/share/11bba028303145f6846abc8d99c6a816?sid=9416e3ca-1736-42c2-8a74-22420332f805].","author":"Benjamin S"},{"text":"This is impacting our JSM instance as well. When our agents share a link to a KB, this will randomly happen. Very confusing to customers. Agents can certainly edit the comment to remove the error verbiage, but then the customers receive 2 notifications. \r\n\r\nOur Jira instance will also be upgrading to v10, so we're anticipating even more trouble with this for our Jira user community, which will result is elevated JSM support tickets. \r\n\r\n[~1353e2e9fd2f]  thank you for looking into this. Your focus on this is very much appreciated! ","author":"Carey Chesmore"},{"text":"Hello, it affects me too (Jira DC 10.3.3), I hope that you will fix that ","author":"Volohov"}]},{"summary":"issue_version and comment_version missing data from project import","key":"JRASERVER-77841","url":"https://jira.atlassian.com/browse/JRASERVER-77841","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nDuring the import of new data Jira doesn't assign a version to issue and comment entities , during the reindexation it expects that all the entities have versions since all the data will come from :\r\n * XML restore (Cloud backup) where UpgradeTask_Build900000 will populate the tables\r\n * Or the current data was already processed by the upgrade task\r\nTherefore during the reindexation It does not bump the version or generate it instead the following warning is thrown because the newly inserted data does not have a version.\r\n\r\n{code:java}\r\n[c.a.j.issue.index.DefaultIssueIndexer] ISSUE with id=XXXX should have a version by now\r\n{code}\r\nh3. Environment\r\n\r\nJira 9.X\r\nh3. Steps to Reproduce\r\n * Clear issue_version and comment_version\r\n ** Alternatively port the data from a different instance\r\n * Run full or project reindexing\r\n\r\nh3. Expected Results\r\n * Jira will populate a version for the tickets and comments that still don't have an initial version\r\n * Data is indexed and searchable\r\n\r\nh3. Actual Results\r\n * Jira alerts about missing version for the processed entity since there is no matching entries in their corresponding tables \r\n\r\n{code:java}\r\n[c.a.j.issue.index.DefaultIssueIndexer] ISSUE with id=XXXX should have a version by now\r\n{code}\r\n\r\n * Data is indexed and searchable\r\n\r\nh3. Workaround\r\nInsert missing initial issue versions \r\n\r\n{code:java}\r\ninsert into issue_version\r\n  select id, null,  updated, 1, 'N' \r\n  from jiraissue\r\n  where id not in (\r\n      select issue_id\r\n      from issue_version\r\n    );\r\n{code}\r\n\r\nInsert missing initial comment versions\r\n\r\n{code:java}\r\ninsert into comment_version\r\n  select id, issueid,  updated, 1, 'N' \r\n  from jiraaction\r\n  where actiontype = 'comment'\r\n    and id not in (\r\n      select comment_id\r\n      from comment_version\r\n    );\r\n{code}\r\n\r\n\r\n \r\nh3. Notes\r\nThe insertion time will depend on the size of the missing data in the versions and entities tables don't worry if it takes more than a few seconds.\r\n{panel:title=IMPORTANT|borderStyle=dashed|borderColor=#ccc|titleBGColor=#F7D6C1|bgColor=#FFFFCE}\r\n(!) Always back up your data before performing any modifications to the database. If possible, test any alter, insert, update, or delete SQL commands on a staging server first.\r\n{panel}","createDate":"2024-06-20T11:27:30.000+0000","comments":[{"text":"By \"import\" do you mean the (old) CSV Importer?","author":"Matt Doar (Adaptavist)"}]},{"summary":"Project name automatically convert to id in the filter","key":"JRASERVER-77810","url":"https://jira.atlassian.com/browse/JRASERVER-77810","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen searching an existing filter that has the following query:\r\n{code:java}\r\nproject = \"TEST\" ORDER BY Rank ASC\r\n{code}\r\nThe query change to the following after switching between basic and advanced search:\r\n{code:java}\r\nproject = \"10000\" ORDER BY Rank ASC\r\n{code}\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Create a sample software project issues with template.\r\n # Navigate to Manage filters and open the board filter. For example, \"{*}Filter for SCRUM board{*}\"\r\n # Click Basic and then switch to Advanced. Then, click *Search* button.\r\n # Remove the query to end up like this:\r\n{code:java}\r\nORDER BY Rank ASC\r\n{code}\r\n # Click \"Search\" button and switch to Basic.\r\n # Select \"SCRUM\" in the project field and click \"Search\"\r\n # Switch back to \"Advanced\" and Jira return the following query:\r\n{code:java}\r\nproject = \"10000\" ORDER BY Rank ASC\r\n{code}\r\n\r\nVideo:  [^Screen Recording 2024-06-17 at 4.37.54 PM.mov] \r\n\r\nh3. Expected Results\r\n\r\nThe project query shouldn't be changing to project id.\r\nh3. Actual Results\r\n\r\nThe project query was change to project id automatically after switching between basic and advanced search.\r\nh3. Workaround\r\n\r\nRefresh the page and don't click save filter.\r\n\r\n(i) The filter still retaining the existing project name.\r\nh3. Tested Version\r\n * Can't reproduce the bug in 9.12.10 , 9.4.23 , 8.22.6\r\n * Safe mode also able to reproduce the issue.","createDate":"2024-06-17T14:36:25.000+0000","comments":[{"text":"In Jira Software DC 9.17.2 we observe the same problem, when we follow these steps:\r\n # Go to issue search in Advanced mode\r\n # Enter as JQL: project = ABC (key or name of an existing project)\r\n # Switching to Basic mode and back to Advanced mode allown doesn't change the JQL.\r\n # In Basic Mode, add another selection, for example a Type or Status\r\n # Switch to Advanced mode\r\n # (hopefully) recognize that the project key or name was replaced by the project id\r\n\r\nThis behaviour is very bad because, as a consequence of this behaviour on a board filter, the board disappears from the project, and people think the board was deleted.\r\nPeople knowing this bug might rechange the JQL to get the board back into the project, but others are helpless and won't have this idea.","author":"Gisela Lassahn"},{"text":"As mentioned by [~b079375df230] we experienced the same problem. It is especially bad as a newly created board based on a custom filter will not appear in the project! Reason is that project ID is used in the JQL instead of project key. We use Jira 10.3.3 and this should be fixed asap! ","author":"Bernard Barr"}]},{"summary":"Creating comments using CommentManager without dispatching an event resulting in comments without an entity version","key":"JRASERVER-77779","url":"https://jira.atlassian.com/browse/JRASERVER-77779","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCreating comments using CommentManager without dispatching an event resulting in comments without an entity version\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Create a comment using [this method|https://docs.atlassian.com/software/jira/docs/api/9.12.7/index.html?com/atlassian/jira/issue/comments/CommentManager.html]. Set {{dispatchEvent}} to false.\r\n#* Example code\r\n{code}\r\nimport com.atlassian.jira.component.ComponentAccessor\r\nimport com.atlassian.jira.util.json.JSONObject\r\n\r\nfinal boolean dispatchEvent = false\r\ndef issueManager = ComponentAccessor.getIssueManager()\r\ndef commentManager = ComponentAccessor.getCommentManager()\r\ndef issue = issueManager.getIssueObject(\"TASK-1\")\r\n\r\ncommentManager.create(issue, \"JIRAUSER10000\", \"This is a comment created using JAVA API dispatchEvent = false\", dispatchEvent)\r\n{code}\r\n # Verify if the comment is created successfully by browsing the issue.\r\n # Check the atlassian-jira.log for any warning messages about the new comment.\r\n\r\nh3. Expected Results\r\n* The comment is created successfully with a row inserted into the {{jiraaction}} database table for the comment and a corresponding row in the {{comment_version}} table\r\n\r\nh3. Actual Results\r\nThe comment is created successfully. However, the below exception may be seen repetitively in the atlasian-jira.log file:\r\n{code}\r\n2024-06-07 11:26:10,949+0200 NodeReindexServiceThread:thread-0 WARN      [c.a.j.issue.index.DefaultIssueIndexer] COMMENT with id=5253545 should have a version by now\r\n{code}\r\n\r\nThe SQL query below checks for comments without a version in the database. The comments added with the example above show up in the SQL result.\r\n{code:SQL}\r\nselect * from jiraaction WHERE actiontype = 'comment'\r\nAND id not in (select comment_id from comment_version);\r\n{code}\r\n(i) Despite without an entity version, this doesn’t affect the index search functionality.\r\n\r\nh3. Workaround\r\n* Reindexing the comments using Java API [reIndexComments|https://docs.atlassian.com/software/jira/docs/api/9.12.7/com/atlassian/jira/issue/index/IssueIndexingService.html#reIndexComments-java.util.Collection-]\r\n* Manually inserting a row into the {{comment_version}} table. Example row:\r\n{code}\r\ncomment_id|parent_issue_id|update_time                  |index_version|deleted|\r\n----------+---------------+-----------------------------+-------------+-------+\r\n     10003|          10110|2024-05-29 15:27:07.094 +0200|            1|N      |\r\n{code}\r\n(i) The value of {{comment_id}} and {{parent_issue_id}} can be retrieved from the {{jiraaction}} table using the previous query to identify the \"version-less comments\".\r\n{{update_time}} is usually the current time.\r\n{{index_version}} should be 1 (as a workaround for this bug).\r\n{{deleted}} is {{N}}.","createDate":"2024-06-07T13:42:23.000+0000","comments":[]},{"summary":"user search in the reporter field not working as expected if the *com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers.disabled* dark feature disabled","key":"JRASERVER-77636","url":"https://jira.atlassian.com/browse/JRASERVER-77636","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nuser search in the reporter field not working as expected if the *com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers.disabled* dark feature disabled\r\n\r\nThis was reproduced in 5.12.4\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Integrate jira with Active Directory/LDAP\r\n # Now try creating some users.\r\n # Search for the users in the \"Reporter\" field with their last name or some partial name but not the complete name\r\n\r\nh3. Expected Results\r\n\r\nThe users matching criteria should be displayed without issues as the bug: Customer cannot be set to reporter within Jira interface has been fixed in 5.12.3\r\nh3. Actual Results\r\n\r\nThe users are not searchable with their partial names without having the *com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers.disabled* dark feature enabled\r\n\r\n \r\nh3. Workaround\r\n * Refer to [How to manage dark features|https://confluence.atlassian.com/jirakb/how-to-manage-dark-features-in-jira-959286331.html] in Jira and disable this feature flag: com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers\r\n ## Navigate to _<BASE_URL>/secure/admin/SiteDarkFeatures!default.jspa_\r\n ## Enter *com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers.disabled* in the Enable dark feature section.\r\n ## Click on {*}Add{*}.\r\n\r\n ","createDate":"2024-04-05T12:03:06.000+0000","comments":[{"text":"Where is duplicate issue if this one has been closed?","author":"Jon Chau"},{"text":"Hi [~6e1702ff85f3] \r\nThe duplicate case is here https://jira.atlassian.com/browse/JRASERVER-77618 ","author":"Benjamin Suess"},{"text":"We have the same issue up from JSM version 5.11 / Core 9.11 and the problem is still present in all future releases up to 5.15.1 (latest at the moment).\r\n\r\nThis problem was also reported in similar cases like \r\n\r\nJRASERVER-76914\r\nJRASERVER-77584\r\nJSDSERVER-14438\r\n\r\nPlease vote also on the other issues to get more prio on those bug tickets. \r\nCould somebody from Atlassian please fix this?","author":"Leonard K"},{"text":"Should be fixed asap.","author":"Tim Eddelbüttel"},{"text":"9.12.13 also affected","author":"Florian Schüller"},{"text":"5.12.14 are effected","author":"Gita Meskauskas"},{"text":"Our users had a slightly different issue that was fixed with this workaround. When searching using a full name or email address in the \"Reporter\" field, Jira returns \"No matches\" so users can only search by partial name. (When there are many users with the same first/last name, this is an issue). Searching by username also did not return the exact match first, so our users still had to scroll through many partial matches to find the right user. \r\n\r\nI was instructed by Atlassian support to enable this feature, and in doing so, our users can now search by Full Name and/or email and get the right result. ","author":"Dalton Rick"}]},{"summary":"When attempting to change the reporter of an issue, if searching with a period or a space (inconsistently) the results will be empty","key":"JRASERVER-77584","url":"https://jira.atlassian.com/browse/JRASERVER-77584","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWithin Jira if you are trying to change the reporter of an issue, if you select the reporter drop down and start typing to filter the list, if you include a space or a period the results will be empty even though there should be matching hits.  \r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n# Create a user with a full name that includes a space.  For example \"FirstName LastName\" along with an email of \"first.last\". \r\n# Navigate to an issue and select the reporter drop down\r\n# Start typing to filter the list.  Type in \"FirstName\".  Notice you should see the list including the user you created.  \r\n# Add then type to search \"FirstName l\".  Notice the list results will drop to 0.  This is somewhat inconsistent but happens more often than not.   \r\n# Next search for \"first.\".  Notice as soon as the \".\" is added the results drop to zero even though it should match on the email address.  This is always occurring.  \r\n\r\nh3. Expected Results\r\nThe search should return the filtered users if there is a space or a period in the search term.  \r\n\r\nh3. Actual Results\r\nIf there is a space or period in the search query the resulting user list will no longer be returned.  \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.  However if you do not include the \".\" or the \"space\" character in the search the results will appear based on the stem word.  \r\n ","createDate":"2024-03-29T23:02:08.000+0000","comments":[{"text":"We have the same problem since version 9.11 and it seems that bug came up because of the changes made in this release [Project permissions get extended configuration.|https://confluence.atlassian.com/jiracore/preparing-for-jira-9-11-1267663914.html#PreparingforJira9.11-ProjectpermissionsgetextendedconfigurationBluedatacenter]\r\n\r\nRegarding the documentation there is the +temporary+ workaround by setting the DarkFeature \"ignoreBrowseUsersPermissionsInUserPickers.disabled\" as described in the documentation above. But this seems only to be a hack and we don't know what happens in future with this dark feature...\r\n\r\nSo could anybody from Atlassian check this problem again please?\r\n\r\nThis problem was also reported similarly in JRASERVER-76914, JRASERVER-77618 and JRASERVER-77636","author":"Leonard K"},{"text":"And the priority is now low so in Atlassian speak lets wait untill this ticket turns 10 before we comment that we wont be doing it.\r\nLets hope they pick up a grad or intern that decides they can fix these very simple low hanging wins!","author":"David"},{"text":"I Wonder if there is a tool that could show how things once were and that you could possibly roll back some terrible code to fix the issue. Perhaps outsourcing the code problem would help get Atlassian back to top of the market, wouldn't be hard to fix the issue !image-2024-06-10-08-53-53-715.png!","author":"David"},{"text":"Hello,\r\n\r\nThis Bug has consistantly caused our service desk employees to waste hours per week trying to find the correct reporter to add to issues that are generated by phone call or via message. Can we please have an increase in priority for this severity 2 level issue. It has cost our company a lot of money in wasted man hours and the executive team would like an update to the progress on this bug if possible. ","author":"ECRS IT"},{"text":"Hi there,\r\n\r\nthe following configuration helped us:\r\n # Refer to [How to manage dark features|https://confluence.atlassian.com/jirakb/how-to-manage-dark-features-in-jira-959286331.html] in Jira and disable this feature flag: com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers\r\n # Navigate to _<BASE_URL>/secure/admin/SiteDarkFeatures!default.jspa_\r\n # Enter *com.atlassian.jira.ignoreBrowseUsersPermissionsInUserPickers.disabled* in the Enable dark feature section.\r\n # Click on {*}Add{*}.\r\n\r\nHope this will help you too.\r\n\r\nbest regards\r\nMarkus","author":"Markus Freitag"}]},{"summary":"Jira redirects the users back to the login page when SSO is used with Crowd","key":"JRASERVER-77540","url":"https://jira.atlassian.com/browse/JRASERVER-77540","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira redirects the users back to the login page when SSO is used with Crowd (when *SSOSeraphAuthenticator* is enabled in the {*}seraph-config.xml{*}. It works fine when Crowd is not used (when *JiraSeraphAuthenticator* is enabled.)\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Create a Jira 9.12.4 and Crowd 5.2.3 environment\r\n # Configure Crowd by adding the Jira application\r\n # Add Crowd directory in Jira\r\n # Configure SSO in Jira by using Jira's SSO application\r\n # Add *crowd.properties* file under *Jira_Install/application-data/WEB-INF/classes*\r\n # Edit {*}seraph-config.properties{*}, enable *SSOSeraphAuthenticator* and disable *JiraSeraphAuthenticator*\r\n{code:java}\r\n<!-- CROWD:START - If enabling Crowd SSO integration uncomment the following SSOSeraphAuthenticator and comment out the JiraSeraphAuthenticator below -->\r\n<authenticator class=\"com.atlassian.jira.security.login.SSOSeraphAuthenticator\"/> \r\n    <!-- CROWD:END -->\r\n\r\n    <!-- CROWD:START - The authenticator below here will need to be commented out for Crowd SSO integration -->\r\n  <!--      <authenticator class=\"com.atlassian.jira.security.login.JiraSeraphAuthenticator\"/> -->\r\n    <!-- CROWD:END -->\r\n{code}\r\n\r\n # Restart Jira to activate the changes\r\n # Log in Jira using SSO\r\n\r\nh3. Expected Results\r\n\r\nJira should allow users to log in\r\nh3. Actual Results\r\n\r\nThe login screen comes and the user clicks on the SSO login:\r\n!Screenshot 2024-03-13 at 10.33.38.png|thumbnail! \r\nSSO login screen appears successfully:\r\n!Screenshot 2024-03-13 at 10.35.13.png|thumbnail! \r\nAfter the user provides the credentials and clicks on login, they are redirected to the Jira login page again:\r\n!Screenshot 2024-03-13 at 10.34.38.png|thumbnail! \r\nThe below exception is thrown in the Crowd application log file:\r\n{noformat}\r\n2024-03-13 11:10:51,412 http-nio-8095-exec-16 url: /crowd/rest/usermanagement/1/session ERROR [crowd.manager.token.RecoveryModeAwareTokenAuthenticationManager] Rejecting authentication without validating password of user 'XXXX' for app 'jira' because authentication without validating password is disabled for this app\r\n{noformat}\r\nh3. Workaround\r\n\r\nEnable *Allow to generate user tokens* option in Crowd.","createDate":"2024-03-15T09:50:12.000+0000","comments":[{"text":"We had the exact same situation with Jira 9.4.10 and Crowd 5.1.5. However, in our case, we used Azure AD as an external authenticator, and after enabling the 'Allow to generate user tokens' option, the login functions correctly.\r\n\r\nWe basically followed to connect Azure AD: [https://confluence.atlassian.com/jirakb/how-to-configure-saml-authentication-with-azure-active-directory-on-jira-data-center-1082272116.html]","author":"Elliot Koo(구병모)"}]},{"summary":"Problem with attachment screenshots entered during a transition without transition screen having attachment field configured","key":"JRASERVER-77523","url":"https://jira.atlassian.com/browse/JRASERVER-77523","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n*Scenario-1:*\r\n - If an image attachment is entered (either by copy-pasting it or by drag-n-drop) into the comment field during a transition where only comment field is available then this image attachment is not shown properly after saving but only the placeholder is there. Users will get an popup with error message on the screen appears for very short interval and often users might miss this.\r\n{code:java}\r\nAdding attachment is not supported for this screen\r\n{code}\r\n\r\n - However, even the image attachment is clearly visible in comment dialog when changes are made and effect is only on saving the comment (screenshots added).\r\n\r\n - If a transition screen has both (attachment and comment) fields, then it is possible to add attachment into the comment field and it is shown properly.\r\n\r\n*Scenario-2:*\r\n - Attachments option in the comments part (+) icon allows users to only add screenshots/attachments which are already in the request and not external attachments.\r\n\r\n - When no attachments are already added, on clicking (+) icon it disappears.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nYes\r\nh3. Steps to Reproduce\r\n\r\n*Scenario-1:*\r\n # Create a screen without any fields (attachments) and save it (please check following [instructions|https://confluence.atlassian.com/jirakb/how-to-add-a-comment-during-a-workflow-transition-and-make-it-mandatory-779160682.html] for transition screen configuration).\r\n # Choose a workflow transition and associate this screen to it.\r\n # Now perform a transition of the issue and this will pop-up comment screen.\r\n # Try to grab some image from local system using drag and drop option, notice there is an error on top right of screen for a moment.\r\n # However, comment field clearly shows the screenshot. Try to save it and observe the results, it will be only be problematic place-holder thumbnail and attachment doesn't get added.\r\n\r\n*Scenario-2:*\r\n # Make sure to add couple of attachments to the ticket.\r\n # In the same context above for Step-4, perform the transition which should pop-up a comment screen. Now click on (+) icon and observe changes.\r\n # You will only be able to add existing attachments within the ticket and can't fetch from local system or externally.\r\n # Now delete the attachments from the ticket and once again try above step.\r\n # You will not be able to add any attachments and the (+) icon disappears.\r\n\r\nh3. Expected Results\r\n - System should allow the users to add screenshots during transitions without mandating the attachment field to be added to the screens. This will help users to avoid some redundant efforts when working with large set of workflows.\r\n\r\n - System should also users to add external attachments as compared to allowing only attachments within the ticket, otherwise they will be simply duplicates.\r\n\r\nh3. Actual Results\r\n - System doesn't allow adding comments in transitions without attachment field configured in the screens.\r\n\r\n - System doesn't allow users to add any external attachments and if there are no already existing attachments, then (+) icon disappears on clicking. It should at-least give a fair message to users if this is not possible or supported.\r\n\r\nh3. Workaround\r\n\r\nMake sure to add '{*}Attachments{*}' field to the transitions where you would prefer to add attachments and screenshots. Otherwise, system will not support this operation.","createDate":"2024-03-08T13:15:54.000+0000","comments":[{"text":"Similar bug ticket JSWSERVER-20625 \r\n\r\nReproducer using Jira 9.12.1:  [^attach-image-during-transition-error.mov]\r\n\r\n ","author":"Johnny Mon"},{"text":"Same bug in Jira Software 10.3.4","author":"Stein Elsen"}]},{"summary":"Sometimes some agents do not see all expected requests in the customer portal if requests have an issue security level without the Reporter role added","key":"JRASERVER-76927","url":"https://jira.atlassian.com/browse/JRASERVER-76927","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJSM Agents might not see all expected requests when doing a JQL search where they are the reporter if requests have an issue security level without the Reporter role added. This appears to be intermittent and possibly caused by caching issues/automations.\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Create a Service Management project\r\n # Create an issue security scheme and an issue security level.\r\n # Set up an Automation rule to set the security level on issue create\r\n # Add *Service project customer - portal access* to this security level, but do not add any role which would allow the Agent to see the issue in Jira.\r\n # As an Agent, create some requests from the Customer portal\r\n # View the My Requests in the Customer portal\r\n\r\nh3. Expected Results\r\n\r\nAgent should be able to see all requests they created via Customer portal and not see them within Jira search.\r\nh3. Actual Results\r\n\r\nSometimes, these requests are not visible on the My requests/All requests page.\r\n\r\nThere's no error anywhere in the UI or logs, the requests are just not visible but they can be accessed via the direct URL, which indicates that there's no permission issue with at least viewing the request.\r\n\r\nModifying the security levels in any way seems to show the issues temporarily.\r\nh3. Workaround\r\n\r\nAdd Reporter to the security level","createDate":"2023-10-09T13:44:58.000+0000","comments":[{"text":"The workaround of adding the Reporter to the security level isn't viable as we don't want to give them access to issues they shouldn't be able to access as an agent. They should be able to see issues they are a Reporter or Participant on or those with Issue Security, but not otherwise. Issue Security is required to keep confidentiality of issues they shouldn't be able to see.","author":"Todd Thomas"},{"text":"It looks like it’s hard to gather interest or to understand the impact as there are several issues, if fixed, would solve most if not all of these issues. I’d would think linking those, then totaling up all the folks who stated this effects my team, would give you a better representation of the interest in your customer’s desire to see a bug, in your product, fixed. This looks to nearly identical to JSDSERVER-6041. Many bugs I see in this portal have several linked issues, and the issues almost all have one thing in common, age. They are all many years old. \r\n\r\n ","author":"Matthew Gaffney"},{"text":"I can confirm this bug still exists in 9.17.2. Could this be added to the \"Affects Version/s\" field?","author":"Todd Thomas"},{"text":"I can confirm this issue is still present in JSM 10.3.3. Could this version be added to the Affected Versions field?\r\n\r\nWe continue to have no workaround since modifying the security level isn't feasible. Agents in one project can't see their requests in others, so IT staff can't view their requests for Business Operations and vice-versa, which is causing large service fulfillment issues.","author":"Todd Thomas"}]},{"summary":"Interruptions during the Issue creation may leave it unable to transition status","key":"JRASERVER-76790","url":"https://jira.atlassian.com/browse/JRASERVER-76790","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: no, though regularly affecting customers\r\nh3. Steps to Reproduce\r\n # Create an Issue during some excessive load in Jira, like Full GCs, DB connection overload, etc\r\n # Observe the Issue will lack the Status transition buttons\r\n\r\nThis has also been observed when the Issue's created but unable to be reindexed (like JRASERVER-74514).\r\nh3. Expected Results\r\n # The Issue would either fail to be created or be sucessfully created and have the Status transition buttons available\r\n\r\n \r\n\r\n(?) Is it possible to have the os_wfentry.state be initialized with 1 instead of 0?\r\nh3. Actual Results\r\n # The Issue's created (possibly not indexed) and is missing the Status transition buttons\r\n\r\nThe Issue's first created with a os_wfentry.state of 0, _then_ it's updated to 1. This happens outside a DB transaction, so an interruption may lead to the os_wfentry record being left in an invalid state = 0.\r\nh3. Workaround\r\n\r\nWither run the Database Integrity Checker or manually update the Issues with state = 0 to state = 1 on the os_wfentry table, as described in:\r\n * [Workflow transition button missing from the issue view page in Jira server|https://confluence.atlassian.com/pages/viewpage.action?pageId=800304645]\r\n\r\n \r\n----\r\n \r\nThis is impacting customers in a way they have to deal with this right after dealing with the initial degradation or outage that causes the Issues to be created in an invalid state.\r\n\r\nThis also impacts end-users directly and being unable to transition Issues tends to escalate quickly across their companies.","createDate":"2023-12-18T15:08:09.000+0000","comments":[{"text":"We are facing this issue frequently in our Jira datacenter application (Fidelity) and we would like to get this addressed with priority. 200-500+ issues face this issue every month and the workaround via database update cannot be performed frequently and it is not preferred","author":"Vishwanaath Gopalakrishnan"}]},{"summary":"The option to \"Send email\" is currently not adhering to the configured \"Email from\" settings and displaying the username instead of the full name.","key":"JRASERVER-76778","url":"https://jira.atlassian.com/browse/JRASERVER-76778","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n\"Send email\" option is not respecting the \"Email from\" configuration and always sending from username\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Set-up outgoing mail server (in {*}⚙ > System > Outgoing Mail{*})\r\n # Test \"Send email\" option (in {*}⚙ > System > Send email{*})\r\n\r\nh3. Actual results\r\n\r\nEmails are sent using the username in the \"From\" header, instead of the Full name:\r\n!SendEmailFunction_NotCorrect.png|thumbnail!\r\nh3. Expected Results\r\n\r\nSend email option should respect the *Email from* configuration which is configured in Jira in the page *⚙ > System > General Configuration* \r\n - by default, it is set to *${fullname} (Jira)*\r\n\r\nh3. Note\r\n\r\nNote that this issue does not occur with Jira notifications (with batching enabled or not) sent from Jira issue updates (field updates, comments, transitions...). The \"From\" header of Jira notifications is respecting the format {*}${fullname} (Jira){*}.\r\n!Jira_Notifications_CorrectResult.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-12-15T13:42:32.000+0000","comments":[]},{"summary":"Release versions show the Release Date one day behind the date originally set","key":"JRASERVER-76438","url":"https://jira.atlassian.com/browse/JRASERVER-76438","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n\r\n*Scenario 1*\r\n # Install Jira with Microsoft SQL as the database\r\n # Navigate to *Administration » System » General Configuration* and set the System Timezone to *America / Chicago*\r\n # Set your user's timezone to Chicago\r\n # Add a version with a release date to a project.\r\n # Change profile time zone to New York and check on the release to see it is now a day behind \r\n\r\n*Scenario 2*\r\n # Install Jira with PostgreSQL as the database\r\n # Navigate to *Administration » System » General Configuration* and set the System Timezone to *GMT OffSet* and choose \"GMT-7\"\r\n # Add a version with a release date to a project.\r\n # The release date is behind 1 day.\r\n # Changing the user profile to the same as the System Timezone. The release date still behind 1 day. Also, it does not honour the user profile timezone changes.\r\n\r\nh3. Expected Results\r\n\r\nRelease dates do not change when changing profile \r\nh3. Actual Results\r\n\r\nThe date changes to the day prior \r\nh3. Workaround\r\n\r\n*Scenario 1:*\r\n * Set the timezone of every user to match the Jira default \r\n\r\n*Scenario2:*\r\n * Set the *Default user time zone* back to the *System Default timezone* (the same timezone matching with the *jvm.system.timezone* ) via {*}Administration > General Configuration > Edit settings{*}.\r\n(i) You can find the timezone for \"jvm.system.timezone\" via {*}Administration > System Info{*}.","createDate":"2023-10-25T14:41:07.000+0000","comments":[{"text":"It could be related to the way the database returns dates. Or the way Jira treats them. It is reproduced on 9.5 Jira datacenter. I set release date to 12/23/2023, save, go back to release page and it shows 12/22/2023.","author":"Unlimit Jira"},{"text":"This is also affected on v9.12.3, when I try to Release a version its showing a day behind.\r\n\r\nSteps to reproduce:\r\n * Go to Jira project \r\n * Releases\r\n * Add a test version / Edit any existing release.\r\n * Set the release date with Current date on the Test version\r\n * use 3 dots (...) click on Release button, it will pop a screen and in that you will see a Day behind on release date.\r\n\r\n \r\n\r\nThanks,\r\n\r\nPhanidhar","author":"Phani Kumar"},{"text":"Also finding this is affecting Jira Automation. I should be able to use a Smart Value in an Automation Rule to pull one of the dates on a Release and use that date effectively in the Rule.\r\n\r\nHowever, some odd timezone thing is in play. Server and User timezones on our Data Center version are identical (US/Chicago) for the test illustrated below:\r\n\r\n!image-2024-04-10-14-27-07-714.png!\r\n\r\n(thanks so much for not letting me paste a screenshot, as an authenticated user)\r\n\r\nMy test set the \"Release Date\" for a Version to be \"15/Dec/23\" (aka 15-Dec-2023). The following Smart Value results were observed when reading and formatting that value in an Automation Rule:\r\n * issue.fixVersions.first.releaseDate.format(\"yyyy-MM-dd\")\r\n2023-12-14\r\n\r\n * issue.fixVersions.first.releaseDate.fullDateTime\r\nThursday, December 14, 2023 6:00:00 PM CST\r\n\r\nWorkaround for this in Jira Automation:\r\n\r\n{{issue.fixVersions.first.releaseDate{*}.convertToTimeZone(\"UTC\"){*}.fullDateTime}}","author":"Mykenna Cepek"},{"text":"Dear devs, this issue affects my team, please take this into work, thanks in advance!","author":"Kirill Pogrebniak"},{"text":"This affects my team on version 9.12.8","author":"Mithun Parvathaneni"},{"text":"Our teams are encountering this issue, too, and one of the more frustrating parts is that it becomes hard to discern what the real date of the release is when different people see different dates (and even see different dates in different views). \r\n\r\nFor us, one of our users had profile settings set to \"Dublin\" and was seeing release date June 24 in the version configuration but release date June 23 on dashboards. For other users, they saw June 23 in both the version configuration and the dashboard.\r\n\r\nThis is a localization problem and again, makes it difficult for teams to identify what date is accurate without checking everyone's personal time zone settings.","author":"Abby Domanowski"},{"text":"We have team members across time zones, and this issue is impacting our ability to leverage automated deployment tooling, schedule multi-team deployments, and track/troubleshoot production issues due to deployments.  Futher, Jira itself does not seem to track and recognize my time zone consistently at different points in the application.","author":"Monica Skidmore"},{"text":"This is a big deal for us. It is sad to find that this bug is not fixed yet. Our team spread across US and date difference causing the confusion. *+{color:red}East to west US timing is just 3 hours difference but not a day (24 hours) difference. May I know when this can be fixed? {color}+*","author":"ali basha shaik"},{"text":"I wish it would just save the date when I click the button that says \"perform release.\" There are other timestamps in jira (like last updated date). If we did that, then the dynamic date would be fine, because if we really did release at midnight eastern time, the local date in Arizona would be correct even if it was off by a calendar day.\r\n \r\n \r\nAnother option is, just like sprint start dates, let me manipulate the hh:mm so that I can set it on behalf of my team to represent a moment in time.","author":"Crystal Baker"},{"text":"Sadly this has been an issue since at least 2015 and still not resolved. I'm not sure why this is Gathering Impact when it's been happening for a long time now. It was supposedly fixed in [JRASERVER-41646] Releasing a version shows the Release Date one day behind the date originally set - Create and track feature requests for Atlassian products. but apparently not??\r\n\r\nPLEASE FIX THIS! You KNOW it impacts everyone!","author":"Julie Barton"},{"text":"*Solution:* Stop stripping the time from date string. Jira is stripping the time from the ISO 8601 format and treating it as midnight in the Jira default time zone resulting in this bug.\r\n\r\nAn example is an EST time zone default Jira server where other users may be in the CST time zone. Since CST is 1 hour behind EST and Jira strips the time and defaults to midnight in the default time zone, it then results in the previous day at 11PM for CST users.\r\n\r\nI've provided the technical cause and solution. All that has to be done is implementation.\r\n*{color:#FF0000}Please fix immediately.{color}*","author":"Logan Brown"}]},{"summary":"Attempts to index a Lucene field with immense term still fails the issue index","key":"JRASERVER-76392","url":"https://jira.atlassian.com/browse/JRASERVER-76392","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAccording to the fixed bug [JSWSERVER-20133|https://jira.atlassian.com/browse/JSWSERVER-20133], and the [associated developer announcement|https://community.developer.atlassian.com/t/announcement-changes-to-lucene-indexing/31738], fields that exceed the limit of 32766 bytes will be removed before they are committed to Lucene. It appears the intention is to raise an ERROR upon such attempts to warn the plugin developer, but the index should be otherwise unaffected.\r\n\r\nHowever, there is evidence Jira tries to commit the data to Lucene, causing a failure mode.\r\nh5. (1)\r\n\r\nThe large value still makes it's way to the Lucene library:\r\n{code:java}\r\n2023-10-17 02:07:51,592+0000 IssueIndexer:thread-1 WARN admin 127x701x1 tuce66 127.0.0.1 /secure/admin/IndexReIndex!reindex.jspa [c.a.jira.index.AccumulatingResultBuilder] Document contains at least one immense term in field=\"customfield_10300\" (whose UTF8 encoding is longer than the max length 32766), all of which were skipped.  Please correct the analyzer to not produce such terms.  The prefix of the first immense term is: '[88, 95, 116, 99, 114, 100, 95, 119, 115, 100, 95, 112, 101, 114, 105, 109, 101, 116, 101, 114, 95, 115, 99, 97, 95, 118, 51, 32, 104, 97]...', original message: bytes can be at most 32766 in length; got 192093\r\njava.lang.IllegalArgumentException: Document contains at least one immense term in field=\"customfield_10300\" (whose UTF8 encoding is longer than the max length 32766), all of which were skipped.  Please correct the analyzer to not produce such terms.  The prefix of the first immense term is: '[88, 95, 116, 99, 114, 100, 95, 119, 115, 100, 95, 112, 101, 114, 105, 109, 101, 116, 101, 114, 95, 115, 99, 97, 95, 118, 51, 32, 104, 97]...', original message: bytes can be at most 32766 in length; got 192093\r\n\tat org.apache.lucene.index.DefaultIndexingChain$PerField.invert(DefaultIndexingChain.java:796)\r\n\tat org.apache.lucene.index.DefaultIndexingChain.processField(DefaultIndexingChain.java:430)\r\n\tat org.apache.lucene.index.DefaultIndexingChain.processDocument(DefaultIndexingChain.java:392)\r\n\tat org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:240)\r\n\tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:497)\r\n\tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1729)\r\n\tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1464)\r\n\tat com.atlassian.jira.index.MonitoringIndexWriter.addDocument(MonitoringIndexWriter.java:65)\r\n\tat com.atlassian.jira.index.WriterWrapper.addDocuments(WriterWrapper.java:115)\r\n\tat com.atlassian.jira.index.WriterWithStats.addDocuments(WriterWithStats.java:133)\r\n\tat com.atlassian.jira.index.Operations$Create.perform(Operations.java:166)\r\n\tat com.atlassian.jira.index.Operations$Completion.perform(Operations.java:346)\r\n\tat com.atlassian.jira.index.DefaultIndexEngine$FlushPolicy.perform(DefaultIndexEngine.java:86)\r\n\tat com.atlassian.jira.index.DefaultIndexEngine.write(DefaultIndexEngine.java:150)\r\n\tat com.atlassian.jira.index.DefaultIndex.perform(DefaultIndex.java:28)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer$IndexIssueOperation.createResult(DefaultIssueIndexer.java:1078)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer$IndexIssueOperation.createResult(DefaultIssueIndexer.java:1052)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer$EntityOperation.lambda$null$7(DefaultIssueIndexer.java:910)\r\n\tat java.base/java.util.Optional.map(Optional.java:265)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer$EntityOperation.lambda$createResult$8(DefaultIssueIndexer.java:910)\r\n\tat java.base/java.util.HashMap.forEach(HashMap.java:1337)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer$EntityOperation.createResult(DefaultIssueIndexer.java:909)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer$EntityOperation.perform(DefaultIssueIndexer.java:884)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer.lambda$processInnerBatch$6(DefaultIssueIndexer.java:338)\r\n\tat com.atlassian.jira.index.SimpleIndexingStrategy.apply(SimpleIndexingStrategy.java:7)\r\n\tat com.atlassian.jira.index.SimpleIndexingStrategy.apply(SimpleIndexingStrategy.java:5)\r\n\tat com.atlassian.jira.index.MultiThreadedIndexingStrategy$1.call(MultiThreadedIndexingStrategy.java:47)\r\n\tat com.atlassian.jira.index.MultiThreadedIndexingStrategy$1.call(MultiThreadedIndexingStrategy.java:43)\r\n\tat com.atlassian.jira.util.concurrent.BoundedExecutor$2.call(BoundedExecutor.java:68)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.apache.lucene.util.BytesRefHash$MaxBytesLengthExceededException: bytes can be at most 32766 in length; got 192093\r\n\tat org.apache.lucene.util.BytesRefHash.add(BytesRefHash.java:263)\r\n\tat org.apache.lucene.index.TermsHashPerField.add(TermsHashPerField.java:151)\r\n\tat org.apache.lucene.index.DefaultIndexingChain$PerField.invert(DefaultIndexingChain.java:786)\r\n\t... 32 more\r\n{code}\r\nh5. (2)\r\n\r\nIt does result in the failures flowing upward to the calling method:\r\n * The full reindex is marked as failed\r\n ** Although mitigated partially via [JRASERVER-72235|https://jira.atlassian.com/browse/JRASERVER-72235]\r\n * Index recovery \"catch up\" phase is marked as failed and thus triggers a full reindex, see [JRASERVER-76391|https://jira.atlassian.com/browse/JRASERVER-76391]\r\n\r\nh3. Steps to Reproduce\r\n * See replication steps in [JRASERVER-76391|https://jira.atlassian.com/browse/JRASERVER-76391]\r\n\r\nh3. Expected Results\r\n * The message {{A document contained a potential immense term in field customfield_10220_timeline. The field has been removed from the document.}} is logged\r\n * No further errors are logged. The indexing proceeds normally. Possibly - the issue is not marked as failed.\r\n\r\nh3. Actual Results\r\n * org.apache.lucene.util.BytesRefHash$MaxBytesLengthExceededException is raised\r\n * The issue is marked as failed\r\n * The failure flows upward to the parent method (full reindex, index recovery, etc)\r\n\r\nh3. Workaround\r\n - Check the remotelink table to get the entries with length (url)  by executing below mentioned query:\r\n{code:java}\r\nselect length (url), * from remotelink r order by length (url) desc {code}\r\n\r\n - Observe the url length for the top most record. You can match the same number in the error message mentioned in Issue Summary field.\r\n - The data extracted from remotelink table has issueid column.\r\n - Export the issue details in CSV to have backup of the issue.\r\n - Delete the issue from User interface\r\n - Restart the instance and observe if the issue is fixed.","createDate":"2023-10-17T03:28:01.000+0000","comments":[{"text":"Full reindex fails in the current LTS? That sure seems like more than a Low priority to me!\r\n\r\nWould changing the indexer for the custom field in question to None fix this problem temporarily as a workaround?","author":"Matt Doar"}]},{"summary":"Index recovery unhelpfully triggers a full lock reindex if an issue in the index catchup phase fails to reindex","key":"JRASERVER-76391","url":"https://jira.atlassian.com/browse/JRASERVER-76391","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIndex recovery unhelpfully triggers a full lock reindex if an issue in the index catchup phase fails to index. \r\n\r\nFor example, the implementation of [JSWSERVER-20133|https://jira.atlassian.com/browse/JSWSERVER-20133] results in the issue containing the immense value to be marked as failed. \r\n\r\nDuring a full reindex, the reindex will \"complete\" to 100%, despite individual failures. During index recovery during node startup, the catch up process will also sustain individual failures, however, the catch-up process will be deemed failed and the node will then proceed to performing a full lock reindex. \r\n\r\nThis is unhelpful because the node startup will be delayed, potentially for a very long time, and, the full reindex will also fail to index these issues - the underlying problem is not fixed. \r\n\r\nEnterprise Jira instance could take 24 hours or longer to perform full lock reindex. Startup is often a sensitive time for Jira Administrators. While other nodes may be typically online to mitigate the impact, this is not guaranteed, for example, environment failover, environment restore, etc.\r\n\r\nh3. Steps to Reproduce\r\n# Configure a 2 node Jira v9.4.8 cluster. Have 1 node started, the other stopped. \r\n# Add an issue with some sample data\r\n# Perform a scheduled Jira snapshot to create a snapshot in shared_home\r\n# Insert a customfield value over the UTF8 encoding limit of 32766 (we inserted a checklist item via [Checklist for Jira v6.2.5|https://marketplace.atlassian.com/apps/1211562/checklist-for-jira/version-history] to do this)\r\n# Delete Node 2's local index, then start the node\r\n\r\nh3. Expected Results\r\n* Node 2 starts and initiates the index recovery procedure, picking the snapshot in shared_home\r\n* The index catch up phase executes, but the issue with the immense term fails to index. \r\n* An warning is logged for the admin, but the startup continues\r\n\r\nh3. Actual Results\r\n* Node 2 starts and initiates the index recovery procedure, picking the snapshot in shared_home\r\n{code}\r\n[c.a.jira.cluster.DefaultClusterManager] Current node: <NODE_NAME>. Rebuilding local index will be skipped, because replicated index operation is missing necessary data. This is likely to happen after system restore.\r\n2023-10-16 18:01:37,736-0400 main INFO      [c.a.jira.index.DefaultIndexFetcher] [INDEX_FETCHER]  Jira will try to recover the most recent snapshot: <SNAPSHOT>, chosen based on \"last modified\" file property from <N> existing snapshots: <SNAPSHOTS>, timestamp: <TIMESTAMP>). Only snapshots younger than 192 hours are considered usable.\r\n2023-10-16 18:03:26,544-0400 main INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Restoring search indexes from snapshot and catching up with changes - 1% complete... Starting\r\n2023-10-16 18:03:26,734-0400 main INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Restoring search indexes - 30% complete... Restored index backup\r\n{code}\r\n* The index catch up phase executes, but the issue with the immense term fails to index. \r\n{code}\r\n2023-10-16 18:03:27,646-0400 main INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Re-indexing issues updated in the last {1 days, 18 hours, 18 minutes, and 27 seconds}. (Note: it's an intentionally wider range)\r\n2023-10-16 18:04:13,666-0400 IssueIndexer:thread-71 INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Updating index with recent changes - 31% complete... Processing issue changes is 1% complete\r\n...\r\n2023-10-16 18:06:40,136-0400 IssueIndexer:thread-48 ERROR      [c.a.j.issue.index.DocumentScrubber] A document contained a potential immense term in field customfield_12000. The field has been removed from the document.\r\n2023-10-16 18:06:40,136-0400 IssueIndexer:thread-48 ERROR      [c.a.j.issue.index.DocumentScrubber] A document contained a potential immense term in field customfield_12000_item. The field has been removed from the document.\r\n...\r\n2023-10-16 18:06:41,265-0400 IssueIndexer:thread-48 WARN      [c.a.jira.index.AccumulatingResultBuilder] Indexing failed for Issue - '10002'\r\n2023-10-16 18:06:41,265-0400 IssueIndexer:thread-48 WARN      [c.a.jira.index.AccumulatingResultBuilder] Document contains at least one immense term in field=\"customfield_10002_item\" (whose UTF8 encoding is longer than the max length 32766), all of which were skipped.  Please correct the analyzer to not produce such terms.  The prefix of the first immense term is: '[73, 91, 116, 99, 114, 100, 95, 99, 104, 101, 99, 107, 109, 97, 114, 120, 95, 101, 120, 116, 101, 114, 110, 97, 108, 95, 102, 105, 110, 100]...', original message: bytes can be at most 32766 in length; got 68089\r\njava.lang.IllegalArgumentException: Document contains at least one immense term in field=\"customfield_10002_item\" (whose UTF8 encoding is longer than the max length 32766), all of which were skipped.  Please correct the analyzer to not produce such terms.  The prefix of the first immense term is: '[73, 91, 116, 99, 114, 100, 95, 99, 104, 101, 99, 107, 109, 97, 114, 120, 95, 101, 120, 116, 101, 114, 110, 97, 108, 95, 102, 105, 110, 100]...', original message: bytes can be at most 32766 in length; got 68089\r\n\tat org.apache.lucene.index.DefaultIndexingChain$PerField.invert(DefaultIndexingChain.java:796)\r\n2023-10-16 18:06:42,760-0400 main WARN      [c.a.jira.index.AccumulatingResultBuilder] Indexing completed with 1 errors\r\ncom.atlassian.jira.index.IndexingFailureException: Indexing completed with 1 errors\r\n2023-10-16 18:07:11,479-0400 IssueIndexer:thread-57 INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Updating index with recent changes - 79% complete... Processing issue changes is 97% complete\r\n2023-10-16 18:07:16,720-0400 IssueIndexer:thread-14 INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Updating index with recent changes - 80% complete... Processing issue changes is 99% complete\r\n{code}\r\n* The failure is recognised by the snapshot restore process, and a full-lock reindex is commenced:\r\n{code}\r\n2023-10-16 18:07:47,800-0400 main ERROR      [c.a.jira.cluster.DefaultClusterManager] Current node: <NODE_NAME>. Couldn't recover index even though it had been found in shared. Current list of other nodes: [<NODE_LIST>]\r\ncom.atlassian.jira.index.IndexingFailureException: Indexing completed with 1 errors\r\n\tat com.atlassian.jira.index.AccumulatingResultBuilder$CompositeResult.await(AccumulatingResultBuilder.java:151)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer.doIssuesOperationBatchMode(DefaultIssueIndexer.java:263)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer.reindexIssuesBatchMode(DefaultIssueIndexer.java:250)\r\n\tat com.atlassian.jira.issue.index.DefaultIndexManager.lambda$reindexIssuesBatchMode$15(DefaultIndexManager.java:1024)\r\n\tat com.atlassian.jira.util.thread.JiraThreadLocalUtils.lambda$wrap$1(JiraThreadLocalUtils.java:156)\r\n\tat com.atlassian.jira.issue.index.DefaultIndexManager.withReindexLock(DefaultIndexManager.java:423)\r\n\tat com.atlassian.jira.issue.index.DefaultIndexManager.reindexIssuesBatchMode(DefaultIndexManager.java:1024)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat com.atlassian.jira.config.component.SwitchingInvocationHandler.invoke(SwitchingInvocationHandler.java:38)\r\n\tat com.sun.proxy.$Proxy86.reindexIssuesBatchMode(Unknown Source)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.reindexIssueByIds(DefaultIndexRecoveryManager.java:326)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.reindexOutdatedEntities(DefaultIndexRecoveryManager.java:306)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.reindexWithVersionCheckEntitiesUpdatedInTheLast(DefaultIndexRecoveryManager.java:245)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.access$300(DefaultIndexRecoveryManager.java:74)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager$ReplaceIndexRunner.catchUp(DefaultIndexRecoveryManager.java:529)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager$ReplaceIndexRunner.run(DefaultIndexRecoveryManager.java:487)\r\n<SNIP>\r\n\tat com.sun.proxy.$Proxy68.withReindexLock(Unknown Source)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.recoverIndexFromBackup(DefaultIndexRecoveryManager.java:171)\r\n\tat com.atlassian.jira.index.ha.DefaultIndexRecoveryManager.safeRecoverIndexFromBackup(DefaultIndexRecoveryManager.java:138)\r\n\tat com.atlassian.jira.index.DefaultIndexFetcher.recoverIndexFromMostRecentSnapshot(DefaultIndexFetcher.java:108)\r\n\tat com.atlassian.jira.cluster.DefaultClusterManager.pickIndexSnapshotFromSharedHome(DefaultClusterManager.java:428)\r\n\tat com.atlassian.jira.cluster.DefaultClusterManager.checkIndexOnStart(DefaultClusterManager.java:221)\r\n\tat com.atlassian.jira.startup.ClusteringLauncher.clusterSynchronizedCheckIndex(ClusteringLauncher.java:99)\r\n\tat com.atlassian.jira.startup.ClusteringLauncher.start(ClusteringLauncher.java:130)\r\n\tat com.atlassian.jira.startup.DefaultJiraLauncher.postDBActivated(DefaultJiraLauncher.java:166)\r\n\tat com.atlassian.jira.startup.DefaultJiraLauncher.lambda$postDbLaunch$2(DefaultJiraLauncher.java:144)\r\n\tat com.atlassian.jira.config.database.DatabaseConfigurationManagerImpl.doNowOrEnqueue(DatabaseConfigurationManagerImpl.java:307)\r\n\tat com.atlassian.jira.config.database.DatabaseConfigurationManagerImpl.doNowOrWhenDatabaseActivated(DatabaseConfigurationManagerImpl.java:202)\r\n\tat com.atlassian.jira.startup.DefaultJiraLauncher.postDbLaunch(DefaultJiraLauncher.java:135)\r\n<SNIP>\r\n\r\n2023-10-16 18:07:47,801-0400 main INFO      [c.a.jira.cluster.DefaultClusterManager] Current node: <NODE_NAME> Will trigger full foreground reindex. System property com.atlassian.jira.startup.allow.full.reindex is not defined, and it will default to true. You can disable triggering full foreground reindex by setting this property to \"false\".\r\n2023-10-16 18:07:47,801-0400 main INFO      [c.a.jira.cluster.DefaultClusterManager] Current node: <NODE_NAME>. Triggering full-reindex. Current list of other nodes: [<NODE_LIST>]\r\n2023-10-16 18:07:47,857-0400 main INFO      [c.a.jira.cluster.DefaultClusterManager] Current node: <NODE_NAME>. Triggered full-reindex, requestId: 10500. Waiting for reindex to finish...\r\n2023-10-16 18:07:49,992-0400 JiraTaskExecutionThread-1 INFO anonymous     [c.a.j.index.request.DefaultReindexRequestManager] Re-indexing started\r\n2023-10-16 18:07:49,993-0400 JiraTaskExecutionThread-1 INFO anonymous     [c.a.j.util.index.CompositeIndexLifecycleManager] Reindex All starting...\r\n{code}\r\n\r\nh3. Workaround\r\nh4. a. Override functionality\r\nTo prevent an automatic Full Reindex upon a failure to restore an Index Snapshot, this Opt can be set o Jira's startup ([Setting properties and options on startup|https://confluence.atlassian.com/pages/viewpage.action?pageId=938847831]):\r\n{code:none}\r\n-Dcom.atlassian.jira.startup.allow.full.reindex=false\r\n{code}\r\nIf the node can't recover it's own local Indexes up to date, Admins can \"copy Index from another node\" though the UI. Keep in mind a proxy bypass Tomcat connector is needed to access a node wihtout a valid Index, as it'll report unavailable to the Load Balancer ([Bypass a proxy or SSL to test network connectivity for Jira server|https://confluence.atlassian.com/pages/viewpage.action?pageId=827328189]).\r\n\r\nh4. b. Cleanup Index Snapshots\r\nThe cause for the Index Snapshot retrieval can also be investigated, and one of the causes customers have seen is corrupted Index Snapshots on the shared home (disk space failure's usually a cause of this).\r\nAdmins may delete the most recent Index Snapshot if its size is suspiciously lower than the previous Snapshots.\r\nFor example, this issue [JRASERVER-74637|https://jira.atlassian.com/browse/JRASERVER-74637] has lead to disk space depletion and resulted in corrupted Snapshots on he shared home, cascading into _this_ issue [JRASERVER-76391|https://jira.atlassian.com/browse/JRASERVER-76391].\r\n\r\n \r\nFor further understanding on the Jira 9 startup behavior regarding the Index, please refer to:\r\n* [Index startup procedure in Jira 9.4 and later|https://confluence.atlassian.com/pages/viewpage.action?pageId=1217301669]\r\n\r\n","createDate":"2023-10-17T02:44:32.000+0000","comments":[{"text":"This issue also impacting on 9.12.2 LTS. Its very frustrating LTS versions released with these kind issues. When can we can expect fix or work around on this? ","author":"Reddeppa"}]},{"summary":"Raising requests directly on the UI attaches empty support.zip","key":"JRASERVER-75949","url":"https://jira.atlassian.com/browse/JRASERVER-75949","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (yes) \r\n\r\nWhen the customer raises a support request using Jira's UI there is the option to attach a support.zip.\r\n\r\nThis support.zip comes to GSAC empty, we always investigate the case and ask the support.zip if that's a good next step.\r\n\r\nIf this was intentional to avoid us receiving too many unnecessary attachments, this option should be removed, or corrected to actually include the support files.\r\nh3. Steps to Reproduce\r\n # Go to Administration > System > Troubleshooting and support tools > Get help > Contact Technical Support or Report a Bug\r\n # Tick the \"Attach support.zip\" checkbox\r\n\r\nh3. Expected Results\r\n\r\nThe support.zip is created and added to the ticket on our GSAC side.\r\nh3. Actual Results\r\n\r\nThe ticket is created with an \"empty\" support.zip making us start the assistance without application information, sometimes \"burning\" the first response asking for this file.\r\nh4. (i) On the Customization option, it looks like it is actually empty:\r\n\r\n!image-2023-06-29-10-39-33-247.png|width=555,height=341!\r\nh4. Real ticket created using this feature with the actual results:\r\n\r\n!image-2023-06-29-10-41-54-824.png|width=557,height=485!\r\nh3. Workaround\r\n\r\nWe start the investigation based on the user's description, but in the majority of the cases, we just ask for the actual support bundle:\r\n\r\n!image-2023-06-29-10-45-13-501.png|width=549,height=492!\r\n\r\n(i) [GHS-263301|https://getsupport.atlassian.com/browse/GHS-263301]\r\n\r\n ","createDate":"2023-06-29T13:48:16.000+0000","comments":[{"text":"Hello, this issue was fixed in the newest versions of the ATST (1.62.4 and 2.7.0) and will be available in the next release of\r\n * Jira 9.2 for 1.62.4\r\n * Jira 11.0 for 2.7.0\r\n\r\nHowever, it's also available on the Marketplace, so you can update the plugin through it.","author":"Kamil Kowalewski"}]},{"summary":"Batched Email Notifications for Jira Software Projects are not fully translated on Jira DataCenter","key":"JRASERVER-75826","url":"https://jira.atlassian.com/browse/JRASERVER-75826","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBatched Email Notification for Jira Software Projects are not fully translated where the header is still in the English language (e.g. \"There is 1 update\")\r\nh3. Steps to Reproduce\r\n # Verify the Email Notification is working Properly.\r\n # Verify if Settings > Mail > Batching Email Notifications > Is *Enabled*\r\n # Set the Jira Language Under *Settings > General Configuration > Edit Configuration > Internationalization > Default language > Set to Deutsch/Espanol*\r\n # Click *Update* at the bottom of the page.\r\n # Now Add a comment to an existing Issue and try to change the status of the Issue.\r\n # Once done the Notification would triggered based on the batched Email Notifications Settings. The default time is 10 Minutes.\r\n\r\nh3. Expected Results\r\n\r\nEmail Notification recevied should show the results as provided in the below screenshot.\r\nh5. Spanish Language\r\n\r\n!Spanish_Language.png|thumbnail!\r\nh5. German Language\r\n\r\n!German Language.png|thumbnail!\r\nh3. Actual Results\r\n\r\n!Spanish_lang.png|thumbnail! \r\n!German_lang.png|thumbnail!\r\nh3. Workaround\r\n # To modify the file *IssueUpdateBatcher-history.vm*\r\n # Go to Jira <HOME_DIR/data/templates/email-batch/HTML/IssueUpdateBatcher-history.vm\r\n # Remove all the *_1_4_x* from the property names. \r\n\r\n*Before*\r\n{code:java}\r\n#set($updatesHeader = $i18n.getText('issue.update.batch.mail.header.summary.updates_1_4_x', [$fieldCount]))\r\n#set($commentsHeader = $i18n.getText('issue.update.batch.mail.header.summary.comments_1_4_x', [$commentCount]))\r\n#set($worklogsHeader = $i18n.getText('issue.update.batch.mail.header.summary.worklogs_1_4_x', [$worklogGroupsCount]))\r\n<td colspan=\"2\">$i18n.getText('issue.update.batch.mail.header.summary.prefix_1_4_x', [$firstFieldCount, $all])</td>\r\n{code}\r\n*After*\r\n{code:java}\r\n #set($updatesHeader = $i18n.getText('issue.update.batch.mail.header.summary.updates', [$fieldCount]))\r\n #set($commentsHeader = $i18n.getText('issue.update.batch.mail.header.summary.comments', [$commentCount]))\r\n #set($worklogsHeader = $i18n.getText('issue.update.batch.mail.header.summary.worklogs', [$worklogGroupsCount]))\r\n <td colspan=\"2\">$i18n.getText('issue.update.batch.mail.header.summary.prefix', [$firstFieldCount, $all])</td>\r\n{code}\r\n\r\n\r\n{panel:bgColor=#fff3cd}\r\n(i) The above workaround doesn't work on Jira DC version 9.12.x version (tried 9.12.2 & 9.12.7) As one of the System Field 'Component' isn't translated to German, Spanish, French etc.\r\n{panel}\r\n\r\n !screenshot-3.png|thumbnail! \r\n\r\n !screenshot-2.png|thumbnail! \r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\n ","createDate":"2023-05-30T09:29:31.000+0000","comments":[]},{"summary":"Close button for View Workflow popup showing off screen.","key":"JRASERVER-75602","url":"https://jira.atlassian.com/browse/JRASERVER-75602","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen accessing Jira within a VM such as Citrix, RDP, or a VDI. If you click on view workflow from the issue view, it causes the workflow popup to render off centre, with the close button appearing off screen.\r\n\r\nIf you close this popup, and open it a second time, then the workflow popup will draw correctly\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Steps to Reproduce\r\n# Access Jira from within a VM/VDI\r\n# Go to the issue view\r\n# Click View Workflow\r\n# Experience the workflow window being off centre\r\n\r\nh3. Expected Results\r\nWorkflow should render correctly in the middle of the screen.\r\n\r\nh3. Actual Results\r\nWorkflow renders to the right of the screen, with the close button not being visible.\r\n\r\nAdditionally the following error will appear regardless of zoom level\r\n{noformat}\r\nThe workflow designer may not behave correctly at your current browser zoom level, press ⌘ + 0 to reset it.\r\n{noformat}\r\nh3. Workaround\r\nClose the workflow after opening, and then open the view workflow again without refreshing the screen.\r\nIf the size of the windows is still small (wide but “low”) you can use CTRL+ to make the window bigger and the +- signs to the left to size the workflow to make it readable.\r\n\r\n","createDate":"2023-04-27T13:22:00.000+0000","comments":[{"text":"Affect Version 9.4.6 as well.","author":"Cathy Xie"},{"text":"For Jira 9.4.6, Citrix remote connection, simple minimizing of the window works for me (initial zoom: 100%), although after going back with zoom to 100% page layout is even more distorted. Issue seems to be connected with JRASERVER-75680.","author":"Stanisław Białowąs"},{"text":"Affect Version 9.4.9 as well.","author":"Ralf Fehling"},{"text":"I've tried on version 9.4.10, 9.10.1 and 9.11.0, all have this issue.\r\n\r\nWe have quite a lot of users are using Citrix, so in fact this affects us a lot. Please prioritize this, thanks.","author":"Jacky Zhou"},{"text":"Hi,\r\n\r\nThis affects 9.4.7 as well. \r\n\r\nThe workaround works, thank you for that. \r\n\r\nHope it gets prioritised!","author":"Madalina Mutihac"},{"text":"We are having the same issue with Jira 9.12.4 on VMWare Horizon VDIs. Most 'VDI-based' sites are forcibly following security vulnerability news. This means they have to use Jira 9.x's without any choice.\r\nSo, I think this issue should be placed in higher priority.","author":"Elliot Koo(구병모)"},{"text":"Hi! I found that this issue is reproducing on machines with Windows Animation disabled. Enabling Windows Animation as a permanent working fix BUT animation is not desirable on VDI machines or Remote Desktop servers. ","author":"Danila Bystrov"},{"text":"!image-2024-08-02-16-13-43-365.png!","author":"Danila Bystrov"},{"text":"Affect version 9.4.12 as well","author":"Rosaline Wang"},{"text":"Also affects Jira 10.3.X","author":"Maximilian Walz"}]},{"summary":"Mentions and creating comment sometimes not working on standalone issue view pages","key":"JRASERVER-75578","url":"https://jira.atlassian.com/browse/JRASERVER-75578","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn browsers where cache is disabled, users can encounter inoperative mentions and comment creation. \r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n\r\nThe issue can't be consistently reproduced. However, we've been able to reproduce it by doing the following:\r\n# Navigate to an issue view page, or go to *Issues*>*Search for Issues* (detail view)\r\n# Launch the Chrome Dev Tools (right-click > *inspect element*)\r\n# Switch to the *Network* tab and check *disable cache*, select Fast /Good 3G as bandwidth limit (throttling)\r\n# Switch to the *Console* and type *wiki-edit* in filter to catch the error.\r\n# Hard-refresh the page (ctrl [Windows] / cmd [Mac] + shift + r)\r\n# Click the pencil icon next to the description box.\r\n# Repeat steps 4 and 5 until the bug occurs (every time the error is shown in the Console tab).\r\n\r\nh3. Expected Results\r\n\r\nThe rich text editor loads with the existing content and is editable.\r\n\r\nh3. Actual Results\r\n\r\nThe rich text editor opens, but existing content is missing. The text insertion cursor does not appear while hovering over the body. The controls (style, bold, italics, etc.) are greyed out and show a loading icon when hovering.\r\n\r\nThe below exception is thrown in the browser's console:\r\n{noformat}\r\nError: jira/mention/mention missing wiki-edit/api{noformat}\r\n\r\nh3. Workaround\r\n\r\nMake sure that your browser cache is not disabled and bandwidth limited. Refreshing the page should resolve the issue.\r\n\r\nAdditionally, monitor network bandwidth and check if the problem is generated when the speed slows down. ","createDate":"2023-04-26T12:13:03.000+0000","comments":[{"text":"we seem to have the same issue with Jira 9.8.1. Caching is not disabled. It does not happen (or not often) in Safe mode, but when some apps are enabled, it does happen. I cannot pinpoint it to one particular add-on. But every time this happens, it gives the \r\n\r\n{noformat}\r\nError: jira/mention/mention missing wiki-edit/api\r\n{noformat}\r\n\r\nas well as:\r\n{noformat}\r\nUncaught Error: No jira/editor/plugins/mentions/jira-mentions\r\n{noformat}\r\n\r\nWe see this with Editing the Description field and adding comments.","author":"M Hoogenboom"},{"text":"Hi [~m.hoogenboom],\r\n\r\nThanks for sharing your findings and providing feedback. Based on the evidence I reviewed from affected customers, your symptoms match the bug. Upon further review, we discovered the bug resulted from a [race condition|https://en.wikipedia.org/wiki/Race_condition] – which explains why it only occurs intermittently. We updated the _fix version_ field on May 29th to indicate the hotfix was included with Jira Server/DC 9.9.0. If you have any instance-specific questions, feel free to get in touch via a [support request|https://support.atlassian.com/contact/].\r\n\r\nBest,\r\n{color:#0052CC}*Ben*{color} | {color:#42526E}Jira On-Premise Support{color}","author":"Benjamin S"},{"text":"Got that problem with 9.4.14,9.4.15 and 9.4.16\r\n\r\nAfter some investigations (Because it works in safe mode), I can say it's a conflict between the AddOn WorklogPro and Wiki Renderer Macro Plugin (com.atlassian.jira.plugin.system.renderers.wiki.macros). At least, on my site.\r\n\r\nIf i disable WorklogPro or the html module from Wiki Renderer Macro Plugin, everything works fine...\r\n\r\nAlready created a ticket @starware (WorklogPro), they could reproduce it and are still analyzing.","author":"Cenk Morkan"},{"text":"Started to get more reports of this ever since upgrading to 9.14.2. But error for me is slightly different:\r\n{code:java}\r\nUncaught Error: undefined missing jira/mention/mention-element\r\n  at n (batch.js?locale=en:10:1980)\r\n  at batch.js?locale=en:10.2499 {code}","author":"David Yu"},{"text":"Happens on 9.12.4 and 9.12.7.\r\n{code:java}\r\nUncaught Error: undefined missing jira/mention/mention-element {code}\r\nBrowser doesn't matter, users have tried Firefox or Chrome.\r\n\r\nEDIT: Related to Xray in our case. Disabled the plugin and retried which didn't show the error. [https://jira.getxray.app/browse/XRAY-9729]","author":"James Beagrie"},{"text":"In conversations with X-Ray, they suspect it's a bug introduced by Atlassian which interacts with add-on developers. They said they are not the only plugin experiencing this problem. ","author":"David Yu"},{"text":"Dear Customers,\r\n\r\nAfter investigation, we have confirmed that the previously reported issue has been resolved as of version 9.4.6. Tests conducted after the Jira upgrade showed no recurrence of the exception {{{}Error: jira/mention/mention missing wiki-edit/api{}}}.\r\nHowever, similar errors identified post-update appear to be influenced by third-party plugins\r\n\r\nCustomers experiencing related issues should attempt to run Jira in safe mode or disable third-party plugins to verify if the issue persists. If the error ceases, it indicates that the cause is external and related to installed plugins.\r\n\r\nOnce again, we will move this ticket to *closed* with a \"fixed\" resolution.\r\n\r\nHowever, if the issue is reencountered, please open a support ticket for further investigation.\r\n\r\nBest regards,\r\nPatryk Oleksyk\r\nQuality Engineer","author":"Patryk Oleksyk"},{"text":"The issue with @mention problems in Text mode started when we installed XRAY for Jira on 9.4.6 hence this reported issue [https://jira.getxray.app/browse/XRAY-9729] that the vendor has deferred to be an Atlassian issue as they cannot reproduce it in 9.13.x\r\n\r\nFunny thing is, we are tracking another issue on overall page load/render performance related to batch.js and the Assets plugin for those who have Jira Service Management installed. See [https://jira.atlassian.com/browse/JSDSERVER-15225]\r\n\r\nAssets though not use in our environment is installed with JSM and after many reproduction efforts seems to be a large batch.js consumer/abuser. The only way to disable Assets is through REST (curl) and results in a small 10-15m outage while Jira disabled the add-on.\r\n\r\nI did some reproduction efforts before and after disabling Assets with @mentions on text mode and before disable it rarely worked, after it was reproducible, but less often. I think overall this is not any specific application or add-on that is the cause, but an issue with performance in batch.js and the more add-ons that load into their the higher possibility you may encounter this problem with mentions. XRAY and Assets are our biggest offenders in this area.\r\n\r\nI presume Atlassian made some performance tweaks in 9.13 that reduces the recurrence of this issue, not on purpose perhaps, but sometimes release notes do not tell us the full change history under the hood in code optimizations.\r\n\r\nSo for us, reducing the overall size and impact of batch.js improves the performance of @mentions on text mode. Whether this is 3rd part or 1st party add-ons, the difference is real. ","author":"Casey Hinkle"},{"text":"Any chance whatever in 9.13 helps with these issue can be backported to an LTS release? 9.12.x perhaps?","author":"Casey Hinkle"}]},{"summary":"Archived versions showing inconsistent results between basic and advanced search","key":"JRASERVER-74998","url":"https://jira.atlassian.com/browse/JRASERVER-74998","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nFiltering by *fix version* or *affects version* suggests inconsistent results between basic search and advanced search. In basic search, archived versions are not suggested or selectable, but are in advanced search.\r\n\r\nIn Jira <8.0.0, all versions are suggested and selectable. This bug still exists in Jira 9.7.0.\r\n \r\n!versions.png|thumbnail!\r\n\r\n!basic.png|thumbnail!\r\n\r\n!advanced.png|thumbnail!\r\n\r\nh3. Steps to Reproduce\r\n # Create a project and add _Version A_ and _Version B_ under the *versions* tab of {*}project settings{*}.\r\n # Mark _Version A_ as archived.\r\n # Navigate to basic search and try to filter *fix version* or *affected version* to {_}Version A{_}.\r\n\r\nh3. Expected Results\r\n\r\nAll versions, including {_}Version A{_}, appear in the version picker dropdown.\r\nh3. Actual Results\r\n\r\nOnly _Version B_ appears in the *fix version* and *affects version* dropdown.\r\nh3. Workaround\r\n\r\nSwitch to advanced search – first building out the rest of the query in basic search if necessary.","createDate":"2023-03-21T16:17:36.000+0000","comments":[]},{"summary":"Multiple index snapshots can be created concurrently","key":"JRASERVER-74637","url":"https://jira.atlassian.com/browse/JRASERVER-74637","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n\r\nDo either of these\r\n * Start reindexing of two project concurrently\r\n * Start background and project reindex concurrently\r\n * Start project or background reindex so that it finishes at the time a scheduled snapshot is created\r\n * Archive two projects concurrently\r\n * -Start two nodes concurrently when there's no fresh index snapshot in shared home- <-- Not true, because there's a cluster lock preventing that\r\n\r\nIt has been always possible to create two index snapshots concurrently (full reindex + scheduled), but with recent Jira versions we have started creating snapshots more often.\r\nStarting from 9.1.0 we create index snapshots on node start (if a fresh one doesn't exist).\r\nStarting from 9.4.1 we create index snapshots after project reindex and project archive.\r\nh3. Expected Results\r\n\r\nThe minimum number of snapshots is created.\r\nThe snapshot is a backup of a healthy index.\r\nh3. Actual Results\r\n\r\nMultiple snapshots are created concurrently.\r\nEach snapshot can contain only part of the healthy index (in case of two project reindexes on two different nodes).\r\nh3. Workaround\r\n # Only run a second project reindex when the first one finishes.\r\n # Only archive a second project once the index snapshot is created after the first one has been archived (this can only be seen in the logs, search for \"{{{}Done creating index snapshot{}}}\")\r\n # Do not run project and background reindex at the same time.\r\n # Do not run project or background index around the time the scheduled snapshot is created","createDate":"2022-12-21T17:00:42.000+0000","comments":[{"text":"What is the impact of multiple snapshots being created at the same time?","author":"Matt Doar"},{"text":"[~e6a44563da75] ,\r\n\r\nIt depends on the scenario and whether both reindexes happen on the same node or multiple nodes. The most serious consequence can be that the latest snapshot does not contain the most recent index version. For example, if you change project's configuration and reindex this project while another node is running a background reindex, that background reindex might finish after the project reindex finishes. The snapshot from the background reindex will be considered the most recent, even if it does not reflect that project's configuration change.\r\n\r\nAnother, though less serious, consequence is the additional load on the Jira nodes and the shared home. ","author":"Kamil Cichy"},{"text":"I believe this has occured for us a few times in the past. Around 25 projects were archived within a short space of time (30 mins or so).\r\n\r\nWe run 2 nodes running 9.11.0. These are 32GB with 8 cores.\r\n\r\nWhile the issue was happening, you can look at the Clustering page and find a nodes CPU usage at 400-600% but the memory remains the same.\r\n\r\nI looked at the catalina.out and atlassian-jira.log and found at 12pm for example, catalina.out warns about stuck threads. Then atlassian-jira.log at the same time shows the index snapshot service running.\r\n\r\nI then decided to check the index snapshots and found 3, 2 minutes apart:\r\n{code:java}\r\n-rw-r-----. 1 jira jira 3477569197 Feb 26 12:12 IndexSnapshot_18761_240226-121104.tar.sz\r\n-rw-r-----. 1 jira jira 3477956271 Feb 26 12:14 IndexSnapshot_18762_240226-121304.tar.sz\r\n-rw-r-----. 1 jira jira 3476817647 Feb 26 12:16 IndexSnapshot_18763_240226-121504.tar.sz{code}\r\nNot only that, because of the stuck threads on a node, the node becomes unavailable. Then what I think is happening is because the node is stuck, the index snapshot service then kicks off on our second node which also causes stuck threads.\r\n\r\nEssentially this can take a cluster offline unless Jira is restarted.","author":"James Beagrie"},{"text":"Vanguard recently had an outage because we were trying to prepare for Cloud migration and clean up some of our unused and old projects.  I have over 550 projects that need to be archived.   I don't want to have to wait until one index is complete before starting another.  550 project could take me over a month to archive, if someone was closely monitoring it with the logs.  We were down for 4 hours until we could get Jira back up and didn't realize this was a bug or issue.   ","author":"Darlene Neumann"}]},{"summary":"Running an index snapshot backup job whilst the index is being restored, breaks the node's index ","key":"JRASERVER-74524","url":"https://jira.atlassian.com/browse/JRASERVER-74524","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBy default, Jira is set to create a snapshot of indexes daily at 2 AM. However, if this time coincides with when a Lock and Re-index process was just completed in a different node in the cluster, it can break the snapshot task and lead to the instance index entering a deadlocked state, requiring a hard restart of the node index and restoring of a healthy index from a different node. \r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Steps to Reproduce\r\n # Execute a Lock and Re-index task in a node in the data center cluster\r\n # When the reindex completes in the node and a different node (which will run the snapshot backup job) identifies that it has been completed, have the snapshot backup job kick in \r\n\r\n(i) Starting a full reindex while the snapshot job is running also causes this same issue.\r\nh3. Expected Results\r\n\r\nJira prevents the index from being replaced when a new index is available in the cluster, while the snapshot backup job is running.\r\n\r\nh3. Actual Results\r\n\r\nJira allows both tasks to run simultaneously, leading to \"deadlock\" scenario where both tasks fails and corrupt that node's index.\r\n\r\nh4. Timeline\r\n\r\nThe affected node starts creating a backup of its own index:\r\n\r\n{noformat}2022-11-09 01:00:00,433+0100 Caesium-1-1 INFO anonymous    JIRA Index Snapshot Service [c.a.j.index.ha.IndexUtils] Creating index snapshot of type: SNAPPY in local temporary directory: /appl/jira/inst/temp/snapshot1667952000433/IndexSnapshot_2022-Nov-09--0100.tar.sz\r\n2022-11-09 01:00:00,439+0100 Caesium-1-1 INFO anonymous    JIRA Index Snapshot Service [c.a.j.util.compression.ArchiveUtils] Creating archive of type: SNAPPY in path: /appl/jira/inst/temp/snapshot1667952000433/IndexSnapshot_2022-Nov-09--0100.tar.sz\r\n{noformat}\r\n\r\nHowever, a few seconds later the {{DefaultNodeReindexService}} job identifies that a different node in the cluster has just completed a new re-index and that a new index snapshot is available, so it starts restoring that file:\r\n\r\n{noformat}\r\n2022-11-09 01:00:37,542+0100 NodeReindexServiceThread:thread-0 INFO      [c.a.j.index.ha.DefaultNodeReindexService] [INDEX-REPLAY] Re-index after last sync detected: operationName=FULL_REINDEX_END, sourceNodeId=jira-0, indexTime=2022-11-09 01:00:22.723412. Resetting index count and restoring index from backupFilename='IndexSnapshot_16800.tar.sz'\r\n2022-11-09 01:00:37,739+0100 NodeReindexServiceThread:thread-0 INFO      [c.a.j.index.ha.DefaultIndexCopyService] Index restore started. Total 4745089 issues on instance before loading Snapshot file: IndexSnapshot_16800.tar.sz\r\n{noformat}\r\n\r\nSimultaneously we have the index snapshot system backing up files:\r\n\r\n{noformat}\r\n2022-11-09 01:02:37,518+0100 Caesium-1-1 INFO anonymous    JIRA Index Snapshot Service [c.a.j.index.ha.IndexUtils] Progress of creating index snapshot: IndexSnapshot_2022-Nov-09--0100.tar.sz, number of index files processed: 232 ...\r\n2022-11-09 01:03:13,671+0100 Caesium-1-1 INFO anonymous    JIRA Index Snapshot Service [c.a.j.index.ha.IndexUtils] Progress of creating index snapshot: IndexSnapshot_2022-Nov-09--0100.tar.sz, number of index files processed: 250 ...\r\n2022-11-09 01:03:52,192+0100 Caesium-1-1 INFO anonymous    JIRA Index Snapshot Service [c.a.j.index.ha.IndexUtils] Progress of creating index snapshot: IndexSnapshot_2022-Nov-09--0100.tar.sz, number of index files processed: 264 ...\r\n2022-11-09 01:04:38,108+0100 Caesium-1-1 INFO anonymous    JIRA Index Snapshot Service [c.a.j.index.ha.IndexUtils] Progress of creating index snapshot: IndexSnapshot_2022-Nov-09--0100.tar.sz, number of index files processed: 299 ...\r\n{noformat}\r\n\r\nHowever, while the snapshot backup job is still running, the Index Fixer starts replacing the index files with the new index it received from the other node. For this process, it holds the \"stop-the-world\" index lock which will prevent any write to the index until that lock is removed by that task:\r\n\r\n{noformat}\r\n2022-11-09 01:06:00,054+0100 NodeReindexServiceThread:thread-0 INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Restoring index with 4743369 issues\r\n2022-11-09 01:06:00,119+0100 NodeReindexServiceThread:thread-0 INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Restoring search indexes - 1% complete... [INDEX-FIXER] Replacing indexes\r\n2022-11-09 01:06:00,119+0100 NodeReindexServiceThread:thread-0 INFO      [c.a.j.index.ha.DefaultIndexRecoveryManager] [INDEX-FIXER] Starting the index restore process by replacing existing indexes. For this, we're holding the 'stop-the-world' index lock.\r\n{noformat}\r\n\r\nBecause the Index Fixer already removed physical files which the snapshot backup job had already mapped while generating the list of files to backup, the snapshot backup job fails to complete:\r\n\r\n{noformat}\r\n2022-11-09 01:06:01,422+0100 Caesium-1-1 ERROR anonymous    JIRA Index Snapshot Service [c.a.jira.service.ServiceRunner] An error occurred while trying to run service 'JIRA Index Snapshot Service'. java.io.FileNotFoundException: /appl/jira/home/caches/indexesV1/comments/_24jm2_Lucene50_0.tip (No such file or directory)\r\ncom.atlassian.jira.util.RuntimeIOException: java.io.FileNotFoundException: /appl/jira/home/caches/indexesV1/comments/_24jm2_Lucene50_0.tip (No such file or directory)\r\nCaused by: java.io.FileNotFoundException: /appl/jira/home/caches/indexesV1/comments/_24jm2_Lucene50_0.tip (No such file or directory)\r\n{noformat}\r\n\r\nThe index fixer process dies after that point, along with the index snapshot backup job. And finally we have the Index Replay failing as well because it's unable to sync the changes the node has been receiving via DBR, given that it can't delete files from the index folder due to the write lock put in place by the snapshot restore process:\r\n\r\n{noformat}\r\n2022-11-09 01:06:03,169+0100 NodeReindexServiceThread:thread-0 ERROR      [c.a.j.index.ha.DefaultNodeReindexService] [INDEX-REPLAY] Error re-indexing node changes\r\njava.lang.RuntimeException: Failed to update index for ([ReplicatedIndexOperation{indexTime=2022-11-09 01:00:22.723412, id=169485404, nodeId='jira-0', affectedIdToVersion={}, operation=FULL_REINDEX_END, affectedIndex=ALL, entityType=NONE, backupFilename='IndexSnapshot_16800.tar.sz'}, \r\n[...]\r\nCaused by: com.atlassian.jira.util.RuntimeIOException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: /appl/jira/home/caches/indexesV1/issues/write.lock\r\n\tat com.atlassian.jira.index.DefaultIndexEngine.clean(DefaultIndexEngine.java:143)\r\n\tat com.atlassian.jira.index.DefaultManager.deleteIndexDirectory(DefaultManager.java:40)\r\n\tat com.atlassian.jira.issue.index.DefaultIssueIndexer.deleteIndexes(DefaultIssueIndexer.java:425)\r\n{noformat}\r\n\r\nThe node ends up in an unusable state (the <$node-ip>/status endpoint returns {{MAINTENANCE}}) and the index needs to be manually replaced\r\n\r\nh3. Workaround\r\n\r\nDelete the indexes from the node's caches\\indexesV1: directory, then restart Jira to induce a snapshot restore:\r\n * changes\r\n * comments\r\n * entities\r\n * issues\r\n * plugins\r\n * worklogs","createDate":"2022-11-14T15:58:23.000+0000","comments":[]},{"summary":"Enabling asynchronous WebHooks may result in the Web-Hook-Events-Processor queue overflowing with too many UserAttributeStoredEvent and other WebHooks not being triggered as a result","key":"JRASERVER-74492","url":"https://jira.atlassian.com/browse/JRASERVER-74492","type":"Bug","priority":"","description":"h3. Issue Summary\r\n{panel}\r\nh4. *{color:#ff0000}Jira 8.13 notice \uD83D\uDEA8{color}*\r\n\r\nAsynchronous WebHooks have been *enabled by default* on versions:\r\n{code:none}\r\n8.13.21\r\n8.13.22\r\n8.13.23\r\n8.13.24\r\n{code}\r\nIf you were unaware of this, refer to the *Workaround* section.\r\nh4. Asynchronous WebHooks availability\r\n\r\nAsync WebHooks were shipped through JRASERVER-68174 and are fully supported *only* in Jira 8.13, 8.20 and 9.2 onwards following this chart:\r\n{code:none}\r\n8.13.21 – 8.13.24: Enabled by default and not optimally implemented. Upgrade to 8.13.25 or later when possible.\r\n\r\n8.13.25 – 8.13.99*: Fully supported\r\n8.20.12 – 8.20.99*: Fully supported\r\n9.2.0   – 9.99.99*: Fully supported\r\n\r\n* \"hypothetical versions\", meaning it's supported on all future releases of that branch.\r\n{code}\r\nEnabling asynchronous WebHooks makes use of the Web-Hook-Events-Processor queue, with a *default* Thread pool of *10* processors and maximum queue size of {*}200{*}. This is for {*}each node{*}, and a full queue in \"node 1\" doesn't route new events to the idle queue in \"node 2\", for example.\r\n\r\nIn large instances, specially making use of 3rd party SAML/SSO apps, this queue is regularly flooded with too many UserAttributeStoredEvent objects.\r\nWhen the queue reaches it's limit (200 default), it starts *rejecting new events* until it's able to accommodate more. WebHooks listening to events that've been rejected because of full queue won't be triggered.\r\n{panel}\r\nh3. Steps to Reproduce\r\n{panel}\r\n # Setup Jira with SAML/SSO (preferably using a [3rd party app|https://marketplace.atlassian.com/search?hosting=dataCenter&product=jira&query=saml]).\r\n # Configure some 10 WebHooks to listen to all the events available and do not \"Exclude body\"\r\n # Setup a JMeter or other request automation to simulate Issue updates, transitions and comment creations.\r\n\r\nThere's suspicion even REST API requests allowlisted to bypass the SAML/SSO will trigger the UserAttributeStoredEvent and flood the queue given enough load.\r\n\r\nThe default queue and/or Thread pool size can be reduced or the Issues being commented, transitioned or updated be populated with lots of data to delay the processors and help reproduce the queue overflow. _(ref.: [How to find the Issues with most data in Jira|https://confluence.atlassian.com/jirakb/how-to-find-the-issues-with-most-data-in-jira-1168848469.html])_\r\n{panel}\r\nh3. Expected Results\r\n{panel}\r\nJira's able to handle enterprise-level demand out-of-the-box.\r\nOr events that aren't possible for WebHooks to listen to shouldn't be put into the queue to be discarded in sequence.\r\n{panel}\r\nh3. Actual Results\r\n{panel}\r\nRejected events are observed in atlassian-jira.log:\r\n{code:none}\r\n2022-10-31 11:46:48,839-0700 http-nio-8080-exec-68 url: /rest/api/2/issue/JIRA-12345/comment; user: charlie ERROR charlie 000x0000000x0 session00 127.0.0.1 /rest/api/2/issue/JIRA-12345/comment [c.a.event.internal.AsynchronousAbleEventDispatcher] There was an exception thrown trying to dispatch event [com.atlassian.jira.event.comment.CommentCreatedEvent@431012fb] from the invoker [SingleParameterMethodListenerInvoker{method=public void com.atlassian.webhooks.plugin.WebHookEventsProcessor.onEvent(java.lang.Object), listener=com.atlassian.webhooks.plugin.WebHookEventsProcessor@1539bc1f}]\r\njava.lang.RuntimeException: Task com.atlassian.sal.core.executor.ThreadLocalDelegateRunnable@6a201cb8 rejected from java.util.concurrent.ThreadPoolExecutor@490244d8[Running, pool size = 10, active threads = 10, queued tasks = 200, completed tasks = 2246209]. Listener: com.atlassian.webhooks.plugin.WebHookEventsProcessor event: com.atlassian.jira.event.comment.CommentCreatedEvent\r\n{code}\r\nWe can parse the logs to \"group by and count\" the events rejected on that queue with this command (Linux):\r\n{code:bash}\r\negrep \"pool size.*queued tasks.*WebHookEventsProcessor\" $JIRA_HOME/log/atlassian-jira.log* | awk '{print $NF}' | sort | uniq -c | sort -nr | column -tx\r\n{code}\r\nSample output:\r\n{code:java}\r\n2241  com.atlassian.crowd.event.user.UserAttributeStoredEvent\r\n144   com.atlassian.jira.event.issue.IssueEvent\r\n15    com.atlassian.jira.event.comment.CommentCreatedEvent\r\n7     com.atlassian.jira.event.issue.link.IssueLinkCreatedEvent\r\n{code}\r\nWe see a disproportional amount of *rejected* UserAttributeStoredEvent and also other Event types being rejected (probably as consequence of the flood of the first event type).\r\n{panel}\r\nh3. Workaround\r\n{panel}\r\nThe workarounds listed here are mutually exclusive: choose one of them. _(though you can implement both, the Feature Flag takes precedence and the pool and queue size as irrelevant)_\r\n\r\n*(!) Note: The workarounds work for Jira 8.x and 9.x only.*\r\nh4. A. Disabling async WebHooks\r\n\r\nIf you're on Jira Core versions 8.13.21–24 or on other Jira 8.20.x or Jira 9.2.x and have enabled the async WebHooks, you may disable it with the Feature Flag below and *restart Jira* (one node at a time will work):\r\n{code:java}\r\ncom.atlassian.jira.webhookEventsAsyncProcessing.disabled{code}\r\n_(ref.: [How to manage dark features in Jira|https://confluence.atlassian.com/jirakb/how-to-manage-dark-features-in-jira-959286331.html])_\r\n\r\nThis will cause WebHooks to be processed within the same request/Thread that triggered the event and *may increase response times* to end-users or API-clients.\r\n\r\nSee [Best practices on working with WebHooks in Jira|https://confluence.atlassian.com/jirakb/best-practices-on-working-with-webhooks-in-jira-1180143465.html] on how to make best use of WebHooks in Jira.\r\nh4. B. Increasing queue size\r\n\r\nThe Web-Hook-Events-Processor Thread pool and queue size can be adjusted with the following JVM startup parameters (example with their default values):\r\n{code:java}\r\n-Dwebhooks.executor.queue.size=200 -Dwebhooks.executor.thread.pool.size=10\r\n{code}\r\n_(ref.: [Setting properties and options on startup|https://confluence.atlassian.com/adminjiraserver/setting-properties-and-options-on-startup-938847831.html])_\r\n\r\nA restart is required for the new params to work. In Jira Data Center it can be a rolling restart (one node at a time).\r\n{panel}\r\n \r\n----","createDate":"2022-11-03T18:40:51.000+0000","comments":[]},{"summary":"Jira doesn't recognize en_US.utf8 as a supported collation","key":"JRASERVER-74353","url":"https://jira.atlassian.com/browse/JRASERVER-74353","type":"Bug","priority":"","description":"h3. Bug Summary:\r\n\r\nAfter upgrading Jira in environments using the collation '{*}en_US.utf8{*}', an error message is displayed and needs to be manually ignored on each node, if in a clustered environment.\r\nh3. Steps to replicate\r\n # Have a Postgres database with en_US.utf8 collation/cset:\r\n{code:java}\r\nCREATE DATABASE jiradb WITH ENCODING 'UTF-8' LC_COLLATE 'en_US.utf8' LC_CTYPE 'en_US.utf8'TEMPLATE template;\r\n{code}\r\n\r\n # Upgrade Jira to a newer version\r\n # Start the Application\r\n\r\nh3. Expected results\r\n\r\nThe application is started up without any warning.\r\nh3. Actual results\r\n\r\nA warning is displayed that the collation is not supported:\r\n{code:java}\r\nDatabase: Your database is using an unsupported collation\r\nYour postgres72 database is currently using an unsupported collation: en_US.UTF8. You should change this to a supported collation:\r\nC.UTF-8\r\nC\r\nen_US.UTF-8\r\nPOSIX.UTF-8\r\nEnglish_United States.1252\r\nPOSIX\r\n{code}\r\nh3. Notes\r\n\r\nThis occurs because the health check verifies against all {{utf-8}} collations, and does not include {{{}utf8{}}}. {{utf8}} is a supported collation, we are incorrectly reporting this as a failure.\r\nh3. Workaround\r\n\r\nFollow the steps in [Configuring system properties|https://confluence.atlassian.com/doc/configuring-system-properties-168002854.html] and add in the following JVM flag for each node:\r\n{code:java}\r\n-Djira.startup.warnings.disable=true{code}\r\n(i) Please note that all other warnings will be ignored as well.","createDate":"2022-09-30T15:54:52.000+0000","comments":[{"text":"All that needs to be done here is adding \"en_US.UTF8\" to the supportedPostgresCollations constant in the SupportedCollations class...\r\n\r\nIf I may quote Dave Currie from the linked Confluence ticket:\r\n\r\n??Developer for the health check here - I'm actively looking into this case. Just wanted to give an update: {{utf8}} is totally OK, the problem is we string match on {{utf-8}} which is why we're failing. If you're running {{utf8}} (say using the PostgreSQL docker image) you are supported, we're incorrectly reporting otherwise. Sorry about this! We're fixing it up. It's purely a locale issue that got missed.??","author":"Patrick Hobusch"},{"text":"This bug is VERY NASTY for us as automatic setup processes break and manual steps are needed when no people are working. If [~66930fb46250]  is right, the costs to fix this constant are several thousand times cheaper than trying to get around it by planning nightly shifts for people.","author":"Dr. Lutz Wohlrab"}]},{"summary":"Webhook incorrect payload resulting in inconsistent data for custom field","key":"JRASERVER-74312","url":"https://jira.atlassian.com/browse/JRASERVER-74312","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe webhook payload may present incorrect data for custom fields even if the data is correct in the changelog section of the payload.\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Steps to Reproduce\r\n # Create some custom fields for date/number/text.\r\n # Create a webhook with all trigger options marked for issue.\r\n # Trigger the webhook with an existing ticket by editing the custom fields.\r\n # Observe the payload is correct in both the changelog and customfield_<number>.\r\n # Edit the same webhook removing one of the Issue actions (as example the \"worklog changed\").\r\n # Edit the issue once again ticket by editing the custom fields (can be done multiple times for comparison).\r\n # Notice the payload for the customfield_<number> presents incorrect information, but changelog is correct (as images below).\r\n\r\n!WebhookPayloadFailure.png|width=358,height=315!\r\n\r\n!WebhookPayloadFailure2.png|width=418,height=293!\r\nh3. Expected Results\r\n\r\nCorrect data in both changelog and customfield_<number> sections.\r\nh3. Actual Results\r\n\r\nCorrect data in changelog but incorrect in customefield_<number>.\r\nh3. Workaround\r\n\r\nAfter restarting all nodes, it is corrected; however, the same erratic behavior is seen if the webhook is changed once again.","createDate":"2022-09-19T13:19:02.000+0000","comments":[]},{"summary":"Code is displayed when exporting a JQL result to a dashboard","key":"JRASERVER-73915","url":"https://jira.atlassian.com/browse/JRASERVER-73915","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter retrieving the results from a JQL on Jira, it's possible to export these results as a dashboard gadget directly. During the process of saving the gadget to a Dashboard, the \"Filter Name\" field displays a piece of code next to it.\r\n\r\nh3. Steps to Reproduce\r\n# Go to {{Issues > Search for issues}}\r\n# Run a sample JQL\r\n# Click on {{Export > Dashboard charts}}\r\n# Choose \"Filter Results\" under \"Gadgets\", then click on \"Save to Dashboard\"\r\n\r\nh3. Expected Results\r\nJira will display a field named \"Filter Name\" to create the filter that will be used with the gadget\r\n\r\nh3. Actual Results\r\nA \"Filter Name $soyRenderer.render(\"jira.webresources:icon-required\",\"JIRA.Templates.Form.IconRequired.render\", {}\" text is displayed instead:\r\n!gadget.png|thumbnail! \r\n\r\nh3. Workaround\r\nNo workaround required. By defining a filter name and clicking on \"Save\", the gadget is successfully added to a Dashboard with the correct filter name.","createDate":"2022-06-15T12:59:01.000+0000","comments":[{"text":"Also present on Jira Software Core v8.20.10","author":"Ben Robbins"},{"text":"Hi [~9f3282ce7890], will this be backported to the latest LTS?","author":"Ben Robbins"}]},{"summary":"XML Restore Fails if the XML backup has a third party table with binary data","key":"JRASERVER-73887","url":"https://jira.atlassian.com/browse/JRASERVER-73887","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter restoring Jira's XMl backup , some menus do not appear or a functionality is missing (example: missing Service Desk Request types). The missing data is caused by exceptions on restoring the data, where Jira ignores the rest of the data(responsible for the missing functionality) if it encounters problems with importing binary data.\r\nh3. Steps to Reproduce\r\n # Take an XML backup from Jira Software/Service desk having a third party plugin like \"Delegated Project Creator for Jira”. The plugin data is in binary format. The activeobject.xml file will have entries like below.\r\n\r\n<data tableName=\"AO_275653_PROJECT_TEMPLATE\">\r\n\r\n.\r\n\r\n<binary xsi:nil=\"true\"/?\r\n\r\n       2. Restore the XML backup and below Error is observed in the logs\r\n{code:java}\r\nfailed Error importing data: java.lang.IllegalArgumentException: Unsupported field encountered: binary {code}\r\n       3. We can see that although the backup is completed 100 %, but not all the tables are restored. In the reported issue, we observed data for below table was not restored, although the backed up activeobject.xml has data for these table.\r\n{code:java}\r\nAO_54307E_VIEWPORT\r\nAO_54307E_VIEWPORTFORM\r\nAO_54307E_GROUP\r\nAO_54307E_GROUPTOREQUESTTYPE {code}\r\nh3. Expected Results\r\n\r\nThe restore logic should restore data for the core Jira/Service Desk table even if there are errors related to restore of data from third-party plugins\r\nh3. Actual Results\r\n\r\nIf the third-party plugin data is in binary format, below Error is observed and data is not restored in all the table.\r\n{noformat}\r\nfailed Error importing data: java.lang.IllegalArgumentException: Unsupported field encountered: binary  {noformat}\r\nh3. Workaround\r\n\r\nTake native database backup of the source environment and restore it in the destination Environment","createDate":"2022-06-07T09:28:20.000+0000","comments":[{"text":"I would't reply on an XML backup these days. This is just one example of the kind of things that can go wrong. Native DB tool is the way to go","author":"Matt Doar (Adaptavist)"}]},{"summary":"Invalid use of RequestCache by thread: ForkJoinPool.commonPool-worker -> JiraWarmer(s)","key":"JRASERVER-73835","url":"https://jira.atlassian.com/browse/JRASERVER-73835","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n{{DefaultFeatureManager}} uses {{RequestCache}} outside of a context.\r\n\r\nSee [JRASERVER-72963#comment-3059444|https://jira.atlassian.com/browse/JRASERVER-72963?focusedCommentId=3059444&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-3059444] for more details.\r\n\r\n*(i) Note* There is a whole family of \"Invalid use of RequestCache by thread...\" issues, one per thread. [Find the one you need|https://jira.atlassian.com/issues/?jql=summary%20~%20%22%5C%22Invalid%20use%20of%20RequestCache%20by%20thread%5C%22%22] or file a new one.\r\n\r\nh3. Steps to Reproduce\r\n\r\nExact steps are unknown. Start Jira and after some time this error might be logged.\r\nh3. Expected Results\r\n\r\n{{RequestCache}} is used inside a context and no error is logged.\r\nh3. Actual Results\r\n\r\n{{RequestCache}} is used outside of a context, which risks an incorrect cache behaviour.\r\n\r\nThe following error appears in {{atlassian-jira.log}} file:\r\n{noformat}\r\nInvalid use of RequestCache by thread: ForkJoinPool.commonPool-worker.Incorrect usage of JIRA API. You can only create/use: RequestCacheImpl inside a context (request or Jira-Thread-Local). Check: JiraThreadLocalUtil for details. This message will be logged once per thread. This ERROR should be fixed on the caller side (check the stack-trace or thread-name) as it is causing inconsistent data.\r\njava.lang.Throwable\r\n    at com.atlassian.jira.cache.request.RequestCacheRecorderImpl.errorLogOOCThreadUsage(RequestCacheRecorderImpl.java:32)\r\n    at com.atlassian.jira.cache.request.RequestCacheRecorderImpl.recordRequestCacheOOCUsage(RequestCacheRecorderImpl.java:25)\r\n    at com.atlassian.jira.cache.request.RequestCacheImpl.get(RequestCacheImpl.java:93)\r\n    at com.atlassian.jira.config.feature.DefaultFeatureManager.getDarkFeatures(DefaultFeatureManager.java:176)\r\n    at com.atlassian.jira.config.feature.DefaultFeatureManager.isEnabled(DefaultFeatureManager.java:103)\r\n    at com.atlassian.jira.config.feature.DefaultFeatureManager.isEnabled(DefaultFeatureManager.java:130)\r\n    at com.atlassian.jira.template.velocity.VelocityEngineWarmer.run(VelocityEngineWarmer.java:28)\r\n...{noformat}\r\nh3. Workaround\r\n\r\nNo workaround is required. This message will be logged only once for this thread.\r\n\r\nIt is advised not to turn off logging for {{RequestCacheRecorderImpl}} to avoid losing insight into this problem.","createDate":"2022-05-24T22:45:20.000+0000","comments":[{"text":"Any ERROR logged should be treated with high priority as ERRORs are defined as some functionality not working. So an ERROR-free log is what we as Jira System Administrators want.","author":"Fabian Graevenitz"},{"text":"Still get this error on a 9.15.2 DC version:\r\n\r\n{code}\r\nInvalid use of RequestCache by thread: ForkJoinPool.commonPool-worker.Incorrect usage of JIRA API. You can only create/use: RequestCacheImpl inside a context (request or Jira-Thread-Local). Check: JiraThreadLocalUtil for details. This message will be logged once per thread. This ERROR should be fixed on the caller side (check the stack-trace or thread-name) as it is causing inconsistent data.\r\njava.lang.Throwable\r\nat com.atlassian.jira.cache.request.RequestCacheRecorderImpl.errorLogOOCThreadUsage(RequestCacheRecorderImpl.java:32)\r\nat com.atlassian.jira.cache.request.RequestCacheRecorderImpl.recordRequestCacheOOCUsage(RequestCacheRecorderImpl.java:25)\r\nat com.atlassian.jira.cache.request.RequestCacheImpl.get(RequestCacheImpl.java:47)\r\nat com.atlassian.jira.config.feature.DefaultFeatureManager.isFlagEnabledByExternalActivator(DefaultFeatureManager.java:331)\r\nat com.atlassian.jira.config.feature.DefaultFeatureManager.isEnabled(DefaultFeatureManager.java:116)\r\nat jdk.internal.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\nat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\nat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\nat jdk.proxy3/jdk.proxy3.$Proxy99.isEnabled(Unknown Source)\r\nat jdk.internal.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\nat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\nat com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:130)\r\nat jdk.proxy3/jdk.proxy3.$Proxy99.isEnabled(Unknown Source)\r\nat com.atlassian.sal.jira.rdbms.JiraHostConnectionAccessor.execute(JiraHostConnectionAccessor.java:59)\r\nat com.atlassian.sal.core.rdbms.DefaultTransactionalExecutor.execute(DefaultTransactionalExecutor.java:61)\r\nat com.atlassian.pocketknife.internal.querydsl.DatabaseAccessorImpl.execute(DatabaseAccessorImpl.java:67)\r\nat com.atlassian.pocketknife.internal.querydsl.DatabaseAccessorImpl.runInTransaction(DatabaseAccessorImpl.java:43)\r\nat com.atlassian.pocketknife.api.querydsl.DatabaseAccessor.run(DatabaseAccessor.java:201)\r\nat com.atlassian.jira.migration.serverdataextractors.JiraServerStatsReader.calculateNumberOfProjects(JiraServerStatsReader.kt:184)\r\nat com.atlassian.jira.migration.fx3.Fx3ObjectMapperFactory.createFx3UserObject(Fx3ObjectMapperFactory.kt:60)\r\nat com.atlassian.jira.migration.fx3.Fx3PluginClientImpl$1.invoke(Fx3PluginClientImpl.kt:29)\r\nat com.atlassian.jira.migration.fx3.Fx3PluginClientImpl$1.invoke(Fx3PluginClientImpl.kt:26)\r\nat com.atlassian.jira.migration.fx3.Fx3PluginClientImpl.tryGetFx3Client$lambda$1$lambda$0(Fx3PluginClientImpl.kt:96)\r\nat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(Unknown Source)\r\nat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(Unknown Source)\r\nat java.base/java.util.concurrent.ForkJoinTask.doExec(Unknown Source)\r\nat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(Unknown Source)\r\nat java.base/java.util.concurrent.ForkJoinPool.scan(Unknown Source)\r\nat java.base/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)\r\nat java.base/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)\r\n{code}","author":"Christian Schoenert"},{"text":"This does not appear to be fixed and is occurring in Jira 9.12.12","author":"Dave Quarrell"},{"text":"+ DC 9.12.15","author":"Katarina Larsson"},{"text":"Still occurring in Jira DC 10.3.4 Why is this reported as fixed when Atlassian themself are not taking care about initializing their threads correct on there own?\r\n{code:java}\r\n2025-03-31 15:51:02,165+0200 ForkJoinPool.commonPool-worker-1 ERROR      [c.a.j.cache.request.RequestCacheRecorderImpl] Invalid use of RequestCache by thread: ForkJoinPool.commonPool-worker.Incorrect usage of JIRA API. You can only create/use: RequestCacheImpl inside a context (request or Jira-Thread-Local). Check: JiraThreadLocalUtil for details. This message will be logged once per thread. This ERROR should be fixed on the caller side (check the stack-trace or thread-name) as it is causing inconsistent data.\r\njava.lang.Throwable\r\n    at com.atlassian.jira.cache.request.RequestCacheRecorderImpl.errorLogOOCThreadUsage(RequestCacheRecorderImpl.java:32)\r\n    at com.atlassian.jira.cache.request.RequestCacheRecorderImpl.recordRequestCacheOOCUsage(RequestCacheRecorderImpl.java:25)\r\n    at com.atlassian.jira.cache.request.RequestCacheImpl.get(RequestCacheImpl.java:46)\r\n    at com.atlassian.jira.config.feature.DefaultFeatureManager.isFlagEnabledByExternalActivator(DefaultFeatureManager.java:331)\r\n    at com.atlassian.jira.config.feature.DefaultFeatureManager.isEnabled(DefaultFeatureManager.java:116)\r\n    at jdk.internal.reflect.GeneratedMethodAccessor124.invoke(Unknown Source)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n    at com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n    at jdk.proxy3/jdk.proxy3.$Proxy513.isEnabled(Unknown Source)\r\n    at jdk.internal.reflect.GeneratedMethodAccessor124.invoke(Unknown Source)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n    at com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:130)\r\n    at jdk.proxy3/jdk.proxy3.$Proxy513.isEnabled(Unknown Source)\r\n    at com.atlassian.sal.jira.rdbms.JiraHostConnectionAccessor.execute(JiraHostConnectionAccessor.java:59)\r\n    at com.atlassian.sal.core.rdbms.DefaultTransactionalExecutor.execute(DefaultTransactionalExecutor.java:61)\r\n    at com.atlassian.pocketknife.internal.querydsl.DatabaseAccessorImpl.execute(DatabaseAccessorImpl.java:67)\r\n    at com.atlassian.pocketknife.internal.querydsl.DatabaseAccessorImpl.runInTransaction(DatabaseAccessorImpl.java:43)\r\n    at com.atlassian.pocketknife.api.querydsl.DatabaseAccessor.run(DatabaseAccessor.java:201)\r\n    at com.atlassian.jira.migration.serverdataextractors.JiraServerStatsReader.calculateNumberOfProjects(JiraServerStatsReader.kt:184)\r\n    at com.atlassian.jira.migration.fx3.Fx3ObjectMapperFactory.createUserGlobalCustomAttributesMap(Fx3ObjectMapperFactory.kt:67)\r\n    at com.atlassian.jira.migration.fx3.Fx3ObjectMapperFactory.createFx3UserObject(Fx3ObjectMapperFactory.kt:63)\r\n    at com.atlassian.jira.migration.fx3.Fx3PluginClientImpl$1.invoke(Fx3PluginClientImpl.kt:42)\r\n    at com.atlassian.jira.migration.fx3.Fx3PluginClientImpl$1.invoke(Fx3PluginClientImpl.kt:39)\r\n    at com.atlassian.jira.migration.fx3.Fx3PluginClientImpl.tryGetFx3Client$lambda$5$lambda$4(Fx3PluginClientImpl.kt:218)\r\n    at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\r\n    at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)\r\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\r\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n    at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\n {code}","author":"Michael Mohr"}]},{"summary":"Export a date customfield to CSV file will move the date to one day behind","key":"JRASERVER-73771","url":"https://jira.atlassian.com/browse/JRASERVER-73771","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThis issue is related to the the daylight saving time change. It affect only date custom fields \"without time\" of type \"Date Picker\" the Type \"Date Time Picker\" is not affected.\r\nAll date entered after the daylight saving changes (Starting On March 25th and until Nov 30th) are affected. In this period the default time for the custom field will default to 11:00 PM ( one hour behind) instead of 12:00 ) > Jira is displaying the correct date in the UI, but when exporting to CSV the date will show up one day behind :\r\n||Issue key||Issue id||Created||Custom field (Mydatewithouttime)||\r\n||DRA-24||11201||07/Apr/22 4:36 PM||10/Mar/22 12:00 AM||\r\n||DRA-21||11100||07/Apr/22 2:36 PM||06/Apr/22 11:00 PM||\r\n||DRA-25||11202||07/Apr/22 4:38 PM||09/May/22 11:00 PM||\r\n||DRA-26||11203||07/Apr/22 4:39 PM||09/Jun/22 11:00 PM||\r\n||DRA-27||11204||07/Apr/22 4:40 PM||09/Jul/22 11:00 PM||\r\n||DRA-28||11205||07/Apr/22 4:41 PM||09/Aug/22 11:00 PM||\r\n||DRA-22||11101||07/Apr/22 2:47 PM||10/Nov/22 12:00 AM||\r\n||DRA-23||11200||07/Apr/22 4:27 PM||10/Dec/22 12:00 AM||\r\n\r\nh3. Steps to Reproduce\r\n- The issue is reproducible in the following environment:\r\n -- Jira 8.20.1\r\n -- Java 11.0.11 and Java 11.0.14\r\n -- Database: Oracle 19c\r\n -- Jira system time is set to \"Europe/London\" and user profile Time zone is set to \"London\"\r\n- Steps\r\n -- Create a custom date filed of type \"Date Picker\"\r\n -- Create a record and choose a date between March 25 and November 30\r\n -- View the record in Jira UI and notice the date\r\n -- Export to CSV file, the date will be one day behind\r\n\r\nh3. Expected Results\r\n\r\nThe export of the date field to CSV should reflect the same date as in Jira UI\r\nh3. Actual Results\r\n\r\nThe export of the date field to CSV should not show up as one day behind\r\nh3. Workaround\r\n\r\nChange the custom field date filed type from \"Date Picker\" to \"Date Time Picker\" following the steps in this KB:\r\n[How to change date custom field format from date without time to a date with time in Jira via the database|https://confluence.atlassian.com/jirakb/how-to-change-date-custom-field-format-from-date-without-time-to-a-date-with-time-in-jira-via-the-database-1107628122.html]","createDate":"2022-05-04T13:57:41.000+0000","comments":[]},{"summary":"User are not searchable on assignee field when assigned to a shared group (assignee search dropdown does not return any result)","key":"JRASERVER-73406","url":"https://jira.atlassian.com/browse/JRASERVER-73406","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUser are not searchable on assignee field when assigned to a shared group. The issue reproducible on Jira software versions >= 8.19.1.\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n\r\n# Create Group with name \"Shared Group\"\r\n# Add Some users to this group e.g. User1, User2\r\n# Create Check Boxes Custom field \"Shared with\" with value \"Shared Group\"\r\n# Add Assignable User Permission to Group Custom Field \"Shared With\" and remove other assignable user permissions if present.\r\n# Create issue with selected checkbox \"Shared Group\"\r\n# Edit issue and start typing username (User) in the assignee Field\r\n\r\nh3. Expected Results\r\nUser1, User2 are displayed in the suggestions and can be selected as assignee.\r\n\r\nh3. Actual Results\r\nUser1, User2 are not displayed in the suggestions\r\n\r\nh3. Workaround\r\nSet system Property -Dcom.atlassian.jira.use.optimised.user.lookup=false and restart the Jira instance.","createDate":"2022-03-09T09:20:51.000+0000","comments":[{"text":"This is affecting my team on Jira 8.20.8. The workaround resolved our issue.","author":"Brandon Kula"}]},{"summary":"Mail handler edit UI breaks when project key is renamed","key":"JRASERVER-73064","url":"https://jira.atlassian.com/browse/JRASERVER-73064","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a project key is renamed, the mail handler edit UI breaks after we click the first *Next* button - the edit screen vanishes.\r\n!image-2021-11-30-12-47-36-279.png|width=443,height=252!\r\n\r\nWe can see in a HAR file that Jira sends to the UI the configured (old) project key and a list of the available project keys.\r\n\r\nApparently, it doesn't check for old project keys, and when trying to match the one configured in the DB with the ones available, it breaks.\r\n\r\nAlso, Jira doesn't check the mail handler configs to update them on a project key change.\r\nh3. Steps to Reproduce\r\n # Create a project\r\n # Create a mail handler and associate with the project\r\n # Change the project key\r\n # Attempt to edit the mail handler\r\n\r\nh3. Expected Results\r\n\r\nIt works normally.\r\nh3. Actual Results\r\n\r\nThe UI disappears after clicking the Next button.\r\n\r\nNo errors are visible, as the error happens in the UI.\r\nh3. Workaround\r\n\r\nThere are 2 possible solutions:\r\n * Delete the mail handler and recreate it;\r\n(i) Tip: the {{SELECT}} query below gets the mail handler configurations. It might come in handy if/when recreating it.\r\n * Or update the configs in the database directly:\r\n(!) Before starting, take a database backup and perform the procedure in staging first.\r\n ** First identify the entry we need to update:\r\n{code:sql}\r\nSELECT *\r\nFROM propertystring\r\nWHERE \r\nid IN (SELECT id FROM propertyentry WHERE property_key LIKE '%handler%')\r\nAND propertyvalue LIKE '%KEY%';\r\n{code}\r\n(i) Replace *KEY* in the {{WHERE}} clause for the old project key. If in doubt, remove the last line in the query to retrieve all mail handlers.\r\n * Take note of the ID and copy the {{propertyvalue}} we wish to change.\r\n * Update the desired entry:\r\n{code:sql}\r\nUPDATE propertystring\r\nSET propertyvalue = '<edited_config>'\r\nWHERE id = <id_from_query_above>\r\n{code}\r\n * Restart Jira","createDate":"2021-11-30T16:07:41.000+0000","comments":[]},{"summary":"Abruptly stopping node while project reindex is in progress causes inability to reindex Jira","key":"JRASERVER-72055","url":"https://jira.atlassian.com/browse/JRASERVER-72055","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAbruptly stopping node while project reindex is in progress causes inability to reindex Jira. \r\nThis problem is a more specific version of JRASERVER-47045\r\nh3. Steps to Reproduce\r\n # Run a project reindex on node 1\r\n # Abruptly terminate Jira process on node 1\r\n # On node 2, go to Jira settings > System > Indexing page\r\n\r\nh3. Expected Results\r\n\r\nUpon visiting Indexing page on node 2, reindexing operations are available.\r\nh3. Actual Results\r\n\r\nRe-indexing operations are not available. The following message is displayed:\r\n{quote}The 'Lock Jira and rebuild index' option is unavailable while other indexing operations are in progress. See the Jira log for more details.\r\n{quote}\r\n!image-2021-02-03-13-22-49-743.png|thumbnail!\r\nh3. Workaround\r\n * If on Jira 8.5.4, 8.8.0 or higher, the stale task will get automatically removed within 30 minutes, that will self-resolve the problem (/) (see - JRASERVER-66204)\r\n * Otherwise, restart the node that initiated the task, so the stale task gets cleared.\r\n ** if it's hard to understand which node initiated the task, you can do a rolling restart.\r\n * Sometimes the node that initiated the task itself could be removed and a new node could be built in place. It was noticed then that rolling restart did not fix it. Looking at the indexing page where the greyed out option is shown, the logs would point out something as below, where node-172.89.34.555 is the node that has been removed.\r\n\r\n{code:java}\r\n2024-06-04 17:30:05,938+0000 https-jsse-nio-8443-exec-61 url: /secure/admin/IndexAdmin.jspa, /secure/admin/jira/views/indexing.jsp; user: xxxxx INFO xxxx 1050x195x2 1e0pmmt 15.53.110.186 /secure/admin/IndexAdmin.jspa [c.a.j.w.a.admin.index.IndexAdminImpl] foreground re-index option is unavailable because of in-progress index task: TaskDescriptorImpl{taskId=229000, result=null, node=node-172.89.34.555, context=ProjectIndexTaskContext{projectId=39601, projectName='Danger', nodeId='node-172.89.34.555'}} {code}\r\nIn that case utilize the scriptrunner script similar to [JRASERVER-66722|https://jira.atlassian.com/browse/JRASERVER-66722] like below to kill the stale task and remove from the cache in each node, to open it up for re-indexing.\r\n{code:java}\r\nimport com.atlassian.jira.component.ComponentAccessor\r\nimport com.atlassian.jira.task.TaskManagerImpl\r\n \r\ndef TaskManager = ComponentAccessor.getComponent(TaskManagerImpl)\r\nTaskManager.removeTask(xxxxxxx)\r\n {code}","createDate":"2021-02-03T12:39:49.000+0000","comments":[{"text":"Someone should file new suggestion, because in more than 2node cluster, say you reindex big project(100k issues or more) and it takes forever because you didn't realize in big DC instance only *locked reindex* is useful.\r\n\r\nSo you stop one node that is doing reindexing, only to find other node start the same after previous is down and lock was freed, and you end up rolling entire cluster... So half hour later with all nodes restarted you can finally do locked reindex.","author":"Tomas Karas"}]},{"summary":"One or more mail servers use basic authentication warning displayed incorrectly","key":"JRASERVER-71893","url":"https://jira.atlassian.com/browse/JRASERVER-71893","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOne or more mail servers use basic authentication warning displayed incorrectly\r\n\r\nh3. Steps to Reproduce\r\n\r\n # Configure all incoming mail servers in *⚙ > System > Incoming Mail* to use the Oauth 2.0 authentication method\r\n # Configure the outgoing mail server in *⚙ > System > Outgoing Mail* to use the basic authentication method\r\n\r\nh3. Actual Results\r\n\r\nThe incoming mail server page displays a warning that says:\r\n{quote}One or more mail servers use basic authentication. This method is planned to be deprecated by Microsoft and Google. Update the authentication method to OAuth 2.0 for Jira to create issues based on received mail. Learn more\r\n{quote}\r\n!Screenshot 2020-12-08 at 4.38.50 PM.png|thumbnail!\r\nh3. Expected Results\r\n\r\nThe incoming mail server configuration page shouldn't show the warnings as all incoming mailboxes are using OAuth2 authentication.\r\n\r\nh3. Note about this bug\r\n\r\nThe reason why this bug is occurring is because it incorrectly checks the authentication method of all mail servers configured in the Jira application (whether it's an incoming mail server or outgoing mail server), instead of only checking the incoming mail servers.\r\n \r\nh3. Workaround\r\n\r\nThis is just a harmless message that can be ignored if all Jira Incoming Mail Servers are already using Oauth 2.0.","createDate":"2020-12-08T11:07:16.000+0000","comments":[{"text":"Can confirm this is also happening in 8.16.0","author":"Andrei Ghenoiu"},{"text":"This is still an issue in Jira 8.20.7 server.","author":"IT Infrastructure"},{"text":"This is still a bug in 8.22.2 DataCenter - is there some way to clear the notification or modify the flag within the database?","author":"Austin Hardy"},{"text":"This is affecting Jira 8.20.8 as well.","author":"Mike Surerus"},{"text":"Still see it in 9.1.0.","author":"Stephen Reece"},{"text":"This is affecting Jira 8.22.4 as well.","author":"vpass"},{"text":"This is also affecting Jira 9.4.22","author":"Guido Scollo"}]},{"summary":"Batching notifications tables can lead to high CPU usage on MSSQL and cause Batched Notifications to be sent with a long delay","key":"JRASERVER-71350","url":"https://jira.atlassian.com/browse/JRASERVER-71350","type":"Bug","priority":"","description":"h4. Problem\r\n\r\nBatched notifications execute periodical tasks (every 14 days) to clean up old events from the {{AO_733371_EVENT}} and {{AO_733371_EVENT_RECIPIENT}} tables. However, on unknown circumstances, this leads to extremely slow queries on the database if using Microsoft SQL Server. This issue seems to happen more often on older MSSQL versions such as 2012, 2014, 2016, but it was also reported with the version 2019.\r\n\r\nThe issue seems to be related to JRASERVER-65168 where it was described that single column indexes used by Jira might lead to this problem. Even though that specific bug is resolved, it wasn't created multi-column indexes for the batched notifications tables.\r\n\r\n(i) The same problem can cause delays in batched notifications delivery.\r\n\r\nExample query:\r\n{code:java}\r\nselect \"AO_733371_EVENT\".\"ID\", \"AO_733371_EVENT\".\"EVENT_TYPE\", \"AO_733371_EVENT\".\"USER_KEY\", \"AO_733371_EVENT\".\"ACTION\", \r\n\"AO_733371_EVENT\".\"ACTION_ID\", \"AO_733371_EVENT\".\"EVENT_BUNDLE_ID\", \"AO_733371_EVENT\".\"CREATED\" \r\nfrom \"jiraschema\".\"AO_733371_EVENT\" \"AO_733371_EVENT\" \r\n\r\nwhere exists (\r\n\tselect \"AO_733371_EVENT_RECIPIENT\".\"ID\" \r\n\tfrom \"jiraschema\".\"AO_733371_EVENT_RECIPIENT\" \"AO_733371_EVENT_RECIPIENT\" \r\n\twhere \"AO_733371_EVENT_RECIPIENT\".\"EVENT_ID\" = \"AO_733371_EVENT\".\"ID\" and \"AO_733371_EVENT_RECIPIENT\".\"STATUS\" = 'NEW'\r\n\tand \"AO_733371_EVENT_RECIPIENT\".\"CONSUMER_NAME\" = 'mailMentionEventConsumer'\r\n\tand \"AO_733371_EVENT_RECIPIENT\".\"SEND_DATE\" <= '2020-04-29 06:14:41') \r\nand (\"AO_733371_EVENT\".\"EVENT_TYPE\" \r\n\tin (92638,92593,92594,92594,92595,92596,92597,92599,92599,92600)) \r\nand \"AO_733371_EVENT\".\"ID\" >= 85125\r\norder by \"AO_733371_EVENT\".\"ID\" asc offset @P24 rows fetch next @P25 rows only\r\n{code}\r\nh4. Steps to Reproduce\r\n # Set up Batched Notifications (enabled by default on Jira 8.0)\r\n # Have a large number of email notifications occurring daily\r\n # Monitor the database CPU usage with graphs\r\n\r\nh4. Expected Results\r\n - The cleanup tasks occur without affecting the database performance, as it does on other DBMSs such as Postgres.\r\n - The Jira Batched Notifications are sent in a timely manner (based on the frequency setting)\r\n\r\nh4. Actual Results\r\n - The cleanup tasks take several hours to complete, with the CPU spiking to 100% usage during that period. General slowness is experienced on Jira due to this.\r\n - *The Jira Batched Notifications are sent with hours of delay*\r\n\r\nh4. Note\r\n\r\nWhen analyzing thread dumps, we should see 2 Caesium threads running batched notification jobs:\r\n - Thread 1\r\n{code:java}\r\n\"Caesium-1-2\" #276 daemon prio=5 os_prio=0 tid=0x00007feae318d000 nid=0x85f0 runnable [0x00007fe7c2578000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat com.microsoft.sqlserver.jdbc.TDSChannel.read(IOBuffer.java:2023)\r\n\tat com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:6418)\r\n\t- locked <0x00007ff035c7c3d8> (a com.microsoft.sqlserver.jdbc.TDSReader)\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:7579)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:590)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:522)\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7194)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2930)\r\n\t- locked <0x00007feccf08a6e8> (a java.lang.Object)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:248)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:223)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:444)\r\n...\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.lambda$searchEvents$10(BatchNotificationJob.java:266)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob$$Lambda$7455/1356348673.apply(Unknown Source)\r\n\tat com.atlassian.jira.plugins.inform.performance.MeasurementWorkerFactory$1.measure(MeasurementWorkerFactory.java:39)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.searchEvents(BatchNotificationJob.java:264)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.lambda$notifyUsers$1(BatchNotificationJob.java:112)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob$$Lambda$7454/2336314.apply(Unknown Source)\r\n\tat com.atlassian.jira.plugins.inform.performance.MeasurementWorkerFactory$1.measure(MeasurementWorkerFactory.java:39)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.notifyUsers(BatchNotificationJob.java:109)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.lambda$runJob$0(BatchNotificationJob.java:86)\r\n...\r\n\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService.executeQueuedJob(CaesiumSchedulerService.java:382)\r\n\tat com.atlassian.scheduler.caesium.impl.CaesiumSchedulerService$$Lambda$2167/528009948.accept(Unknown Source)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeJob(SchedulerQueueWorker.java:66)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeNextJob(SchedulerQueueWorker.java:60)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.run(SchedulerQueueWorker.java:35)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\t{code}\r\n\r\n - Thread 2:\r\n{code:java}\r\n\"Caesium-1-1\" #275 daemon prio=5 os_prio=0 tid=0x00007feae318c800 nid=0x85ef runnable [0x00007fe7c48a1000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat com.microsoft.sqlserver.jdbc.TDSChannel.read(IOBuffer.java:2023)\r\n\tat com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:6418)\r\n\t- locked <0x00007ff476800db8> (a com.microsoft.sqlserver.jdbc.TDSReader)\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:7579)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:590)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:522)\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7194)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2930)\r\n\t- locked <0x00007feec8026738> (a java.lang.Object)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:248)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:223)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:444)\r\n\tat org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:83)\r\n\tat org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:83)\r\n\tat com.atlassian.jira.ofbiz.sql.PreparedStatementWrapper.executeQuery(PreparedStatementWrapper.java:42)\r\n\tat com.atlassian.jira.diagnostic.connection.DiagnosticPreparedStatement.lambda$executeQuery$5(DiagnosticPreparedStatement.java:59)\r\n...\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.lambda$searchEvents$10(BatchNotificationJob.java:266)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob$$Lambda$7455/1356348673.apply(Unknown Source)\r\n\tat com.atlassian.jira.plugins.inform.performance.MeasurementWorkerFactory$1.measure(MeasurementWorkerFactory.java:39)\r\n...\r\n\tat com.atlassian.jira.plugins.inform.performance.MeasurementWorkerFactory$1.measure(MeasurementWorkerFactory.java:39)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.BatchNotificationJob.runJob(BatchNotificationJob.java:84)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.ConditionalJobRunner.runJob(ConditionalJobRunner.java:33)\r\n\tat com.atlassian.jira.plugins.inform.batching.cron.ConditionalJobRunner.runJob(ConditionalJobRunner.java:33\r\n...\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.executeNextJob(SchedulerQueueWorker.java:60)\r\n\tat com.atlassian.scheduler.caesium.impl.SchedulerQueueWorker.run(SchedulerQueueWorker.java:35)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n{code}\r\n\r\nWhen analyzing long running queries on the DB side, we should see long queries that look like this:\r\n{code:java}\r\nselect \"AO_733371_EVENT\".\"ID\", \"AO_733371_EVENT\".\"EVENT_TYPE\", \"AO_733371_EVENT\".\"USER_KEY\", \"AO_733371_EVENT\".\"ACTION\", \"AO_733371_EVENT\".\"ACTION_ID\", \"AO_733371_EVENT\".\"EVENT_BUNDLE_ID\", \"AO_733371_EVENT\".\"CREATED\" from \"dbo\".\"AO_733371_EVENT\" \"AO_733371_EVENT\" where exists (select \"AO_733371_EVENT_RECIPIENT\".\"ID\" from \"dbo\".\"AO_733371_EVENT_RECIPIENT\" \"AO_733371_EVENT_RECIPIENT\" where \"AO_733371_EVENT_RECIPIENT\".\"EVENT_ID\" = \"AO_733371_EVENT\".\"ID\" and \"AO_733371_EVENT_RECIPIENT\".\"STATUS\" = @P0 and \"AO_733371_EVENT_RECIPIENT\".\"CONSUMER_NAME\" = @P1 and \"AO_733371_EVENT_RECIPIENT\".\"SEND_DATE\" <= @P2) and (\"AO_733371_EVENT\".\"EVENT_TYPE\" in (@P3, @P4, @P5, @P6, @P7, @P8, @P9, @P10, @P11, @P12, @P13, @P14, @P15, @P16, @P17, @P18, @P19, @P20, @P21, @P22, @P23, @P24, @P25, @P26, @P27)) and \"AO_733371_EVENT\".\"ID\" >= @P28 order by \"AO_733371_EVENT\".\"ID\" asc offset @P29 rows fetch next @P30 rows only\r\n{code}\r\nh4. Workaround\r\n\r\nNo confirmed workaround available.\r\n # Users that have upgrade to newer MSSQL versions (such as 2017) noticed that the occurrence of the problem is smaller.\r\n # If you're using newer MSSQL versions and experiencing this problem, verify the compatibility mode set to this database. If it was upgraded from previous MSSQL versions, it might be set to mode 120/110, and there was improved query execution on MSSQL 2017 as can be verified on [this Microsoft document|https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-database-transact-sql-compatibility-level?view=sql-server-2017#differences-between-compatibility-level-120-and-level-130]","createDate":"2020-07-23T14:26:30.000+0000","comments":[{"text":"This issue affects the operation of our Jira instance on MS SQL 2014","author":"MegaFon Team"},{"text":"This affect us as well ion Jira 8.10.1 with MSSQL 2017","author":"Hamdy Atakora"},{"text":"Julien Rey has attached the following jar file: jira-inform-backdoor-plugin-1.3.6-1.jar\r\n\r\nWhat is it good for? I was not able to find a related jar on my Jira installation, nor was I able to find related information on the Internet.","author":"Benjamin W."},{"text":"Hi [~benjamin.wolber], please get in touch with our support team so we can help you in the usage of this plugin if you're facing this bug.","author":"Rodrigo Baldasso"},{"text":"Thanks Rodrigo! I have done that and have a received a very fast and structured answer on the relevance and usage of the file.\r\n\r\nFor everybody our there a quick summary: having this app, you can decrease the retention period how long events are kept in the AO_733371_EVENT. (default is 14 days) \r\nThis leads to much less entries in the AO_733371_EVENT, which will hopefully have effects on performance.\r\n\r\nWe now have decreased it - will keep you posted on results in january when business went back to normal. ","author":"Benjamin W."},{"text":"This is drastically affecting us too(second comment)","author":"Hamdy Atakora"},{"text":"[~hatakora]\r\n\r\nSorry to hear that you are also impacted by this issue.\r\nCan you please raise a support ticket via the link https://support.atlassian.com/ ? We will be happy to assist you.","author":"Julien Rey"},{"text":"i already have one raised \r\n # GHS-213073","author":"Hamdy Atakora"},{"text":"Thanks [~hatakora] . Good to see that you are already getting assistance.","author":"Julien Rey"},{"text":"We met as well, \r\n4mln events, 100mln event parameters, ","author":"Gonchik Tsymzhitov"},{"text":"{panel:title=Atlassian Update – 26 May 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nHi everyone,\r\n\r\nThank you for taking the time to file and comment on this issue. Just wanted to update that our engineers are still working on the issue.\r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that may impact your work.\r\n\r\n{panel}","author":"Roman Kolosovskiy"},{"text":"Are there any news to this? ","author":"Kathi"},{"text":"I would recommend a  self-healing measure to abort long running DB SQL queries locking the batch notification tables (AO_733371_EVENT and AO_733371_EVENT_RECIPIENT) at the DB side, after a certain time period (timeout) rather than running it indefinitely. A lock timeout occurs when a transaction, waiting for a resource lock, waits long enough to have surpassed the wait time value specified by the lock timeout database configuration parameter","author":"AbhistDixit"},{"text":"please add 9.4.7 as affects version","author":"Bhupesh Nagda"},{"text":"It will be nice to see that request as fixed:) ","author":"Gonchik Tsymzhitov"},{"text":"Hi Team,\r\n\r\n \r\n\r\nOur 25,000 user base instance is affected with this bug, the workarounds are also not working. Please prioritize the ticket and provide and a solution asap.\r\n\r\n \r\n\r\nThanks","author":"VIMAL RAJ"},{"text":"Hi,\r\n(+) Please add 8.20.8 as affects version, and please fix it asap.","author":"Xing Guo"},{"text":"Version 9.12.7 has this issue as well.","author":"ASC"},{"text":"We'd really, really, really, really like to use batched notifications. Please fix this. ","author":"Steven Behnke"}]},{"summary":"Blank Clustering page because of old Hipchat classes in the pluginstate table","key":"JRASERVER-70711","url":"https://jira.atlassian.com/browse/JRASERVER-70711","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nStarting in Jira 8.6 there's a new Cluster monitoring page available to Jira system administrators gathers real-time data such as node ID, address, uptime (since the last restart), load and memory. The page displays the information for active nodes in your cluster, so whenever a node is down it disappears from the list. \r\n\r\nHowever, when there are two old Hipchat classes in the {{pluginstate}} table, the Clustering page does not work as expected. There are no errors reported in the backend, but in the frontend, you can see a Javascript error in the browser Developer tools:\r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\n{code}\r\nUncaught Error: acm/app/models/node-collection missing ajs\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n # Install Jira Data Center 8.6.0 or higher \r\n # Add the two classes below to your {{pluginstate}} table\r\n||pluginkey|pluginenabled||\r\n|com.atlassian.plugins.base-hipchat-integration-plugin| false|\r\n|com.atlassian.plugins.base-hipchat-integration-plugin-api|false|\r\n # Restart Jira\r\n # Try accessing the Clustering page\r\n\r\nh3. Expected Results\r\n\r\nThe Clustering page works regardless of old Hipchat classes in the database.\r\n\r\nh3. Actual Results\r\n\r\nThe Clustering page breaks when those classes are present, what is common on installations that are being upgraded from old Jira versions.\r\n\r\nh3. Workaround\r\n\r\nDelete the old classes with the SQL commands below and restart JIRA:\r\n\r\n{code}\r\ndelete from pluginstate where pluginkey = 'com.atlassian.plugins.base-hipchat-integration-plugin';\r\ndelete from pluginstate where pluginkey = 'com.atlassian.plugins.base-hipchat-integration-plugin-api';\r\ndelete from pluginstate where pluginkey = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin';\r\n{code}\r\n\r\n (i) be sure to add the appropriate schema to the table name, if you're using databases such as SQL Server or Oracle.","createDate":"2020-02-26T18:20:57.000+0000","comments":[{"text":"Thanks [~rbaldasso] for gathering whole information and creating the issue. I'll take a look and try to sort it out.","author":"Hossein Amiriparian"},{"text":"We encountered this again when upgrading our dev from 9.5.1 to 9.8 and 9.8.1. Strange. I just disabled the hipchat stuff since we don't use it.","author":"Richard Minick"},{"text":"Hi Team, this is also affecting us.\r\n\r\nClustering tab is not loading correctly.","author":"Ioannis Mouskountakis"},{"text":"Hello team,\r\n\r\nit would be great to have it soon.\r\n\r\nWe are facing major issues.\r\n\r\nBest regards,\r\n\r\nAlexandros Patsogiannis.","author":"Alexandros Patsogiannis"},{"text":"Hello Team,\r\n\r\nNew update, this morning the customer portal UI broke, we needed to re-enable the HipChat plugin in order to fix the issue, which in turn lead to the previous problem, the clustering tab and other internal Jira pages are not loading. \r\n\r\nAll information have been included in this ticket.\r\n\r\nPlease fix this asap, this should not be happening.","author":"Ioannis Mouskountakis"}]},{"summary":"Jira have outgoing connections even though disabled Analytics","key":"JRASERVER-70361","url":"https://jira.atlassian.com/browse/JRASERVER-70361","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira have outgoing http connections even though disabled Analytics\r\nh3. Steps to Reproduce\r\n # _Jira Administration > System > Analytics_ Disabled analytics\r\n # Restart Jira and see outgoing connection through forward proxy or [debug outgoing connections|https://confluence.atlassian.com/jirakb/how-to-enable-debug-logging-for-outgoing-http-connections-in-jira-952073102.html]\r\n{code:java}\r\n172.20.0.5 - proxyuser [05/Dec/2019:05:13:11 +0000] \"CONNECT btf-analytics.s3.dualstack.us-east-1.amazonaws.com:443 HTTP/1.1\" 200 - \"-\" \"Apache-HttpClient/4.5.5 (Java/1.8.0_232)\"\r\n...\r\n172.20.0.5 - proxyuser [05/Dec/2019:06:13:14 +0000] \"CONNECT server-notifications.atlassian.com:443 HTTP/1.1\" 200 - \"-\" \"Apache-HttpClient/4.5.5 (Java/1.8.0_232)\"\r\n172.20.0.5 - proxyuser [05/Dec/2019:06:13:14 +0000] \"CONNECT server-notifications.atlassian.com:443 HTTP/1.1\" 200 - \"-\" \"Apache-HttpClient/4.5.5 (Java/1.8.0_232)\"\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThere is no outgoing connection related analytics if it's disabled.\r\nh3. Actual Results\r\n\r\n \r\n - Every 6 hours, Jira sent request to {{server-notifications.atlassian.com}} to get latest news from atlassian.\r\n{code:java}\r\n172.20.0.5 - proxyuser [05/Dec/2019:06:13:14 +0000] \"CONNECT server-notifications.atlassian.com:443 HTTP/1.1\" 200 - \"-\" \"Apache-HttpClient/4.5.5 (Java/1.8.0_232)\"\r\n172.20.0.5 - proxyuser [05/Dec/2019:06:13:14 +0000] \"CONNECT server-notifications.atlassian.com:443 HTTP/1.1\" 200 - \"-\" \"Apache-HttpClient/4.5.5 (Java/1.8.0_232)\"\r\n{code}\r\n{code:java|title=clusteredjob table}\r\nid     job_id                                       job_runner_key                               sched_type  interval_millis  first_run      cron_expression  time_zone  next_run       version  parameters  \r\n-----  -------------------------------------------  -------------------------------------------  ----------  ---------------  -------------  ---------------  ---------  -------------  -------  ----------  \r\n18514  com.atlassian.whisper.plugin.fetch.FetchJob  com.atlassian.whisper.plugin.fetch.FetchJob  I           21600000         1575514489169  (null)           (null)     1575536715200  2        (null)      \r\n{code}\r\n\r\n - Jira sent request to {{btf-analytics.s3.dualstack.us-east-1.amazonaws.com}} when start Jira application to get hash code that is used for analysis\r\n{code:java}\r\n172.20.0.5 - proxyuser [05/Dec/2019:05:13:11 +0000] \"CONNECT btf-analytics.s3.dualstack.us-east-1.amazonaws.com:443 HTTP/1.1\" 200 - \"-\" \"Apache-HttpClient/4.5.5 (Java/1.8.0_232)\"\r\n{code}\r\n\r\n * In another scenario for Jira 10.3.2 when Analytics is DISABLED and OUTGOING connectivity is restricted, Analytics spams atlassian-jira.log with 1000’s of lines when Jira issue is accessed.\r\n{code:java}\r\n2025-02-04 07:20:23,260+0000 analyticsEventProcessor:thread-1 ERROR someusername     [c.a.a.client.pipeline.DefaultAnalyticsPipeline] Failed to send analytics event com.atlassian.analytics.api.events.MauEvent@d987dbec\r\ncom.atlassian.cache.CacheException: io.atlassian.util.concurrent.LazyReference$InitializationException: software.amazon\r\n.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Connect to btf-analytics.s3.dualstack.us-eas\r\nt-1.amazonaws.com:443 [btf-analytics.s3.dualstack.us-east-1.amazonaws.com/XX.XX.XX.XX, btf-analytics.s3.dualstack.us-\r\neast-1.amazonaws.com/XX.XX.XX.XX, btf-analytics.s3.dualstack.us-east-1.amazonaws.com/XX.XX.XX.XX, btf-analytics.s3.\r\ndualstack.us-east-1.amazonaws.com/XX.XX.XX.XX, btf-analytics.s3.dualstack.us-east-1.amazonaws.com/XX.XX.XX.XX, btf\r\n-analytics.s3.dualstack.us-east-1.amazonaws.com/XX.XX.XX.XX, btf-analytics.s3.dualstack.us-east-1.amazonaws.com/XX.XX.XX.XX, btf-analytics.s3.dualstack.us-east-1.amazonaws.com/XX.XX.XX.XX,..... failed: Connect timed out\r\n        at com.atlassian.cache.ehcache.DelegatingCache.get(DelegatingCache.java:114)\r\n        at com.atlassian.cache.impl.metrics.InstrumentedCache.get(InstrumentedCache.java:72)\r\n        at com.atlassian.jira.cache.stats.CacheWithStats.get(CacheWithStats.java:46)\r\n        at com.atlassian.analytics.client.pipeline.serialize.properties.extractors.mau.MauService.hashEmailPropertyForM\r\nauEvent(MauService.java:48)\r\n        at com.atlassian.analytics.client.pipeline.serialize.properties.extractors.mau.MauAwarePropertyExtractor.getEve\r\nntPropertiesWithHashedEmail(MauAwarePropertyExtractor.java:20)\r\n-----\r\n----- {code}\r\n\r\nh3. Workaround\r\n\r\nDisable {{Analytics Client Plugin}} and {{Atlassian Notifications Plugin}} from _Jira Administration > Add-ons > Manage add-ons > System add-ons_\r\n\r\n(!) Please *DO NOT* disable Analytics Client Plugin if you have Jira Service Management installed. It will disable service desk reports plugin immediately.\r\n(!) Having the Analytics app disabled *might affect* jira Start up.","createDate":"2019-12-05T05:41:13.000+0000","comments":[{"text":"To suppress communication with server-notifications.atlassian.com, add -Datlassian.darkfeature.jira.whisper.disabled=true to JVM argument or .properties.","author":"zhangyoufu"},{"text":"with our installation '{{Analytics Client Plugin}}' is disabled but i can't find '{{Notifications Plugin}}'.\r\n\r\nWhere is that to find ?\r\n\r\nCan i add the above JVM argument to 'JVM_SUPPORT_RECOMMENDED_ARGS=\"\"' in the file setenv.sh or where do i have to add it ?","author":"Beat Muench"},{"text":"The AnalyticsEventProcessor thread is active and using CPU cycles too even when Analytics is disabled.","author":"David Yu"},{"text":"This really needs to be a thing.   Your customers have general security policies where they cannot have applications reporting out to random web destinations that they know nothing about.   This is ridiculous that the disable toggle wasn't the first user story that you implemented for this 'feature'","author":"Daniel Holmes"},{"text":"I agree with [~c840f115d1f9] - this is not toy town - some of us run real businesses with Compliance requirements that *do not* allow *any* data exfiltration and that we can't trust Atlassian to not do stupid things like this would be laughable if it weren't so serious.","author":"Nicholas Bailey"},{"text":"+1","author":"Yash"},{"text":"This issue needs to be fixed immediately. If users don't have an internet connection, despite analytics being disabled in the Jira instance, the system is still attempting to send the analytics report, which results in errors in the logs.\r\n\r\nHowever, if there is an internet connection and analytics is disabled in the Jira instance, attempting to send the analytics report won’t generate any errors, but the report will still be sent without honoring the settings. Why is this happening?\r\n\r\nThis is a serious data security concern, as the setting is not being honored, and data is still being sent externally.\r\n\r\n*It's affected on Jira DC v10.3.2* ","author":"Babu R"},{"text":"It's affected on Jira DC v10.4.0 too ","author":"Zac"},{"text":"This is completely filling my logs. Within 1.5 hrs I have 46k entries. Please provide some resolution.","author":"Eric Collins"}]},{"summary":"NPE when doing Sub-Tasks \"Bulk Operation\"","key":"JRASERVER-67632","url":"https://jira.atlassian.com/browse/JRASERVER-67632","type":"Bug","priority":"","description":"h3. Summary:\r\nIt appears that if we try to do a \"Bulk Operation\" to sub-tasks when accessing its Parent ticket, NPE will be shown after selecting the sub-tasks and click next.\r\n\r\nh3. Steps to Reproduce:\r\n# Log in to JIRA.\r\n# Access a ticket.\r\n# Create two sub-tasks with the \"More\" button.\r\n# Make sure that there is no other string on the URL after the issue key like \"<JIRA Base URL>/browse/KAN-1\" \r\n# At the \"Sub-Tasks\" option, click the Triple Dot and select \"Bulk Operation\"\r\n# Select the two sub-tasks and proceed to click next.\r\n\r\nh3. Expected Result:\r\nThe option of what kind of operation to be done will be listed.\r\n\r\nh3. Actual Result:\r\nThis appears instead:\r\n !screenshot-1.png|thumbnail!\r\nWith log snippet:\r\n{noformat}\r\n2018-07-23 14:31:59,422 http-nio-8017-exec-17 ERROR      [c.a.j.web.servlet.InternalServerErrorServlet] {errorId=84e3922f-f45a-48c7-abc1-031ad6c45706, interpretedMsg=, cause=java.lang.NullPointerException, stacktrace=java.lang.NullPointerException\r\n    \tat com.atlassian.jira.web.action.issue.bulkedit.BulkEdit1.lambda$getQuery$0(BulkEdit1.java:229) [classes/:?]\r\n    \tat java.util.Optional.orElseGet(Optional.java:267) [?:1.8.0_60]\r\n    \tat com.atlassian.jira.web.action.issue.bulkedit.BulkEdit1.getQuery(BulkEdit1.java:229) [classes/:?]\r\n    \tat com.atlassian.jira.web.action.issue.bulkedit.BulkEdit1.doValidation(BulkEdit1.java:106) [classes/:?]\r\n    \tat webwork.action.ActionSupport.validate(ActionSupport.java:391) [webwork-1.4-atlassian-30.jar:?]\r\n{noformat}\r\n\r\nh3. Workaround:\r\nAccessing the ticket through a filter or by searching the parent ticket from the issue navigator first seems able to make the operation works.","createDate":"2018-07-23T07:47:52.000+0000","comments":[{"text":"*{color:#FF0000}This problem seen in Jira 7.2.13{color}*","author":"S Stack"},{"text":"Still seen in Jira 8.2.2\r\n\r\nMaybe interesting:\r\n * Happens on Edge Browser. On the other hand, Chrome and IE11 work fine.\r\n * Happens only when *all* sub-task are selected before clicking on next.\r\n\r\nWe use plugin Adaptavist Scriptrunner for Jira, Version 5.5.7.1-jira8, which _might_ be of importance.","author":"Axel Joester"},{"text":"We also have this type of issue Jira 8.13.\r\n\r\nWe also use Adaptvist scriptrunner 6.13","author":"Eric Maynard"},{"text":"We are using Jira 8.12.1 and one of our user encounter the same issue with Chrome 89.0.4389.69 .\r\nIssue resolve by upgrading Chrome to latest version.","author":"Sam Tan"},{"text":"We use Jira 8.5.3 . Some users cannot use the bulk operation in subtasks under parent task.  ","author":"kemal"}]},{"summary":"Jira automated backup might cause OutOfMemoryError due to large dataset","key":"JRASERVER-67211","url":"https://jira.atlassian.com/browse/JRASERVER-67211","type":"Bug","priority":"","description":"h3. Summary\r\nJira automated backup might cause OutOfMemoryError (OOM) due to large dataset generated during export.\r\n\r\n{panel:title=Note| borderStyle=dashed| borderColor=#3C78B5| titleBGColor=#3C78B5| bgColor=#E7F4FA}\r\n(!) For production use or large JIRA application installations, it is strongly recommended that you use native database-specific tools instead of the XML backup service. XML backups are not guaranteed to be consistent, as the database may be updated during the backup process. Inconsistent backups are created successfully without any warnings or error messages, but fail during the restore process. Database-native tools offer a much more consistent and reliable means of storing data.\r\n{panel}\r\n\r\nh3. Steps to Reproduce\r\n# Run Backup service and export data into xml.\r\n\r\nh3. Expected Results\r\nSystem is stable\r\n\r\nh3. Actual Results\r\nJira has memory pressure which causes poor performance or leads to *OutOfMemoryError*. \r\nThe below exception is thrown in the atlassian-jira.log file:\r\n{noformat}\r\n2018-04-17 01:02:10,461 Caesium-1-4 ERROR anonymous    Backup Service [c.a.j.bc.dataimport.DefaultExportService] Error during Active Objects Backup\r\ncom.atlassian.activeobjects.spi.ActiveObjectsImportExportException: There was an error during import/export with <unknown plugin>:\r\n        at com.atlassian.activeobjects.backup.ImportExportErrorServiceImpl.newImportExportSqlException(ImportExportErrorServiceImpl.java:26)\r\n        at com.atlassian.dbexporter.jdbc.JdbcUtils.withNoAutoCommit(JdbcUtils.java:57)\r\n        at com.atlassian.dbexporter.exporter.DataExporter$1.call(DataExporter.java:52)\r\n        at com.atlassian.dbexporter.exporter.DataExporter$1.call(DataExporter.java:49)\r\n        at com.atlassian.dbexporter.jdbc.JdbcUtils.withConnection(JdbcUtils.java:28)\r\n        at com.atlassian.dbexporter.exporter.DataExporter.export(DataExporter.java:49)\r\n        at com.atlassian.dbexporter.DbExporter.exportData(DbExporter.java:49)\r\n        at com.atlassian.activeobjects.backup.ActiveObjectsBackup.save(ActiveObjectsBackup.java:110)\r\n        at com.atlassian.jira.bc.dataimport.DefaultExportService.exportActiveObjects(DefaultExportService.java:184)\r\n...\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3512)\r\n        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3459)\r\n{noformat}\r\n \r\nh3. Notes\r\n* See related KB: [OutOfMemory Error or Poor Performance due to XML Backup|https://confluence.atlassian.com/jirakb/outofmemory-error-or-poor-performance-due-to-xml-backup-213057694.html]\r\n\r\nh3.Workaround\r\nDelete *Backup service*, see docs: [Automating JIRA application backups|https://confluence.atlassian.com/adminjiraserver/automating-jira-application-backups-938847675.html]","createDate":"2018-04-26T10:00:34.000+0000","comments":[{"text":"Native DB backups are not replacement for xmlbackup and it will not provide functionality to restore a project.\r\n\r\nAtlassian recommends Jira Datacenter for large instances and this issue impacts data center as well.\r\n\r\nif Atlassian can publish at what stage xmlbackup will not work based on no.of issues/projects , we can be educated on limitations of Jira. It may give a guidance one when to use multiple Jira systems instead of single large system or decide on the appropriate usecase.\r\n\r\n \r\n\r\n ","author":"Murty Chitti"},{"text":"How is a DB backup not a replacement for an XML backup?\r\n\r\nWe did an XML backup a couple of years ago. Uncompressed the entity.xml file was 50GB which is hard to work with. An uncompressed DB backup is 100GB now. Either way the files are big, but XML backups are not even transactional I think","author":"Matt Doar"},{"text":"{panel:title=Atlassian Update – 31 May 2023 |borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\nDear Customers,\r\nThank you for taking the time to file and comment on this issue. We realize it still occurs and impacts your organization. We are now working on multiple customer requests and on new features, so we have to postpone our resolution of this issue. We’ve decided to move this issue to our long-term backlog.\r\n \r\nThe workaround for this bug is as follows:\r\nDelete Backup service, see docs: [Automating JIRA application backups|https://confluence.atlassian.com/adminjiraserver/automating-jira-application-backups-938847675.html]\r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\nGrzegorz Kulinski\r\nJira DC developer\r\n{panel}","author":"Grzegorz Kuliński"},{"text":"Seems like it affects 9.12.4 as well. We have faced this issue multiple times now. Planning to turn off the Jira xml backups.","author":"Aman Singh"}]},{"summary":"Redirect to Crowd when a user have his password expired","key":"JRASERVER-66444","url":"https://jira.atlassian.com/browse/JRASERVER-66444","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen they expire and users attempt to log in to Confluence or Jira they are not redirected to the Crowd Console.\r\n\r\nIt also appears that users are not able to reset their expired passwords but have to use the \"Forgot Password\" link. \r\n\r\nA problem with this is some users do not have access to their email with crowd working since it uses Crowd for authentication.\r\n\r\nh3. Steps to reproduce:\r\n# Have Jira configured to a Crowd user directory\r\n# Connect to crowd with admin privileges\r\n# Set the attribute {{requiresPasswordChange}} to {{true}} for a test user ( Example, usertest )\r\n# Synchronize Jira with Crowd\r\n# Connect to Jira as usertest\r\n\r\nh3. Expected Results\r\nUser should be able to change his password from Jira.\r\n\r\nh3. Actual results\r\n# Unable to login. The following message is displayed : \"Sorry, your username and/or password are incorrect. Please try again\"\r\n# usertest need to change their password from Crowd\r\n\r\n\r\nh3. Workaround\r\nAsk you Crowd administrator to update the password at Crowd side.\r\n_OR_\r\nSet the attribute {{requiresPasswordChange}} to {{true}} and then ask the user to access the following Crowd URL to change the password:\r\nhttp://CROWD_URL/console/changeexpiredpassword.action\r\n !image.png|thumbnail! ","createDate":"2017-12-06T19:08:11.000+0000","comments":[{"text":"Hello - adding onto here some background from [https://getsupport.atlassian.com/servicedesk/customer/portal/20/GHS-101574]\r\n\r\nI was trying to get users to change their passwords and used \"requiresPasswordChange\" = true. However, everytime I did this, no one was able to log on. No one is also able to change their password. The only way for any user in my company to change their password for all Atlassian products is for me to change it myself on Crowd. \r\n\r\nFeels pretty insecure to me if I'm the only who can change passwords, and I know everyone's password. Let alone they have to type it to me in some sort of insecure format like a chat program or email.","author":"Henryk Tunguz-Zawislak"},{"text":"Any update on when this will be looked at?\r\n\r\nIt's quite insecure all password change requests to have to go through me, and sticks our users in an uncomfortable spot where they're not the only one who knows their password. It's a glaring security hole and there's nothing at the moment I can do to prevent that. Compromised usage of my account could in turn, affect all our users.","author":"Henryk Tunguz-Zawislak"},{"text":"[~henryk1] we do have another workaround to be applied on this case.\r\nYou can set the flag at the Crowd side to force the password change and then ask your user to navigate to the following URL to change the password: http://CROWD_URL/console/changeexpiredpassword.action\r\n(i) Don't forget to replace the \"CROWD_URL\" above by your Crowd URL","author":"Deyves"},{"text":"Hi @dsenger  (@<you're name> doesn't seem to work...)\r\n\r\n \r\n\r\nWhich flag exactly needs to be set? I'm not sure.\r\n\r\nI tried to set \"requiresPasswordChange\" to true and then direct my user to [https://crowd|https://crowd/].<my organization>.com/crowd/console/changeexpiredpassword.action and [https://crowd|https://crowd/].<my organization>.com/console/changeexpiredpassword.action but they got 404's and then a nullpointerexception.\r\n\r\nSo....this didn't work, how to make this workaround work?","author":"Henryk Tunguz-Zawislak"},{"text":"there any update on this? I continue to get password reset requests, and have to embarassingly explain why this software is broken with no workaround (the above does not work for me)","author":"Henryk Tunguz-Zawislak"}]},{"summary":"Loading PDF when accessing via IIS with ARR","key":"JRASERVER-66227","url":"https://jira.atlassian.com/browse/JRASERVER-66227","type":"Bug","priority":"","description":"h3. Summary\r\nSome random PDFs cannot be loaded in JIRA when accessing it via IIS proxy with ARR.\r\n\r\nh3. Environment\r\nWindows OS with IIS proxy\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Setup an IIS proxy with ARR plugin in JIRA following [Integrating JIRA applications with IIS using ARR|https://confluence.atlassian.com/jirakb/integrating-jira-applications-with-iis-using-arr-313467089.html]\r\n# Access JIRA with proxy and upload PDF files\r\n# Click on the PDF file\r\n\r\nh3. Expected Behaviour\r\nPDF will be correctly displayed\r\n\r\nh3. Actual Result\r\nIt loads infinitely and throws 502 Bad Gateway Error\r\n\r\nh3. Note \r\nThe PDF is correctly displayed when bypassing the proxy\r\n\r\nh3. Workarounds\r\n* By [~jconroy]:  {quote}ARR proxy has a default chunk size of 256k.  It will download, cache and rechunk the file before it gets sent to the client. ARR also uses a response buffer with a 256k threshold.  In my analysis I've found ARR is not able to detect when the last chunk has been received (best guess is pdf-viewer is using a method not supported by ARR).  When ARR receives the httpresponse close, anything left in the response buffer is dropped and causes a 502.3 error.\r\n\r\nResolution:\r\n\r\nDisabling Disk Cache on the proxy server will complete resolve the issue.  Additionally I recommend setting the response buffer threshold to 0 and setting the proxy keep-alive timeout from 30 to 180 seconds.  Although not required to fix this issue, the response buffer is know to cause issues with real-time bidirectional techniques such as SignalR, and the 30 second keep-alive can cause too frequent disconnects with other applications.{quote}\r\n* Increasing the keep-alive time seems to help in some cases.","createDate":"2017-10-30T08:29:24.000+0000","comments":[{"text":"We are experiencing the same issue. A fix or work-around (aside from telling the user to just click the download button) is very important to us. \r\n\r\nI would request the priority of this at least be adjusted upward. It's more than \"Low\" priority for us.\r\n\r\nAdditional information from our experience:\r\n * While the PDF viewer fails, the user can still use the download link.\r\n * The error appears to not occur when the PDF is smaller than some threshold (possibly 64K?)\r\n * Firefox seems to suffer from the problem far less often than other browsers (unconfirmed)\r\n * Watching F12 developer tools, it appears the problem is somehow related to partial document requests (headers include a \"range\" value). Note the Content-Range header in the second screenshot provided by the OP. With smaller PDFs, these partial requests don't occur and everything seems to work correctly.","author":"Aaron Craven"},{"text":"Hi,\r\n\r\nWe'd also love this to be uppsed slightly, this is rather annoying when trying to find the exact PDF needed (since we can't rename attachments....).\r\n\r\nThanks for your consideration.","author":"Michael Barton"},{"text":"Still an issue in v.7.9.1","author":"Aaron Craven"},{"text":"Hi, I have the same problem with Jira 7.9.0 using IIS reverse proxy.\r\n\r\nPlease verify this problem with major priority and not only with Low priority.\r\n\r\nThank you.\r\n\r\n ","author":"rodrigo.palazzolli"},{"text":"Please fix this, this is a royal pain.","author":"Michael Barton"},{"text":"Hi all.  I was having the same issue as above and was able to identify the root cause and a have a fix.\r\n\r\nSummary:\r\n\r\nBoth the jira-fileviewer-plugin and IIS ARR proxy utilize a chunked file transfer-encoding.  The is intended to improve performance by multi-threading the download of a single file by breaking into pieces and reassembling at the client.\r\n\r\nAaron, you are correct with your guess of a  64k threshold, 64k is the default chunk size in the jira-fileviewer-plugin, smaller files will not get chunked.\r\n\r\nARR proxy has a default chunk size of 256k.  It will download, cache and rechunk the file before it gets sent to the client. ARR also uses a response buffer with a 256k threshold.  In my analysis I've found ARR is not able to detect when the last chunk has been received (best guess is pdf-viewer is using a method not supported by ARR).  When ARR receives the httpresponse close, anything left in the response buffer is dropped and causes a 502.3 error.\r\n\r\nResolution:\r\n\r\nDisabling Disk Cache on the proxy server will complete resolve the issue.  Additionally I recommend setting the response buffer threshold to 0 and setting the proxy keep-alive timeout from 30 to 180 seconds.  Although not required to fix this issue, the response buffer is know to cause issues with real-time bidirectional techniques such as SignalR, and the 30 second keep-alive can cause too frequent disconnects with other applications.\r\n\r\n ","author":"James Conroy"},{"text":"UPDATE:\r\n\r\n \r\n\r\nJust an update to my last comment.  Please verify that you don't have a CORS issue first.  If you do, make user you have a fully qualified domain name in your URL rewrite rules.  Any cross origin scripting issues will need to be resolved before my above recommendation will help.\r\n\r\n \r\n\r\nRegards\r\n\r\nJim","author":"James Conroy"},{"text":"This last comment is for the Jira developers.\r\n\r\nI haven't done a deep dive into the pdf-viewer code so this may not be the issue, but make sure that it is properly sending a zero-length chunk to signal the end of the transmission. ","author":"James Conroy"},{"text":"James, thank you very much for your comment. We actually had disk caching disabled already, so that apparently did not apply to our situation. However, We located the buffer threshold and keep-alive settings and modified them as you recommended. In our case, keep-alive was set to 120, but we upped it to 180. I don't recall the buffer threshold setting, but it was non-zero (255, maybe?).\r\n\r\nAfter making those changes, our problem was (mostly) solved. Larger PDFs do seem to load properly in our test environments, and we hope to roll this out to our production environments soon.\r\n\r\nThat said, we still notice that in most cases, these documents load slowly (sometimes painfully so). Watching developer tools in Chrome, I see some of the chunked requests take a lot longer than others to complete (20 seconds or so). I would attach a screenshot showing what I see, but I apparently cannot add attachments to this issue.\r\n\r\nIn any case, works-slowly is a huge improvement over doesn't-work-at-all, and I very much appreciate your help and suggestions. Thank you!","author":"Aaron Craven"}]},{"summary":"/status returns Maintenance instead of Running when nodes are not in Maintenance mode and the Database is configured with an unsupported collation","key":"JRASERVER-65708","url":"https://jira.atlassian.com/browse/JRASERVER-65708","type":"Bug","priority":"","description":"h3. +Summary+\r\n\r\n/status request to JIRA Data Center returns \"MAINTENANCE\" instead of \"RUNNING\" when the node is actually Running and not in Maintenance mode.\r\n\r\n!/images/icons/emoticons/information.png|width=16,height=16!  This affects JIRA Server as well.\r\nh3. Note\r\n\r\nNote that this bug is known to usually occur when the Database is configured with an unsupported collation\r\nh3. +Environment+\r\n * JIRA 7.4.x (Server, Data Center)\r\n\r\nh3. +Steps to Reproduce+\r\n # Startup a JDC node running JIRA 7.4.x\r\n # Log in the node and ensure the node is running well (to avoid {-}JRASERVER-59503{-})\r\n # Access the URL <node-address>/status\r\n\r\nh3. +Expected Results+\r\n\r\nThis will return the following JSON object\r\n{code:javascript}\r\n{\"state\":\"RUNNING\"}\r\n{code}\r\nh3. +Actual Results+\r\n\r\nThis returns\r\n{code:javascript}\r\n{\"state\":\"MAINTENANCE\"}\r\n{code}\r\nand stays that way forever.\r\n\r\n(!) Manually performing a re-index doesn't help. Once the re-index completes, the state is still Maintenance.\r\nh3. Workaround and notes\r\n\r\nPlease check Jira does not contain any startup warnings. This can be done by accessing\r\n<Jira BASE URL>/secure/errors.jsp\r\n\r\nQuite common case the issue occurs when Jira's database is using an unsupported collation. See an example below.\r\n\r\n!Screen Shot 2017-12-19 at 10.21.52.png|thumbnail!\r\n\r\nIf that is the case, you can follow the instructions to fix that on your instance [https://confluence.atlassian.com/jirakb/health-check-database-collation-790955315.html]\r\n\r\nIf you decide to utilize MySQL's {{utf8mb4_bin}} collation in Jira versions 7.6 or 7.13 the following automation script can be used to acknowledge the database collation warning:\r\n{code:java}\r\nfunction clear_maintenance_mode_for_db_collation {\r\n    maint_check=$( curl -s localhost:7101/status | grep -c \"MAINTENANCE\" | cat )\r\n    if [  \"${maint_check}\" -gt 0 ]; then\r\n        collation_check=$( curl -s http://localhost:7101/secure/errors.jsp | grep -c \"unsupported collation: utf8mb4_bin\" | cat )\r\n        if [  \"${collation_check}\" -gt 0 ]; then\r\n            curl -u \"${JIRA_CREDS}\" http://localhost:7101/secure/johnson/events/dismiss\r\n            curl -u \"${JIRA_CREDS}\" http://localhost:7101/secure/johnson/warnings/acknowledge\r\n            sleep 5s\r\n        fi\r\n    fi    \r\n}\r\n{code}\r\nPlease note we strongly advise an upgrade to Jira 8 or above which supports this natively","createDate":"2017-07-28T13:55:11.000+0000","comments":[{"text":"Same for JIRA Server 7.4.2 ({{v7.4.2#74004-sha1:586975d}}) and JIRA Server 7.5.0-EAP (\\{\\{7.5.0-EAP-20170807090605}}).\r\n\r\nI noticed when the JIRA Service Desk License once hit the maximum of allowed users, the status switched from {{RUNNING}} to {{MAINTENANCE}}. A restart afterwards - after a first glance - did not reset the status to {{RUNNING}}.","author":"Robert Conrad"},{"text":"We are seeing this behavior after a datacenter upgrade to 7.5.0.","author":"Matthias Krauss"},{"text":"We are seeing this problem too. Just upgraded to Jira Data Centre version 7.5.2 and 2 nodes are reporting as being in Maintenance mode.\r\n\r\nRestarting Jira does not fix the problem.\r\n\r\nHas anybody got a workaround for this?\r\n\r\n ","author":"Paul"},{"text":"ApplicationStatusServlet.java expects the JohnsonEvents list to be empty otherwise it sets the application state to MAINTENANCE.\r\n\r\nSo if for example you are doing a reindex this creates a warning event which will cause the above servlet to report Jira as being in maintenance mode.\r\n\r\nI haven't found a REST endpoint or admin page that shows the list of events so there is no way of finding out the current list of johnson events.\r\n\r\n ","author":"BASM Ltd"},{"text":"/rest/api/latest/serverInfo?doHealthCheck=true  works as a replacement\r\nThe bug where JIRA Data Center stayed in STARTING looks fixed, but the bug where Jira stays in MAINTENANCE mode has not been fixed","author":"SiriusXM Atlassian Administrator"},{"text":"Hi everyone,\r\n\r\nWe've discovered there's a common case when Jira nodes are reporting MAINTENANCE instead of RUNNING. I've put the details into issue description section *Workaround and notes*.\r\n\r\nIf you are affected by a bug, can you please check the mentioned steps and provide a feedback, whether this has fixed your problem?\r\n\r\nWe're looking forward for your replies to make our Jira and documentation batter.\r\n\r\nThanks!\r\n\r\nCheers,\r\nIgnat Alexeyenko\r\nJira bugmaster.","author":"Ignat"},{"text":"Fixed for me (y)","author":"Christian Lund"},{"text":"Now I just need to get this collation issue to go away :P \r\nCollating as documented for postgres does not seem to make the collation check fail/event not happen.\r\n\r\nPerhaps we need to start with a postgres user that has superuser perms? (seems a bit unhealthy, especially in JIRA Data Center, eh?)","author":"SiriusXM Atlassian Administrator"},{"text":"Hi [~jira7],\r\n\r\nIf you need assistance in resolving a collation issue I suggest filling in a support request at getsupport.atlassian.com . Thanks.\r\n\r\nCheers,\r\nIgnat Alexeyenko\r\nJira bugmaster.","author":"Ignat"},{"text":"Maybe this could be resolved faster with pushing this feature: JRASERVER-68095","author":"Tobias Trabelsi"},{"text":"also appears to affect 7.10.2","author":"EISPP"},{"text":"Add 7.12.3 to the list of affected versions...","author":"llagos"},{"text":"impacts Jira Software server v7.92 ","author":"Max Blackmer"},{"text":"This is still an issue and makes having a load balancer a real pain.  I clicked \"ok\" on the DB errors.jsp page and it doesn't fix it.","author":"JHC"},{"text":"Faced with it on Jira DC v8.20.1\r\nIt gives a lot of problems cause Load Balancer used that URL and get *HTTP 503* instead of *200*.\r\nAs a result, nodes were marked as Unhealthy and did get any traffic.","author":"Roma Bubyakin [Wombats Corp]"},{"text":"Also get the error with LBC for data center with jira 8.20.2","author":"Cao Hieu"},{"text":"I've just run a 1 node dry run upgrade from 8.20.1 to 8.22.2 and after terminating the existing cluster node, the new node comes up with the expected version but remains unhealthy in the target group. It just sits there spamming that it is in \"maintenance mode\" and referencing JRASERVER-66970 in the atlassian-jira.log. After some poking around it seems relevant to this case as well.\r\n\r\nGlad I tested this first,,.,","author":"Mark Benson"},{"text":"Same exact thing Mark encountered in pushing to 8.22.2\r\n\r\nI was able to get two healthy nodes but the 3rd remains in \"Maintenance\" mode.\r\n\r\n\r\nFollow up: Manual API reindex was successful for final remaining node.","author":"Austin Hardy"},{"text":"{panel:title=Atlassian Update – 30 May 2023|borderStyle=solid|borderColor=#deebff | titleBGColor=#deebff | bgColor=#deebff}\r\n\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. We realize it still occurs and impacts your organization. We are now working on multiple customer requests and on new features, so we have to postpone our resolution of this issue. We’ve decided to move this issue to our long-term backlog. \r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards\r\nDaria Misiowiec\r\nSoftware Engineer, Jira DC\r\n{panel}","author":"Daria Misiowiec"}]},{"summary":"JIRA gadget did not use the Oauth impersonation protocol ","key":"JRASERVER-65571","url":"https://jira.atlassian.com/browse/JRASERVER-65571","type":"Bug","priority":"","description":"h3. Step to reproduce the issue: \r\n# Install Confluence and JIRA, create the application link by using OAuth with Impersonation.\r\n# Config the \"Assigned to me\" gadget on Confluence and create a page with the gadget. \r\n\r\nh3. Expected behavior \r\nWhen configuring the gadget, it should show the same as the gadget on JIRA without authentication request. \r\n\r\nh3. Actual behaviour\r\nWhen configuring the gadget, the \"Login & Approve\" window popup which requires an authentication against JIRA before we can continue the configuration. \r\n\r\nh3. Business impact\r\nSince the trusted app is deprecated since Application link 5.2 and the actual Oauth system require one token per gadget per user, the user has to go through all gadget to generate the token to grant the access. This is having a huge user experience impact with the instance having 1k+ users as the feedback shared in the ticket https://jira.atlassian.com/browse/CONFSERVER-45189","createDate":"2017-07-05T14:27:24.000+0000","comments":[]},{"summary":"In certain circumstances, the Stop Watching functionality does not work correctly when unwatching issues reported by you while Autowatch is enabled.","key":"JRASERVER-65109","url":"https://jira.atlassian.com/browse/JRASERVER-65109","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAs such it requires multiple watches and unwatches to get an issue unwatched; and can be very confusing. B\r\n\r\nh3. Steps to Reproduce\r\n# Enable Autowatch reported issues (the default is set to Yes)\r\n# Create an issue, and remove yourself as the watcher.\r\n#* Note that the More menu item for watching is currently set to Watch Issue\r\n#* The sidebar Watchers field says Start watching this issue\r\n# Transition the issue, using a transition that has a screen and the comment field.\r\n\r\nThen, do one of the following:\r\n# Click Stop Watching this Issue\r\n# Click the number of watchers, then trash your own username\r\n\r\nh3. Expected Results\r\n# The More menu item for watching is currently set to Stop watching\r\n# The sidebar Watchers field says Stop watching this issue\r\n# The lozenge for the watchers is grey (because you are not watching the issue)\r\n\r\nh3. Actual Results\r\n# The More menu item for watching is currently set to Watch issue\r\n# The sidebar Watchers field says Stop watching this issue\r\n# The lozenge is the same colour as if you were watching the issue still\r\n \r\nh3. Notes\r\n* It looks like there are two seperate rest endpoints being used:\r\n** Used when removing self from the Watchers field via the lozenge: {{rest/api/2/issue/REP-2/watchers?username=<username>}}\r\n** Used when removing self via the Stop Watching this issue link: {{rest/api/1.0/issues/10101/watchers}}\r\n\r\nBoth requests return successfully (i.e, a 204 via the lozenge, and a 200 via the Stop watching this issue via the link). There was also some discussions about permissions being relevant, but it's tough to determine how relevant those permissions are.\r\n\r\n(i) If you can reliably reproduce this behaviour where permissions for users are a factor, please reply in the comments section below.\r\n\r\nAdditionally, in some circumstances, the Watch Issue link is out life line with the rest of the menu, and doesn't behave like a menu item (but it can be clicked regardless).\r\n\r\nh3. Workaround One:\r\n* Click Stop Watching this issue on the sidebar (alternatively, you can click More » Watch Issue\r\n* Click More » Watch issue\r\n* Click Stop Watching this issue - the issue should now unwatch correctly.\r\n\r\nh3.Workaround Two:\r\nUsing bulk tools, watch and then unwatch the issues (two seperate bulk issues). You can use {{key in watchedIssues()}} as a starting point to find all issues you're currently watching.\r\n\r\nh3.Workaround Three:\r\nDisable Autowatch on own issues. By default, users inherit from [the global user settings|https://confluence.atlassian.com/adminjiraserver/configuring-the-user-default-settings-938847012.html].","createDate":"2017-04-18T20:16:34.000+0000","comments":[{"text":"+1 Same issue on our JIRA instance.\r\nThe Watched Issues gadget on the dashboard becomes useless and starts annoying users.","author":"EQS Systems"},{"text":"We suffer the same issue on v7.3.0, workaround doesn't work either.","author":"Andrew Jackson"},{"text":"Same problem, for some issues I cannot unwatch...","author":"Marc Minten (EVS)"},{"text":"+1, in my cloud instance.","author":"Alex Camargo"},{"text":"+1, Jira v7.3.2","author":"Susan Hauth [Jira Queen]"},{"text":"I should get credit for having reported this ;) ... on Atlassian's website to boot!","author":"Neal Applebaum"},{"text":"I was having this problem as well but thankfully the work-around worked for me.","author":"Deleted Account"},{"text":"+1 Jira 7.6.2 Server","author":"Renee Aper"},{"text":"+1 Jira Server v7.6.1\r\n\r\nPlease fix!","author":"Shane Wignall"},{"text":"Another workaround to stop watching individual issues with this problem that worked for us:\r\n * Click \"Stop watching this issue\"\r\n * Click \"Start watching this issue\"\r\n * Click \"Stop watching this issue\" again\r\n\r\nThis also worked using Bulk Change:\r\n * Bulk change the issues selecting \"Stop watching issues\"\r\n * Bulk change the issues selecting \"Start watching issues\"\r\n * Bulk change the issues selecting \"Stop watching issues\" again","author":"Shane Wignall"},{"text":"the above workaround is effective for me.","author":"Joy Mather"},{"text":"I'm seeing this as well with 7.8.0. The workaround did work, but I'm curious if there is any way to determine what other issues potentially are in this weird state?","author":"Nathan Neulinger"},{"text":"We also experienced this issue, but only on imported issues from another Jira instance. The watcher was already present in the source instance and couldn't be removed as a watcher after the issues had been moved. The Stop-Start-Stop workaround did work however, so thanks for that!","author":"Nicolas Bourdages"},{"text":"I wonder if this is a UX (user experience) issue that needs fixing, rather than a technical issue?\r\n\r\nPerhaps the user interface needs to adhere to this mental model:\r\n\r\nWHEN I (a Jira user) click 'Stop watching' on a Jira issue,\r\nTHEN I (a Jira user) stop receiving any e-mails and/or notifications about that issue. \r\n\r\nWhich differs from the system designer's model of adhering to notification schemes (which are only editable by a system administrator).\r\n\r\nSupporting evidence user's perceive this as a problem:\r\n * https://jira.atlassian.com/browse/JRASERVER-65109\r\nhttps://community.atlassian.com/t5/Jira-questions/Jira-stop-watching-issue-not-working-when-user-is-the-reporter/qaq-p/406032\r\n * https://community.atlassian.com/t5/Jira-questions/Disable-auto-notifications-for-reporter/qaq-p/73985\r\n * https://jira.atlassian.com/browse/JRASERVER-65109\r\n\r\nSupporting academic reference(s) for the hypothesis:\r\n * See 'The System Image' in section 1 of, The Design of Everyday Things: Revised and Expanded Edition, By Don Norman (2013) - https://books.google.co.uk/books?id=I1o4DgAAQBAJ&printsec=frontcover&dq=the+design+of+everyday+things+mental+model&hl=en&sa=X&ved=0ahUKEwjEus2LuIDdAhWKAcAKHfMXA-sQ6AEIJzAA#v=onepage&q=the%20design%20of%20everyday%20things%20mental%20model&f=false\r\n\r\n-\r\n\r\nAnecdotally, I have experienced this issue in a couple of workplaces on many projects, and, in my experience, in response to this UX issue, users tend to:\r\n * ignore/hide/disable all Jira notifications\r\n * stop commenting on Jira tickets\r\n * use other ways of communicating with the team that have the disadvantage of not being tied to a Jira issue number by default","author":"Louie Christie"},{"text":"+1, Jira v7.12.1","author":"Vitaly Alimirzoev"},{"text":"Found this on Jira v7.2.12","author":"Deleted Account"},{"text":"Seeing this on 7.11.2","author":"Alexander Garanin"},{"text":"Similar problem in 7.12.3. Workaround that worked for me: stop watching, start watching and stop watching again - this workaround worked for me only for few days. Now I am the watcher of affected issues again and the workround doesn't work\r\n\r\n \r\n\r\nUpdate: after few attempts, workaround works again. I observed that: when I click stop watching for the first time, the number of watchers is not decreased, then when I click start issue, it doesn't change, but when I click stop watching again, the number is decreased and I'm removed from the watchers.","author":"Krzysztof Krajewski"},{"text":"Also noticed this on Jira v7.12.3, this workaround worked for me, thanks!","author":"Michael Hartman"},{"text":"Find out this behaviour in v7.13! \r\n\r\nWorkaround worked also here","author":"Christos Moysiadis"},{"text":"Hi folks,\r\n\r\nAs a part of making sure our bug reports are clear and up to date; I've done some cleaning up on this one. I haven't been able to reproduce the permission or OS specific components of this bug report - so if you can produce these with a set of clear steps on a fresh or vanilla installation of Jira, please do let us know.\r\n\r\nCheers,\r\nDave\r\nAtlassian Support","author":"Dave Norton"},{"text":"Hi Dave,\r\n\r\nWe're an enterprise customer (10,000+ Users) and we're also seeing the same issue. \r\nThe issue is occurring for us when a staff member moves a task from one service desk to another, then attempts to stop watching. \r\n\r\nThe stop watching TEXT changes to \"Start watching\" but watch count doesn't drop.\r\n\r\nClicking refresh shows that no change has been applied. \r\nClicking stop; start; stop does indeed work, but it's difficult to explain this to all our staff without sounding stupid - fundamentally they shouldn't need to employ workarounds like this.\r\n\r\nIt is not limited to a particular component, and our permissions schemes are standard across both service desks.\r\n\r\n ","author":"Michael Blake"},{"text":"Hi Michael,\r\n\r\nThanks for the update - I can appreciate where you and your users are coming from. With regards to the permissions you mentioned that was more aimed at operating system level permissions (as there were some OS level elements of the un-cleaned-up bug report). Nevertheless, I appreciate you taking the time to add some additional light on the subject for us :)\r\n\r\nCheers,\r\nDave\r\nAtlassian Support","author":"Dave Norton"},{"text":"Hi, \r\n\r\nWe are able to reproduce this problem by calling Java API WatcherManager.startWatching() on a postfunction, on some Jira versions (7.11, 7.13, 8.0).\r\n\r\nOn Jira 7.6 we can't reproduce the problem.\r\n\r\nWe need a workaround we can code on java API.\r\n\r\nRegards.","author":"Manuel Jesús Morión Barea"},{"text":"Further testing this behavior in our (Jira 7.13) environment. Not all issues are impacted. We have a project that uses a particular workflow. In that workflow, during an early transition, the \"Reporter\" is made a \"Watcher\".\r\n\r\nTested an issue in that project/workflow that I was made a watcher of. In the test issue, I was the only watcher, but when I clicked Stop Watching This Issue, the number remained as 1 and I was still shown as a watcher. \r\n\r\nI did some additional experimentation on a different issue in this project/workflow and noticed that with someone else as the reporter and me as the employee name, we were both made watchers when the issue moved from Open to In Progress.  While it was In Progress, I selected View Watchers (the lozenge), clicked on the trash can icon next to the other user's name, and closed the Add Watchers popup.  This lozenged from 2 to 1, but the other user's name remained.  I then added a third user as a watcher and the lozenge changed back to 2, despite now 3 names being listed.  Clicking the trashcan next to my name changed the lozenge back to 1, but it remained blue (as if I were still a watcher).  Reloading the issue changed the lozenge to grey 2, with the other two users listed.  I deleted both of them and the lozenge went to grey 0 but reloading the page again restored their names and grey 2.  A few more clicks, deletions, and reloads and I was able to get the lozenge to grey 0 with myself listed as a Watcher.\r\n\r\nFinally, after adding and deleting the other two users and myself a few times, I was able to get the lozenge to report _*-1 watchers*_.  Clearly a bug.  And when I open the View Watchers, delete a user (again), the lozenge counts down again (I stopped at _*-10*_).","author":"Chris Annal"},{"text":"Found this bug while being affected on 8.2.3 Data Center.\r\nWhile using bulk edit - unwatch issues, out of 145 issues, 59 were not processed.\r\nOn one issue I manually went to the view page, hit stop watching / start watching / stop watching and that issue was unwatched properly.\r\nI'm still left with 58 affected issues.\r\nWith a base of 600 active users, I don't know if any of my users are affected (most probably yes).\r\nI'll keep an eye on this bug report.","author":"Rudy Dullier"},{"text":"+1 Jira v8.5.5","author":"UKD"},{"text":"+ Jira v. 8.20.1","author":"Viktoria Boiko"},{"text":"+ Jira v. 8.20.2","author":"Stijn Adams"},{"text":"Even when auto-watch is disabled. Always last Watcher can't unwatch issue. Jira DC 8.20.8","author":"Yana Stoliarova"},{"text":"+ Jira v. 8.20.11","author":"Eric Reichau"},{"text":"We've recreated this bug on Jira Software Data Center v9.4.14. Could this be added to the list of affected versions please?","author":"Darren Shinkins"},{"text":"Seeing this in Jira Data Center 10.3.2","author":"Judah"}]},{"summary":"Project Import blocked with an error indicating missing custom field option values for Select List custom field types","key":"JRASERVER-63226","url":"https://jira.atlassian.com/browse/JRASERVER-63226","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for *JIRA Server*. Using *JIRA Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRACLOUD-63226].\r\n{panel}\r\nh3. Summary\r\n\r\nUnable to proceed with Project Import due to errors on Custom Field Options. Example:\r\n{quote}The custom field 'Environment' requires option 'Staging' for the import but it does not exist in the current JIRA instance.\r\n{quote}\r\nh3. Steps to Reproduce\r\n # Have a source instance that has a Select List Custom Field (single choice) with one or more contexts and options\r\n # Configure the same custom field in a target instance with the same contexts and custom field options\r\n # Perform Project Import from source to target, using XML backup from source\r\n # The import is blocked in certain cases\r\n\r\nh3. Expected Results\r\n\r\nEvery project import will go fine\r\nh3. Actual Results\r\n\r\nIn certain cases, it's not possible to proceed with the import. The below can be seen in the GUI under Custom Fields validation:\r\n{noformat}\r\nThe custom field 'Environment' requires option 'Staging' for the import but it does not exist in the current JIRA instance.\r\n{noformat}\r\nh3. Notes\r\n\r\nOne of the causes is when {{fieldconfiguration.id}} does not match {{fieldconfigscheme.id}}. By rights JIRA should use {{fieldconfiguration.id}} when looking up {{customfieldoption.customfieldconfig}}, but it incorrectly uses {{fieldconfigscheme.id}}, causing the problem. More details can be found in JRASERVER-65734.\r\nh3. Workaround\r\n\r\nRefer to [Project Import fails due to missing Custom Field Options|https://confluence.atlassian.com/jirakb/project-import-fails-due-to-missing-custom-field-options-in-jira-server-732399753.html] for the above problem.","createDate":"2016-11-17T14:02:12.000+0000","comments":[{"text":"Confirm that this is still as issue in JIRA Server 7.2.3.\r\n\r\nIn our case it occurs even with only one, global context configured.\r\n\r\nAffected field: \"Epic Status\"\r\n\r\n \r\n\r\nLink to support issue: [https://support.atlassian.com/servicedesk/customer/portal/20/GHS-61770]\r\n\r\n ","author":"Fredrik Andersson"},{"text":"We have a number of JIRA instances to be moved over to a main single JIRA instance. Right now we are blocked by this issue so we can't import projects without losing custom field values. Could you please provide a workround until this bug gets a fix?\r\n\r\nThanks!\r\nShaakunthala","author":"Shaakunthala"},{"text":"Atlassian provided us with this workaround in a support request.:\r\n\r\n_We have seen a number of cases where following the steps in this article have been able to fix the issue here: [Custom field values are not imported using Project Importers Tool|https://confluence.atlassian.com/display/JIRAKB/Custom+field+values+are+not+imported+using+Project+Importers+Tool]_\r\n\r\n_Could you please try the following :_\r\n # _Make a copy of the source database as well as the target database_\r\n # _Run the queries from that article in the copy database_\r\n # _Try to perform project import to the target database_","author":"Fredrik Andersson"},{"text":"Thank you Fredrik! Appreciate posting that.\r\nAfter posting my comment I figured out Atlassian has also provided the same workaround for us as well. -May be Atlassian (or me once I fully understand it) can post a more generalized version of the workaround here, so everyone can use it.- Just figured out the link provided by Fredrick.\r\n\r\nThanks!\r\nShaakunthala","author":"Shaakunthala"},{"text":"Hi,\r\n\r\nWe are also experiencing this issue and it also blocks our JIRA merge process. Also, we have tried the provided workaround, but it turns out that the custom field options are lost in the source JIRA after applying it.\r\n\r\nSo, I wanted to ask if there is another way of doing this, or maybe a possible fix in the JIRA itself?\r\n\r\nRegards,\r\n\r\nChedomir","author":"Chedomir Dimitrovski"},{"text":"Not only does the workaround lose the custom field options, it also breaks the custom field default values.  ","author":"WPSC"},{"text":"We have experiencing same problem with next types of custom fields:\r\n * Radio Button\r\n * Select List (single choice)\r\n * Checkboxes\r\n\r\nBug does not affect for all custom fields, but several is broken. We haven't tried workaround yet though.","author":"Jarkko Koistinaho"},{"text":"Just to add that we are experiencing the issue on version 7.2.7, which is not added on this issue.\r\n\r\nAlso the types of the custom fields on which we have experienced the issue so far are:\r\n|Radio Buttons|\r\n|Status as Traffic-Light|\r\n|Checkboxes|\r\n|Checklist|\r\n|Select List (multiple choices)|\r\n|Status of Epic|\r\n|Select List (single choice)|","author":"Chedomir Dimitrovski"},{"text":"I too am experiencing this issue. I have a number of projects to move from one instance to another and something that seemingly should just work, given that other custom field types do work, is rather annoying.\r\n\r\n+1 to get this fixed. I'm going to try the workaround, in another temporary instance.\r\n\r\nAlso you can add 7.3.1 to the list of affected versions","author":"Joshua Mesilane"},{"text":"How do we proceed when query #3 do not return any values?\r\n\r\nPlease advise. Is there any progress on a permanent fix?","author":"DouglasF"},{"text":"same here, jira 7.3.7, workarounds not applicable (empty dataset / no mismatches).\r\n\r\nadditionally we found out, that, on our site, this seems to originate from non-default custom field configurations on 'multi select searcher' type fields. deleting these configurations solves the problem but causes data-loss (field values are removed when importing (as expected)).","author":"fundsaccess AG"},{"text":"Have this same issue migrating a cloud to cloud instance... something like 64 field are affected... How about this gets fixed? As ACP's working for a client, how do we estimate for things such as this? You might get this issue that will take an additional 10 hrs to fix.. Consistency would be nice.. why does it only happen \"sometimes\"?","author":"Dan Buffham"},{"text":"Hello,\r\n\r\nI am happy to announce that the root cause of this bug - [JRASERVER-65734|https://jira.atlassian.com/browse/JRASERVER-65734] has been fixed. This means that this issue should no longer occur, please see the 'Fix Version/s' field for the releases that will include the fix.\r\n\r\nThank your for your patience and your feedback which was crucial for fully understanding the issue.\r\n\r\nCheers,\r\nPawel, Jira Developer","author":"Pawel Drygas"},{"text":"Isn't  Jira version 7.10.1 release the fix for this.   (it was released 6/13) ","author":"Daniel DuBravec"},{"text":"another possible workaround is to set the context to global for custom fields with more than one configuration ","author":"Ronnie Volkmar"},{"text":"Hello,\r\n\r\nafter reports of the bug still occurring in the fixed versions, I am reopening it. https://jira.atlassian.com/browse/JRASERVER-65734 is just one of the possible reasons for this issue to happen and having it fixed means there's lesser likelihood of this occurring but not definite elimination of it. As this issue is broader than JRASERVER-65734, resolving it based on just fixing JRASERVER-65734 was too hastily.\r\n\r\nCheers,\r\nPawel, Jira Developer","author":"Pawel Drygas"},{"text":"Thanks @Pawel, \r\n\r\nAny word on when this problem will be addressed? Having a situation where we may not be able to restore projects is kind of a scary situation.\r\n\r\nBest Regards,\r\n\r\nJoel -\r\n\r\n \r\n\r\n!image-2018-12-11-14-41-35-434.png!","author":"Joel"},{"text":"Confirming that this issue is still present in version 8.5.4 as well.\r\n\r\nWe need a fix for this, it goes against having a project import tool in the first place...\r\n\r\n \r\n\r\nRegards,\r\n\r\nChakib Bennani","author":"Valiantys Support"},{"text":"This is an extremely bad bug that takes a serious amount of time to \"workaround\" when trying to move projects from one instance for another. Workarounds are not an acceptable solution to a serious problem. Please fix this bug ASAP.","author":"James Brown"},{"text":"I am currently trying Requirements and Test Management for Jira and i'm not able to use it because of this bug. Doing R&D for Test Managment for my company as I am a QA manager i can't recommand this soft when i'm encountering this bug during the installation.","author":"Bastien Challet"},{"text":"I faced this in my Jira import in 2020 and again now... now sure why these issues are still stuck in triage.  This time around workaround mentioned above did not help.  Same issue.","author":"Jay Kantaria"},{"text":"I can provide a fix that helped me in this situation (should be tested before applied to production):\r\n * Search all issues in the affected project(s), where the affected custom field is not empty\r\n * Export the search results (important: KEY, CustomFieldValue) to CSV\r\n * Delete the CustomFieldContext (not the custom field itself) \r\n * Recreate the CustomFieldContext with exactly the same values/context as the deleted Context\r\n * Use the Export of the custom field values to reset the CustomFieldValues in all issues using BulkChanges to the previous values\r\n\r\nAfter this fix, exporting and importing should be possible without error.\r\n\r\nThe only sideeffects are that the changes show in the Acitivity-Stream and the \"updated\"-field of all issues will be changed","author":"Thilo Brause"},{"text":"Presents itself in Jira Data Center as well.\r\n\r\n \r\n\r\nIs a very inconsistent bug, as I did the exact same import (same project, same source file, same configuration )  already a number of times without this Problem. And then one faitfull import... it appeared. And has been bothering me since.\r\n\r\n ","author":"Daniel Rohlfs"},{"text":"{panel:title=Atlassian Update – 13 June 2023|borderStyle=solid|borderColor=#deebff|titleBGColor=#deebff|bgColor=#deebff}\r\nDear Customers,\r\n\r\nThank you for taking the time to file and comment on this issue. Feedback like yours helps us release valuable Jira features that solve problems for a greater customer base. To that end, we aim to keep our issues up-to-date so they accurately reflect current customer needs. Based on the impact, we’ve decided to move this issue to our short-term backlog. \r\n\r\nThe workaround for this bug is as follows: There is no direct workaround available for this issue so far.\r\n\r\nPlease continue watching this ticket for future updates and changes in the timeline that impacts your work.\r\n\r\nBest regards,\r\n\r\nJakub Cegiel\r\nJira DC Quality Engineering\r\n{panel}","author":"Jakub Cegiel"},{"text":"There are missing versions, in which the error afflicts too.\r\n\r\nLike >=9.1\r\n\r\n ","author":"Mario Weizenegger"}]},{"summary":"An option provided by the function 'cascadeOption' for the field does not exist","key":"JRASERVER-62591","url":"https://jira.atlassian.com/browse/JRASERVER-62591","type":"Bug","priority":"","description":"h4. Problem\r\n\r\nAttempting to JQL search for cascading select values results in an error like:\r\n{code:java}\r\nAn option provided by the function 'cascadeOption' for the field 'testcascadefield' does not exist.\r\n\r\n{code}\r\nh4. Steps to Reproduce\r\n * Have a cascading select field (i.e. testcascadefield) with at least 2 defined contexts. Let's call them ContextA and ContextBC\r\n ** ContextA is configured for ProjectA\r\n ** ContextB is configured for 2 projects: ProjectB and ProjectC\r\n * Now configure the value options of ContextA and ContextB to have overlap\r\n ** For example, let's say both allows for selecting the value \"foobar\"\r\n * Ensure that your account *does not* have \"Browse\" permissions to ProjectB and ProjectC\r\n ** This is the key trigger of the bug\r\n * Now running the JQL:\r\n{code:java}\r\ntestcascadefield in cascadeOption(\"foobar\")\r\n\r\n{code}\r\n\r\n * We get the error:\r\n{code:java}\r\nAn option provided by the function 'cascadeOption' for the field 'testcascadefield' does not exist.\r\n{code}\r\n\r\n * Now, if we grant the user account to either \"Browse\" permissions to either ProjectB or ProjectC, the error does not occur.\r\n\r\nSo the problem occurs on 2 conditions:\r\n # if there is a context containing no projects that the user account can see\r\n ** As long as there's at least 1 project in the context viewable to the user, then the error does not occur.\r\n # if there is a option in the context that is the same value as another context\r\n\r\nh4. Expected Behaviour\r\n\r\nIf an user does not have access to projects defined within a field's context, this should not affect the results for contexts that the user does have proper access to\r\nh4. Actual Behaviour\r\n\r\nNo issues are returned and the user is instead presented with an error\r\nh4. Workaround\r\n # Avoid using the function. \"cascadeOption\". So from the above example, use this instead:\r\n{code:java}\r\ntestcascadefield in (\"foobar\")\r\n{code}\r\n\r\n # Or check each context to ensure that the user has access to at least one of the projects listed\r\n ## Note, you can create a blank project without any issues, assign it to a restricted context of your cascading field, give all users \"browse project\" permissions, and cascadeOption JQL condition will work as intended after that, since all users will have access to at least 1 project in the restrictive context.\r\n # Or avoid having multiple contexts with the same option values\r\n\r\n ","createDate":"2016-09-21T20:53:17.000+0000","comments":[{"text":"We are seeing this in our JIRA Software 6.4.12 instances and the workaround does indeed work.\r\n\r\nThe error message \r\n\r\nAn option provided by the function 'cascadeOption' for the field ____ does not exist.\r\ndid not lead us immediately to the solution and I believe may have taken some thorough investigating on the part of the Premiere Support team to discover the root cause.","author":"Jon Jones"},{"text":"Hello, Provided workaround does not work for us. We have several projects, each dedicated for one client. We are using Cascading select to determine target of business (i.e. EMEA - Ireland). Every project have dedicated context with different set of values - some of those values might be same for some projects. We does not want to have single context because\r\n* Some values are not valid for some customers.\r\n* We might might expose unwanted information to our clients.\r\n----\r\nCan you please increase severity of this problem? So far there seems to be no workaround for us.","author":"Petr Novy"},{"text":"Update: Possible workaround is to use value ID instead. Problem is that end user will be unable to find it. Also gadgets sometimes using values instead of IDs. Therefore such workaround is almost useless for regular user.","author":"Petr Novy"},{"text":"In jira 7.2.9 software:\r\nWe have the same error in two dimensional gadget.\r\nWe also receive the error although user have \"browse\" permission on at least one project.\r\n\r\n","author":"Mesgina Wolday"},{"text":"This may have been what Petr Novy mentioned in his comment, but we get this to work by using the custom field ID rather than the custom field name.  So, our JQL looks like this: cf[21801] in cascadeOption (\"Option 1\") for a search of just the first level.  Obviously, you need to know the custom field ID to get it to work.","author":"Bill Tanner"},{"text":"A user is unable to use his cascade select field in gadgets because of this bug that doesn't have a realistic workaround.","author":"Jason D Smith"},{"text":"This is affecting lot of our users. Can this be changed to P2 ?","author":"Siddartha"},{"text":"Same problem here, after granting user access to another project it start work, but of course we dont want him to have access to that project.","author":"Martin Ninaj"},{"text":"Good morning,\r\n\r\nThe problem persist in the Server's version 8.13.24\r\n\r\nIt would be recommended that the issue was taked care or closed like in the related issue in Cloud JRACLOUD-74762, please.\r\n\r\n \r\n\r\nRegards.","author":"Javier Molina"},{"text":"Good afternoon \r\n\r\nWe are still having issues with this and are using Jira software version 8.13.6. Please let us know if it has been fixed or if there are any reliable workarounds for this","author":"Arkansas Department of Human Services"},{"text":"Dear Atlassian Team,\r\n\r\nOur Company also using cascaded fields with different contexts and overlap in their options. We are also waiting to have a fix of this error.","author":"Ferenc Ghido"},{"text":"Hi, \r\n\r\nwe also \"suffer\" this problem. We have noticed that it does not happened if the user is in the \"jira-system-administrator\" user group","author":"Improvement Engine Support"},{"text":"It also affects Jira v9.4.21","author":"Yan Zhou"},{"text":"Hi, \r\n\r\nWe are facing this problem since several months.  Please provide a solution. \r\n\r\nThanks","author":"catherine curier"}]},{"summary":"User sessions idle for >4h are removed from the sessions listed on \"Current User Sessions in Jira\" admin page regardless of the session timeout value","key":"JRASERVER-60844","url":"https://jira.atlassian.com/browse/JRASERVER-60844","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This suggestion is for {*}JIRA Server{*}. Using {*}JIRA Cloud{*}? [See the corresponding suggestion|http://jira.atlassian.com/browse/JRACLOUD-60844].\r\n{panel}\r\nh3. Problem Definition\r\n * If a user customizes the session timeout as per [How to change the default session timeout|https://confluence.atlassian.com/display/JIRAKB/How+to+change+the+default+session+timeout], these changes are not reflected on the User Sessions page.\r\n * The session is +not+ destroyed checking the atlassian-jira-security.log and the user does not get logged out, however on the User Sessions page, the session is removed after 4 hours.\r\n * If the user is idle for more than 4 hours, the session disappears from the User Session page but does +not+ get logged out.\r\n * If a user becomes active again after more than 4 hours, their session re-appears on the User Session page and will stay there until it has been idle for more than 4 hours again.\r\n * The missing functionality is *not limited to a customized JIRA timeout, but also to standard JIRA session timeout*\r\n\r\n \r\n\r\n*(!)* *Note:* Initially this bug was thought to remove the actual user session from Tomcat and logging the user out, which multiple of the early comments are about. This was found to be separate bug with the Atlassian Bot Killer plugin which mistook regular sessions for bots and killed their sessions after 1 hour regardless of the session timeout value, https://jira.atlassian.com/browse/JRASERVER-70574. This bug was fixed in Jira 8.5.6.\r\nThe Title has been updated to reflect this.\r\nh3. Steps to reproduce\r\n\r\n1. Create 'test' user and log in as this user\r\n2. Open [http://JIRA_HOSTNAME/secure/admin/CurrentUsersList.jspa] as admin in another browser and you will see the 'test' user's session.\r\n3. Close the 'test' user session's window (to avoid AJAX requests)\r\n4. Set the system clock forward by 4h1m. \r\n5. Reload [http://[JIRA_HOSTNAME]/secure/admin/CurrentUsersList.jspa] and the 'test' user's session will not be listed.\r\n6. Open the 'test' user window again. Session is still active and you do not need to log in. \r\n7. Reload [http://[JIRA_HOSTNAME]/secure/admin/CurrentUsersList.jspa]and the 'test' user's session is back in the list.\r\n\r\n ","createDate":"2016-05-02T15:45:00.000+0000","comments":[{"text":"My observation is there is a user inactivity timeout of around 50-60 minutes that will destroy a user's session regardless of the global session timeout value. In the current day of long lived 'desktop web apps' this is not a great result with reports of users on our local system losing information as they leave windows open and don't save immediately, etc.\r\n\r\nLooking at JIRA source code there is a hard coded max session age in \"JiraUserSessionTrackerDeletionStrategy\" that may be playing some role in this (although set at 4 hours):\r\n\r\nprivate static final long MAX_SESSION_AGE = 4 * 60 * 60 * 1000; // 4 hours\r\n\r\nIn summary the default session timeout should work regardless of user inactivity to avoid this problem and make the web application appear more robust.\r\n\r\n ","author":"BarnabyA"},{"text":"Is this issue being looked into? We are currently using JIRA 7.1.2 and have tried changing the user session timeout as per [Changing session timeout|https://confluence.atlassian.com/jirakb/how-to-change-the-default-session-timeout-604209887.html] but users appear to still be having their sessions end somewhere between 30-60 mins.","author":"Jonathan McCall"},{"text":"\r\nAffects Version/s\t\t7.3.3 Server","author":"Eric Storch"},{"text":"Because I was the one that brought this issue up here a comment from my site.\r\n\r\nI have set the session-timeout since years set 10 hours by setting a value of 600 minutes in web.xml (<session-config><session-timeout>600...). In JIRA user sessions view there is no session displayed with more than 4 hours idle time. Such sessions will actually be destroyed.\r\n\r\nHowever, a user with between 4 and 10 hours idle time will directly get a new session without another login request. But this behavior was of course hard to find. And I also can not see how many users are actually using our JIRA per day (at least not from Web page).\r\n\r\nDetected with v6.4.11. We will upgrade to v.7.3.x in a few weeks.","author":"Martin Ruppelt"},{"text":"web.xml exists two times in your JIRA installation:\r\n\r\n/YOUR-PATH/atlassian-jira/WEB-INF\r\n\r\nand\r\n\r\n/YOUR-PATH/conf\r\n\r\nI changed both files to 600 minutes. I don't know from which file JIRA takes the value.","author":"Martin Ruppelt"},{"text":"Hi,\r\n\r\nwe had the same problem and triaged it to the Atlassian Bot Killer plugin. The plugin has a bug which makes it regard all users as bots and limits there session to one minute or one hour. The issue is explained in detail in the support request JSP-395805.\r\n\r\n \r\n\r\nAnalysis:\r\n\r\nJira currently bundles the atlassian-bot-killer plugin. This plugin is supposed to detect bots/crawlers which only connect once to Jira and never again and reduce the inactive lifetime of their sessions stored in Jira.\r\n Due to a bug in the plugin all users are considered bots and all sessions have their inactive lifetime reduced, overwriting all normally configured settings.\r\n\r\n(Analysis based on 1.7.5 of atlassian-bot-killer as bundled with Jira 7.2.3, first analysis indicates it also should affect 1.7.9 bundled with Jira 7.4.x)\r\n\r\nIn BotKiller.java the method isThereAUserInPlay is used to determine if a request is performed by an actual user instead of anonymously.\r\n For this it checks if the Jira usermanager is available to make sure this method will not fail during Jira startup or shutdown.\r\n To hook into the Jira lifecycle the BotKiller class implements to LifecycleAwareInterface and expects to be managed by the Jira component system to call its onStart method to enable its real functionality.\r\n\r\nUnfortunately the class is not actually registered as a component in Jira (as indicated by the plugin manager web UI) and instead is managed by the BotKillerFilter class.\r\n BotKillerFilter however does never call onStart, so that BotKiller never thinks that Jira has started and therefore classifies all requests as being from bots.\r\n\r\nIt seems this new Lifecycle logic has been introduced between 1.7 and 1.7.5 of the plugin,\r\n probably after reports like [https://community.atlassian.com/t5/JIRA-questions/Jira-Installation-problem/qaq-p/164115]\r\n\r\n \r\n\r\n ","author":"Thomas Weißschuh"},{"text":"We were experiencing this issue and disabling the bot killer plugin does resolve the problem. Nice analysis Thomas.","author":"Jonathan McCall"},{"text":"Just adding on here, this issue is still present in Jira 7.8.0 and the cause and fix appear to be the same. \r\n\r\nJeff's testing methodology in this [Atlassian Community post|https://community.atlassian.com/t5/Jira-questions/JIRA-session-timeout-set-to-1-hour-due-to-JIRA-bug-Okta-and-2FA/qaq-p/630382] remains valid, and I can confirm that disabling the atlassian-bot-killer system add-on causes the session to be created with the session timeout interval specified in web.xml rather than the 1 hour (3600 second) interval that Bot Killer was forcing on all sessions otherwise. \r\n\r\nThis issue is particularly visible with SAML SSO setups like Okta's Jira On-Premise plugin, because users are forced to re-authenticate hourly and constantly deal with session timeout behavior (an already-open browser tab will stop responding to actions, and a refresh redirects to log-in) because they do not have the \"Remember Me\" cookie set. \r\n\r\nHopefully Atlassian will ship a new version of the Bot Killer with properly implemented session length settings soon!","author":"Taylor Barrett-Wilsdon"},{"text":"We are using since 2008-02 JIRA 7.6.2 and of course nothing has changed. The 10 hour setting is still ignored. And with 22 votes this will not even be looked at by Atlassian. Either you get your colleagues voting on this or this issue is going to die.\r\n\r\nRegards\r\nMartin","author":"Martin Ruppelt"},{"text":"Jira 7.12.3 + SSO ( CAS client 3.3.3 + cas-client-integration-atlassian [https://github.com/apereo/java-cas-client] ) + enabled plugin Bot Killer \r\n\r\nwe configure session timeout to 300 = 5h in [$JIRA_INSTALL|https://confluence.atlassian.com/jira/jira-installation-directory-189891102.html]/atlassian-jira/WEB-INF/web.xml\r\n{code:java}\r\n    <session-config>\r\n        <session-timeout>300</session-timeout>\r\n    </session-config>\r\n{code}\r\nJira restart\r\n\r\nwe made page in [$JIRA_INSTALL/|https://confluence.atlassian.com/jira/jira-installation-directory-189891102.html]atlassian-jira/secure/sessionattributes.jsp to check session attributes\r\n{code:java}\r\n<%@ page session=\"true\" import=\"java.util.*\" %> <h1>Session attributes</h1> <% Enumeration keys = session.getAttributeNames(); out.println(\"Session ID: \" + session.getId() + \"<br>\"); out.println(\"Max Inactive Interval: \" + session.getMaxInactiveInterval() + \"<br>\"); while (keys.hasMoreElements()) { String key = (String)keys.nextElement(); out.println(key + \": \" + session.getValue(key) + \"<br>\"); } %>{code}\r\n \r\n\r\nat 1st visit to Jira [http://company.xyz/jira/secure/sessionattributes.jsp]\r\n{code:java}\r\n...\r\nMax Inactive Interval: 18000\r\n...{code}\r\nthere isn't attribute with \"com.atlassian.labs.botkiller.BotKiller\"\r\n\r\n \r\n\r\nREFRESH/F5 or visit 2nd time Jira [http://company.xyz/jira/secure/sessionattributes.jsp]\r\n{code:java}\r\n...\r\nMax Inactive Interval: 3600\r\n...\r\ncom.atlassian.labs.botkiller.BotKiller: 18000\r\n...{code}\r\nBotKiller take Max Inactive Interval value read session timeout from web.xml, but something still overwrite MaxInactiveInterval to 3600\r\n\r\n \r\n\r\nWe turn off this BotKillerPlugin and testing to be sure that cause the problem. \r\n\r\n===\r\n\r\nAfter tests we hit max 4h session inactivity but NO MORE than 4h, so my value session time out set to 5h (18000) in in web.xml is anyway ignored and i confirm what said @[~balderson] :\r\n\r\nclass JiraUserSessionTrackerDeletionStrategy got hard coded value\r\n{code:java}\r\nMAX_SESSION_AGE = 4 * 60 * 60 * 1000; // 4 hours{code}\r\n ===\r\n\r\nin summary we got two options:\r\n\r\n1 KillerBotPlugin ON ) we stuck with 1h max session timeout \r\n\r\n2 KillerBotPlugin OFF ) we stuck with 4h max session timeout\r\n\r\n \r\n\r\nany others solution to solve it ?\r\n\r\n ","author":"Krzysztof Czeladko"},{"text":"There seems to be no way to escape JiraUserSessionTracker.\r\n\r\nIMHO a (undocumented?) system property to overwrite the MAX_SESSION_AGE in JiraUserSessionTrackerDeletionStrategy would be reasonable tradeoff.","author":"Thomas Weißschuh"},{"text":"Hi there, any update on when we can expect an update on this ticket? We have a requirement for an 8h session timeout from our customer, so this is a high-priority for our team. Thank you. ","author":"Danielle McGrath"}]},{"summary":"Basic authentication does not support non-ascii characters in usernames or password","key":"JRASERVER-59828","url":"https://jira.atlassian.com/browse/JRASERVER-59828","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This bug report is for *JIRA Server*. Using *JIRA Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRACLOUD-59828].\r\n  {panel}\r\n\r\nh3. Summary\r\nWhen calling the REST API using unencoded basic authentication, a non-ASCII character in the username or password will return an incorrect status - a 401 Unauthorized or a 403 Forbidden respectively.\r\n\r\nThis does not impact the {{rest/auth/1/session}} endpoint. For more information on how to use this endpoint instead, please [Cookie-based Authentication|https://developer.atlassian.com/server/jira/platform/cookie-based-authentication/].\r\n\r\nThis also does not impact a user's ability to log in - as the browser and form will correctly encode data before sending it back to the server.\r\n\r\nh3. Steps to Reproduce\r\n# Create a user with non-ASCII character name like \"łukasz\" and the password test\r\n# Login through the web UI as that user, to verify the credentials are valid.\r\n# Do rest call as the user:\r\n{code}\r\ncurl -u łukasz:test -I http://localhost:8090/jira/rest/api/2/issue/TEST-2\"\r\n{code}\r\n\r\n(i) The problem can exhibit with a non-ascii character in either the username or the password.\r\n\r\nh3. Expected Results\r\nWith the correct credentials, the issue return a 200 OK response.\r\n\r\nh3. Actual Results\r\n{noformat}\r\nHTTP/1.1 401 Unauthorized\r\nContent-Encoding: gzip\r\nContent-Type: text/html;charset=UTF-8\r\nDate: Thu, 18 Feb 2016 10:53:23 GMT\r\nServer: Apache-Coyote/1.1\r\nSet-Cookie: JSESSIONID=91304E14DAA60D5A14292013A062A13B; Path=/jira/; HttpOnly\r\nTransfer-Encoding: chunked\r\nVary: User-Agent\r\nWWW-Authenticate: OAuth realm=\"http%3A%2F%2Flocalhost%3A8090%2Fjira\"\r\nX-AREQUESTID: 1313x7361x1\r\nX-ASEN: SEN\r\nX-Content-Type-Options: nosniff\r\nX-Seraph-LoginReason: AUTHENTICATED_FAILED\r\n{noformat}\r\n \r\nh3. Notes\r\nSee [ACJIRA-513|https://ecosystem.atlassian.net/browse/ACJIRA-513] description and comments for more details.\r\n\r\nh3.Workaround\r\nThere are a few alternative options workarounds; depending on the exact implementation you're using.\r\n\r\nh4.Option 1 - Remove the non-ascii characters\r\nIf possible, change the non-ascii characters to ascii characters. This may not be desirable (or feasible) in all cases, however.\r\n\r\nh4.Option 2 - Encode the username and password as Base64 before sending\r\nUse the following command to generate a Base64 encoded string:\r\n{code}\r\necho -n 'username:password' | openssl base64\r\n{code}\r\n\r\nThen, supply an {{Authorization: Basic token}} header, like so:\r\n\r\n{code}\r\ncurl -X GET http://localhost:8090/jira/rest/api/2/issue/TEST-2 -H 'Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ='\r\n{code}\r\n\r\nh4.Option 3 - Use Cookie authentication\r\n\r\n{panel:title=Information|borderStyle=solid|borderColor=#3C78B5|titleBGColor=#3C78B5|titleColor=#FFFFFF|bgColor=#E7F4FA}\r\n(i) In some cases, we've seen a Base64 encoded string fail. In our testing, this _seems_ to be caused by an ASCII username, with a non-ascii character in the password. If you're seeing a Base 64 encoded string fail (and you're sure it's correct) then consider using the cookie method of authentication.\r\n{panel}\r\n\r\nYou can use [cookie based authentication|https://developer.atlassian.com/server/jira/platform/cookie-based-authentication/] to authenticate first, and then use the cookie as your authentication mechanism in subsequent requests.","createDate":"2016-02-16T12:08:34.000+0000","comments":[{"text":"We seem to be facing the exact same issue, except in our case the international character is in the password instead of the username.","author":"gitberg"},{"text":"Hi [~dyhrbergsystems]!\r\n\r\nThanks for adding that extra clarification. I'll update the bug report to include that information. As a workaround, can you generate a base 64 encoded version of the username and password, and then pass it as an authorization header?\r\n\r\nFor example, to generate the base 64 encoded variable run the command\r\n{code}\r\necho -n 'username:password' | openssl base64\r\n{code}\r\n\r\nThis produces the output:\r\n{code}\r\ndXNlcm5hbWU6cGFzc3dvcmQ=\r\n{code}\r\n\r\n... which can then be added as a header to a request. Using the example credentials from the bug report gives us {{QnVrYXN6OnRlc3Q=}}, which we can add as follows:\r\n{code}\r\ncurl -X GET http://localhost:8090/jira/rest/api/2/issue/TEST-2 -H 'Authorization: Basic QnVrYXN6OnRlc3Q='\r\n{code}\r\n\r\nLet me know if that workaround doesn't work for you, or if you have any other questions!\r\n\r\nCheers,\r\nDave\r\nSenior Support Engineer (Sydney)","author":"Dave Norton"},{"text":"Using a base64 encoded string does not work as well.\r\n\r\n ","author":"catworkx GmbH"},{"text":"Hi [~sebastian.gerdes@catworkx.de]! A base64 encoded string should work, but it from my testing (and the reports on https://jira.atlassian.com/browse/JRASERVER-59460) it depends on where your non ascii characters are. If they're in the username, a Base64 encoded string should work (as I tested it when I updated this bug report). If they're in the password however, that'll still fail.\r\n\r\nI'll update the bug report so it's a little clearer that it might still fail even when encoded as Bas64.\r\n\r\nIn such cases, your best bet would be to use the Cookie based method to obtain the cookie and then use _that_ to authenticate. While it's an extra step it should be a bit more robust.","author":"Dave Norton"},{"text":"In my case, a Base64 encoded string doesn't work even if non-ascii characters are in the username.\r\n\r\ncommand:\r\n{code:java}\r\necho -n '홍길동:1234' | openssl base64\r\n{code}\r\noutput:\r\n{code:java}\r\n7ZmN6ri464+ZOjEyMzQ={code}\r\n ","author":"Youngrok Cha"}]},{"summary":"Permission schemes with non-existent users that have been explicitly granted a permission cannot be edited","key":"JRASERVER-59683","url":"https://jira.atlassian.com/browse/JRASERVER-59683","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Server*. Using *JIRA Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRACLOUD-59683].\n  {panel}\n\nh3. Summary\r\nPermission schemes that have non-existent users explicitly added to a permission type cannot be edited (the header and sidebar load, but where the permissions should be listed is blank).\r\n\r\nThere's two situations where this can occur:\r\n\r\n1) A user exists in a user directory, is granted explicit permission in a permission scheme, and the user directory that the user is in is subsequently disabled.\r\n\r\n2) Back in the days of JIRA Studio and Enterprise Hosted instances, there were two special users with the usernames \"enterprise-hosted-support\" or \"contegix\" (or both) that were the equivalent of the current \"sysadmin\" user. There's several places in JIRA's codebase that check for this username and exclude it from various operations.\r\n\r\nh3. Steps to reproduce\r\n# Start a local JIRA, connect it to an external user directory of some sort.\r\n# Add a user that exists only in that directory (and not the internal JIRA directory) to a permission scheme.\r\n# Import that JIRA data into a Cloud instance.\r\n# Try to edit the permission scheme.\r\n\r\nh3. Expected results\r\nThe permission scheme page loads.\r\n\r\nh3. Actual results\r\nWhere the permissions _should_ be is blank, and this stack trace is thrown in the logs:\r\n\r\n{code:none}\r\n2016-02-03 14:23:31,764 http-nio-2990-exec-53 ERROR sysadmin 863x4563x1 15k3ark 103.233.242.8,104.192.140.242,127.0.0.1 /rest/internal/2/managedpermissionscheme/0 [c.a.p.r.c.error.jersey.ThrowableExceptionMapper] Uncaught exception thrown by REST service: null\r\njava.lang.NullPointerException\r\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeService.updateSchemeToReturnUsername(DefaultPermissionSchemeService.java:436)\r\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeService.access$2200(DefaultPermissionSchemeService.java:58)\r\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeService$13.apply(DefaultPermissionSchemeService.java:331)\r\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeService$13.apply(DefaultPermissionSchemeService.java:327)\r\n\tat com.atlassian.fugue.Option$Some.fold(Option.java:421)\r\n\tat com.atlassian.fugue.Option.flatMap(Option.java:287)\r\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeService.getScheme(DefaultPermissionSchemeService.java:327)\r\n\tat com.atlassian.jira.permission.DefaultPermissionSchemeService.getPermissionScheme(DefaultPermissionSchemeService.java:105)\r\n\tat com.atlassian.jira.permission.management.ManagedPermissionSchemeHelperImpl.getManagedPermissionScheme(ManagedPermissionSchemeHelperImpl.java:92)\r\n\t... 3 filtered\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n\tat com.sun.proxy.$Proxy131.getManagedPermissionScheme(Unknown Source)\r\n\t... 3 filtered\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n[...]\r\n{code}\r\n\r\nh3. Workarounds\r\nh4. Workaround 1\r\nFor Cloud specifically, the following SQL will find the individual user and which permission scheme they're part of:\r\n\r\n{code:sql}\r\nSELECT  distinct(p.name),\r\n        s.perm_type,\r\n        s.perm_parameter\r\nFROM    permissionscheme p,\r\n        schemepermissions s\r\nWHERE   p.id = s.scheme AND\r\n        s.perm_parameter NOT IN (\r\n            SELECT  user_name\r\n            FROM    cwd_user\r\n            WHERE   directory_id = (\r\n                SELECT  id\r\n                FROM    cwd_directory\r\n                WHERE   directory_name = 'Remote Crowd Directory'\r\n            )\r\n        ) AND\r\n        s.perm_type = 'user'\r\nORDER BY p.name asc;\r\n{code}\r\n\r\nTo remove all of the missing users from the permission schemes:\r\n\r\n{code:sql}\r\nDELETE FROM schemepermissions\r\nWHERE perm_type = 'user' AND\r\nperm_parameter NOT IN (\r\n    SELECT  user_name\r\n    FROM    cwd_user\r\n    WHERE   directory_id = (\r\n        SELECT  id\r\n        FROM    cwd_directory\r\n        WHERE   directory_name = 'Remote Crowd Directory'\r\n    )\r\n);\r\n{code}\r\n\r\nh4. Workaround 2\r\n# Create a user with the same username for any broken reference\r\n# Change the Permission Scheme to remove the reference\r\n# Remove the users","createDate":"2016-02-05T06:57:59.000+0000","comments":[{"text":"As an alternative to the DELETE SQL query, it can be done through REST API\r\n\r\nGet all perms\r\nhttps://developer.atlassian.com/server/jira/platform/rest/v10005/api-group-permissionscheme/#api-api-2-permissionscheme-schemeid-permission-get\r\n\r\nDelete a perm\r\nhttps://developer.atlassian.com/server/jira/platform/rest/v10005/api-group-permissionscheme/#api-api-2-permissionscheme-schemeid-permission-permissionid-delete","author":"Gabriel Muller"}]},{"summary":"Unable to load or view user avatar in IE 11 ","key":"JRASERVER-59584","url":"https://jira.atlassian.com/browse/JRASERVER-59584","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Server*. Using *JIRA Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRACLOUD-59584].\n  {panel}\n\nh3. Summary\r\n\r\nUnable to load user avatar in IE 11 if it's {{PNG}} file with {{JPEG}} extension.\r\n{noformat}\r\nVirtualBox:~/Downloads$ file useravatar.jpg \r\nuseravatar.jpg: PNG image data, 48 x 48, 8-bit/color RGBA, non-interlaced\r\n{noformat}\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Upload a user avatar which is _PNG file_ with _JPEG_ extension\r\n# Open User Profile {{https://<instance URL>/secure/ViewProfile.jspa?name=<username>}}\r\n\r\nh3. Expected Behavior\r\n\r\nThe user avatar is shown.\r\n\r\nh3. Actual Result\r\n\r\nThe user avatar is not shown as the confirm button does not function.\r\n\r\nh3. Workaround\r\n\r\n# Upload a new user avatar or change the current avatar file extension to _PNG_\r\n# Use other browser (i.e Chrome)\r\n\r\nh3. Notes\r\n\r\nFound below error on Network Console:\r\n{noformat}\r\nColumn: 793DOM7009: Unable to decode image at URL: 'https://<instance URL>/secure/useravatar?size=small&ownerId=<username>&avatarId=11700'.File: useravatarDOM7009: \r\nUnable to decode image at URL: 'https://<instance URL>/secure/useravatar?size=small&ownerId=<username>&avatarId=11700'.File: useravatarDEPRECATED - \r\n{noformat}","createDate":"2016-01-28T09:49:32.000+0000","comments":[{"text":"I am having the issue as well in 7.4.2 install of JIRA. When can I expect to get a fix for it?","author":"Sravan Naredla"},{"text":"We see this issue as well at Deutsche Post DHL, paying support for ~3000 licensed JIRA users. Internet Explorer is the standard browserqt DHL. Pls. increase the priority if possible. This can't be a big problem, right?","author":"Olaf Kosel"},{"text":"We having this problem on our 7.3.8 JIRA. ","author":"Frank  Schimmel"},{"text":"the same problem with Jira 7.2.10","author":"Piotr Dziedziel"},{"text":"+1","author":"SEI Information Technology"},{"text":"7.5.2 also has this issue.","author":"Pontus Axelsson"},{"text":"Issue is also in 7.8.0.  If I use Chrome or Firefox, it displays correctly.  Workaround for me is to save the image as jpeg using Chrome, then go to IE and upload the jpeg to the project details.  It then shows correctly in IE.","author":"Peter Garncarek"},{"text":"+1 \r\nmac osx 10.13.6 \r\n\r\nchrome 68.0.3440   \r\n\r\nJira v7.11.1","author":"Dr Dodo"},{"text":"Jira 7.3.6. is also affected","author":"Simon"},{"text":"It's not loading gravator image even on Atlassian Jira (v7.12.3#712004-sha1:5ef91d7) ","author":"Digital Enablement"}]},{"summary":"WebHook converts the percent character % into %25 thus failing the call.","key":"JRASERVER-42579","url":"https://jira.atlassian.com/browse/JRASERVER-42579","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Server*. Using *JIRA Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRACLOUD-42579].\n  {panel}\n\nh3. Actual Results:\r\n\r\nLooking into the application log we can see {{%20}} character (space) was converted to {{%2520}} hence failing the call.\r\n{noformat}\r\n[atlassian.webhooks.plugin.PublishTaskFactoryImpl$PublishTaskImpl] Client error - when posting to web hook at 'http://sample.com/executions?argString=-sshPassword1%2520password&user_id=admin&user_key=admin'\r\n{noformat}\r\n\r\nh3. Expected Results:\r\n\r\nJIRA should calls the exact URL that has been used to created the WebHook like the one below.\r\n{noformat}\r\nhttp://sample.com/executions?argString=-sshPassword1%20password&user_id=admin&user_key=admin'\r\n{noformat}\r\n\r\nh3. Steps to reproduce:\r\n\r\n# Create a new WebHook using the test URL: {{http://sample.com/executions?argString=-sshPassword1%20password}}\r\n\r\n!webhook.png!\r\n\r\nh3. Workaround:\r\n\r\nNo available workarounds.","createDate":"2015-03-23T16:19:53.000+0000","comments":[{"text":"Same problem happens on JIRA 6.4, but you need to enable DEBUG to view the error:\r\n\r\n{noformat}\r\n2015-03-25 11:29:50,935 pool-10-thread-3 DEBUG anonymous 613x325x1 23y3j9 0:0:0:0:0:0:0:1 /secure/QuickCreateIssue.jspa [atlassian.webhooks.plugin.PublishTaskFactoryImpl$PublishTaskImpl] Posting to web hook at 'http://sample.com/executions?argString=-sshPassword1%2520password&user_id=user&user_key=user', body is:\r\n{noformat}","author":"Pedro Cora"},{"text":"Huge annoying bug, it should be set to a higher priority.  Also, cloud paying customers will waste a lot of time because we have no access to the logs to determine why web requests fail. This seems to impact any url encoded characters such as %2F in my case.  Your customers will have a lot of problems trying to hook into Azure's Logic apps.","author":"Sam Bosell"},{"text":"This also happens in the link editor in Confluence: if you insert a link to a web site on a page by using the insert link button, saving the link will replace all characters not allowed in a URL (spaces, %-characters etc.) with the url code for that character (%20 for space, %25 for % etc.). For most characters this is nice behavior, but it also replaces the % characters that are part of an already encoded character.\r\n\r\nSince the url encoding contains a % character as well, these encodings will also be replaced. So if you save a link to url \"http://sample.com/executions?argString=-sshPassword1 password\", it will be changed to \"http://sample.com/executions?argString=-sshPassword1%20password\". If you open the link editor for the same link (don't change the URL) and save, the URL will be transformed to \"http://sample.com/executions?argString=-sshPassword1%2520password\". so the % sign is replaced by %25, changing %20 into %2520. One can repeat the process, adding 25 after the % sign at every attempt (%252520, ...).\r\n\r\n \r\n\r\nPlease change priority: should be higher than low.","author":"Sid Brouwer"},{"text":"Is there a workaround?","author":"Mark Robinson"},{"text":"Please change priority, this is a huge bug that needs to be fixed asap.\r\n\r\n*@Mark Robinson*: Only workaround I got when opening a ticket on this from Atlassian was:\r\n\r\n_\"There isn't any workaround for this on JIRA side. However, I'm not too sure if it's possible but the following may be worth a shot: you could try setting up a proxy server to catch requests to any URL containing *%25* and redirect it to the regular URL instead. We won't be able to assist with configuring the proxy though as it is not something we are familiar with. Alternatively, you could try contacting one of our [Atlassian Partners|https://mandrillapp.com/track/click/11828703/www.atlassian.com?p=eyJzIjoiTTk4cktGSERaVzBiZDhBeWhOMkVxRXZWb3dZIiwidiI6MSwicCI6IntcInVcIjoxMTgyODcwMyxcInZcIjoxLFwidXJsXCI6XCJodHRwczpcXFwvXFxcL3d3dy5hdGxhc3NpYW4uY29tXFxcL3BhcnRuZXJzXCIsXCJpZFwiOlwiNjVhY2U3YzcyZWM3NGEzNjg4MGM3MGNkOGQzMTA2MDdcIixcInVybF9pZHNcIjpbXCI5MWIwZmVmYzE0MGYwMTQ1MDBhZGQ1NWI3ZDA5OGE1NTlhZWY3ODE3XCJdfSJ9] for paid services to develop/customize a workaround for you.\"_\r\n\r\n\r\nWould not call that a workaround...\r\n\r\n/ Morten","author":"Morten Johansen"},{"text":"+1 for a priority bump. I had to set up a \"JIRA-bug-fixing-proxy\" server to work around this issue. Recommending that instead of just owning the bug and fixing it is really poor form.","author":"Christopher Brown"}]},{"summary":"Changing a resolution by editing an issue does not set a resolved date","key":"JRASERVER-39175","url":"https://jira.atlassian.com/browse/JRASERVER-39175","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Server*. Using *JIRA Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRACLOUD-39175].\n  {panel}\n\n*Steps to replicate:*\r\n\r\n# Create a project with a workflow that does not set the resolution at any point\r\n# Change the edit screen so that it has the 'resolution' field on it\r\n# Create an issue\r\n# Edit the issue to set a resolution\r\n\r\n*Result:*\r\n\r\nIssue does not have a resolved date\r\n\r\n*Expected result:*\r\n\r\nThe issue has a resolved date and resolutiondate in the database has been updated.\r\n\r\n*Workaround*\r\n\r\nThe resolution field should be altered either through a post-function, or by a screen specifically used to resolve issues. You should *not* have the resolved field on the edit issue screen.","createDate":"2014-07-18T06:06:02.000+0000","comments":[{"text":"This does make sense, although we manually set the Resolution type quite a lot so would be a pain to prevent this.  Not sure why you have to have a Resolved date for the Created v Resolved chart.  What benefit is this?","author":"David Nash (inactive)"},{"text":"This bug has been fixed in JIRA Cloud.\r\n\r\nDave Meyer\r\n\r\nSenor Product Manager, JIRA","author":"Dave Meyer"},{"text":"Any progress for Jira servers to fix this bug?","author":"Kiran John"},{"text":"I don't see it as a bug really. Don't put the Resolution field on an issue create or edit screen.","author":"Matt Doar"},{"text":"The bug here is that when the resolutionDate is set, it doesn't get added to the modified fields (since it's actually set as a side effect of setResolution in IssueImpl\r\n\r\nIt's probably good to check how it's been fixed in cloud, but it could be as simple a fix as changing the setResolutionDate method in IssueImpl to be:\r\n{code:java}\r\npublic void setResolutionDate(Timestamp resolutionDate) { \r\n    this.modifiedFields.put(\"resolutionDate\", new ModifiedValue(this.resolutionDate, resolutionDate)); // new line added to set modified fields    \r\n    this.resolutionDate = resolutionDate; \r\n    this.updateGV(\"resolutiondate\", resolutionDate);\r\n}\r\n{code}","author":"Mark Chaimungkalanont"},{"text":"Adding my 2 cents, and a bit of a workaround (if not already listed.)  We have this issue because we are using a home-grown API call to move the issue to \"Done.\"  We are not, however, setting the ResolutionDate or the Resolution.   As a workaround, I have a filter to list all \"Closed\" issues that do not have either fields set.   The SQL (not JQL) for this is:\r\n\r\n \r\n\r\nSELECT [ID]SELECT [ID]      ,[pkey]      ,[issuenum]      ,[PROJECT]      ,[issuetype]      ,[SUMMARY]      ,[issuestatus]      ,[UPDATED]      ,[RESOLUTIONDATE]   , RESOLUTION  FROM [Jira].[jiraschema].[jiraissue] --where issuetype = 10004  where (issuestatus = 6 or issuestatus = 10200)  --closed and promoted and ( resolution is NULL or resolutiondate is NULL)  order by id; \r\n\r\nTo update the fields, I use the following manual update  (after which I perform a Re-Index on the entire Jira instance - which seems to fix things.)\r\n  update [Jira].[jiraschema].[jiraissue]  set RESOLUTIONDATE = UPDATED , resolution = 10000  where (issuestatus = 6 or issuestatus = 10200) --closed and promoted and ( resolution is NULL or resolutiondate is NULL);\r\n\r\n \r\n\r\nWe are toying with using another API call to perform an Index action on the issue (which is what happens when an issue is resolved via the UI.)   \r\n\r\nHope this helps.","author":"Keith Kennedy"}]},{"summary":"Edited Issues That Previously Doesn't Have Priority Won't Select The Default Priorities as The First Value","key":"JRASERVER-29033","url":"https://jira.atlassian.com/browse/JRASERVER-29033","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen editing an issue that doesn't have a priority indicated, the selected priority in the list is not the default priority from the priority scheme.\r\n\r\nh3. Steps to Reproduce\r\n# Set the default priority to critical\r\n# Create a new project \r\n# Configure the field configuration to hide the \"Priority\" field\r\n# Create a ticket which uses the modified field configuration\r\n# Re-add the priority field to the field configuration (Show)\r\n# Edit the ticket\r\n# Look for the priority field\r\n\r\nh3. Expected Results\r\nThe selected priority in the list is the default priority from the priority scheme.\r\n\r\nh3. Actual Results\r\nThe selected priority in the list is *not* the default priority from the priority scheme, instead it is simply the first option in the list.\r\n\r\nh3. Notes\r\nThis is actually happening because hiding the Priority field from the field configuration will cause issues to be created without a value in \"Priority\". When an issue that does not have a priority is edited, the priority selected by default on the list will always be the top option.\r\n\r\nh3. Workaround\r\nDo not hide the Priority system field in the Field Configuration.","createDate":"2012-07-20T14:41:25.000+0000","comments":[{"text":"I'm not sure if this is a bug or expected behaviour. Either way, I'm not convinced this is worth fixing yet, but I'm not convinced otherwise either. Let's see if this becomes important to customers.","author":"Eric Dalgliesh"},{"text":"We see the same behaviour in Jira 7.10.1 for csv-imported issues: when the priority is not defined in the import table, it is not set in the according Jira Issue. When editing the issue, priority defaults to the first value rather than the actual default one which is rather annoying. \r\n\r\nAtlassian, could you please confirm whether this is actually a bug or a matter of works as designed?","author":"Nadine Schütt"},{"text":"Hello [~nadine.schuett1]! We have analyzed this report, and found that the real bug is that the Priority field is not being filled when the field is hidden. Normally the Edit screen would show the priority that the issue has already saved but as it would be empty for this scenario the default behavior is to show the first on the list. As a bit of housekeeping we have reshaped the format of the Issue summary as well as added additional information like the affected version you have shared with us and the latest Jira 7.12.3, where we were able to replicate and find the underlying cause. As for a fix for this request, I'm afraid that there has not been enough interest for this to gain traction for now, but we will keep this request open to gather feedback.\r\n\r\nBest regards,\r\nRené Chiquete - Atlassian Support.","author":"Rene C. [Atlassian Support]"},{"text":"This also affects Jira 9.12.10. Also the toggling is not required to see this behavior. Simply adding the Priority field for the first time would results in the edit value not being set to the default.","author":"Stefan Saint-Pierre"},{"text":"I pushed further my characterization of this problem and found that it also applies to custom fields. Not just system fields.","author":"Stefan Saint-Pierre"}]},{"summary":"Performing a site import fails with an OperationFailedException error","key":"JRACLOUD-93897","url":"https://jira.atlassian.com/browse/JRACLOUD-93897","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPerforming a site import into Jira cloud fails with the following error message;\r\n{code:java}\r\nError importing data: cloud.atlassian.logmon.laas.api.PrivacySafeException: Privacy-safe boxing of a com.atlassian.crowd.exception.runtime.OperationFailedException {code}\r\nThis is due to a stale cache which results in the groups not being found during the import operation\r\nh3. Steps to Reproduce\r\n # Navigate to System > Import Jira Cloud\r\n # Click on 'Import data'\r\n\r\nh3. Expected Results\r\n\r\nThe site import operation is successful and all data from the backup is available.\r\nh3. Actual Results\r\n\r\nThe site import operation fails with the following message;\r\n{noformat}\r\nError importing data: cloud.atlassian.logmon.laas.api.PrivacySafeException: Privacy-safe boxing of a com.atlassian.crowd.exception.runtime.OperationFailedException  {noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-02T06:13:01.000+0000","comments":[]},{"summary":"Archived, but not completed, child issues are still included in the child issue progress bar calculation","key":"JRACLOUD-93895","url":"https://jira.atlassian.com/browse/JRACLOUD-93895","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * Archived, but not completed, child issues are still included in the child issue progress bar calculation.\r\n\r\nh3. Steps to Reproduce\r\n # Create an Epic with two Stories as its child issues.\r\n # Transition one of the child stories to Done.\r\n # Archive the other *uncompleted* child issue.\r\n\r\nh3. Expected Results\r\n * The Epic's child issue progress bar should show 100% completed as all valid child issues are completed.\r\n\r\nh3. Actual Results\r\n * The Epic's child issue progress bar still shows 50% complete, which is a misleading indicator.\r\n!image-2025-04-02-15-34-56-024.png|thumbnail!\r\n\r\nh3. Workaround\r\n* Please ensure that child issues are transitioned to one of the *Done* statuses before archiving them for a more accurate indicator.","createDate":"2025-04-02T04:36:45.000+0000","comments":[{"text":"Hi,\r\nThe proposed workaround is also misleading as it still impacts the calculations…\r\n\r\nThe only workaround is to remove the archived account from being a child… Not ideal!\r\n\r\nCheers,\r\n\r\nMarwan","author":"Marwan Saab"}]},{"summary":"Embedding the iFrame Timeline view from a Jira plan doesn't work in external sites due to the x-frame-options: SAMEORIGIN header","key":"JRACLOUD-93892","url":"https://jira.atlassian.com/browse/JRACLOUD-93892","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAs per this document [Embed your plan using an iFrame|https://support.atlassian.com/jira-software-cloud/docs/embed-your-advanced-roadmap-plan-on-a-non-confluence-page/], it is possible to share a Jira plan timeline view using an iframe and embed it on any site as long as the permissions are correct for the person loading the view (is logged in with an Atlassian account that has the correct permissions)\r\n\r\nStill, since the response has the *x-frame-options: SAMEORIGIN* header, the content doesn't load in external sites that are not the same Cloud instance.\r\n\r\nThis affects third party gadgets that load HTML or iFrame content since the request come from external URLs\r\nh3. Steps to Reproduce\r\n # Install a third party add-on that can load iFrames in dashboard gadgets for example\r\n # Try to load the Timeline iFrame\r\n # The request is rejected\r\n\r\nh3. Expected Results\r\n\r\nThe content should load\r\nh3. Actual Results\r\n * The request is rejected\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-01T19:01:55.000+0000","comments":[{"text":"As described, the problem is with changes in cross origin policies. Pollinator tests would have \"detected\" it but it wouldn't have \"prevented\" it.","author":"Pak Hang Lai"}]},{"summary":"Cursor Jumps to end while adding summary in split issue dialog","key":"JRACLOUD-93888","url":"https://jira.atlassian.com/browse/JRACLOUD-93888","type":"Bug","priority":"","description":"Replication Steps :-\r\n # Go to any backlog and from more (...) Click Split issue.\r\n # While splitting the issue from backlog and adding the Summary.\r\n # While editing the initial words from the summary the cursor randomly jumps to the end of line\r\n\r\nAdding a screen recording while replicating the issue.\r\n * [^Cursor Jumping.mov]","createDate":"2025-04-01T10:21:50.000+0000","comments":[]},{"summary":"\"Select List (multiple choices)\" Field Experience with \"Field Required Validator\" Not Consistent In New Transition Experience","key":"JRACLOUD-93887","url":"https://jira.atlassian.com/browse/JRACLOUD-93887","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n(i) With [New Transition Experience|https://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436] enabled, when \"Select List (multiple choices)\" field type is made required using \"Field Required Validator\", error is thrown during transitions, even when values are present. In other words, for \"Select List (multiple choices)\" field type \"Field Required Validator\" requires field to be updated during the transition, not only to be populated.\r\n\r\nThis issue does not occur with other field types or when the [New Transition Experience|https://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436] is disabled.\r\n\r\n(on) Also, in the \"Validators\" tab of the workflow transition editor, \"Field Required Validator\" has the following information:\r\n{code:java}\r\nIf a value for field Select List (multiple choices) is not provided during the transition, show the following error: This field is required. {code}\r\nwhich is not how the \"Field Required Validator\" works and/or worked with the Old Transition Experience.\r\n\r\nThere are 2 distinct validators available:\r\n||Name||Description||\r\n|Field Required Validator|Field must not be empty during the transition.|\r\n|Field has been modified Validator|Field value must be changed during the transition.|\r\n\r\nTherefore the above text should be more clear.\r\nh3. Steps to Reproduce\r\n # Enable the New Transition Experience in your personal settings:\r\n ** [Jira Community - New Issue Transition Experience|http://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436]\r\n # Set up a transition with a transition screen that includes \"Select List (multiple choices)\" field type and make it required with \"Field Required Validator\".\r\n # Fill out the field before attempting the transition.\r\n # Attempt to transition an issue with values already set in the \"Select List (multiple choices)\" list fields.\r\n\r\nh3. Expected Results\r\n\r\nThe transition should proceed without errors if all fields specified in \"Field Required Validator\", have values.\r\nh3. Actual Results\r\n\r\nThe issue only transitions if the fields are filled out on the transition screen. Otherwise, a validator error message is displayed:\r\n{noformat}\r\nField Select List (multiple choices) is required. {noformat}\r\nh3. Workaround\r\n\r\n[Disable New Transition Experience|https://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436#:~:text=Can%20I%20switch%20back%20to%20the%20old%20experience%3F] or ensure the fields are filled out during the transition process.\r\n\r\n ","createDate":"2025-04-01T09:53:41.000+0000","comments":[{"text":"Pretty sure this is a new Bug as I've had the new Experience activated for a while and the transitions worked as expected. Either way, as the new Experience is supposed to be enforced sometime this quarter (last i've heard), fixing this bug should have high priority.","author":"Rebekka Heilmann (viadee)"},{"text":"This will impact our instance when the new issue transition experience is forced. Please fix the bug before then as this will negatively impact all our users when transitioning issues through their workflow. We make use of multi select fields required during transitions","author":"Kasturee"}]},{"summary":"Truncate Long User names for project-leads in the new Jira UI","key":"JRACLOUD-93885","url":"https://jira.atlassian.com/browse/JRACLOUD-93885","type":"Bug","priority":"","description":"Presently, there isn't a character limit for project-leads when viewing the project list in the new Jira UI. This can lead to long name users having their names bleed into the next column and causing a lot of visual noise. (See mockup screenshot). \r\n\r\n!Projects_-_Appspace_JIRA.png|thumbnail! \r\n\r\nThe only currently workaround is to change browser scaling to a lower % so Jira's UI scaling can accommodate the longer name, without the visual noise. The project-lead column is the only column in the project-list that seems to exhibit this issue.","createDate":"2025-03-31T23:07:51.000+0000","comments":[]},{"summary":"If the Priority Name is only a Number, basic search will search by ID and get confused","key":"JRACLOUD-93884","url":"https://jira.atlassian.com/browse/JRACLOUD-93884","type":"Bug","priority":"","description":"h3. Notes\r\n\r\nThis issue was cloned from an open feature request: \r\n * JRACLOUD-82131\r\n\r\nAnd, a bug that was closed as a Won't Fix: [JRACLOUD-37238 - If the Priority Name is only a Number, Issue Navigator will return issues matching its Name or ID|https://jira.atlassian.com/browse/JRACLOUD-37238]\r\n\r\n\r\n\r\nI have created this ticket to track the confusion caused by this issue. *It is impossible to use basic search to filter numbered priorities.*\r\nh3. Steps to replicate:\r\n # Modify the default priorities to match the below:\r\n{noformat}\r\n id | sequence |  pname  \r\n----+----------+---------\r\n 1  |        1 | Blocker\r\n 2  |        2 | 1\r\n 3  |        3 | 2\r\n 4  |        4 | 3\r\n 5  |        5 | 4\r\n{noformat}\r\n\r\n # Use the Jira basic issue search to create a filter to select the priorities with name \"1\". \r\n # Save the filter\r\n # Reopen the filter and observe the priority selection is updated to the wrong one.\r\n\r\nh3. Actual Behavior:\r\n\r\nJIRA will return any issues with priority = blocker as the filter was saved as \"priority = 1\" which hits: JRACLOUD-82131\r\nh3. Expected Behavior:\r\n\r\nJIRA would see that \"1\" (with quotes) is a priority name and would only return results by the name. The underlying JQL should be stored in a compatible format.\r\nh3. Workaround:\r\n * Use JQL to search:\r\n{code:sql}\r\n priority = \"1\"\r\n{code}\r\n\r\n * Or rename the priorities (e.g.: \"Level 3\").","createDate":"2025-03-31T21:23:56.000+0000","comments":[{"text":"Also true for other things such as statuses and resolutions. Good practice is to just not use numbers alone as names for these things. Annoying but workable once you know","author":"Matt Doar (Adaptavist)"}]},{"summary":"When changing an issue type to another that uses a different screen scheme, a generic 500 error can be thrown if the user does not have Create Issue permissions","key":"JRACLOUD-93883","url":"https://jira.atlassian.com/browse/JRACLOUD-93883","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen changing an issue type to another that uses a different screen scheme, if the user doesn't have the 'Create Issues' permission, a 500 error will occur during the {{MoveSubTaskChooseOperation}} workflow.\r\n\r\nh3. Steps to Reproduce\r\n # Have two issue types using two different screen schemes (with different fields).\r\n # The User should not have the \"Create Issues\" permission for the project.\r\n # Use the \"Move\" operation from the \"...\" menu to the right of an issue from the view screen, or click on the issue type icon and click on a new issue type.\r\n# Progress through the {{MoveSubTaskChooseOperation}} workflow.\r\n# After confirming which issue type to move to, a 500 error will show.\r\n\r\nh3. Expected Results\r\n\r\nNo 500 error.\r\n\r\nh3. Actual Results\r\n\r\nA 500 error is thrown and you can't progress to moving the issue type to another issue type.\r\n\r\nh3. Workaround\r\n\r\nEnsure that the user executing the change has the \"Edit Issue\" permission, and additionally, the \"Create Issue\" permission.","createDate":"2025-03-31T19:33:22.000+0000","comments":[]},{"summary":"Error in New Issue Transition: Field Validator Blocks Transition","key":"JRACLOUD-93882","url":"https://jira.atlassian.com/browse/JRACLOUD-93882","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA workflow validator fails when using the new issue transition feature.\r\nh3. Steps to Reproduce\r\n # Enable the new issue transition experience in your personal settings:\r\n ## [Jira Community - New Issue Transition Experience|http://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436]\r\n # Create a workflow validator using the \"Field Required Validator\" for a \"Select List (multiple choices)\" field.\r\n # Publish the workflow.\r\n # Fill out the field before attempting the transition.\r\n # Attempt to execute the transition. The validator error message will appear, preventing the transition.\r\n\r\nh3. Expected Results\r\n\r\nThe issue should transition when the fields are filled in beforehand.\r\nh3. Actual Results\r\n\r\nThe issue only transitions if the fields are filled out on the transition screen. Otherwise, a validator error message is displayed.\r\nh3. Workaround\r\n\r\nDisable the new issue transition experience or ensure the fields are filled out during the transition process.\r\n\r\n ","createDate":"2025-03-31T19:28:22.000+0000","comments":[{"text":"Severity 3 - Minor?\r\n\r\nI disagree. This is a major issue that blocks transitions, as we can't progress tickets, it affects our SLAs and our company image as we can't get tickets started or resolved. This should be Priority 1 major.","author":"Renato Menin Rezende"},{"text":"This is a blocker and makes New Transition Experience *unusable.* \r\n\r\nIf Atlassian wants someone to use {*}New Transition Experience{*}, then this must be fixed.","author":"Sai Nikhil Guntur"},{"text":"Closing this as a duplicate from JRACLOUD-93887.\r\n\r\nI encourage you to check the above bug ticket and if you want, share your experience in the comments and watch the ticket to be notified about updates.\r\nFor your reference, you can find our policy on how we prioritize bug fixes on [this page|https://confluence.atlassian.com/support/atlassian-cloud-bug-fix-policy-206865884.html].\r\n\r\nI have also added a link to all cases linked here to improve the priority of the JRACLOUD-93887 request.","author":"Gabi Paludo"}]},{"summary":"Importing from Trello corrupts any .xlsx / Excel files attached to the cards","key":"JRACLOUD-93880","url":"https://jira.atlassian.com/browse/JRACLOUD-93880","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsing the External System Import to import issues with attachments from Trello as mentioned [here|https://support.atlassian.com/jira-cloud-administration/docs/import-data-from-trello/#How-to-import-from-Trello] causes any Excel files to be corrupted.\r\nh3. Steps to Reproduce\r\n # Add an Excel (.xlsx) file to one of the cards from the Trello board\r\n # Add a CSV file to the same card on the Trello board\r\n # Use the External System Import to import Trello as mentioned in [this documentation|https://support.atlassian.com/jira-cloud-administration/docs/import-data-from-trello/#How-to-import-from-Trello]:\r\n ## Choose > *System*\r\n\r\n ## In the Import and Export section, click {*}External system import{*}.\r\n\r\n ## Select *Trello* in the [new import experience|https://support.atlassian.com/jira-software-cloud/docs/import-data-directly-from-trello-into-jira/]\r\n\r\n ## We'll ask you to authorize your Trello account, to allow us to import data from Trello to Jira.\r\n\r\n ## Map your Trello boards to new Jira projects\r\n ## Import users from Trello\r\n # In Jira, try to find the work item associated with the Trello card\r\n # Click to open and then to download both the CSV and Excel files added in steps 1 and 2\r\n # Try opening the downloaded file\r\n\r\nh3. Expected Results\r\n\r\nIn Step 5, we can see the previews and in step 6, we can access both files without seeing warnings\r\nh3. Actual Results\r\n\r\nIn Step 5, we can see the previews and in step 6, we can open the CSV file without warnings, however, when trying to open the Excel file either with Excel or Numbers, we get a warning informing the file is corrupt:\r\n{quote}We found a problem with some content in '[File name].xlsx'. Do you want us to try to recover as much as we can? If you trust the source of this workbook, click Yes.\r\n{quote}\r\n!image-2025-03-31-15-25-19-648.png!\r\nh3. Workaround\r\n\r\nClick on *Yes* to recover the workbook. If that doesn't help, it might be necessary to upload the Excel files manually or with CSV as mentioned [here|https://support.atlassian.com/jira-cloud-administration/docs/import-data-from-a-csv-file/#:~:text=Importing%20attachments].","createDate":"2025-03-31T18:28:02.000+0000","comments":[]},{"summary":"Filter columns revert to \"My Defaults\" when refreshing the filter page or navigating back to the filter page from a specific issue.","key":"JRACLOUD-93879","url":"https://jira.atlassian.com/browse/JRACLOUD-93879","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers experience an issue where column presets for a saved filter change unexpectedly when refreshing the filter page. The columns switch to \"My Defaults\" rather than retaining the specific filter's column settings. This behavior occurs upon refreshing the page and sometimes when clicking the back button to navigate back to a filter view, despite the URL indicating the user is still on the specific filter view.\r\nh3. Steps to Reproduce\r\n # Open a saved filter in Jira and observe the columns configured for that filter.\r\n # Without making any changes, simply refresh the page.\r\n # Observe that the displayed columns are now showing the \"My Defaults\"\r\n # Click on the table settings and notice that it is also selected to the \"My Defaults\" tab.\r\n # Click on the \"Filter\" tab within the settings and notice that the correct columns/fields are now displayed\r\n\r\nh3. Expected Results\r\n\r\nThe filter page should retain the column settings specific to the saved filter when navigating back or refreshing the page.\r\nh3. Actual Results\r\n\r\nThe filter page displays columns set in \"My Defaults\" instead of the specific filter's columns. The table column settings default to \"My Defaults,\" requiring manual re-selection of the \"Filter\" tab to restore the correct columns.\r\nh3. Workaround\r\n\r\nManually open the table column settings and switch from \"My Defaults\" to the \"Filter\" tab to restore the correct column view.","createDate":"2025-03-31T18:15:50.000+0000","comments":[{"text":"We have investigated the issue regarding the \"Filter columns reverting to MyDefaults\" when refreshing the filter page. Our tests indicate that this behavior is functioning as intended.\r\n\r\nThe change in column configuration which got reported occurs due to an updated filter, which is expected behaviour. Specifically, the filter column configuration will reset to \"MyDefaults\" if the filter is modified. For example, this can happen if you select a filter, choose an assignee from the dropdown, and then refresh the page. You can confirm this by looking for a go back to filter button or a save filter button in the New Issue Navigator:\r\n\r\n!GoBackToFilter.jpg|width=548,height=86!\r\n\r\n \r\n\r\nIf you encounter any other scenarios where this issue arises, please feel free to reopen the bug report.\r\n\r\nBest regards,\r\nYour Developer Team","author":"Franziska Schindler"}]},{"summary":"The font is different between Production and Sandbox environments for instances that have the new navigation experience enabled","key":"JRACLOUD-93876","url":"https://jira.atlassian.com/browse/JRACLOUD-93876","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFor sites that have the [navigation experience|https://support.atlassian.com/jira-software-cloud/docs/what-is-the-new-navigation-in-jira/] enabled. The font differs between Production and Sandbox environments.\r\nh3. Steps to Reproduce\r\n # Make sure the new [navigation experience|https://support.atlassian.com/jira-software-cloud/docs/what-is-the-new-navigation-in-jira/] is enabled on your site.\r\n # Create or Open a Sandbox environment.\r\n # Compare the Font between the Prod and Sandbox environments.\r\n\r\nh3. Expected Results\r\n\r\nThe font is the same in both environments.\r\nh3. Actual Results\r\n\r\nThe font on Sandbox is actually different from the Prod one.\r\n\r\n!image (1).png|width=488,height=112!\r\n\r\n!image.png|width=491,height=96!\r\nh3. Workaround\r\n\r\nDisable the new navigation feature under the labs page:\r\n * From the top right corner, select Settings (⚙) > General settings.\r\n * Go to Jira Labs and find New navigation.\r\n * Turn off the toggle.\r\n\r\nIf this setting isn't visible on your site, please contact [Atlassian support|https://support.atlassian.com/contact/].","createDate":"2025-03-31T15:17:59.000+0000","comments":[]},{"summary":"Direct importer tool from Asana to Jira allows issue with no summary and not search with JQL query","key":"JRACLOUD-93874","url":"https://jira.atlassian.com/browse/JRACLOUD-93874","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen task is present on asana without issue summary Direct importer tool from Asana to Jira allows creation of issue with no summary . issue with no summary is not searchable with \"Summary is empty\" jql query.\r\nh3. Steps to Reproduce\r\n\r\nPlease check screen recording\r\nh3. Expected Results\r\n\r\nIssue should not be created without summary , and if created should be searchable with JQL query\r\nh3. Actual Results\r\n\r\nIssue got created without summary and not search from issue search\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T14:14:29.000+0000","comments":[]},{"summary":"Select List (Multiple choices) custom field value cleared if adding field to Transition screen","key":"JRACLOUD-93873","url":"https://jira.atlassian.com/browse/JRACLOUD-93873","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhenever a Select List (Multiple choices) custom field value is added to a Transition screen the value is cleared after going through the transition, even if an Option was selected in a previously defined step in the workflows or e.g. if the Field was filled out during a Request creation from the Custom Portal. This issue happens if you're using the *New issue transition experience* as described [here|https://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436#M14880].\r\n\r\nThe value is cleared even if the Workflow does not have defined any Post Function to clear the value.\r\n\r\n{*}NOTE{*}: If you have the Select List (Multiple choices) custom field's Field configuration set as *Required* you'll see an error in the Transition screen stating that the {color:#ff0000}_Field is required,_ even if you'll notice that the value is filled out.{color})\r\nh3. Steps to Reproduce\r\n # Create a Select List (Multiple choices) custom field.\r\n # Make sure that the Select List (Multiple choices) custom field created in step 1 is added to a Transition screen within your Workflow.\r\n # Make sure to add the Select List (Multiple choices) custom field created in step 1 as a Required field in any Request Form.\r\n # Create a work item from the Customer Portal using the Request Form defined in step 3 and make sure to select one of the options available of the Select List (Multiple choices) custom field.\r\n # After the work item is created make sure that the Select List (Multiple choices) custom field is filled out with the value selected in Step 4.\r\n # Try to transition the work item to the status related to the Transition screen defined in Step 2.\r\n # Notice that the value of the Select List (Multiple choices) custom field is cleared out from the value selected in 4.\r\n\r\nh3. Expected Results\r\n\r\nYou are able to transition the issue and the value of the Select List (Multiple choices) custom field is not cleared out. The same value selected during the issue creation from the Request Form should still be there.\r\nh3. Actual Results\r\n\r\nIf you have the Select List (Multiple choices) custom field's Field configuration set as *Optional* you'll notice that even though the value was initially filled out the value of the custom field changes to *None* and is cleared out.\r\n\r\n{*}NOTE{*}: If you have the Select List (Multiple choices) custom field's Field configuration set as *Required* you'll see an error in the Transition screen stating that the _Field is required,_ even if you'll notice that the value is filled out.)\r\nh3. Workaround\r\n * Remove the Select List (Multiple choices) custom field from the transition screen if you're using the *New issue transition experience* as described [here|https://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436#M14880].\r\n * Disable the *New issue transition experience* Feature under your *General* Personal Settings as described [here|https://community.atlassian.com/forums/Jira-articles/Now-GA-try-the-new-issue-transition-experience-in-Jira/ba-p/2734436#M14880].\r\n\r\n ","createDate":"2025-03-31T14:12:43.000+0000","comments":[{"text":"This is critical to our workflows.  We use a Select List with Multiple Choices and I can't change the state easily because of this issue.  My end users found this issue, ","author":"Dan Breyen"}]},{"summary":"The parent-child relationship in the JSW project is disrupted when migrating using the Direct Importer tool (X2C) from Asana to Jira","key":"JRACLOUD-93871","url":"https://jira.atlassian.com/browse/JRACLOUD-93871","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen importing a Section as an Epic from Asana to Jira and a related task as a task on Jira on a Jira software project, the parent-child relationship is broken. \r\nh3. Steps to Reproduce\r\n\r\nAsana board setup should be :\r\n\r\n!image-2025-03-31-18-58-28-593.png|width=498,height=185!\r\n\r\nSelect Asana board from Jira new importer tool, select Jira software project with company managed type. Ensure to revisit the Project Hierarchy while importing by clicking on \" *Project Hierarchy* \" then map section as \"Epic\"\r\n\r\n!image-2025-03-31-18-55-46-359.png|width=385,height=303!\r\n\r\nPost import Parent and child relationship between Epic and task are broken\r\nh3. Expected Results\r\n\r\nAs Jira Business project allows import of Epic and task as parent-child from asana to Jira , Jira software should also allow to import similarly\r\nh3. Actual Results\r\n\r\nParent child relation is no longer present on Jira software project.\r\nh3. Workaround\r\n\r\nOption 1: Consider to import in Jiira business project then move the project to Jira software project.\r\n\r\nOption 2: Export the issues in CSV format and perform import with External system import tool","createDate":"2025-03-31T13:36:44.000+0000","comments":[]},{"summary":"Entering a decimal value  for story points on Plans timeline->Sprint capacity does not have any effect.","key":"JRACLOUD-93870","url":"https://jira.atlassian.com/browse/JRACLOUD-93870","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen we try to enter a decimal value for Sprint capacity on Plans timeline. The entered decimal value does not get stored. Nothing happens.\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to Jira plans.\r\n # Make sure you have Capacity planning enabled. [Enable capacity planning|https://support.atlassian.com/jira-software-cloud/docs/enable-capacity-planning-in-advanced-roadmaps/]\r\n# Click on Sprint details, which opens up Sprint capacity planning. Enter a decimal value. Refer screen shot.\r\n\r\nh3. Expected Results\r\nDecimal value should get stored.\r\n\r\nh3. Actual Results\r\nNothing happens when we save it. It reverts back to previous value.\r\n\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T13:35:27.000+0000","comments":[]},{"summary":"Site with complex permissions might face slowness in loading Jira Active Sprint page","key":"JRACLOUD-93865","url":"https://jira.atlassian.com/browse/JRACLOUD-93865","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe system currently performs repeated permission checks for each individual sprint, instead of reusing results for sprints that share the same board. This results in slow loading times on the Active sprint page, particularly affecting users with extensive sprint permissions.\r\nh3. Steps to Reproduce\r\n # It can be reproduced only by selected users with extensive permissions in many projects\r\n # A Jira administrator can replicate it by [impersonating|https://support.atlassian.com/user-management/docs/log-in-as-another-user/] the user affected \r\n\r\nh3. Expected Results\r\n\r\nThe active Spring page should load faster (less than 5 seconds)\r\nh3. Actual Results\r\n\r\nActive sprint pages will load slower for a few users (time to load ~10 seconds)\r\nh3. Workaround\r\n\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T06:43:33.000+0000","comments":[]},{"summary":"Import Issues via CSV: When importing from the Issue Navigator, Request Type isn't available as a Field.","key":"JRACLOUD-93864","url":"https://jira.atlassian.com/browse/JRACLOUD-93864","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen trying to import Issues via CSV from the Issue Navigator, Request Type can't be mapped to in the Field mapping section.\r\n\r\nh3. Steps to Reproduce\r\n # Go to https://<site>.atlassian.net/issues/?jql= which can be accessed via the Search in the top right corner then pressing *Enter* without typing any value into it.\r\n # Click the *...* in the top right, then click *Import issues from CSV*.\r\n # Provide the CSV and advance to the Mapping Fields step.\r\n\r\nh3. Expected Results\r\n\r\nRequest Type is an option under *Custom Fields* section of the dropdown.\r\n\r\nh3. Actual Results\r\n\r\nRequest Type is not an option under *Custom Fields* section of the Dropdown.\r\n\r\nh3. Workaround\r\n\r\nUse the External System Import page to import the Issues via CSV. It will allow mapping to the Request Type Field under Custom Fields section in the Dropdown:\r\n* https://<site>.atlassian.net/jira/settings/system/external-import\r\n\r\nWhich is in the System settings under *Import and export*.","createDate":"2025-03-27T18:11:48.000+0000","comments":[]},{"summary":"Keyboard shortcut \"[\" does not expand/collapse the sidebar on old navigation view","key":"JRACLOUD-93862","url":"https://jira.atlassian.com/browse/JRACLOUD-93862","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"[\" keyboard shortcut no longer expands or collapses the left sidebar in the old Jira navigation.\r\n\r\n(New navigation rollout: [https://community.atlassian.com/forums/Jira-articles/Jira-s-fresh-look-and-navigation/ba-p/2958737])\r\nh3. Steps to Reproduce\r\n # Log into a site that's still using the old navigation\r\n # From any view (e.g. issue search, project settings, board), press \"[\"\r\n\r\nh3. Expected Results\r\n\r\nThe left sidebar should expand or collapse, as shown by the tooltip when you hover the mouse on the sidebar\r\nh3. Actual Results\r\n\r\nNothing happens.\r\nh3. Workaround\r\n\r\nUsing the mouse still works normally.\r\n\r\nSites using the [new navigation|https://community.atlassian.com/forums/Jira-articles/Jira-s-fresh-look-and-navigation/ba-p/2958737] are not affected, the keyboard shortcut works as expected.","createDate":"2025-03-31T02:24:22.000+0000","comments":[]},{"summary":"When Renaming a Status the Transition name remains as originally entered","key":"JRACLOUD-93860","url":"https://jira.atlassian.com/browse/JRACLOUD-93860","type":"Bug","priority":"","description":"h2. Summary\r\n\r\nIn Jira, when a status is initially added to a workflow, the transition leading into that status is named the same as the status itself.\r\n\r\nHowever, if the status is renamed later, the transition name does not change. This unchanged transition name appears in various locations, such as the transition dropdown on the main issue view, the transition screen header, and in bulk operations under the \"Available Workflow Actions\" column.\r\n\r\nThis situation can confuse end users as processes evolve with workflows, requiring terminology alignment. Additionally, it increases administrative overhead due to discrepancies in naming conventions, necessitating manual cleanup tasks.\r\nh3. Steps to Reproduce:\r\n\r\nExample steps to reproduce behavior:\r\n * Add a status named \"test\" to a workflow\r\n * select \"all statuses can transition to this issue\"\r\n * Rename the status to \"Renamed Status\"\r\n * Publish the workflow\r\n * Do a Bulk transition operation or select the transition dropdown of an issue associated to the workflow\r\n * Observe that there is an option for \"test\" > \"Renamed Status\" is present causing confusion\r\n\r\nh3. NOTES and Suggestion:\r\n\r\nThe intention of this functionality is that the transition names can be customized, and renaming a status should not impact the workflow if customized, but it would be beneficial to have an option for a warning message popup when renaming a status to ask if the admin also wants to update the transition name to align with the status update on associated workflows.\r\nh3. This will have done two valuable things:\r\n # Immediately informed the admin making the status change that there is a difference between the two and that difference matters for aligning workflow terminology\r\n2. Will allow an Admin to change the setting with a single step in that resulting modal pop-up which Saves on manual cleanup intervention and administrative overhead once the discrepancy is discovered","createDate":"2025-03-28T21:41:22.000+0000","comments":[]},{"summary":"Log in as user function incorrectly assigns the ticket when using the Assign to me button","key":"JRACLOUD-93856","url":"https://jira.atlassian.com/browse/JRACLOUD-93856","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUsing the [Log in as user|https://support.atlassian.com/user-management/docs/log-in-as-another-user/] feature with Jira, clicking the _Assign to me_ button on an issue incorrectly assigns the ticket to the user doing the impersonation as opposed to the user being impersonated.\r\n\r\nh3. Steps to Reproduce\r\n # Identify a user with a Jira license and via the Admin Hub use the _Log in as user_ button to impersonate them\r\n # Navigate to a ticket that is not assigned to the user being impersonated in Jira\r\n# Click the _Assign to me_ button\r\n\r\nh3. Expected Results\r\nThe ticket is assigned to the user being impersonated.\r\n\r\nh3. Actual Results\r\nThe ticket is assigned to the admin user who is impersonating the user.\r\n\r\nh3. Workaround\r\nManually assign the issue to the user being impersonated by searching for that user in the Assignee field.","createDate":"2025-03-28T17:23:18.000+0000","comments":[]},{"summary":"Estimations can be updated in backlog despite being removed from Edit Screen","key":"JRACLOUD-93854","url":"https://jira.atlassian.com/browse/JRACLOUD-93854","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * Estimations (time / story points) can be edited in the backlog if the \"Estimate\" toggle is enabled even though the field has been removed from Edit screens\r\n\r\nh3. Steps to Reproduce\r\n # Step 1 - Enable estimation on a company managed project and remove the estimation fields (Story Points, time, etc) from the Edit Screen\r\n # Step 2 - Enable the \"Estimation\" toggle in the View Settings of the Company Managed backlog\r\n # Step 3 - Edit the estimation values (story points, time, etc) the value will reflect on the actual ticket\r\n\r\nh3. Expected Results\r\n * We would expect this to still be a 'read only' field so users could see the estimate and not modify it\r\n\r\nh3. Actual Results\r\n{noformat}\r\nWhen editing the Estimation value in the backlog - the tickets are updated with the edits{noformat}\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available No workaround","createDate":"2025-03-28T15:10:16.000+0000","comments":[]},{"summary":"Status that contains \"&\" in the name will break the link in Sprint Health Gadget","key":"JRACLOUD-93853","url":"https://jira.atlassian.com/browse/JRACLOUD-93853","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen there is \"&\" in issue status the link generated by Sprint Health Gadget will lead to a page with broken JQL.\r\nh3. Steps to Reproduce\r\n # Create a Scrum board with sample data.\r\n # Navigate to the sample project created in the previous step and modify the workflow by changing the name of \"TO DO\" status to \"TO & DO\".\r\n # Add a Sprint Health Gadget to a dashboard and select the newly created board.\r\n # Click the link to view the To Do issue list as shown below:\r\n!image-2025-03-28-16-13-47-944.png|width=505,height=249!\r\n\r\nh3. Expected Results\r\n\r\nJira opens the Issue navigator with the JQL *status in (\"Backlog\",\"TO & DO\",\"Selected for Development\") AND Sprint = 119*\r\nh3. Actual Results\r\n\r\nJira opens the Issue navigator with the JQL *status in (\"Backlog\",\"TO* and the following error is displayed:\r\n!image-2025-03-28-16-16-15-127.png|width=540,height=203!\r\nh3. Notes\r\n\r\nTo avoid this error, the URL generated by the gadget should have the \"&\" encoded as %26.\r\nh3. Workaround\r\n # Right-click the link and copy the URL.\r\n # Paste on a new browser tab.\r\n # Replace all the \"&\" with %26.\r\n # Hit the enter.","createDate":"2025-03-28T15:04:24.000+0000","comments":[]},{"summary":"Fixed version search is not working with like operator with dot","key":"JRACLOUD-93851","url":"https://jira.atlassian.com/browse/JRACLOUD-93851","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira Search not working as expected when searching with fixVersion using dots\r\nh3. Steps to Reproduce\r\n # Create a JQL query where fixversion contains dot.\r\n\r\n * \r\n{code:java}\r\nproject = ? AND fixVersion ~ \"LMN 1.2.3\"{code}\r\n\r\nPerform the JQL search using above and it will return intermittent results when JSIS used.\r\nh3. Expected Results\r\n * The correct results should be displayed every time search is performed.\r\n\r\nh3. Actual Results\r\n * No issue returned \r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T14:25:18.000+0000","comments":[]},{"summary":"\"Something went wrong\" (http 500 Error) when updating user project role with a large number of projects","key":"JRACLOUD-93842","url":"https://jira.atlassian.com/browse/JRACLOUD-93842","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen attempting to update a user's project role in JIRA Cloud, the operation fails with a \"Something went wrong\" message and a http 500 error. This occurs when the instance contains a large number of projects and project roles.\r\nh3. Steps to Reproduce\r\n * Navigate to {*}JIRA Administration → User Management{*}.\r\n\r\n * Select a user and attempt to update their project role assignments.\r\n\r\n * Have 2000+ projects and 10+ project roles\r\n\r\n * The update fails with a *500 Internal Server Error* and the message *\"Something went wrong.\"*\r\n\r\nh3. Expected Results\r\n * It should be possible to update the project role without HTTP 500 error.\r\n\r\nh3. Actual Results\r\n * It is not possible to update the project role.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T10:35:21.000+0000","comments":[]},{"summary":"A custom plain text field doesn't render correctly in transition screen","key":"JRACLOUD-93841","url":"https://jira.atlassian.com/browse/JRACLOUD-93841","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen a plain text field is added to the transition screen, the field is not rendered correctly despite the field render set to Default Text render. We can see the newlines and --- are removed from the field while on the transition\r\n\r\n{code:java}\r\n--- \r\nComment 1\r\n---\r\nComment 2\r\n--- \r\nComment three\r\n{code}\r\n\r\nOn the transition screen it appears as follows:\r\n\r\n\r\n{code:java}\r\nComment 1 Comment 2 Comment three\r\n{code}\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a multi line text field and add it to all fields\r\n# Add a screen with this field for the transition from In Progress -> Resolved\r\n# Set the renderer as Default Text render in the field configuration\r\n# Add data in the field on issue view\r\n# Transition the work item to the next stat\r\n\r\nh3. Expected Results\r\nThe field continues to render as plain text\r\n\r\nh3. Actual Results\r\nThe newline and --- are removed\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T10:30:18.000+0000","comments":[]},{"summary":"When attempting to delete issue types, if there are archived issues, the error will state that there are archived projects.","key":"JRACLOUD-93840","url":"https://jira.atlassian.com/browse/JRACLOUD-93840","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen attempting to delete issue types, if there are archived issues, the error will state that there are archived projects, while there are no archived projects existing. This error is misleading:\r\n\r\n!Screenshot 2025-03-28 at 10.57.43.png|width=637,height=76!\r\nh3. Steps to Reproduce\r\n # Verify that you do not have any archived projects\r\n # Try to delete an issue type\r\n # Observe the error stating that there are archived projects, and that you need to restore the projects, instead of work items.\r\n\r\nh3. Expected Results\r\n\r\nThe error should state that there are issue types that need to be restored/deleted in xyz projects, for the user to be able to delete the work type or any other actual issue.  \r\nh3. Actual Results\r\n\r\nThe error states that projects need to be restored from archive instead of work types.\r\nh3. Workaround\r\n\r\nThe workaround will be here as soon as it will be known","createDate":"2025-03-28T10:03:21.000+0000","comments":[]},{"summary":"Issues not refreshed when switching boards in the new navigation experience (data not fetched on route change from transition)","key":"JRACLOUD-93839","url":"https://jira.atlassian.com/browse/JRACLOUD-93839","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the new navigation experience, switching between boards does not function correctly. While the board URL and board name update as expected, the issues displayed do not refresh. Instead, the issues from the previously viewed board remain visible, leading to inconsistent data representation.\r\nh3. Steps to Reproduce\r\n * Navigate to a board from the sidebar.\r\n\r\n * Switch to a different board using the new navigation.\r\n\r\n * Observe that the board URL and name update correctly.\r\n\r\n * Notice that the issues displayed do not refresh and still show data from the previously selected board.\r\n\r\nh3. Expected Results\r\n * Issues should update correctly once a different board is selected\r\n\r\nh3. Actual Results\r\n\r\nThe page load take some, and the issues are not updated.\r\nh3. Workaround\r\n\r\nRefreshing the page after switching to the new board resolves the issue.","createDate":"2025-03-28T08:20:39.000+0000","comments":[]},{"summary":"Project List view shows the Level 2 issue type Work Item twice because the issue type was changed  from Epic to L2","key":"JRACLOUD-93837","url":"https://jira.atlassian.com/browse/JRACLOUD-93837","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Project List view displays the Level 2 issue type Work Item twice because its issue type was changed from Epic to Level 2.\r\nh3. Steps to Reproduce\r\n # Update an existing Epic Work Items' issue type to the L2 issue type for example Initiative\r\n # Go to Project List View\r\n\r\nh3. Expected Results\r\n\r\nThe Work Item displays once as a L2 issue type.\r\nh3. Actual Results\r\n\r\nThe Work Item shows twice one at the top level and once under another Initiative Work Item as a child issue.\r\n\r\nIf expand the first one it expands it under the other initiative.\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T05:34:43.000+0000","comments":[]},{"summary":"Work item history does not show the description field's old value once it's changed. ","key":"JRACLOUD-93830","url":"https://jira.atlassian.com/browse/JRACLOUD-93830","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWork item history does not show the description field's old value once it's changed.\r\nh3. Steps to Reproduce\r\n # Use a Scrum company-managed project\r\n # Create a work item (Story)\r\n ** Add Summary, Description, and a Parent Epic\r\n ** Summary = _This is a Summary_\r\n ** Description = _Initial Description_\r\n ** Select an Epic parent.\r\n # After 1 minute, open the work item\r\n # Make 3 changes within 1 min\r\n ** Change the description to a new description = _Altered description_\r\n ** Set the priority high\r\n ** Add a label Test\r\n ** Change summary = _This is Summary 02_\r\n # Go to the History tab of the Work item.\r\n # Click Show all changes for the last 4 changes\r\n\r\nh3. Expected Results\r\n\r\nThe Description change is shown as\r\n{noformat}\r\nDescription \r\nInitial Description   ->  Altered description\r\n{noformat}\r\nThe description added when the work item was created must be kept in the History.\r\nh3. Actual Results\r\n\r\nThe Description change is shown as\r\n{noformat}\r\nDescription \r\nAltered description\r\n{noformat}\r\nh3. !image-2025-03-28-17-35-50-024.png!\r\n\r\n\r\nWorkaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T15:50:46.000+0000","comments":[]},{"summary":"After Field deleted and recreated with same name, JQL does not work with query : field is EMPTY","key":"JRACLOUD-93828","url":"https://jira.atlassian.com/browse/JRACLOUD-93828","type":"Bug","priority":"","description":"*Replication Steps:*\r\n1. Create a custom field (e.g., {*}\"testCustomField\"{*}) and add it to a screen.\r\n2. Populate some issues with values while leaving others empty.\r\n3. Run JQL: testCustomField IS EMPTY → Returns correct results (empty fields).\r\n4. Delete the custom field and recreate it with the same name.\r\n5. Populate some issues with values while leaving others empty.\r\n6. Run JQL: testCustomField IS EMPTY → Incorrect results (issues with values appear).\r\n7. Run JQL using the field ID: cf[ID] IS EMPTY → Returns correct results.\r\n\r\n(i) *Workaround* However, if we search the JQL with customfield_id like {color:#ff0000}cf[12345] ~ EMPTY {color}then it will work as expected.\r\n\r\n(i)  Also with the new custom field with same field, it is able to search the text as expected. But the issue is with (is EMPTY) it is not taking effect.\r\n\r\nI have shared the screen recording below :-\r\n\r\n[^FieldNotWorkingInJQLAfterDeleteCreate (1).mov]","createDate":"2025-03-27T14:49:14.000+0000","comments":[]},{"summary":"Change from \"issue\" to \"work item\" has caused unintended replacement of the word \"issues\" when not referring to Jira Issues","key":"JRACLOUD-93825","url":"https://jira.atlassian.com/browse/JRACLOUD-93825","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nChange from \"issue\" to \"work item\" has caused unintended replacement of the word \"issues\" when not referring to Jira Issues. This seems to have been done in bulk to replace the usage of the word \"Issues\" when referring to items within Jira to \"Work Items\", but was not double checked for context. As a result, places in Jira that used the term \"issues\" in a different context appears to have replaced that word with \"work items\", even though on context it is not referring to a jira issue. One example can be found when creating a For: JQL branch in automation, where disabling the option \"Only include work items that have changed since the last time this rule executed\" results in a warning that reads \"May cause performance work items\", instead of \"May cause performance issues\"\r\n\r\n !Screenshot 2025-03-27 at 9.29.19 AM.png|thumbnail! \r\n\r\nAlso cases where changes have not occurred but where documentation seems to have been updated as though it has. In this case, the entire Issue settings menu at /jira/settings/issues/issue-types (consistent for all of the pages under /issues it seems and for the drop down settings menu)\r\n !Screenshot 2025-03-28 at 11.07.05 AM.png|thumbnail!  !Screenshot 2025-03-28 at 11.08.19 AM.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n# Create an automation rule\r\n# add a \"for related issues\" branch\r\n# uncheck the option \"Only include work items that have changed since the last time this rule executed\"\r\n\r\nh3. Expected Results\r\n\r\nThe message would read correctly: \"May cause performance issues\"\r\n\r\nh3. Actual Results\r\n\r\nThe message reads \"May cause performance work items\"\r\n\r\nh3. Workaround\r\n\r\nNone. Suspect this is a widespread issue in any spot where the word \"issue\" or \"issues\" is used but not in the context of a Jira Issue","createDate":"2025-03-27T13:43:36.000+0000","comments":[]},{"summary":"Inviting or adding users from Project -> People section can result in Hash errors.","key":"JRACLOUD-93820","url":"https://jira.atlassian.com/browse/JRACLOUD-93820","type":"Bug","priority":"","description":"h3. Issue Summary\r\nTrying to add people from Project settings -> People section can lead to front end errors with Hash code and trace error, if the person inviting does not have \"Browse users and groups\" permission. \r\nNote that this can happen when the site has invites turned off or set to \"Requires admin approval\". \r\n\r\nh3. Steps to Reproduce\r\n # Navigate to project settings -> People section\r\n # Click on Add people.\r\n# Search for users, from workspace like Slack. You will notice that the users have (i) icon next to their names.\r\n# Grant the user some role.\r\n\r\nh3. Expected Results\r\nUser should be added or proper error should be given to end users as to why we cannot add. So that users can take corrective action.\r\n\r\nh3. Actual Results\r\nHash error and trace id without any explanation as to why the error occured.\r\n\r\n\r\n\r\nh3. Workaround\r\nPlease grant the user \"Browse users and groups\" permission. ","createDate":"2025-03-27T10:58:34.000+0000","comments":[]},{"summary":"Forward mails being sent to wrong users","key":"JRACLOUD-93819","url":"https://jira.atlassian.com/browse/JRACLOUD-93819","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a mail with `precedenceHeader:bulk` is sent, a forward email is being sent to the wrong user who is associated with a different mail handler.\r\nh3. Steps to Reproduce\r\n # Create a mail server\r\n # Create one mail handler associated with this mail server with the properties: \"catchEmail=email1@domain,bulk=accept,forwardEmail=user1@domain\"\r\n # Create another mail handler associated with the same mail server with properties: \"catchEmail=email2@domain,bulk=forward,forwardEmail=user2@domain\"\r\n # Send a mail with `precedenceHeader:bulk` and add `email1@domain` to the message recipient.\r\n\r\nh3. Expected Results\r\n\r\nHandler 1 processes the email as it satisfies the catch email condition.\r\nh3. Actual Results\r\n\r\n`user2@domain` is receiving a forward email with the error.\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T10:50:00.000+0000","comments":[]},{"summary":"Site with complex permissions might face slowness in loading Jira Board and Backlog","key":"JRACLOUD-93817","url":"https://jira.atlassian.com/browse/JRACLOUD-93817","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira Boards and Backlog pages might load slowly for a few users on large sites. We have observed the slowness in loading on the Backlog pages due to permission checking, particularly affecting users with extensive project permissions.\r\n\r\nThe slowness is observed even with Boards is JQL with the {{Project}} conditions.\r\n\r\n*Example/context:* user *X* has permission to almost all the groups, and roles, everywhere in Jira, and this is slowing down the {*}permission search functionality{*}, On the other hand, a user *Y* that has less permission, the *permission search functionality* will be less stressed and take less time\r\n\r\nNote: The development team is already working on it\r\nh3. Steps to Reproduce\r\n # It can be reproduced only by selected users with extensive permissions in many projects\r\n # A Jira administrator can replicate it by [impersonating|https://support.atlassian.com/user-management/docs/log-in-as-another-user/] the user affected \r\n\r\nh3. Expected Results\r\n\r\nBoard with JQL should load faster (less than 5 seconds)\r\nh3. Actual Results\r\n\r\nBacklog & Board pages will load slower for few users. The backlog page takes a long time to load ~10 seconds\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this problem. A workaround will be added here when available","createDate":"2025-03-27T09:08:08.000+0000","comments":[]},{"summary":"Header: Inaccurate alt text specified for interactive image","key":"JRACLOUD-93813","url":"https://jira.atlassian.com/browse/JRACLOUD-93813","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn inaccurate textual description \"Custom Jira logo\" is specified for the \"CG Logo\" image link.\r\nh3. Note:\r\n\r\nTo resolve the current bug, it is necessary to implement a feature that enables administrators to add alt text for the custom logo. This functionality should be flexible enough to allow admins to customize the alt text according to their organization's specific requirements.\r\n\r\nFeature Request Link: [https://jira.atlassian.com/browse/JRACLOUD-93781]\r\nh3. Steps to Reproduce\r\n # Open the Jira Cloud instance with custom logo present.\r\n # Using a screen reader, navigate to the mentioned image link in the header section.\r\n # Listen that the textual description is not describing the functionality of the image link.\r\n\r\nh3. Screen Recording\r\n\r\n[^Inaccurate Alt Text.mp4]\r\nh3. Actual Results\r\n\r\nWhen screen reader users navigate through the header section in Jira, the \"CG Logo\" informative image link is announced as \"Custom Jira logo\", which does not accurately convey the information visually represented by the image.\r\n\r\nThe issue occurs because inaccurate alt text has been provided in the \"alt\" attribute.\r\n\r\nAs a result, this creates a poor experience for screen reader users.\r\nh3. Expected Results\r\n\r\nEnsure that the accurate textual description of the image is read out by the screen reader.\r\n\r\nApply the following changes:\r\n * Provide an appropriate and accurate textual description for the informative image.\r\n * Ensure that the textual description accurately reflects the purpose of the image.\r\n * In this case, ensure that the textual description for the mentioned image link is \"CG Jira Homepage\".\r\n\r\nh3. Code Snippet:\r\n\r\n*Syntax:* <img src=\"...\" alt=\"ClientName_ ProductName_Homepage\">\r\n\r\n*Correct code Example:*\r\n\r\n<a href=\"/jira\" data-testid=\"atlassian-navigation--product-home--container\">\r\n\r\n<img src=\"...\" alt=\"CG Jira Homepage\">\r\n\r\n</a>\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 134.0.6998.166 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 135.0 (64-bit)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.4.2\r\nVoiceOver - Version Latest","createDate":"2025-03-27T05:54:14.000+0000","comments":[]},{"summary":"Anonymously accessible REST endpoints return 200 OK with  invalid user credentials","key":"JRACLOUD-93811","url":"https://jira.atlassian.com/browse/JRACLOUD-93811","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (no)\r\nAnonymously accessible REST endpoints allow invalid user credentials to be used.\r\n\r\nAccording to documentation, 401 Unauthorized should be returned for any unauthenticated requests.\r\n{noformat}\r\nReturned if the authentication credentials are incorrect or missing.\r\n{noformat}\r\nHowever, if we pass invalid credentials, we get 200 OK response.\r\n{code:java}\r\ncurl -I --user foo:bar 'https://sitename.atlassian.net/rest/api/2/field'\r\nHTTP/2 200 \r\ncontent-type: application/json;charset=UTF-8\r\n{code}\r\nThis is counterintuitive and doesn't match the documentation.\r\n\r\nSome APIs that are not anonymous accessible:\r\n/rest/api/3/mypermissions\r\n/rest/api/3/project/search\r\n/rest/api/3/issue/bulkfetch\r\n/rest/api/3/issue/field\r\nh3. Steps to Reproduce\r\n # make a request to an anonymous accessible REST endpoint with invalid credentials\r\n\r\nh3. Expected Results\r\n\r\n401 Unauthorized should be returned. According to documentation, when credentials are incorrect.\r\nh3. Actual Results\r\n\r\n200 OK response is returned.\r\nh3. Workaround\r\n\r\nInvalid credentials are treated as anonymous access. So, creadentials should be validated with an API endpoint that is not anonymous accessible. For example, /rest/api/2/myself.","createDate":"2025-03-27T00:42:05.000+0000","comments":[]},{"summary":"Quick filter ordering not respected ","key":"JRACLOUD-93805","url":"https://jira.atlassian.com/browse/JRACLOUD-93805","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nQuick filter ordering is not being respected in the backlog section of a scrum board. \r\nh3. Steps to Reproduce\r\n # Create multiple quick filters, re-order them \r\n # See the backlog section is not respecting the re-order, the dropdown will not respect the order. \r\n\r\nh3. Expected Results\r\n\r\nRe-ordering quick filters in the quick filters board setting section should re-order the quick filters in the drop-down, though the behavior seems either inconsistent or is no longer working. \r\nh3. Actual Results\r\n\r\nQuick filter ordering is not respected in the drop down sections, behavior seems inconsistent. \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-26T16:14:47.000+0000","comments":[]},{"summary":"Viewing issues in list hides cascading/dependent drop down value","key":"JRACLOUD-93804","url":"https://jira.atlassian.com/browse/JRACLOUD-93804","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn both team and company managed projects for software and business projects, if you have a cascading dependent drop down field in the list view and view an work item in the list, the value for that field will hide, only showing again after refreshing the page\r\n\r\nh3. Steps to Reproduce\r\n # In your project, go to the list view\r\n # Be sure to have a cascading/dependent drop down field in the visualization\r\n # Click the work item key to view it\r\n # Notice how the field value will be hidden when you close the issue and go back to the list view\r\n\r\nHere is a video showing it:\r\n[https://www.loom.com/share/e306b49b27a848bea1730c1b471ec693?sid=edfaadff-daf0-457a-97ae-afbac0d3e5d7]\r\n\r\nh3. Expected Results\r\nThe value to show\r\n\r\nh3. Actual Results\r\nThe value is hidden\r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-26T16:08:13.000+0000","comments":[]},{"summary":"The 'A selection' comparison doesn't work for the 'Select List (Single choice)' field in the Transition field value condition","key":"JRACLOUD-93803","url":"https://jira.atlassian.com/browse/JRACLOUD-93803","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe 'A selection' comparison doesn't work for the 'Select List (Single choice)' field in the Transition field value condition.\r\nh3. Steps to Reproduce\r\n * Use a Scrum project company managed.\r\n * Create a field _List Items_ and add it to screens of the work item\r\n * Use values as item1, item2, item3.\r\n * In the work item add the value item1 to the _List Items_\r\n * Edit the workflow of the work item in the New editor and for In Progress state and add a condition\r\n * !image-2025-03-26-14-14-29-654.png!\r\n\r\nh3. Expected Results\r\n\r\nIn Progress, the transition is available to transit the work item\r\nh3. Actual Results\r\n\r\nIn Progress, transition is not available to transit the work item\r\n\r\nIf you open the condition in old workflow editor you will see the condition as follows.\r\n{noformat}\r\nThe field List Items will have to be equal to value 'item1'. Compared as Option ID.\r\n{noformat}\r\n\r\nThis is incorrect. The user can't add any option id in the condition editor. Users can only select the options by name in the custom field. Perhaps the better idea would be to add the name and the ID of the option in the list to select from when you drop down _This value_ instead of just the name and in the background use the ID only for comparison. This will make it user-friendly. \r\n\r\nh3. Workaround\r\n\r\nUse _Review its value as_ option _Text_ instead of _A selection_","createDate":"2025-03-26T13:18:56.000+0000","comments":[]},{"summary":"Mobile apps - Not able to select teams - iOS and Android","key":"JRACLOUD-93798","url":"https://jira.atlassian.com/browse/JRACLOUD-93798","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe users are unable to select Teams on mobile apps, it works on laptop browser. There was an [incident|https://jira-software.status.atlassian.com/incidents/8p4r9kzpmm2v] reported where some customers were experiencing an issue viewing the values of the Team field in Jira issue view. The issue has been fixed already for web browser, I suspect it is not fixed for the mobile apps.\r\nh3. Steps to Reproduce\r\n # Add Teams field on the work ( issue ) layout.\r\n # Open iOS or Android Jira app.\r\n # Click on Create button\r\n # Select Teams field. \r\n\r\nh3. Expected Results\r\n\r\nTeams list should be shown.\r\nh3. Actual Results\r\n\r\nThe user gets an error \" Are you offline?\". [^Screen_Recording_20250325_150901_Jira.mp4]\r\nh3. Workaround\r\n\r\nThe user can create the work item ( issue ) and then select the Team field option.","createDate":"2025-03-26T07:10:00.000+0000","comments":[]},{"summary":"Status translations for Waiting for Support and Waiting for Customer not translated on Portal","key":"JRACLOUD-93785","url":"https://jira.atlassian.com/browse/JRACLOUD-93785","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nStatus translations for Waiting for Support and Waiting for Customer not translated on Portal.\r\nh3. Steps to Reproduce\r\n # Create a test ticket in a JSM project.\r\n # Set your language preference to Germany and open the request on the portal. \r\n # expected message is: \"Der Anfragestatus wurde zu *Wartet auf Support* geändert,\" but what we’re seeing is: \"Der Anfragestatus wurde zu  *{{Waiting for support}}*  geändert.\"\r\n # Some statuses like in progress and resolved are shown correctly. \r\n\r\nh3. Expected Results\r\n\r\nThe status are translated based on the language translation configured.\r\nh3. Actual Results\r\n\r\nThe statuses show the english translation.\r\nh3. Workaround\r\n\r\nTry giving an alternate name for the workflow statuses and translate those under Workflow statuses section.","createDate":"2025-03-25T14:17:02.000+0000","comments":[]},{"summary":"Automatic formatting in Jira's comment and text fields disrupts JSON code structure in Firefox running in macOS","key":"JRACLOUD-93784","url":"https://jira.atlassian.com/browse/JRACLOUD-93784","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen editing a *code block* of JSON or any other code, the editor in Jira issue’s Comments or description or multi-line text field, provides automatic formatting which breaks the structure of the JSON or any other code block. To understand the issue please check the following video:\r\nThe issue is only replicable in {*}Firefox v136.0.2 or v136.0.1 running on MacOS{*}.\r\n\r\nFor example, in the editor, when typing :\r\n\r\n`{\r\n\r\n\\n\r\n\r\nType here something then give another newline in the next line\r\n\r\n\\n \r\n\r\n}\r\n\r\nThe auto-formatting will remove the new line and take the closing curly brackets on the above line at the end of your text. \r\nh3. Steps to Reproduce\r\n # Go to comments or description field.\r\n # Insert a code block.\r\n # Inside the code block type the below first:\r\n # \r\n{code:java}\r\n{\r\n\r\n}{code}\r\n\r\n # now in the space or the empty line that you have created in the above example, try to put a \"\" double quotes.\r\n\r\nh3. Expected Results\r\n\r\nThe code block should look like: \r\n\r\n \r\n{code:java}\r\n{\r\n\"text\": \"space\";\r\n}\r\n {code}\r\n \r\n\r\n \r\nh3. Actual Results\r\n\r\nAuto formatting kicks in Firefox browser and removes the new line and pushes the closing curly bracket to the above line, breaking the formatting:\r\n{noformat}\r\n{ \r\n\"text\": \"space\";} {noformat}\r\nh3. Workaround\r\n\r\nUse any browser other than Firefox on MacOS devices as a workaround to avoid this issue. ","createDate":"2025-03-25T14:11:23.000+0000","comments":[]},{"summary":".Docx/.Doc files preview does not show Korean text","key":"JRACLOUD-93770","url":"https://jira.atlassian.com/browse/JRACLOUD-93770","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n.Docx/.Doc files preview does not show Korean text. \r\nh3. Steps to Reproduce\r\n # Create a .docx file and add both English and Korean text\r\n # Upload this file to Jira ticket\r\n\r\nh3. Expected Results\r\n\r\nIn preview everything should show up.\r\nh3. Actual Results\r\n\r\nOnly English text shows and not Korean. \r\nh3. Workaround\r\n\r\nConvert the file into pdf and then upload. The preview should show all the text now.","createDate":"2025-03-25T03:57:04.000+0000","comments":[{"text":"Hello, all people tracking this ticket,\r\n\r\nI'm pleased to announce that I am working on a fix to improve language support in our preview generation. This fix will configure our preview generation to use the [Noto|https://fonts.google.com/noto] font (due to its support of all writing systems and open licence) as a fallback font if the document's font is not available.\r\n\r\nThe current ETA for this fix is the end of this month. \r\n\r\nThank you for your patience.\r\n\r\nRegards,\r\n\r\nDaniel Barrett\r\nSoftware Engineer\r\nMedia Experiences and Infrastructure  ","author":"Daniel Barrett"}]},{"summary":"Adding more than 1 value to a multi select field breaks Activity Stream Gadget on Summary page","key":"JRACLOUD-93765","url":"https://jira.atlassian.com/browse/JRACLOUD-93765","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAdding more than a single value at one time to a multi select field such as \"Component\" \"Fix Version\" \"Affects Version\"  \"Multi select\" type custom field\r\n\r\nh3. Steps to Reproduce\r\n # add 2 values to either the  \"Component\", \"Fix Version\", \"Affects Version\", or  \"Multi select\" custom field on a single issue as a single action\r\n # Navigate to Project > Summary\r\n\r\nh3. Expected Results\r\nThe Summary shows recent activity in the activity gadget.\r\n\r\nh3. Actual Results\r\nActivity gadget displays error:\r\n\r\n{code}\r\nSomething went wrong\r\nTry again by refreshing this section.\r\n\r\nRefresh\r\n{code}\r\n!Screenshot 2025-03-24 at 2.08.15 PM.png|thumbnail!\r\n\r\nA 500 Error on a GET to the URL \r\n- Request URL:\r\nhttps://<BASE_URL>.atlassian.net/rest/internal/data/activity-stream/project/<Project_ID>\r\n\r\n similar to the following can be seen in the Network tab of the browsers devtools on page load, Noting this was tested using the Component field so the field name will varry depending on trigger condition:\r\n{code}\r\n{\r\n    \"message\": \"Duplicate key Component (attempted merging values com.atlassian.jira.issue.history.ChangeItemBean@23be6b8e[fieldType=jira,field=Component,fieldId=components,fieldCustomType=<null>,from=<null>,fromString=<null>,fromAdf=<null>,to=10002,toString=abc-xyz,toAdf=<null>,created=2025-03-24 20:58:22.082,fieldParams={},tmpFromAccountId=Optional.empty,tmpToAccountId=Optional.empty] and com.atlassian.jira.issue.history.ChangeItemBean@49890d03[fieldType=jira,field=Component,fieldId=components,fieldCustomType=<null>,from=<null>,fromString=<null>,fromAdf=<null>,to=10010,toString=AnotherComponent,toAdf=<null>,created=2025-03-24 20:58:22.082,fieldParams={},tmpFromAccountId=Optional.empty,tmpToAccountId=Optional.empty])\",\r\n    \"status-code\": 500,\r\n    \"stack-trace\": \"\"\r\n}\r\n{code}\r\n\r\nNOTE:\r\nIt breaks with a duplicate key exception when a history item has multiple items for the same field name. One example to replicate this is to create 2 release versions and add those 2 at the same time in the issue which will create one history item with 2 fix version field change. This will end up throwing \"Duplicate key Fix Version\"\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-24T21:14:58.000+0000","comments":[{"text":"Issue causing the exception to be thrown has been resolved now.","author":"Shouhei Yamauchi"}]},{"summary":"Changes in board View settings are lost for added fields in the card layout","key":"JRACLOUD-93764","url":"https://jira.atlassian.com/browse/JRACLOUD-93764","type":"Bug","priority":"","description":"h3. Issue Summary\r\nChanges in board View settings are lost for added fields in the card layout\r\n\r\nh3. Steps to Reproduce\r\n# Go to any Scrum board > Configure board > Card layout\r\n# Add some fields for the \"Active sprint\" section.\r\n# Go back to the board, open the view settings, and flip the switch for one of the added fields.\r\n# Open an issue from the board.\r\n\r\nh3. Expected Results\r\nThe issue is opened and the selected settings remain\r\n\r\nh3. Actual Results\r\nThe issue is opened, and the selection made in the View settings reverts to the previous state.\r\nReplication demo: [^View settings reset.mp4] \r\n\r\nh3. Workaround\r\nAfter making changes in the added fields section of the View settings, refresh the page, and the settings will be saved.","createDate":"2025-03-24T17:19:33.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/JST-1118124","author":"Abhineet Saxena"}]},{"summary":"The Use ISO8601 standard in Date Picker option inside the Look and Feel system setting in Jira is not working.","key":"JRACLOUD-93762","url":"https://jira.atlassian.com/browse/JRACLOUD-93762","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe *Use ISO8601 standard in Date Picker* option inside the Look and Feel system setting in Jira is not working. You can change from/to yes or no, but no changes happen on Jira.\r\n\r\nh3. Steps to Reproduce\r\n # Open any issue already created and select a due date checking if the first column is Monday or Sunday\r\n # Open the System settings by going https://<your-site>.atlassian.net/jira/settings/system/general-configuration\r\n # Click on Look and Fell on the left Menu\r\n # Change the Use ISO8601 standard in Date Picker option to yes or no\r\n # Reload the issue of step 1. The column should have changed from Monday to Sunday, or vice-versa, after the last step change.\r\n\r\nh3. Expected Results\r\n\r\nThe date picker menu should change the first column from Monday to Sunday, or vice-versa, depending if you choose yes or no.\r\nh3. Actual Results\r\n\r\nThe change doesn't happen.\r\nh3. Workaround\r\n\r\nThese changes occur depending on the language of the user. So following the steps below you can change the date picker.\r\n # Open Jira\r\n # Click on your photo/image in the top right corner > Manage account\r\n # On the new page click on Account Preferences on the top menu\r\n # If you select English (UK) the date picker will start on Monday, f you select English (US) the date picker will start on Sunday.","createDate":"2025-03-24T15:15:46.000+0000","comments":[{"text":"While it is a minor issue, it is a bit annoying. In Canada, we use the UK form of the English language, but as we live in the Americas, we use calendars which start on Sundays.","author":"Luc Trepanier"}]},{"summary":"Avatar is not loading in the \"Who's Looking for Jira Cloud\" app","key":"JRACLOUD-93759","url":"https://jira.atlassian.com/browse/JRACLOUD-93759","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAvatar is not loading in the *\"Who's Looking for Jira Cloud\"* app.\r\nh3. Steps to Reproduce\r\n # Install the *\"Who's Looking for Jira Cloud\"* app on a Jira Cloud instance.\r\n # Navigate to a Jira issue where the avatar should be displayed.\r\n # Observe that the avatar does not load.\r\n\r\nh3. Expected Results\r\n\r\nThe app should display the avatar correctly on the Jira UI.\r\nh3. Actual Results\r\n * The avatar does not load.\r\n * The browser console logs the following error:\r\n{quote}_\"You need to enable JavaScript to run this app.\"_\r\n{quote}\r\n * The iframe fails to load the content due to potential Content Security Policy (CSP) restrictions.\r\n * Direct access to the image URL is not possible as the URL is shortened.\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is *no known workaround* for this behavior.\r\nA workaround will be added here when available.","createDate":"2025-03-24T12:22:47.000+0000","comments":[]},{"summary":"Attachment on this issue macro no longer working","key":"JRACLOUD-93750","url":"https://jira.atlassian.com/browse/JRACLOUD-93750","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe attachment on this issue macro found within issue edit/comment is no longer working as it simply does not provide any action post-click:\r\n\r\n!Screenshot 2025-03-24 at 11.41.57 am.png|width=224,height=140!\r\nh3. Steps to Reproduce\r\n # Open a comment dialog or edit a description.\r\n # Click \"+\" > Attachments on this issue, or do //att\r\n # No response or feedback after clicking the component.\r\n\r\nh3. Expected Results\r\n\r\nThe ability to reference an attachment already on the issue.\r\nh3. Actual Results\r\n\r\nNo response - tested on multiple production instances.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-24T00:44:50.000+0000","comments":[{"text":"Thanks for bearing with us. The team has found the issue and addressed it. If you have further issues please try a hard refresh on your browser to ensure you're using the latest version. If it still persists please raise a new ticket and link this one.\r\n\r\nRegards,\r\n\r\nStuart","author":"Stuart Hinchliff"}]},{"summary":"Read-only text field is not getting searched in free text searcher","key":"JRACLOUD-93740","url":"https://jira.atlassian.com/browse/JRACLOUD-93740","type":"Bug","priority":"","description":"Based on the [JQL Fields documentation : text field|https://support.atlassian.com/jira-software-cloud/docs/jql-fields/#Text-fields], the textfields ~ operator should include \"Read-only Text Field,\" but in practice, it does not return results when searching for values within this field.\r\n{noformat}\r\nDocumentation Snippet :- \r\nText fields\r\nSimilar to text, this is a master-field that allows you to search in most text fields (except Comments, Worklog) for work items, such as:\r\n- Summary\r\n- Description\r\n- Environment\r\n- custom fields that use the \"free text searcher\"; this includes custom fields of the following built-in custom field types:\r\n   - Free text field (unlimited text)\r\n   - Text field (< 255 characters)\r\n   - Read-only text field\r\nThe textfields master-field can only be used with the CONTAINS operator (\"~\").\r\n{noformat}\r\n \r\n*Issue Summary:* *\r\n * When searching the field directly as Free Text searcher which is using textfields ~ \"<value>\" in JQL, the field is not included in results (which contradicts the [documentation|https://support.atlassian.com/jira-software-cloud/docs/jql-fields/#Text-fields]).\r\n * However, when using text ~ \"<value>\", results appear as expected.\r\n\r\n*Please refer the below attached screen recording where i have replicated the issue  !*","createDate":"2025-03-21T08:05:22.000+0000","comments":[]},{"summary":"Archived Jira tickets are preventing the deletion of the associated sprint.","key":"JRACLOUD-93735","url":"https://jira.atlassian.com/browse/JRACLOUD-93735","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSprint can't be deleted from the Jira board if associated with Archved Jira tickets\r\nh3. Steps to Reproduce\r\n # Add Manage sprint and schedule issue permission.\r\n # Create Sprint\r\n # Add a Jira ticket to the sprint\r\n # Archive Jira ticket\r\n # Delete sprint \r\n\r\n{code:java}\r\nChallenges:\r\n\r\n- JQL search for the sprint, Reports, Sprint/Board etc will not return Archived Jira tickets. Hence, it looks empty.\r\n- There are no explicit details that show Sprint deletion is blocked due to Archived Jira issues.\r\n{code}\r\nh3. Expected Results\r\n\r\nSprint should be deleted if the user has necessary permissions (Manage sprint & schedule issue)\r\nh3. Actual Results\r\n\r\nSprint can't be deleted, and receive below details in browser logs\r\n{code:java}\r\n{\r\n    \"errors\": [\r\n        {\r\n            \"message\": \"We couldn't make that happen because you don't have Schedule Issues permission.\",\r\n            \"locations\": [\r\n                {\r\n                    \"line\": 2,\r\n                    \"column\": 9\r\n                }\r\n            ],\r\n            \"path\": [\r\n                \"deleteSprint\"\r\n            ],\r\n            \"extensions\": {\r\n                \"status\": [\r\n                    401\r\n                ],\r\n                \"statusCode\": 401,\r\n                \"errorType\": null,\r\n                \"operationName\": \"BacklogDeleteSprint\",\r\n                \"tenantId\": \"abcd1234567890qwe\",\r\n                \"userMessage\": \"We couldn't make that happen because you don't have Schedule Issues permission.\",\r\n                \"classification\": \"DataFetchingException\"\r\n            }\r\n        }\r\n    ],\r\n    \"data\": {\r\n        \"deleteSprint\": null\r\n    }\r\n} {code}\r\n \r\n\r\n{*}Suggestion{*}:\r\n * A clear message to provide cause(Issue archive in this case)\r\n * A column under the archive list to display Sprints\r\nh3.  \r\n\r\n \r\nh3. Workaround\r\n\r\nUnarchive Jira tickets, and proceed with Sprint deletion.","createDate":"2025-03-20T20:14:46.000+0000","comments":[]},{"summary":"User groups failed to sync to Global Permissions despite the groups are available in User Management and Audit log provides a misleading information.","key":"JRACLOUD-93726","url":"https://jira.atlassian.com/browse/JRACLOUD-93726","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nGroups that are available in the User Management/Directory section are not getting synced and visible under the Global Permissions.\r\n\r\nFurther, Audit logs misleads that the Added Jira global permission *Administer Jira* to <group-name>\r\nh3. Steps to Reproduce\r\n # Goto [https://admin.atlassian.com/o/]<ORG_ID>/products/jira-admin/ and validate if the desired groups are reflecting under jira-admin section with product admin access. \r\n # Validate groups should reflect under the Global permissions.\r\n\r\nh3. Expected Results\r\n\r\nThe desired groups should be synced and reflecting under the Global Permissions.\r\nh3. Actual Results\r\n\r\nDesired groups are not synced and added to the Global Permissions.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-20T10:27:22.000+0000","comments":[]},{"summary":"Build Links in Jira Point to Old Workspace After Bitbucket Repo Transfer","key":"JRACLOUD-93720","url":"https://jira.atlassian.com/browse/JRACLOUD-93720","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a Bitbucket repository is transferred from one workspace to another, build links in the *Development panel* of related Jira issues do not update to reflect the new workspace. Instead, they continue to point to the old workspace, leading to broken or misdirected links.\r\nh3. Steps to Reproduce\r\n # Create a Bitbucket repository in Workspace A.\r\n # Link the repository to Jira and configure pipelines \r\n # Trigger a build that is associated with a Jira issue; the Development panel in Jira shows the build link correctly.\r\n # Transfer the repository from Workspace A to Workspace B.\r\n\r\nh3. Expected Results\r\n\r\nThe build link in the Jira issue's Development panel should point to the new {*}Workspace B{*}.\r\nh3. Actual Results\r\n\r\nThe build link in the Jira issue still points to the old repository URL under {*}Workspace A{*}, leading to 404 errors.","createDate":"2025-03-19T15:22:51.000+0000","comments":[]},{"summary":"Redirection loop when trying to access Jira via approved domains - \"It looks like our database is taking longer than usual to sync up\"","key":"JRACLOUD-93719","url":"https://jira.atlassian.com/browse/JRACLOUD-93719","type":"Bug","priority":"","description":"This behavior was originally reported on bug ID-8761. \r\n\r\nProviding some context. The issue was happening every time someone tried to access JSM for the first time. The situation has drastically improved, but it seems like the issue is still happening intermittently (1 out of 10 attempts). \r\n----\r\nWhen the \"User Access Settings\" are configured to automatically grant Jira licenses to approved domains, users can experience a redirection loop that sometimes end up with the error:\r\n{quote}You're almost there\r\n\r\nIt looks like our database is taking a little longer than usual to sync up. Wait a few moments then try again. If you continue to see this error, raise a [support request|https://support.atlassian.com/contact/].\"\r\n{quote}\r\nh3. Steps to Reproduce\r\n # Under \"User Access Settings\", make sure the approved domain is granted access to Jira.\r\n # Remove access to Jira for one test user from that domain.\r\n # Have the user visit the Jira product.\r\n\r\nh3. Expected Results\r\n * The user should get a screen that they're joining Jira and then seamlessly be redirected to the page they were trying to access.\r\n\r\nh3. Actual Results\r\n * User is sent to a {*}redirection loop{*}, where they might end with the following message and the option to try again:\r\n!image-2025-01-30-16-22-13-551.png|width=327,height=400!\r\n\r\nh3. Workaround\r\n * In most cases, even when receiving the error the license is granted. So clicking on _Try again_ or refreshing the page fixed the issue.\r\n * If the user is not granted access after retrying and refreshing the page, the admin needs to explicitly add the user to the product access group for Jira.","createDate":"2025-01-30T15:23:47.000+0000","comments":[{"text":"Hi, the development team has made improvements that resolved this bug and we can confirmed that it is no longer happening. We will monitor the changes for a few days before we close this. ","author":"Nick Theng"}]},{"summary":"Field having multiple contexts shows None/Error on transition screen for old/new experience ","key":"JRACLOUD-93718","url":"https://jira.atlassian.com/browse/JRACLOUD-93718","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA select/Checkbox type field with multiple contexts shows None/Error on the transition screen for old/new experiences. \r\nh3. Steps to Reproduce\r\n # Create a Select/Checkbox (option type) field with a few options as global context.\r\n # Create Jira tickets with existing options in a project\r\n!image-2025-03-19-10-33-07-055.png|width=443,height=207!\r\n # Add new context with the same options but associate it with the Project \r\n!image-2025-03-19-10-30-38-307.png|width=290,height=268!\r\n # Add the Select/Option field on the workflow transition screen.\r\n # Change the status of the Jira ticket that has a transition screen present.\r\n # In Old Transition Experience:\r\n*The existing value of the field becomes NONE; users end up with a field value changed.* \r\n!image-2025-03-19-10-35-52-088.png|width=298,height=370!\r\n # In a New transition experience, Field shows an error message to select the option(from the newly associated context)\r\n!image-2025-03-19-10-39-30-812.png|width=305,height=338!\r\n\r\nh3. Expected Results\r\n\r\nIn both Old and New transition experiences, existing field value should be retained despite having the same option name with multiple contexts.\r\nh3. Actual Results\r\n\r\nOld transition experience: The field value is removed when the \"NONE\" option is replaced automatically on the transition screen.\r\n\r\nNew transition experience: The field shows an error message to select the options from the project scoped context.\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\n\r\nAdvised to maintain single context.","createDate":"2025-03-19T16:43:51.000+0000","comments":[]},{"summary":"3rd party apps validators and conditions for certain rich-text fields fail when performing transitions","key":"JRACLOUD-93701","url":"https://jira.atlassian.com/browse/JRACLOUD-93701","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUser is unable to transition issues when using a  3rd party apps workflow conditions or validators for multi-line text fields.\r\nh3. Steps to Reproduce\r\n # Install a 3rd party app (e.g. script runner) for the instance\r\n # Create a custom multi-line text custom field\r\n # Add a Validator or Condition from this app for this field using Jira expression on a transition\r\ne.g issue.customfield_<ID>.replace('\\n','Text')\r\n # Perform a transition via the new issue transition experience\r\n # Try on the old issue transition - we can create an issue\r\n\r\n \r\n\r\nRoot cause:\r\n\r\nThe new transition experience utilises the ADF (Atlassian Document Format), while various APIs rely on older approaches that depend on Wiki Markup for multi-line text fields. Customers may have crafted Jira Expressions based on Wiki Markup for these conditions and validators, which cannot parse text from ADF representations due to these format changes. Consequently, validators and conditions fail, causing transitions to be unavailable or validations to return incorrect results. This results in the Jira Expression framework used by ScriptRunner and other apps not functioning as intended.\r\nh3. Expected Results\r\n\r\nThe issue can be transitioned.\r\nh3. Actual Results\r\n\r\nWe can not perform the transition.\r\nh3. Workaround\r\n\r\nUse Single line text field instead OR make modifications to their workflow validators set up on multi-line text fields. \r\n\r\nThese modifications should ideally cater for fields being in either a wiki format or a ADF format when being processed.\r\n\r\nFor example, the following snippet will supply a function called plainText that can be used to transform either ADF or RichText fields into plainText. \r\n\r\n{code}\r\nlet plainTextValue = value => typeof value == 'Map' ? new RichText(value).plainText : typeof value == 'RichText' ? value.plainText : value ;\r\nplainTextValue(issue.customfield_10000) == \"Some text\" || plainTextValue(issue.description) == \"Some text\"\r\n{code}\r\n\r\nFor more detail, you can review:\r\n * [Working with JSON|https://developer.atlassian.com/cloud/jira/platform/jira-expressions/#working-with-json]\r\n * [RichText constructor from ADF Map|https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference/#richtext]\r\n * [Changes impacting on workflow validators and conditions during transitions |https://community.atlassian.com/forums/Jira-articles/Changes-affecting-workflow-validators-and-post-functions-on-the/ba-p/2721909] \r\n * [Changes impacting on workflow validators and conditions during issue create |https://community.atlassian.com/forums/Jira-articles/Changes-affecting-workflow-validators-on-the-new-Global-Issue/ba-p/2085034#M5132]\r\n\r\nUsers on the old issue transition experience can update their existing workflow validators and test these changes by enabling the switch to the New issue transition experience, found under Settings > Personal Jira Settings.","createDate":"2025-03-18T22:30:59.000+0000","comments":[]},{"summary":"Unable to clone work item(Issue) with user having create Issue permission","key":"JRACLOUD-93691","url":"https://jira.atlassian.com/browse/JRACLOUD-93691","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUser granted *Create issue* permission is not able to clone issue without having permission \"Assign Issue\". Clone fails with error \"No value present\".\r\nh3. Steps to Reproduce\r\n # Have a Company-Managed project\r\n # Assign Create issue and Browse Project permission to a user\r\n # Make sure the user does not have Assign issue permission.\r\n # Clone the issue \r\n\r\nh3. Expected Results\r\n\r\nWork Item should be cloned\r\nh3. Actual Results\r\n\r\nCloning work Item fails with error \"No value present\"\r\n\r\n!Screenshot 2025-03-17 at 23.20.56.png|width=534,height=165!\r\nh3. Workaround\r\n\r\nGrant *Assign Issue* permission to user and they are able to clone work Item","createDate":"2025-03-18T12:30:10.000+0000","comments":[{"text":"Hello Atlassian,\r\n\r\nDo have a date to fix this bug, please?\r\n\r\nThank you\r\n\r\n ","author":"Mohand TALBI"}]},{"summary":"The \"You don't have permission to transit this issue\" error message will appear when attempting to transition Jira issues in MS Teams/Outlook even though the user has all the necessary project permissions.","key":"JRACLOUD-93682","url":"https://jira.atlassian.com/browse/JRACLOUD-93682","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"You don't have permission to transit this issue\" error message will appear when attempting to transition Jira issues in MS Teams/Outlook even though the user has all the necessary project permissions.\r\nh3. Steps to Reproduce\r\n # Set up MS Teams/Outlook integration with Jira Cloud.\r\n # Look up Jira issues via any filters in MS Teams/Outlook.\r\n\r\nh3. Expected Results\r\n * The user can transition issues directly in MS Teams/Outlook if the user has the necessary project permissions.\r\n\r\nh3. Actual Results\r\n * Try transitioning the issues. The \"You don't have permission to transit this issue\" error message will appear even though the user has all the necessary project permissions.\r\n\r\nh3. Workaround\r\n * Try searching the issues specifically in MS Teams/Outlook {*}again{*}, for example, by their issue keys. The transitions will now be available to the same user.","createDate":"2025-03-17T23:50:46.000+0000","comments":[]},{"summary":"Text is Strikethrough for a multiline custom field in the detailed popup window in Issue view ","key":"JRACLOUD-93676","url":"https://jira.atlassian.com/browse/JRACLOUD-93676","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsing '-' can cause the text to strikethrough in the popup window in Issue view \r\nSelect _List view_ and add the column for the field Multiline text field with _Default Text Renderer_ configured.\r\nh3. Steps to Reproduce\r\n * Create the custom field named _Release_ _Notes_ as Multiline text field with _Default Text Renderer_ configured.\r\n * Add this field to a company-managed project screen.\r\n * Use the following text. use copy paste.\r\n\r\nText some Text \"&,-.\" Test some Text \"--- Warn ---\"\r\n * Save the work item\r\n * Search for the work item in the issue view\r\n * Switch to Issue view\r\n * Add the column for the _Release Notes_ field\r\n * Click on the field and check the pop up that shows the field information\r\n\r\nNote for clarity I am escaping the hyphen in Text view in this editor. \r\nh3. Expected Results\r\n\r\nThe pop-up window shouldn't strike through text that has hyphens at the start and end. Which renderer is used in the popup should depend on the custom field configuration, like default text or wiki-style. The renderer should match the custom field so that reserved formatting characters only work if the Wiki-style renderer is used.\r\nh3. Actual Results\r\n\r\nThe opening and ending '-' hyphen strikethrough the text in between.\r\nh3. Workaround\r\n\r\nUse space after opening hyphen or closing hyphen e.g\r\n\r\n&,- this is test-","createDate":"2025-03-17T17:07:46.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Vishal from the Jira Issue view team. Thank you for raising this bug and bringing it to our attention. After examining this issue, we weren't able to reproduce this behavior within our instances. To set the right expectations, we are closing this bug since we cannot fix the issue if we cannot replicate it.\r\n\r\nIf this is still an issue for you, please let us know via raising a support ticket and quoting this bug. Thank you again for providing valuable feedback to our team!\r\n\r\nBest,\r\n\r\nVishal Tekwani","author":"Vishal Tekwani"}]},{"summary":"MS Teams app shows no results when sort column","key":"JRACLOUD-93649","url":"https://jira.atlassian.com/browse/JRACLOUD-93649","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn MS teams when you try to sort issues you get empty results\r\nh3. Steps to Reproduce\r\n # Go to MS teams and setup the Jira integration\r\n # Go to the issues section\r\n # Click on sort in any column\r\n # !image-2025-03-14-09-57-47-567.png|width=489,height=328!\r\n\r\nh3. Expected Results\r\n\r\nMS teams should sort the issues correctly\r\nh3. Actual Results\r\n\r\nNo results:\r\n\r\n!image-2025-03-14-09-55-37-549.png|width=471,height=259!\r\nh3. Workaround\r\n\r\nNo current workaround","createDate":"2025-03-14T16:00:00.000+0000","comments":[]},{"summary":"Workflow Status Selection Issue: Scrolling Jumps Back to Top","key":"JRACLOUD-93647","url":"https://jira.atlassian.com/browse/JRACLOUD-93647","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen changing the workflow status, users experience an issue where scrolling down to select a status causes the selection to quickly jump back to the top of the status list. This requires users to scroll down again or close the window and attempt the status selection once more.\r\n\r\nh3. Steps to Reproduce\r\n# Open an issue which has large number of status and requires scrolling down\r\n# Navigate to the status to bottom of the list\r\n\r\n\r\nh3. Expected Results\r\n# User should be able to see the status in the bottom of the list\r\n\r\n\r\nh3. Actual Results\r\nThe list refreshes quickly to jump back to the top of the status list\r\n\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-14T15:09:56.000+0000","comments":[]},{"summary":"\"Error while searching\" error is observed when attempting to link pages from the Sprint Report.","key":"JRACLOUD-93633","url":"https://jira.atlassian.com/browse/JRACLOUD-93633","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nTrying to link a Confluence page to a Sprint from the _Sprint Report_ throws and error: '{_}Error while searching{_}'\r\n{quote}Status Code:401 Unauthorized:\r\n - \r\n{code:java}\r\nSC = 401 - java.lang.Throwable: The application link for the Confluence server has invalid credentials. Please check the authentication settings.\r\n{code}\r\n\r\n - !Screenshot 2025-03-13 at 5.06.54 PM.png|width=486,height=195!{quote}\r\nh3. Steps to Reproduce\r\n # Access any SCRUM board > Reports.\r\n # Select Reports > Sprint Report.\r\n # On the report, click on {*}View linked pages{*}.\r\n # Click on {*}LInk Page{*}, and search.\r\n(!) Any search will fail with the message: \"{*}Error while searching{*}\".\r\n\r\nh3. Expected Results\r\n\r\nSearch to return the page or an error saying that the page doesn't exists.\r\nh3. Actual Results\r\n\r\nWe get the error \"{*}Error while searching{*}\".\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-13T11:43:48.000+0000","comments":[{"text":"looking at this now. we didn't fix this previously but worked with a confluence team who did a fix. let me find who that was and direct you to the right person.","author":"Greg Macbean"},{"text":"a quick update on this. we have found the team that knows about this api. they are currently looking for a fix. feedback to follow. will update ticket ownership to reflect.\r\n\r\n[https://atlassian.slack.com/archives/CL4DDUGUQ/p1743526944041129?thread_ts=1743398641.553269&cid=CL4DDUGUQ]\r\n\r\n ","author":"Greg Macbean"}]},{"summary":"Italian translation for the Description of the validator 'Field Required Validator' in Jira is incorrect","key":"JRACLOUD-93622","url":"https://jira.atlassian.com/browse/JRACLOUD-93622","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen creating a new validator under a transition, the Italian translation for the Description of the validator 'Field Required Validator' in Jira is incorrect:\r\n\r\nActual in English:\r\n!image-2025-03-12-13-48-14-641.png!\r\n\r\nIn Italian:\r\n!image-2025-03-12-13-49-00-609.png!\r\n\r\nBrowser translation of the Italian version:\r\n!image-2025-03-12-13-49-48-316.png!\r\nh3. Steps to Reproduce\r\n # Set your Jira language to 'Italian' under Profile settings.\r\n # Navigate to a Workflow in Edit mode.\r\n # Select Validators for a Transition.\r\n # Select 'Aggiungi validatore'.\r\n\r\nh3. Expected Results\r\n\r\nThe Italian version for the Description of 'Field required validator' should be correctly translated from: \"Field must not be empty during the transition.\"\r\nh3. Actual Results\r\n\r\nThe Italian version instead translates to: \"The field must be empty during the transition.\"\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-12T12:55:31.000+0000","comments":[]},{"summary":"Attachment Failure: All the chosen Images are not added to the comments","key":"JRACLOUD-93601","url":"https://jira.atlassian.com/browse/JRACLOUD-93601","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers are unable to upload all the selected images to a ticket's comments section. The problem persisted across different browsers and operating systems, including Mac and Windows.\r\nh3. Steps to Reproduce\r\n # Navigate to any ticket, click on the comments\r\n # Click on the {*}add image video or file option{*}, or try clicking on {*}+ sign{*}, in the search type in *image.*\r\n # Try uploading at least two image files simultaneously. I tried with 2, 3, 4, and 5 files.\r\n\r\nh3. Expected Results\r\n\r\nAll the files get uploaded without any issues.\r\nh3. Actual Results\r\n * Only one file uploaded when attempting two files\r\n * Only two files uploaded when attempting three or four files\r\n * Only three files uploaded when attempting five files\r\n\r\nh3. Workaround\r\n\r\nThis only happens when the *comment* is empty. If you type any character prior to *uploading* the *files* they will be attached just fine.","createDate":"2025-03-11T20:25:23.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Vito from the Editor team. This bug is fixed and I confirmed the functionality to be working as expected. \r\n\r\nSincerely,\r\nVito","author":"Vito"}]},{"summary":"Multi-line text fields do not respect the \"hide when empty\" issue layout configuration","key":"JRACLOUD-93597","url":"https://jira.atlassian.com/browse/JRACLOUD-93597","type":"Bug","priority":"","description":"h3. Issue Summary\r\nMulti-line text fields do not respect the \"hide when empty\" issue layout configuration if there was a value added to it that was removed\r\n\r\nh3. Steps to Reproduce\r\n # Have a multi-line text field on the \"hide when empty\" section of the Issue layout configuration\r\n # Create a new ticket with no value to the multi-line text field\r\n # Add a value to it, the field will be shown\r\n # Remove the value\r\n\r\nh3. Expected Results\r\nThe field is hidden again\r\n\r\nh3. Actual Results\r\nThe field is always shown in the issue view even when empty\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-11T17:18:19.000+0000","comments":[]},{"summary":"Upon checking an action item, the entire description on the subtask is being replaced with the parent issue description","key":"JRACLOUD-93584","url":"https://jira.atlassian.com/browse/JRACLOUD-93584","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe sub-task description is intermittently replaced with the parent issue's description when an action item (checkbox) is clicked\r\nh3. Steps to Reproduce\r\n # Create a parent issue in Jira or Jira Service Management. Set the Description to some text, or some bullets, but don’t include any action items.\r\n # Create a couple of sub-tasks. Add 3 or 4 action items to the Description of each sub-task. Leave all of them unchecked.\r\n # {_}Without going into edit mode{_}, click the first or the second action item within a sub-task’s Description.\r\n\r\nStep 3 above usually triggers the over-writing of the description with the parent’s description.\r\nh3. Expected Results\r\n\r\nExpected results would be for the action item check boxes to simply become checked with no change to the field value. \r\nh3. Actual Results\r\n\r\nThe field value that previously had the action items is replaced with the description of the parent issue. \r\nThis can be reproduced on Jira Software and Jira Service Management Projects as well\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available.","createDate":"2025-03-07T21:18:42.000+0000","comments":[]},{"summary":"Features page in Team Managed Projects does not load","key":"JRACLOUD-93577","url":"https://jira.atlassian.com/browse/JRACLOUD-93577","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFeatures page in Team Managed Projects does not load if associated board's filter is private\r\n\r\nh3. Steps to Reproduce\r\n # Create a Team Managed project\r\n # Update board's filter so it's owned by another user and is private\r\n # Try viewing 'Features' page in project's settings\r\n\r\nh3. Expected Results\r\n\r\nFeatures page loads properly\r\n\r\nh3. Actual Results\r\n\r\nUI shows a message like:\r\n\r\n{quote}\r\nProject not found\r\nYou tried to access a project that doesn't exist, or that you don't have permission to access. Speak to your Jira admin or Project admin to get access. \r\n{quote}\r\n\r\nBrowser console shows:\r\n\r\n{code}\r\nGET https://<instance>.atlassian.net/rest/agile/latest/board/<board ID>/features 404 (Not Found)\r\n{code}\r\n\r\nh3. Workaround\r\n\r\nEnsure associated filter is shared with projects/groups that you are a member of","createDate":"2025-03-10T14:30:33.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/MOVE-1780093","author":"Pallavi Biroli"}]},{"summary":"When searching for the team in JQL, it displays Team ID instead of Team name.","key":"JRACLOUD-93561","url":"https://jira.atlassian.com/browse/JRACLOUD-93561","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen searching for the team in JQL, it displays Team ID instead of Team name.\r\n\r\nEven though this is by design and expected in the backend to have a faster search, as QOL for the customers the team name should be displayed in the JQL.\r\nh3. Steps to Reproduce\r\n # Go to any Jira cloud site under  Filter -> View All Issues\r\n # Type \"Team[Team]\" = then select a team name, the JQL changes back to Team ID instead of displaying the selected Team Name.\r\n\r\nh3. Expected Results\r\n\r\nThe team name is expected to be populated in the JQL.\r\nh3. Actual Results\r\n\r\nThe team ID is populated in the JQL.\r\nh3. Workaround\r\n\r\nN/A","createDate":"2025-03-07T18:57:33.000+0000","comments":[]},{"summary":"Slack: Inaccurate reading order","key":"JRACLOUD-93503","url":"https://jira.atlassian.com/browse/JRACLOUD-93503","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the slack page, the “Issue title” link and \"More options\" button does not have an appropriate reading order.\r\nh3. Steps to Reproduce\r\n # Install and open the Jira cloud app or Slack.\r\n # Open the app and connect to a server and project.\r\n # Read through the results with a screen reader.\r\n # Observe that the reading order is not followed as per the logical order.\r\n\r\nh3. Screen Recording\r\n\r\n[^Inaccurate reading order.mov]\r\nh3. Actual Results\r\n\r\nThe More Options menu to the right of an issue title is read first, then the title of the issue is read. This makes it confusing for a screen reader user to determine the relationship between the more options menu and the issue it acts upon, especially when reading through a large list of issues. Additionally, the tab order is reading the content from right to left and this inappropriate reading order might disorient the users of screen readers. That the content is available at the end might confuse or mislead them.\r\n\r\nFor instance, screen reader read the content in the following order of the page:\r\n # \"More options\" button\r\n # “Issue title” link\r\n\r\nThis inaccurate reading order will create confusion for screen reader users.\r\nh3. Expected Results\r\n\r\nScreen reader should read the content in the correct logical order for its users.\r\n\r\nPlace the content of webpages in correct meaningful sequence in the source code. Move the content in the page source in the below mentioned order. CSS can be used to maintain the presentation of the page. Assistive technologies navigate content using the order in which elements appear in the DOM. Hence, make sure that the content is programmatically ordered in such a way that it provides an appropriate reading order to the users of assistive technologies.\r\n\r\nCorrect Reading order should be:\r\n # “Issue title” link\r\n # \"More options\" button\r\n\r\nh3. *Code Snippet:*\r\n\r\n*<a target=\"_blank\" .... Tooltip inaccessible for screen reader and…*\r\n*(...)*\r\n*</a>*\r\n*<button aria-label=\"More options\" ...</button>*\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (14-inch, 2021)\r\nmacOs Ventura 13.5\r\nChrome - Version 119.0.6045.123 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2023\r\nNVDA- Version 2023.2\r\nVoiceover - Version Latest","createDate":"2025-03-05T10:10:00.000+0000","comments":[]},{"summary":"Slack : Non-descriptive link text \"Learn more\" found on a page","key":"JRACLOUD-93501","url":"https://jira.atlassian.com/browse/JRACLOUD-93501","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe link text \"Learn more\" does not describe the destination page it points to, which affects accessibility for screen reader users.\r\n\r\nh3. Steps to Reproduce\r\n# Log in to Your Email Account\r\n# Receive an Email Invitation from Your Teammate\r\n# Navigate to the \"Learn more\" Link\r\n# Turn on screen reader and navigate to “Learn more” link and Observe link text is announcing non-descriptive.\r\n\r\nh3.Screenshot\r\n !Jira logo.png|thumbnail! \r\n\r\nh3. Actual Results\r\nThe link text \"Learn more\" does not describe the destination it points to.As a result, screen reader users might not understand the purpose of the link effectively.\r\n\r\nh3. Expected Results\r\nThe link text should describe its purpose, hence provide more descriptive link text.\r\nUpdate the link text as “Learn more about Jira software” or else provide aria-label=”Learn more about Jira software” to the link. \r\n\r\nh3.Code snippet\r\n\r\n{code:java}\r\n<a href=\"https://www.example.com\">Learn more about Jira software</a>\r\n{code}\r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nh3.Environment\r\nMacBook Pro (16-inch, 2021)\r\nmacOS: Sonoma 14.2.1.\r\nChrome - Version 119.0.6045.105 (Official Build) (64-bit)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.6 (18615.3.12.11.2)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2025-03-05T09:23:16.000+0000","comments":[]},{"summary":"Workflow Start position not saving between editors after copying","key":"JRACLOUD-93474","url":"https://jira.atlassian.com/browse/JRACLOUD-93474","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter copying a workflow, changes made to the \"start\" position in the new editor do not get saved in the old editor. \r\nEven if you've set the new editor as your default, clicking on \"Diagram\" in Project Settings > Workflow still displays the diagram from the old editor. This can lead to confusion among users, as it appears that the start position has not been saved. \r\nPlease refer to the attachment for a clearer understanding.\r\n\r\nh3. Steps to Reproduce\r\n # copy a workflow\r\n # open it with new editor\r\n# change the position of \"start\"\r\n# save it\r\n# open the same workflow with old editor this time\r\n\r\nh3. Expected Results\r\n\"start\" position is saved\r\n\r\nh3. Actual Results\r\nit's in weird place\r\n\r\n\r\nh3. Workaround\r\n\r\nsaving the workflow in old editor once prevents the replication","createDate":"2025-03-04T08:29:54.000+0000","comments":[]},{"summary":"Fix Versions in Custom Issue Types in Team-managed projects","key":"JRACLOUD-93444","url":"https://jira.atlassian.com/browse/JRACLOUD-93444","type":"Bug","priority":"","description":"On team-managed (formerly next-gen) projects, the Release feature when enabled shows \"Fix versions\" in all built-in issue types like Bug, Story, Task, etc.\r\n\r\n!Screenshot 2025-02-28 at 11.31.52 PM.png|width=541,height=244!\r\n\r\n!Screenshot 2025-02-28 at 11.40.36 PM.png|width=195,height=228!\r\n\r\n \r\n\r\nBut when we create a new Issue type like \"Theme\" in below sample screenshot, the Fix versions field is not available to use.\r\n\r\n!Screenshot 2025-02-28 at 11.32.59 PM.png|width=677,height=303!\r\n\r\n \r\n\r\n \r\n\r\nWe are also unable to create a new field of \"Versions\" type\r\n\r\n!Screenshot 2025-02-28 at 11.33.16 PM.png|width=272,height=579!\r\n\r\n{*}Workaround{*}:\r\n\r\nTo workaround this issue, go to Project Settings >> Features, disable the Releases feature, refresh the page, and then enable the feature again. This should display the Fix Version field for all issue types.","createDate":"2025-02-28T17:57:48.000+0000","comments":[]},{"summary":"Line breaks are lost in text fields on the transition screen","key":"JRACLOUD-93432","url":"https://jira.atlassian.com/browse/JRACLOUD-93432","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you populate a paragraph custom field (default renderer) with line breaks in a transition screen, the next time you open the transition screen those line breaks will be lost.\r\n\r\nSee the recording:  [^Line break in transition screen.mp4] \r\n\r\n\r\n\r\nh3. Steps to Reproduce\r\n\r\n* Add a paragraph custom field to a transition screen\r\n* Make sure the [field's renderer|https://support.atlassian.com/jira-cloud-administration/docs/configure-renderers/] is *Default Text Renderer*\r\n* Trigger the transition where that transition screen is\r\n* Populate the paragraph custom field adding some line breaks (*Enter*)\r\n* Conclude the transition\r\n* Open the same transition again\r\n\r\n\r\n*(!) Behaviour has been first noticed by one of our customers on February 20, 2025, around 10:00 (UTC +09:00).*\r\n\r\n*(!) Behaviour observed in both the legacy and modernised transition experience.*\r\n\r\nh3. Expected Results\r\n\r\nThe content will be displayed just like it was saved previously.\r\n\r\nh3. Actual Results\r\n\r\nThe line breaks will disappear.\r\n\r\nh3. Workaround\r\n\r\nNone at this moment.","createDate":"2025-02-28T04:26:05.000+0000","comments":[]},{"summary":"Using the new Jira search returns inaccurate results","key":"JRACLOUD-93381","url":"https://jira.atlassian.com/browse/JRACLOUD-93381","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMaking a JQL query filter using the filter field that uses a negation returns incorrect search results.\r\nh3. Steps to Reproduce\r\n # Be on the new search experience as mentioned in this [document|https://support.atlassian.com/jira-software-cloud/docs/what-is-the-new-jira-issue-search-experience/]\r\n # Create a filter that uses the negation term. For example\r\n{noformat}\r\nfilter != SprintName\r\n{noformat}\r\n\r\nh3. Expected Results\r\n\r\nThe result should be populated based on the search criteria\r\nh3. Actual Results\r\n\r\nThe results omit certain search results. For example, if the results should be a 20 issue count, the result becomes a 3 issue count which is incorrect. This is because when optimising a negation filter, *EMPTY* is wrongly added to *NOT IN ()*\r\nh3. Workaround\r\n\r\nSwitch to the old issue search experience to return correct search results.","createDate":"2025-02-25T13:54:34.000+0000","comments":[{"text":"We are seeing a different inconsistency between old and new Issue Search that has nothing to do with the *!=* or *NOT IN()* operators:\r\n\r\nSpecifically it is around the use of *issue* vs *issuekey* fields maybe in conjunction with the *OR* operator.\r\n\r\nThis query:\r\n\r\n{{*issue* in (portfolioChildIssuesOf(\"RSGSDK-63\"), portfolioChildIssuesOf(\"RSGSDK-97\"), portfolioChildIssuesOf(\"RSGSDK-98\"), portfolioChildIssuesOf(\"RSGSDK-99\")) OR *issue* in (RSGSDK-63, RSGSDK-97, RSGSDK-98, RSGSDK-99)}}\r\n\r\nReturns *26 issues* in New Issue Search, and *45 issues* in Old Issue Search.\r\n\r\nIf I change ONLY the first or second *issue* in the query to {*}issuekey{*}, I then get 45 issues in both Old and New Search. If I change both to {*}issuekey{*}, I again get only 26 issues.\r\n\r\nThis is INFURIATING. JQL results should be consistent regardless of the UI.\r\n\r\n ","author":"Darryl Lee"},{"text":"FURTHERMORE, _*the APIs*_ return inconsistent results for the exact same search above depending on whether you're using [v2|https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#version] or [v3|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-search/#api-group-issue-search].\r\n\r\nI mean, COME ON.\r\n\r\nApparently there were other issues with text searches when the new search engine (JSIS) launched. Was this back in July?\r\n * JRACLOUD-84063 Rollout of the new search engine (JSIS) is causing some dashboard gadgets to not reflect correct data\r\n\r\nLooks like [~528dfc25228c] and team eventually fixed this (after just turning off new the new search engine for some tenants), but uh, I think there's still some incorrectness out there.\r\n\r\nIt's disappointing that this change was apparently NOT announced anywhere. I get it - you're replacing the search engine and hoping that it's 100% compatible. But clearly it wasn't/still isn't:\r\n * JRACLOUD-92017 Issues disappearing from Active Sprint board - they still show in backlog\r\n * JRACLOUD-91951 JQL Enhanced Search REST API not returning results when searching for a exact phrase match by custom field","author":"Darryl Lee"},{"text":"ALSO, I don't think these fixed root cause. If you were updating the results showing in Export and Bulk Edit to just \"match\" the broken new JQL engine (JSIS), then you were only masking the problem:\r\n * JRACLOUD-85259 Mismatch in issues shown in the Issue Navigator and issues exported\r\n * JRACLOUD-85258 Mismatch in issues shown in the Issue Navigator and Bulk Edit","author":"Darryl Lee"},{"text":"Interesting. I think I've only ever used the field name \"key\" not \"issue\". But I would have expected consistency","author":"Matt Doar (Adaptavist)"},{"text":"Ohey [~190ec6ed4e2b] \r\n{quote}{{*key* in (portfolioChildIssuesOf(\"RSGSDK-63\"), portfolioChildIssuesOf(\"RSGSDK-97\"), portfolioChildIssuesOf(\"RSGSDK-98\"), portfolioChildIssuesOf(\"RSGSDK-99\")) OR *key* in (RSGSDK-63, RSGSDK-97, RSGSDK-98, RSGSDK-99)}}\r\n{quote}\r\n*26 results*\r\n{quote}{{*key* in (portfolioChildIssuesOf(\"RSGSDK-63\"), portfolioChildIssuesOf(\"RSGSDK-97\"), portfolioChildIssuesOf(\"RSGSDK-98\"), portfolioChildIssuesOf(\"RSGSDK-99\")) OR *issue* in (RSGSDK-63, RSGSDK-97, RSGSDK-98, RSGSDK-99)}}\r\n{quote}\r\n*45 results*\r\n\r\nSo BTW I did take a closer look at the 45 results. The 19 \"missing\" issues are in a different project than RSGSDK. So it seems that the new JQL engine doesn't anticipate that a Child can be in a different Project. (Even though those issues display the parent/child relationship just fine.)\r\n\r\nBut I mean hey, maybe it's an issue with the {*}OR{*}, maybe it's a problem with getting rid of *Epic/Parent* fields, maybe it's the phase of the moon. I'm just saying that this, as well as the other tickets I linked to do seem to indicate a lack of thoroughness in testing this new JQL engine. Which... is bad. \r\n\r\nBecause especially as # of issues grows, it's very hard to find discrepancies like this. I shudder to think about customers out there with large swaths of bugs going unreported/unaddressed because of this failure.","author":"Darryl Lee"},{"text":"We found another case where we were getting incorrect results:\r\n{{textfields ~ \"MDS-744\" or textfields ~ \"MDS_744\"}}\r\n\r\nIt finds nothing, but if we search for just the first bit *textfields ~ \"MDS-744\"* then it finds issues.  How can an OR cause it to find fewer results?\r\n\r\n","author":"Darryl Lee"},{"text":"I recommend that if you are seeing inconsistent results like this - open ticket with Support and ask them if they can revert you to the old search engine (JVIS) until they fix this.\r\n\r\nBTW, some definitions:\r\n * JVIS (Jira Vertigo Issue Search) - old search engine\r\n * GIN (Global Issue Navigator) - old issue search UI \r\n * JSIS (Jira Scalable Issue Search) - new search engine that backs (but apparently is not a dependency for) AI-powered issue search UI, known as...\r\n * NIN (New Issue Navigator) - new issue search UI\r\n \r\n \r\nSources: * https://jira.atlassian.com/browse/JRACLOUD-86714\r\n * https://jira.atlassian.com/browse/JRACLOUD-81574\r\n * https://jira.atlassian.com/browse/JRACLOUD-83133\r\n\r\n ","author":"Darryl Lee"}]},{"summary":"Development Details Dialog fails to load from Issue Navigator","key":"JRACLOUD-93378","url":"https://jira.atlassian.com/browse/JRACLOUD-93378","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe dev details dialog fails to load when navigating directly to the Issue Navigator and not through a project.\r\nh3. Steps to Reproduce\r\n\r\n[https://www.loom.com/share/d4aa93cc3a5c4c6ea95f6204fccf5fca?sid=62057c65-5fd1-4030-9cf7-a93b736c297f]\r\nh3. Expected Results\r\n\r\nDevelopment details load\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in [^ddd_loading.har]:\r\n{noformat}\r\nNo value supplied for 'projectId' based on slug {projectId} \r\njira.frontend.common.epic-error.development.details.root{noformat}\r\nh3. Workaround\r\n\r\nVisit the project of the issue before returning to the Issue Navigator screen.","createDate":"2025-02-25T07:19:12.000+0000","comments":[]},{"summary":"Performance issues when loading Releases","key":"JRACLOUD-93359","url":"https://jira.atlassian.com/browse/JRACLOUD-93359","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen navigating to Project > Releases > Release the page loading slow. When scrolling down to load more issues, it takes significant amount of time to load, depending on number of issues with that Release version.\r\n\r\n[^Screen Recording 2025-02-24 at 5.38.17 pm.mov]\r\nh3. Steps to Reproduce\r\n # Create a number of issues on CMP Software Project (at least 30 issues).\r\n # Create a release as assign all those issues to release\r\n # Navigate to Projects > Releases > Release\r\n\r\nh3. Expected Results\r\n\r\nThe release and list of issues are loading faster\r\nh3. Actual Results\r\n\r\nThe Release is loading very slow. Issues in release - loading time:\r\n * 25 issues - 7 seconds\r\n * 50 issues - 12 seconds\r\n\r\nh3. Workaround\r\n\r\nA faster view of issues in the version can be accessed from the \"View in Issue Navigator\" link:\r\n\r\n!Screenshot 2025-03-14 at 5.07.57 PM.png|thumbnail!","createDate":"2025-02-24T06:39:32.000+0000","comments":[{"text":"Plz fix! Makes my end of sprint release noting a pain in the butt","author":"Jonathon Wildon"}]},{"summary":"Status category can not be changed in team-managed project workflow","key":"JRACLOUD-93333","url":"https://jira.atlassian.com/browse/JRACLOUD-93333","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustom status category can't be changed in team-managed project workflow.\r\nh3. Steps to Reproduce\r\n # Create a team-managed Software development Scrum project.\r\n # Create a few issues \r\n # Open the Task work items\r\n # Click Configure (fields)\r\n # Click Edit Workflow in [new editor|http://example.com|https://support.atlassian.com/jira-cloud-administration/docs/what-is-the-new-workflow-editor/#What%E2%80%99s-changed]\r\n # Add a new workflow status Schedule (to do category)\r\n # Click Update Workflow\r\n # Select all the default issue types and save changes\r\n # Allign the new Status on the Board\r\n # In the Workflow editor , Click Schedule and try to change its Category to \"in progress\" and click \"update\"\r\n\r\nh3. Expected Results\r\n\r\nThe Schedule category is changed to _in progress_ and editor becomes dirt to update the worflow. \r\nh3. Actual Results\r\n\r\nThe Schedule category remains _to do_\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nDelete the status you want to edit and create a new one with new category and when you update the workflow wizard will ask to move the issues to a new status. You can select the new status with desired category you created.","createDate":"2025-02-20T16:41:10.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Will from the Jira Cloud team. Thank you for your patience as we work on fixing this bug. We have identified the root cause for this bug, and we’re exploring solutions to address it. We will be providing any updates as they come. Thank you again for your patience!\r\n\r\nBest,\r\n\r\nWill","author":"Will Verland"}]},{"summary":"429 Error (Rate-Limiting) when Editing Issues on TMP Boards with Many Issues","key":"JRACLOUD-93315","url":"https://jira.atlassian.com/browse/JRACLOUD-93315","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers experience a 429 error (Rate-Limiting) when editing issues in the Issue Modal View on TMP Software boards with a large number of issues. This seems to occur due to a spike in API calls made by the system, leading to rate limiting.\r\nh3. Steps to Reproduce\r\n # Access a TMP software board with a high number of issues, including Sub-tasks (e.g., 600+ issues).\r\n # Add a custom field to the tasks/events on the board (e.g., a single-select field).\r\n # Open an issue on the board using the Issue Modal View.\r\n # Edit the custom field multiple times (approximately 10-20 times).\r\n # Observe the occurrence of a 429 error.\r\n\r\nh3. Expected Results\r\n\r\nEditing issues via the Issue Modal View should not result in a 429 error, regardless of the number of issues on the board.\r\nh3. Actual Results\r\n\r\nEditing issues in the Issue Modal View on boards with a large number of issues leads to a 429 error, as the system makes excessive API calls.\r\nh3. Workaround\r\nTo avoid the 429 error, users can open and edit issues using the Full Issue View in a separate window or tab, rather than making edits directly in the Issue Dialog Modal through the Board view. This prevents the excessive API calls that trigger the rate limit.\r\n\r\nAdditionally, after encountering a 429 error, users can wait approximately 5 minutes for the rate limit to reset, after which Jira becomes usable again.","createDate":"2025-02-19T18:30:14.000+0000","comments":[]},{"summary":"Reusing an attachment in ADF content on Jira’s REST API results in a file format error","key":"JRACLOUD-93305","url":"https://jira.atlassian.com/browse/JRACLOUD-93305","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (no)\r\n\r\nThis issue occurs when trying to reuse (POST) an attachment in an ADF payload with a different user. The request fails with a \"We don't recognize the format of a file you added or the data in it\" error, even though the file is accessible by both users in the UI.\r\nh3. Steps to Reproduce\r\n # Create a comment with an attachment with {*}User A{*}.\r\n # Retrieve the ADF contents of the comment using {{{}/rest/api/3/issue/<issue-id>/{}}}.\r\n # With {*}User B{*}, use POST {{/rest/api/3/issue}} to create an issue with the retrieved ADF content.\r\n # The request will fail with the following error message:\r\n # \r\n{code:java}\r\n{\r\n    \"errorMessages\": [],\r\n    \"errors\": {\r\n        \"description\": \"We don't recognise the format of a file you added or the data in it. Remove and try again.\"\r\n    }\r\n}{code}\r\nThis issue does not occur when using the UI.\r\n\r\nh3. Expected Results\r\nThe issue is created successfully with the attachment visible for both users.\r\nh3. Actual Results\r\n\r\nThe request fails with the error message:\r\n\"We don't recognize the format of a file you added or the data in it. Remove and try again.\"\r\nAdditionally, this error is logged in Splunk:\r\n{code:java}\r\n{\r\n    \"error\": {\r\n        \"code\": \"NotFoundError\",\r\n        \"title\": \"The file with the given id does not exist in collection \\\"upload-user-collection-xxxx\\\"\",\r\n        \"href\": \"https://media.prod.atl-paas.net#NotFoundError\"\r\n    },\r\n    \"httpStatusCode\": 404\r\n}{code}\r\n\r\n\r\n\r\n\r\n \r\nh3. Workaround\r\n\r\nA workaround has been identified in [this community thread|https://community.atlassian.com/t5/Jira-questions/Re-How-can-I-add-an-image-in-a-comment/qaq-p/1918756/comment-id/515362#M515362]. It involves replacing the attachment ID with the external URL, which can be found under the attachment object when running {{{}/rest/api/3/issue/<Issue-Key>{}}}.","createDate":"2025-02-19T13:26:02.000+0000","comments":[]},{"summary":"Misleading character limit error message","key":"JRACLOUD-93281","url":"https://jira.atlassian.com/browse/JRACLOUD-93281","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nJira Cloud's text fields have a limit to the number of chars they can store\r\n* Single-line: 255 characters max\r\n* Paragraph: 32700 characters max\r\n\r\nWhen users try to enter content that exceeds the limits they will see error messages like the following one\r\n{code}\r\nWe couldn't update the X value\r\n\r\nYou can try again in a few minutes, or refresh the page.\r\n\r\nTry editing the field again\r\n{code}\r\n !Screenshot 2025-03-27 at 5.02.06 PM.png|thumbnail! \r\n\r\nThat gives the idea the field has simply ran into an unexpected behaviour and entering the same value would work.\r\n\r\nh3. How to replicate\r\n\r\n* Copy a content that has more than 32700 chars and try to paste it into a paragraph field (also works with *Description*)\r\n* Click on Save after pasting the content\r\n\r\nh3. Expected result\r\n\r\nYou will see an error message stating that the limit of chars was exceeded and will be able to edit the content you entered.\r\n\r\nh3. Actual result\r\n\r\nYou see that misleading error message and the content is simply lost, the field will revert to the value prior to the edit attempt\r\n\r\nh3. Workarounds\r\n\r\nIn case you run into that error message, check the amount of chars you are trying to enter into the field.","createDate":"2025-02-18T12:39:29.000+0000","comments":[]},{"summary":"JSON import build fails due to change history id","key":"JRACLOUD-93276","url":"https://jira.atlassian.com/browse/JRACLOUD-93276","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen importing a JSON file into Jira Cloud the importer breaks when trying to import the file with the history objects.\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to the External system importer (use the old importer if it's on the new one)\r\n # Import a JSON file into Jira \r\n\r\nh3. Expected Results\r\n- The importer should import the JSON file including the history objects\r\n\r\nh3. Actual Results\r\n- The importer breaks with the below message\r\n{quote}\r\nCustomer Logs: Unexpected failure occurred. Importer will stop immediately. Data may be in an unstable state\r\n{quote}\r\nExcluding the history object allows the importer to work but the whole point is to import data with history.\r\n\r\nThe below exception is thrown in the log file:\r\n{noformat}\r\nmsg: Cannot invoke \"java.lang.Long.longValue()\" because the return value of \"com.atlassian.jira.model.querydsl.ChangeGroupDTO.getId()\" is null\r\n     stack: java.lang.NullPointerException: Cannot invoke \"java.lang.Long.longValue()\" because the return value of \"com.atlassian.jira.model.querydsl.ChangeGroupDTO.getId()\" is null\r\n{noformat}\r\nIt appears that the importer is attempted to get the id of the change history item but it returns null which stops the importer\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-18T10:17:29.000+0000","comments":[]},{"summary":"Archived Issue message doesn't appear in Jira issue API response","key":"JRACLOUD-93268","url":"https://jira.atlassian.com/browse/JRACLOUD-93268","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe archived issue message does not appear in the [Jira issue API|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issues/#api-rest-api-2-issue-issueidorkey-get] response.\r\nh3. Steps to Reproduce\r\n # Archive an existing Jira ticket\r\n # Accessing the Jira ticket displays a message: \r\n'This is an archived issue. You will need to restore it before you can edit it.'  \r\n!image-2025-02-17-21-49-27-919.png|width=731,height=189!\r\n # This information doesn't appear in Jira issue API response.\r\n\r\nh3. Expected Results\r\n\r\nJira issue API result should also display the same message:  \"This is an archived issue. You will need to restore it before you can edit it.\"\r\nh3. Actual Results\r\n\r\nThe API response for Jira issues does not indicate whether an issue has been archived.\r\n[https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issues/#api-rest-api-2-issue-issueidorkey-get] \r\n[https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-issueidorkey-get] \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-02-18T04:56:03.000+0000","comments":[]},{"summary":"Mention does not work in the Timeline view","key":"JRACLOUD-93263","url":"https://jira.atlassian.com/browse/JRACLOUD-93263","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nYou can start mentioning users by typing *at (@)* in a field such as *Description* .\r\n\r\nCurrently that's not working when you click to edit the description of a ticket in the Timeline view. \r\n\r\nSee the recording:  [^Cannot mention users in Timeline.mp4] \r\n\r\nh3. Steps to Reproduce\r\n\r\n* Click on the Summary of an issue in the Timeline view\r\n* Click to edit the Description in the pop-up and try to mention a user\r\n\r\nh3. Expected Results\r\n\r\nYou will see results after typing *at (@)* and be able to select a user.\r\n\r\nh3. Actual Results\r\n\r\nNo results are displayed.\r\n\r\nh3. Workaround\r\n\r\nIf you need to mention a user access a different view such as the issue view.","createDate":"2025-02-17T23:54:49.000+0000","comments":[]},{"summary":"The \"People and access\" section of the projects will not load when there are too many users listed","key":"JRACLOUD-93117","url":"https://jira.atlassian.com/browse/JRACLOUD-93117","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"People and access\" section of the projects will not load when there are too many users listed\r\nh3. Steps to Reproduce\r\n # Create a project and navigate to \"People and access\"\r\n # Add something near 100K+ users to a role.\r\n\r\nh3. Expected Results\r\n\r\nThe page successfully loads\r\nh3. Actual Results\r\n\r\nThe page won't load and the following error is displayed:\r\n\r\n_Something's gone wrong. A problem prevented the page from loading. Refresh and try again._\r\n\r\n!screenshot-1.png|thumbnail!\r\nh3. Workaround\r\n\r\nContact the Atlassian Support to evaluate if there's a workaround to your instance.\r\n","createDate":"2025-02-13T16:37:11.000+0000","comments":[]},{"summary":"TMP Timeline and board dont load because the Board filter pointing to old project key after C2C migration","key":"JRACLOUD-93075","url":"https://jira.atlassian.com/browse/JRACLOUD-93075","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Team Managed Projects Timeline won't load because the Board filter pointing to old project key. This issue occurs when project migrated from one cloud instance to another cloud instance. \r\n\r\nOther side affect:\r\n * Board or Backlog wont show or load\r\n * Epic panel will not show epics for the project\r\n * If the project is added as an issue source to a Plan its issue won’t be loaded.\r\n\r\nh3. Steps to Reproduce\r\n # In the *Source* instance:\r\n ## Create TMP project \r\n ## Change the Project Key Couple of Times ( eg abc, xyz)\r\n # In the *Destination* instance: \r\n ## Create a CMP project with one of the original key that you have in the TMP project ( eg xyz) in the source.\r\n # Start the migration \r\n\r\nh3. Expected Results\r\n\r\nThe TMP project migrated correctly.\r\nh3. Actual Results\r\n\r\nThe TMP project gets created successfully but the Board and Timeline do not load because the filter is pointing to the old key.\r\nh3. Workaround\r\n\r\nPlease contact support to fix the issue from the backend.","createDate":"2025-02-11T01:59:16.000+0000","comments":[]},{"summary":"Plan Timeline colour for different teams is the same","key":"JRACLOUD-92977","url":"https://jira.atlassian.com/browse/JRACLOUD-92977","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe timeline colour for different teams is the same, which creates confusion.\r\nh3. Steps to Reproduce\r\n # Create 8 Team available across the organisation\r\n # On the Timeline assign each team to a different issue\r\n\r\nh3. Expected Results\r\n\r\nEach team to have a different colour\r\nh3. Actual Results\r\n\r\nSome teams have the same colour\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-10T01:39:50.000+0000","comments":[]},{"summary":"Unsaved Summary edits are carried over when navigating between sub-tasks and parent tasks","key":"JRACLOUD-92627","url":"https://jira.atlassian.com/browse/JRACLOUD-92627","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUnsaved Summary edits are carried over when navigating between sub-tasks and parent tasks\r\n\r\nPlease view below screen recording:\r\n [^Changing summary field.mp4] \r\n\r\nh3. Steps to Reproduce\r\n# Go to a subtask\r\n# edit summary field but don't click outside of the field box to save it\r\n# click on parent task to navigate to it\r\n# Click somewhere outside of the summary field box\r\n\r\nh3. Expected Results\r\nSummary field of the parent subtask should remain unchanged.\r\n\r\nh3. Actual Results\r\nSummary field of the parent subtask is changing to what was entered in the previous page. Summary field of subtask will remain unchanged.\r\n\r\nh3. Workaround\r\nMake sure you save your edits before going to parent task.","createDate":"2024-12-31T01:58:37.000+0000","comments":[]},{"summary":"auto-complete for parent field does not work well.","key":"JRACLOUD-92236","url":"https://jira.atlassian.com/browse/JRACLOUD-92236","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen searching for issues in the Parent field on the create and edit issue screens in JIRA, the searching with partial word does not show the list well.\r\n\r\n!atlassian-support 2024-04-02 at 17.56.51.png|width=356,height=201! \r\n!atlassian-support 2024-04-02 at 17.57.06.png|width=343,height=142!\r\n\r\nThis issue is particularly problematic for Japanese users, creating a significantly poor user experience, where even entering the complete name of an Epic sometimes yields no results.\r\n\r\n!atlassian-support 2024-04-02 at 18.21.52.png|width=378,height=149!\r\n!atlassian-support 2024-04-02 at 18.22.07.png|width=390,height=147!\r\n!atlassian-support 2024-04-02 at 18.22.12.png|width=404,height=141!\r\n\r\n \r\n\r\nSimilar behavior was found a few years ago when the UI was using the old issue view. Reported under bug https://jira.atlassian.com/browse/JSWCLOUD-19247 now replicated in the new issue view.\r\n\r\n \r\nh3. Steps to Reproduce\r\n # create an epic with long name\r\n # search the name of the epic on the parent field with partial match\r\n\r\nh3. Expected Results\r\n\r\nauto complete works well\r\nh3. Actual Results\r\n\r\nsome of partial match does not show any result. \r\nh3. Workaround\r\n\r\nAt the moment, the only available workarounds are to select the Epic without using the search function, or to keep searching with a partial word until it eventually appears in the Parent field.","createDate":"2024-04-02T09:26:52.000+0000","comments":[{"text":"we have confirmed after changing index to CJK, searching for Japanese got better result, but still not that good.","author":"Chung Jeon"}]},{"summary":"Archived issues section not visible for ITSM projects.","key":"JRACLOUD-92157","url":"https://jira.atlassian.com/browse/JRACLOUD-92157","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nArchived issue section is not visible for ITSM projects.\r\nh3. Steps to Reproduce\r\n\r\nPlease ensure you've necessary [permissions|https://support.atlassian.com/jira-cloud-administration/docs/permissions-for-company-managed-projects/] for [Archiving|https://support.atlassian.com/jira-software-cloud/docs/archive-an-issue/] the issue. \r\n # Access any Project which is of type : Service management (ITSM).\r\n # On the Project sidebar the Archived issues section is not visible. \r\n\r\nh3. Expected Results\r\n\r\nArchived issues section should be visible for Project type : Service management (ITSM).\r\nh3. Actual Results\r\n\r\nArchived issues section is not visible for Project type : Service management (ITSM).\r\n\r\nIt is visible on other Projects type for e.g. Company managed - Software project. \r\n\r\n!image-2025-01-31-12-15-16-744.png|width=194,height=163!\r\nh3. Workaround\r\n\r\nAccess the Archived Issues via URL through by specifying your [Project key|https://support.atlassian.com/jira-software-cloud/docs/what-is-an-issue/#Project-keys]\r\n{code:java}\r\nhttps://your-instance.atlassian.net/jira/software/c/projects/Project-Key/issues/archive {code}","createDate":"2025-01-31T06:49:29.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/CHAT-79672","author":"Aanchal ."}]},{"summary":"Project Settings - Toolchain still shows using Opsgenie as an option for on-call","key":"JRACLOUD-92113","url":"https://jira.atlassian.com/browse/JRACLOUD-92113","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWithin a JSW company managed project, the project settings have the option within the Toolchain section (at the bottom) to select an On-Call provider. Currently the Opsgenie entry is listed there\r\nHowever Atlassian has stopped offering Opsgenie as a separate product. Instead the features of Opsgenie now exist within Jira Service Management (JSM).\r\nh3. Steps to Reproduce\r\n # As an admin, go to the Project Settings > Toolchain of a company managed JSW project\r\n # scroll to the bottom to see the on-call options\r\n\r\nh3. Expected Results\r\n\r\nWe should be seeing an option for JSM now instead\r\nh3. Actual Results\r\n\r\nOpsgenie link still exists\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-27T15:57:29.000+0000","comments":[]},{"summary":"Creating child issue in parent issue from project list view hides the child","key":"JRACLOUD-92074","url":"https://jira.atlassian.com/browse/JRACLOUD-92074","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCreating child issue in parent issue from project list view hides the child from the parent issue view until a refresh is done.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Go to a Jira Software project *List* view\r\n # Create or click on an *Epic* (ensure the issue is viewed in-page)\r\n # Click on *Add -> Child issue* and create a child\r\n # Observe the child issue entry in the list. It is shown temporarily before it is removed.\r\n # A refresh of the page will have the child issue shown properly.\r\n\r\nAnother behavior reported:\r\nWhile having the *List* view grouped by Assignee, creating a child issue in an Epic in the foreground will cause the Epic in *List* view in the background to get removed from the view until a refresh is performed.\r\n\r\nh3. Expected Results\r\n\r\nThe newly created child issue should be shown and not removed after it shows up temporarily.\r\n\r\nh3. Actual Results\r\n\r\nThe child issue is removed from view.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-23T00:50:21.000+0000","comments":[]},{"summary":"Upload of Attachments Fails Intermittently when Creating an Issue","key":"JRACLOUD-91998","url":"https://jira.atlassian.com/browse/JRACLOUD-91998","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUploading attachments fails sometimes with a 403 error when adding the attachment at the moment of issue creation.\r\n\r\nh3. Steps to Reproduce\r\n# Start the process of creating an issue;\r\n# Add attachments;\r\n# Intermittently, the upload of attachments will fail at the moment of the issue creation.\r\n\r\nh3. Expected Results\r\nThe attachments are always added properly.\r\n\r\nh3. Actual Results\r\nAn error happens intermittently and fails.\r\n\r\nh3. Workaround\r\nCreate an issue with no attachments and after, open the created issue and add the attachments needed.","createDate":"2025-01-20T09:42:22.000+0000","comments":[]},{"summary":"MS Teams app shows error screen when we click on expand button in meetings","key":"JRACLOUD-91971","url":"https://jira.atlassian.com/browse/JRACLOUD-91971","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMS Teams app shows an error screen when we click on the expand button in meetings\r\n\r\n*NOTE:* This issue is observed *only* when there is a description present in an issue\r\n\r\nFor issues with the description field empty, it works well and shows the issue details as expected \r\nh3. Steps to Reproduce\r\n # Click on the Expand button on MS Teams in the meeting\r\n!Screenshot 2025-01-16 at 8.11.06 PM.png|width=412,height=214!\r\n # It will throw an error when the issue has a description present\r\n!Screenshot 2025-01-16 at 8.10.45 PM.png|width=442,height=227!\r\n\r\nh3. Expected Results\r\n\r\nThe Expand button should provide the issue details\r\n\r\n!Screenshot 2025-01-16 at 8.15.37 PM.png|width=402,height=197!\r\nh3. Actual Results\r\n\r\nAn error message is received: \r\n\r\n!https://product-integrations-cdn.atl-paas.net/jira-teams/error-window.png|height=250!\r\nOops!Client-side error. Please try again later or contact support.Error ID: 776cb933e17748d3ba9bfdd226ef2b4d\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2025-01-16T14:46:54.000+0000","comments":[]},{"summary":"Text field (multi-line) with Wiki Style Renderer is displayed when empty even though it's not on the Edit Issue screen","key":"JRACLOUD-91965","url":"https://jira.atlassian.com/browse/JRACLOUD-91965","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a field is available only on the View Issue screen but *not* on the Edit Issue screen, it shouldn't be displayed in the Issue View when it has no value. This is how it works with all fields, except with Text Field (multi-line) when the renderer is set to \"Wiki Style\". In this case, it will be displayed regardless.\r\n\r\nCould be related to: [Support for Rich text formatted custom fields as hidden fields in Issue view|https://jira.atlassian.com/browse/JRACLOUD-82752]\r\nh3. Steps to Reproduce\r\n# Have a separate screen for Edit Issue & View Issue\r\n# Create a custom field of type \"Text Field (multi-line)\"\r\n# Add the field only to the View Issue screen\r\n# Create an issue, make sure the field has no value\r\n\r\nh3. Expected Results\r\nThe field should not be displayed in the issue view at all\r\nh3. Actual Results\r\nWhen the renderer is set to \"Wiki Style\", the field will be displayed whether it has a value or not. Once you change the renderer to \"Default\" in the Field Configuration and refresh the issue, the field is not displayed anymore (as expected).\r\nh3. Workaround\r\nChange renderer to \"Default renderer\" in the Field Configuration","createDate":"2025-01-16T07:39:15.000+0000","comments":[]},{"summary":"JQL Enhanced Search REST API not returning results when searching for a exact phrase match by custom field","key":"JRACLOUD-91951","url":"https://jira.atlassian.com/browse/JRACLOUD-91951","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJQL enhanced search endpoint should function in the same way as the search through the UI. \r\nCurrently exact phrase match is not working with the rest api, returning a empty array when there are issues being returned through the UI. This happens when exact search is used on custom field.\r\nh3. Steps to Reproduce\r\n # Have a text field in your project and have a ticket with a specific value (example: XXX)\r\n # Make an API call to /rest/api/2/search/jql for that exact value\r\n(example: \\{ \"expand\": \"renderedFields,editmeta\", \"fields\": [ \"issuekey\" ], \"jql\": \"\\\"custom text[short text]\\\" ~ \\\"\\\\\\\"XXX\\\\\\\"\\\"\" }\r\n)\r\n\r\nh3. Expected Results\r\n\r\nThe response should return an array including the ticket\r\nh3. Actual Results\r\n\r\n{ \"issues\": [] }\r\nh3. Workaround\r\n\r\nDon't use the exact match \\\" for now","createDate":"2025-01-15T10:47:32.000+0000","comments":[{"text":"For us it works in a way that sometimes all results are returned. \r\nI've noticed it happens when `_` is used in the custom field value.\r\n\r\nExample\r\n{code:java}\r\n{\"jql\": \"(CF_Version_Tag ~ \\\"CF_2025*\\\") AND (CF_Version_Tag ~ \\\"CF_2025.01\\\")\", \"fields\": [\"issuekey\"]} {code}\r\nSometimes the results are correct on the first search but become incorrect after second search.","author":"Michal Biros"},{"text":"Hi everyone,\r\n\r\nThank you for previously raising this bug and bringing it to our attention.\r\n\r\nHere is a quick update about the status of this bug. We fixed the exact search issue and it should now be working for system fields (`summary` and `description`). There can still be issues when it comes to exact searching by custom fields. We're actively working on fixing them.\r\n\r\nThank you again for providing valuable feedback to our team!\r\nJira Cloud team","author":"Krzysztof Kosciuk"}]},{"summary":"Sprint is not visible on Jira project timeline","key":"JRACLOUD-91625","url":"https://jira.atlassian.com/browse/JRACLOUD-91625","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSprint is not visible on Jira project timeline.\r\nh3. Steps to Reproduce\r\n # If Sprint is an orphan sprint (the board that originated the sprint doesn't exist), Or\r\n # If Sprint that is visible on the existing board actually originated from some other board.\r\n ## This presence of sprint on non-original boards is called shared sprint.\r\n\r\nh3. Expected Results\r\n\r\nSprint should be visible on Timeline of board\r\nh3. Actual Results\r\n\r\nSprint is hidden from the project timeline as it has not originated on this board.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-06-28T19:54:24.000+0000","comments":[{"text":"Refer to the document elaborating on expected behavior: [My sprints aren’t showing on my timeline|https://support.atlassian.com/jira-software-cloud/docs/troubleshoot-the-roadmap/#My-sprints-aren%E2%80%99t-showing-on-my-Roadmap]","author":"MonaS"}]},{"summary":"Deleting the original project key on a team-managed project breaks the timeline view","key":"JRACLOUD-91439","url":"https://jira.atlassian.com/browse/JRACLOUD-91439","type":"Bug","priority":"","description":"{panel:title=Atlassian status as of December 2024|borderStyle=solid|borderColor=#b2d4ff|titleBGColor=#b2d4ff|bgColor=#eaf1fc}\r\nThanks for reporting this. As of December 17th 2024, the root cause is still being worked on. \r\n\r\nIn the meantime, we  have rolled out a different screen on the timeline when this situation occurs.\r\nOn this screen a project admin can fix the configuration of the project with the click of a button.\r\n\r\n!image-2024-12-12-16-32-12-628.png|width=531,height=284!\r\n\r\nNote: There is a very rare case where Fix my timeline will not work and display an error flag with the message {_}The filter must have project scope{_}. In this scenario the change cannot be applied safely as the configuration of the project was altered in unexpected way. If this happens please open a support ticket.\r\n{panel}\r\n \r\nh3. Issue Summary\r\n\r\nAfter updating the project key on a project, it's now possible to delete the original project key and release it to be reused. ([https://community.atlassian.com/t5/Jira-Cloud-Admins-articles/Announcing-the-ability-to-unlink-previously-used-project-keys/ba-p/2814789])\r\n\r\nHowever, doing this breaks the project timeline view in *team-managed software* projects. It shows the generic \"Timelines are designed for a single project\" message seen in company-managed boards if the board filter includes multiple projects.\r\n\r\nThis happens because the *board filter* for the project isn't updated with the new key, it keeps the original key. Once the key is released, it doesn't redirect to that project anymore and the timeline isn't able to resolve the project.\r\nh3. Steps to Reproduce\r\n # Go to *Project settings* > *Details* on team-managed software project\r\n # Change the *Project key* to a new key\r\n # Under {*}Previous project keys{*}, delete the _original_ project key and save the change.\r\n # Go to the *Timeline* view\r\n\r\nh3. Expected Results\r\n\r\nThe timeline continues to show issues from the current project normally\r\nh3. Actual Results\r\n\r\nThe timeline shows a message implying that the board filter includes multiple projects, and needs to be edited to only show one. (The filter for a team-managed project cannot be edited, and for new projects can't even be viewed.)\r\nh3. Workaround\r\n\r\nChanging the project key back to the original key makes the timeline work normally again.\r\nAdditional info\r\nTo resolve board filter issues related to the Manage Sprints permission, revert to the original project key and then change it to the new project key you wish to use. This process will register the original project key as a previous project key, ensuring the board filter functions correctly once again.","createDate":"2024-10-03T02:07:38.000+0000","comments":[{"text":"Duplicate of this ticket: https://jira.atlassian.com/browse/JSWCLOUD-27277","author":"Rain Holloway"},{"text":"Reopened this bug.\r\n\r\nIt was originally closed as a duplicate of https://jira.atlassian.com/browse/JSWCLOUD-27398 but after investigation it appears that the symptoms in that report are related to a different board component, and resolve on their own after a short period of time.\r\n\r\nThe timeline error persists until the orignal key is reassociated with the project, or the filter is updated by Atlassian support, so it needs a separate bug report.","author":"Eleanor Thomasson"},{"text":"would love to see this bug fixed. epic panel is broken in backlog when old project key is deleted","author":"Bryan"},{"text":"[~6662d5908bb1] Clicking on `Fix my timeline` on the healthcheck screen should resolve the issue for both the timeline and epic panel. If it does not could you please raise [a support ticket|https://support.atlassian.com/contact/] so we can further investigate the matter?","author":"Cyprien Autexier"}]},{"summary":"Swimlane based on Stories not working for TMP issues in CMP Scrum board","key":"JRACLOUD-91260","url":"https://jira.atlassian.com/browse/JRACLOUD-91260","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIf we create a personal Scrum board or a Company-managed Scrum board to display issues from a Team-managed Scrum project and adding swimlanes based on Stories is not showing the Subtasks anymore.\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a Team-managed Scrum project and create a Story with child issues.\r\n# Create a Sprint and add the Story to the Sprint.\r\n# Create a Company-managed Scrum board and edit the filter query to retrieve the issues from that Team-managed project.\r\n# Map the statuses to the columns of the board on the Company-managed board.\r\n# Edit the board settings > swimlanes > based on Stories\r\n\r\nh3. Expected Results\r\nThe board should display the child subtasks under the parent Story issue.\r\n\r\nh3. Actual Results\r\nNo Swimlane and Subtasks are not displayed.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-06-10T21:47:32.000+0000","comments":[]},{"summary":"Updating board filter under board settings shows \"no options\" even though user has access to few filters.","key":"JRACLOUD-91180","url":"https://jira.atlassian.com/browse/JRACLOUD-91180","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen updating board filter for a board, if a site has many filters and the user who is trying to update filter has access to very less number of filters on a site, it shows \"no option\".\r\n!Screenshot 2024-09-03 at 12.30.58 PM.png|width=280,height=31!\r\nh3. Steps to Reproduce\r\n # Create 20 filters that are not owned by an user.\r\n # Create another 20 filters that are owned by the same user\r\n # Click on \"select filter\" dropdown to view available filters. \r\n  \r\nh3. Expected Results\r\nThe dropdown should display all the filters which are owned/has access by that user.\r\n\r\nh3. Actual Results\r\nDepending on how the filters are named, when we click on \"select filter\", it shows \"no options: or few filters.\r\n\r\nh3. Workaround\r\nEven though it shows \"no options\", user can type the exact filter name and it will populate the filter. ","createDate":"2024-09-03T07:06:38.000+0000","comments":[]},{"summary":"Error appears when accessing a board with no location and attempting to change boards","key":"JRACLOUD-91080","url":"https://jira.atlassian.com/browse/JRACLOUD-91080","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen accessing a board with no location, if you try to click the arrow to change boards, an error message appears:\r\n !image-2023-07-21-12-04-44-585.png|thumbnail! \r\n\r\n {quote}We're having troubles connecting to your boards\r\nTry again{quote}\r\n \r\nh3. Steps to Reproduce\r\n# Create a board;\r\n# Set a user location;\r\n# Deactivate the user account;\r\n# The board no longer will have a location.\r\n\r\nh3. Expected Results\r\nIf a board doesn't have a location, attempting to switch boards should state that this is the problem with an informative error e.g. \"Please give this board a location. Read more here: https://support.atlassian.com/jira-software-cloud/docs/change-the-location-of-a-board/\". \r\n\r\nh3. Actual Results\r\nWhen a board doesn't have a location, attempting to switch boards results in the error \"We're having troubles connecting to your boards\r\nTry again\"\r\n\r\nh3. Workaround\r\nFollow the steps [here|https://support.atlassian.com/jira-software-cloud/docs/change-the-location-of-a-board/] to give the board a new location","createDate":"2023-07-21T02:09:42.000+0000","comments":[{"text":"There isn't a reason in my mind why a board needs a location to work. This concept is relatively new, given how long this functionality has been around, and never needed to be bound to a project before.","author":"Haddon Fisher"}]},{"summary":"Removing and re-adding an issue in a Sprint shows it as \"Issues completed outside of this sprint\"","key":"JRACLOUD-90405","url":"https://jira.atlassian.com/browse/JRACLOUD-90405","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRemoving an issue from a Sprint and adding it back already on 'In Progress' status shows it as \"Issues completed outside of this sprint\" even when moving to Done before the Sprint's end.\r\nh3. Steps to Reproduce\r\n # Create an issue and assign it to a Sprint (already started or to start).\r\n # Remove this issue from the Sprint.\r\n # Move it to the 'In Progress' status.\r\n # Add it back to the Sprint.\r\n # Move the issue to Done.\r\n # Complete the Sprint.\r\n # You will see the it showing as Completed Issues on the closing Sprint Screen.\r\n\r\nh3. Expected Results\r\n\r\nIssue shown as *\"Completed on the Sprint\"* on the Sprint Report.\r\nh3. Actual Results\r\n\r\nIssue shown as *\"Issues completed outside of this sprint\"* on the Sprint Report.\r\nh3. Workaround\r\n\r\nNone.","createDate":"2023-11-09T19:15:29.000+0000","comments":[{"text":"{panel:title=Atlassian Update - November 8, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"},{"text":"This bug is still affecting our team. Our support ticket is PCS-374724","author":"Maria Andrea Famini"}]},{"summary":"Remove issues from current sprint on Burnup chart report changes the issue's summary to 'Undefined'.","key":"JRACLOUD-90189","url":"https://jira.atlassian.com/browse/JRACLOUD-90189","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRemove issues from current sprint on Burnup chart report changes the issue's summary as 'Undefined'.\r\n\r\nh3. Steps to Reproduce\r\n # Create a new sprint.\r\n # Create issues on this sprint.\r\n # Start the sprint.\r\n # Check the Burnup chart report.\r\n # Remove some issues from this sprint.\r\n # Check the Burnup chart report again.\r\n # The issues removed from this sprint will have the summary showing as 'Undefined'.\r\n\r\n !Screen Shot 2019-05-14 at 11.50.06.png|thumbnail! \r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2019-05-13T22:13:45.000+0000","comments":[{"text":"There seem to be another impact: Any issue \"undefined\" ticket will not automatically be moved to the next sprint, when closing the sprint - my teams reported this to me as very annoying, as it takes some time to identify what is now missing in the new sprint. This needs to be added manually --> so our statistics are not correct as well (do not add work after sprint start :) )\r\n\r\n ","author":"Wolfgang Seidler"},{"text":"Voted. Please fix this bug :(","author":"Rei Song"},{"text":"I just noticed this, too! Missing summary from a removed issue in the burnup chart, makes it very annoying and time-consuming to have to open the issue to see what work was removed. \r\n\r\nIs Atlassian going to fix this? ","author":"slarkin"},{"text":"Any workaround or resolution available for this issue?","author":"Baig, Farrukh (F.)"},{"text":"Hello,\r\n\r\nPlease, let me share an update on this bug.\r\n\r\nWe are currently resolving the issue and expect to roll out the fix early next week.\r\n\r\nThank you,\r\nAlexey","author":"Alexey"}]},{"summary":"The Burnup chart doesn't consider estimation changes when the Story points estimation is set to 0 or none","key":"JRACLOUD-90157","url":"https://jira.atlassian.com/browse/JRACLOUD-90157","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Burnup chart doesn't consider estimation changes when the Story points estimation is set to 0 or none.\r\n\r\nh3. Environment\r\n\r\nClassic project in Jira Software cloud\r\n\r\nh3. Steps to Reproduce\r\n# Create a classic Scrum project\r\n# Add issues to the project\r\n# Add story estimation to some issues\r\n# Create a sprint and add the issues with estimation set to this sprint\r\n# Start the sprint\r\n# Change the estimation of one of the issues in the sprint to \"0\" or \"None\"\r\n\r\nh3. Expected Results\r\n\r\nThe Burnup chart red line decreases and the estimation change is registered in the table below the chart\r\n\r\nh3. Actual Results\r\n\r\nThe Burnup ignores the change in the issue's estimation\r\n\r\n !Screen Shot 2019-08-12 at 5.39.49 PM.png|thumbnail! \r\n !Screen Shot 2019-08-12 at 5.40.11 PM.png|thumbnail! \r\n\r\nh3. Notes\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2019-08-12T20:40:29.000+0000","comments":[{"text":"See also: PSCLOUD-33160.  {color:#de350b}This bug renders the burnup chart unreliable and so we (most unfortunately) must stop using it until this is resolved.{color}  This is a significant inconvenience for us and requires manual workaround. ","author":"Shaun Sheehan"},{"text":"Hello!\r\n\r\n   I'm the TAM for McKesson and am trying to figure out who would be the owner of bugs for the sprint burn up report.  Looking at this link: \r\n\r\n[https://hello.atlassian.net/wiki/spaces/JSRE/pages/582878118/Jira+Capabilities+Ownership+Table]  - It looks like [~esa] \r\n\r\nThis link [https://hello.atlassian.net/wiki/spaces/JCC/pages/174451399/Jira+Cloud+Bugfix+Responsibility] - it looks like [~mtse@atlassian.com] \r\n\r\nCould either of you clarify who would be responsible for this bug?  I would like to raise severity level higher on this ticket due to the bug making the report completely inaccurate.  Thanks!\r\n\r\nLisa Fisher, Senior TAM","author":"lfisher"},{"text":"Hello, just encountered this issue today. Definitely a kind of annoying bug!","author":"Ian deBoisblanc"},{"text":"https://getsupport.atlassian.com/browse/PCS-204995","author":"Kevin Sanghvi"},{"text":"This is really a pain to deal with and this bug has been sitting here for years. Can we fix or get a workaround?","author":"Adam Orfei"}]},{"summary":"Error when trying to create an issue from the board if JQL filter has component with non-unique name","key":"JRACLOUD-89938","url":"https://jira.atlassian.com/browse/JRACLOUD-89938","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf the board JQL filter includes \"component\" and there are multiple components with the same name across different projects, issue creation will fail with \"Component id 'XXXXX' is not valid\" (shown in developer tools).\r\n\r\nThere was a similar bug reported for the Timeline view, which seems to be still present for the Board view - [https://jira.atlassian.com/browse/JSWCLOUD-25411] \r\nh3. Steps to Reproduce\r\n # Have a component sharing the same name (not case-sensitive) across at least two projects.\r\n # The board filter in the affected project is configured to include the very same component.\r\n # Try to create an issue directly from the board, using the '+ Create Issue' button.\r\n\r\nh3. Expected Results\r\n\r\nThe issue is created with the component used by the board filter.\r\nh3. Actual Results\r\n\r\nThe issue is not created, an error \"Something went wrong\" is thrown in the UI, while the developer tools show \"Component id 'XXXXX' is not valid\" (XXXXX stands for the wrong component id, coming from a different project).\r\nh3. Workaround\r\n # Create issues using the 'Create' button on the navigation bar, making sure to select the right Component.\r\n # Rename the component coming from the other project to anything else, for instance, 'Offboarded' to 'Offboarded2'.\r\n # Use the ID of the given component in your board filter, instead of using the name of the component.","createDate":"2024-09-09T12:34:09.000+0000","comments":[{"text":"As another workaround You can use component_id instead of component_name in filter JQL.\r\n\r\nIt worked in my case ;)","author":"Bartosz Wojciechowski"},{"text":"As [~530c1e77dd82] said, replacing the \"Component = componentName\" with \"Component = componentId\" in the JQL works, however to find the component IDs you need to go into the REST API, which is not very user friendly.\r\n\r\nWould be great if we could get an update where you can see the component id from a UI stand-point, like in the Edit pop-up of the component","author":"Alex Chadwick"}]},{"summary":"Unable to create issues from Plan when the issues are Grouped by Releases","key":"JRACLOUD-89810","url":"https://jira.atlassian.com/browse/JRACLOUD-89810","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen trying to create an issue from the Advanced Roadmaps plan after Grouping the issues as per Releases, it fails with an error.\r\n\r\nThis bug fixed by [JSWCLOUD\\-23359: Unable to create issues from Plan when the issues are Grouped by Releases|https://jira.atlassian.com/browse/JSWCLOUD-23359] but currently it reoccurred.\r\n\r\nh3. Steps to Reproduce\r\n * Navigate to *Plans* -> select a plan.\r\n * Select *View Settings* -> Under the *Group By* dropdown, select the option {*}Release{*}.\r\n * Click on *Create Issue* -> Select an *Issue Type*  -> Select a *Release* from the list.\r\n * Fill in the *Summary* and try to save the changes.\r\n\r\n \r\n * !Screen Recording 2022-08-04 at 20.49.30.gif!\r\n\r\nh3. Expected Results\r\n\r\nThe issue should get created without any error.\r\nh3. Actual Results\r\n\r\nThe below error is displayed when trying to create an issue:\r\n\r\n!Screenshot 2022-08-04 at 20.44.35.png!\r\nh3. Workaround\r\n\r\nBelow are the workarounds currently available:\r\n\r\n1. Select *Unassigned* instead of selecting a *Release* and create the issue. Later update the *Release* version to the issue.\r\n\r\n!Screenshot 2022-08-04 at 20.55.53.png!\r\n\r\n2. With the *Group By* set to \"{*}Release{*}\", create an issue by selecting the option *Actions* which is available with the existing issue:\r\n\r\n!Screenshot 2022-08-04 at 20.58.10.png!","createDate":"2024-12-02T01:20:15.000+0000","comments":[{"text":"We can no longer replicate the issue. We didn't work on this, but it may have been fixed by an unrelated change. I think we can close it. If any support across it or the problem still persists, please provide some more details so we could re-open it. Thanks!\r\n \r\n ","author":"Ryan Deng"}]},{"summary":"Advanced Roadmaps Showing \"1\" Change to Review but No Changes","key":"JRACLOUD-88282","url":"https://jira.atlassian.com/browse/JRACLOUD-88282","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAdvanced Roadmaps Showing \"1\" Change to Review but No Changes.\r\n\r\nThe customer keeps getting the Review = 1 as you can see in the screenshots but they do not have anything for review. The was a Bug created for the same behavior/discrepancy and the solution was implemented but the customer still has the same issue.\r\n!Screenshot 2021-11-02 at 5.54.22 PM.png|thumbnail!\r\nh3. Steps to Reproduce\r\n # In a plan, create a dependency between two issues as a scenario change\r\n # Create any scenario change for any issue that is not one of the issues above\r\n # Remove one of the issues out of plan resource (other project) from step 1\r\n\r\nh3. Expected Results\r\n\r\nThe change for review should show 0. No changes\r\nh3. Actual Results\r\n\r\nIt will leave 1 change for review if the custom field is a multi-value. The Advance Roadmaps continue indicating 1 change for review.\r\nh2. Workaround\r\nh3. Cloud:\r\n # Navigate to the plan\r\n # Click on Plan Settings > Scenarios (If it's not enabled, please enable it)\r\n # Create a new scenario (If there's already one, please proceed to the next step)\r\n # Create another scenario > Create from _Copy of Initial Scenario_ for backup purposes.\r\n # Create another Scenario but this time, create with blank scenario\r\n # There should be now a scenario without \"ghost changes\" (the blank scenario)\r\n # Delete the other scenario and use the blank scenario that has no \"Ghost changes\"\r\n\r\nh3. Server:\r\n\r\n*WARNING:* This will remove ALL uncommitted changes for the plan. Make sure you commit/revert all your changes prior to attempting this.\r\n\r\nThere is a hidden plan configuration screen that allows for resetting all pending changes (including but not limited to the phantom ones). This will make the phantom changes go away. This configuration screen can be accessed as follows:\r\n # Enable the com.atlassian.portfolio.plan.ExtendedAdministration dark feature on the JIRA instance.\r\n # Visit the plan configuration screen (open the plan, click the three-dot menu next to the plan name, then choose Configure).\r\n # Click on the new Extended Administration section in the column on the left (the dark feature makes this visible).\r\n # Confirm that you want to reset uncommitted changes.","createDate":"2021-08-13T15:15:38.000+0000","comments":[{"text":"Same issue here. I can't use this workaround because I don't know how exactly I ended up with that phantom \"Review Changes\" but it's there and it's annoying.\r\n\r\n ","author":"Pablo Esteban Quiroga"},{"text":"This also will never be fixed. I'm sure.","author":"Pablo Esteban Quiroga"},{"text":"We are investigating this issue again due to an increase in votes, however, we are unable to replicate the issue.\r\nIf you are still able to replicate the issue please drop a comment here with details, thank you!","author":"Troy Daniels"},{"text":"Same issue on server version, 9.12.15.  Workaround removed it","author":"Tony Halford"}]},{"summary":"Parent IS NOT EMPTY returns results with no parent field value displayed","key":"JRACLOUD-87968","url":"https://jira.atlassian.com/browse/JRACLOUD-87968","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSearching for the \"Parent\" field using the \"IS NOT EMPTY\" operators returns results with no parent field value displayed\r\nh3. Steps to Reproduce\r\n # Do the following search\r\n{code:java}\r\nproject = PROJECTKEY AND \"Parent\" is not EMPTY\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe search should only return issues that have a value for the Parent field.\r\nh3. Actual Results\r\n\r\nThe search returns issues without a value for the Parent field.\r\n\r\n!image-2024-04-08-11-03-36-142.png|width=1135,height=481!\r\nh3. Workaround\r\n\r\nQuick fix : \r\n # Bulk update child issues by editing their Parent value to an issue type of the next issue type hierarchy level - if child is Story > add parent Epic, etc.\r\n # Then Bulk update the same child issues to clear out the Parent field added in step 1.\r\n\r\nNotes\r\n\r\nhttps://jira.atlassian.com/browse/JSWCLOUD-19248 \r\n\r\n ","createDate":"2024-04-05T09:49:55.000+0000","comments":[]},{"summary":"Advanced Roadmaps plan do not respect project permissions while an issue is assigned from a plan","key":"JRACLOUD-87751","url":"https://jira.atlassian.com/browse/JRACLOUD-87751","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen we click on the assignee field for an issue in an Advanced Roadmap plan, the drop-down will show and allow us to select all the users (including the ones without Assinable user permission or even non-license user). After you select A non-license user the workflow doesn’t allow you to save the changes.\r\nh3. Steps to Reproduce\r\n # Create a plan with some project issues in it.\r\n # Pick any issue and click on the assignee column for it.\r\n # You will notice that those users who lack Assignable user permission will also show up in the list and the plan allows you to select it.\r\n # When you go to save the changes, the workflow prevents this final step and even though the changes are saved, the user is removed from the assignee field.\r\n # !image-2023-05-12-11-19-03-360.png|width=965,height=347!\r\n # !image-2023-05-11-18-41-40-973.png|width=982,height=244!\r\n # !image-2023-05-11-18-41-56-522.png|width=988,height=313!\r\n # !image-2023-05-11-18-42-15-309.png|width=989,height=461!\r\n\r\nh4. The issue is reproducible across different instances.\r\nh3. Expected Results\r\n\r\nOnly users with assignable user permissions should show up in the list and we should be able to only select those users. \r\nh3. Actual Results\r\n{noformat}\r\nAll users are showing up (including non-license users){noformat}\r\nh3. Workaround\r\n\r\nNo workaround is available.","createDate":"2023-05-12T00:46:24.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 2, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Error when migrating a team containing multiple capacity for the same sprint","key":"JRACLOUD-87749","url":"https://jira.atlassian.com/browse/JRACLOUD-87749","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile performing S2C migration for a team, if a team contains multiple capacity for the same sprintId, migration of such a team fails with an error\r\nh3. Steps to Reproduce\r\n\r\nIdeally, a team should never contain multiple capacities for the same sprint. But even if for some reasons we end with such data on server, such scenario should be handled while performing server to cloud migrations\r\n\r\n \r\nh3. Expected Results\r\n\r\nMigration should succeed without error\r\nh3. Actual Results\r\n\r\nTeam migration fails with an error\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-02T03:10:58.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 1, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Release notes fail to create in Confluence when Chinese (Traditional) is used","key":"JRACLOUD-87016","url":"https://jira.atlassian.com/browse/JRACLOUD-87016","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRelease notes fail to create in Confluence when Chinese (Traditional) language is used.\r\nh3. Steps to Reproduce\r\n # Make sure Chinese (Traditional) language is selected in Account Preferences\r\n # Go to JSW Project > Releases > Some release\r\n # Click on Release Notes\r\n # Select Confluence space and click \"Create in Confluence\"\r\n\r\nh3. Expected Results\r\n\r\nRelease Notes created in Confluence\r\nh3. Actual Results\r\n\r\nGenetic error message is returned, page fails to create.\r\nh3. Workaround\r\n\r\nUse other language, e.g. Chinese (Simplified)","createDate":"2024-04-03T00:24:04.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 2, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Issue colors are changing only if the issue type is an Epic.","key":"JRACLOUD-86900","url":"https://jira.atlassian.com/browse/JRACLOUD-86900","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssue colors are changing only if the issue type is an Epic.\r\n\r\nAny other issue type does not change color in the Board.\r\n*The issue color field was added to the project.*\r\nh3. Steps to Reproduce\r\n # Add an issue type on the same level as Epic\r\n # Create an issue A with this new issue type\r\n # Add an issue B to the Issue A\r\n # Access issue A and change the color\r\n\r\nThe color will be the same on the board. Color: purple\r\n\r\nBelow I have provided a video:\r\n * [Video|https://www.loom.com/share/fe597a810dbd4b16ab9cb376f985124b?sid=ffe4895b-70ba-421f-a997-84535e7226fb]\r\n\r\n**Customer tested on IOS and mentioned that this problem does not happen on the smartphone\r\nh3. Expected Results\r\n\r\nWhen we change the color of an issue on the board, that color must be changed.\r\nh3. Actual Results\r\n\r\nThe color of an issue only changes if the issue type is Epic, for any other issue type the color on the board doesn't change.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-03T19:09:02.000+0000","comments":[{"text":"We are experiencing the same problem. This trivial bug negatively affects our UX :( ","author":"Tomas Straka"},{"text":"There's a workaround: if you update the colour of issue A (from the example in the description) using the issue sidebar instead of the issue dialog, the colour will update automatically on the board.","author":"rtayeh"},{"text":"Thanks [~28c58d9faaa8], I tried your workaround with one issue and it seems to have fixed the problem site-wide.","author":"Vincent King"}]},{"summary":"Security tab cant load some containers and throws error - 'Unable to load xx containers. Retry'","key":"JRACLOUD-86800","url":"https://jira.atlassian.com/browse/JRACLOUD-86800","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe customer added the snyk plugin for Jira and linked containers to various projects in Jira. They are seeing issues where containers won't load and retry doesn't solve the problem.\r\n\r\nThe containers have been deleted from the Snyk side, and that matches our knowledge regarding orphaned containers (referred to on the Jira side but not in Snyk).\r\nh3. Steps to Reproduce\r\n # Delete the container in Snyk\r\n # In Jira, it will not sync and throw an error as depicted below:\r\n\r\n  !image-2023-10-05-21-39-14-000.png|width=641,height=142!\r\nh3. Expected Results\r\n\r\nDeleting the container in Snyk should also delete the container in Jira\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the log file:\r\n{noformat}\r\nUnable to load containers. Retry{noformat}\r\nh3. Workaround\r\n\r\nNo workaround is available\r\nContact Support to remove the orphaned security container from the project.","createDate":"2023-10-05T16:10:36.000+0000","comments":[{"text":"Even if the container wasn't automatically removed from Jira, it would be nice if it were still listed in Jira so that I can remove it manually.","author":"Chris Hawthorne"},{"text":"I'd prefer if the old containers were listed so they can be manually deleted- automatically deleting containers sounds like a recipe for disaster.","author":"Sean Lively"},{"text":"Same issue while using GitHub Advanced Security","author":"Matti Pakka"},{"text":"This has been open for more than a year.  I have no way to resolve this issue.  There is also no one from Atlassian assigned.  Is it safe to assume Atlassian just doesn't care enough to solve this problem?","author":"Ben Campbell"},{"text":"[~dc23aff00cb7] I opened a ticket with Jira support, and they were able to manually delete the containers on their side.","author":"Sean Lively"}]},{"summary":"Focus lost on issue view text areas while typing comment in an issue from kanban board","key":"JRACLOUD-86184","url":"https://jira.atlassian.com/browse/JRACLOUD-86184","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFocus lost on issue view text areas while typing comment within an issue when navigated from kanban board. \r\nh3. Steps to Reproduce\r\n #  Log in to your instance and access the board from two separate accounts in two separate browser windows, your own and any other user's. When you’re an admin you can log in as another user via the admin UI. Pick any non-admin user \r\n # Create a new issue on this board and make sure it is visible. Open the issue view for this issue in one of the browser windows.\r\n # In the other browser window, move the newly created issue to a different column\r\n # Quickly jump back to the other browser and begin spamming the keys “awd” in a comment text area\r\n # Eventually, a real-time update will be triggered and focus will be lost on the text area, meaning any subsequent keypresses are registered as keyboard shortcuts (e.g. {{a}} opens the assignee field). This could take up to 10 seconds to occur.\r\n\r\nh3. Expected Results\r\n\r\nFocus should not be lost and users should be able to type without any issue. \r\nh3. Actual Results\r\n\r\nFocus is being lost while typing in the issue comment section. \r\nh3. Workaround\r\n\r\nKindly refresh the page and access the issue Id again from the search bar to finish typing the comment. ","createDate":"2024-03-26T15:07:29.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 1, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"When doing a JQL basic search on Global view all issues page and open any of the issue key and hit the back button on the browser, the basic option becomes greyed out","key":"JRACLOUD-85520","url":"https://jira.atlassian.com/browse/JRACLOUD-85520","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you go to the *Global View All Issues* page, where you can filter your search using Basic Search in Jira, the search converts to an advanced search after viewing a ticket from the results. \r\nh3. Steps to Reproduce\r\n\r\nGo to Filters > View All Issues > Apply a filter on the Project and any other column(for example, Status) > Now, view any of the Jira issues from the search result > Hit the back button from the browser > The Basic option will be greyed out(You can't switch to basic as the query is too complex or is invalid).\r\nh3. Expected Results\r\n\r\nJira waits for the user to type the full issue key to search and return any results, correct results or an error without changing to advanced search JQL automatically.\r\nh3. Actual Results\r\n\r\nThis conversion blocks the option to revert back to the basic search as the Basic option is greyed out.\r\nh3. Workaround\r\n\r\nAfter viewing the ticket, if the Basic search option is Greyed out, then manually refresh the browser to be able to see the Basic option again.\r\n\r\nHere is the screen recording: https://www.loom.com/share/6a6b9ca6d0134093bc8611efb98c8af4","createDate":"2024-12-23T10:26:32.000+0000","comments":[{"text":"I don't know if this is the same issue. However, this started on March 27th, 2025.\r\n\r\nThis started on March 27, 2025.\r\nUnable to switch between Basic and JQL. In the below attached video you can see that it works fine when I create a new one. Then after I saved it and tried to open the save filter in a new tab I received the alert. I have so many saved filters and this needs to be fixed.\r\n\r\nI clicked on *Open Issue* in Navigator and adjusted the JQL for my settings. The *View Basic* and *JQL* modes worked fine, and I saved it successfully. However, when I open the saved link later, I can no longer switch between *Basic* and *JQL* modes.\r\n\r\nThis has been working for the past three years, but as of yesterday, all my saved links now display: \r\n\"This query is too complex to display in Simple mode.\"\r\n\r\nSorry I am unable to upload the mp4 video to this comment. However, details can be found in this ticket [PCS-394124|https://support.atlassian.com/requests/PCS-394124]","author":"Robert Carbonell"}]},{"summary":"500 error with the REST API endpoint \"/rest/api/2/workflows/create\"","key":"JRACLOUD-85398","url":"https://jira.atlassian.com/browse/JRACLOUD-85398","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nGetting 500 error with the REST API endpoint [Bulk create workflows|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-workflows/#api-rest-api-2-workflows-create-post].\r\nh3. Steps to Reproduce\r\n{code:java}\r\ncurl --request POST \\\r\n  --url 'https://your-domain.atlassian.net/rest/api/2/workflows/create' \\\r\n  --user 'email@example.com:<api_token>' \\\r\n  --header 'Accept: application/json' \\\r\n  --header 'Content-Type: application/json' \\\r\n  --data '{\r\n      \"payload\": {\r\n      \"scope\": {\r\n         \"type\": \"GLOBAL\"\r\n      },\r\n      \"statuses\": [\r\n         {\r\n            \"id\": \"10002\",\r\n            \"name\": \"Done\",\r\n            \"description\": \"\",\r\n            \"statusCategory\": \"DONE\",\r\n            \"statusReference\": \"188baa12-91d1-4c19-8a88-4c408c997135\"\r\n         },\r\n         {\r\n            \"id\": \"3\",\r\n            \"name\": \"In Progress\",\r\n            \"description\": \"\",\r\n            \"statusCategory\": \"IN_PROGRESS\",\r\n            \"statusReference\": \"d5bfe2b7-e8bd-4301-b2cf-bb6bf0e18ed6\"\r\n         }\r\n      ],\r\n      \"workflows\": [\r\n         {\r\n            \"description\": “Atlassian test”,\r\n            \"name\": \"Atlassian test\",\r\n            \"startPointLayout\": {\r\n               \"x\": 670.9895830154419,\r\n               \"y\": -68.99998617172241\r\n            },\r\n            \"statuses\": [\r\n               {\r\n                  \"statusReference\": \"d5bfe2b7-e8bd-4301-b2cf-bb6bf0e18ed6\",\r\n                  \"layout\": {\r\n                     \"x\": 1136.2477402687073,\r\n                     \"y\": -2.3999695205688596\r\n                  },\r\n                  \"properties\": {}\r\n               },\r\n               {\r\n                  \"statusReference\": \"188baa12-91d1-4c19-8a88-4c408c997135\",\r\n                  \"layout\": {\r\n                     \"x\": 1316.8114094734192,\r\n                     \"y\": -2.3999695205688596\r\n                  },\r\n                  \"properties\": {}\r\n               }\r\n            ],\r\n            \"transitions\": [\r\n               {\r\n                  \"name\": \"Start\",\r\n                  \"type\": \"INITIAL\",\r\n                  \"toStatusReference\": \"d5bfe2b7-e8bd-4301-b2cf-bb6bf0e18ed6\",\r\n                  \"id\": \"1\",\r\n                  \"description\": \"a nice description\",\r\n                  \"actions\": [],\r\n                  \"properties\": {},\r\n                  \"triggers\": [],\r\n                  \"validators\": []\r\n               },\r\n               \r\n               {\r\n                  \"name\": \"Done\",\r\n                  \"type\": \"DIRECTED\",\r\n                  \"links\": [\r\n                     {\r\n                        \"fromStatusReference\": \"d5bfe2b7-e8bd-4301-b2cf-bb6bf0e18ed6\",\r\n                        \"fromPort\": 1,\r\n                        \"toPort\": 2\r\n                     }\r\n                  ],\r\n                  \"toStatusReference\": \"188baa12-91d1-4c19-8a88-4c408c997135\",\r\n                  \"id\": \"6\",\r\n                  \"description\": \"a nice description\",\r\n                  \"actions\": [],\r\n                  \"properties\": {},\r\n                  \"triggers\": [],\r\n                  \"validators\": []\r\n               }\r\n            ]\r\n         }\r\n      ]\r\n   }\r\n}'\r\n{code}\r\nh3. Expected Results\r\n\r\nWorkflow to be created as this payload is successfully validated using the endpoint [Validate create workflows|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-workflows/#api-rest-api-2-workflows-create-validation-post] */rest/api/2/workflows/create/validation*.\r\nh3. Actual Results\r\n\r\nWe get the below error\r\n{noformat}\r\n{\r\n    \"errorMessages\": [\r\n        \"Jira encountered an unexpected condition. Status code : 500\"\r\n    ],\r\n    \"errors\": {}\r\n}\r\n{noformat}\r\nh3. Workaround\r\n\r\nAdd *\"links\": []* to the initial transition in the request payload\r\n{code:java}\r\n{\r\n                  \"name\": \"Start\",\r\n                  \"type\": \"INITIAL\",\r\n                  \"toStatusReference\": \"d5bfe2b7-e8bd-4301-b2cf-bb6bf0e18ed6\",\r\n                  \"id\": \"1\",\r\n                  \"description\": \"a nice description\",\r\n                  \"actions\": [],\r\n                  \"properties\": {},\r\n                  \"triggers\": [],\r\n                  \"validators\": [],\r\n                  \"links\": []\r\n               }\r\n{code}","createDate":"2024-12-05T07:56:23.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Will from the Jira team. This bug is fixed and I confirmed the functionality to be working as expected.","author":"Will Verland"}]},{"summary":"Restrict to when a field is a specific value does not allow a blank value","key":"JRACLOUD-85356","url":"https://jira.atlassian.com/browse/JRACLOUD-85356","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRestrict to when a field is a specific value does not allow a blank value\r\nh3. Steps to Reproduce\r\n # In the new Work Flow Editor create a rule using {{Restrict to when subtasks are in a specific status}}\r\n\r\n # Choose a field such as date\r\n\r\n # You cannot restrict status changes based on a blank value as the {{Add}} button is disabled\r\n\r\nh3. Expected Results\r\n\r\nYou can restrict a status change based on a blank field\r\nh3. Actual Results\r\n\r\nAdd is disabled\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-12-02T02:54:50.000+0000","comments":[]},{"summary":"Edit workflow permission does not allow project administrator to select a custom field in transition rule","key":"JRACLOUD-85349","url":"https://jira.atlassian.com/browse/JRACLOUD-85349","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA user who is NOT Jira admin with Administer project + Edit workflow permission (only these are relevant) is unable to update a transition in new workflow edito. The problem is that when adding a rule to a transition to update a field, when that field is custom created one of List type, the options do not load. \"We couldn't load your options. Check your connection and try again\" is displayed.\r\nh3. Steps to Reproduce\r\n # User has Administer project + Edit workflow permissions.\r\n # Jira Administrator already created a custom field of type List and assigned global context.\r\n # Edit workflow > Add a rule.\r\n # Select the update field and select from the drop-down a custom field of type List. \r\n\r\nh3. Expected Results\r\n\r\nWorkflow edit permission should be able to modify rules and select custom fields with global context.\r\nh3. Actual Results\r\n\r\nThe page returns the following error in the UI:\r\n\r\n\"We couldn't load your options. Check your connection and try again\"\r\n\r\n!image-2024-11-29-10-11-59-953.png|width=611,height=353!\r\n\r\nThe following error is returned in the HAR file:\r\n{code:java}\r\n{\r\n    \"errorMessages\": [\r\n        \"Only Jira administrators can access custom field contexts.\"\r\n    ],\r\n    \"errors\": {}\r\n}  {code}\r\nThe same error is not displayed on system fields like Priority/Resolution or custom field of type text/date.\r\nh3. Workaround\r\n\r\nJira administrator can perform this action instead of a project administrator.","createDate":"2024-11-29T11:10:40.000+0000","comments":[]},{"summary":"Dashboard share(Viewers or Editors) shows \"Unknown project\" when the Jira admin add project role to dashboard who dose not belong.","key":"JRACLOUD-85347","url":"https://jira.atlassian.com/browse/JRACLOUD-85347","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDashboard share(Viewers or Editors) shows \"Unknown project\" when the Jira admin add project role to dashboard who dose not belong.\r\nh3. Steps to Reproduce\r\n # login as UserA with Jira product admin license\r\n # create projectA and remove UserA from people\r\n # create dashboardA and set \"Viewers\" or \"Editor\" Project/projectA/any role(ex.all roles).\r\n # Dashboards > [View all dashboards]\r\n # dashboardA [More actions] > [Rename or share dashboard]\r\n # Viewers show \"Unknown project\".\r\n!dashboard.png|thumbnail!\r\n # *{*}Caution{*}* If click [Save] in this status, \"ProjectA role\" setting is deleted and set \"Private\".\r\n\r\nthe userB who has projectA role, can see dashboard A is \"shared with\" projectA.\r\nh3. Expected Results\r\n\r\nproject role that was set should be displayed.\r\nh3. Actual Results\r\n\r\n\"Unknown project\" displayed.\r\nh3. Workaround\r\n\r\nAdd project role that was set on dashboard, to the user.\r\n\r\nand you can see which project is set on dashboard from System settings > [dashboard], Jira admin can see which project was set as \"shared with\".\r\n[https://domain-name.atlassian.net/secure/admin/dashboards/ViewSharedDashboards.jspa]","createDate":"2024-11-29T05:06:24.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/CHAT-76284","author":"Aanchal ."}]},{"summary":"[Custom Domain] Unable to create a JIRA issue from a Confluence page when custom domains are used","key":"JRACLOUD-85219","url":"https://jira.atlassian.com/browse/JRACLOUD-85219","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWe are unable to create JIRA issues directly from Confluence pages when using a custom domain for either JIRA or Confluence.\r\n\r\nh3. Steps to Reproduce\r\n # Step 1 Have a Confluence or JIRA Cloud site with custom domain\r\n # Step 2 Go to confluence page and select a text > create JIRA issue OR Go page edit mode / create jira issue\r\n\r\nh3. Expected Results\r\nI should be able to create JIRA issue without any issue.\r\n !image-2024-11-08-16-27-30-409.png|thumbnail! \r\n\r\nh3. Actual Results\r\nI am getting \"Something went wrong error\" and unable to connect JIRA.\r\n !image-2024-11-08-16-27-56-945.png|thumbnail! \r\n\r\nIn edit page mode:\r\n !image-2024-11-08-16-29-10-278.png|thumbnail! \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-08T11:00:50.000+0000","comments":[{"text":"This does really hurt. With lots of excitement, we cannot use this feature because of the custom domain :(","author":"Milad S."},{"text":"We're not asking for new features.\r\nIt's problematic that we can't use existing, working features just because we enable a custom domain.\r\nWe would like a quick fix. ","author":"황 정효"}]},{"summary":"Importing a CSV file with a space at the end of an existing account's email address that account will be removed from the Jira permission groups it was assigned to.","key":"JRACLOUD-85213","url":"https://jira.atlassian.com/browse/JRACLOUD-85213","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIf there is a space at the end of an existing account's email address during import, it will not be recognized as an existing user and will be treated as a new user. This means it will be removed from the Jira permission groups assigned to the existing account.\r\n\r\nh3. Steps to Reproduce\r\n # Create a CSV file like the one below. ※Change \"xxx@example.com\" to the email address of an existing account in the test environment.\r\n{code}\r\nSummary,Assignee,Description\r\nTest-summary,\"xxx@example.com \",Description-test\r\n{code}\r\n # Click [System] > [Extranal System Import] > Switch to the old experience\r\n # Import CSV file(Create at 1)\r\n !スクリーンショット 2024-11-12 15.55.24.png|thumbnail! \r\n\r\n\r\nh3. Expected Results\r\nIt is set in the mapped field as an existing user.\r\n\r\nh3. Actual Results\r\n\r\nA screen appears saying a new user has been created. If you choose \"Leave them inactive now,\" the account will stay removed from the Jira permission groups it was assigned.\r\n !スクリーンショット 2024-11-12 15.56.53.png|thumbnail! \r\n !スクリーンショット 2024-11-12 15.57.12.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\n* Remove the space at the end and then import.\r\n","createDate":"2024-11-12T07:12:09.000+0000","comments":[]},{"summary":"Some attachments cannot be downloaded","key":"JRACLOUD-85178","url":"https://jira.atlassian.com/browse/JRACLOUD-85178","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSome attachments uploaded through comments are not accesible and the file name will display en error \"Failed to load\". They will be shown as follows:\r\n\r\n!Screenshot at Nov 06 10-23-48.png!\r\n\r\nWe have observed that this is more probably to happen on tickets created years ago.\r\nh3. Steps to Reproduce\r\n # Go to an existing ticket with attachments uploaded via comment. We have observed that this is more probably to happen on tickets created years ago.\r\n\r\nh3. Expected Results\r\n\r\nThe attachments should be available for download.\r\nh3. Actual Results\r\n\r\nSome attachments will not be available and will have an error \"Failed to load\".\r\nh3. Workaround\r\n\r\nContact [Atlassian Support|https://support.atlassian.com/contact/#/] so our team can validate if it's possible to provide you with links to download the attachments.","createDate":"2024-11-06T16:29:06.000+0000","comments":[]},{"summary":"Opening the Issue view > View workflow under status dropdown will make the checkbox \"Show transition labels\" to flash","key":"JRACLOUD-85177","url":"https://jira.atlassian.com/browse/JRACLOUD-85177","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOpening the Issue view > View workflow under status dropdown will make the checkbox \"Show transition labels\" to flash \r\n\r\n\r\nh3. Steps to Reproduce\r\n # Open a issue\r\n # Under status, select VIEW WORKFLOW\r\n\r\nh3. Expected Results\r\nThe workflow will open with the checkbox \"Show transition labels\" normally. \r\n\r\nh3. Actual Results\r\nThe workflow will open and the checkbox \"Show transition labels\" will be selected and unselected in loop.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. \r\nTo stop the checkbox from flashing you can try clicking anywhere in the screen. ","createDate":"2024-11-06T16:13:56.000+0000","comments":[{"text":"Hello, this is Darren from Jira Cloud.\r\n\r\nWe have resolved this issue now, so I will move to close the ticket. Please reach out to support if you experience this issue in the future.","author":"dgrant"}]},{"summary":"Arabic text is not readable in preview of a .docx attachment","key":"JRACLOUD-85123","url":"https://jira.atlassian.com/browse/JRACLOUD-85123","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a docx file containing Arabic text is attached to a Jira issue, the attachment preview does not render the text correctly. It is shown as boxes (like a missing font) or blank space instead.\r\n\r\nIf the document is downloaded and opened locally, or in Office 365, the text displays correctly.\r\n\r\nPDF attachments are not affected, and display the content normally.\r\n\r\n(Reported that this problem is new, previously these documents were readable in preview.)\r\nh3. Steps to Reproduce\r\n # Create a docx file containing Arabic text\r\n # Attach the file to a Jira issue\r\n # View the file preview\r\n\r\nh3. Expected Results\r\n\r\nThe text is readable.\r\nh3. Actual Results\r\n\r\nThe characters are not rendered in the preview, and the text can't be read.\r\nh3. Workaround\r\n\r\nDownloading a copy of the attachment allows it to be read.","createDate":"2024-10-31T06:28:56.000+0000","comments":[{"text":"This issue is impacting cloud instance, we expect the resolution for this ASAP.","author":"Sami Shaik"},{"text":"Hello, all people tracking this ticket,\r\n\r\nI'm pleased to announce that I am working on a fix to improve language support in our preview generation. This fix will configure our preview generation to use the [Noto|https://fonts.google.com/noto] font (due to its support of all writing systems and open licence) as a fallback font if the document's font is not available.\r\n\r\nThe current ETA for this fix is the end of this month. \r\n\r\nThank you for your patience.\r\n\r\nRegards,\r\n\r\nDaniel Barrett\r\nSoftware Engineer\r\nMedia Experiences and Infrastructure  ","author":"Daniel Barrett"}]},{"summary":"Story Points custom field can be edited/viewed even though the field is removed from the Edit/View screens","key":"JRACLOUD-85094","url":"https://jira.atlassian.com/browse/JRACLOUD-85094","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nStory Points custom field can be edited/viewed even though the field is removed from the Edit/View screens because under issue layout still present under Hidden fields when is Empty.\r\nh3. Steps to Reproduce\r\n # Remove Story points field from the View/Edit issue screen.\r\n # Go to Issue Layout and move the Story points fields under Hide When Empty.\r\n\r\nh3. Expected Results\r\n\r\nWhile the Story points field is empty does not show under More Fields in the issue View or Edit.\r\nh3. Actual Results\r\n\r\nThe Story points field is visible under More Fields.\r\nh3. Workaround\r\n\r\nTo delete the Story Points field from the issue layout but this might not meet everyone's requirements.","createDate":"2024-10-29T06:25:06.000+0000","comments":[]},{"summary":"Short Links/Tiny URLs in conjunction with Microsoft Defender for Cloud","key":"JRACLOUD-85085","url":"https://jira.atlassian.com/browse/JRACLOUD-85085","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using Microsoft Defender for Cloud and using short links / tiny URLs in Jira, clicking those links just takes you back to the Jira homepage rather than onto the required link with the MCAS suffix added to the URL.\r\n\r\nh3. Steps to Reproduce\r\nSee attached videos\r\n\r\nh3. Expected Results\r\n\r\nClicking short link / tiny URL takes you to the relevant page\r\n\r\nh3. Actual Results\r\n\r\nSee videos attached\r\n\r\nh3. Workaround\r\n\r\nNo known workaround","createDate":"2024-10-28T14:26:08.000+0000","comments":[{"text":"This doesn`t only affect tiny links, but also shared links, links in notifications, basically all functions where issue links and page links etc. can be copied or forwarded or are part of outgoing communication to users via mail.\r\nAll those (deep) links end up in a generic Confluence and/or Jira start page and are therefore useless.\r\n\r\nA showstopper when working in the Atlassian Cloud in combination with Microsoft Cloud Defender! ","author":"Ralf Münch"},{"text":"This doesn`t only affect tiny links, but also shared links, links in notifications, basically all functions where issue links and page links etc. can be copied or forwarded or are part of outgoing communication to users via mail.\r\nAll those (deep) links end up in a generic Confluence and/or Jira start page and are therefore useless.\r\n\r\nA showstopper when working in the Atlassian Cloud in combination with Microsoft Cloud Defender! ","author":"Ralf Münch"}]},{"summary":"/rest/api/3/issue/{issueIdOrKey}/notify API Sends multiple email notification on same issue","key":"JRACLOUD-85073","url":"https://jira.atlassian.com/browse/JRACLOUD-85073","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe *+/rest/api/3/issue/\\{issueIdOrKey}/notify+* API sends multiple email notifications for the same issue to users who belong to several recipient categories.\r\n\r\nFor instance, if someone is both the assignee and in watcher list, they will receive two email notifications for the same issue. This has led customers to believe this is a bug, as they expect to receive only one notification per issue, regardless of how many recipient categories they belong to. As a result, this causes dissatisfaction because users feel overwhelmed by redundant notifications.\r\nh3. Steps to Reproduce\r\n\r\nTo reproduce the issue, add a user to multiple recipient categories(watcher, assignee, voter), and run the following API:\r\n * [https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-issueidorkey-notify-post]\r\n\r\n{code:java}\r\ncurl --request POST \\\r\n  --url 'https://your-domain.atlassian.net/rest/api/3/issue/{issueIdOrKey}/notify' \\\r\n  --user 'email@example.com:<api_token>' \\\r\n  --header 'Accept: application/json' \\\r\n  --header 'Content-Type: application/json' \\\r\n  --data '{\r\n  \"htmlBody\": \"The <strong>latest</strong> test results for this ticket are now available.\",\r\n  \"restrict\": {\r\n    \"groupIds\": [],\r\n    \"groups\": [\r\n      {\r\n        \"name\": \"notification-group\"\r\n      }\r\n    ],\r\n    \"permissions\": [\r\n      {\r\n        \"key\": \"BROWSE\"\r\n      }\r\n    ]\r\n  },\r\n  \"subject\": \"Latest test results\",\r\n  \"textBody\": \"The latest test results for this ticket are now available.\",\r\n  \"to\": {\r\n    \"assignee\": true,\r\n    \"groupIds\": [],\r\n    \"groups\": [\r\n      {\r\n        \"name\": \"notification-group\"\r\n      }\r\n    ],\r\n    \"reporter\": true,\r\n    \"users\": [\r\n      {\r\n        \"accountId\": \"user-account-id\",\r\n        \"active\": false\r\n      }\r\n    ],\r\n    \"voters\": true,\r\n    \"watchers\": true\r\n  }\r\n}'{code}\r\nh3. Expected Results\r\n\r\nWe expect users to receive one email notification only when they belong to multiple recipient categories for the same issue.\r\nh3. Actual Results\r\n\r\nUsers are receiving multiple email notifications on an issue if they belong to multiple recipient categories for the same issue.\r\nh3. Workaround\r\n\r\nThere is no workaround at this time.","createDate":"2024-10-25T03:51:24.000+0000","comments":[]},{"summary":"The endpoint /rest/api/3/issue/createmeta/{{projectKey}}/issuetypes/{{issueTypeId}} returns wrong fields","key":"JRACLOUD-85052","url":"https://jira.atlassian.com/browse/JRACLOUD-85052","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe endpoint rest/api/3/issue/createmeta/\\{{projectKey}}/issuetypes/\\{{issueTypeId}} returns the parent field even when this field is not present in the issue create screen.\r\nh3. Steps to Reproduce\r\n # Remove the parent field from a issue create screen;\r\n # Check the endpoint rest/api/3/issue/createmeta/\\{{projectKey}}/issuetypes/\\{{issueTypeId}}\r\n # The Parent field will be returned;\r\n\r\nh3. Expected Results\r\n\r\nThe endpoint should return only the fields added to the create issue screen.\r\nh3. Actual Results\r\n\r\nThe parent field is returned even when it is not present in the issue create screen.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-23T20:32:38.000+0000","comments":[]},{"summary":"[Wiki Style Renderer] text editing toolbar visibility","key":"JRACLOUD-84935","url":"https://jira.atlassian.com/browse/JRACLOUD-84935","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the [Wiki Style Renderer] for text fields, the text editing toolbar behaves unexpectedly by not remaining fixed at the top during editing sessions.\r\n\r\nTested browsers Chrome, Safari and Firefox on both Windows and MacOS\r\nh3. Steps to Reproduce\r\n # Add a Text Field in an issue, assigning the Renderer to [Wiki Style Renderer].\r\n # Enter information into the text field and save.\r\n ##  observe that the text editor toolbar remains static at the top.\r\n # Reload the page again and edit the Text field.\r\n # During this editing session, the text editor toolbar moves while scrolling, obscuring parts of the text.\r\n\r\nh3. Expected Results\r\n\r\nThe text editor toolbar should remain stationary at the top of the editor to ensure text visibility isn't obstructed.\r\nh3. Actual Results\r\n\r\nUpon reloading the page and editing the Text field, the toolbar shifts position during scrolling, covering portions of the text beneath it.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n ","createDate":"2024-10-09T15:46:42.000+0000","comments":[{"text":"My users have seen this when using Firefox.","author":"Dwight Holman"}]},{"summary":"Attachment preview of a word document containing Chinese font character ( font - 等线 , translation - Equal Lines ) has missing characters","key":"JRACLOUD-84928","url":"https://jira.atlassian.com/browse/JRACLOUD-84928","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen previewing a word doc that has text in the font - \"等线\" , there seem to be characters that are missing. \r\n\r\nWhen attempting to select the text, you can see the text exists but is displayed in white for some reason even though the formatting is in red. When downloaded, the file previews correctly.\r\n\r\nIt looks to be this font - [Microsoft font download|https://www.microsoft.com/zh-cn/download/details.aspx?id=49115], cannot find a trusted iOS equivalent.\r\nh3. Steps to Reproduce\r\n # Create a docx file with some data in the font - 等线\r\n # Attach the file to a Jira issue\r\n # Preview the attachment within Jira by clicking on the attachment thumbnail\r\n\r\nh3. Expected Results\r\n\r\nThe text within the attachment displays as normal -\r\n\r\n!Screenshot 2024-10-09 at 2.02.38 PM.png|thumbnail!\r\nh3. Actual Results\r\n\r\nThe text displays with every other character missing -\r\n\r\n!Error view_2024-09-30T01_46_33.466Z.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\n\r\nUsers can download the file to view content correctly.","createDate":"2024-10-09T04:04:30.000+0000","comments":[{"text":"Hello, all people tracking this ticket,\r\n\r\nI'm pleased to announce that I am working on a fix to improve language support in our preview generation. This fix will configure our preview generation to use the [Noto|https://fonts.google.com/noto] font (due to its support of all writing systems and open licence) as a fallback font if the document's font is not available.\r\n\r\nThe current ETA for this fix is the end of this month. \r\n\r\nThank you for your patience.\r\n\r\nRegards,\r\n\r\nDaniel Barrett\r\nSoftware Engineer\r\nMedia Experiences and Infrastructure  ","author":"Daniel Barrett"}]},{"summary":"REST API returning HTTP 200 when calling it with incorrect credentials","key":"JRACLOUD-84870","url":"https://jira.atlassian.com/browse/JRACLOUD-84870","type":"Bug","priority":"","description":"Some REST API for example [get all issue type for user|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issue-types/#api-rest-api-2-issuetype-get] does not return the right HTTP response code as documented in the REST API document\r\n\r\ninstead it returns HTTP 200 OK even with user authentication have failed.\r\n\r\nSteps to replicate :\r\n# Open your terminal\r\n# Run the following curl command replacing it with your cloud URL\r\n{code}curl https://your_jira_cloud_url_here.atlassian.net/rest/api/2/issuetype -u 'x@y:z' -i{code}\r\nThis will return the following example response\r\n{code}\r\nHTTP/1.1 200 OK\r\ndate: Tue, 01 Oct 2024 14:03:33 GMT\r\ncontent-type: application/json;charset=UTF-8\r\nserver: AtlassianEdge\r\ntiming-allow-origin: *\r\nx-arequestid: *******************************\r\nx-seraph-loginreason: AUTHENTICATED_FAILED\r\nset-cookie: atlassian.xsrf.token=************************\r\n; Path=/; SameSite=None; Secure\r\ncache-control: no-cache, no-store, no-transform\r\nvary: Accept-Encoding\r\nx-content-type-options: nosniff\r\nx-xss-protection: 1; mode=block\r\natl-traceid: **********************************\r\nstrict-transport-security: max-age=63072000; includeSubDomains; preload\r\nreport-to: {\"endpoints\": [{\"url\": \"https://***********.cloudfront.net\"}], \"group\": \"endpoint-1\", \"include_subdomains\": true, \"max_age\": 600}\r\nnel: {\"failure_fraction\": 0.001, \"include_subdomains\": true, \"max_age\": 600, \"report_to\": \"endpoint-1\"}\r\nserver-timing: atl-edge;dur=189,atl-edge-internal;dur=44,atl-edge-upstream;dur=145,atl-edge-pop;desc=\"aws-eu-central-1\"\r\n\r\n[]\r\n{code}\r\n\r\n*Existing results* : The server responded with HTTP 200 OK\r\n\r\n*Expected results* :  It should return 401 unauthorized as mentioned in the documentation when authentication has failed\r\n[Get all issue types for user|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issue-types/#api-rest-api-2-issuetype-get]\r\n","createDate":"2024-10-01T14:12:49.000+0000","comments":[{"text":"Thank you for the bug report. Helps a lot. I saw that we have been supporting anonymous users for a while on this endpoint. I've updated api docs to now not say it will return a 401. Changes should appear in a week to 2 weeks. \r\n\r\nUpdated: \r\n * {{getIssueAllTypes}}\r\n * {{getIssueType}}\r\n * {{getIssueTypesForProject}}\r\n * {{getAlternativeIssueTypes}}","author":"Daniel Hawkins"}]},{"summary":"Deleting attachments in the description text via automation does not remove attachment from the attachment lists.","key":"JRACLOUD-84855","url":"https://jira.atlassian.com/browse/JRACLOUD-84855","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsing automation for Jira, when updating the Description field with an attachment, it does not remove the attachment from the attachment list although it removes the attachment from the description.\r\nh3. Steps to Reproduce\r\n # Create an issue.\r\n # Add any attachment to the description.\r\n # Create an automation that replaces the description with the value from another rich-text field.\r\n # Run this automation.\r\n\r\nh3. Expected Results\r\n # The description is replaced with the value from another field.\r\n # Attachments are deleted from the issue.\r\n\r\nh3. Actual Results\r\n # The description is replaced with the value from another field.\r\n # Attachments are not deleted from the issue.\r\n # The attachment is not available for manual deletion.\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-09-30T12:56:58.000+0000","comments":[{"text":"In a general scenario this is presumably minor, but when it is relevant to us, it's largely because it's actually a big deal. Our workflow can include screenshots which have Personal Health Information, so the inability to delete these attachments quickly and easily leaves us unable to address these privacy breaches.\r\n\r\nI imagine this would be a big problem for anyone conforming to HIPPA.","author":"David Cowley"}]},{"summary":"Active issues migrated under Archived projects with JCMA do not appear as archived on cloud","key":"JRACLOUD-84850","url":"https://jira.atlassian.com/browse/JRACLOUD-84850","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Archive a project with few issues\r\n # Migrate the project using JCMA \r\n\r\nh3. Expected Results\r\n # Archived project is migrated as archived in cloud\r\n # All linked issues are seen as archived is cloud\r\n\r\nh3. Actual Results\r\n # Archived issue is archived is cloud.\r\n # Linked issues are migrated into their original status and not archived\r\n\r\nh3. Workaround\r\n\r\nWorkaround 1: Archive the issues manually ([https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issues/#api-rest-api-2-issue-archive-put])\r\n\r\nWorkaround 2: Restore the project and archived it again. ([https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-projects/#api-rest-api-2-project-projectidorkey-archive-post])\r\n\r\n \r\n\r\n*Update:*\r\n # Issues migrated under archived projects behave as archived but the banner for archived project does not appear on the issues post migration.\r\n # Banner may appears on the issue after some time","createDate":"2024-09-01T08:20:12.000+0000","comments":[{"text":"Update:\r\n # Validated that even though issue appears as active, the permissions and all workflows for the issue migrated under are same as archived.\r\n # Validated that data in db shows in the right state to be considered as archvied.\r\n # On migration, the banner to label the issue as `part o archived project` does not appear. However, it was observed that the banner was there after around an hour of migration.\r\n\r\n \r\n!image.png|width=624,height=203!\r\n \r\nIt appears to be a UI issue where the banner is applied after couple of hours post migration.\r\n \r\n \r\nNext Steps:\r\n \r\nFind the right team with #jet-helix-team to define right behaviour on UI.","author":"aaggarwal2"}]},{"summary":"Get bulk permissions API returns incorrect result in some cases","key":"JRACLOUD-84541","url":"https://jira.atlassian.com/browse/JRACLOUD-84541","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe [Get bulk permissions API|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-permissions/#api-rest-api-2-permissions-check-post] returns incorrect result in some cases, because it lacks particular checks, such as product specific permission overrides. Meanwhile, the [Get my permissions API|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-permissions/#api-rest-api-2-mypermissions-get] returns correct result.\r\nh3. Steps to Reproduce\r\n # Create Jira Discovery Project\r\n # Settings → Access. Set Project Access to Open\r\n # Settings → Access → Add people. Invite User and set access level as Contributor\r\n # User Management → Users. Chose previously added user, Grant Access to Jira product with product role set to User\r\n # Login by a user, access project in UI, verify user cannot create issues.\r\n # Call Get Bulk Permission endpoint.\r\n\r\nh3. Expected Results\r\n\r\nCall Get Bulk Permission endpoint, expect no access to CREATE_ISSUES\r\nh3. Actual Results\r\n # Call Get Bulk Permission endpoint: it shows the user has access to CREATE_ISSUES, which is {*}not expected{*}.\r\n # Call My permissions endpoint: it shows the user does not access to CREATE_ISSUES, which is {*}expected{*}.\r\n\r\nh3. Workaround\r\n\r\nUse [Get my permissions API|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-permissions/#api-rest-api-2-mypermissions-get] instead, but bad performance for bulk operation.","createDate":"2024-08-22T04:07:38.000+0000","comments":[{"text":"Out of curiosity, how is a permission API returning the wrong permissions not a higher priority? ","author":"Jens Schumacher"},{"text":"Hi [~0c7b647864ef] \r\n\r\nThanks for raising your question. There are multiple factors to determine priority, such as customer impact, complexity of the fix, dependencies, whether workaround is available, etc. Also priority rating could be adjusted later on when priority factors change.\r\n\r\nIf the problem is affecting you, please vote this ticket or raise support ticket. It helps us gauge customer impact. Thank you.","author":"Jason Huang"}]},{"summary":"Hyperlinks in Assets Customfield's description is showing as Text in transition screen","key":"JRACLOUD-84505","url":"https://jira.atlassian.com/browse/JRACLOUD-84505","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen Asset Customfield description is added with links like :{{{{}} [Atlassian|{}}}{{{}[https://www.atlassian.com/]{}}}{{{}]{}}} , then its not showing as Hyperlinks in Transition Screen. \r\nIt works for other custom fields but Assets Custom Field is having this issue.\r\nh3. Steps to Reproduce\r\n # Create a Assets Object Custom Field.\r\n # Add description as {{{}[Atlassian|{}}}{{{}[https://www.atlassian.com/]{}}}{{{}]{}}}\r\n # Add the newly created field in Create Screen and in Transition Screen.\r\n # Create a ticket from Jira > Here we can see the Description is showing links correctly.\r\n # Perform transition and from the screen > You can see the Link is showing as text field.\r\n\r\nh3. Expected Results\r\n\r\nHyperlinks in the custom field description should render correctly as links.\r\nh3. Actual Results\r\n\r\nHyperlinks are showing as Text line.\r\nh3. Workaround\r\n\r\nNone at the moment.","createDate":"2024-08-19T10:42:48.000+0000","comments":[]},{"summary":"Cloning Initiative or more higher hierarchy issue does not include its child","key":"JRACLOUD-84453","url":"https://jira.atlassian.com/browse/JRACLOUD-84453","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCloning Initiative or more higher hierarchy issue, you can select option \"include subtasks.\"\r\nHowever, even if you check the option, the cloned one does not have any child issue.\r\nPlease check out the video clip: \r\n\r\n [^atlassian-support 2024-08-07 at 14.16.46.mov] \r\n\r\n\r\nh3. Steps to Reproduce\r\n # create higher level issue than Epic. \r\n # set epic as a child of the issue.\r\n# clone the issue with \"include subtasks\" option.\r\n\r\nh3. Expected Results\r\nchild issues are cloned with the issue.\r\n\r\nh3. Actual Results\r\nonly the issue itself is cloned.\r\n\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-08-07T05:23:50.000+0000","comments":[]},{"summary":"Due date shows one day behind in confluence DC","key":"JRACLOUD-84380","url":"https://jira.atlassian.com/browse/JRACLOUD-84380","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Open Jira, add the Due date field, and fill it.\r\n # Create a Confluence DC page and add the new issues created on the respective page including value for the Due date (make sure the created column is added too). Here you will see that the Due date shows just fine on the Confluence side\r\n # Now remove the created column.\r\n # This time you will see that the Due date in Confluence shows one day behind\r\n\r\nh3. Expected Results\r\n\r\nTo show correctly the Due Date\r\nh3. Actual Results\r\n\r\nDue date in Confluence shows one day behind\r\nh3. Workaround\r\n\r\nKeep the created column.","createDate":"2024-07-29T20:21:16.000+0000","comments":[]},{"summary":"Updating the parent field via CSV fails if the parent issue was set as parent before to the same child issue","key":"JRACLOUD-84301","url":"https://jira.atlassian.com/browse/JRACLOUD-84301","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUpdating the parent field via CSV fails if the parent issue was set as parent before to the same child issue.\r\n\r\nh3. Steps to Reproduce\r\n # Update the parent field from one issue to another.\r\n # Use the CSV import to update the parent field to the original parent issue.\r\n\r\nh3. Expected Results\r\n\r\n- The parent is changed to the original parent issue. \r\n- The import log file shows that the linking was successful.\r\n- The history tab shows 2 records:\r\n\r\n !parentischanged.png|thumbnail! \r\n\r\nh3. Actual Results\r\n\r\n- The parent is NOT changed to the original parent issue. \r\n- The import log file shows that the linking was successful.\r\n- The history tab shows 1 record:\r\n !parentisNOTchanged.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nTo address the issue, you can update the issues via the REST API. Here's a bash script example that demonstrates how to use the API endpoint [Edit Issue|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-issueidorkey-put] to bulk update the parent field.\r\n\r\nh3. Workaround \r\n\r\n{noformat}\r\n#!/bin/bash\r\n\r\n# Replace FILE_PATH with the path to your input file\r\nFILE_PATH=\"<input file path>\"\r\n\r\n# Replace <site URL> with your actual site URL\r\nSITE_URL=\"https://<site URL>/rest/api/3/issue\"\r\n\r\n# Loop through each line in the file\r\nwhile IFS= read -r line; do\r\n    # Extract child and parent issue keys from the line\r\n    # Assuming the file format is: child_issue parent_issue\r\n    child_issue=$(echo \"$line\" | awk '{print $1}')\r\n    parent_issue=$(echo \"$line\" | awk '{print $2}')\r\n\r\n# Construct the API call for setting the parent of the child issue\r\n\r\ncurl --request PUT \\\r\n  --url \"$SITE_URL/$child_issue\" \\\r\n  --user '<email address>:<Token>' \\\r\n  --header 'Accept: application/json' \\\r\n  --header 'Content-Type: application/json' \\\r\n    -d \"{\r\n              \\\"fields\\\": {\r\n                  \\\"parent\\\": {\r\n                      \\\"key\\\":\\\"$parent_issue\\\"\r\n                  }\r\n              }\r\n            }\"\r\n\r\ndone < \"$FILE_PATH\"\r\n{noformat}\r\n\r\n*+To use this script:+*\r\n- First copy and paste it into a file on your computer.\r\n- Download the required input file.\r\n- Update the `FILE_PATH` variable in the script with the actual path to your input file.\r\n- Replace `<email address>` and `<Token>` with your Jira credentials. You can generate an API token by following the instructions [here|https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/#Create-an-API-token].\r\n- Ensure the script file is set as executable.\r\n- Execute the script in your terminal.\r\n\r\nThis script is a straightforward example. Feel free to adapt it or write your own script in a language of your choice to meet your specific requirements.","createDate":"2024-07-18T10:12:19.000+0000","comments":[]},{"summary":"Restrict to when a field is a specific value rule shows a warning","key":"JRACLOUD-84227","url":"https://jira.atlassian.com/browse/JRACLOUD-84227","type":"Bug","priority":"","description":"h3. Issue Summary\r\nRestrict to when a field is a specific value rule shows a warning\r\n\r\nh3. Steps to Reproduce\r\n # Create a drop-down field\r\n # Add the \"Restrict to when a field is a specific value\"\r\n # Choose the drop-down field > Set \"Review its value as\" as \"A selection\"\r\n # Choose \"Check if it\" as \"Doesn't equal\"\r\n # Choose \"This value\" as Empty\r\n\r\nh3. Expected Results\r\nThe warning should not be shown\r\n\r\nh3. Actual Results\r\nA warning is shown which is misleading\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-07-09T07:05:00.000+0000","comments":[]},{"summary":"Provisioning a new Jira site to a large organization is slow","key":"JRACLOUD-84174","url":"https://jira.atlassian.com/browse/JRACLOUD-84174","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn an organization with  a large user and group directory and is on the unified user management, provisioning a new Jira site may take awhile to complete. \r\n\r\nh3. Steps to Reproduce\r\n\r\n1. On an organization with the unified user management, setup a large user and group directory. For example \r\n - 100,000 users\r\n - 2000 groups \r\n\r\n2. Go the organization administration and navigate Products > Add Products. \r\n3. Choose Jira\r\n4. Choose to create a new site\r\n\r\nh3. Expected Results\r\n\r\nThe new Jira site should be available to the admins within a reasonable amount of time. \r\n\r\nh3. Actual Results\r\n\r\nThe large directory will need to sync completely to the new Jira site and this may take awhile. \r\nOnce the directory fully syncs to Jira, the new site will be available. \r\n\r\nh3. Workaround\r\n\r\nWait for awhile for the new site to be made available. You can also contact Atlassian support to help check on the status of the new site. ","createDate":"2024-07-03T08:20:57.000+0000","comments":[]},{"summary":"Issue Security Scheme continues affecting some issues despite having been removed from project","key":"JRACLOUD-84067","url":"https://jira.atlassian.com/browse/JRACLOUD-84067","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you disassociate an issue security scheme from a project and then delete it, it doesn't actually remove that issue security level from the issue, which renders the issue inaccessible.\r\n\r\nThis is reproducible on Cloud: Yes (Random)\r\nh3. Steps to Reproduce\r\n # Create a new issue security scheme and level\r\n # Associate that issue security scheme with a project and associate the issue security level with an issue.\r\n # When you disassociate the issue security scheme from the project and check the DB, some issues will still have security.\r\n # You won't be able to access issues that still have security set.\r\n\r\nh3. Expected Results\r\n\r\nThe issues have no security level and anyone can see it.\r\n\r\n*security* column should be null in the DB for the issues.\r\nh3. Actual Results\r\n\r\nSome issues will still have security set and won't be accessible.\r\n\r\n*security* column will not be null in the DB for these issues.\r\nh3. Workaround\r\n\r\nUse the below DB query to set the security column value to null.\r\n{code:java}\r\nupdate jiraissue set security = null where security in (select distinct security from jiraissue where security not in (select id from schemeissuesecuritylevels ) and security is not null and pkey='<Project Key>'); {code}","createDate":"2024-06-21T14:06:08.000+0000","comments":[]},{"summary":"Historical JQL searches return wrong results","key":"JRACLOUD-84058","url":"https://jira.atlassian.com/browse/JRACLOUD-84058","type":"Bug","priority":"","description":"{panel:title=Environment}\r\n(!) Customers that migrated from Server to Cloud *recently* (After March 2024).\r\n{panel}\r\n\r\nh3. Issue Summary\r\nCustomers might experience trouble running historical JQL searches using *WAS/WAS IN* with *BEFORE/AFTER/DURING/ON*.\r\n\r\nh3. Steps to Reproduce\r\n # Run one of the following example JQLs:\r\n ## status *WAS* closed *DURING* ('2024-01-01', '2024-01-31')\r\n ## assignee *WAS* currentUser() *AFTER/BEFORE* startOfYear(-1)\r\n ## priority *WAS* P1 *ON* '2024-01-01'\r\n\r\nh3. Expected Results\r\nIssues within the date range and condition are returned.\r\n\r\nh3. Actual Results\r\nIn some cases, the historical JQL search will return additional issues or no issues. Issues that had value _X_ set to _<field>_ before A but it has been later (before A) changed. \r\nThis is caused by corrupted data in the history of some issues. Only JQL is affected, as that data is only used by the search engine.\r\n\r\nh3. Workaround\r\n*If you are experiencing the problem described in this ticket please contact Atlassian support so we can assist you in fixing it.*","createDate":"2024-06-20T08:36:10.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/PCS-293000\r\nhttps://getsupport.atlassian.com/browse/PCS-278688\r\nhttps://getsupport.atlassian.com/browse/PCS-292511","author":"Eduardo Santos"},{"text":"Greetings!\r\n\r\nI am curious: why was the priority of this defect just changed from High to Low when the status shows it is \"in progress\"?\r\n\r\nIs this a \"smell\" that this defect will not actually be fixed once and for all for Jira Cloud, and instead closed with the dreaded \"Won't do\" or moved to \"Future Consideration\"?  This symptom is also a problem with new Jira Cloud sites (i.e., not migrated) after the first Team-managed project is added to a site.  The scope is certainly larger than migration from Server to Cloud.\r\n\r\nKind regards,\r\nBill","author":"Bill Sheboy"},{"text":"Hi,\r\n\r\nWe are impacted by this issue for projects migrated from server cloud in July 2024. When running JQL queries using the \"Status Was condition, a significant number of extra issues are returned in the Query. This is impacting our ability to report on quality metrics for migrated projects. \r\n\r\n \r\n\r\nKind Regards,\r\n\r\nJason","author":"Jason Finan"}]},{"summary":"Permission scheme fails to delete if there is project associated","key":"JRACLOUD-84026","url":"https://jira.atlassian.com/browse/JRACLOUD-84026","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe error \"The scheme cannot be deleted when there are projects associated with it\" is shown when trying to delete Permission Scheme associated with the projects.\r\n\r\nAs per [documentation|https://support.atlassian.com/jira-cloud-administration/docs/manage-project-permissions/] projects associated with permission scheme should fall back to default permission scheme.\r\nh3. Steps to Reproduce\r\n # Create a non-default permission scheme\r\n # Associate project with the permission scheme\r\n # Delete the Permission scheme\r\n # Observe the error\r\n\r\nh3. Expected Results\r\n\r\nPermission scheme associated with one or more projects os deleted and those projects fall back to using the *Default Permission Scheme* as outlined in [documentation|https://support.atlassian.com/jira-cloud-administration/docs/manage-project-permissions/].\r\nh3. Actual Results\r\n\r\nThe error \"The scheme cannot be deleted when there are projects associated with it\" is shown\r\nh3. Workaround\r\n\r\nIdentify projects which are using this Permission Scheme and assign to different permission scheme.\r\n\r\n \r\n\r\nPreviously it was submitted as a bug [JRACLOUD-79136 - The delete permission scheme dialog message is confusing|https://jira.atlassian.com/browse/JRACLOUD-79136], however, the bug is related to permission scheme deletion rather than error message.","createDate":"2024-06-17T06:41:03.000+0000","comments":[]},{"summary":"Issues remain associated to deleted request types","key":"JRACLOUD-84002","url":"https://jira.atlassian.com/browse/JRACLOUD-84002","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a _request type_ that's currently in use is deleted, the issues remain associated to them on background.\r\ne.g.: The JQL \"request type is empty\" won't return those issues because the association with the deleted _request type_ still exist.\r\nh3. Steps to Reproduce\r\n # Create a JSD request\r\n # Delete the associated _request type_\r\n # Search for \"request type is empty\" and the issue won't be returned.\r\n\r\nh3. Expected Results\r\n\r\nThe association between issues and the deleted request types is removed.\r\nh3. Actual Results\r\n\r\nThe issues remain associated to non existing request types.\r\n\r\nCustomers are able to view the issue via the portal, but the details are not available. \r\n\r\nCustomers can also type a comment, but it will show an error if they try to save it.\r\nh3. Workaround\r\n\r\nN/A","createDate":"2020-04-01T21:10:56.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 1, 2021|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira Service Management Cloud users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know via raising a ticket at https://support.atlassian.com.\n\nThank you again for providing valuable feedback to our team!\nJira Service Management Cloud team\n{panel}","author":"Nicole"}]},{"summary":"Jira AI JQL search suggests invalid syntax for example assignee IN inactiveUsers()","key":"JRACLOUD-83941","url":"https://jira.atlassian.com/browse/JRACLOUD-83941","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira AI JQL search suggests invalid syntax  for example assignee NOT IN inactiveUsers()\r\n\r\nh3. Steps to Reproduce\r\n# In Jira Filter -> View All issues click on AI icon\r\n# Type Find all issues that assignee is inactive\r\n# Suggests assignee IN inactiveUsers()\r\n\r\nh3. Expected Results\r\n\r\nassignee IN (inactiveUsers())\r\n\r\nh3. Actual Results\r\n\r\nassignee IN inactiveUsers()\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-06-05T00:26:55.000+0000","comments":[{"text":"hi [~1b3780760add] . Please don't worry about the closed ticket. I've pointed Fariba to the correct team for your issue :)","author":"Exequiel Bahamonde Carcamo"}]},{"summary":"Jira AI JQL search suggests invalid none existing functions ","key":"JRACLOUD-83940","url":"https://jira.atlassian.com/browse/JRACLOUD-83940","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira AI JQL search suggests invalid non-existing Jira JQL functions. This is confusing the users. \r\nh3. Steps to Reproduce\r\n # In Jira Filter -> View All issues click on AI icon\r\n # Type All issues created by a former employee \r\n # Suggests creator IN deletedUsers()\r\n\r\nh3. Expected Results\r\n\r\nThis function does not exist in Jira so it should not be suggesting it.\r\nh3. Actual Results\r\n\r\nIt suggest none existing functions like:\r\n{code:java}\r\nreporter IN archivedUsers()\r\ncreator IN deletedUsers() \r\nassignee NOT IN activeUsers(){code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-06-05T00:21:33.000+0000","comments":[{"text":"hi [~1b3780760add] . Please don't worry about the closed ticket. I've pointed Fariba to the correct team for your issue :)","author":"Exequiel Bahamonde Carcamo"}]},{"summary":"Jira AI JQL search suggests invalid none existing functions ","key":"JRACLOUD-83940","url":"https://jira.atlassian.com/browse/JRACLOUD-83940","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira AI JQL search suggests invalid non-existing Jira JQL functions. This is confusing the users. \r\nh3. Steps to Reproduce\r\n # In Jira Filter -> View All issues click on AI icon\r\n # Type All issues created by a former employee \r\n # Suggests creator IN deletedUsers()\r\n\r\nh3. Expected Results\r\n\r\nThis function does not exist in Jira so it should not be suggesting it.\r\nh3. Actual Results\r\n\r\nIt suggest none existing functions like:\r\n{code:java}\r\nreporter IN archivedUsers()\r\ncreator IN deletedUsers() \r\nassignee NOT IN activeUsers(){code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-06-05T00:21:33.000+0000","comments":[{"text":"hi [~1b3780760add] . Please don't worry about the closed ticket. I've pointed Fariba to the correct team for your issue :)","author":"Exequiel Bahamonde Carcamo"}]},{"summary":"\"Start date\" value will be blank when creating a ticket via Jira Cloud with Microsoft Teams.","key":"JRACLOUD-83919","url":"https://jira.atlassian.com/browse/JRACLOUD-83919","type":"Bug","priority":"","description":"h3. Issue Summary\r\nYou can create Jira ticket via Jira Cloud with Microsoft Teams.\r\n* [Integrate Jira Cloud with Microsoft Teams|https://support.atlassian.com/jira-software-cloud/docs/integrate-jira-cloud-with-microsoft-teams/]\r\n\r\nYou can see the default value of \"Start date\" via create an issue screen.\r\nHowever, If you create a ticket with the default Start date value, the value remains none on the new ticket.\r\n !screenshot-1.png|thumbnail!   !screenshot-3.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n # Attach \"Start date\" field to \"Create issue\" screen.\r\n # Open create issue screen via Jira Cloud with Microsoft Teams.\r\n\r\nh3. Expected Results\r\nAfter ticket creation, \"Start date\" field have a default value.\r\n\r\nh3. Actual Results\r\n\"Start date\" value will be blank\r\n\r\nh3. Workaround\r\nOnce you select another date and re-select the dafault date, \"Start date\" field will have an accurate value.","createDate":"2024-06-04T04:54:36.000+0000","comments":[]},{"summary":"Changing field value of attachment does not trigger Field Value Change automation (adding)","key":"JRACLOUD-83901","url":"https://jira.atlassian.com/browse/JRACLOUD-83901","type":"Bug","priority":"","description":"h3. Issue Summary\r\nHaving automation that triggers when the *attachment* field value is changed, it does not execute when adding a file. \r\n !image-2021-04-06-14-19-33-121.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n # Create automation with the *Field Value Change* trigger\r\n !image-2021-04-06-14-37-41-478.png|thumbnail! \r\n # Drag and Drop a file to a ticket\r\n\r\nh3. Expected Results\r\nAutomation gets triggered successfully\r\n\r\nh3. Actual Results\r\nAutomation is not triggered \r\n\r\nh3. Workaround\r\nNo current workaround\r\n","createDate":"2021-04-06T17:41:37.000+0000","comments":[{"text":"Arthur has described this bug accurately.  It would be great if it can get resolved quickly because it is difficult to have my Customers add attachments using the paper clip instead of Drag & Drop.\r\n\r\n \r\n\r\nThanks!","author":"Patrick Girgenti"},{"text":"HI,\r\n\r\nAny update on this?","author":"Patrick Girgenti"},{"text":"Can I get an update on this or at least some sort of acknowledgement? ","author":"Patrick Girgenti"},{"text":"Hi [~pgirgenti],\r\n\r\nThis is an issue with Jira JSM. They are not sending an event when an attachment is added as part of a comment, so Automation is not able to respond. I've asked [~418fd3fec2e7] to update the ticket accordingly and assign.\r\n\r\nCheers.","author":"Simmo"},{"text":"Hi there,\r\n\r\nI'm a developer on the Jira Service Management team that's responsible for make sure attachments work as they should. Thank you for reporting this bug – and I'm sorry that it's causing you some pain. Also, my apologies for not replying sooner, I missed that this was assigned to us.\r\n\r\nI was able to confirm that the automation rule indeed is not being fired when dragging and dropping a file onto an issue, however I also was unable to get the rule to run when adding the attachment via the paperclip icon – so I'm wondering if something might have changed there, too. Could you please confirm whether that is still working for you? In the meantime I'll update the status of this issue to Gathering Impact to reflect that we'll see how many more teams are experiencing this issue.\r\n\r\nThanks,\r\n\r\nNick Robson\r\nJira Service Management team","author":"Nick Robson"},{"text":"Hello Nick,\r\n\r\n \r\n\r\nI apologize for the delay.  I am on vacation this week, but I had a few minutes to do a couple of tests. \r\n\r\nI created a new ticket for testing EMSD-26323. Please note that this ticket type has a response automation trigger.  It is called \"Onboard - Attachment Trigger\"\r\n\r\nI attached a file using the paper clip and I received an email confirmation. See attached PDF\r\n\r\nI then attached a file using drag and drop and I didn't receive an email confirmation.\r\n\r\n \r\n\r\nI also did the same tests on another ticket EMSD-26075 and I got the same results as above","author":"Patrick Girgenti"},{"text":"Hi,\r\n\r\nDo we have any updates on this?","author":"Patrick Girgenti"},{"text":"Hi,\r\n\r\n \r\n\r\nCan someone give me some sort of update on this?  ","author":"Patrick Girgenti"},{"text":"I spent some time investigating this issue. The thing is that it's different in the old issue view and in the new issue view.\r\nh3. Old issue view\r\n\r\nWhen you add an attachment, no matter from where, Jira fires an \"issue_updated\" event with a changelog, having the 'Attachment' field changes:\r\n{code:java}\r\nChangelog: [id:29048657, items:[[field:Attachment, fieldtype:jira, fieldId:attachment, from:null, fromString:null, to:965187, toString:chrome_7Vj5qYcUAp.gif]]] {code}\r\nh3. New issue view\r\n\r\nThe only place to add an attachment is a comment. But instead of the issue_updated event, an 'attachment_created' event is fired.\r\n\r\n \r\n\r\nI can see two issues here:\r\n # The issue_updated event is not fired and changelog is not updated - the automation can't catch a change of the 'attachment' field.\r\n # Even if I try to use the 'attachment_created' in our automation, this event doesn't have the issue key!\r\n\r\nThat being said, in the new issue view, it's not possible to have an automation based on attachment change.","author":"Andrey Kiyanovskiy"},{"text":"Hi Jira team,\r\n\r\nIs there any possibility this bug will be fixed?","author":"Usama attaullah"},{"text":"Hi Jira team,\r\n\r\nThis is a real problem for us when communicating on issues with our customer (through integrations)!\r\n\r\nPlease let us know an approximate date for correcting this.\r\n\r\nBR\r\n\r\nCatrine\r\n\r\n ","author":"Catrine Lundström"},{"text":"+1 impacting my team","author":"Dennis Zhao"},{"text":"It‘s obviously a bug. Please consider fixing it ASAP. Thanks.","author":"Yong"},{"text":"Also affected by this bug. A fix would be highly appreciated, thanks!","author":"Alexander Guillen Garcia"},{"text":"Impacting our setup as well","author":"Manu Devos"},{"text":"Would be great if this functionality is fixed","author":"Usama attaullah"},{"text":"Hello! Is anyone out there?","author":"Patrick Girgenti"},{"text":"I cannot believe how old this bug is and not being worked on.\r\n\r\nI was trying to program an automation with this and wondering why won't it work?\r\nI could really use this ability!","author":"PJ Balsley"},{"text":"+1 for this issue to be resolved. This is hamstringing an entire service project with unique requirements. ","author":"David Quiram"},{"text":"+1 customer impacted here. This is ain't good at all since this ticket was raised years ago.","author":"William Thomaz Calesco"},{"text":"+1","author":"Pepijn Szekér (GIM)"},{"text":"+1","author":"Chingiz Fazliahmadov"},{"text":"+1","author":"Andy Nguyen"},{"text":"It is really hard already to work with attachments in automations. This makes it even harder. We really need this to work. ","author":"Zdenek.Vyhnis"},{"text":"I agree with previous comments. This issue makes working with attachments in automations even more difficult than it already is.","author":"Kristi"},{"text":"How is it that the bug has been open for 3 years? This bug is not simple or unimportant. We need to detect when attachments are updated and take appropriate actions based on this condition","author":"rsisauri"},{"text":"There is a workaround for this bug, maybe it will be helpful:\r\n\r\nAs a workaround, you can use an \"{*}Issue commented{*}\" detect whenever a comment contains common file extensions meaning that an attachment was added to it. Please see the idea below:\r\n\r\nThe rule should have the \"{*}Issue commented{*}\" trigger instead of the \"{*}Field value changed{*}\", since attachments are added via comment:\r\n\r\nThen after the trigger, add a \"Smart values\" condition with the following configuration:\r\n * {*}First value{*}: \r\n\r\n{\\{issue.comments.last.body}}\r\n * {*}Condition{*}: Contains regular expression\r\n * {*}Regular expression{*}:\r\n\r\n(.png|.jpeg|.pdf|.jpg)\r\n\r\nWith this trigger, you can detect the new attachment added to the ticket\r\n\r\n!image-2024-12-02-10-34-45-555.png!\r\n\r\n ","author":"litabatadze"},{"text":"This case disrupts our escalation process, which involves creating a separate linked ticket and duplicating the request details (including attachments, etc.). In some instances, this method fails to function as expected.","author":"tomasz.armata"}]},{"summary":"CSV importing users as active even when selecting to import them as inactive","key":"JRACLOUD-83882","url":"https://jira.atlassian.com/browse/JRACLOUD-83882","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen importing issues from CSV, the users set in the reporter/assignee field within the CSV will be imported to the instance. You're prompted to select if you want the users to be imported as active or inactive. The users are being automatically imported as active regardless of the option selected.\r\n\r\nh3. Steps to Reproduce\r\n# Create a CSV file with a Reporter/ Assignee\r\n# Import the file using the External System Import\r\n# Map the Summary and Reporter/ Assignee fields\r\n# Select to import the users as inactive/ Set their application access manually\r\n\r\nh3. Expected Results\r\nThe users will be imported as inactive following the option that you've selected/ Create users with the specific application you selected\r\n\r\nh3. Actual Results\r\nThe users are imported as active with application access/ Created with all the Jira products within the instance.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-27T20:46:47.000+0000","comments":[{"text":"The CSV import is one of the major ways to migrate data from 3rd party applications to Atlassian Cloud. If Atlassian want businesses to move to their platform, they have to work harder of making migration tools actually work.","author":"Yevgen Lasman"}]},{"summary":"Wrong backlash \"\\\" parse for hyperlinks in text fields","key":"JRACLOUD-83812","url":"https://jira.atlassian.com/browse/JRACLOUD-83812","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBacklashes \"\\\" are being removed from comments and descriptions hyperlinks in Jira.\r\n\r\nReplicable by sending an email with the link to JSM mail handler, or having an integration from OpsGenie to JSM that creates tickets from alerts. \r\n\r\nIf you inform the following link:\r\n\r\n- https://test.com/test/#/displays/6/test?asset=\\\\test\\test\\test%20test%20test%5test\r\n\r\nJira will remove the backlashes when there's only one and will keep one backlash if there are two \"\\\\\". So the link accessed will be:\r\n\r\n- https://test.com/test/#/displays/6/test?asset=\\testtesttest%20test%20test%5test\r\n\r\nh3. Steps to Reproduce\r\n # Send an email to JSM mail handler with the following text:\r\n**  https://test.com/test/#/displays/6/test?asset=\\\\test\\test\\test%20test%20test%5test\r\n # Try to access the link\r\n\r\nh3. Expected Results\r\n\r\nYou should be redirected to:\r\n\r\n- https://test.com/test/#/displays/6/test?asset=\\\\test\\test\\test%20test%20test%5test\r\n\r\nh3. Actual Results\r\n\r\nYou're redirected to an invalid link:\r\n\r\n- https://test.com/test/#/displays/6/test?asset=\\testtesttest%20test%20test%5test\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-16T15:14:32.000+0000","comments":[]},{"summary":"Loop transition causes unexpected status changes due to race condition","key":"JRACLOUD-83807","url":"https://jira.atlassian.com/browse/JRACLOUD-83807","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA race condition occurs when a manual loop transition coincides with an automated transition sequence, leading to an unintended and incorrect issue status change. This issue is particularly evident when an agent manually triggers a loop transition at the same time an automation rule is executing a series of status changes. This can result in the issue unexpectedly landing in a status that does not have a direct transition path defined in the workflow.\r\nh3. Steps to Reproduce\r\n # An agent selects a loop transition on an issue, which is intended to transition the issue to its current status.\r\n # Concurrently, an automation rule is triggered, which aims to transition the issue through a sequence of statuses (e.g., \"Status A\" -> \"Status B\" -> original status).\r\n # While the automation is processing these transitions, the agent attempts to manually use the loop transition.\r\n # The issue ends up in an unexpected status due to the race condition, bypassing the workflow’s defined transition paths.\r\n\r\n_{*}Note{*}: Reproducing this issue is challenging due to its dependency on precise timing between manual and automated actions._\r\nh3. Expected Results\r\n\r\nThe issue should transition according to the workflow paths defined, without the possibility of bypassing direct transition paths, regardless of simultaneous automation rules or manual transitions.\r\nh3. Actual Results\r\n\r\nThe issue may transition to a status without a direct transition path defined in the workflow, indicating a race condition that permits an unintended status change.\r\n\r\n*Error Messages and Logs:*\r\n\r\nNo specific error messages are displayed. The anomaly is evident in the issue history, with the issue moving from one status to another without a defined transition path for that step.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior.","createDate":"2024-05-17T17:35:55.000+0000","comments":[]},{"summary":"Status translation is not working in Global issue create screen.","key":"JRACLOUD-83782","url":"https://jira.atlassian.com/browse/JRACLOUD-83782","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe status translation is not reflected in the Global issue create screen.\r\nh3. Steps to Reproduce\r\n # Translate status to be displayed differently based on the user's language settings - [link here|https://confluence.atlassian.com/jirakb/translating-the-workflow-statuses-1188786331.html]\r\n # Click on the create button to open a create issue dialogue.\r\n # Note that none of the statuses show the translated string.\r\n\r\nh3. Expected Results\r\n\r\nStatuses should be displayed in their translated form based on language settings.\r\nh3. Actual Results\r\n\r\nStatuses are not displayed in their translated form as expected.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-15T07:57:01.000+0000","comments":[]},{"summary":"Media copy pasted from external private source gives no warning it will show “preview unavailable\" for others","key":"JRACLOUD-83718","url":"https://jira.atlassian.com/browse/JRACLOUD-83718","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: no\r\n\r\nThe bug affects all the users trying to copy/paste images from a private source, such as a received email in Gmail with pictures attached inline with the email. When pasting such private images into the description of a new Jira issue, or a comment on a existing Jira issue, the private image will appear properly and there is no indication that it will show as \"{*}Preview unavailable{*}\" to others (or you at a later time) because it is private.\r\nh3. Steps to Reproduce\r\n # Send email to yourself using Gmail web and attach picture in-line\r\n # Open email and copy an image from your private Gmail account using your keyboard.\r\n # Paste that image in the issue description\r\n # Create the issue or paste the content in the comment of an existing issue\r\n\r\nAdditional information:\r\n * When you copy images from places like a received Gmail email, the image itself is not copied to the clipboard. Rather a private URL to the image is copied which is viewable to you but inaccessible to others for security reasons. This is an industry standard restriction and not Atlassian specific.\r\n * If email you are pasting pics from has pictures loaded via external links (e.g. mail list) then picture will be attached properly to the issue.\r\n * If email has private pics attached to the email (e.g. you receive email with pic attached), then the issue is reproducible.\r\n\r\nh3. Expected Results\r\n\r\nThere is a visual error indication to the user when private images are pasted into a Jira description or comment. Ideally there also will be some guidance in the error on how to copy the image directly so it is visible for all.\r\nh3. Actual Results\r\n\r\nThe private image will appear properly and there is no indication that it will show as \"{*}Preview unavailable{*}\" to others (or you at a later time) because it is private.\r\nh3. Workaround\r\n\r\nYou can download the file and then use the \"Files & images\" button in the editor toolbar to upload the media.","createDate":"2024-05-07T05:51:58.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Vito from the Confluence team. Thank you for your patience as we've worked on improvements to indicate when externally linked images are used. We have these changes ready for release, however, we are currently in the process of planning rollout. We know you have been waiting eagerly for this improvement as we are. Thank you again for your patience, and we hope to have an update soon.\r\n\r\n\r\nBest,\r\nVito","author":"Vito"}]},{"summary":"\"Some fields in this project and issue type don’t allow resizing or minimizing\" tooltip shown on the Issue Create screen","key":"JRACLOUD-83633","url":"https://jira.atlassian.com/browse/JRACLOUD-83633","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n\"Some fields in this project and issue type don’t allow resizing or minimizing\" tooltip is shown on the Issue Create screen, thus preventing the user creating the given issue to minimize or resize the window. The issue should \"only\" affect Company-Managed Software projects.\r\nh3. Steps to Reproduce\r\n # Install an App from the mark that is making modifications to the Jira (JSW) UI. A sample App = \"Default Values for 'Create Issue' screen - Issue Templates\".\r\n # (depending on the App) Set a specific scope, in terms of projects where the App should apply its settings.\r\n\r\nh3. Expected Results\r\n\r\nResizing and/or minimizing the Issue Create screen should be possible.\r\nh3. Actual Results\r\n\r\nResizing and/or minimizing of the Issue Create screen is no longer possible and the \"Some fields in this project and issue type don’t allow resizing or minimizing\" tooltip is shown.\r\n\r\n!image-2024-04-25-11-33-32-272.png|width=562,height=203!\r\nh3. Workaround\r\n\r\nAs of now, the only \"workaround\" is to uninstall the App causing the issue.","createDate":"2024-04-25T09:36:37.000+0000","comments":[{"text":"Hi!\r\n\r\nThis affects our business units, hopefully there will be a fix at some point.","author":"Kaur Joakit"}]},{"summary":"Rest api /rest/api/3/user does not return details for applicationRoles.","key":"JRACLOUD-83606","url":"https://jira.atlassian.com/browse/JRACLOUD-83606","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe response for [/rest/api/3/user?accountId=accountID&expand=groups,applicationRoles|https://your-domain.atlassian.net/rest/api/3/user?accountId=accountID&expand=groups,applicationRoles] and [rest/v3/api-group-users|https://your-domain.atlassian.net/rest/api/3/users] does not reflect all the [items|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-users/#api-rest-api-3-user-get:~:text=ListWrapperCallbackApplicationRole-,items,-array%3CApplicationRole%3E] listed in the documentation.\r\nh3. Steps to Reproduce\r\n # Goto test site, and run the call [/rest/api/3/user?accountId=5ffed2a53b5e47013839365d&expand=groups,applicationRoles|https://whisperer.atlassian.net/rest/api/3/user?accountId=5ffed2a53b5e47013839365d&expand=groups,applicationRoles] \r\n # In o/p we only see the below under items: \r\n{code:java}\r\nitems\": [{\"key\": \"jira-servicedesk\",\"name\": \"Jira Service Desk\"},{\"key\": \"jira-software\",\"name\": \"Jira Software\"}]{code}\r\n\r\nh3. Expected Results\r\n # However, the document states that other details like *defaultGroups ,* *defaultGroupsDetails ,* *hasUnlimitedSeats etc* {*}{{*}}{*}{{*}}will be available under [items.|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-users/#api-rest-api-3-user-get:~:text=ListWrapperCallbackApplicationRole-,items,-array%3CApplicationRole%3E]\r\n\r\nh3. Actual Results\r\n # In o/p we only see the below under items: \r\n{code:java}\r\nitems\": [{\"key\": \"jira-servicedesk\",\"name\": \"Jira Service Desk\"},{\"key\": \"jira-software\",\"name\": \"Jira Software\"}]{code}\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-23T05:48:08.000+0000","comments":[{"text":"Is there any update on this issue?","author":"Bmy"},{"text":"Facing same issue, please provide update on this.\r\n\r\n\r\n{code:java}\r\n{\r\n  \"self\": \"https://api.atlassian.com/ex/jira/fa16f646-06c6-4125-b0a2-cf06a9aaec13/rest/api/3/user?accountId=712020:f1478e65-de5f-41aa-bee6-e57aecce1ad3\",\r\n  \"accountId\": \"712020:f1478e65-de5f-41aa-bee6-e57aecce1ad3\",\r\n  \"accountType\": \"atlassian\",\r\n  \"emailAddress\": \"legionqa1@gmail.com\",\r\n  \"avatarUrls\": {\r\n    \"48x48\": \"https://secure.gravatar.com/avatar/89f605b7f0369c31b96f8607fe8046f0?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FL-1.png\",\r\n    \"24x24\": \"https://secure.gravatar.com/avatar/89f605b7f0369c31b96f8607fe8046f0?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FL-1.png\",\r\n    \"16x16\": \"https://secure.gravatar.com/avatar/89f605b7f0369c31b96f8607fe8046f0?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FL-1.png\",\r\n    \"32x32\": \"https://secure.gravatar.com/avatar/89f605b7f0369c31b96f8607fe8046f0?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FL-1.png\"\r\n  },\r\n  \"displayName\": \"legionqa1\",\r\n  \"active\": true,\r\n  \"locale\": \"en_US\"\r\n} {code}","author":"legionqa1"}]},{"summary":"We couldn't save your changes when trying to apply changes to Workflow","key":"JRACLOUD-83593","url":"https://jira.atlassian.com/browse/JRACLOUD-83593","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen you try to save changes to a Workflow, it shows the message:\r\n\"We couldn't save your changes\"\r\n\r\nh3. Steps to Reproduce\r\n # The workflow has an unavailable rule on the Create Issue transition\r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\n # Apply changes to the Workflow\r\n # Try to save the changes\r\n\r\nh3. Expected Results\r\nThe changes are saved properly.\r\n\r\nh3. Actual Results\r\nThe screen shows an error message.\r\n !image-2024-04-19-08-48-05-299.png|thumbnail! \r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. If you face this issue, please contact Atlassian support.","createDate":"2024-04-19T11:48:38.000+0000","comments":[{"text":"This issue occurs for my team when adding certain, custom, statuses to a Jira workflow using the new editor.  Adding the same statuses using the old editor works ok and provides a workaround.","author":"Richard Hayes"},{"text":"For me, editing the old workflow is also not an option because Jira throws an error when trying to duplicate the old workflow and editing the old workflow is not possible without duplicating it in the old editor.\r\n\r\nLooking forward to seeing this issue fixed soon!","author":"schettino"}]},{"summary":"When linking Confluence Home pages to Jira issues, the preview doesn't load","key":"JRACLOUD-83577","url":"https://jira.atlassian.com/browse/JRACLOUD-83577","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (no)\r\nh3. Steps to Reproduce\r\n # Create a Confluence space\r\n # Create a test page\r\n # Create a Jira project with one issue\r\n # Go to the Jira issue and click on the dropdown next to the Link issue button, select Link Confluence page\r\n # Provide the link to the Confluence home page\r\n # Next, create a new link to the Confluence page\r\n # Click on both links, one at a time, and compare the preview of the links\r\n\r\nh3. Expected Results\r\n\r\nBoth previews will work.\r\nh3. Actual Results\r\n\r\nOnly the preview to the Confluence page will work. The preview of the homepage will appear as follows. \r\n!sample.png|thumbnail!\r\n\r\nThe link located in the upper left corner of the pop-up will still work.\r\n\r\nAn error will appear on the Browser console\r\n{code:java}\r\nContent ID is undefined\r\n{code}\r\nh3. Further Context\r\n\r\nHomepages are in the format {{{}https://<SITE>.atlassian.net/wiki/spaces/<SPACE_KEY>/overview{}}}.\r\nh3. Workaround\r\n\r\nWhen clicking directly on the link, the overview doesn't work; however, if you hover the mouse over the link and click on Open Preview, the Space overview will be displayed","createDate":"2024-04-17T18:55:27.000+0000","comments":[{"text":"Hello everyone,\r\n\r\nThis is Ben from the Confluence team. We would like to thank you for the report on the current need to be able to link Confluence home pages (sometimes also referred to as \"Space Overview\" pages) in Jira issues and have them load correctly. The current functionality is expected as this is a known issue with Embedded Confluence links; The team will be looking to address in the future.\r\n\r\nThanks,\r\n\r\nBen","author":"Ben Lakey"}]},{"summary":"jira:issue_created webhook doesn't contain \"parent\" field information when a sub-task is created in a team-managed project.","key":"JRACLOUD-83486","url":"https://jira.atlassian.com/browse/JRACLOUD-83486","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\njira:issue_created webhook doesn't contain \"parent\" field information when a sub-task is created in a team-managed project.\r\n\r\nh3. Steps to Reproduce\r\n# configure a webhook to send jira:issue_created event\r\n# create a sub-task in a team-managed project and check the webhook payload\r\n# create another sub-task in a company-managed project and check the webhook payload\r\n\r\nh3. Expected Results\r\nboth payload should have \"parent\" field\r\n\r\nh3. Actual Results\r\nonly the webhook related to company-managed project contains \"parent\" field. Here's a sample. \r\n\r\n{code}\r\n{\r\n\t...\r\n\tparent: {\r\n\tid: $id,\r\n\tkey: $issue_key,\r\n\tself: $issue_link,\r\n\tfields: {}\r\n\t...\r\n}\r\n}\r\n{code}\r\n\r\nh3. Workaround\r\nh4. Workaround 1\r\nThe issue_created event fires before the sub-tasks parent field is set and as a result, the webhook doesn't contain it. A subsequent issue_update happens immediately after that sets the parent field. Thus, subscribing to issue_updated webhook in this scenario will send the parent field in the issue_update webhook body.\r\n\r\nh4. Workaround 2\r\nAs a workaround, we can make /rest/api/2/issue/${issue_key} call based on the webhook response to get the parent data.","createDate":"2024-04-08T03:47:22.000+0000","comments":[]},{"summary":"Parent field inconsistency in create screen and transition screen","key":"JRACLOUD-83433","url":"https://jira.atlassian.com/browse/JRACLOUD-83433","type":"Bug","priority":"","description":"h3. Problem\r\nWe are seeing some inconsistency in the way the parent issues are shown.\r\nIn create/edit screen, the parent field shows the issue number and then the summary, while in a transition screen, it shows the summary and then the issue number.\r\nThis is creating issues when customer is creating automation scripts.\r\n\r\nh3. Environment\r\nJira Software\r\n.\r\n\r\nh3. Steps to Reproduce\r\n* Create an issue in the project. try to add a parent through the parent field\r\n* The parent field shows the issue number and then the summary\r\n* Next create a transition and add a screen in a workflow from one status to another.\r\n* Publish the workflow.\r\n* Try to move an issue for this transition on the board.\r\n* On the screen, try filling up the parent field.\r\n* it shows the summary and then the issue number.\r\n\r\n\r\n\r\nh3. Expected Results\r\nIn both screens it should be the same order -> the issue number and then the summary\r\nh3. Actual Results\r\nThe order is different in different screens\r\n\r\nh3. Workaround\r\n_(Add a workaround, if available)_\r\n\r\nh3. Notes\r\n","createDate":"2024-04-01T13:04:28.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 1, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Issue history shows events performed by incorrect actors due to race condition","key":"JRACLOUD-83430","url":"https://jira.atlassian.com/browse/JRACLOUD-83430","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an issue is transitioned to Closed from the portal and a comment is added, this triggers an automation that re-opens the issue when commented. Now it leads to a race condition where Jira is closing an issue while automation is re-opening it and it messes up the Issue History despite the right events being performed by Jira\r\nh3. Steps to Reproduce\r\n # Add a customer transition to Resolved status as shown in [Show a workflow transition in the portal|https://support.atlassian.com/jira-service-management-cloud/docs/show-a-workflow-transition-in-the-portal/]\r\n # Create an automation that would re-open a ticket(move to IN Progress) when a comment is added in Resolved status.\r\n # Now on the portal, transition the issue quickly add a comment, and observe the changes\r\n # Changes made by the automation appear as made by the reporter who resolved the ticket which is incorrect\r\n\r\nNOTE: This isn't always reproducible\r\nh3. Expected Results\r\n\r\nThe initiator must be clearly updated in the issue history\r\nh3. Actual Results\r\n\r\nThe initiator on these events appears messed up in the Issue History\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-01T12:20:19.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 1, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Parent field displays results out of the screen in the Issue Create screen","key":"JRACLOUD-83428","url":"https://jira.atlassian.com/browse/JRACLOUD-83428","type":"Bug","priority":"","description":"h3. Issue Summary\r\nParent field displays results out of the screen in the Issue Create screen the first time it is open\r\n\r\nh3. Steps to Reproduce\r\n# In an issue create screen, set the Parent field as the last or near the last fields on the list.\r\n# Press the Create issue button, and on the Issue creation dialog, scroll down until you see the Parent field, and click on it. \r\n\r\nh3. Expected Results\r\nThe list of possible parents is displayed, and if the list hits the lower edge of the screen, it will show upward instead so it can be used normally.\r\n\r\nh3. Actual Results\r\nThe first time we click on it, it displays out of the screen:\r\nVideo demonstration [^Parent out of screen.mp4] \r\n\r\nNote: if the Parent field is not the last field on the screen field list, it always expands downward, which results in some options being partially out of the screen. \r\n\r\nh3. Workaround\r\n* We can click over it again to collapse it, and then click once more so it will appear upwards, as expected, requiring 3 clicks instead of 1 to get the expected result\r\n* Placing the Parent higher on the screen location can help.","createDate":"2024-03-29T19:11:49.000+0000","comments":[]},{"summary":"Visual issue with starred projects","key":"JRACLOUD-83424","url":"https://jira.atlassian.com/browse/JRACLOUD-83424","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you choose some projects to be starred (on the view all projects page), sometimes another project is automatically starred.\r\n\r\nIt seems this is a {*}visual bug{*}. The project that received the star automatically lost it when I refreshed the page.\r\nh3. Steps to Reproduce\r\n # Select > Project > View all projects.\r\n # Choose the projects to be starred.\r\n\r\nh3. Expected Results\r\n\r\nThe expected result is that only the projects you marked as starred will have this value.\r\nh3. Actual Results\r\n\r\nAnother project receives this value. I recorded the following video to show you this behavior:\r\n * [^Starred Projects.mov]\r\n\r\nh3. Workaround\r\n\r\nAs a workaround, you can refresh the page.","createDate":"2024-03-29T13:52:26.000+0000","comments":[{"text":"Thanks, refreshing the page does seem to work.","author":"Robert Haynes"}]},{"summary":"Copy and pasting table data from server to cloud for large tables with many columns is illegible","key":"JRACLOUD-83397","url":"https://jira.atlassian.com/browse/JRACLOUD-83397","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCopy and pasting table data from server to cloud for large tables with many columns is illegible.\r\nh3. Steps to Reproduce\r\n # Copy a large table from Jira server that has many columns\r\n # Paste it into the Jira comment editor\r\n # Notice the width of the columns are only 1 character in width and the content is unreadable\r\n\r\nh3. Expected Results\r\n\r\nA horizontal scroll-bar should appear for any tables that doesn't fit in the visible area of the comment (viewing or editing).\r\nh3. Actual Results\r\n - No horizontal scroll bar appears\r\n - the text in the tables is illegible when viewing (text seems to flow vertically)\r\n - the text in the tables is illegible when editing (sometimes no text is visible - only the table grid)\r\n\r\nh3. Workaround\r\n\r\nBy adding an additional column to the table it automatically corrects the width of the columns","createDate":"2024-03-27T06:19:29.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 2, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Mail Handler Malfunction if the Mail Server used is added as a user in the instance","key":"JRACLOUD-83363","url":"https://jira.atlassian.com/browse/JRACLOUD-83363","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf an *Incoming Mail Handler* is setup with a *Mail Server* that uses an +email added as a user in the instance+, the Mail Handler malfunctions, and the following behaviors were observed:\r\n* The Default Reporter used in the setup is not respected. The sender is added as Reporter instead. \r\nIf the user from the Mail Server is used as *Default Reporter*, the following additional malfunctions are observed:\r\n* CC Assignee option doesn't assign the created issue to the user whose email was on the CC field of the email sent to Jira.\r\n\r\nh3. Steps to Reproduce\r\n # Go to System > Incoming Mail > Create a Mail Server (address@example.com)\r\n # Add the email used in the Mail Server (address@example.com) as a licensed user in Jira.\r\n# Create an Incoming Mail Handler using the Mail Server (address@example.com) and add the user (address@example.com) as Default Reporter. Select the option *CC Assignee: true* \r\n# Send an email to the Mail Server address (address@example.com) and add your own address in CC field.\r\n\r\nh3. Expected Results\r\nAn issue is created in the target project with you as assignee and the user from address@example.com as Reporter.\r\n\r\nh3. Actual Results\r\nAn issue is created and address@example.com is set as assignee and the sender is the Reporter instead of the Default Reporter set in the Mail Handler. \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-03-22T17:12:31.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 2, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Attaching files during issue creation intermittently gets stuck when leaving the Issue creation page open for some time","key":"JRACLOUD-83310","url":"https://jira.atlassian.com/browse/JRACLOUD-83310","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIssue creation gets stuck when leaving the Issue creation page open for some time. Usually, when opening the issue creation dialog, it is possible to leave the window open and add the information required, as well as attachments over time, but when some time passes by, it becomes more and more likely that adding an attachment will malfunction, the \"Create\" button will become disabled and the issue creation will have to be restarted, losing all the values added into the issue.\r\n\r\nh3. Steps to Reproduce\r\n# Open the issue creation dialog. \r\n# Add some information into its fields, and leave the dialog open for more than 15-17 minutes.\r\n# Drag and drop an attachment to the issue creation dialog\r\n\r\nh3. Expected Results\r\nThe attachment is added and the issue creation can continue as expected.\r\n\r\nh3. Actual Results\r\nThe attachment appears in the dialog, but it is not shown to have an upload progress bar and the Create button gets disabled with a loading animation as if the attachment was being uploaded, but it never finishes:\r\n !Attachment stuck loading.png|thumbnail! \r\n\r\nNote: the more time passes, the more this is likely to occur.\r\n\r\nh3. Workaround\r\nCreate the issue first with the minimum of information necessary, and add the attachments and other information over time in the issue created.","createDate":"2024-03-15T15:19:01.000+0000","comments":[]},{"summary":"Filter search endpoint fails for complex JQL searches with expand.","key":"JRACLOUD-83252","url":"https://jira.atlassian.com/browse/JRACLOUD-83252","type":"Bug","priority":"","description":"h3. Issue Summary\r\nFilter search endpoint fails for complex JQL searches with expand.\r\nThis degrades performance of add-ons which rely on these types of searches.\r\n\r\nThis is reproducible on Data Center: no\r\n\r\nh3. Steps to Reproduce\r\n # Step 1\r\nMake a get request to “rest/api/2/filter/search?expand=owner%2Cjql%2CsharePermissions&orderBy=id&startAt=0&maxResults=100&id=69005&id=75528&id=69069&id=72556&id=69008&id=70152&id=71187&id=74796&id=75643&id=70151&id=74795&id=74794&id=74793&id=74792&id=74790&id=77530&id=77257&id=76400&id=76207&id=76208&id=69189&id=70768&id=69457&id=69335&id=69334&id=75834&id=70166&id=75833&id=74224&id=75599&id=72560&id=75034&id=75694&id=76392&id=76431&id=69071&id=69070&id=69191&id=69190&id=69074&id=69073&id=69072&id=72618&id=72619“\r\n\r\nh3. Expected Results\r\nThe request should return data as usual\r\n\r\nh3. Actual Results\r\nThe request fails with 504 error\r\n\r\nThe below exception is thrown\r\n{noformat}\r\n   request_method: GET\r\n   request_size: 2973\r\n   request_time: 60.000\r\n   response_duration: 60.000\r\n   src_ip: xx.xxx.xxx.xxx\r\n   status: 504\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\n* Remove JQL expand\r\n* Make more calls with less number of filters per call","createDate":"2023-02-22T17:16:57.000+0000","comments":[]},{"summary":"Migrating project breaks the context of story point","key":"JRACLOUD-83243","url":"https://jira.atlassian.com/browse/JRACLOUD-83243","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe've encountered an issue after executing a migration using Jira Cloud Migration Assistant (JCMA). The context for the \"Story Point\" issue type is incorrect, resulting in bugs that affect the display of story points in the backlog.\r\nh3. Steps to Reproduce\r\n\r\nHere are the steps that we followed which led to the issue:\r\n # Navigate to your Jira site and select \"Settings\" followed by \"Issues\".\r\n # Under \"Custom field\", search for \"Story Point\".\r\n # Click on the three-dot icon (…) and select \"Context and default Value\".\r\n # Capture a screenshot of the current settings for reference.\r\n # Navigate to the other site to execute the migration.\r\n # In Jira, go to \"Settings\" and select \"Migrate Cloud Site\".\r\n # Click on \"Go dashboard\" and choose \"Create a new migration\".\r\n # Follow the provided steps and migrate one \"company management project\".\r\n # Once the migration is complete, return to the first site.\r\n # Repeat steps 1 to 3.\r\n\r\nAfter this process, we found that a new context was created, but it doesn't include any issue types.\r\nh3. Expected Results\r\n\r\nThe context should *always* have issue types \r\n!Screenshot_2024-03-05_at_17_13_03.png|width=501,height=170!\r\nh3. Actual Results\r\n\r\nContext created without issue type \r\n!Screenshot_2024-03-05_at_17_12_15.png|width=501,height=170!\r\nh3. Workaround\r\n\r\nAfter performing a cloud-to-cloud import, please check the context of story points and perform any necessary adjustments removing the problematic context ","createDate":"2024-03-05T16:17:40.000+0000","comments":[]},{"summary":"Sprint order mismatch in burn-down charts after migration","key":"JRACLOUD-82984","url":"https://jira.atlassian.com/browse/JRACLOUD-82984","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (yes)\r\n * The sprint sorting is done in backend by compounding {{sequenceid}} and {{id}} of the sprint with *priority* to {{sequenceid}}\r\n * In new cloud, {{sequenceid}} column is null by default and is generated when an ordering is done in the board\r\n * When fetching the sprints, backend does this :  *{{{}sequenceid{}}}={{{}sequenceid==null?sprintid{}}}*\r\n\r\n * This orders the list in unfriendly ways because the {{id}} of sprints in the cloud for this customer has started to *overlap* with {{sequenceid}} of older sprints in the server. \r\n\r\nh3. Steps to Reproduce\r\n * Create project and board\r\n * Add sprints to the board and complete them\r\n * Verify sprint order in burndown chart on Jira Server\r\n * Run S2C migration\r\n * Verify sprint order in burndown chart on Jira cloud\r\n\r\nh3. Expected Results\r\n\r\nBurn-down chart displays sprints in the same order as the server after S2C migration. \r\nh3. Actual Results\r\n\r\nSprint order is burndown chart is not same as that in the server which leads to newer sprints going down in the dropdown. Since customer can't find their sprints at the top of the dropdown, they feel that the sprint is not migrated whereas it can be found somewhere at the end of the list. \r\n\r\nh3. Additional Context\r\nUsers may also identify this when creating new sprints after the migration. Sprint name suggestions don't increment as expected after the migration of Jira project that has an active sprint.\r\n\r\nh3. Workaround\r\n\r\nCurrently, the workaround for this issue is to modify the *AO_60DB71_SPRINT* table to restore the Sprint ordering. \r\n\r\nDetails steps are provided in the page below - \r\n\r\n[https://hello.atlassian.net/wiki/spaces/IDE/pages/1250018722/JST-663802+-+Database+Patch+Runbook]","createDate":"2023-02-08T06:55:27.000+0000","comments":[{"text":"Discussed with [~697208d3bd83] to understand that the desired ordering result is something like - \r\n1. Existing Sprints in Cloud.\r\n2. Migrated Ordered Sprints in order of their sequence id.\r\n3. Migrated UnOrdered Sprints in order of their ids. (Since sequence id is null in this case)\r\n\r\nLooked into the doc - [https://hello.atlassian.net/wiki/spaces/MigPT/pages/2037342171/Sequence+Id+mismatch+issue]\r\nThe solutions mentioned don't seem to make sure the above mentioned desired sprint ordering after migration.\r\nIn order to achieve the desired ordering as mentioned above, we would need id/sequence id for already existing cloud entities as well in which case it is not a JCMA migration change alone.\r\n\r\nMore discussions pending about the correct solution with - Akhil Karun (akarun@atlassian.com)","author":"Umang Saxena"},{"text":"This issue has been fixed. Users should not be facing sprint ordering issue in sprint reports as a result of project by project S2C migration.\r\n\r\nThanks!","author":"Mudit Choraria"}]},{"summary":"The /rest/api/2/workflow/search API no longer accepts workflow names with commas","key":"JRACLOUD-82849","url":"https://jira.atlassian.com/browse/JRACLOUD-82849","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nThe \"{*}/rest/api/2/workflow/search{*}\" API no longer accepts workflow names with commas\r\nh3. Environment\r\n\r\nJira Cloud\r\nh3. Steps to Reproduce\r\n * Create a Workflow in Jira and include commas in its name like \"{*}Test, commas, spaces and others workflow{*}\"\r\n * Query the workflow using the \"{*}/rest/api/2/workflow/search{*}\" API\r\n*\r\n{code:java}\r\ncurl --request GET \\\r\n  --url 'https://fakeinstance.atlassian.net/rest/api/2/workflow/search?expand=transitions,statuses,statuses.properties&workflowName=Test,%20commas,%20spaces%20and%20others%20workflow' \\\r\n  --user 'fakeemail@domain.com:xxxxxxxxxx' \\\r\n  --header 'Accept: application/json' \\\r\n  --header 'Content-Type: application/json' | jq .\r\n\r\n{code}\r\n\r\n * The result is the same even if you URL-encode the commas:\r\n{code:java}\r\ncurl --request GET \\\r\n  --url 'https://fakeinstance.atlassian.net/rest/api/2/workflow/search?expand=transitions,statuses,statuses.properties&workflowName=Test%2C%20commas%2C%20spaces%20and%20others%20workflow' \\\r\n  --user 'fakeemail@domain.com:xxxxxxxxxxx' \\\r\n  --header 'Accept: application/json' \\\r\n  --header 'Content-Type: application/json' | jq .\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nA workflow with its statuses and transitions like:\r\n{code:java}\r\n{\r\n  \"self\": \"https://fakeinstance.atlassian.net/rest/api/2/workflow/search?expand=transitions,statuses,statuses.properties&maxResults=50&startAt=0\",\r\n  \"maxResults\": 50,\r\n  \"startAt\": 0,\r\n  \"total\": 1,\r\n  \"isLast\": true,\r\n  \"values\": [\r\n    {\r\n      \"id\": {\r\n        \"name\": \"Test, commas, spaces and others workflow\",\r\n        \"entityId\": \"871f8ca11-f5f9-8584-bf0a-7f229708c0ae\"\r\n      },\r\n      \"description\": \"The workflow to test commas\",\r\n      \"transitions\": [\r\n        {\r\n          \"id\": \"1\",\r\n          \"name\": \"Create Issue\",\r\n          \"description\": \"\",\r\n          \"from\": [],\r\n          \"to\": \"1\",\r\n          \"type\": \"initial\"\r\n        },\r\n        {\r\n          \"id\": \"2\",\r\n          \"name\": \"Close Issue\",\r\n          \"description\": \"\",\r\n          \"from\": [\r\n            \"1\",\r\n            \"3\",\r\n            \"4\"\r\n          ],\r\n          \"to\": \"6\",\r\n          \"type\": \"directed\",\r\n          \"screen\": {\r\n            \"id\": \"3\",\r\n            \"name\": \"Resolve Issue Screen\"\r\n          }\r\n        }\r\n...\r\n...\r\n\r\n{code}\r\nh3. Actual Results\r\n\r\nEmpty results:\r\n{code:java}\r\n{\r\n  \"self\": \"https://fakeinstance.atlassian.net/rest/api/2/workflow/search?expand=transitions,statuses,statuses.properties&maxResults=50&startAt=0\",\r\n  \"maxResults\": 50,\r\n  \"startAt\": 0,\r\n  \"total\": 0,\r\n  \"isLast\": true,\r\n  \"values\": []\r\n}\r\n{code}\r\nh3. Workaround\r\n\r\nUse *queryString* instead of *workflowName* as query parameter, then for workflow with *coma character* in the name string request return properly data.\r\nh3. Notes","createDate":"2024-01-25T21:38:57.000+0000","comments":[{"text":"We have Identified the root cause for this issue, we are going to be rolling out a fix over the next few weeks.\r\n\r\nGiven the number of watchers and support tickets we're receiving, I'm going to reduce the priority of the bug to medium.","author":"aradu"}]},{"summary":"Users without Jira Administrator access are landing on invalid error message","key":"JRACLOUD-82804","url":"https://jira.atlassian.com/browse/JRACLOUD-82804","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers without Jira Administrator access are landing on an invalid error message\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Revoke Jira Administration access to site admins, and ensure granting product access.\r\n # Access https://<site-url>/jira/settings/system/general-configuration\r\n\r\nh3. Expected Results\r\n\r\nLack of administrator permission error is returned\r\n\r\nh3. Actual Results\r\n\r\nAfter a while, a new error appears in the same tab.\r\n{quote}You're almost there\r\nIt looks like our database is taking a little longer than usual to sync up. Wait a few moments then try again.\r\nIf you continue to see this error, raise a support request\r\n{quote}\r\n\r\n !Screenshot 2024-01-19 at 7.37.54 PM.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nGrant Jira Administration product access.","createDate":"2024-01-19T14:10:15.000+0000","comments":[]},{"summary":"Custom fields on bulk edit tends to behave inconsistently with edit options","key":"JRACLOUD-82745","url":"https://jira.atlassian.com/browse/JRACLOUD-82745","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDuring bulk editing of the custom labels, the options to perform the action on the custom labels tend to disappear intermittently. When proceeding further, it automatically uses the action *'Add to existing'* on the next step which is not the expected behaviour.\r\n\r\nThis behaviour is observed for Labels, Multi select fields and Version fields\r\n\r\nh3. Steps to Reproduce\r\n # Run a sample JQL query on the global issue navigator\r\n # Select the (...) and Bulk change issues.\r\n # Check the issues list > Next > choose operation > Edit issues(radio button) > Next.\r\n # Check the custom label field to find the actions that need to be performed while updating/deleting the defined value.\r\n\r\nh3. Expected Results\r\n\r\nThe actions to be performed on the custom labels tend to appear\r\n!image-2024-01-15-19-41-33-561.png|width=242,height=121!\r\nh3. Actual Results\r\n\r\nThe actions to be performed don't appear\r\n!image-2024-01-15-19-41-41-126.png|width=246,height=123!\r\nh3. Workaround\r\n - When the custom label actions don't appear as expected, you may have to refresh the page once or twice(F5 on Windows/ cmd+R on Mac).","createDate":"2024-01-15T14:15:11.000+0000","comments":[]},{"summary":"Update field configuration API endpoint limits description to 1000 characters but the UI doesn't ","key":"JRACLOUD-82640","url":"https://jira.atlassian.com/browse/JRACLOUD-82640","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n[PUT /rest/api/3/fieldconfiguration/$id/fields|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-field-configurations/#api-rest-api-3-fieldconfiguration-id-fields-put] update rest API endpoint limits description to 1000 characters.\r\nHowever, it's possible to update description of a customfield to more than 1000 characters using GUI [/secure/admin/EditFieldLayoutItem!default.jspa].\r\nIf a description is more than 1000 characters (set by using the UI), [GET /rest/api/3/fieldconfiguration/$id/fields|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-field-configurations/#api-rest-api-3-fieldconfiguration-id-fields-get] will still return the full description in the response.\r\n\r\nThis creates a discrepancy in the expected bahaviour between UI and the APIs (even with different HTTP methods in the same API endpoint)\r\nh3. Steps to Reproduce\r\n # Attempt to update description using the API.\r\n{code:java}\r\ncurl --location --request PUT 'https://site-name.atlassian.net/rest/api/3/fieldconfiguration/${id}/fields' \\\r\n--header 'Accept: application/json' \\\r\n--header 'Content-Type: application/json' \\\r\n--data '{\r\n    \"fieldConfigurationItems\": [\r\n        {\r\n            \"id\": \"customfield_12345\",\r\n            \"description\": \"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt\",\r\n            \"isHidden\": false,\r\n            \"isRequired\": false\r\n        }\r\n    ]\r\n}'\r\n{code}\r\nWe'll see an error message like this.\r\n{code:java}\r\n{\r\n    \"errorMessages\": [\r\n        \"The length of the description for the item with ID customfield_10102 must not exceed 1,000 characters.\"\r\n    ],\r\n    \"errors\": {}\r\n}\r\n{code}\r\n\r\n # Attempt to udpate the description using UI [which updates using /secure/admin/EditFieldLayoutItem!default.jspa] with the same description above [1100 characters]\r\n # the update will be successful\r\n # Get the field fieldconfiguration using REST API (this will also be successful and will return the full description 1100 characters)\r\n{code:java}\r\ncurl --location 'https://site-name.atlassian.net/rest/api/3/fieldconfiguration/$id/fields' \\\r\n--header 'Accept: application/json' \\\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe update PUT API endpoint should behave similarly to the UI and GET endpoint - no character limits.\r\nOr, the UI and GET method should have character limits of 1000 characters to align with the update endpoint.\r\nh3. Actual Results\r\n\r\nupdate PUT endpoint is limiting description to 1000 characters; whereas, UI and GET endpoint is not enforcing any limits.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-12-27T02:36:43.000+0000","comments":[]},{"summary":"Define Order of Precedence for Mail Handlers in Jira","key":"JRACLOUD-82621","url":"https://jira.atlassian.com/browse/JRACLOUD-82621","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira's mail handler rules that a mail handler without any catch email takes precedence over another one that has a catch email address. This behavior leads to emails being processed by the wrong handlers, causing confusion and additional workload as they have to manually move these wrongly classified emails.\r\nh3. Steps to Reproduce\r\n # Set up two mail handlers in Jira - one with a specific Catch Email Address and another without any specified recipient.\r\n # Send test emails directly or CC'd to the specific Catch Email Address.\r\n\r\nh3. Expected Results\r\n\r\nThe 'handler with catch mail address' should process all incoming mails sent directly or CC'd to its specified Catch Email Address while other mails not directed at this address should be handled by the 'Catch-all' handler.\r\nh3. Actual Results\r\n\r\nAll incoming emails are being caught by the 'handler with no catch mail address' regardless of whether they were sent directly or CC'd to the catch mail, which was set as the Catch Email.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. \r\n\r\nThe customer also suggests that these rules should be clearly documented in the Jira documentation for better understanding and implementation by users.","createDate":"2023-12-21T18:06:40.000+0000","comments":[]},{"summary":"Incorrect results using JQL \"<=\" or \">=\" on Target End and Target Start fields","key":"JRACLOUD-82596","url":"https://jira.atlassian.com/browse/JRACLOUD-82596","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using JQL searches to compare the \"Target Start\" and \"Target End\" date fields ( from Advanced Roadmaps ), it does return the correct result if using the \"<=\" comparison, and the user time zone is not in UTC.\r\n\r\nFor example,\r\n\r\nSearch for \"Target End\" <= \"2023-12-21\" will only return issues matching \"2023-12-20\" or before.\r\nh3. Steps to Reproduce\r\nh4. For >= operator\r\n # Set the Target start field to 02/02/2024 in an issue\r\n # Set your account time so to America/Los Angeles\r\n # Search for issues with query *\"Target start\" >= '2024-01-02'*\r\n\r\nh4. For <= operator\r\n # Set the Target start field to 02/02/2024 in an issue\r\n # Set your account time so to Europe/Berlin\r\n # Search for issues with query *\"Target start\" <= '2024-01-02'*\r\n\r\nh3. Expected Results\r\n\r\nIssues are returned including the end date mentioned in the search.\r\nh3. Actual Results\r\n\r\nIssues returned exclude the end date mentioned in the search and only include issues from the day -1 \r\nh3. Workaround 1\r\nh4. For >= operator\r\n\r\nSearch with one day in the past of the actual wanted date. For our example this would be *\"Target start\" >= '2024-01-01'*\r\nh4. For <= operator\r\n\r\nSearch with one day in the future of the actual wanted date. For our example this would be *\"Target start\" <= '2024-01-03'*\r\n**\r\nh3. Workaround 2\r\n\r\nFilter out the date and specify the hh:mm . Example :{*}\"Target start\" <= '2024-01-03 23:59'{*}\r\n\r\nThis works for both <= and >= operator.\r\n\r\n ","createDate":"2023-12-19T02:24:58.000+0000","comments":[{"text":"FYI - although the description mentions the >= or <= operators, I was able to reproduce the error when using only the = operator as well for the Target Start and Target End fields. ","author":"Alan"},{"text":"Any updates on this?.. super important...","author":"Inbar Shtibel Levi"}]},{"summary":"Missing attachment icon in transition screen text fields for non English-language users","key":"JRACLOUD-82587","url":"https://jira.atlassian.com/browse/JRACLOUD-82587","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the comments field of a transition screen, the attachment icon disappears when the users language is changed to anything other than English\r\nh3. Steps to Reproduce\r\n # Create a new ticket\r\n # Transition the issue from one status to another where in the screen attachment button is present\r\n # On [https://id.atlassian.com/manage-profile/account-preferences] change the language to anything other than English e.g. Nederlands\r\n # Now, change the status, the attachment button in the Comments field disappears \r\n\r\nh3. Expected Results\r\n\r\nThe attachment icon should be present on the comments field regardless of language. Here's how it looks for users with English language settings:\r\n!screenshot-3.png|thumbnail!\r\nh3. Actual Results\r\n\r\nThe attachment icon is not present if the user's language is not English:\r\n!screenshot-4.png|thumbnail!\r\nh3. Workaround\r\n\r\nAdd the Attachment field to the transition screen and use it to upload attachments and perhaps if in the description/comment field the  \"Attachment field\" is to be referred to, users can use [this syntax|https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all]\r\n\r\nOnce the Attachment field has been added to the transition screen, you can paste images into the comments field.","createDate":"2023-12-18T14:36:01.000+0000","comments":[]},{"summary":"Broken External resources Icon ","key":"JRACLOUD-82504","url":"https://jira.atlassian.com/browse/JRACLOUD-82504","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nExternal Resouces Icons are broken in the customer portal view but loads fine in the Jira UI \r\n\r\n({*}[https://YOUR-SITE.atlassian.net/jira/servicedesk/projects/|https://your-site.atlassian.net/jira/servicedesk/projects/]<project-name>/settings/external-links{*})\r\n\r\nThis is reproducible on Jira Cloud : yes\r\nh3. Steps to Reproduce\r\n # Go to Project settings -> External Resources.\r\n # Click _*Add link*_\r\n # Select _*Self Help resource*_ as the type\r\n # Fill the URL section and the logo will be automatically fetched by Jira.\r\n4.1 For instance, if we issue [https://gmail.com|https://gmail.com/] it will automatically fetch the GMAIL LOGO\r\n\r\n!externalresources.png!\r\n # However, for few of the links will not render properly on the customer portal\r\n\r\n!portalview2.png!\r\n\r\nh3. Expected Results\r\n\r\nExternal Resources Icon should be visible on both the customer portal and UI.\r\nh3. Actual Results\r\n\r\nExternal Resources Icons are broken as shown in the attachments.\r\n\r\n!portalview2.png!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-12-05T14:43:32.000+0000","comments":[{"text":"[~24a07a2a638b] not sure if Linking Platform owns this component in question. Linking Platform deals with the pasting of links in editor surfaces like Confluence, Jira, etc. and those links resolving into different views like inline or block cards. ","author":"Hana Ganesh"},{"text":"@Hanay,\r\n\r\nDo you know what the requirements for the linkikng platform are to make this work? \r\nWe encounter this problem and any tips to solve this on our end are welcome. \r\n\r\n ","author":"Tessa Tuteleers"},{"text":"[~81d14819b03c] The external link resource sections on both customer portal view and Jira UI make request to Linking Platform backend service to obtain the link data. However, the frontend component is not Linking Platform's.\r\n\r\nFrom testing around, it seems that url that weren't rendered the icon was not supported by our service and thus unable to return linked data. The icon displayed ( !image-2023-12-18-11-57-20-479.png! ) is likely a fallback icon that was implemented on JSM side. E.g. {{https://www.google.com/}} is a supported link, but {{https://gmail.com/}} isn't.\r\n\r\nI wasn't able to reproduce an instance where the url is supported but show up differently between customer portal view and Jira UI. Could you provide us with example url please?","author":"Waanya Yoosthaporn"},{"text":"Hey [~5cb684c985ab] if I try to paste a Atlassian email in the link section of external resource. I see a Atlassian logo on Jira side but a fallback logo on JSM side . I think this is not correct right ?","author":"Pulkit Gupta"},{"text":"We have a knowledge base on SharePoint that we link to but it can't retrieve the image, so it appears as a broken image.\r\n\r\nAny way this could be set so we could choose to use a built in Jira icon?\r\n\r\n!image-2025-04-02-17-01-15-698.png!","author":"Tom Atkinson"}]},{"summary":"Issue with Issue Type Layout Update After Adding Label Custom Field Exceeding Character Limit in Team-Managed Project","key":"JRACLOUD-82455","url":"https://jira.atlassian.com/browse/JRACLOUD-82455","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA problem arises when a label custom field is added in a Team-Managed project with several Default labels that, when combined, exceed the 255-character limit (even if none of the labels exceed this value individually). The layout does not update correctly after this action. \r\nh3. Steps to Reproduce\r\n\r\n1. Create a Team-Managed project.\r\n2. Go to Project Settings > Issue Types. Add a label custom field to the project.\r\n3. In this label custom field, add several default labels such that their combined character count exceeds 255 characters. Save your Issue Layout.\r\n4. Attempt to update any other field in the Issue Layout.\r\nh3. Expected Results\r\n\r\nThe Issue Layout should update correctly even if the combined character count of the labels exceeds 255 characters.\r\nh3. Actual Results\r\n\r\nThe Issue Layout does not update correctly. An error message is displayed: \"We couldn't update the 'Task' issue type. Refresh and try again.\"\r\nh3. Workaround\r\n\r\nRemove some (or all) of these default labels in the label custom field so that the total character count does not exceed 255 characters. This should allow the Issue Layout to update without any significant problems.","createDate":"2023-11-29T13:12:13.000+0000","comments":[]},{"summary":"Deleting a project role or group will cause comments with visibility restricted to that role / group to be inaccessible","key":"JRACLOUD-82409","url":"https://jira.atlassian.com/browse/JRACLOUD-82409","type":"Bug","priority":"","description":"h3. Issue Summary\r\nDeleting a project role will cause comments with visibility restricted to that role to be inaccessible\r\n\r\nh3. Steps to Reproduce\r\n# Create a project role at Jira settings > System > Project roles.\r\n# Go to any comment Add a comment to an issue, and set the visibility to the new role create din the previous step\r\n# Go to the Project roles again and delete the role created in step 1.\r\n\r\nh3. Expected Results\r\n* The user is prevented from deleting the role if it is used for comment visibility (among other things)\r\nOR\r\n* An option is offered to update the visibility restriction to either remove it or pass it to another role before allowing the deletion.\r\n\r\nh3. Actual Results\r\nThe deletion is made and all the comments with that project role set as a visibility restriction are lost from the issue view, without any way to identify, view or recover them through Jira features.\r\n\r\nh3. Workaround\r\nContacting Atlassian Support to fix the data inconsistency left (orphaned role ID in the visibility setting of the comments).","createDate":"2023-11-22T13:26:46.000+0000","comments":[{"text":"Severity is Major for us currently - currently comments are 'lost' which were heavily used. Additionally all project roles are not visible like they should be - we have 5 roles, only 2 are visible in the drop down ","author":"Tere Pile"}]},{"summary":"Inconsistent Results When Querying Users by Email in User Search REST API","key":"JRACLOUD-82374","url":"https://jira.atlassian.com/browse/JRACLOUD-82374","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen performing a request to the Find users REST API endpoint [User search Jira API|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-user-search#api-rest-api-3-user-search-get] by inserting the email address on the query parameter erroneously, the response of the endpoint still returns the result. \r\n\r\nThis is because of the following logic: when an email address is recognized as invalid a possible user error/mistake is taken into account and therefore the email address is tokenized and the different tokens are used to try to match full name or display name fields. So, the result is returned in case one of the name fields matches one of the tokens, but this is not clearly documented.\r\n\r\nh3. Steps to Reproduce\r\n*Test 1*\r\n# Perform a request to the endpoint using an email with '123' at the end:\r\n{code:java}\r\n/rest/api/3/user/search?startAt=0&maxResults=50&query=something@email.com123  {code}\r\n\r\n*Test 2*\r\n# Add user with invalid sub-domain\r\n## add test user - {{atlassiantestemailwithinvaliddo@gmail.com.del}} to your site\r\n## Search this user using API, user won't be returned:\r\n{code} /rest/api/3/user/search?query=atlassiantestemailwithinvaliddo@gmail.com.del {code}\r\n\r\n*Test 3*\r\n# Add test user - {{atlassiantestemailwithinvaliddo@gmail.com.xyz}} to your site\r\n# API search will work fine\r\n\r\n*Test 4*\r\n# Add test user with more than 31 character email address and invalid domain\r\n# API won't return this user. If user base is huge, API will return a larger list of users\r\n\r\n*Test 5*\r\n# Add a test user with special character in email address \"-\" and lengthy text\r\n# e.g atlassian_20221207_test_alpha.beta@test-domain.com.del\r\n# User search won't work\r\n\r\nh3. Expected Results\r\n# API should return empty result if there is no matching email\r\n# API should avoid tokenising the search string if the search pattern in having email syntax\r\n\r\n\r\nh3. Actual Results\r\nIf one of the name fields matches or include 'something' the search will still return the information.\r\nAlso, inconsistent results are received if input has invalid email address (sub-domain), even though email is added to the site.\r\n\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-11-16T17:57:23.000+0000","comments":[{"text":"It is unexpected when I give a (maybe imcomplete) email address and get a list of users returned where that email address string does not appear in their email attribute or name. My search string should somehow be related to the list or search results, otherwise we call this behaviour a bug.\r\n\r\nI found this when none of those search string exists in user data in our ORG user list, and the Admin GUI returns an empty result for all of them.\r\n * [https://domain.atlassian.net/rest/api/3/user/search?query=q@abcde|https://mercedes-benz.atlassian.net/rest/api/3/user/search?query=q@abcde] gives too many results (seems as there is only 1 char, but such an email might exist)\r\n\r\n * [https://domain.atlassian.net/rest/api/3/user/search?query=qqqqqqqq@abcde|https://mercedes-benz.atlassian.net/rest/api/3/user/search?query=qqqqqqqq@abcde] gives empty result (which is correct)\r\n\r\n * [https://domain.atlassian.net/rest/api/3/user/search?query=qqqqqqqq@ab-cde|https://mercedes-benz.atlassian.net/rest/api/3/user/search?query=qqqqqqqq@ab-cde] gives too many results (a minus char in the domain should not change the logic at all)\r\n\r\nObviously Atlassian is overloading that search here with complex functionality and giving not much documentation.","author":"Bruno Abele"},{"text":"In addition, the search for email fails sometimes when a \"-\" is part of the domain name, which means there is a real bug. \r\nNo only a few results too much, but the correct entry is missing in the results. The entry is found in the ORG Admin GUI, but not in API.\r\n\r\n\r\nSo please raise this up to a \"critical\" but, as it shows the API is broken.","author":"Bruno Abele"},{"text":"If multiple users are found for an maybe incomplete email address, please be aware that on that API, the callers cannot see the email address of the non-managed users in the results, so the caller is NOT able to decide which of the results are the correct ones. We need a more reliable search logic here. If I search for a@b as I want to delete that user, and you give me aa-a@b where I cannot see the email, I will delete the wrong one.\r\n\r\nAgain: Push that bug severity up to \"critical\", please.","author":"Bruno Abele"}]},{"summary":"When adding a member to an issue security level the \"Group custom field value\" shows all custom fields OR when granting a \"Group custom field value\" Project Permissions under any Permissions the option shows all custom fields","key":"JRACLOUD-82367","url":"https://jira.atlassian.com/browse/JRACLOUD-82367","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen adding a member to an issue security level the \"Group custom field value\" shows all custom fields OR when granting a \"Group custom field value\" Project Permissions under any Permissions the option shows all custom fields\r\nh3. Steps to Reproduce\r\n # Create an Issue Security Scheme\r\n # Assing the Security Scheme to a Project.\r\n # Create a security level.\r\n # Try to add a \"Group custom field value\" member\r\n\r\nFor Project Permissions\r\n # Go to the Permission Scheme\r\n # Select any permission scheme and choose any Project Permission under it.\r\n # Click on Grant Permission and select 'Group custom field value'. In the drop-down, you'll see all custom fields instead of the Group Picker (Single Group) (Multiple Group).\r\n\r\nh3. Expected Results\r\n\r\nTo see only A (multi-)user or (multi-)group picker custom field as per documentation: [Add members to a security level|https://support.atlassian.com/jira-cloud-administration/docs/configure-issue-security-schemes/#Add-members-to-a-security-level]\r\nh3. Actual Results\r\n\r\nAll custom fields are displayed in the drop-down list\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2023-11-16T08:28:14.000+0000","comments":[{"text":"Hi,\r\n\r\nAlthough the summary of this ticket mentions that the bug appears in a group custom field, I think it's more than just that.\r\n\r\nFrom our own experience, when editing a +workflow+ and adding a new +condition+ of type \"{*}User Is In Group Custom Field{*}\", the items shown in the field selection menu not only include just those single-group picker fields or just multi-group picker fields, but also those fields of all selection related types (single-choice selections, multi-choice selection, cascaded fields, checkboxes, radio buttons). Since our site has so many fields of various different selection types, there are totally several hundreds of fields show up in such menu where in fact we just want to pick one from only a handful of group picker fields.\r\n\r\nThe situation is worsen by the fact that such menu also does not sort its item at all. Imagine we have to pick one from several hundreds and they are in an random order. It's quite a pain to find a right one. This is a perfect example of \"swiss cheese model\", if either of these 2 bug is solved (bad sorting order and unrelated fields show in the list), the user experience of the workflow editor would be improved a lot. There is a different ticket about the sorting order problem: https://jira.atlassian.com/browse/JSWCLOUD-26308\r\n\r\n ","author":"Tony Chu"}]},{"summary":"The Archive Button doesn't show up on the View all projects tab","key":"JRACLOUD-82282","url":"https://jira.atlassian.com/browse/JRACLOUD-82282","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the instance has only Jira Work Management (Premium), the archive project button doesn't appear on the View All Projects tab; it's only possible to archive them following these steps: \r\n # Project settings > Details > Three dots > Archive.\r\n\r\nh3. Steps to Reproduce\r\n # Select > Projects.\r\n # Select > View all projects.\r\n # Select the three dots.\r\n\r\nh3. Expected Results\r\n\r\nArchiving projects by selecting the \" Archive \" button on the View All Projects screen.\r\nh3. Actual Results\r\n\r\nThere is no button to archive projects on this screen.\r\nh3. Workaround\r\n\r\nTo archive projects: \r\n # Project settings > Details > Three dots > Archive.","createDate":"2023-10-31T17:38:38.000+0000","comments":[{"text":"Do the watchers of this ticket still experience this issue? I am not able to reproduce it and we have not had any recent reports. Thank you!","author":"Anusha Rutnam"}]},{"summary":"Removing Original estimate field from Edit issue screens does not prevent it from being editable","key":"JRACLOUD-82251","url":"https://jira.atlassian.com/browse/JRACLOUD-82251","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRemoving Original estimate field from Edit issue screens does not prevent it from being editable\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Go to a Jira Software project (Company-managed) and pick an issue type.\r\n # For the selected issue type, add the Time tracking field to its Create, View and Edit screens.\r\n # Go to the Project settings > Issues > Layout and for the issue type of interest, ensure the *Original estimate* is part of the Context fields.\r\n # Go to Project settings > Issues > Screens and for the issue type of interest edit the \"Edit issue\" screen, removing the *Original estimate* field.\r\n\r\nh3. Expected Results\r\n\r\nThe Original estimate field is displayed, but can't be modified from the issue view.\r\nh3. Actual Results\r\n\r\nThe Original estimate field is editable regardless if the field is in the Edit issue screen.\r\n\r\nAdditional note: if the Time tracking field and the Original estimate fields are fully removed from all the screens, the Original estimate remains in the issue view, and has to be removed from the Issue overlay to actually remove it from the issue view.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-10-27T12:25:08.000+0000","comments":[{"text":"I have seen the exact same behaviour recently - this is definitely an issue for us that seems unique to the original estimate/time tracking fields. ","author":"Adam Wicks"},{"text":"This is still a valid issue until now. I am unable to set the original estimate to NON EDITABLE mode.","author":"Jeff Boon"},{"text":"We experience the same behaviour, the Original Estimate Field is always visible & editable. ","author":"Jan Stähle"},{"text":"[~rchiquete]  - Can we get an update on this? This should be a higher priority bug as it allows users to enter false or erroneous data.","author":"John Funk"}]},{"summary":"Attachment preview of a Word document containing Thai characters doesn't display the characters correctly","key":"JRACLOUD-82150","url":"https://jira.atlassian.com/browse/JRACLOUD-82150","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen previewing a Microsoft Word document containing Thai characters, the characters are not displayed correctly.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Attach a Microsoft Word file (.doc, .docx extension) to a Jira issue.\r\n # Click on the attachment to preview it.\r\n\r\nh3. Expected Results\r\n\r\nThe file preview shows the Thai characters in the Word file correctly.\r\nh3. Actual Results\r\n\r\nThe file preview can't display the Thai characters in the Word file. The characters appear as \"ballot box\" characters:\r\n\r\n!image-2023-10-12-15-15-58-675.png|width=574,height=374!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-10-12T07:19:52.000+0000","comments":[{"text":"{panel:title=Atlassian Update - October 11, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"},{"text":"Hello all people tracking this ticket,\r\n\r\nI'm pleased to announce that I am working on a fix to improve language support in our preview generation. This fix will configure our preview generation to use the [Noto|https://fonts.google.com/noto] font (due to its support of all writing systems and open licence) as a fallback font if the document's font is not available.\r\n\r\nThe current ETA for this fix is the end of this month. \r\n\r\nThank you for your patience.\r\n\r\nRegards,\r\n\r\nDaniel Barrett\r\nSoftware Engineer\r\nMedia Experiences and Infrastructure  ","author":"Daniel Barrett"}]},{"summary":"Sub-tasks disabled by default in new Jira Software sites","key":"JRACLOUD-82016","url":"https://jira.atlassian.com/browse/JRACLOUD-82016","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen creating a new site under my organization following [these steps|https://support.atlassian.com/organization-administration/docs/add-a-new-product-to-your-organization/#Add-a-product-to-a-new-site], sub-tasks are erroneously disabled by default, contrary to what is stated in [the documentation|https://support.atlassian.com/jira-cloud-administration/docs/configure-sub-tasks/#Enable-or-disable-sub-task-issue-types].\r\nh3. Steps to Reproduce\r\n # Create a new Jira Software site by following the steps outlined [here|https://support.atlassian.com/organization-administration/docs/add-a-new-product-to-your-organization/#Add-a-product-to-a-new-site].\r\n # Access the sub-tasks configuration page by navigating to *Settings* (⚙️) > *Issues* > {*}Sub-tasks{*}.\r\n # Observe that the sub-tasks are *turned off* by default.\r\n\r\nh3. Expected Results\r\n\r\nThe sub-tasks should be enabled by default as indicated in [the documentation|https://support.atlassian.com/jira-cloud-administration/docs/configure-sub-tasks/#Enable-or-disable-sub-task-issue-types].\r\nh3. Actual Results\r\n\r\nThe sub-tasks are, in fact, disabled by default, which contradicts the expected behavior.\r\nh3. Workaround\r\n\r\nTo address this issue, you can manually [enable sub-tasks|https://support.atlassian.com/jira-cloud-administration/docs/configure-sub-tasks/#Enable-or-disable-sub-task-issue-types] from the sub-tasks configuration page by navigating to *Settings* (⚙️) > *Issues* > {*}Sub-tasks{*}.","createDate":"2023-09-26T08:19:33.000+0000","comments":[]},{"summary":"CSV import does not respect the selection for new user mapping","key":"JRACLOUD-81992","url":"https://jira.atlassian.com/browse/JRACLOUD-81992","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile importing issue details from CSV, a new user is prompted with the choice if they want to keep users inactive which can be later changed from User Management.\r\n\r\nWhen a user opts for the INACTIVE user option, instead of creating inactive users, Jira is creating active users with product access.\r\nh3. Steps to Reproduce\r\n # Export CSV file containing issue details from the below link - https://<your_site>/secure/admin/ExternalImport1.jspa\r\n # Select CSV import and select CSV file you want to import. The CSV file should contain a user having an email address that doesn't exist on the site\r\n # Map the user details to any user information fields (e.g Reporter, Assignee, etc)\r\n # When you reach to below screen, select 1st or 2nd option. It will create active user with ALL default product access. Both the options are not working as expected.  !image-2023-09-04-16-49-53-373.png|width=361,height=78!\r\n\r\nh3. Expected Results\r\n\r\nAn inactive user should be created if you use 1st option or user with selected product option should be created in case you choose second option.\r\nh3. Actual Results\r\n\r\nActive user is getting created with ALL default product access.\r\nh3. Workaround\r\n\r\nNo workaround found. ","createDate":"2023-09-04T11:48:46.000+0000","comments":[{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"Issue Created Event is not fired when creating issues using CSV External System Import","key":"JRACLOUD-81955","url":"https://jira.atlassian.com/browse/JRACLOUD-81955","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This suggestion is for *JIRA Cloud*. Using *JIRA Server*? [See the corresponding suggestion|http://jira.atlassian.com/browse/JRASERVER-64599].\r\n{panel}\r\nh3. Summary\r\n\r\nThe issue Created Event is not triggered when issue are created from CSV using External System Import (documentation: [importing data from csv|https://confluence.atlassian.com/adminjiracloud/importing-data-from-csv-776636762.html]). The issue updated event is fired instead.\r\n\r\nThis makes it impossible to trigger automation rules, notifications or webhooks for issues created this way.\r\n\r\nWhen bulk creating issues from CSV  (documentation: [create issues using the csv importer|https://support.atlassian.com/jira-core-cloud/docs/create-issues-using-the-csv-importer/]) the issue created event is correctly fired.\r\nh3. Steps to Reproduce\r\n # Create a Webhook that fires on issue_created and issue_updated events and send the data to [beeceptor|https://beeceptor.com/], [webhooks.site|https://webhook.site/], [postbin|https://postb.in/], or other similar tools\r\n # Bulk create some issues from CSV ([create issues using the csv importer|https://support.atlassian.com/jira-core-cloud/docs/create-issues-using-the-csv-importer/])\r\n # See that you have correctly received the issue_created Webhook\r\n # Now repeat the test using External System Import instead ([importing data from csv|https://confluence.atlassian.com/adminjiracloud/importing-data-from-csv-776636762.html])\r\n\r\nh3. Expected Results\r\n\r\nThe issue_created webhook is received\r\nh3. Actual Results\r\n\r\nThe issue_updated webhook is received instead.\r\nh3. Notes\r\n\r\nThis happens because the CSV External System Import is firing the issue updated event instead of the issue created event. The issue can also be reproduced using notifications or automation rules configured to be triggered on issue_updated event.\r\n\r\nFrom original description:\r\n{quote}I am creating an plugins which send and notification to our tool whenever an Issue is created. We are unable to trapped the Issue Created Event at the time of CSV import.\r\n\r\nEven We are unable to distinct the issue which are created using CSV import.\r\n{quote}\r\nh3. Workaround\r\n\r\nFor Issue Created event, use Bulk Create instead.\r\n\r\n(!) Bulk Create has more limited features than CSV External System Import (!)","createDate":"2016-09-30T09:16:05.000+0000","comments":[{"text":"As part of a general cleanup, I am closing issues that have not been updated for 2 years.  If you consider this issue to be stil valid, please reopen the issue, pereferably with a comment so we can action it.","author":"tier-0 grump"},{"text":"re-opening this issue as there are actually customers still requesting this feature, some of these have been channeled to related issues like:\n* https://ecosystem.atlassian.net/browse/JIM-195\n* https://jira.atlassian.com/browse/JRA-9616\nThese other issues are specific about Issue Notifications, but the issue seems to be more generally about the Issue Created even since webhooks are not triggered either.","author":"Taiwo Akindele"},{"text":"I don't agree this is a \"new feature\" request. It surely should be changed to a bug. \n\nEvery script or web hook listening on create events should be triggered when creating an issue from CSV import as well. ","author":"Björn Gullander"},{"text":"Looking for it to be fixed soon.","author":"Jack Hunter [HeroCoders]"},{"text":"Glad the status of this had been changed to a short-term backlog. Looking forward to for a fix for this as we use the import to update time spent from out timesheet system. Not firing the update event means that after each such import we have to update manualy our EazyBI cube to get fresh data.","author":"Stanislav Ptáček"},{"text":"Re-opening the ticket as feature is still needed.","author":"Bartosz Dopke"},{"text":"I had to read this ticket to find out why our automation didn't work. It's still an ongoing pb :) ","author":"Pauline Dupuy"},{"text":"9 years no activities? Our dreams would become true if you could fix it somehow <3","author":"Сергей Соловьёв"},{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"CSV importer unable to map user when comment column has author's email","key":"JRACLOUD-81953","url":"https://jira.atlassian.com/browse/JRACLOUD-81953","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe CSV importer is unable to map the user's to the comment when the email of the user is provided in the comment column of the CSV file.  \r\nh3. Steps to Reproduce\r\n # Create a new CSV file with the comment field containing the email of the author\r\n # Import the file in the Jira Cloud\r\n\r\nh3. Expected Results\r\n\r\nThe importer maps the email of the user to the required user in the site.\r\nh3. Actual Results\r\n\r\nThe importer is unable to find the user and maps the comment to the logged-in user instead.\r\n !Screenshot 2020-02-03 at 4.09.21 PM.png|thumbnail!\r\nh3. Workaround\r\n\r\nUse the username or the Atlassian account id of the user to map the author of the comment.","createDate":"2020-02-03T10:42:19.000+0000","comments":[{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"Default values for Custom Field being overwritten on External CSV Import","key":"JRACLOUD-81941","url":"https://jira.atlassian.com/browse/JRACLOUD-81941","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen doing an external system import, default custom field values are not recognized or leveraged.\r\nh3. Steps to Reproduce\r\n # Create an issue with some values in custom fields.\r\n # Export issue to csv\r\n # Import issue via External CSV import by updating the values. \r\n\r\nh3. Expected Results\r\n\r\nThe default values assigned to the custom fields should have been migrated and present in the issue's fields.\r\nh3. Actual Results\r\n\r\nThe default value is not updated and present as blank in the custom field.\r\nh3. Workaround\r\n\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-03-23T06:58:38.000+0000","comments":[]},{"summary":"Import Users with JSON Importer, Always Set The User to Active","key":"JRACLOUD-81939","url":"https://jira.atlassian.com/browse/JRACLOUD-81939","type":"Bug","priority":"","description":"h3. Issue Summary\r\nFrom [Importing data from JSON|https://confluence.atlassian.com/adminjiracloud/importing-data-from-json-776636779.html] document, it mentioned that we can set the status of the users when creating the new users (active: true/false).\r\n{code}\r\n\"users\": [ \r\n\t{\r\n        \"name\" : \"abcde-12345-fedcba\",\r\n        \"groups\" : [ \"jira-users\", \"my-custom-group\" ],\r\n        \"active\" : true,\r\n        \"email\" : \"user1@example.com\",\r\n        \"fullname\" : \"User 1\"\r\n\t}\r\n]\r\n{code}\r\n\r\nHowever, the users are always get created as active users on User Management even though we set the active status to false. Example:\r\n{code}\r\n\"users\": [ \r\n\t{\r\n        \"name\" : \"abcde-456789-fedcba\",\r\n        \"active\" : false,\r\n        \"email\" : \"user2@example.com\",\r\n        \"fullname\" : \"User 2\"\r\n\t}\r\n]\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n # Create a JSON file with active and inactive users. Example:\r\n{code}\r\n\"users\": [ \r\n\t{\"name\" : \"abcde-12345-fedcba\",\"groups\" : [ \"jira-users\", \"my-custom-group\" ],\"active\" : true,\"email\" : \"user1@example.com\",\"fullname\" : \"User 1\"},\r\n \t{\"name\" : \"abcde-456789-fedcba\",\"active\" : false,\"email\" : \"user2@example.com\",\"fullname\" : \"User 2\"}\r\n]\r\n{code}\r\n# Attempt the import to the site using JSON importer\r\n !image-2020-01-17-10-29-30-794.png|thumbnail! \r\n# Set the users to inactive\r\n !image-2020-01-17-10-29-10-978.png|thumbnail! \r\n\r\nh3. Expected Results\r\n* User 2 is set to *inactive* in User Management\r\n\r\nh3. Actual Results\r\n* User 2 is set to *active* in User Management\r\n* User 2 received the invitation email to access the site\r\n* If \"New users have access to this product\" option is enabled, User 2 is added to the default group(s) as well.\r\n !image-2020-01-17-10-32-15-918.png|thumbnail! \r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-01-17T02:38:29.000+0000","comments":[{"text":"Why is this low priority?   Doesn't this affect billing?","author":"Dylan Brophy"},{"text":"Agree with Dylan, it is quite important for us, especially when we do JSM migration, it will give Application Access to every customer we import. \r\n\r\nPlease increase the priority and address it ASAP ","author":"Tong Wang"},{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"When importing issues from CSV, Original Estimate is imported as minutes instead of hours","key":"JRACLOUD-81938","url":"https://jira.atlassian.com/browse/JRACLOUD-81938","type":"Bug","priority":"","description":"h3. Summary\nWhen importing issues from CSV, despite estimates being listed in seconds according to [Creating Issues using the CSV Importer|https://confluence.atlassian.com/display/JIRACLOUD/Creating+issues+using+the+CSV+importer] and [Importing Data from CSV|https://confluence.atlassian.com/display/JIRACLOUD/Importing+Data+from+CSV], if default unit for time tracking is set to *minutes*, it will be imported as minutes instead of hours.\n\nh3. Environment\nJIRA 6.5.*\n\nh3. Steps to Reproduce\n# Set Time Tracking default unit to Minutes (per [Configuring Time Tracking|https://confluence.atlassian.com/display/JIRACLOUD/Configuring+Time+Tracking#ConfiguringTimeTracking-ConfiguringTimeTrackingSettings])\n# On a JIRA instance, *Issues > Import from CSV*\n# Import the attached CSV\n# Check the imported issues. Original Estimate will show 14m instead of 14h.\n\nh3. Expected Results\nImporter would convert the seconds to minutes and then hours/days if necessary.\n\nh3. Actual Results\nThe minutes are converted to hours and then labeled as minutes. The default unit should only be used if not specified.\n \nh3. Notes\nFor example, Original Estimate is listed in CSV as 50400 seconds > 840 minutes > 14 hours\nImporter converts the 14 hours back to minutes, by default.\nImporter should know that 50400 is listed as seconds.\n\nh3.Solution / Workaround\n# Change [Default Time Tracking|https://confluence.atlassian.com/display/JIRACLOUD/Configuring+Time+Tracking#ConfiguringTimeTracking-ConfiguringTimeTrackingSettings] unit to hours, and re-import the CSV issues.\n# Confirm that Original Estimate shows correct time, and if desired, change the default time tracking back to minutes.","createDate":"2016-09-30T09:15:10.000+0000","comments":[{"text":"The possibility to use CC by-sa licensed works together with GPL\nlicensed works to form a derivative work of both would make my life a\nlot easier.\n\nIt would allow me to use works from Ryzoom together with works from\nBattle for Wesnoth in the free RPG books I work on.\n\nAnd it would make it easier to work on the writings, the artwork and\nthe code for a game which uses the rules of the RPG for a tactical\ncomputer-RPG without having to worry about falling into licensing\ntraps.\n\nFinally I could license my own drawings and poems under CC by-sa,\nwhich would make it much easier for others to reuse them, while\npreserving my ability combine all derivatives of my works with my\nother works - regardless of the kind of work (song, image, text or\nprogram - the latter two often require the GPL to preserve the\npossibility to reuse the improvements made to derivative in practice).\n\nNow know where I stand - I hope I can contribute to making the\ncompatibility of CC attribution-sharealike and GPLv3 or later work\nout!\n\nBest wishes,\nArne\n--\nsinging a part of the history of free software,,?","author":"vivi yang"},{"text":"for the proposal, which includes an initial comparison of the two licenses.\n\nI like the table - it makes the differences and similarities quite clear.\n\nI have one nitpick on the comparison: For “other versions” it states\nfor the GPL:\n\n    “Compliance with any version automatically permitted if no version\n    specified; otherwise no by default, but licensor may specify that\n    later/other versions allowable. No additional obligations are\n    imposed on authors where a reuser follows a later version. (§§14)”\n\nIt would be nice to add, that the suggested license text allows any\nlater version, and that there is an option to select a proxy who can\ndecide for each later version whether the works may be used under this\nversion (clause 14). Additionally clause 13 allows using the AGPL\n(which is a GPL with added copyleft protection for applications which\nare accessed over the network - a requirement for providing copyleft\nin remote services).,,,,","author":"vivi yang"},{"text":"This also occurs in Jira Server.\r\nI understand that there is a workaround, but please correct it as it is inconvenient.\r\n\r\nOh ... just the same comments were on.","author":"Hidehiko Kuniya[Ricksoft]"},{"text":"Possible workarounds reported by developers at my company:\r\n\r\nUsing the import from CSV option in the Jira admin console to import CSV is working fine. Original Estimates and Time Remaining are coming in as expected.\r\n\r\nAnd, if we give Original Estimates and Time Remaining in milliseconds (instead of seconds) and then use import option available under “Issues and filters” then it works. Original Estimates and Time Remaining come in as expected.\r\n\r\nSo conclusion is, if we use\r\n * Import CSV option under Jira admin console then we need to provide Original Estimates and Time Remaining in *seconds.*\r\n * For the Import CSV option under Issues and filters we need to provide Original Estimates and Time Remaining in *milliseconds.*\r\n\r\n ","author":"dave.drexler"},{"text":"You'll be able to work around the default 'Minutes' setting in Time Tracking if you multiply the hours entry on your CSV file by 216000. So, 1 hour = 216000 on your CSV file.","author":"Brian Longstreet"},{"text":"As Jira user, I need to multiply their figures by 60, in order to get the right \"time estimate\"...\r\n\r\nAs Jira admin, this problem is not happening.","author":"Rolando Castillo"},{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"},{"text":"Bug still there, just tried ","author":"Alessandro Domanico"},{"text":"https://getsupport.atlassian.com/browse/CES-52272","author":"Vittal Krishna"}]},{"summary":"Parent - Subtask relationship is not showing on team-managed projects when issues are imported from CSV","key":"JRACLOUD-81936","url":"https://jira.atlassian.com/browse/JRACLOUD-81936","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen you import a parent issue like a story with its subtasks using the external system import CSV the subtasks are not showing inside the parent issue, however, when you do an advance search the subtasks show a parent relation.\r\n\r\nh3. Steps to Reproduce\r\n # Export or create a CSV file with a parent issue and its subtasks\r\n # Use the external system import to import the CSV file into a Next-gen project\r\nhttps://share.getcloudapp.com/NQu1e0wm\r\n\r\nh3. Expected Results\r\nThe subtasks should be displayed inside the parent ticket or in the board when grouped by subtask\r\n\r\nh3. Actual Results\r\nNo subtasks are displayed in the parent ticket just in the advanced search\r\n\r\n\r\nh3. Workaround\r\nRecreate the subtasks or first import all the issues into a Classic project and then move them to a Next-gen\r\nNote: Trying to move them to reassign the parent is not working.","createDate":"2020-10-06T00:41:45.000+0000","comments":[{"text":"Based on the screen grab it seems to be an Issue Detail View bug.","author":"Sanjay Sengupta"},{"text":"Moved to JRACLOUD because CSV import is part of the Jira platform, common to all Jira products and not specific to Jira for Software.","author":"Mike Howells"},{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"During CSV imports, Jira doesn't respect the field you choose during the mapping step when you have a custom field with the same name of a system field","key":"JRACLOUD-81928","url":"https://jira.atlassian.com/browse/JRACLOUD-81928","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen we import CSV data into JIRA via System External Import, fields with duplicate names will be somehow mapped to Custom field rather than the System field even if I choose the correct field during the import.\r\n\r\nI suspect there is a bug in the CSV Importer around the name of a custom field when selecting it for import, particularly if there is a standard field by the same name.\r\nh3. Steps to Reproduce\r\n # Create a custom field named \"Status\". Not a good idea, but that's what was done.\r\n # Create a CSV file for import with Issue ID, reporter, summary, status columns.\r\n # Use the CSV importer to import the CSV file, mapping as expected. Select the standard JIRA field Status for the status column.\r\n # Note that the custom field named Status is selected since it is named as a custom field, not a standard field in the CSV Importer mapping.\r\n\r\nh3. Expected Results\r\n\r\nThe System field Status should have been updated.\r\nh3. Actual Results\r\n\r\nThe Custom field Status have been updated.\r\nh3. Workaround\r\n\r\n*Option 1 (Recommended)*\r\n # Rename the Custom Field to a different name before the import.\r\n # Perform the CSV import.\r\n # Rename back the Custom field back to the original name.\r\n\r\n*Option 2*\r\n # After mapping the fields for the import, the import wizard will give you the option to {_}Begin import{_}.\r\n # At this page, click Back button on your web browser.\r\n # Choose again the standard Status field again.","createDate":"2021-07-08T19:58:56.000+0000","comments":[{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"Cascading Custom Field not imported correctly from CSV import","key":"JRACLOUD-81924","url":"https://jira.atlassian.com/browse/JRACLOUD-81924","type":"Bug","priority":"","description":"h3. Summary\r\nCascading custom field value ( Parent Value -> Child Value) is not imported correctly when using CSV import from ( Issues and filters > Three dots button > Imports Issues from CSV).\r\n\r\nh3. Environment\r\nCloud\r\n\r\nh3. Steps to Reproduce\r\n# Create a multiple cascading custom field which have Parent Value and Child Value\r\n# Then, create CSV file to import the issue. For example :-\r\n [^new_test.csv] \r\n# Then, import it from :-\r\n## Go to Issue and Filters page\r\n## Then , click the three dots button on the top right\r\n## Then, choose *Imports Issues from CSV*\r\n## Then, import the CSV file with mapped fields.\r\n\r\nh3. Expected Results\r\nThe custom field update correctly with parent value and child value.\r\n\r\nh3. Actual Results\r\nChild value is not imported\r\n\r\nh3.Workaround\r\nImport the issue from *Systems > External System Import > CSV*","createDate":"2018-09-05T12:50:38.000+0000","comments":[{"text":"any updates on this ? I am having the same problem :(","author":"Sivasakthi Sivagnanam"},{"text":"No, you're not the only person having this problem.","author":"Deleted Account"},{"text":"I'd really appreciate if this was fixed, I have two cascading fields and as a workaround, I've put them in a dropdown of every combination. You can imagine how many that would have to be, it slows down the idea of it and was a pain to put together too.","author":"Wardah Shahid Awan"},{"text":" I don't think this has made any progress.\r\n\r\n ","author":"Deleted Account"},{"text":"Hello!\r\n\r\nWe’re looking to improve the import experience in Jira and are keen to understand how our community is using the Jira Import Module (JIM). If you’ve used JIM to migrate/move data into Jira recently, we’d love to hear about your experience. Please take a few minutes to [fill out this survey|https://forms.gle/NYNkmS92r96z42QV9]. Your feedback will help us learn how we can improve your experience in importing data.\r\n\r\nSurvey link - [https://forms.gle/NYNkmS92r96z42QV9]\r\n\r\nThanks!\r\n\r\nPrashanth M\r\nProduct Manager, Jira Platform","author":"Prashanth M"}]},{"summary":"serverTime property not returned when calling the Get Jira instance info REST API endpoint anonymously","key":"JRACLOUD-81854","url":"https://jira.atlassian.com/browse/JRACLOUD-81854","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: no\r\n\r\nAs per the documentation, the [*Get Jira instance info*|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-server-info/#api-rest-api-3-serverinfo-get] REST API endpoint (GET {{/rest/api/3/serverInfo}}) can be called anonymously. \r\n\r\nHowever, if you don't authenticated as a user that has access to the Jira site, the {{serverTime}} property is not returned (using an active Atlassian Account session that has no access to the site doesn’t work either, you need to use and account that has access to the site).\r\n\r\nh3. Steps to Reproduce\r\n # As a user that has access to the Jira site, call https://SITENAME.atlassian.net/rest/api/3/serverInfo \r\n # See that the {{serverTime}} property is present in the response\r\n # Now, repeat the same test without providing any authentication\r\n\r\nh3. Expected Results\r\nThe {{serverTime}} property is present in the response\r\n\r\nh3. Actual Results\r\nThe {{serverTime}} property is not returned\r\n\r\nh3. Workaround\r\nNo workaround available at the moment.","createDate":"2023-09-14T14:37:42.000+0000","comments":[]},{"summary":"HTTP Status 403 returned for DB connection error when calling REST APIs","key":"JRACLOUD-81846","url":"https://jira.atlassian.com/browse/JRACLOUD-81846","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nBulk rest api calls that fails with DB connection errors is returning a 403 response code to the client.\r\n\r\n1. Content response is even more misleading :\r\n{code:java}\r\n<html>\r\n<head>\r\n    <title>Forbidden (403)</title> \r\n<!--[if IE]><![endif]-->\r\n<script type=\"text/javascript\" >\r\n{code}\r\n2. Jira application logs indicates DB connection error from too many request within a short period of time.\r\n{code:java}\r\nERROR\tcom.atlassian.plugins.rest.common.error.jersey.ThrowableExceptionMapper\t\r\nUncaught exception thrown by REST service: org.ofbiz.core.entity.GenericDataSourceException: \r\nUnable to establish a connection with the database. (PSQL_TOO_MANY_CONNECTIONS Exception already occurred in this workcontext, skipping next getConnection)\r\n{code}\r\nJira is returning wrong response code along with error message. The external App sends API request to Jira and it failed. Jira returns 403 error while it can return 429 error. If the App receives 403, it will stop operation. If the App receives 429, it should retry sending request again.\r\nh3. Steps to Reproduce\r\n # Call REST APIs in continuous succession\r\n\r\nh3. Expected Results\r\n\r\nIf the rate limit is hit, the status 429. Throttling limit state should be returned in headers like [here|https://developers.trello.com/docs/rate-limits]\r\nh3. Actual Results\r\n\r\nHTTP 403 response code returned with the following content\r\n{code:java}\r\n<html>\r\n<head>\r\n    <title>Forbidden (403)</title> \r\n<!--[if IE]><![endif]-->\r\n<script type=\"text/javascript\" >\r\n{code}","createDate":"2018-10-25T12:33:48.000+0000","comments":[{"text":"We are currently seeing a BIG increase in the number of these HTTP 403 errors. This is affecting more than 10% of our app customers!\r\n\r\nFirst of all, these errors should really be returned as HTTP 429 so that we can show the user an appropriate error message.\r\nAnd then, these errors should be *eliminated* altogether, as this is breaking customer workflows!\r\n\r\n[~sraj4@atlassian.com] please escalate!","author":"David Fischer"},{"text":"Fully agree with David here, this greatly impacts all our Cloud Apps as well.","author":"Bartłomiej Styczyński"},{"text":"David put it nicely. PLEASE escalate this issue!","author":"Jennifer Hagbi"},{"text":"Please escalate!","author":"Bartłomiej Jańczak [SoftwarePlant]"},{"text":"What are vendors supposed to do to work around this problem while we wait for a fix? This was reported 10 months ago and there is no indication from Atlassian that it is being addressed. Our apps are failing, making us look bad to our customers and implementing retry mechanisms in our product will only aggravate the problem. In the last week alone, we have received unexpected 403s for over 16,000 requests.","author":"Jon Bevan [Adaptavist]"},{"text":"We have hundreds of failing requests related to API rate limits, some are relatively easy to identify, e.g. request with status code 500 and \"org.postgresql.util.PSQLException: FATAL: too many connections for role \\\"GL62fZE7FxApdF2RarwDJW\\\" message in body. \r\n\r\nHowever others, especially 403 are extremely difficult to identify as API rate limit. I am collecting various cases here:  [https://ecosystem.atlassian.net/browse/ACJIRA-1929]","author":"Maciej Dudziak [Deviniti]"},{"text":"This is also affecting our app, we are starting to see more and more 403s as well.  Customers are getting frustrated because they can't rely on our functionality.   \r\n\r\nAlso, previous complaints about 403's have resulted in people telling us to add retries - if the source truly is a rate limit we may potentially be making things worse for ourselves. \r\n\r\n([https://ecosystem.atlassian.net/browse/ACJIRA-1868] was our last 403 problem - though here they said it wasn't rate limiting causing it...)\r\n\r\n ","author":"Brydie McCoy (CB)"},{"text":"Effecting plugins functionality that used to work without issue.    Cloud slowness may be acceptable but not failures!","author":"Evan Wolf"},{"text":"This is greatly impacting myself and team as well. Please fix ASAP!","author":"Jess Carter"},{"text":"403's generally should not be retried.\r\n\r\nI don't agree this should be a 429.  429 should client side exponential backoff, but unless there's an actual request rate limit, clients can't really know how they should act if they want to be well-behaved and avoid it. \r\n\r\nThis is system behavior that, from the client perspective, is totally dependent on hidden variables and random.\r\n\r\nThis exception should just return a 500.  500's should be safe to retry always.  (also assuming the request is atomic, idempotent, and clients use exponential backoff.","author":"Eric Psalmond"},{"text":"We acknowledge existence of the problem with unexpected DB connection errors returned by API, and realize how painful it is for Ecosystem vendors, Jira and apps users. We’d love to deliver fix asap, but unfortunately it will take us at least few more months as solution requires major updates to our rate limiting mechanisms. Good news is that we work on that already.\r\n\r\n403 errors indicate Atlassian infrastructure is overloaded by the number of incoming requests, and in order to avoid Jira outage we rate limit some of them. Current rate limiting mechanism is implemented at Jira site level and is exposed to \"noisy neighbourhood\" issue. Requests coming from the users, your app and other apps accessing our infrastructure are treated in the same manner, so single misbehaving consumer can trigger rate limiting for the whole Jira site.\r\n\r\nWe are actively working on per consumer rate limiting which should help us provide meaningful information in the response headers. We’ll let you when we have got more details.\r\n\r\nAt the time being we suggest:\r\n- Retry failed requests using back-off mechanism to lower the frequency of retries. In other words - retry request responsibly, by giving Jira more time to recover if previous retry attempt failed.\r\n- Use [dynamic webhooks|https://developer.atlassian.com/cloud/jira/platform/webhooks/#registering-a-webhook-via-the-rest-api--for-connect-apps-] to be notified about changes that happened in Jira.\r\n- Use bulk REST APIs or [Jira expressions|https://developer.atlassian.com/cloud/jira/platform/jira-expressions/] to minimise amount of requests and data returned from Jira.","author":"Mateusz Szerszyński"}]},{"summary":"Story Points field shows in the Child Issues panel even after removing them from the screens","key":"JRACLOUD-81629","url":"https://jira.atlassian.com/browse/JRACLOUD-81629","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Story Points field shows in the Child Issues panel even after removing them from the screens and is editable, although it throws an error when saved. \r\n\r\nThis is reproducible on Data Center:  (no)\r\nh3. Steps to Reproduce\r\n # Remove the Story Points fields from the Issue Screens.\r\n # Open an issue with Child Issues. The story point fields will show for each child. \r\n !image-2023-08-08-10-13-54-735.png|thumbnail! \r\n !image-2023-08-08-10-17-23-743.png|thumbnail! \r\n\r\nh3. Expected Results\r\nStory points should not show if they are removed from the screens or if they are using Kanban boards. \r\n\r\nh3. Actual Results\r\nThe child issues panel shows the story points field as an editable field. \r\n\r\nh3. Workaround\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2023-08-08T08:18:08.000+0000","comments":[{"text":"The configurable child issue panel just got released, now customers can choose to remove/add the story point field (or any other fields) as they wish on the panel","author":"Daisy Xu"}]},{"summary":"Any changes to atlassian-addon-project-access project role are overwritten on an app installation","key":"JRACLOUD-81601","url":"https://jira.atlassian.com/browse/JRACLOUD-81601","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAs a result of changes announced in 2017 ([https://confluence.atlassian.com/servicedeskcloud/blog/2017/02/add-on-permissions-update)] any changes around atlassian-addon-project-access role persist only until the first app installation or update and then they are overwritten.\r\n\r\nThe possibility to remove atlassian-addons-project-access role from permission or issue security scheme gives admins a false impression they can restrict app access to some projects or features. \r\n\r\nThis is reproducible on Data Center: no\r\nh3. Steps to Reproduce\r\n # Go to *Permissions schemes*\r\n # Pick one of them and click *Permissions*\r\n # Remove `atlassian-addons-project-access` from some permission ie. Administer Projects or Manage sprints\r\n # Install any app\r\n # Check that the role was readded to that permission\r\n\r\nh3. Expected Results\r\n\r\nAs Atlassian intention was to have `atlassian-addons-project-access` always added to all permissions schemes and issue security schemes there should be no possibility to manage that project role access.\r\nh3. Actual Results\r\n\r\nAdmins have the impression they have limited apps access to some projects, however, their settings are overwritten on any app installation or update.\r\nh3. Workaround\r\n\r\nAdmin can implement a side script that detects the reading of the project role happened and update schemes according to their initial requirements.","createDate":"2023-08-03T11:39:27.000+0000","comments":[{"text":"Hello!\r\nIn this [Atlassian Changelog|https://developer.atlassian.com/cloud/jira/platform/changelog/#CHANGE-1115] is an information about the withdrawal of the ability to manage the *atlassian-addons-project-access* role. Also there is information about:\r\n”{_}By default, the role is assigned to all project permissions in permission schemes and all issue security levels in issue security schemes. As a result of this change, the possibility to manage that role’s permissions and issue security levels, both via the UI and the REST API, will be restricted.”{_}\r\nI checked the creation of the issue security level in the Company managed project and at this point the role atlassian-addons-project-access *is not assigned by default to all issue security levels in issue security schemes. Once created, I have the option to add this role or not !* \r\n\r\n\r\nSometimes we have such cases when clients when adding security level do not add atlassian-addons-project-access role therefore our application loses access to the issue. Therefore, after creating a request to us, we tell the client to add these roles to issue security. \r\n\r\n1) How will it work after the changes concerning this role? When a new security level is created by user, will the role *atlassian-addons-project-access* be added by default ( currently it is not added ) and the user will not be able to remove it?\r\n2) For project permissions, will the role *atlassian-addons-project-access* be defaulted to all existing permissions and the user will not be able to remove it?","author":"Mikołaj Maruniak {Appfire}"},{"text":"hello [~50aed2dd2eab] thanks for reaching out to us!\r\n\r\n1 - after the changes for new security levels the role will be added by default (and the admin won't be able to remove it)\r\n\r\n2 - after the changes when new permission scheme is created it will have *atlassian-addons-project-access* added to all permissions and the admin won't be able to remove it.\r\n\r\nCheers!","author":"Tomasz Kanafa"},{"text":"I'm an Atlassian Partner helping Amdocs Company (total of 25K users in several instances) to move to the Cloud (refer to MOVE-134068).\r\n\r\nThere is a huge concern with this issue. Amdocs Infosec people need a way to control App permissions in the project. We told them \"no problem, you can control that using the *atlassian-addons-project-access* role, just remove that role from the permission scheme\".\r\n\r\nNow we understand that this is not really working... and that it's going to be deprecated...\r\n\r\nThis poses a huge security risk that Amdocs Infosec are not willing to accept. The customer (and I believe that all large customers of Atlassian) want some way to control project permissions given to 3rd party apps.\r\n\r\nPlease do not deprecate this functionality. We need an option to mitigate security concerns by removing *atlassian-addons-project-access* role from the permission schemes.","author":"Ran Lavi"},{"text":"the Cloud roadmap now contains a new feature:\r\n\r\nCOMING SOON  Q1 2024\r\n\r\nRestrict app access to specific Atlassian instances, Confluence Spaces, or Jira Projects.\r\n\r\n[https://www.atlassian.com/wac/roadmap/cloud/app-data-access-controls?&p=5c9cdc85-f8]\r\n\r\n ","author":"Ran Lavi"},{"text":"hello [~90d124564953] \r\nThank you for your feedback.\r\nCan You describe the use case in more detail - is it that the customer wants some apps present on their instance and at the same time they want to restrict access to some projects/issues?\r\nMind that removal of *atlassian-addons-project-access* project role from the permission scheme does not fully protect forge apps from accessing the project issue data.\r\nIt will cause eg. [product events|https://developer.atlassian.com/platform/forge/events-reference/product_events/] to be not delivered to the forge app - which is probably what you are aiming for.\r\nOn the other hand, there can be UI components eg. a [background script|https://developer.atlassian.com/platform/forge/manifest-reference/modules/jira-issue-view-background-script/] that uses a [resolver|https://developer.atlassian.com/platform/forge/runtime-reference/custom-ui-resolver/] and this resolver, in turn, uses *asUser()* to query for issue data and can send it to an arbitrary URL (or store it in forge storage and somehow expose it through eg. webtrigger) - this use case will need user consent (scopes and external URLs are displayed on the consent screen) but it’s doable and might be considered a security hole in your use case.\r\nLike You’ve mentioned a new set of restricting app access to specific entities is coming soon: [https://www.atlassian.com/wac/roadmap/cloud/app-data-access-controls?&p=5c9cdc85-f8] and hopefully it will resolve your issues.\r\n\r\nExample of consent screen (for the UI module with resolver and external url configured):\r\n!image-2023-09-13-13-52-36-678.png|thumbnail!\r\n\r\nCheers!","author":"Tomasz Kanafa"},{"text":"Hello @Tomasz Kanafa,\r\n\r\nThank you for the detailed comment.\r\n\r\nThe use case is very simple: many apps require Jira admin permissions and the customer is concerned that they might abuse this permission by mistake or if the servers of the vendor are compromised by an attacker.\r\n\r\nSo the customer wants a way to restrict app permissions, for example remove ability of apps to delete issues, edit issues, etc. \r\n\r\nThe new planned cloud feature really looks interesting. But the customer wants to migrate to the cloud in October and cannot wait for this feature, so a temporary workaround is needed. We thought that removing the *atlassian-addons-project-access* role from the project permission was a good workaround, but then we noticed this bug. \r\n\r\nNot having any workaround risks the migration to the cloud. so please don't fix this bug until the new cloud feature is implemented.","author":"Ran Lavi"},{"text":"Hello, \r\n\r\nWe are currently leveraging the ability to remove the *atlassian-addons-project-access* role from the \"Delete All Comments\" permission within our Jira Service Management project's permission scheme in an attempt to remediate unwanted Atlassian Assist functionality.\r\n\r\nDetails on said issue: *any user* with access to a ticket thread within the Assist Slack App can delete comments from *any other user* (including agents) on the JSM ticket itself.\r\n * The history of who deleted the comment within a thread is not presented\r\n ** History simply states \"Atlassian assist deleted a comment\"\r\n * No indication of what the comment said is retained\r\n ** All history of the comment's content is seemingly lost\r\n\r\nFurther conversation on this topic are captured in PCS-174430. Support was not able to offer an alternative solution at the time aside from advising that we request our users to not delete comments. We also were not made aware that the ability to manage the atlassian-addons-project-access role gives admins a false impression they can restrict app access to some projects or features. \r\n\r\nPlease let me know what other workaround we can use, or if the bot's functionality can/will be changed to account for this concern.","author":"svivanco"},{"text":"We're back to square one. We got more details on the new cloud feature for restricting app access ([link|[https://www.atlassian.com/wac/roadmap/cloud/app-data-access-controls?&p=5c9cdc85-f8]).]\r\n\r\nIt doesn't satisfy the need. It can only block the app for accessing an entire specific project. This is not what our customer is looking for. The need is to prevent apps from editing issues, deleting issues, etc.  \r\n\r\nSo we really need the option to continue to control this via the permission scheme via the addition or removal of *atlassian-addons-project-access.* We understand that this is not working as expected and might give false impression. The question is what is the workaround? The infosec people from the customer are concerned that a compromised app will edit issues, and for that reason their are reluctant to approve cloud migration of a very large instance (total of 25k users).\r\n\r\nWe really need a solution, and until there is no alternative, we need the workaround of manipulating the *atlassian-addons-project-access* role.","author":"Ran Lavi"},{"text":"This isn't something that is good - we want to be able to manage the security of some projects, and if we cannot remove the addon, it will mean that users can potentially do any view / edit / delete actions from the addon via Automations. How can we guarantee projects are truly restricted? Please reconsider the restrictions that are being added to this group.","author":"Jennifer Luo"},{"text":"Just another failure to listen to customers on Atlassian's behalf. Are we really surprised? ","author":"William Wilson"},{"text":"I would like to reiterate my previous comment:\r\n\r\nPlease do not fix this bug. It is VERY VERY important for our customers to be able to remove the *atlassian-addons-project-access* from the permission scheme. This allows the customer to control if apps are able (as example) to delete issues.\r\n\r\nIf you fix this bug and do not allow to remove that role from the permission scheme, our customer will not have any way to restrict apps from deleting issues. This is important!\r\n\r\nYes, we are aware that every app installation/update on the cloud will restore that role for all permission schemes. But this is something that we can handle. We are monitoring the app installation audit log (using SIEM system), and after every installation, we are updating the permission schemes (using API) and removing that role again.\r\n\r\nThis is uglly, but necessary. Please DO NOT fix this bug unless there is a suitable alternative for restricting apps from deleting issues. Without this, the risk is that our customer (few Data Center instances with 25k users) will not approve migration to Cloud, as this is too large risk for him.","author":"Ran Lavi"},{"text":"Better keep the ability to manage addon access in project perspective .... \r\n\r\nThis will increase security concerns, and this was added to resolve security concerns.... \r\nDont understand why change it ","author":"Patricia Francezi"},{"text":"If you are going to delete the possibility to edit this role then you have to provide another way to disable access for apps. Always forcing access is just not acceptable. ","author":"Cornelia Jeppsson"},{"text":"https://getsupport.atlassian.com/browse/PCS-235828","author":"Kevin Sanghvi"},{"text":"Hi! I'm looking for some confirmation/clarification:  I understand this change is intended to impact the functionality of Jira Permission Schemes.  Can I safely infer that this change will _not_ impact the current functionality for Jira Workflow Properties?\r\n\r\nFor example, I use Jira Workflow Properties to explicitly grant edit access to the 'atlassian-addons-project-access' project role in workflow states that are otherwise configured to be read-only to users:\r\n\r\n*{{jira.permission.edit.projectrole = 10003}}*\r\n\r\nWill that continue to work as expected?","author":"Aaron Morris"},{"text":"I came here to comment what @Aaron Morris said just below. Does taking away all control of the add-on role mean we lose control of being able to place add-on user in group permission settings for workflows? It is already a hack to do it now, but not being able to do it at all would affect the way some of our automations work. ","author":"Malka Jackson [Isos Technology]"},{"text":"As a highly regulated customer we have to be able to control EVERY User and their permissions. So if you take this away and apps can do whatever they wish in the future, we will have to leave the Atlassian software platform for good. Otherwise we will get in conflict with our authorities on the next audit.\r\n\r\nPlease reconsider this change","author":"Richard Scholtes"},{"text":"I share the same concern regarding the functionality and behavior of Add-ons. I also work in a highly regulated environment, and I have observed instances where users were added without my involvement due to an *Add-On installing itself with SiteAdmin permissions.*\r\n\r\nWhat frustrated and annoyed me was the response from Atlassian Support, dismissing it as normal behaviour.\r\n * *This phenomenon is technically referred to as a shadow account, which is commonly associated with unauthorized operations.*\r\n\r\n*atlassian-addons-project-access* is IMHO the tip of the iceberg of security Atlassian has to address. I am glad to have discovered this thread and the steps towards making the product more secure and robust{*}{*}","author":"Mario Coluzzi"},{"text":"How will this affect workflow conditions already added to JSM projects?\r\n\r\nThis is used mainly for automation ONLY hidden transitions.","author":"Iman Attia"},{"text":"Hi, fellow watchers,\r\n\r\nBTW...I posted a question in the Atlassian Community asking for an Atlassian to respond to our comments.  Please consider giving it a vote...and who knows, maybe someone will see it. :)\r\n\r\n[Can an Atlassian please comment on ticket JRACLOUD-81601?|https://community.atlassian.com/t5/Jira-Software-questions/Can-an-Atlassian-please-comment-on-ticket-JRACLOUD-81601/qaq-p/2629016]","author":"Aaron Morris"},{"text":"Adding a note to others' excellent comments:\r\n\r\nIn large organizations, it is not unusual for different company divisions, with different security needs to share the same Jira instance.\r\n\r\nThese enterprise instances may have one business unit which wants to use a third party app, and another which doesn't (or can't) due to tighter audit concerns.\r\n\r\nThe existing mechanism allows for 'hiding' secure projects from 3rd parties in a way that can easily be demonstrated to auditors.\r\n\r\nIf you remove the ability to manage this, then the result will be that many apps will simply have to be removed from the instance. \r\n\r\nTherefore, I don't believe this change will please either your customers or your Marketplace partners.","author":"April"},{"text":"I did thought, that removing atlassian-addons-project-access from some permissions (e.g. delete issue) can improve security in audit relevant projects.\r\n\r\nThis obviously was wrong, as this issue states in the description:\r\n{quote}\r\nh3. Actual Results\r\n\r\nAdmins have the impression they have limited apps access to some projects, however, their settings are overwritten on any app installation or update.\r\n{quote}\r\n \r\nSo yes, there is a bug! *But the solution goes into the wrong direction! It is crucial to have the possibility to remove some permissions in certain projects* (e.g. \"delete issue\")","author":"T H"},{"text":"We absolutely need to be able to restrict app access into certain projects.\r\nNot being able to do so will result in much stricter requirements from our internal Privacy and Sourcing teams when assessing new data processors, making it a lot less likely we can onboard Jira apps\r\n\r\nThis kind of nonsense if what makes it difficult to actually and whole-heartedly recommend Atlassian products.","author":"Rune Rasmussen"},{"text":"hi, Removing the ability to restrict permissions to that role is not a good idea. There are cases where it is necessary that you do not have certain permissions. For example, 'Assignable User'. In my opinion, this change should not be made.","author":"María Estela Aparicio Saavedra"},{"text":"And please don't get the impression that the people \"are giving in\" to the idea because the comments get less. I already said this on the first day you announced this and I still stay on my opinion. Trying to solve this problem this way will cost you customers. Because not being able to restrict actions of not-human users is a general red flag to security experts. I hope you have already consulted your own internal security experts on this topic, because I am sure they will agree with me.\r\n\r\nMaking a change like this opens a loophole in your zero-knowledge trust. Just don't do it.","author":"Richard Scholtes"},{"text":"I see people still commenting on this.. .But I don't think people are seeing the added note:\r\n\r\n\"\r\n*Atlassian Update – 9 April 2024*\r\nHello everyone,\r\n\r\nWe appreciate your feedback and comments. Please be assured that we're diligently examining the use cases outlined in this ticket.\r\n\r\n{color:#de350b}*At present, +we've decided not to proceed+ with the removal of this role until we have a deeper understanding.*{color}\r\n\r\nThe upcoming [App Access Rule|https://support.atlassian.com/security-and-access-policies/docs/block-app-access/] functionality appears to be the ideal solution for some of the use cases mentioned. We're also investigating options for more refined app control.\r\nKindly continue monitoring this ticket for further updates.\r\n\r\nThank you.\r\nGrażyna Kaszkur, Product Manager\r\n\"\r\nThis is no doubt the result of some of us who have talked with the Atlassian team, and expressed our deepest concerns. We should have some movement on getting access to application logging sometime soon here as well. They are not as good as they should be about communication and listening yet... but I do believe they are working on it. ","author":"William Wilson"},{"text":"Well William, as long as they still write it in any of the weekly rollout previews, I am still expecting it to happen.\r\n\r\nSo I saw that note in April, but they still say every week that they will do it, that's why I wanted to emphasize that this is still a major problem to customers. ","author":"Richard Scholtes"},{"text":"[~b9f8a477d4a5] - You make a good point. \r\n \r\n... and I did say they were not as good about communicating as they could be. \r\n \r\nThe honest truth though... is that, as a company, they barely have visibility into their own work, and ZERO visibility on their community boards. These conversations are all just...  \"us\". And not \"them\". There's far too much traffic in these comments for them to track each one. \r\n\r\nI believe they are currently trying to hire more community experience folks. But small efforts are either the beginning of big efforts, or they are destined to fail.\r\n \r\nEmail Atlassian. Call them. You undoubtedly have a customer rep. Call that person, and make your concerns heard loud and clear. Then tell all your associates that work with the product to do the same.\r\n \r\nIt's *not* a lost effort. I believe that is how we (potentially) got a stop put to this issue. I have been polite and composed, but relentless. I've managed to have some very civil and productive conversations with management, and I'm speaking with them about the future of our spending with them. At present, they are well aware that I am entertaining other (future) options. The more of us being vocal about walking away, and not spending our money with them, the more invested they will be in what we are asking for. ","author":"William Wilson"},{"text":"How will this impact the migration of projects to other cloud sites?\r\n\r\nWhen i migrate a project to a new cloud, the permissions automatically add an 'atlassian-addon-project-access (MIGRATED)' permission to the project roles and I have to add the 'atlassian-addon-project-access' project role to each permission to ensure my 3rd party apps work (e.g. revyz backups, etc)\r\n\r\nPlease let me know impact of migrated project permissions. \r\n\r\nthanks\r\nh2.","author":"Romy Meyers"},{"text":"Hi Atlassian Team,\r\n\r\nRemoving this is a deal breaker for any of your customers with strict audit requirements. This is particular true for:\r\n * Delete Issue Permission\r\n\r\nThe proposed solution via a Data Privacy Policy is not enough. While needed because not all App Vendors have Data Residency setup, this is not a replacement for the functionality to explicitly prohibit a 3rd Party App to delete issues.\r\n\r\nBest regards!","author":"Andreas Krupp"},{"text":"It is truly surprising that Atlassian claims compliance with GDPR and DORA while permitting vendors to configure setups outside of data residency requirements, such as outside the EU.\r\n\r\nMoreover, when we are compelled to utilize certain functionalities—features that should ideally be available out of the box—vendors often demand extensive permissions for our instances. This creates significant security and compliance challenges during audits.\r\n\r\nRather than concentrating on \"Pokémon look-alike icons,\" we urge Atlassian to prioritize resolving these pressing issues. Thank you.","author":"Mario Coluzzi"}]},{"summary":"Specific combination of words and characters causes Jira Cloud to try and preview a non-existing image","key":"JRACLOUD-81464","url":"https://jira.atlassian.com/browse/JRACLOUD-81464","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nScenario:\r\n * Create a Jira Issue using REST API Version 2\r\n * Use a specific combination of words (be mindful of the two blank spaces below):\r\n ** text(!!) text\r\n ** text!text?!  more text!\r\n ** text?!  more text!!\r\n ** text?!  more text! !\r\n ** Or variations\r\n\r\nThis causes Jira Cloud to try and render an image (which is not present in the description body) - resulting in a _Preview unavailable_ error:\r\n!image-2023-07-14-11-57-57-930.png|width=575,height=244!\r\n\r\nThis also results in data loss - part of the text (between the second and last exclamation marks are lost - as Jira tries to render them as an image).\r\nh3. Steps to Reproduce\r\n # Create a Jira Issue via REST API calls, using the [API's Version 2|https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issues/#api-rest-api-2-issue-post]\r\n # Add a text to the Issue (description) that has that combination of words: _text(!!) text, text!_ or variations\r\n # Check the Issue on your Jira Cloud site\r\n\r\nh3. Expected Results\r\n\r\nA Jira Issue rendering the description text correctly.\r\nh3. Actual Results\r\n\r\nA Jira Issue trying to render an image where there isn't one.\r\nh3. Workaround\r\n\r\nUse the [Jira Cloud REST API Version 3|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-post]\r\nAdditional reference: [Document builder|https://developer.atlassian.com/cloud/jira/platform/apis/document/playground/]","createDate":"2023-07-14T15:10:47.000+0000","comments":[{"text":"We're also experiencing this issue after migrating Jira Server to Jira Cloud. There are several Jira-issues where specific combination of words were replaced by a 'Preview unavailable' tile. \r\n\r\nIn our case, the following text patterns were replaced:\r\n{noformat}\r\n!) some text!{noformat}\r\nWhat's quite interesting, is that all text between the exclamation marks can be found in the data-id attribute of the 'preview unavailable' div's child-element.\r\n\r\nUnfortunately, we couldn't find a workaround to recover the information from the data-id element to the wysiwyg-editor.\r\n\r\n ","author":"Jeroen Stiekema"}]},{"summary":"Project Key duplicated when searching for it in a Gadget","key":"JRACLOUD-81427","url":"https://jira.atlassian.com/browse/JRACLOUD-81427","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen adding a gadget to a dashboard (like Issue Statistics) and searching for a project in your instance, the project keys will show duplicated.\r\n\r\nh3. Steps to Reproduce\r\n# Navigate to [https://<instance>.atlassian.net/jira/dashboards]\r\n# Create a new Dashboard (or access an existing one that you can Edit)\r\n# Add an \"Issue Statistics\" Gadget (or any gadget where you have the \"Project or Saved Filter\" option)\r\n# In the Project filter, type your project name\r\n# Note that the project keys in parentheses are duplicated.\r\n\r\nh3. Expected Results\r\n\r\nProject Key should appear a single time.\r\n\r\nh3. Actual Results\r\n\r\n !image-2023-07-11-13-26-30-902.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2023-07-11T16:27:08.000+0000","comments":[{"text":"{panel:title=Atlassian Update - March 31, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"When updating assignee via \"Edit Issue\" REST API endpoint, and assignee field not on the issue type's Edit screen, site still returns HTTP 204 success response instead of 400 error ","key":"JRACLOUD-81267","url":"https://jira.atlassian.com/browse/JRACLOUD-81267","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the Assignee field is not included on the Edit screen for a given Issue Type, if you attempt to set the assignee for that issue via the API endpoint \"/rest/api/3/issue/EX-1234\", it will fail to update the issue. However, the API will still return a 204 success response, making it unclear whether there was a problem or not.\r\n\r\nAccording to [the API documentation for this endpoint|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-issueidorkey-put-response], the response should be a 400 indicating the field is not able to be edited.\r\n{quote}400 Bad Request\r\n\r\nReturned if:\r\n - the request body is missing.\r\n - the user does not have the necessary permission to edit one or more fields.\r\n - *+the request includes one or more fields that are not found or are not associated with the issue's edit screen.+*\r\n - the request includes an invalid transition.{quote}\r\nThis has been tested with various other system and custom fields, and all returned the expected 400 error if the field was absent from the Edit screen. This behavior has only been reproducible with the \"Assignee\" field.\r\n----\r\nThis is reproducible on Data Center: unknown\r\nh3. Steps to Reproduce\r\n # Remove \"Assignee\" field from the \"Edit\" screen on an issue type\r\n # Send the following payload to an issue using the same issue type:\r\n{code:json}\r\n\"fields\":{\r\n\t\"assignee\": {\r\n\t\t\"id\": \"USER_ID_HERE\"\r\n\t\t}\r\n\t}\r\n}\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nError 400 returned with message \"Field 'assignee' cannot be set. It is not on the appropriate screen, or unknown.\"\r\nh3. Actual Results\r\n\r\nSuccess 204 returned with empty response.\r\nh3. Workaround\r\n\r\nEnsuring the Assignee field is present on the Edit screen of the issue type before submitting the API call should allow the request to actually succeed.\r\n\r\nAlternatively, there is a dedicated endpoint for assigning issues., which will allow updating the assignee of the issue irrespective of the field's presence on the Edit screen. Documentation for this endpoint \r\n[https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issues/#api-rest-api-3-issue-issueidorkey-assignee-put]\r\n\r\nFor example, you would submit the following payload to the endpoint {{[https://your-site.atlassian.net//rest/api/3/issue/EX-1234/assignee]}}\r\n{code:json}\r\n{ \"accountId\": \"USER_ID_HERE\" }\r\n{code}","createDate":"2023-06-09T00:16:30.000+0000","comments":[{"text":"Hi Team, could you please prioritise this ticket? There's an incident raised and we believe it's a duplicate of this bug: https://ops.internal.atlassian.com/jira/browse/HOT-104051","author":"Michelle Zeng"},{"text":"{panel:title=Atlassian Update - June 25, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Custom field type \"Message Custom Field (for edit)\" doesn't show correct default value in context if multiple project is selected.","key":"JRACLOUD-81171","url":"https://jira.atlassian.com/browse/JRACLOUD-81171","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIf we create a custom field of type \"Message Custom Field (for edit)\" and add a context to it with multiple projects. Then, if we set a default value in the context, the GUI will keep showing the default value that's set in the default context.\r\nThe issue is in the GUI. The actual value that's been set is still used in the screens.\r\n \r\nh3. Steps to Reproduce\r\n# create a custom field of type Message Custom Field (for edit) and set a default value in it’s global context.\r\n# Create a second context for the custom field\r\n# Add multiple projects in the second context (has to be more than one).\r\n# The add a default value in the new context and click Set Default button.\r\n# Now, if we go back to Edit the default value, the input box will be pre-filled with the value we set in the Default context.\r\n# However, the actual value is still the one we had set. If we check the created issue screen, we can see the value we’ve set.\r\n\r\nh3. Expected Results\r\nAdditional context shows the correct default value that's been set to the custom field.\r\n\r\nh3. Actual Results\r\nAdditional context shows the default value that's been set in the default context.\r\n\r\nh3. Workaround\r\nInstead of selecting multiple projects in the context, select one project. And, create multiple contexts for each project.","createDate":"2023-05-30T00:25:39.000+0000","comments":[{"text":"Thanks to Nashid to escalate this issue found by my team. We need to show messages for various transition screens from different workflows / projects / issue types. Each with a different message to warn the users which fields are required. As we already have a large set of projects, the messages are various.\r\n\r\nAs for now, due to the problem showing the correct default value of each context (when multiple projects are selected), we cannot use the contextual solution because that makes editing / changing the default value impossible. We adopted a work-around by adding / using a new message for for each of such transition, no context involved. Although it gets the job done, the large amount of message fields is beginning to also cause maintenance headaches.\r\n\r\nNashid suggested to use the approach that each context should have only one project. It works, but the problem is sometimes the same message is shared among several projects (and that's why we originally used the multiple-projects-in-one-context solution which had the UI problem). So this approach is still somehow \"bloated\"... Other than message fields are bloated, now the contexts are bloated, so it's still not ideal.\r\n\r\nThus, my team would hope that your DEV team can fix this issue on Jira's maintenance page of message field which can greatly make our work easier, thank you!","author":"Tony Chu"}]},{"summary":"Sandbox Notifications show up under Bell-icon in Production sites.","key":"JRACLOUD-81129","url":"https://jira.atlassian.com/browse/JRACLOUD-81129","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSandbox Notifications show up under Bell-icon in Production sites.\r\nh3. Steps to Reproduce\r\n # Add same user to production and sandbox\r\n # Do some updates in sandbox that should trigger notifications. \r\n\r\nh3. Expected Results\r\n\r\nNotifications from sandbox should not show up in production.\r\nh3. Actual Results\r\n\r\nNotifications from both sandbox and production will show up\r\nh3. Workaround\r\n\r\nNone for now","createDate":"2023-04-20T09:50:49.000+0000","comments":[{"text":"{quote}{color:#172b4d}Hi Harsaran, {color}{quote}\r\n{quote}{color:#172b4d}Thank you for sharing your feedback with us. Our team appreciates and values ideas on how we can improve the sandbox experience to better meet your needs.{color}{quote}\r\n{quote}{color:#172b4d}We understand that you want to prevent your users from getting notifications coming from the sandbox product(s). We will need time to review the idea and assess the best way to solve it. We’ll keep you posted on any progress on this public issue. {color}{quote}\r\n{quote}{color:#172b4d}Thanks for your patience and support. {color}{color:#172b4d}Cheers{color}{quote}\r\n{quote}{color:#172b4d}Shruti Naryan - SandBox PM{color}{quote}","author":"Shruti Narayan"},{"text":"affects my 1000 Users","author":"Paula Dasch"},{"text":"Jira and Confluence is extremely chatty with their notifications, for both email and the bell icon.\r\nTo the extent where we hear from most users that they either just turn them off or have mail sorting rules just filtering them out.\r\n\r\nWe desperately need better and more options to configure when and which notifications goes out.","author":"Rune Rasmussen"}]},{"summary":"Grant \"Browse Project\" permission to \"Current Assignee\" makes project visible to all users","key":"JRACLOUD-80945","url":"https://jira.atlassian.com/browse/JRACLOUD-80945","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for {*}JIRA Cloud{*}. Using {*}JIRA Server{*}? [See the corresponding bug report|http://jira.atlassian.com/browse/JRASERVER-31720].\r\n{panel}\r\nh3. Summary\r\n # This bug is related to closed bug ticket https://jira.atlassian.com/browse/JRA-31720\r\n # When the Current Assignee is given the Browse Project Permission, other users are able to view this Project.\r\n # They can't necessarily view issues or create issues, but they can see the project from the *View All Projects* page.\r\n # They are also able to see the project name at the project filter on the Issue Search navigator but no issues will be displayed. Only the name of the filter at Projects. When trying to search issues from restricted projects it will show \"No issues were found to match your search\" which is good.\r\n\r\nh3. Steps to Reproduce\r\n\r\n1. ensure to have a Jira instance with several projects e.g 'Project A' and 'Project B' - Done\r\n2. ensure to have at least two different permission schemes e.g. 'Permission Scheme A' and 'Permission Scheme B' - Done\r\n3. ensure to that e.g. 'Project A' uses the 'Permission Scheme A' and 'Project B' uses the 'Permission Scheme B' - Done\r\n\r\n4. ensure that the 'Browse Project' permission is restricted to the appropriate project roles in each permission scheme e.g. to the project role 'Tester' -Done\r\n5. ensure that e.g. 'User A' is assigned as 'Tester' to 'Project A' only, while 'User B' is assigned as 'Tester' to 'Project B' - Done\r\n\r\n6. Add the Current Assignee permission to the Permission scheme A\r\nh3. Expected Results:\r\n\r\nUser A is not supposed to be able to see Project B at all.\r\nh3. Actual Results:\r\n\r\nUser B will see Project A even though doesn't have permission for it.\r\nh3. Workaround\r\n * Remove Current Assignee on Browse Projects Permission\r\n\r\n*Workaround to restrict issue view to 'Current Assignee' and Browse Project to only a specific group of users:*\r\nIf a Project is only relevant to one or several groups\r\n # Add the related groups to the Role(Users) or Role(Developers) and remove unrelated groups that shouldn't see the project.\r\n # Set Browse permissions for the Roles. (Remove 'Current Assignee' from Browse Project permission)\r\n # Use Issue level security to restrict viewing to 'Current Assignee'\r\n*Result:* only groups and users in the Roles within Browse Project permission see the project and Browse only issues Assigned to them.\r\nStep by step instructions to set Security Level at [How to limit user to only browse issues assigned to or reported by them|https://confluence.atlassian.com/display/CLOUDKB/How+to+limit+user+to+only+browse+issues+assigned+to+or+reported+by+them]\r\n\r\nKnowledge Base : [Granting Browse Project permission to 'Current Assignee', 'Reporter' or 'User Custom Field Value' allows all users to view Project information|https://confluence.atlassian.com/jirakb/granting-browse-project-permission-to-current-assignee-reporter-or-user-custom-field-value-allows-all-users-to-view-project-information-586056400.html]\r\n\r\n\r\n{panel:title=PROBLEM RELATED|borderStyle=solid|borderColor=#ff7f7f|titleBGColor=#ff7f7f|bgColor=#e5e5e5}\r\nAs mentioned [on this documentation|https://confluence.atlassian.com/jirakb/granting-browse-project-permission-to-current-assignee-reporter-or-user-custom-field-value-allows-all-users-to-view-project-information-586056400.html] granting the \"Browse Project\" permission to any of the following entities in a project's permission scheme allows all users to view project information, such as the project name, project key, and so on. \r\n* Reporter\r\n* Single user\r\n* Current assignee\r\n* User custom field value\r\n* Group custom field value\r\n\r\nBut this is also happening if we add one of the above to the *{color:red}Administer Projects.{color}*\r\n{panel}","createDate":"2023-04-20T17:00:08.000+0000","comments":[{"text":"+1 [PCS-172000|https://support.atlassian.com/requests/PCS-172000]\r\n\r\nIt's embarrassing that https://jira.atlassian.com/browse/JRACLOUD-31720 was even closed out in 2018.\r\nIt's \"too hard\" to fix so we just gave up?\r\n\r\nThis issue is obviously not as hot/trending as https://jira.atlassian.com/browse/CLOUD-6999 but it's effectively the same theme happening here when bugs aren't easy fixes.","author":"Mark Benson"},{"text":"Yes, pls have this issue fix as soon as possible. i don't think it is a difficult issue but why don't just fix it so that this will not create any more issue to end user here?  ","author":"Coe"},{"text":"This is has a big impact when, like me, you have different providers working on the instance and being able to see projects they should not know existed.\r\n\r\nThis is a Bug as you describe it, so it should have a plan to be fixed.","author":"Sérgio Nogueira"}]},{"summary":"Adding people without admin role in a project gives a misleading message","key":"JRACLOUD-80589","url":"https://jira.atlassian.com/browse/JRACLOUD-80589","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a user *without admin role* in a project tries to add someone to the user, there is a misleading message stating:\r\n{quote}Project roles aren't editable on the Free plan. Upgrade for advanced team configuration.\r\n{quote}\r\nThe error is happening because the user that is trying to add people does not have the Administrator role in the project and {*}should be displayed if the user is a project administrator and also the Jira site is on a Free Plan{*}.\r\nh3. Steps to Reproduce\r\n\r\nThere are different ways to add an user in a Team-Managed project\r\n # Go to Project Settings > People\r\n # Type the email address/name of an user you are trying to invite.\r\n\r\nOr\r\n # From the board, click in the *Add user icon* next to the Search board field.\r\n # Type the email address/name of an user you are trying to invite.\r\n\r\nh3. Expected Results\r\n * {*}Use Case 1{*}:\r\n ** The user is not a project admin and the plan is Standard/Premium/Enterprise, the message displayed should be something like \"Only project administrators can add users, assign or edit roles\".\r\n * {*}Use Case 2{*}:\r\n ** The user is a project admin and the plan is Free, the message displayed is \"Project roles aren't editable on the Free plan. Upgrade for advanced team configuration\".\r\n\r\nh3. Actual Results\r\n * As the user is not an admin and the plan is Standard/Premium/Enterprise, the message displayed is \"Project roles aren't editable on the Free plan. Upgrade for advanced team configuration\" {*}which is misleading{*}.\r\n\r\nh3. Workaround\r\n\r\nIf the Jira site is on a Standard/Premium/Enterprise plan, make sure the user that is trying to add users to the project is a {*}project administrator{*}.","createDate":"2023-02-24T11:21:39.000+0000","comments":[]},{"summary":"In Global permissions, the trusted-user group is shown up as part of the list","key":"JRACLOUD-80526","url":"https://jira.atlassian.com/browse/JRACLOUD-80526","type":"Bug","priority":"","description":"h3. Summary\r\nIt seems that for Confluence and JIRA global permissions, it is shown up in the list as one of the groups.\r\nIt should be a hidden group for trusted-users in the site administration page.\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n\r\nh3. Steps to Reproduce\r\nFor Jira:\r\n# Login to Jira, and go to Global permissions\r\n\r\nFor Confluence :\r\n# Login to Confluence, go to Global permissions\r\n\r\nh3. Expected Results\r\nNo trusted users group\r\n\r\nh3. Actual Results\r\nTrusted user groups shows as part of the list\r\n\r\n\r\nh3. Notes\r\nWe expect the trusted group to be a system group and should be hidden from the list.\r\n\r\nh3.Workaround\r\nCurrently, there is no workaround at the moment","createDate":"2019-05-21T05:40:07.000+0000","comments":[{"text":"Update: Today, only 25% of customers will still experience this issue, as the Trusted User role has been deprecated for 75% of customers. This will continue to fall over time as we build the [new User Admin role|https://community.atlassian.com/t5/Atlassian-Access-articles/Say-hi-to-our-new-user-admin-role/ba-p/1890277] and migrate customers to the [new admin.atlassian.com experience|https://community.atlassian.com/t5/Atlassian-Access-articles/User-management-for-cloud-admins-just-got-easier/ba-p/1576592].","author":"Kieren"}]},{"summary":"Issue history entries for Affects versions and Fix versions fields are misleading","key":"JRACLOUD-80486","url":"https://jira.atlassian.com/browse/JRACLOUD-80486","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the *Affects versions* and *Fix versions* fields are updated such that there are multiple entries added or removed, the issue history entries do not capture the correct values that are present in the field. The history entry is updated with 'None -> XXXX' or 'XXXX -> None' which is misleading and confusing for the user.\r\nh3. Steps to Reproduce\r\n # Create a Jira Software project\r\n # Create two different versions. For e.g.; 1.0 and 1.1\r\n # Create a ticket and update the *Affects versions* field with 1.0\r\n ** The history entry shows *None -> 1.0* (which is correct)\r\n # Update the *Affects versions* field with 1.1 (now, the field contains 1.0 and 1.1)\r\n ** The history entry shows *None -> 1.1* (which is incorrect because the field was not empty. It should ideally show 1.0 and 1.1)\r\n # Remove the version 1.0 from the *Affects versions* field so that only 1.1 is present\r\n ** The history entry shows *1.0 -> None* (which is incorrect because 1.1 is still present)\r\n # Remove the version 1.1 from the *Affects versions* field so that the field is now empty\r\n ** The history entry shows *1.1 -> None* (which is correct because the field is now empty)\r\n\r\nh3. Expected Results\r\n\r\nThe issue history entries should still show the remaining values that are present in the *Affects versions* or *Fix versions* field instead of showing 'None'\r\nh3. Actual Results\r\n\r\nThe issue history entries do not capture the existing values of the *Affects versions* or *Fix versions* field.\r\n\r\nThe REST API changelog endpoint also does not capture the remaining values in the fields.\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-02-10T02:41:17.000+0000","comments":[{"text":"The Sprint field has these same challenges with the change log entries.  The fromString and toString seem more reliable, but still not fully accurate when the field changes values several times.","author":"Bill Sheboy"},{"text":"Any updates on fixing this changelog problem in automation rules?\r\n\r\nThanks!","author":"Bill Sheboy"},{"text":"Please make an enhancement on this ! This BUG makes my work more time consuming!","author":"Antoni Bobiński"}]},{"summary":"Editing the link name \"Cloners\" prevent link creation while cloning issues","key":"JRACLOUD-80403","url":"https://jira.atlassian.com/browse/JRACLOUD-80403","type":"Bug","priority":"","description":"h3. Summary\r\nWhen you edit the link name of \"Cloners\", the default clone link, if you try to clone an issue the link between the original issue and the cloned one won't be created, but the Cloned issue will.\r\n\r\nh3. Steps to Reproduce\r\n# Go to Cog > Issues > Issue linking\r\n# Click on Edit near to *Cloners* and change it to +Clone+ (for example)\r\n# Click on Save\r\n# Try to clone any issue\r\n\r\nh3. Expected Results\r\nA clone issue should be created with a link to the original issue.\r\n\r\nh3. Actual Results\r\nA clone issue is created but the link between both Jira issues isn't generated.\r\n\r\nIf editing the original link breaks the link creation while cloning an issue, it shouldn't be possible to edit the original config. This may also affect apps, such as [Zephyr Scale - Test Management for Jira|https://marketplace.atlassian.com/apps/1213259/zephyr-scale-test-management-for-jira?tab=overview&hosting=cloud].\r\n\r\nh3.Workaround\r\nRename that Link Type to *\"Cloners\"* once again.","createDate":"2023-01-26T15:18:03.000+0000","comments":[{"text":"This has affected our instance since we had renamed the link type for clarity: there's absolutely no documentation or warnings that doing so would result in this behaviour!","author":"Paul Cribdon"},{"text":"We accidentally stumbled on this when we changed the link type names to get them to sort in a better order. \r\nSee [JRACLOUD-35002|https://jira.atlassian.com/browse/JRACLOUD-35002]\r\nUnfortunately that was closed last year :-(","author":"Dwight Holman"}]},{"summary":"Issue collector ignores the default value set for a customfield in Jira","key":"JRACLOUD-80329","url":"https://jira.atlassian.com/browse/JRACLOUD-80329","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssue collector ignores the default value set for a custom field in Jira.\r\nh3. Steps to Reproduce\r\n # Create a custom field, for example: 'First Answer'\r\n # Set the default value for the field 'First Answer'\r\n # Remove the field 'First Answer' from create-issue screen for the issuetype used to set the issue collector\r\n # Mark the field mandatory via field configuration associated with the project.\r\n\r\nh3. Expected Results\r\n\r\nThe issue collector should consider the default value set for the field 'First Answer' and successfully create the issue for the given feedback.\r\nh3. Actual Results\r\n\r\nIssue collector ignores the default value set for the field 'First Answer' rather than considering the field is mandatory & missing from create screen. \r\nThis happens because the issue collector search for all the fields for the selected issuetype. There is a warning appears under 'Embedding this issue collector'\r\n\r\n!image-2023-01-11-16-36-23-836.png|width=854,height=112!\r\n\r\n \r\n\r\nThe below error appears on the issue collector:\r\n{noformat}\r\n[04/10/2021 10:54:05] Required fields not present or fields too long in collector 'Test BS issuecollector' invoked from '*.*.*.*' by Mona Sood.{noformat}\r\n!Screenshot 2023-01-11 at 4.11.34 PM.png|width=786,height=67!\r\n\r\n \r\n\r\n \r\nh3. Workaround\r\n\r\nThe possible workaround is to add the required field on the create-issue screen or create a separate field configuration without marking 'First Answer' required.","createDate":"2023-01-11T23:22:32.000+0000","comments":[]},{"summary":"Using middle click to open a linked issue in the new issue view duplicates opened link in Firefox","key":"JRACLOUD-80141","url":"https://jira.atlassian.com/browse/JRACLOUD-80141","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nUsing the middle click of a mouse in Firefox browsers can be configured in order to automatically open that link to a new tab. about:config setting\r\n{code:java}\r\nbrowser.tabs.opentabfor.middleclick\ttrue \r\n{code}\r\nHowever when you then use the middle click to open an issue link in the new issue view, you get 2 tabs instead of 1. Both tabs load that linked issue, but this is redundant and should not be happening.\r\n\r\nIf you have\r\n{code:java}\r\nbrowser.tabs.opentabfor.middleclick\tfalse\r\n{code}\r\nset, then using the middle click on an issue link is still able to open the link in a new tab. In that case that behavior is not expected to happen.\r\n\r\nHowever everywhere else within the new issue view appears to honor this middleclick setting as expected.  It only appears that the issue link has a buggy behavior here.\r\nh3. Environment\r\n * New issue view\r\n * Firefox\r\n\r\nh3. Steps to Reproduce\r\n # Create an issue using the new issue view\r\n # Link that issue to some other issue in the same Jira site\r\n # use the middle click of your mouse to click that issue link\r\n\r\nh3. Expected Results\r\n # IF browser.tabs.opentabfor.middleclick = true \r\nThen\r\nWe expect that linked issue will be opened in a single new tab\r\n # IF browser.tabs.opentabfor.middleclick = false\r\nWe expect nothing to happen as this should not open links\r\n\r\nh3. Actual Results\r\n # IF browser.tabs.opentabfor.middleclick = true \r\nThen\r\nWe get 2 tabs with that issue link instead of one.\r\n # IF browser.tabs.opentabfor.middleclick = false\r\na new link is still opened once when it shouldn't be opened at all.\r\n\r\nh3. Notes\r\n\r\nOnly appears to affect Firefox so far in testing, Chrome does not do this, and safari has been inconsistent in results.\r\nh3. Workaround\r\n\r\nreverting to the old issue view does not exhibit this bug behavior","createDate":"2022-11-21T23:15:48.000+0000","comments":[{"text":"This needs to be prioritised by the dev team as a bug, not a suggestion.","author":"Zabed Ibne Emdad"},{"text":"Also, using the middle click on an issue link after enabling about:config setting\r\n\r\n{code:java}\r\nbrowser.tabs.loadDivertedInBackground       true\r\n{code}\r\n\r\nopens two tabs in the background, not one, as it would with the default\r\n \r\n{code:java}\r\nbrowser.tabs.loadDivertedInBackground      false\r\n{code}","author":"Tuomas Pyyhtiä"},{"text":"I heavily use middle-clicking to open pages in another tab. In 20+ years of browsing the web, it has become second nature to me. It works everywhere … except in Jira, when middle-clicking an issue from a list. Frustrating is the least of the words I would describe it with. Why mess with standard browser behavior?\r\n\r\nPlease fix this.","author":"Mirko Ellinger"},{"text":"This is affecting me as well.  do i upvote it or what?","author":"Blaise Swanwick"},{"text":"Oh I figured it out.  upvoted.  Middle-clicking a Jira Ticket # from the ticket details page, or the board, should not open the same issue in two browser tabs.","author":"Blaise Swanwick"},{"text":"Appears to be fixed in JRACLOUD-81294, and they're rolling out the fix.\r\n\r\nVerified with stock Firefox 125.0.2 and by running it with flag -p -no-remote for empty profile:\r\n\r\nBoth epic child issues and issue sub-tasks open on middle-click to new tab and in background.","author":"Tuomas Pyyhtiä"}]},{"summary":"Team-managed custom fields can be seen in the Field configurations","key":"JRACLOUD-79936","url":"https://jira.atlassian.com/browse/JRACLOUD-79936","type":"Bug","priority":"","description":"h3. Issue Summary\r\nTeam-managed custom fields can be seen in the Field configurations\r\n\r\nh3. Steps to Reproduce\r\n # Create a field in a *team-managed project*\r\n # Check the field configuration in a project (Project settings > (Issues) Fields\r\n\r\nh3. Expected Results\r\nThe field which was created in {*}Team managed{*}, should not be seen in the *default field* configuration which confuses the customer.\r\n\r\nh3. Actual Results\r\nThe Team managed custom field is shown in the default field \r\n\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-10-13T07:22:05.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/JST-945630","author":"Meghashrita Kashyap"},{"text":"I just spent the better part of an hour trying to figure out where some fields were because I was seeing them in a company-managed project's field config, but couldn't see them under Settings>Issues>Custom Fields. These really shouldn't be showing up anywhere other than the team-managed project they were created under. ","author":"Dusty"}]},{"summary":"Menu bar on Jira Software Reports has a project overlap ","key":"JRACLOUD-79729","url":"https://jira.atlassian.com/browse/JRACLOUD-79729","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen scrolling down the menu on a Jira Software company-managed project the project type label overlaps the last report menu option.\r\n\r\nh3. Steps to Reproduce\r\nOpen Chrome/Firefox on macOS or Ubuntu\r\nOpen a company managed Jira Software project\r\nAccess the Reports menu\r\nScroll down to the last menu option\r\n\r\nh3. Expected Results\r\nThe project type label was expected to be below all menu options\r\n\r\nh3. Actual Results\r\nThe project type label overlaps the last menu option\r\n !image-2022-08-31-12-37-19-929.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-08-31T15:37:36.000+0000","comments":[{"text":"This will be fixed with the [new navigation coming to Jira over the coming months |https://community.atlassian.com/forums/Navigation-Refresh-articles/Atlassian-s-new-navigation-General-availability/ba-p/2974657]","author":"Josh Carolan"}]},{"summary":"\"(New label)\" option is always visible, even if a typed label has an exact match among suggestions","key":"JRACLOUD-79629","url":"https://jira.atlassian.com/browse/JRACLOUD-79629","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nLabels field always rendering create option at the bottom, even if input text have exact match among fetched suggestions (see screenshot).\r\n!Screenshot 2022-08-09 at 7.04.46 PM.png|thumbnail! \r\n\r\n \r\nh3. Steps to Reproduce\r\n# Add a label for an issue.\r\n# Open a new issue and search for the same label, search box shows existing label and also an option to create a new label with same name.\r\n\r\nh3. Expected Results\r\nOnce input has an exact match among the fetched labels, Jira shouldn’t offer to create a new label, but just show it as one option to select from.\r\n\r\nh3. Actual Results\r\nAn option to create a new label with same name appears in search result. Although create new option is not creating a duplicate, but just behaves similarly to select one however the information shown on the UI is misleading.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-08-10T08:51:02.000+0000","comments":[{"text":"{panel:title=Atlassian Update - August 9, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Emails are sent from jira@mail-us.atlassian.net on behalf of jira@<sitename>.atlassian.net","key":"JRACLOUD-79564","url":"https://jira.atlassian.com/browse/JRACLOUD-79564","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSome new updates at Atlassian Email end causing outgoing notifications to be sent from _jira@mail-us.atlassian.net on behalf of jira@<sitename>.atlassian.net_\r\nThis is happening only for the projects where the default outgoing email address is used to send the notification.\r\nh3. Steps to Reproduce\r\n # Make sure that the notification address is selected as _jira@<sitename>.atlassian.net_ in *Project Settings > Notifications* \r\n # Trigger a notification from a ticket\r\n\r\nh3. Expected Results\r\n\r\nThe email is sent from _jira@<sitename>.atlassian.net_\r\nh3. Actual Results\r\n\r\nThe email is sent from _jira@mail-us.atlassian.net on behalf of jira@<sitename>.atlassian.net_\r\nh3. Workaround\r\n * Use a custom email address to send the notifications as suggested here: [steps for setting up custom email addresses|https://support.atlassian.com/organization-administration/docs/what-are-the-steps-for-setting-up-custom-email-addresses/].","createDate":"2022-07-28T04:33:50.000+0000","comments":[{"text":"[~157cb8ea75c4] , thank you for raising this issue. This is still impacting us negatively, any updates here regarding when this issue will be assigned and investigated? ","author":"dschuster"},{"text":"Any updates here [~157cb8ea75c4] ","author":"dschuster"},{"text":"We are sometimes running into this issue in our organization. For the time being we have had to whitelist [jira@mail-us.atlassian.net|mailto:jira@mail-us.atlassian.net] in our environment to allow emails to come through when this bug rears it's ugly head.\r\n\r\nWish Atlassian had an update on this issue considering the age of when it was reported.","author":"Matt Baillargeon"}]},{"summary":"team-managed Projects in Trash Prevent Backup For Server","key":"JRACLOUD-79397","url":"https://jira.atlassian.com/browse/JRACLOUD-79397","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you move a next gen project to to the Trash and then attempt to generate a backup for server the backup manager does not display the trashed project in the list of next gen projects but the backup for server button is still disabled.\r\nh3. Steps to Reproduce\r\n # Create a next gen project\r\n # Move it to the Trash\r\n # Visit the Backup Manager Page\r\n # Note the projects absence from the next gen project list\r\n # Attempt to generate a backup for server\r\n # You can't, the button is disabled\r\n\r\nh3. Expected Results\r\n\r\nEither the backup should exclude trashed next gen projects or otherwise at least display them in the next gen project list. Also, clicking the 'Delete all next gen projects' does not remove next gen projects in the trash.\r\nh3. Actual Results\r\n\r\nYou can't generate a backup until the trashed Next-Gen project is permanently deleted from the trash.\r\nh3. Workaround\r\n\r\nDelete the next gen project(s) from *Jira Settings* -> *Projects* -> *Trash*","createDate":"2020-06-05T23:31:10.000+0000","comments":[{"text":"Another unintended consequence is that projects in Recycle Bin reappear when restoring on Server, but attachments are missing. Either these projects should not be included at all or they should be included with attachments for consistency.","author":"Artem Fomin"},{"text":"If this bug isn't going to be resolved for years, it would be good to mention the (necessary) workaround in the documentation for doing migrations such as\r\n\r\n[https://confluence.atlassian.com/jirakb/merge-multiple-instances-of-jira-cloud-779160767.html#MergemultipleJiraCloudsites-UsetheJiraCloudMigrationAssistantviaJiraDataCenter]\r\n\r\nTo the best of my knowledge, none of the documents referenced on that page makes any mention of the Trash bug, even where they direct you to convert team-managed projects to company-managed and then take a Backup for Server.","author":"Edward Iskra"}]},{"summary":"Turning the Product recommendations OFF has no effect","key":"JRACLOUD-79285","url":"https://jira.atlassian.com/browse/JRACLOUD-79285","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter disabling the *Product Recommendations* in the *System* settings, products are still being recommended for the users.\r\n\r\nTurning off the Product recommendation from the link [https://admin.atlassian.com/s/<site-id>/billing/addapplication?requestproductoptout=false|https://admin.atlassian.com/s/a7d30d89-fe73-43e9-91b7-62798d670e02/billing/addapplication?requestproductoptout=false] also does not work.\r\nh3. Steps to Reproduce\r\n # Jira Settings > System > General Configuration\r\n # The Product Recommendation is OFF with no way to edit it.\r\n\r\nh3. Expected Results\r\n\r\nWith the setting disabled, we expect that no in-product recommendations in Jira Cloud will appear for admins and end-users.\r\nh3. Actual Results\r\n\r\nCurrently, regardless of the setting disabled, customers can still see in-product recommendations, more specifically for the below products:\r\n * Compass\r\n * Jira Service Management\r\n * Atlas\r\n * Jira Product Discovery\r\n\r\nAside from the in-product recommendations, under Apps, end users can still request for apps and can see the option \"Recommended for your Team\"\r\nAs a side-effect, this is resulting in Admins receiving unwanted product requests from end users.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\n\r\n \r\n\r\n ","createDate":"2022-06-28T21:08:11.000+0000","comments":[{"text":"The product suggestions are really disturbing all our users. It is important to turn them off.","author":"Ralf"},{"text":"Not sure if this is within the scope of the issue but it should also be possible to disable features we have not purchased:\r\n * Confluence pages tab in team-managed projects\r\n * Project templates relating to other Atlassian products such as Jira Service Desk\r\n\r\nThese lead to confusion with our end users when they try to activate such products.","author":"Ben Robbins"},{"text":"I contacted support about this, and they suggested I report this issue here. I don't want to see advertisements within our tool. This setting should allow us to disable the incessant Atlassian Teams advertisements:\r\n\r\n \r\n\r\n!image-2023-04-13-08-47-18-176.png!\r\n\r\n!image-2023-04-13-08-48-46-483.png!","author":"Bryan Kennedy"},{"text":"Here are links to the two screenshots I was trying to share:\r\n\r\n[https://app.screencast.com/TlcseUn8gAnLt]\r\n\r\n[https://app.screencast.com/5pmpiGZcRE73k]\r\n\r\n ","author":"Bryan Kennedy"},{"text":"This is a real put off for the tool as we are spending so much money and we still get faced with advertising yet more products to buy - this is not professional. ","author":"Rob Duncan"},{"text":"it's horrible for the UX that we can't turn this off. Also for the tool acceptance it's really not advantage..","author":"Eva Rehn"},{"text":"Hi there, I’m Soomin, a designer working on Atlassian’s Ad controls. Thank you for the feedback and we hear you on your frustration and are working to have this resolved. Unfortunately, there’s no way to turn this surface off at the moment. However, we do have this control prioritized and we can let you know once it ships.","author":"Soomin Lee"},{"text":"Product recommendations is confusing and time consuming for our organisation. We have processes in place for improving the system and want to have it visible in our Sandbox (test environment) but we really need to be able to disable this in Production. ","author":"Anne Mari Nedevska"},{"text":"The product suggestions are really disturbing all our users. It is important to turn them off.","author":"Ronnie"},{"text":"Would this also tie to ads that pop up on the right side of the screen?  The one I currently have is for Product Discovery with two options at the bottom for \"Request to try\" or \"Learn More\"?\r\n\r\nI can click the ellipsis and select \"I'm not interested\", in which it comes back a few days later.  Anyone know how to kill those as well?","author":"Clay Nelson"},{"text":"This is similar to the references to Atlassian Intelligence being all over the place even when it's disabled ([AI-1|https://jira.atlassian.com/browse/AI-1]). I understand this is different in the back end, however in both situations the two key points are the same:\r\n * Stop advertising to end users (better yet, stop all advertising within the product)\r\n * Disabling a feature must disable it completely and permanently\r\n\r\nHere are some explanations in case the rationale is not clear:\r\n\r\n+*Stop advertising to end users*+\r\n * End users are usually the least informed party regarding business decisions, so should not be prompted to initiate business decisions (i.e. get the cool new toy)\r\n * An organisation adopting a product feature is a significantly more complex process than simply being aware of a feature's existence\r\n * Administrators are the only audience who should _ever_ see product recommendations (and this should be {*}opt-in{*})\r\n\r\n+*Disabling a feature must disable it completely and permanently*+\r\n\r\nThis should be self-explanatory, but in case it's not here are some excerpts from the [dictionary.com definition of the word \"off\"|https://www.dictionary.com/browse/off] (as in \"turn it off\"):\r\n{quote}adverb\r\n1. so as to be no longer supported or attached:\r\n    _This button is about to come off._\r\n9. out of operation or effective existence:\r\n    _Turn the lights off._\r\n{quote}\r\n \r\n{quote}preposition\r\n20. so as no longer to be supported by, attached to, on, resting on, or unified with:\r\n    _Take your feet off the table!_\r\n    _Break a piece of bread off the loaf._\r\n{quote}\r\n \r\n{quote}adjective\r\n35. no longer in effect, in operation, or in process:\r\n    _The agreement is off._\r\n36. stopped from flowing, as by the closing of a valve:\r\n    _The electricity is off._\r\n{quote}\r\nHopefully this explains the situation a bit more.","author":"BenM"},{"text":"Hi,\r\n\r\n \r\n\r\nplease have this bug fixed as soon as possible. Our own employees and our clients are frustrated by any form of ads in a paid software. This is the worst idea for professional software we have ever seen.\r\n\r\nWe understand that people are proud of stuff they build and that they want them to be used. But right now, being on a standard plan feels like a magazine with more ads than articles or a webpage financed through advertising.\r\n\r\nThis is just unprofessional and should this stuff continue people are considering moving to different products from more professional vendors.\r\n\r\nTo set the scope of ads I am talking about:\r\n * Confluence\r\n ** Functions in premium plan (e.g. calendars or automation) in the sidebar (some can be turned off, but this needs to be done space by space, frustrating work for admins)\r\n ** Products in the search bar (e.g. compass or AI)\r\n ** Additional Apps in the app menu\r\n ** Space permission page (for premium plan)\r\n * Jira\r\n ** Products in the search bar (e.g. compass or AI)\r\n ** Additional Apps in the app menu\r\n ** Plans & Assets in the main menu bar (stuff only available in premium plan)\r\n ** Compass in components page\r\n\r\nThank you for your understanding!","author":"Sebastian Albrecht"},{"text":"As much as Atlassian Product and Engineering may frustrate me at times, _Support_ is almost uniformly lovely and has been able to at least shed some light here. Specifically:\r\n * The opt-out functionality that does exist is indeed bugged.\r\n * There are ads and ad units which can either \"opt-out of the opt-out\", or are not included in its scope in the first place...so even when this bug is fixed, it's not going to allow us to actually \"turn of the ads\", just some sub-set.\r\n * None of this currently, or apparently will, touch the more \"native advertising\" like the AI buttons embedded all over the place.\r\n * Atlassian seems to be treating every type of ad and feature team doing it as unique and independent, so as of now it doesn't seem like there's going to _be_ a way to disable this whole-hog.\r\n\r\nI encourage anyone interested in this to put in Support tickets and use the \"Send Feedback\" options liberally to express your thoughts and feelings. I can't say it pays a _lot_ of attention, but the Eye of Atlassauron does at least occasionally peek at these.\r\n\r\nMaybe.\r\n\r\nThe OTHER thing Support can do for you is opt people out of these on a per-user basis. We are running a test with it right now as it seems to be new\\unstable functionality, but so far no issues and more importantly NO ADVERTISING IN A PRODUCT WE PAY A LOT OF MONEY TO USE. If we are able to apply this instance-wide with no issues, I'll update here to confirm.","author":"Haddon Fisher"},{"text":"Hundreds of thousands of dollars in spend and the button to turn off advertising doesn't work? Our goal is to keep our system simple and unified, but it's still recommending new apps to users. JSM projects show up when Creating a new Project as \"Try this template!\" but it directly undermines our deliberate decision, as a company, to use a different ITSM.\r\n\r\nThis should have been fixed as soon as it was raised.","author":"Matthew Krohn"},{"text":"As usual, an unacceptable, embarrassing \"oversight\" on Atlassian's part. Astounding how this company manages to so consistently ruin or fail to improve their products. It's actually impressive to some extent. ","author":"David Aguilera"},{"text":"Hi team thanks for your interest in this ticket. We are planning to address this issue next financial year (June '24 -> June '25) as part of an overhaul to our messaging and recommendations system, which will include a new recommendation preferences experience that will allow you to control this surface (and others in product).\r\n\r\nThanks, and stay tuned for more updates.","author":"Alexander Edholm"},{"text":"This isn't something that's part of an overhaul, though, this is a pretty bad bug that creates a nightmare for those of us trying to keep our Atlassian system complexity and billing in check. Which, I suppose, isn't Atlassian's problem.","author":"Matthew Krohn"},{"text":".","author":"Haddon Fisher"},{"text":"[~c8de85913909] given that no one really wants these ads in the first place, can they just be blanket disabled while you figure out the next move? Because otherwise the picture is...\r\n # Atlassian rolls out in-app advertising to paying customers\r\n # When customers complained about it, y'all agreed it needed fixing and implemented a \"disable ads\" button\r\n # When customers pointed out that the button did nothing, ya'll agreed it was broken\r\n # Now you're saying \"well, it _is_ broken...but we've decided it's not worth fixing until something higher priority comes along.\"\r\n\r\nMaking us suffer because y'all screwed up and don't have a solid plan to fix it is the opposite of not f*&%*& the customer.\r\n\r\nAlso, for what it's worth...\r\n{quote}an overhaul to our messaging and recommendations system, which will include a new recommendation preferences experience that will allow you to control this surface (and others in product).\r\n{quote}\r\nsounds like maybe you're missing the point here. I would surmise a lot of people, starting with the ones who've commented on this thread, would be able to articulate it better than I, but I am here as well if you want to chat!\r\n\r\nEDIT: Just saw this note from September 18th, 2023...sigh...\r\n{quote}Hi there, I’m Soomin, a designer working on Atlassian’s Ad controls. Thank you for the feedback and we hear you on your frustration and are working to have this resolved. Unfortunately, there’s no way to turn this surface off at the moment. However, we do have this control prioritized and we can let you know once it ships.\r\n{quote}","author":"Haddon Fisher"},{"text":"Hi all, I apologize for the frustration around this issue.  We are looking into how to best resolve this issue.  I want to confirm the expected behavior you have for turning off recommendations.  As an admin, would you expect recommendations to be turned off for all users, or just at the user level?  ","author":"Lindsay Smith"},{"text":"@Lindsay Smith\r\n\r\nAre you genuinely having difficulty understanding the issue here and how to resolve it? I think that your question is a perfect example of the problem: A company of people who don't possess reading comprehension or critical thinking skills. Or perhaps you simply do not use your own products? \r\n\r\n\"As an admin, would you expect recommendations to be turned off for all users, or just at the user level?\" What does this even mean???\r\n\r\n\r\n\r\nJust blanket, across the board, turn that shit off. No one asked for it. As an admin I don't want popups or tool tips advertising in the system, and I certainly don't want it for my users. We know exactly what you are doing: You want to advertise new toys to our users, so that they ask for them and we end up spending more time and money fulfilling their whims. It's like direct advertising to consumers prescription medications - stop it. The users don't know what they want.\r\n\r\nStop waffling. Stop stalling. Turn them off.","author":"David Aguilera"},{"text":"Since it's a toggle in system settings it should be applicable to all users not a group.","author":"Andrei Bacanu"},{"text":"Hi [~lsmith2@atlassian.com] - I would love if you could clarify your question a bit since it is a little ambiguous, but to try and tackle your request...\r\n * \"As an admin, I should be able to disable this in all places for all users in a single click\" is the most baseline need. The majority of people will want to achieve that end-state, so making them go through hoops like assigning this via groups or other methods is pointlessly burdensome.\r\n * \"As an admin, I should be able to disable this in all places for all non-site admin users and site admins independently\" feels like a nice-to-have, because if there was a __ group who would want these kinds of notifications it would be the site admins. Again, I don't think there is a purpose in tying \"all non-site admins\" to groups for the same reason as above, but I could potentially see some site admins choosing to receive these ads instead of other types of notifications about new Atlassian products. Maybe.","author":"Haddon Fisher"},{"text":"Turn the crap commercials off for everyone - once and for all!","author":"Peter Fjelsten"},{"text":"It's really unpleasant and even unethical to push unsolicited advertisements to users. This is a terrible design choice, especially in a paid product. It is critical and represents not only a bug but also a demonstration of unethical marketing behavior.\r\n\r\n \r\n\r\nThis is really critical and it's clearly hurting Atlassian's image. This should be addressed with the utmost priority.","author":"Lorenzzi Bassoto"},{"text":"[~lsmith2@atlassian.com]\r\n\r\nYou are either overthinking this or stalling. I choose to believe the latter and therefore recommend you go for turning it off for all users. Then you can sort your stuff out after that if you want to make a fancier solution but what we are facing now is not what we paid good money for. ","author":"Anne Mari Nedevska"},{"text":".","author":"Haddon Fisher"},{"text":"[~f65f0c48733b], I'm pretty sure Atlassian stopped using their own tools right around the time they went public. The bean counters probably thought giving everyone a licence was too expensive.","author":"Haddon Fisher"},{"text":"[~haddonfisher] \r\n\r\nAny update on the per user opt out functionality mentioned in your post of Feb 02?\r\n\r\nThanks","author":"Peter Krismer"},{"text":"Hey [~00c3f9d3813a] - they ended up being able to opt our entire instance out - there are still some things that make it through (the in-text prompts to enable the AI functionality came back on Monday, as example) but I haven't seen a \"Can we interest you in new ways to eat glass?\" pop-up in a while!","author":"Haddon Fisher"},{"text":"That is an interesting development [~haddonfisher]! I will be raising a support ticket.","author":"Ben Robbins"},{"text":"Any news on this one? Our users keep clicking on \"Plans\" and \"Product Discovery\", which is clearly not what we're paying for (simply because we don't need it). [~c8de85913909] - an update on the time frame would be highly appreciated. I noticed you worked on this ticket a few hours ago.","author":"André Bonhôte anb"},{"text":"Got another request today for Jira Service Management.","author":"André Bonhôte anb"},{"text":"We recently started using Jira. How is it possible that something like this has been open since 2022?\r\nEspecially all the random \"activate AI now\" prompts all over the place inline in issues and as buttons in issue lists are really annoying.\r\n\r\nNot even mentioning all the \"buy this addon, buy that addon\" which I accidentally click on all the time as a new user.\r\n\r\n\r\n\r\nThere is no way we can use that AI feature which sends all the data over to OpenAI where we don't know what happens with it. Just let me opt the org instead of pushing it to half my users in every issue.","author":"Simon H. Hellmann"},{"text":"This continues to be a very poor customer experience, both from a UI/UX perspective and a customer service perspective.  It is unbelievable that Alex will let this issue persist when there is an outcry of requests to stop this Atlassian spamming from happening.  All the issues I am experiencing are captured in [https://support.atlassian.com/requests/CES-42155.|https://support.atlassian.com/requests/CES-42155]\r\n\r\n \r\n\r\nThe spamming needs to stop, now.  ","author":"John Kissel"},{"text":"Below are examples of the types of promotions that will be disabled by the opt out today. Over 500 different messages are affected, covering the majority of \"popups\" at Atlassian. However, some may still be missed. Let us know if you have opted out and are still seeing these. Thanks!\r\n\r\n*\"Flag\" popups*\r\n\r\n!image-2024-08-02-12-24-10-599.png!\r\n\r\n\r\n\r\n*\"Modal\" popups*\r\n\r\n!image-2024-08-02-12-24-21-770.png!\r\n\r\n*\"Wide banner\" popups*\r\n\r\n!image-2024-08-02-12-24-13-963.png!\r\n\r\n*What's coming next:*\r\n\r\nWe are working on the App Switcher \"Recommended for You\" section, followed by recommendations on the \"Your Work\" page in Jira.","author":"Alexander Edholm"},{"text":"Still seeing product recommendations coming in.  Problem is not resolved.  Attaching another screenshot. !image-2024-08-13-08-40-01-929.png!","author":"John Kissel"},{"text":"Still seeing product recommendations coming in.  Problem is not resolved.  ","author":"John Kissel"},{"text":"Unable to attach images to this ticket any longer.  Just FYI, just this morning alone, I have received 6 spam/product recommendations via the calls to action within Jira.  Whatever is being done on your side is not working.","author":"John Kissel"},{"text":"We continue to receive spam notifications despite the recent settings change.  ","author":"John Kissel"},{"text":"Good to see some progress on this, is there an ETA for the next areas?\r\n * App Switcher \"Recommended for You\" section\r\n * \"Your Work\" page in Jira.\r\n * Recommendations in \"Apps\" dropdown\r\n\r\nWill we need to raise a new request for these parts when rolled out or will it fall under the same rules applied for disabling the pop ups?","author":"Ben Robbins"},{"text":"I also recommend that placing this link to switch off shall act like a switch. you would expect a ON/OFF symbol like all other switches on top, but it is merely a link. Not very good UI design.","author":"Carsten Schäfer"},{"text":"This feature is one of the worst things Atlassian has created. How can you offer something that allows regular employees to simply create new subscriptions, bypassing accounting, approvals, and more?","author":"Alexander Ruch"},{"text":"My users are now seeing links to ROVO in Jira and Loom in Confluence. How can I get these removed?","author":"Paul Biagio"},{"text":"we have received the following reply. its a joke.\r\n\r\n \r\n{code:java}\r\nElaine29/Nov/24 08:58 AM\r\nHi Alexander, Thank you for your patience and understanding.We have received feedback from the support team and they have confirmed that this option is only available for our Cloud Enterprise customers.This is a restricted feature available to Enterprise customers at the moment. Hope this explains why the feature can't be removed at the moment.Best Regards,Elaine\r\nScaled Sales Associate - EMEA {code}\r\n ","author":"Alexander Ruch"},{"text":"[~9c22904e9928] at least the ticket was not marked resolved ;)\r\n\r\nHard for me to replicate the thinking of the minds that decided: Enterprise only.....could Atlassian elaborate, why this is being staged from top to down (assumption)? Is it the workflow at Atlassian? Is it the implementation infrastructure that makes this approach \"reasonable\"?\r\n\r\nI did not expect the Spanish inquisition!","author":"Carsten Schäfer"},{"text":"This needs to be resolved! It is incredibly frustrating to receive requests from users to activate licences on items without any management oversite or alignment. This wastes time for Atlassian admins. ","author":"Robert Eiser"},{"text":"[~c8de85913909]  - Let me get this straight, you are asking customers to submit a support ticket to have additional functionality installed to prevent popups?  Something doesn't seem right here.  This entire process is incredibly backwards and I am not seeing the progress that I would expect from a company as big as Atlassian.  ","author":"John Kissel"},{"text":"[~c8de85913909]  Highest priority and soon three years since created. It is a joke. Of course you want to keep this \"bug\" unsolved. You make money on it. But it is a big problem for us administrators and most of us have influence on which case management system our companies choose, so please fix A.S.A.P.","author":"Hans Ekdahl"}]},{"summary":"Upon site creation Resolution has duplicated resolutions","key":"JRACLOUD-79002","url":"https://jira.atlassian.com/browse/JRACLOUD-79002","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUpon site creation Resolutions have duplicated resolutions. This affects only newly created JSM standalone projects. Also this bug was seen on the site created on 15-Feb-2022. \r\nh3. Steps to Reproduce\r\n # Create new JSM standalone site;\r\n # Check Resolutions (Settings - Issues - Resolutions). \r\n\r\n\r\nh3. Expected Results\r\n\r\nNo duplicated resolutions in the list of resolutions\r\nh3. Actual Results\r\n\r\nDuplicated resolutions are shown in the Resolution. \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available. \r\n\r\n ","createDate":"2022-05-09T13:50:50.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 11, 2024|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"},{"text":"Your \"Workaround\" isn't valid for certain values (like \"Done\") - Jira pipes up with -\r\n{code:java}\r\nThe 'Done' resolution is a system managed resolution and cannot be deleted.{code}","author":"Kai Berberich"}]},{"summary":"Resetting JIRA doesn't re-create its global permissions correctly.","key":"JRACLOUD-78609","url":"https://jira.atlassian.com/browse/JRACLOUD-78609","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen customers follow the process to reset [JIRA|https://confluence.atlassian.com/cloudkb/reset-and-delete-all-data-from-your-cloud-site-691012037.html] by deactivating and re-activating its subscription the global permissions are not restored correctly.\r\n\r\nThis causes issues as the customer won't be able to search for users and groups within the application.\r\nh3. Steps to Reproduce\r\n # Make sure you have Confluence and JIRA at your instance.\r\n # Follow the reset process outlined [here|https://confluence.atlassian.com/cloudkb/reset-and-delete-all-data-from-your-cloud-site-691012037.html].\r\n\r\nh3. Expected Results\r\n\r\nJIRA should be added to the instance as a new installation with the default global permissions.\r\nh3. Actual Results\r\n\r\nJIRA is added with missing global permissions:\r\n\r\n!image-2022-03-08-13-55-13-460.png|width=257,height=130!\r\nh3. Workaround\r\n\r\nAdd the permissions manually after granting the *Browse users and groups* to anyone.","createDate":"2022-03-08T08:26:47.000+0000","comments":[]},{"summary":"Bulk moving issues to other projects shows non required fields as required and clear fields while moving","key":"JRACLOUD-78440","url":"https://jira.atlassian.com/browse/JRACLOUD-78440","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a customer is performing a bulk operation to another project using the \"Move\" action, sometimes non-required fields are shown as required.\r\n\r\nAlso, some fields like Description will be cleared of any value, ticking 'Retain' does not help and the field is cleared of any entries once the bulk move is completed.\r\n\r\nh3. Steps to Reproduce\r\n * text and radio button fields are reported as required during the bulk move from a team managed project -> company managed project even when these fields are not associated with the project screen. Backend condition that is buggy in behavior is notAllInScope i.e custom field is not in the scope of ANY issue context.\r\n\r\nh3. Expected Results\r\n\r\nMoving issues without non-required fields showing as required.\r\nPopulated fields like descriptions should retain their value.\r\nh3. Actual Results\r\n\r\nNon-required fields showing as required.\r\nPopulated fields like Description are cleared once the move is completed.\r\nThis also applies to all other custom fields using the \"Text Field (multi-line)\" type\r\n\r\nh3. Workaround\r\n\r\nThis typically happens if the destination Project is using a different Field Configuration and the field renderer doesn't match (Default Text Renderer vs Wiki Style Renderer). By adjusting the field renderer so that they match should solve the problem.","createDate":"2022-02-15T12:11:20.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/PCS-131494","author":"Prakash L R"},{"text":"[https://getsupport.atlassian.com/browse/JST-842840]","author":"Tiago Fragoso"}]},{"summary":"Any dropdown field menus in Create issue cut off at the bottom","key":"JRACLOUD-78303","url":"https://jira.atlassian.com/browse/JRACLOUD-78303","type":"Bug","priority":"","description":"h3. Issue Summary\r\nDropdown fields in Create issue cut off at the bottom\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n\r\n# Click \"Create issue\"\r\n# Go to any dropdown field at the bottom of the screen that has enough content to make the dropdown scrollable\r\n# Click on the dropdown to expand the menu\r\n# Notice it now will cut off at the bottom as per the screenshot above.\r\n\r\nh3. Expected Results\r\nThe drop-down should reposition itself so that the scrollbar can be completely seen on the screen and all menu options that are currently in the frame can display \r\n\r\nh3. Actual Results\r\nThe menu goes beyond the bottom of the screen and the menu options are cut off, leaving some unselectable. \r\n\r\nh3. Workaround\r\nThis can be worked around by leaving the dropdown fields up on the screen, which will display the options below, and won't be cut off at the bottom.\r\n\r\nNote: very similar to JRACLOUD-77264","createDate":"2022-01-31T22:45:51.000+0000","comments":[{"text":"{panel:title=Atlassian Update - April 1, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Jira issue transition screen shows account ID instead of just account name when updating comment field","key":"JRACLOUD-78241","url":"https://jira.atlassian.com/browse/JRACLOUD-78241","type":"Bug","priority":"","description":"How to replicate:\r\n # Create or open a new issue ticket\r\n # Open the ticket, update transition or change issue status (any status: Pending/Escalation etc)\r\n # Under comment, Respond to customer field type user name with \"@xxxxxxx\" -it reverts to the account id\r\n!Screen Shot 2022-01-24 at 11.53.23 am.png!\r\n\r\n      4. Once comment has been updated, the username shows properly\r\n\r\n!Screen Shot 2022-01-24 at 12.38.05 pm.png!\r\n\r\n{color:#0747a6}*Suggestion*{color}: Please also update the transition view screen so that @user mention does not reflect account id when updating the comment field","createDate":"2022-01-24T01:41:11.000+0000","comments":[{"text":"I don't understand how this was simply marked a Won't Fix with no reason or update, it's a bad user experience and confusing for new Service Desk Team members who have recently migrated to the Cloud. ","author":"Brody"},{"text":"Why can't someone simply make the transition comment field the new wiki renderer type. None of the fields that I mark with \"wiki renderer\" have this issue. It seems like an +extremely+ easy fix.","author":"David May"}]},{"summary":"When user log work for a date that is different from the actual time, the CSV export only shows actual date.","key":"JRACLOUD-77926","url":"https://jira.atlassian.com/browse/JRACLOUD-77926","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This suggestion is for *JIRA Cloud*. Using *JIRA Server*? [See the corresponding suggestion|http://jira.atlassian.com/browse/JRASERVER-64025].\r\n  {panel}\r\n\r\nh3. Problem \r\nWhen user log work for a date that is different from the actual time, the CSV export only shows actual date.\r\n\r\nh3. Steps to Reproduce\r\n# Log work for a different date than the current time\r\n !Screen Shot 2017-02-07 at 4.37.09 PM.png|thumbnail! \r\n# Export this issue using the *Export Excel CSV (All fields)*\r\n !Screen Shot 2017-02-07 at 4.32.57 PM.png|thumbnail! \r\n# Check the work log fields on the exported file\r\n\r\nh3. Expected Results\r\nYou can find the log work date.\r\n\r\nh3. Actual Results\r\nYou can only see the date when the log work was submitted.\r\n\r\n !Screen Shot 2017-02-07 at 4.35.04 PM.png|thumbnail! \r\n !Screen Shot 2017-02-07 at 4.36.07 PM.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nThere are some possible workarounds to get the correct value:\r\n* The endpoint [Get issue worklogs|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-worklogs/#api-rest-api-3-issue-issueidorkey-worklog-get] returns the field *started*, which is the field that contains the date entered in the log work rather than the date from when the entry was created\r\n* The [endpoint to perform advanced searches|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-search/#api-rest-api-3-search-get] is able to return the worklog field, and it will contain the *started* value as well\r\n** E.g. /rest/api/3/search?jql=filter=10014&fields=key,worklog\r\n* Our [integration with Google Sheets|https://marketplace.atlassian.com/apps/1220382/jira-cloud-for-google-sheets-official?hosting=cloud&tab=overview] or [Jira Cloud for Excel|https://marketplace.atlassian.com/apps/1221301/jira-cloud-for-excel-official?tab=overview&hosting=cloud] offer the option to export the *started* value as well. Although if you need the worklogs in order to import values into a Jira instance it would require some manual work to merge the cells correctly:\r\n !Screen Shot 2021-11-26 at 10.26.40.png|thumbnail!  !Screen Shot 2021-11-26 at 10.28.16.png|thumbnail! \r\n","createDate":"2017-02-07T18:38:54.000+0000","comments":[{"text":"The description should say:\n\nWhen a user logs work for a date that is different from the date when the log entry was added, the CSV export uses the date the log entry was added, not the date the work was done on.\n\nAs a result, the export cannot be used for external time reporting as the work shows up being done on the wrong date.  For example, if a developer logs all of their time first thing Monday morning for all of the work for the prior week, all of the work shows as being done on the Monday, not for the previous week.  This leads to curious issues where a developer shows they worked 37.5 hours on one day.  Trippy.\n\n ","author":"Jim Cloughley"},{"text":"The impact of this issue is that customers can't use the exported data for accurately tracking and reporting on work logged / developer. Hoping this gets prioritised soon. ","author":"Alan Burton"},{"text":"I ended up writing code external from JIRA to fix this issue.  I noticed that an export does include the correct dates.  So I use run a backup which produces an export file.  I parse the export file and reconcile the JIRA ticket number with the backup.  I then use the date from the export instead of the JIRA ticket.","author":"Jim Cloughley"},{"text":"Thanks Jim. A lot of work for what I would think is a straight forward issue to resolve. ","author":"Alan Burton"},{"text":"If this is going to be fixed, I'd like a heads up to understand what changed.  I wrote a work around that relies on how the <Worklog> tag is built.","author":"Jim Cloughley"},{"text":"Can you please let me know when will you resolve this issue?","author":"Louis Lam"},{"text":"Another user looking for a resolution to this, or a workaround. How can work log be exported with the correct dates? ","author":"Dan Goyette"},{"text":"I do a server backup that exports raw XML. Parsecthe XML for <worklog> records.  Swap the dates as this backup has the correct dates in it.","author":"Jim Cloughley"},{"text":"Thanks, Jim. That should work for me. I appreciate it.","author":"Dan Goyette"},{"text":"What does the Resolution \"Timed Out\" mean?","author":"Jim Cloughley"},{"text":"I would like a resolution for this issue.\r\n\r\nEchoing Jim's comment above, what does Timed Out mean? ","author":"jyi"},{"text":"I would love a resolution for this as well.","author":"Tara Bell"},{"text":"I also need a resolution for this, defiantly seems like an error.... ","author":"Maxwell Jones"},{"text":"I didn't expect this behaviour and am now having to use the Google Sheets integration to work around it.","author":"Ben Carter"}]},{"summary":"Jira Cloud API Audit record is returning Jira usernames instead of Atlassian Account Ids","key":"JRACLOUD-77455","url":"https://jira.atlassian.com/browse/JRACLOUD-77455","type":"Bug","priority":"","description":"h3. Issue Summary\r\nJira Cloud API Audit record ({{GET /rest/api/3/auditing/record}}) is returning Jira usernames instead of Atlassian Account Ids making it harder for administrators to see who made an action.\r\n\r\nh3. Steps to Reproduce\r\n # Make a request to get audit records from Jira using the [GET /rest/api/3/auditing/record|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-audit-records/#api-rest-api-3-auditing-record-get] REST API endpoint\r\n # See the response\r\n\r\nh3. Expected Results\r\nThe response returned allows you to identify (complying with GDPR guidelines) the user who made the action that was logged.\r\n\r\nh3. Actual Results\r\nThe returned results identifies the user by their Jira username which does not follow the standards described here: [https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/]\r\n\r\nExample\r\n{code}\r\n{\r\n    \"offset\": 0,\r\n    \"limit\": 1,\r\n    \"total\": 25050,\r\n    \"records\": [\r\n        {\r\n            \"id\": 36102,\r\n            \"summary\": \"User removed from group\",\r\n            \"created\": \"2021-09-20T17:05:39.265+0000\",\r\n            \"category\": \"group management\",\r\n            \"eventSource\": \"\",\r\n            \"objectItem\": {\r\n                \"name\": \"My Group A\",\r\n                \"typeName\": \"GROUP\",\r\n                \"parentId\": \"10000\",\r\n                \"parentName\": \"com.atlassian.crowd.directory.IdentityPlatformRemoteDirectory\"\r\n            },\r\n            \"associatedItems\": [\r\n                {\r\n                    \"id\": \"ug:2de9168b-e72d-439e-8719-e3748295712f\",\r\n                    \"name\": \"ug:2de9168b-e72d-439e-8719-e3748295712f\",\r\n                    \"typeName\": \"USER\",\r\n                    \"parentId\": \"10000\",\r\n                    \"parentName\": \"IDP Directory\"\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n{code}\r\n\r\nHighlighting the portion\r\n{code}\r\n...\r\n\"id\": \"ug:2de9168b-e72d-439e-8719-e3748295712f\",\r\n\"name\": \"ug:2de9168b-e72d-439e-8719-e3748295712f\"\r\n...\r\n{code}\r\n\r\nh3. Workaround\r\nIt is possible to use the [GET /rest/api/3/user/bulk/migration|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-users/#api-rest-api-3-user-bulk-migration-get] REST API endpoint to translate usernames and keys to Atlassian account Ids.","createDate":"2021-09-27T20:33:03.000+0000","comments":[]},{"summary":"Issue picker in the Move Sub-Task page shows the search results incorrectly","key":"JRACLOUD-77391","url":"https://jira.atlassian.com/browse/JRACLOUD-77391","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssue picker in the Move Sub-Task page shows the search results incorrectly\r\nh3. Steps to Reproduce\r\n# View the {*}Sub-Task{*}.\r\n# Select *Move* from More options.\r\n# Select {*}Change Parent{*}.\r\n# Enter the {*}Project key{*}. It should display all the parent issues that can be selected. But it doesn't display the matching issues.\r\n !screenshot-1.png|thumbnail! \r\n# Click the [select issue] link\r\n# Observe that nothing appears under \"Issues you have recently viewed\" or \"First 50 issues from your current search\"\r\n !screenshot-2.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\nWhen we enter the project key, it should display all the parent issues that can be selected. But it doesn't display the matching issues. Note, that it states in the UI \"Begin typing to search for issues to link\" or \"First 50 issues from your current search\"\r\n\r\nh3. Actual Results\r\n\r\nThe search results don't show all the matching issues whereas it shows only a few issues. \r\n\r\nh3. Workaround\r\n * Create an *Advanced Search filter* that fetches all the parent issues to which the *sub-task* can be assigned.\r\n * *Run* the search filter.\r\n * Perform the search on the *Move Sub-Task* page.\r\n\r\nh3. Workaround #2\r\n * Key in the exact issue key.","createDate":"2021-09-16T05:54:48.000+0000","comments":[]},{"summary":"Improve the experience of clearing date time picker field value","key":"JRACLOUD-77320","url":"https://jira.atlassian.com/browse/JRACLOUD-77320","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, the only way to clear the value of date time picker fields is by clicking on the field value, clicking on the \"X\" that appears on the right-hand side, then clicking on the field area again and clicking outside the field area.\r\n\r\nHere's a short video showing how it works: [https://www.loom.com/share/5191b049fd4e45ecab68c2ba96301775?sid=482b7409-4c6c-4327-bea6-64500e3a8aed] \r\nh3. Steps to Reproduce\r\n # Enter a field value in Date and Time picker field.\r\n # Click Enter for the value to be saved.\r\n # Click on the field again > click on the X to clear the entire field.\r\n # Click enter or elsewhere on the issue.\r\n # The field gets stuck on prompt values.\r\n!image-2023-07-25-15-59-41-060.png!\r\n6. Refreshing the page returns the old value we put in p.1\r\n\r\nh3. Expected Results\r\n\r\nClicking the X should clear the field immediately after clicking enter or elsewhere on the issue. The same way it is behaving for a Date fields.\r\nh3. Actual Results\r\n\r\nRefreshing the page returns the old Date and Time value. The 'X' button does not reflect immediately with 1 click.\r\nh3. Workaround\r\n\r\nTo clear the field click on the 'X', then again on the field and then outside. This additional click inside the field clears it out once we go out of the field.\r\n\r\n \r\n----\r\n \r\n\r\nCurrently, the only way to clear the value of date time picker fields is by clicking on the field value, clicking on the \"X\" that appears on the right-hand side, then clicking on the field area again and clicking outside de field area.\r\n\r\nHere's a short video showing how it works: [https://share.getcloudapp.com/eDuRg0Ed]\r\nh3. Problem\r\n\r\nIf you don't click inside the field area after clicking on the \"X\", the change will not be saved.\r\nh3. Suggestion\r\n\r\nImprove this experience in a way that clicking on the \"X\" clears the value and saves the change.","createDate":"2021-09-02T19:46:09.000+0000","comments":[{"text":"I'd like to request that this be reclassified as a Bug/Defect, because it does not match the functionality that users get when using the Date Picker, and has been very frustrating for many of our users.","author":"Nick Daniel"},{"text":"I contacted the support and got this link as response. For us it is not the same behavior:\r\n\r\nWhen clicking the X at the Time Picker there is a \"freeze\" of our Cloud Jira and no clicking anywhere is possible. You need to refresh the website.\r\n\r\nOur workaround is to click in the date field and press the DEL-key on the keyboard to delete the date and then click outside of the box.","author":"Cornelia Frankovic"}]},{"summary":"Unable to log work & other actions on issues from the Filter Results gadget in a Jira","key":"JRACLOUD-76818","url":"https://jira.atlassian.com/browse/JRACLOUD-76818","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nClicking on the following actions on a Jira issue from the filter statistics gadget in the new dashboard UI does not return any action.\r\nh3. Steps to Reproduce\r\n # In the new dashboard UI, create a filter statistics gadget and choose a filter\r\n # Save the gadget\r\n # Hovering the mouse pointer over an issue displayed in the gadget, on the right side you will see a \"...\" icon, open it and from the, you will see several actions, try to perform any of the affected actions below, like Log work.\r\n # The action will work as expected, then go back to the dashboard (as you will likely be taken to another page to perform the action from the previous step), and attempt to perform any of the affected actions, on any ticket displayed in the same gadget.\r\n\r\n(!)  Known affected actions are:\r\n * -Assign- < now works correctly\r\n * -Assign to me- < now works correctly\r\n * -Comment- < now works correctly\r\n * Log work\r\n * -Voters- < now works correctly\r\n * Watch issue\r\n * Link\r\n * Clone\r\n * Labels\r\n * Delete\r\n ** Actions not listed here work as expected, consistently.\r\n\r\nh3. Expected Results\r\n\r\nThe action works as expected.\r\nh3. Actual Results\r\n\r\nSelections are unresponsive and do not cause any change or action, for the affected actions. \r\n\r\nh3. Workaround\r\n* Refresh the page manually\r\n* Once any of the working actions are used, this usually also leads to a page refresh, which \"resets\" the stuck status of the affected actions and they can be used one more time. \r\n* For the Log work action using a different Time tracking provider like Tempo Timesheets overrides the default Jira functionality, and is not affected by this bug.","createDate":"2021-06-10T12:16:25.000+0000","comments":[{"text":"I believe this bug was originally raised with a different scenario than the one we currently have at JRACLOUD-83258\r\n\r\nIn the original scenario (here), it only states that the functions don't work at all, while in the current scenario, most of them work, and some of them work once, and after that it requires a page refresh for them to work again. I think we may have mixed root causes but let's keep this one open, I'm updating the description to reflect the current situation.","author":"Rene C. [Atlassian Support]"},{"text":"We are investigating this issue again due to an increase in votes, however, we are unable to replicate the issue. If you are still able to replicate the issue please drop a comment here with details, thank you!\r\n\r\n ","author":"Elisa Ho"}]},{"summary":"In the new issue view, in a multi-line text custom field or in the issue description field,  not all the URLs are rendered as links","key":"JRACLOUD-76802","url":"https://jira.atlassian.com/browse/JRACLOUD-76802","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the new issue view, in the issue description or in a multi-line text custom field, if you add a URL that is not {*}http{*}, {*}https{*}, *ftp* or {*}mailto{*}, this is not rendered as a link but it is shown as single text:\r\n!01-Links-multi-line-text.jpg|thumbnail!\r\n\r\nEverything works fine when using a single-line text field.\r\nh3. Steps to Reproduce\r\n # In the new issue view, in an issue description enter a valid URL like, for example [ftp://something.org|ftp://something.org/]\r\n # See that after hitting enter, the string is correctly rendered as a link\r\n # Now repeat the same test but enter any of the following URLs: [ftps://something.com] or gopher://something.org or integrity://something.org or smb://, [file://|file:///] etc, and hit enter.\r\n\r\nh3. Expected Results\r\n\r\nAll the URLs are correctly rendered as links \r\nh3. Actual Results\r\n\r\nThe URLs are rendered as simple text strings and are not clickable.\r\n\r\nSome URLs appear to be hyperlinks but nothing happens when you click them. When you try to open in a new tab [file://|file:///] they redirect to about:blank#blocked\r\nh3. Workaround\r\n\r\nIn some cases, for the most used protocols like ftps:// and SCP, using the markdown syntax '[TEXT-HERE] (URL-HERE)' for links works:\r\n!02-markdown-workaround-ok.jpg|thumbnail!\r\n\r\nHowever, by using the markdown syntax using less common protocols like for example gopher:// or integrity:// or [nntp://], the text is rendered as a link, but it is creating a broken link that is missing the URL:\r\n!03-markdown-not-ok.jpg|thumbnail!\r\n\r\nAnother workaround, when applicable, is to use a single-line text field since everything is correctly rendered as a link in there.","createDate":"2021-06-09T14:06:27.000+0000","comments":[{"text":"Being able to manage a list of supported protocols would be great.","author":"Jörn Reimerdes"},{"text":"What's the long term policy of Atlassian - to support custom links schemes or to forbid them?\r\n\r\nSee other similar issues: JRACLOUD-26419, JRACLOUD-59015, JRASERVER-11505, ...\r\n\r\nNote 1: Same problem in the edit issue view.\r\n\r\nNote 2: A link with a custom scheme created by Jira API is rendered as text only (i.e. not clickable).","author":"Ondřej Medek"},{"text":"I also am trying to add links in an SMB format \\\\servername.domain.com\\share and not able to have it be recognized. The system incorrectly *converts* it to http:// and *doesn't link* all the text..\r\n\r\nAll three of these had a leading double backslash (aka whack whack) \r\n\r\nserver[.domain.com\\share|http://server.domain.com/]\r\n\r\n\\\\server\\share\r\n\r\n[server.otherdomain.com|http://server.otherdomain.com/]\r\n\r\n(The third line was \"whack whack server.otherdomain.com, and the whack whack was ignored.\r\n\r\nFor some reason confluence converts that to what you see.\r\n\r\n \r\n\r\n \r\n\r\n ","author":"Joel Harrison"},{"text":"Please make this possible. In our context we use much dynamicsnav:// links into our ERP System. ","author":"Lars Swart"},{"text":"As a workaround, we have made a custom Marketplace Connect static app which displays our custom links in a panel (iframe).\r\n\r\nNote: Forge cannot be used because Forge components also forbid custom scheme links.","author":"Ondřej Medek"},{"text":"Do the watchers of this ticket still experience this issue? If so, can you let me know what sort of URL is not working? gopher:// urls are now working for me. \r\nfile:// urls appear to work but then redirect to about:blank#blocked  when clicked. I would like to update the Description to reflect what behaviour users are currently  experiencing. Thank you!","author":"Anusha Rutnam"},{"text":"Same with file:// links. \r\n\r\nBy the way: clickable file links in url field lead to blank#blocked as well","author":"Karin.Gleichauf"},{"text":"Still not working:\r\nscp://a.com/b.txt\r\nsvn://a.com/b.txt\r\n...\r\n\r\nAny custom URLs\r\n\r\nmycustomuri://a.com/b.txt\r\n\r\nmycustomuri:a.com/b.txt (Yes, without slashes it is still an URI)\r\n\r\nThe problem is, it's not even possible to create link to e.g. mycustomuri://a.com/b.txt by \"Link Ctrl+K\" edit dialog.","author":"Ondřej Medek"}]},{"summary":"Rest API shows Project Roles without scope for team-managed projects moved to trash","key":"JRACLOUD-76117","url":"https://jira.atlassian.com/browse/JRACLOUD-76117","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe REST API endpoints for getting project roles ([/rest/api/3/role|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-project-roles/#api-rest-api-3-role-get] and [/rest/api/3/role/\\{id}|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-project-roles/#api-rest-api-3-role-id-get])  don’t return the scope for deleted Team-managed projects that are in Trash.\r\n\r\nThis makes it impossible to distinguish if a Project role belongs to a Company or a Team project and can later lead to errors when invoking other Jira APIs with such project roles (e.g. trying to create a permission scheme with a grant to such role with the [API|https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-permission-schemes/#api-rest-api-3-permissionscheme-post] returns {{{}400 - Bad Request{}}}, with error: “Please select a valid project role”)\r\nh3. Steps to Reproduce\r\n # Create a Next-Gen project and call one of the REST API endpoints to get project roles. See that project role scopes are returned in the response payload:  !When NG is deleted.png|thumbnail! \r\n# Move the Next-gen project to the trash\r\n# Call the same REST API endpoint(s) again\r\n\r\nh3. Expected Results\r\n\r\nThe APIs should either return the roles with scope or don’t return them at all (for the Next-gen projects in the trash).\r\nh3. Actual Results\r\n\r\nThe APIs return the project roles without scope, making them indistinguishable from roles for Company-managed projects.\r\n !When NG is in trash.png|thumbnail! \r\n \r\nh3. Workaround\r\n\r\nRemove the Nextgen Project from the Trash.","createDate":"2021-03-02T09:03:08.000+0000","comments":[{"text":"{panel:title=Atlassian Update - March 2, 2022|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"},{"text":"Hello,\r\n\r\nThis bug recently impacted my team. I was writing a script that needed access to the *atlassian-addons-project-access* role and when I ran the API to get all roles, I got multiple atlassian-addons-project-access roles with different IDs which made it difficult to determine which role was the right one. Had to end up hardcoding the ID of the main atlassian-addons-project-access role.\r\n\r\nRegards,\r\n\r\nMaham Nazir","author":"Maham Nazir"},{"text":"Hey,\r\nThis bug influences us and our customers.\r\nWith this bug it is impossible to determine from the API which role is the active one and which role (or roles) are part of the trash object.\r\nWe use only the API to interact with Jira, and we have no way to know to which project is related. Also, some customers do not want to delete the trashed project.\r\nThe scope of the bug is bigger. You also get the permission scheme, notification scheme, and issue security scheme of the deleted team-managed project from the respective API calls.\r\nThose elements should be marked as trashed by the API in our opinion, it makes the data accessible through it incomplete\r\n\r\nBest Regards,\r\nIdo Zak, Salto","author":"Ido Zak"},{"text":"Hello,\r\n\r\nThis bug recently impacted our team. We are currently in the midst of transitioning our users from Azure DevOps to Jira. We are in the cloud and we created initial project configurations in our Sandbox and using AppFire's Configuration Manager for Jira Cloud (CMJ) our first 'deploy' from Sandbox to Production munged the resulting Production Project's Permissions. \r\n\r\nAppFire requested we permanently delete all Projects that were sitting in the trash. When we did so and re-deployed the issue was resolved.\r\n\r\n \r\n\r\nHowever, this manual step introduces a burden in that for every deployment we will need to verify whether there is any items in the trash that could cause this interruption again.\r\n\r\n \r\n\r\nPlease fix? \r\n\r\n \r\n\r\nRegards,","author":"Frank Castellucci"}]},{"summary":"Story points removed from the edit screen are still editable in the issue view","key":"JRACLOUD-75712","url":"https://jira.atlassian.com/browse/JRACLOUD-75712","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Story Point field is editable in the new issue view although the field does not exist in the edit issue view.\r\nh3. Steps to Reproduce\r\n * Create a new screen for Edit issue view  \r\n * Remove Story point field from the screen\r\n * Edit the issue the Story point field is editable in the new issue view \r\n\r\nh3. Expected Results\r\n\r\nThe Story point should not be editable in the New Issue View\r\nh3. Actual Results\r\n\r\nThe Story point is editable in the New Issue View\r\nh3. Workaround\r\n\r\nNo workaround available","createDate":"2020-12-10T06:38:55.000+0000","comments":[{"text":"I'm having the same issue. It's also described here: https://community.atlassian.com/t5/Jira-Software-questions/JIRA-amp-ScriptRunner-Cloud-How-to-make-field-quot-Story-Points/qaq-p/1731501","author":"Deleted Account"},{"text":"{panel:title=Atlassian Update - June 28, 2022|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"},{"text":"How come this one will not be fixed?","author":"Hailin.Zhang"},{"text":"Hi, please make it possible to make the story points field viewable but non-editable just like other fields. This would really be helpful for us as we are summing up story points from child issues and therefore don't want this field to be editable on Epic level. Thanks!","author":"Cornelia Jeppsson"},{"text":"My company is trying to better utilize automation to aggregate story points up from Stories, Technical Stories and Bugs up to the Epic level.  We would then aggregate the Epic story points up to the Initiative level which with a combination of using Jira Plans we would be able to easily see how many story points remain on Epics and Initiatives.  We do not want to allow manipulation of Story Points at the Epic and Initiative level and until this is fixed, the Story Point field is still editable even though it is not on the Epic and Initiative Create and Edit screens.  This was closed once before and I actually found an older Youtube video that showed this actually working so this is truly a feature that was working before but is now broken.  This is not a new feature, but in fact a bug.  Please fix this as this can be a valuable tool for evaluating remaining work at the Epic and Initiative level and have more trust in Plans. ","author":"randy.bergeron"},{"text":"This is a major BUG!!!!","author":"Inbar Shtibel Levi"},{"text":"This is a Critical bug. ","author":"Sai Nikhil Guntur"}]},{"summary":"Sensitive data exposure via /secure/QueryComponent!Default.jspa endpoint - CVE-2020-14179","key":"JRACLOUD-75661","url":"https://jira.atlassian.com/browse/JRACLOUD-75661","type":"Bug","priority":"","description":"h3. Issue Summary\r\nJira Cloud allows remote, unauthenticated attackers to view custom field names and custom SLA names via an Information Disclosure vulnerability in the /secure/QueryComponent!Default.jspa endpoint.\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Access the Jira Cloud URL: https://hostname.atlassian.net/secure/QueryComponent!Default.jspa as anonymous user without logging in.\r\n\r\nh3. Expected Results\r\nThe endpoint should not expose custom field names etc.\r\n\r\nh3. Actual Results\r\nIt shows custom field names and custom SLA names.\r\n\r\nh3. Update\r\n\r\nWe have tested this issue in Jira Cloud and have found that the issue described in the ticket is not reproducible. If an unauthorised user tries to access the URL, the user can see default Jira fields - that are the same for any instance, not custom fields. Thus no sensitive information gets exposed & we have closed this ticket.\r\n\r\n\r\n\r\n","createDate":"2020-12-03T05:10:50.000+0000","comments":[{"text":"Dear Customers,\r\n\r\nI am product manager working on Jira Cloud. We have investigated the current behaviour and we can confirm that the issue described in the ticket has been addressed and is no longer reproducible. \r\n\r\nIf an unauthorised user tries to access the URL, he can see default Jira fields - that are publicly available and are the same for any Jira instance, not custom fields created specifically in a given instance. Thus the information that gets exposed is not of sensitive or confidential nature. \r\n\r\nWith that we are closing this ticket as the issue described above had been resolved.","author":"Yerbol Nisanbayev"},{"text":"OK \r\n  \r\n ","author":"Alberto Garcia Blazquez"}]},{"summary":"Using CascadeOption(Parent,none) in JQL breaks results","key":"JRACLOUD-75520","url":"https://jira.atlassian.com/browse/JRACLOUD-75520","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFor multi-cascade fields the cascadeOption(\"Parent\",\"child\") works fine, the the (\"Parent\",none) also works fine. Except when you combine both.\r\n\r\nThe JQL won't work even if the search is combined with other JQL search clause. \r\n\r\nAlso, this bug is impacting customers if the filter gadget is used with grouping by the Cascading field.\r\n\r\nh3. Steps to Reproduce\r\n # Create a Multi-Cascade Field.\r\n # Search using the next JQL that works fine\r\n{code:java}\r\n\"CascadeField[Select List (cascading)]\" in cascadeOption(\"Option1\",\"Option1A\"))\r\n{code}\r\n\r\n # Search using the next JQL that works fine\r\n{code:java}\r\n\"CascadeField[Select List (cascading)]\" in cascadeOption(\"Option1\",none))\r\n{code}\r\n\r\n # Combine both JQLs, it fails\r\n{code:java}\r\n\"CascadeField[Select List (cascading)]\" in cascadeOption(\"Option1\",none)) OR \"CascadeField[Select List (cascading)]\" in cascadeOption(\"Option1\",\"Option1A\"))\r\n{code}\r\n\r\n# Combine with usual JQL search clause\r\n{code}\r\n\"CascadeField[Select List (cascading)]\" in cascadeOption(\"Option1\",none) and project = ABC {code}\r\n\r\nh3. Expected Results\r\n\r\nJQL should return the combination of the individual results\r\nh3. Actual Results\r\n\r\nthe CascadeOption(\"Option1\",none) breaks the results.\r\nh3. Workaround\r\n\r\nNo workaround.","createDate":"2020-11-09T16:54:14.000+0000","comments":[{"text":"{panel:title=Atlassian Update - May 22, 2022|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"},{"text":"As per the JQL filter [cascadeOption()|https://support.atlassian.com/jira-software-cloud/docs/advanced-search-reference-jql-functions/#:~:text=First%20Response%22%20%3D%20breached()-,cascadeOption(),-Search%20for%20issues]\r\n * Find issues where a custom field (\"Location\") has the value \"USA\" for the first tier and any value (or no value) for the second tier:\r\n{{location in cascadeOption(}} {{\"USA\"}} {{)}}\r\n * Find issues where a custom field (\"Location\") has the value \"USA\" for the first tier and no value for the second tier:\r\n{{location in cascadeOption(}} {{\"USA\"}} {{,none)}}","author":"MonaS"}]},{"summary":"A negative value in a custom number field will be shown as zero in the issue history.","key":"JRACLOUD-75500","url":"https://jira.atlassian.com/browse/JRACLOUD-75500","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA negative value in a custom number field will be shown as zero in the issue history.\r\nh3. Steps to Reproduce\r\n # Add a custom number field to an issue in a Jira Software or Service Desk project.\r\n # Put a positive number and a negative number here.\r\n # Check the issue history. The negative number will be always be shown as 0.\r\n\r\nh3. Expected Results\r\n\r\nThe issue history should show the actual negative number as in the custom number field instead of 0.\r\nh3. Actual Results\r\n\r\nThe issue history always shows 0 when there is a negative value in the custom number field.\r\n\r\nh3. Workaround\r\nWhile we do not have a workaround to correct the custom number field value in the history of the Jira issue, here is a workaround to accurately audit these changes using Jira automation: [Link|https://confluence.atlassian.com/jirakb/workaround-for-jracloud-75500-a-negative-value-in-a-custom-number-field-will-be-shown-as-zero-in-the-issue-history-1387598063.html]","createDate":"2020-11-05T13:32:03.000+0000","comments":[{"text":"HI, is this bug planned to be fixed??\r\n\r\nThanks a lot\r\n\r\nPilar","author":"Pilar Lopez Gracia"},{"text":"It affects also to my team. I will appreciate fixing it ASAP. Thanks","author":"Vanessa Almagro"},{"text":"+1 affects my team","author":"Tauwa"},{"text":"+1\r\n\r\nWe would really like this one to be fixed!","author":"Anton Zaides"},{"text":"Any news about this isue??","author":"David Gimenez"},{"text":"Hi,\r\n\r\nThis bug affects my team. Any news about its resolution?\r\n\r\nRegards.","author":"Alvaro Cortijo Garcia"}]},{"summary":"Margin padding in new issue view restricts view on standard monitor sizes","key":"JRACLOUD-75406","url":"https://jira.atlassian.com/browse/JRACLOUD-75406","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThere are various *padding-right* and *padding-left* margins in the CSS layout throughout the new issue view, that cause excess whitespace on standard monitor layouts and does not allow the user to utilize the scaling options that are integrated into the code, the scaling gets worse on wider aspect ratio monitors as well as zooming out, in the browser zoom settings, beyond 100%.\r\n\r\nh3. Steps to Reproduce\r\n# enable New issue view\r\n# Look at any issue from a 16:9 aspect ratio monitor\r\n\r\nh3. Expected Results\r\nThe margin paddings scale to meet at the very minimum the industry-standard 16:9 aspect ratio 1080p monitor sizes, but 100% scaling prefered for custom monitor solutions or users that prefer to zoom out for extended screen real-estate\r\n\r\nh3. Actual Results\r\nAs an Example, I am Looking at:\r\n{code}\r\n<div class=\"sc-iupvsZ chWGEj\">\r\n{code}\r\n\r\nthere is a padding set to scale to 100% but also restricted to a maximum of 1400px:\r\n{code}\r\npadding-right: max((100% - 1400px) / 2, 0px);\r\n{code}\r\n\r\nLooks like this:\r\n!Screen Shot 2020-10-15 at 2.47.58 PM.png|thumbnail!\r\n\r\nBecause of this setting on an industry-standard 16:9 aspect ratio 1080p monitor, there is already an excessive amount of whitespace of 279px for the margin at padding-right (noting padding-left adds an additional 279px of whitespace), and would require scaling up to 1679px to reach the 100% scale setting for this section *noting standard monitor size with default zoom levels at 100%* so this should meet the max 100% scale at this setting\r\n\r\nh3.Notes:\r\n# The suggested solution here is to remove 1400px restrictions to all scalable margins\r\n# Alternatively, scale the paddings up 300px to handle at a minimum 16:9 aspect ratio 1080p monitors by increasing all 1400px limitaions to a 1700px restriction\r\n\r\nh3. Workaround\r\n\r\nNone at the moment.","createDate":"2020-10-15T20:14:43.000+0000","comments":[{"text":"+1","author":"Bhavin Acharya"},{"text":"Move to JRACLOUD as this issue is not specific to Jira for Software.","author":"Mike Howells"},{"text":"Hi,\r\n\r\n \r\n\r\nCan we escalate this issue and disable the mandatory new issue view until this is fixed? The proposed workaround will stop functioning after march 1st. Depending on the size of your screen, the severity if the issue increates :)\r\n\r\n \r\n\r\n \r\n\r\nThanks,\r\n\r\n \r\n\r\n!file:///C:/Users/RAOULW~1/AppData/Local/Temp/SNAGHTMLf0e9c6.PNG|width=2785,height=1094!","author":"Raoul Wedel"},{"text":"+1","author":"Andras Gyarmati"},{"text":"+1","author":"Arun George"},{"text":"+1 but really +50 for the people in my org who are complaining about this on teams conferences and don't understand why we can't just simply resize the pane. Resizing, cutting edge technology from the 1990s.","author":"forde.prigot"},{"text":"+1","author":"Hagai Ben Yehuda"},{"text":"Following this ticket. Once Atlassian forces everyone to use the new view this should really be made higher priority.","author":"Alexander Hirt"},{"text":"When will this be fixed?","author":"Dmitri Nikoliouk"},{"text":"here's a lazy userCSS to temporarily fix the issue\r\n{code:css}\r\n#ak-main-content > div > div > div > div > div > div > div > div {\r\n\tpadding: 0 0;\r\n}\r\n\r\n#ak-main-content > div > div > div > div > div > div > div > div:nth-child(2) {\r\n\twidth: 10%;\r\n}\r\n{code}","author":"Andras Gyarmati"},{"text":"@andras - Please excuse this likely ignorant question, but how would someone apply this userCSS to fix the issue?","author":"Alexander Hirt"},{"text":"@Alexander Hirt - userCSS is a Chrome plugin, like Stylish (and any number of other plugins). You can use the CSS Andras provided with any browser plugin that allows you to add custom styles to a page/site/domain. Keep in mind that it will only make the changes for you; it's not something you as an admin can apply to your site. Every user who wants it will need to do it themselves.\r\n\r\nUserCSS - [https://chrome.google.com/webstore/detail/user-css/okpjlejfhacmgjkmknjhadmkdbcldfcb?hl=en]\r\n\r\nStylish - [https://chrome.google.com/webstore/detail/stylish-custom-themes-for/fjnbnpbmkenffdnngjfgmeleoegfcffe?hl=en]\r\n\r\nI think Stylish is also available for Firefox, and I know there's a similar plugin for Safari.","author":"Esther Strom [ACP-JA]"},{"text":"@Esther Strom thanks for the explanation. This is very helpful.\r\n\r\nAnd thanks for the userCSS @Andras\r\n\r\n ","author":"Alexander Hirt"},{"text":"Hi,\r\n\r\nPlease fix. Users are complainig about the waste of space and text being compressed when there is enough room in the pane.\r\n\r\n!image-2021-05-19-10-18-22-136.png!","author":"Claudio Sharkawi"},{"text":"From the board, the pointlessly modal issue view is also very narrow. The whole thing is just stupid. In addition to the user CSS above, you can fix those modals with:\r\n{code:java}\r\ndiv.atlaskit-portal-container > div.atlaskit-portal > div > div > div:last-child {\r\n margin: auto !important;\r\n width: auto !important;\r\n}{code}","author":"Andrew Hodgkinson"},{"text":"Hi guys,\r\n\r\nLet vote as Affected customers, the issue is so annoying.","author":"Kiều Anh Dũng"},{"text":"+1\r\nNearly a quarter of my screen is now wasted space.  Why would you force both of the new view panes to be smaller than the old view (i.e. this one)?  I use a smaller high resolution laptop and this makes reviewing requests/issues really tiresome.","author":"Katie Yoder"},{"text":"I have to agree with the previous posters.  This new design is just plainly STUPID.\r\n\r\nThe new UI uses too much white space.  We have to do more vertical and horizontal scrolling now, which has adversely impacted productivity.\r\n\r\n \r\n\r\nI used the following in UserCss to reduce the vertical white space in the right pane:\r\n{code:java}\r\ndiv.KpNgj, div.lmymNt {\r\n margin-bottom: 0px !important;\r\n}{code}","author":"Daniel Ruan"},{"text":"@danielruan these classes autogenerated random text so unfortunately you can't use them","author":"Andras Gyarmati"},{"text":"+1 This is really annoying.","author":"Justine Carstairs"},{"text":"I wonder if having a functioning UI is a feature only available in Jira \"Premium\".","author":"Alexander Hirt"},{"text":"{panel}\r\nI have the same problem. I want to see the logs messages posted in a ticket without having to use horizontal scroll bar since that makes it very difficult to make sense of the logs. These messages are in the middle pane which is too narrow. I have a widescreen monitor, but it's of no use. I would like to nuke the right pane and widen the middle pane to view the logs. \r\n{panel}\r\n \r\n ","author":"Neelesh Thakur"},{"text":"+1\r\n\r\n \r\n\r\nHonestly just add the ability to minimize the right side panel like you do the left side panel. This would be a quick fix that would satisfy most of the issue.\r\n\r\n \r\n\r\nIf you want to really impress people let the user resize the pane manually but that's secondary.","author":"forde.prigot"},{"text":"is there any update on this?\r\n\r\n ","author":"georgina.riso"},{"text":"I know that UI design ranging from mobile to 4K or 5K monitors is tough but examples similar (but not so bad) of this are in various places.\r\n\r\n1080p is not a good enough goal. Remember, High DPI exists. This is a normal window size on a 4K - 3840x2160 setup.\r\n\r\nNo permission to add screen shots\r\nhttps://www.screencast.com/t/YItOcHYMIaVn\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n ","author":"fkulack"},{"text":"how is this in production? this seems to be a not well tested ui ","author":"Andras Gyarmati"},{"text":"Thanks @andras for the tricky CSS. I was wondering how to patch that dynamic CSS Atlassian uses (boo!)\r\n\r\nOn top of your code, I have also added this other part to remove the padding and margins of issue details fields, which is soo big:\r\n{code:css}\r\n#ak-main-content > div > div > div > div > div > div > div > div > div > div > div { margin-bottom: 0; }\r\n#ak-main-content > div > div > div > div > div > div > div > div > div > div > div > div { padding-top: 0; }\r\n#ak-main-content > div > div > div > div > div > div > div > div > div > div > div > div > div { margin-bottom: 2px; } \r\n{code}\r\nThis compacts the sidebar enough as to not need scrolling to see everything.","author":"Hector Palacios"},{"text":"+1","author":"Ruben Peters"},{"text":"Am I missing something... where can we see the total votes on a given issue?","author":"Jeff Koors"},{"text":"@jeff koors - on bugs in this system, \"voting\" is called \"reporting\" - look at the top right under People; it's the Affected Customers entry. Voting is for Suggestions.","author":"Esther Strom [ACP-JA]"},{"text":"hey guys, any updates on this request?","author":"Alexander Hirt"},{"text":"hi, any update for this reason?","author":"tran khanh hoang"},{"text":"seems to be fixed? why is this ticket not updated?","author":"Andras Gyarmati"},{"text":"This is happening for me starting today. The view becomes quite unusable.","author":"Paul Sheraton"},{"text":"This was fixed before if I remember correctly. If they changed something it might be an issue again. In the meantime you can check previous comments for a quick fix with user css.","author":"Andras Gyarmati"},{"text":"UserCss changes did indeed fix it. I also just realized that switching to Chrome and not Chrome Canary resolves the issue as well. Chrome Canary of course is the bleeding edge version of chrome - so this might become a larger problem when the next version is released.","author":"Paul Sheraton"},{"text":"All this is ridiculous, handle window/editing sections and margins based on pix rather of ratios...\r\nThe result on a 4k wide screen is a disaster...","author":"Frederic Doug JANVIER"},{"text":"madness to not have it:\r\n\r\n \r\n\r\na) resizeable\r\n\r\nb) have it grow to fill up to the max text in that column (e.g. long version nam","author":"martin"},{"text":"Facing the same issue with the left padding:","author":"Ripin"},{"text":"A lot of wasted screen space and on the other hand, need to use scroll bar to see all of the contents of the actual issue being reported. Can't believe that this hasn't been fixed for almost two years!\r\n\r\n1) The sidebar should be re-sizable\r\n\r\n2) Should be possible to minimize when not needed.","author":"Snehal Buch"},{"text":"The same problem when you use zoom < 100 in your browser. Our users are frustrated by this view. Bug is a bug it can happen, but the way how Atlassian is handling it - this is insane.","author":"Paweł Wadas"},{"text":"Have just tested this during migration test and it seems to be fixed at last. \r\nPerhaps it could be closed?","author":"Dwight Holman"},{"text":"[~6e687f59fb46] I'm still seeing it - so not fixed.","author":"william.ferguson"},{"text":"Yeah - you're right, that was my mistake. It is still as broken.\r\nRecommend using the CSS work-around suggested.","author":"Dwight Holman"},{"text":"But look on the bright side! In the three and a half years that poor little, developer-resource-starved underdog Atlassian has had to implement a truly trivial CSS change, they *did* at least find time to increase their subscription fees and start adding broken \"AI\" everywhere. Yay!\r\n\r\nAwesome products. (We're migrating to GitHub Issues - goodbye and good riddance).","author":"Andrew Hodgkinson"},{"text":"I have the same problem. ","author":"Cristian Pirnea"}]},{"summary":"The incoming mail handler configuration shows the username of the default reporter","key":"JRACLOUD-74671","url":"https://jira.atlassian.com/browse/JRACLOUD-74671","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe incoming mail handler configuration shows the username of the default reporter.\r\nh3. Steps to Reproduce\r\n # Go to the incoming mail admin screen [/secure/admin/IncomingMailServers.jspa|https://jdog.jira-dev.com/secure/admin/IncomingMailServers.jspa]\r\n # Click add incoming mail handler\r\n # Choose Create a new issue or add a comment to an existing issue\r\n # Click next\r\n # Choose a person for the default reporter. Here it will show the display name of the person, which is fine.\r\n # Choose save\r\n # Now back on the previous screen, under Mail Handlers, it shows \"Default Reporter: username\" where username is the username of the person you chose on the previous screen.\r\n\r\nh3. Expected Results\r\n\r\nDefault reporter should show the user's display name or full name. (depending on the configuration)\r\nh3. Actual Results\r\n\r\nThe account's username is shown. Usernames should never be shown in the UI.\r\nh3. Workaround\r\n\r\nTo get more information on the Default Reporter, you need to open the configuration.","createDate":"2020-06-23T22:29:44.000+0000","comments":[{"text":"{panel:title=Atlassian Update - July 26, 2022|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"'Log in as user' function shows incorrect 'Your Work' screen information","key":"JRACLOUD-74369","url":"https://jira.atlassian.com/browse/JRACLOUD-74369","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n'Log in as user' function shows incorrect 'Your Work' screen information\r\n\r\nh3. Steps to Reproduce\r\n# Go to [Admin hub|https://admin.atlassian.com]\r\n# Select a user to use the *Log in as user* function\r\n# The landing page of *Your Work* does not show the user logged information\r\n#* Or Alternatively: go to People > Search people and teams, and then attempt to see the work of any other user.\r\n\r\n\r\nh3. Expected Results\r\n* *Your Work* screen should show the user currently logged information and not the user that is impersonating\r\n* *Viewing the work of other users* shows the issues the user is/was working on that the user impersonated can see.\r\n\r\nh3. Actual Results\r\n* *Your Work* landing page shows the activity from the user that is impersonating.\r\n* *Viewing the work of other users* will show issue keys and issue summaries of the issues the admin user can see (the impersonator), not the ones the user being impersonated would be able to see. It is important to mention the user impersonated in this way is still not able to access those issues that they do not have permissions to, but the issue keys and description can be seen.\r\n\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-05-06T21:03:03.000+0000","comments":[{"text":"{panel:title=Atlassian Update - June 11, 2021|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Megha"},{"text":"As a Jira Admin who wants to ensure the security of our instance, I find it surprising that this bug is unimportant to Atlassian.\r\n\r\nI (re)discovered this bug while I was overhauling the Permission Schemes at my organization. I thought I could trust the \"Log in as user\" functionality to give me accurate visibility to what that user would see in Jira. Apparently I was wrong.\r\n\r\nFortunately in my case, I was testing against a \"test user\" (not an actual employee). I created this test user (along with a sham Atlassian account for that test user) so that I would have the login credentials for that test user. That allowed me to employ the likely only *workaround* to this bug – actually authenticating as that test user in Jira.\r\n\r\nWhy am I bothering to comment on this closed bug ticket? Because it's important for Atlassian to know that *TRUST IS IMPORTANT*, particularly when it comes to instance security. Apparently I can't trust that \"Log in as user\" will show me accurate user-visibility results, and Atlassian is OK with that. My trust level for that entire feature is now minimal.\r\n\r\nPerhaps Atlassian would at least consider warning admins who use the \"Log in as user\" feature about all the known limitations that it has. That would at least restore a little trust for this feature.","author":"Mykenna Cepek"},{"text":"How can this bug not be important to ATTLASIAN?","author":"Jesus Rodriguez(G)"},{"text":"Hi, [~1dd3e571b5a1], this bug only causes an admin impersonating a user to see issues that the admin themselves have permission to see instead of that of the user impersonated, so no information is actually leaked or vulnerated. If you have a case of information leaked or exposed due to something related to this, please feel free to share it in a support request for our team to investigate.","author":"Rene C. [Atlassian Support]"},{"text":"The point is not a data leak. Leaking data in Jira to a Jira administrator is admittedly not a concern.\r\n\r\nThe concern, as I tried to make clear in my comment here on 16-Aug-2021, is that I cannot trust this feature as an administrator to show me what Jira looks like when I am \"logged in as\" another user.\r\n\r\nThe ability of an Admin to trust this \"impersonation\" capability is undercut by this bug.\r\n\r\nThis is not a security issue. This is an obvious bug which erodes the trust of Jira administrators when performing administration functions in Jira.\r\n\r\nI will also note that the workaround I offered ONLY works when the administrator has access to the impersonated user's email. In other words, the workaround will NOT work in most real-world cases.","author":"Mykenna Cepek"},{"text":"{panel:title=Atlassian Update - June 23, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"The post function to update the field \"Time Spent\", doesnot update the value in the issue after transition.","key":"JRACLOUD-73360","url":"https://jira.atlassian.com/browse/JRACLOUD-73360","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe post function to update the field \"Time Spent\", doesnot update the value in the issue after transition.\r\nh3. Steps to Reproduce\r\n # Edit the workflow\r\n # Add Post Function on Create Issue transition / or any transition\r\n # Update Issue Field: Time Spent and value: 1m\r\n # Publish\r\n # Create Issue\r\n # Go to Reports > Time Tracking Report > Next\r\n\r\nh3. Expected Results\r\n\r\nTime Spent column updated with value\r\nh3. Actual Results\r\n\r\nTime Spent column is empty\r\nh3. Workaround\r\n\r\nEnter the time in seconds in the field value to add 1 minute using the {_}Post Function{_}. Avoid using characters like _s, m, h, or d_ in the _Update Issue Field_ configuration. The value for the _Time spent_ field you should enter is {*}_+60+_{*}. This translates to 1 minute.","createDate":"2019-11-08T10:53:11.000+0000","comments":[{"text":"{panel:title=Atlassian Update - May 30, 2023|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Matthew Hunter"}]},{"summary":"Default value still being added to fields when not included in Screen layout","key":"JRACLOUD-72199","url":"https://jira.atlassian.com/browse/JRACLOUD-72199","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen configuring a *Default Configuration Scheme* for a Custom field to have a default value, that default value is still being added to the associated Issue type even though the field is not included in the Screen layout.\r\n\r\nh3. Steps to Reproduce\r\n# Configure a Custom field to have a default value (ie : Single text field)\r\n# Make sure that the Custom field is not included in any Screens associated with the Issue type\r\n!Configure_Screen_-_JIRA.png|thumbnail! \r\n!Configure_Custom_Field__TEXT_FIELD__SINGLE__-_JIRA.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\nBecause the field is not included in the Screen, no value should be associated with the field as it is not in use.\r\n\r\nh3. Actual Results\r\n\r\nBehind the scenes, that default value is added to the Issue and can be seen in the Issue Navigator.\r\n\r\n !Issue_navigator_-_JIRA.png|thumbnail! \r\n \r\nh3. Notes\r\n\r\nThis is applicable for all Custom field types.\r\n\r\nh3.Workaround\r\n\r\nAs a workaround, you can adjust the Applicable contexts for the scheme so that the default value is only applicable to specific Issue types.\r\n !Modify_configuration_scheme_context_-_JIRA_type.png|thumbnail! ","createDate":"2019-06-05T08:13:42.000+0000","comments":[{"text":"{panel:title=Atlassian Update - October 28, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Megha"}]},{"summary":"Time to First Response bar graph gadget producing strange results","key":"JRACLOUD-71786","url":"https://jira.atlassian.com/browse/JRACLOUD-71786","type":"Bug","priority":"","description":"h3. Summary\r\nTime to First Response bar graph gadget producing strange results\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Configure a Time to First Response bar graph gadget (Jira gadget, not JSD one)\r\n# View the data in the gadget and click on a bar to drill down\r\n# Notice the drill downed data doesn't seem to relate to the graph\r\n\r\nh3. Expected Results\r\nThe drill down data reflects whats shown on the gadget\r\n\r\n\r\nh3. Actual Results\r\nSeemingly unrelated results.\r\n\r\nUsing the below example and confirming tickets had a comment made, my manual calculations came to an average of ~45m for Time to First Response. The gadget is showing 10 hours.\r\n \r\nh3. Notes\r\n\r\nh3.Workaround\r\nUse the Service project report gadget and create a TTFR report","createDate":"2019-03-25T09:44:33.000+0000","comments":[{"text":"ONE YEAR TO FIX THAT  :D are you serious ?","author":"rems"},{"text":"I wonder how many people are affected by this and just aren't noticing because they are just trusting the built in graph to show accurate data and have not dug into the underlying data.","author":"Kent Barker"},{"text":"we have the same problem here  . \r\nif any Atlassian staff is seeing here it is where we reported our issue : https://jira.atlassian.com/browse/JRACLOUD-71786 ","author":"Navid B"}]},{"summary":"Misleading Time in Status custom field type","key":"JRACLOUD-71384","url":"https://jira.atlassian.com/browse/JRACLOUD-71384","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nIn Jira cloud, the [CHART]Time in Status which is using the customer field type *Time in Status* is used for reporting in [average time in status gadget|https://confluence.atlassian.com/jirakb/how-to-use-average-time-in-status-gadget-776998092.html]. Within the custom field configuration, a user is allowed to create a custom field using the *Time in Status* type. This can further be misinterpreted as a standard field type containing data that is user readable.  \r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a new custom field\r\n# Choose the type *Time in Status*.\r\n\r\n\r\nh3. Expected Results\r\n\r\n*Time in Status* should not be configurable as this field type is not meant to contain data that can be directly used by end users. \r\n\r\nh3. Actual Results\r\n\r\n*Time in Status* can be configured and further be added to screens. The actual field created cannot be edited nor viewed. \r\n\r\nh3. Note \r\n\r\nJRACLOUD-60841 is the existing feature request to actually allow reporting of time in status for individual Jira issues. ","createDate":"2019-01-17T11:19:49.000+0000","comments":[{"text":"{panel:title=Atlassian Update - October 28, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Megha"},{"text":"The [Time in Status|https://marketplace.atlassian.com/apps/1219732/time-in-status-for-jira-cloud?hosting=cloud&tab=overview&utm_source=Jira_Board&utm_medium=referral&utm_campaign=JRACLOUD-71384] app allows you to create a custom field that will calculate the time in status. Your custom field will be created with read-only and configuration-blocked settings. Try it, I hope it will be useful for you.","author":"Ostin Hops"},{"text":"https://getsupport.atlassian.com/browse/JST-1073160","author":"Isai Navarro"}]},{"summary":"\"Field has been modified Validator\" does not work for Text Field (multi-line) if it has default value","key":"JRACLOUD-71336","url":"https://jira.atlassian.com/browse/JRACLOUD-71336","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen a validator *Field has been modified Validator* is set on a transition for a \"Text Field (multi-line)\" field, the transition goes through even if it's not being modified during the transition.\r\nh3. Steps to reproduce\r\n # Create a custom field with type *Text Field (multi-line)*\r\n # Set default value of the custom field.\r\n # Add *Field has been modified Validator* validator (with an error message) to a transition to check if the field's value is being updated during transition\r\n # Add a screen, that contains the field\r\n # Create an issue and add a value to the custom field in edit/view issue screen\r\n # Transition the issue using the transition in which the validator is set. Do not update/modify the field's value during transition\r\n\r\nh3. Expected Result\r\n\r\nIssue could not be transitioned as the field's value is not being modified during the transition\r\nh3. Actual Result\r\n\r\nThe transition goes through even if the field's value is not updated\r\nh3. Note\r\n\r\nIf the field is empty and it has never a value the validator works fine and the validator error message appears during the transition. But if the field has a value, or it has value previously and is empty now, the validator does not work.\r\nh3. Workaround\r\n\r\nUse the *Value Field* condition: \"The field <Field Name> will have to be not equal to value 'NULL'. Compared as String.\"\r\n_(change the Field as per your site)_\r\n!Screenshot 2020-07-13 at 14.48.42.png|thumbnail!","createDate":"2019-01-09T14:43:54.000+0000","comments":[{"text":"This is high impact for us.\r\n\r\nWe use internal multi-text fields to ensure we do not expose comments to the customer in error. We use validators on a specific multi text field across 7 projects and at least 4 transitions in each project. If the information is not updated under the multi text field is not entered, it causes escalation issues across projects.","author":"Tracy J"},{"text":"This really impact us as we are still educating our users how to write proper descriptions and without this they will not update it and goes back to useless descriptions","author":"Benjie"},{"text":"The description should read:\r\n\r\n \r\n\r\nWhen transitioning a ticket, if a validator is set to require a modification on a custom multi-text field, the validator does not trigger. The user can transition without adding to the multi text field. The bug has a high impact on our business as most of our transitions have validators on multi-line text fields.","author":"Tracy J"},{"text":"my scenario is:\r\n * Dev update the Test Result field\r\n * In testing phase, someone review the test result and update accordingly\r\n\r\nso when move In testing -> PR merged, there should be a validation to validate the filed Test Result has been updated. But even I updated the field, it always says that \"You have to update Test Result\"","author":"Cathy He"},{"text":"This seems like it should be a higher priority - I thought I had a problem with my workflow. I have agents who are not updating a critical field (that gets a default value) and without this validator functioning - I have no other way of getting them to update that field. ","author":"Nathan Panuco"},{"text":"https://getsupport.atlassian.com/browse/JST-762893","author":"Gayan P"},{"text":"This needs to be pushed up the priority list and in all honesty I'm a bit shocked this has been pushed into the abyss with no ETA. The workaround only resolves half the picture. We need this feature and save us time from checking values have changed and chasing users to update a text field. ","author":"Sean McC"},{"text":"+1 high impact to us.\r\n\r\nWhat about the other way around? I need the opposite validator to ensure a field has not changed during the transition, but Jira doesn't seem to have one... Does anyone know anything about that? I couldn't find a feature request for it either...","author":"Ricardo.Gomes"},{"text":"Affects us too. We have a custom field with RTF default text and this modifier does not pick up whether the field has been changed from the default value.","author":"Gideon Nieuwoudt"},{"text":"https://getsupport.atlassian.com/browse/JST-988646","author":"Cody"},{"text":"+1","author":"Lina Castro Ramirez"},{"text":"Bug still exists as of 1 April 2025. Specifically on the initial transition (Issue Creation), where conditions aren't available, only validators, so the suggested workaround doesn't apply.","author":"Guilherme Barbosa Lima"}]},{"summary":"Bulk Edit Transitions Fail Silently If Validator Is Not Met","key":"JRACLOUD-67741","url":"https://jira.atlassian.com/browse/JRACLOUD-67741","type":"Bug","priority":"","description":"h3. Summary\r\nCustomer who are Transitioning Multiple issues at once (Bulk Operation) have noticed that the Bulk Operation Completes but no actions are made on the Issues.  If a Validator is on the Transition is not met, the Bulk Operation 'completes' without error however does not transition the issues. \r\n\r\nh3. Environment\r\n* Cloud \r\n\r\nh3. Steps to Reproduce\r\n# Configure a \"Field has been modified Validator\" on a Workflow Transition: eg Time Spent Field should be modified during the transition | Error Message: This field is required\r\n# Publish workflow\r\n# In Issue Navigator, attempt to Bulk Edit and Transition issues using the Workflow with a Validator\r\n\r\nh3. Expected Results\r\nIf the Validator is not Met, display an error message\r\n\r\nh3. Actual Results\r\nBulk Operation runs through and looks like it completes successfully. Issues that were Bulk Edited were not changed. \r\n\r\nIn Jira logs; using the Time Spent example:\r\n{noformat}  \t logger:\t com.atlassian.jira.workflow.validator.FieldRequiredValidator\t\r\n  \t message:\t Could not get time spent from the transition\t{noformat}\r\n\r\nh3. Notes\r\nIf an Issue is manually transitioned using the Transition Buttons and the Validator is not Met, an error is displayed\r\nTime Spent/Log Work cannot be done in Bulk:\r\n{noformat}N/A\tChange Log Work\tNOTE: This field is not available for bulk update operations.{noformat}\r\n\r\nh3.Workaround\r\nIf using a Time Spent/Log Work Validator - Remove it from the Workflow Transition or Manually Transition the issue\r\nIf other Custom Fields, ensure that they are present on the Screen used in the Workflow Transition and are Populated during the Bulk Operation\r\n","createDate":"2017-10-11T22:05:57.000+0000","comments":[{"text":"Hi Team,\r\n\r\nWe can not remove Time Spent/Log Work from the Workflow or Manually Transition the issue. \r\nAll the details have been provided in the https://getsupport.atlassian.com/servicedesk/customer/portal/42/PSCLOUD-33885. \r\n\r\nThanks!","author":"Ganesh Badekar"},{"text":"When will this issue be addressed? It has been known for years. We just hit it as well. Why can't the Log Work be modified/set from the bulk validator?","author":"Leonti"},{"text":"We don't have an official timeline to fix this experience at the moment, but this can be solved through the new Bulk Operations Toolbar _(announced here:_ {_}[https://confluence.atlassian.com/cloud/blog/2025/02/atlassian-cloud-changes-feb-17-to-feb-24-2025]{_}{_}){_}, available in the Backlog: \r\nh4. _\"Introducing a brand new toolbar for bulk actions_\r\n\r\n_We’re introducing a toolbar in the backlog so users can update multiple issues even more seamlessly._\r\n\r\n_To use the new toolbar:_\r\n # _Select multiple issues from the backlog or list. You can either:_\r\n ## _use the issue checkboxes_\r\n ## _hold *Ctrl* (Windows) or *Command* (Mac) while selecting issues_\r\n ## _hold the *Shift* key to select a group of adjacent issues_\r\n # _The new toolbar will appear. You can either select *Edit fields* to make edits to fields in your issues or *Change status* to transition your issues.\"_","author":"Guido Barbaglia"}]},{"summary":"Date format is inconsistent on CSV export when viewed on Excel/Google Sheets.","key":"JRACLOUD-67150","url":"https://jira.atlassian.com/browse/JRACLOUD-67150","type":"Bug","priority":"","description":"h3. Summary\r\nCertain date fields on CSV export are not being displayed correctly when viewed on Microsoft Excel or Google Sheets.\r\n\r\nh3. Steps to Reproduce\r\n# Have an instance with *dd/MM/yyyy HH:mm* date format:\r\n !Date settings.png|thumbnail! \r\n# Use the Export Excel CSV feature.\r\n\r\nh3. Expected Results\r\nThe 'Created' column, for example, would list all dates in a uniform format.\r\n\r\nh3. Actual Results\r\nCertain issues are rendering the date as  *d/m/yyyy HH:mm*\r\n!Date format.jpg|thumbnail! \r\n\r\nThe dates are correctly rendered when the CSV file is opened on Apple Numbers or Open Office.\r\n\r\nh3.Workaround\r\nUse another sheet editor than Excel or Google Sheets.","createDate":"2017-07-10T14:11:03.000+0000","comments":[{"text":"Hi there, would it be possible to get a CSV that shows this issue added here as an attachment? Just the CSV as exported from JIRA directly, not one that's been saved or modified from any spreadsheet app. Thank you! ","author":"William Gittoes"},{"text":"The problem is you get parsing errors on these date fields when you try to import the CSV into another Jira set up","author":"Brian Cohen"},{"text":"My testing has shown that this only happens if you have the issue navigator view set to \"Detailed View\", changing this to \"List View\" gives a consistent output. ","author":"Battlebeard"},{"text":"This is working as expected Google Sheets and Excel are expecting mm/dd/yy by default. To fix this make sure you change the locale settings when importing data.","author":"Jack Hazlehurst"}]},{"summary":"Time to First Response gadget won't display if average time is less than an hour","key":"JRACLOUD-65037","url":"https://jira.atlassian.com/browse/JRACLOUD-65037","type":"Bug","priority":"","description":"h3. Summary\r\nIf the _average_ time to first response for a given project or filter is less than an hour, the \"Time to First Response\" gadget won't display any data.\r\n\r\nh3. Steps to reproduce\r\n# Create two users and a new project in JIRA.\r\n# Add the Time to First Response gadget to a dashboard with the new project selected in the \"Projects or Saved Filter\" field.\r\n# As User 1, create an issue in that project.\r\n# Wait for half an hour, then add a comment on that ticket as User 2.\r\n# Refresh the Time to First Response gadget.\r\n\r\nh3. Expected results\r\nThe graph in the gadget displays half an hour as the time to first response.\r\n\r\nh3. Actual results\r\nThe gadget displays no data.\r\n\r\nh3. Notes\r\nIf another issue is added and commented on, there will be no data displayed _until_ the average time of the first response between the two issues is greater than one hour.","createDate":"2016-11-22T00:43:18.000+0000","comments":[{"text":"We are also facing the same issue. ","author":"Saurabh Malik"},{"text":"The same issue here.","author":"Saurabh Malik"},{"text":"{panel:title=Atlassian Update - October 26, 2020|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Jira users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\nJira Cloud team\n{panel}","author":"Megha"},{"text":"We are affected by this too. In some way we are proud because the affected gadget is the one for first response to highest impact issues :D But it would be nice if this could be fixed because it is confusing at times.","author":"Deleted Account"},{"text":"Hi,\r\n\r\nStill We are not able to see the Time to First Response in the Queue,\r\n\r\nSame Issue -  Please provide me the latest update.\r\n\r\n \r\n\r\nThank you!","author":"Vijai Bharrath"},{"text":"Is there any work around for this issue?","author":"AMBUJA BHUSAN DASH"},{"text":"Try configuring this time metric in the [Time Metrics Tracker app|https://marketplace.atlassian.com/apps/1221462/time-between-statuses?hosting=cloud&tab=overview&utm_source=Jira_Board&utm_medium=referral&utm_campaign=JRACLOUD-65037]. The average value is calculated there even if it is less than 1 hour. ","author":"Ostin Hops"}]},{"summary":"Cannot select issue type when creating issue from backlog","key":"JRACLOUD-61407","url":"https://jira.atlassian.com/browse/JRACLOUD-61407","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Cloud*. Using *JIRA Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRASERVER-61407].\n  {panel}\n\nh3. Summary\nWhen trying to quick create an issue in a JIRA backlog with many issues, the issue type cannot be rendered on the screen because the types are cut off by the bottom of the browser window. Note: this only occurs when the number of issues in the backlog consumes the majority of the screen.\n\nh3. Steps to Reproduce\n# Create a JIRA Scrum project\n# Create a large number of issues for your backlog\n# Depending on the size of your screen, the number required to trigger the bug will vary. Essentially you will need the backlog to reach the bottom fourth of the screen.\n# Try creating a new issue and changing the issue type for the backlog by clicking the down arrow next to *What needs to be done?* \n\nh3. Expected Results\nThe pop up box displays the full list of issue types as shown below:\n!expected_view.png|thumbnail!\nh3. Actual Results\nThe full list of issue types is not displayed because the pop-up window is cut off by the bottom of the browser window, as shown below:\n!backlog_create_issue.png|thumbnail!\n\n\nh3.Workaround\nIf you adjust the size of the browser window by dragging right corner of the browser window to make it smaller and then scroll down, the issue type pop-up will become fully visible. ","createDate":"2016-06-10T22:45:28.000+0000","comments":[{"text":"We use this method of creating issues quite a lot, as it automatically adds the fields from that board (e.g. 'team' for us, and the selected epic and version). It's very frustrating to have to resize the window to use it at the moment.","author":"Nathan"},{"text":"This only affects whoever is managing the backlog so its not a widespread inconvenience, but it is greatly slowing down our ability to migrate our data into Jira, as many items cannot be quick added (which is a very handy and time saving feature). ","author":"Marlon Dyck"}]},{"summary":"WebHooks not firing when the event triggered is Workflow post function","key":"JRACLOUD-60518","url":"https://jira.atlassian.com/browse/JRACLOUD-60518","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for {*}JIRA Cloud{*}. Using {*}JIRA Server{*}? [See the corresponding bug report|http://jira.atlassian.com/browse/JRASERVER-60518].\r\n{panel}\r\nWe need to transfer the issue status to the external system, so we've made up the workflow with the \"trigger a webhook post function\". The webhook should only work with transitions, so no issue events are selected.\r\n\r\nIt works unstable - sometimes webhook fires immediately after the transition and all the reauired info is posted in the external system.\r\nSometimes it works with the time delay (various time intervals).\r\nSometimes it doesnt fire at all.\r\n\r\nIt is only logged when the webhook was sent successfuly. \r\nWe've tried all the options from https://jira.atlassian.com/browse/JRA-41388, but all connections are ok.\r\n\r\nAre there any other suggestions of the possible reason of the problem?","createDate":"2016-04-07T11:34:09.000+0000","comments":[{"text":"Hi, we are experiencing this issue too, has there been any update?\n\nThanks,\n\nPaul","author":"Paul Morris"},{"text":"Hi Team, \n\nWe are facing the same kind of issue, time interval for the data is not updating(WebHook) is \"12:00 Am IST to 5:00 AM IST\" \n\nPlease check and resolve the problem immediately. \n\nRegards,\n\nShankar. E\n\n91-9884957983","author":"Shankar Esakki"},{"text":"We're using the following workaround - when the external system accepts the new info, it sends back to JIRA  the text fileld SUCCESS. and we empty this field at every transition right before triggering webhook. So if webhook worked SUCCESSfully, this field is never empty.\n\nAfterwards in all the cases when the success-field is empty (JQL filter) , the external system 'asks' JIRA to send the tickets again - and we do this check by job every 10 minutes.\n\n \n\nSo we have 2 integration flows from jira.","author":"Наталия Ицкович"},{"text":"I believe I'm seeing this as well. So it appears that the entire post-function for triggering webhooks is broken right? I can't get the webhook attached to a transition to fire at all....","author":"Jonathan Flowers"},{"text":"I think we're seeing it too. The same webhook works fine if attached to an event, but not if attached to a transition.","author":"Mac Newbold"},{"text":"Hello, I am experiencing this issue. Trying to call an azure endpoint in my Jira webhook and I am getting nothing in Azure according to logs. I am able to publicly post to my endpoint.","author":"Justin Ross"},{"text":"We have this on server instance too, will open another ticket. version 7.5","author":"Ivan Punko"},{"text":"Same issue, against the MS Teams webhook. If I switch the webhook to be triggered by an Issue, updated event, it works and I get the post inside Teams (this proves it's not an https issue, or bad url). If I remove the event, and make it trigger on a Transition, via a \"Resolved\" Post Function, it doesn't fire.\r\n\r\nI've tried to move my Post Function above or below the other Post Function \"Fire a *Issue Resolved* event that can be processed by the listeners\", no difference.\r\n\r\nA possible resolution for this one would be to have an event for \"issue resolved\" in the event section. But it won't help for other custom workflow transitions.\r\n\r\n \r\n\r\nNote: the documentation at [https://developer.atlassian.com/server/jira/platform/webhooks/] in the Known Issues section is incorrect. It states:\r\n{quote} * Post function webhooks do not fire if added to the *Create Issue* workflow transition. We recommend that you configure your web hook to fire from the *issue_created* event instead.{quote}\r\nHowever, it's for all transitions, not just \"Create\". Would be good to link to this ticket as well from there.","author":"Thierry"},{"text":"Same issue here. Webhooks fire in response to events (original system events) but will not fire when triggered by workflow.","author":"Brandon Cole"},{"text":"We are experiencing this issues as well. I noticed that my issue is being caused be the content-length header... in my case, this came from the webhook as 29212... which was incorrect as the body of the post call was actually 37553. This only seems to occur on the Transition trigger of a webhook.\r\n\r\nSteps to reproduce:\r\n * Configure your webhook to point to webhook.site. When triggered, take note of the content-length header captured by webhook.site.\r\n * Use Postman to post to the same endpoint, both with and without the content-length header and value. Expected results are 200s without, and 400s with.\r\n * Copy the body from webhook.site to http://string-functions.com/length.aspx ** to calculate the real length of the body. \r\n * Try Postman again with new value... 200s again.","author":"Micah Harley"},{"text":"+1","author":"Gurpreet Sandhu"},{"text":"+1","author":"Taras Shved"},{"text":"Hi there, just a reminder, this is a feature that is 100% impaired and does not function as advertised.  Would love to see faster than 4 year response times for things of this nature!","author":"Will Freeman"},{"text":"+1\r\n\r\nSeeing the same behavior","author":"Richard Nolan Jr"},{"text":"For those using MS Teams.  The transition webhook won't work.\r\n\r\nThe webhook is definitely sending.\r\n\r\n \r\n\r\nThe issue is that JIRA is sending a different JSON response when doing it from a transition , vs those checkboxes.\r\n\r\nI hooked up the webhook to a [https://webhook.site/] and when I pushed the response along to to MS teams - I got \"Webhook Bad Request - null or empty eventType\" - which it doesn't have\r\n\r\n \r\n\r\nOnly the ones triggered from \"created, updated\" have this metadata.  I assume MS Teams integration is serializing a certain response, and since it differs, they blow up.","author":"Poat"},{"text":"+1","author":"gary.farrant"},{"text":"this is a really needed feature. kindly help prioritise. thanks","author":"Anosike Osifo"},{"text":"+1. \r\n\r\nSeverity 2 - Major, Priority - Medium.\r\n\r\n5.5 years later... @Atlassian: gathering impact.\r\n\r\nToo bad.","author":"konstantinovpavel"},{"text":"+1\r\n\r\n \r\n\r\nThis is needed please","author":"Thinh Do"},{"text":"+1\r\n\r\n \r\n\r\nThis is needed please","author":"Thinh Do"},{"text":"+1\r\n\r\nWould very much like to have this feature.","author":"Kerrie Gottschalk"},{"text":"Hi there,\r\n\r\nI am trying to integrate Webhook with my project, i have created webhook created route for it, and route is woking fine with boht post and get. However the webhook is not triggering and thing to the provided url.\r\n Help will be appreciated.\r\n\r\nThanks","author":"nasirzid"},{"text":"+1 please investigate this issue. ","author":"Andrew Parker"},{"text":"this is likely related to single-voted but more specific problem of different payload schemas used in transitions and other events: https://jira.atlassian.com/browse/JRACLOUD-78163\r\n\r\nAnyway... Severity - Major, Priority - Medium, Atlassian - it is just 7 years old, it is still so young!","author":"Pavel Konstantinov"},{"text":"+1 Please investigate this issue","author":"Mohamed Reda Labiad"},{"text":"+1.\r\n\r\nHi,\r\n\r\nI believe this issue should be resolved soon. As Atlassian has changed that automations to now have a limit but the only workaround I can find to have webhooks work in any case is by using automations. For our instance our webhooks do not work. They are not sending the information out as they are configured. We then have to use automations to achieve what we need which now have limits so now we have to use more automations which may cause us to reach our automation limits.","author":"Gerry Ultreras"}]},{"summary":"WebHook convert the space character %20 into %2520 thus failing the call.","key":"JRACLOUD-42579","url":"https://jira.atlassian.com/browse/JRACLOUD-42579","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for {*}JIRA Cloud{*}. Using {*}JIRA Server{*}? [See the corresponding bug report|http://jira.atlassian.com/browse/JRASERVER-42579].\r\n{panel}\r\nh3. Actual Results:\r\n\r\nLooking into the application log we can see {{%20}} character (space) was converted to {{%2520}} hence failing the call.\r\n{noformat}\r\n[atlassian.webhooks.plugin.PublishTaskFactoryImpl$PublishTaskImpl] Client error - when posting to web hook at 'http://sample.com/executions?argString=-sshPassword1%2520password&user_id=admin&user_key=admin'\r\n{noformat}\r\nh3. Expected Results:\r\n\r\nJIRA should calls the exact URL that has been used to created the WebHook like the one below.\r\n{noformat}\r\nhttp://sample.com/executions?argString=-sshPassword1%20password&user_id=admin&user_key=admin'\r\n{noformat}\r\nh3. Steps to reproduce:\r\n # Create a new WebHook using the test URL: {{[http://sample.com/executions?argString=-sshPassword1%20password]}}\r\n\r\n!webhook.png!\r\nh3. Workaround:\r\n - Replace the character \"%2F\" with \"/\" in the webhook URL.\r\n - Instead of adding security parameters to webhooks please consider using the below functionality.\r\n[https://developer.atlassian.com/cloud/jira/platform/changelog/#CHANGE-1479]","createDate":"2015-03-23T16:19:53.000+0000","comments":[{"text":"Same problem happens on JIRA 6.4, but you need to enable DEBUG to view the error:\n\n{noformat}\n2015-03-25 11:29:50,935 pool-10-thread-3 DEBUG anonymous 613x325x1 23y3j9 0:0:0:0:0:0:0:1 /secure/QuickCreateIssue.jspa [atlassian.webhooks.plugin.PublishTaskFactoryImpl$PublishTaskImpl] Posting to web hook at 'http://sample.com/executions?argString=-sshPassword1%2520password&user_id=user&user_key=user', body is:\n{noformat}","author":"Pedro Cora"},{"text":"Huge annoying bug, it should be set to a higher priority.  Also, cloud paying customers will waste a lot of time because we have no access to the logs to determine why web requests fail. This seems to impact any url encoded characters such as %2F in my case.  Your customers will have a lot of problems trying to hook into Azure's Logic apps.","author":"Sam Bosell"},{"text":"This also happens in the link editor in Confluence: if you insert a link to a web site on a page by using the insert link button, saving the link will replace all characters not allowed in a URL (spaces, %-characters etc.) with the url code for that character (%20 for space, %25 for % etc.). For most characters this is nice behavior, but it also replaces the % characters that are part of an already encoded character.\n\nSince the url encoding contains a % character as well, these encodings will also be replaced. So if you save a link to url \"http://sample.com/executions?argString=-sshPassword1 password\", it will be changed to \"http://sample.com/executions?argString=-sshPassword1%20password\". If you open the link editor for the same link (don't change the URL) and save, the URL will be transformed to \"http://sample.com/executions?argString=-sshPassword1%2520password\". so the % sign is replaced by %25, changing %20 into %2520. One can repeat the process, adding 25 after the % sign at every attempt (%252520, ...).\n\n \n\nPlease change priority: should be higher than low.","author":"Sid Brouwer"},{"text":"This is a serious bug which is affecting many files in my project. Not able to open many files just because its appending extra 25 in the URL.","author":"nitssnatha"},{"text":"Jira Server v7.8.1  also suffers from this issue, as well as + also converted to actual + sign not space (trying to integrate Jira with telegram)","author":"Alexey Suslin"},{"text":"I dont think this is happening anymore, can you please check and let me know?","author":"Liron"},{"text":"There is still an issue. Link was added today and instead of %2F in the URL, it links to %252F","author":"Elizabeth J Matlock"},{"text":"any workaround for this issue ?","author":"Vishal K M"},{"text":"This really needs to be prioritized and fixed for Jira Cloud ASAP.  This is impacting our ability to set up a bidirectional integration with ServiceNow, which is critical for teams to work efficiently and effectively across the two platforms.  Because of this bug, Jira is unable to properly decode the callback URL and thus unable to write back to ServiceNow.  Please fix this!","author":"Dunlap, Mark J"}]},{"summary":"Outgoing emails not threading in Outlook when connected to Exchange Server","key":"JRACLOUD-31365","url":"https://jira.atlassian.com/browse/JRACLOUD-31365","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *JIRA Cloud*. Using *JIRA Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRASERVER-31365].\n  {panel}\n\n","createDate":"2013-01-18T16:07:18.000+0000","comments":[{"text":"This is a critical issue for us. It worked fine with Exchange 2007 and with the upgrade to Exchange 2010 the threading of JIRA e-mails broke.","author":"Ulrich Jakobus"},{"text":"Any progress with this? We are running Jira 6.0.3, with Exchange 2010 SP3 RU2 and still experience the threading problems.","author":"Carbonman"},{"text":"Hi [~kvanwyk],\n\nWe have not worked on this issue yet. This is because we are currently working through higher priority bugs in other areas.\n\nHaving said that, this is still an issue we would like to take a look at when we can fit it into our backlog. We might get a chance for this whenever we have some time to take a look at other Email Integration issues.\n\nPlease feel free to watch the issue to receive future updates.\n\nRegards,\n\nOswaldo Hernández. \nJIRA Bugmaster.\n[Atlassian].","author":"Oswaldo Hernandez"},{"text":"Does anyone know if a local MTA such as postfix skirts this issue or is this fundamentally an Atlassian issue?","author":"Zachary"},{"text":"AFAIK, this is a Exchange 2010/Atlassian _incompatibility_. When routing mail via an Exchange 2007 server, it works.","author":"Carbonman"},{"text":"This is causing a major problem on our side too, 2000 enterprise licenses, whole company using Jira solution and notifications are not threaded correctly in Outlook connected to Exchange 2010. \n\nFor any other apps except Jira, threading works perfectly. \n\nBased on the observation of our Jira Administrators, the problem is that Jira links to a non-existing (virtual) Message-id in \"In-Reply-To\" header item, which is causing the problem in Outlook. ","author":"Jan Jasek"},{"text":"After reading various internet forums and issues here in JIRA on threading, I've found why MSO is failing to thread mail notification sent from our JIRA.\n\nMSO (connected via Exchange Server) cannot thread e-mails with In-Reply-To refers to a non-existing (virtual) Message-ID. After I was able to amend JIRA e-mails so that \"In-Reply-To\" always refers to an existing message-id, then threading started to work.\n\nHow JIRA sends e-mails today:\n{noformat}\nMessage-ID: <JIRA.14835.1358950859000.465.1358951193690@xxx>\nIn-Reply-To: <JIRA.14835.1358950859000@xxx>\n{noformat}\nThe In-Reply-To field refers to a non-existing message-id.\n\nWhen threading works in JIRA:\n{noformat}\nMessage-ID: <JIRA.14835.1358950859000.465.1358951193690@xxx>\nIn-Reply-To: <JIRA.14835.1358950859000.465.1358951193689@xxx>\n{noformat}\nWhere In-Reply-To refers to the *existing* e-mail - e.g. the last e-mail sent or the very original e-mail (upon creating).\n\nI understand why Atlassian implemented JRA-9979 but I assume that this change caused threading to fail in MSO since then. We would highly appreciate if Atlassian could change using message-ids in In-Reply-To always to an existing e-mail.","author":"Radek Janata"},{"text":"[~radek.janata]\nIt is true that JIRA is using a virtual In-Reply-To, however the mystery of why Outlook/Exchange is failing to thread properly is a bit complicated.\n\nFirst of all, our testing shows that threading works fine in Outlook when connected to email servers other than Exchange (we tested against GMail).\nSecondly, it is reported that other email clients (eg Thunderbird) still thread correctly when connected to Exchange 2010.\nSo, the problem seems to be in the specific combination of Outlook and Exchange 2010.\nIf any of the internet forums you visited gave any clues as to why the combination is important, I would be interested in you posting the URLs.\n\nIn addition, two users above have both mentioned that this works fine in Exchange 2007.\nSo Microsoft changed something in Exchange 2010 that broke this. Yet another reason to consider this as an Outlook/Exchange bug.\n","author":"Mark Lassau"},{"text":"A thought experiment. Imagine the following scenario:\n\n* User U1 sends an email to user U2\nThese users are using some other email server than Exchange.\nThis message gets sent with a message ID of, say, \"m1\".\n* Next U2 replies to that email and CCs user U3\nCall this message \"m2\"\nU3 is on Exchange Server and is using Outlook.\nThis email will be sent with a Reply-To of \"m1\"\nNeither the Outlook instance nor the Exchange server have ever seen the message-id \"m1\", and yet \"it exists\".\n* U2 learns some more information and replies again to message \"m1\" CCing U3\n(or perhaps you can imagine the original email was sent to two users who both reply and CC U3)\nCall this message \"m3\"\nThis email will also be sent with a Reply-To of \"m1\"\n\nNow, do you expect that U3's email client should be smart enough to thread m2 and m3 together even though it has not actually seen m1?\n\nNote that even though neither the Outlook client nor the Exchange server have ever seen the message-id \"m1\", there is no way that they can know if the message-d is \"real\" or \"virtual\".\nSMTP has no central server, it is a network of independant servers, so there is no \"real\" or \"virtual\" message-ids, there is just \"I have seen this before\" or \"I have not seen this before\".","author":"Mark Lassau"},{"text":"bq. We would highly appreciate if Atlassian could change using message-ids in In-Reply-To always to an existing e-mail.\n\nWhen we send notifications, we send separate emails to each user because they can have different language and email format settings, so every user receives a unique message-id that no other user has seen. What we don't want to do is store a cross-product \"In-Reply-To\" value for every user/issue combination.\n(That's kind of what we used to do and needed to fix in JRA-9979 )\n\nI guess we could store the very first message-id sent for a given Issue and then always use that as the In-Reply-To for further notifications on that issue.\n\nThis assumes that we just need Exchange to have seen the message-id at least once, not the Outlook client.\n\nIt also assumes that JIRA is sending email always to one single Exchange Server: if the SMTP server is a gateway that sends the message to different servers for different users then this won't work.\nSo it might work for an internal JIRA instance in a corporate environment with a single email server, but the same users would probably not get threaded issues from, say, jira.atlassian.com.","author":"Mark Lassau"},{"text":"[~mlassau], thanks for the thorough answer. You're right and I haven't realize the scenarios you mentioned. Tracking every message-id sent would mean to revert back to NotificationInstance table removed within JRA-9979.\n\nWould you please consider this minimal adjustment you've mentioned?\nbq. I guess we could store the very first message-id sent for a given Issue and then always use that as the In-Reply-To for further notifications on that issue.\nThis would help to some users at least (those who receive also the very first message). For users that haven't received the first message (added later during an issue resolution) this change would have no effect/impact. Thanks.","author":"Radek Janata"},{"text":"Hello,\n\nAtlassian Support advised me to comment this issue because we have the same problem with Exchange and Outlook 2013. It's very anoying for our users.\nDo you have any update?\n\nThanks!","author":"Quentin Gillet"},{"text":"This has been working well for us as of the last year or so. It wasn't always but now threading works even between an issue move between projects and summary updates.\n\nThinking about this some more, it must be the result of the fact that we changed the jira mta to use postfix on the localhost, and then ensured there was a receive connector rule to allow this host to mail on behalf of our domain.","author":"Zachary"},{"text":"Sorry to bring up a seemlingly dead issue. I am experiencing broken threading in Outlook 2013 running off of an exchange server. I have scoured the web but haven't found anything _recent_. I am starting to have a suspicion that this was resolved with a recent version of Jira but we somehow have our mail server misconfigured.\n\nJira v 6.3.15\n\nIs anyone else still experiencing this issue?","author":"Loren Anderson"},{"text":"I made the first comment to this issue in January 2013 and can confirm that we are unfortunately still affected by this and don't have a solution (which would be very nice to get, the impact for us is certainly not only \"minor\" as indicated by the issue priority here).","author":"Ulrich Jakobus"},{"text":"I've verified that the threading works fine in gmail. Unfortunately gmail only supports POP. This means there is no syncing between my outlook (via exchange) and gmail. If I delete an email in gmail, I still see it in Outlook.\n\nI get about 300 jira emails a day and this feature in outlook would greatly expedite this process for me and everyone else at my company.","author":"Loren Anderson"},{"text":"bq. Unfortunately gmail only supports POP.\n\nI don't think this is true.\nI use IMAP to connect Thunderbird to a corporate gmail account and have done for years.\n\nSee eg https://support.google.com/mail/answer/77654?hl=en","author":"Mark Lassau"},{"text":"We experience the same problem in our company.\nBefore we used Exchange 2003 and threading worked perfectly.\nNow we migrated to Exchange 2010 and threading stopped to work.\n\nAny workaround discovered?\n\nIt would help if we migrate to Exchange 2013?\n\nAs Client we use Outlook 2010 and 2013 - both not working.\n","author":"Deleted Account"},{"text":"I added \"RE: \" in the outgoing messages (in subject) and the emails started to group correctly afterwards.","author":"Deleted Account"},{"text":"Hi [~marius.oancea],\n\n{quote}\nAny workaround discovered?\n{quote}\n\nNot that I am aware of.\n\nIt would be helpful if you file a support request with us at https://support.atlassian.com so we could further troubleshoot with you what the issue is for your specific instance and provide any possible advice to workaround the issue for your situation.\n\nRegards,\n\nOswaldo Hernández. \nJIRA Bugmaster.\n[Atlassian].","author":"Oswaldo Hernandez"},{"text":"As shown here: https://jira.atlassian.com/browse/JRA-31365?focusedCommentId=788432&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-788432\nfor me the problem ws solved by adding \"RE: \" in the subject (in Outgoing server config)","author":"Deleted Account"},{"text":"Hi all, \n\nDear Atlassian team,\nCould you please share your plans regarding this issue?\nAt this moment, the issue has status \"Awaitnig for development\". Which release will include this fix? If you can't say this yet, is there any estimation, when you will, approximately?\n\nThis issue does a significant affect to our support teams, and workarounds do not work for us.","author":"Michael I."},{"text":"Hi [~ilushcenko],\n\nIt is in our team's short-term backlog to investigate the root cause of this issue and work on a fix if possible. \n\nHowever, we have not been able to assign it to a developer yet so we can not yet share any details on which release would contain a potential fix and when that release could be published.\n\nPlease do watch the issue for status updates, as we will share more information as soon as it is available.\n\nRegards,\n\nOswaldo Hernández. \nJIRA Bugmaster.\n[Atlassian].","author":"Oswaldo Hernandez"},{"text":"Based on my review of the technical issues with MS Exchange, it appears that as of Exchange 2010, threading _requires_ the use of {{Message-Id}} and {{In-Reply-To}} headers that reference actual emails which were sent. I understand the technical problem of having JIRA track every email sent, per user, for every JIRA issue.\n\nLet me propose that in our use case, it would be acceptable that email threading would only apply to email sent in some (configurable) time-frame, say for the current day or the past week. That way, you could garbage-collect whatever tracking table is needed to associate email message IDs to each issue/user pair. This could be similar to the LastViewed metadata (which, by default, only tracks the last 50 issues seen by a user).","author":"Wratko Hlavina"},{"text":"All messages about each issue can be considered as a separate conversation so all JIRA has to do is to keep a messageID corresponsing to each JIRA issue and use it when sending email about that issue.","author":"Emre Toptancı [OBSS]"},{"text":"My review finds that the {{In-Reply-To}} must correspond to a {{Message-Id}} of an email that was actually sent to the recipient; it's not sufficient for it to be an email that exists but was sent to another Exchange recipient. Since a user can become a watcher on a ticket at any point in time after the issue is created, this is a technical problem. I believe that's what was described here in an earlier comment.","author":"Wratko Hlavina"},{"text":"Is it possible to use the JIRA issue ID as \"Conversation ID\" - maybe as an optional server or user setting?\n\nSee http://www.slipstick.com/outlook/outlook-2010/conversation-groups/","author":"Mike Friedrich"},{"text":"From Veracode:\n\nI've attached our patched version of com.atlassian.jira.mail.MailThreadManagerImpl.  It includes the updates to calculate and insert the Outlook headers, Thread-Index and Thread-Topic.  When will we hear back from the Bug master that our patch has been accepted?\n\nThank you!\n- Veracode ","author":"Tarek Sabra"},{"text":"Hi Tarek! \n\n \n\nCould you provide your patch? \n\n \n\nThank you!","author":"Gonchik Tsymzhitov"},{"text":"Hi Gonchik, sorry about that. The file is attached.\n\nTarek","author":"Tarek Sabra"},{"text":"@tarek what jar file contains this class? i've grepped through all the ones that ship with jira 7.2.3 and cannot seem to find it.","author":"Two Sigma (Administrators)"},{"text":"When [~noc12] submitted this it was reported to affect 7.3. [~noc12] could you please answer any questions regarding this fix?","author":"Tarek Sabra"},{"text":"i tried 7.3.0 but was not able to find it there either.","author":"Two Sigma (Administrators)"},{"text":"Of course.  It's in JIRA Core.  In the web application it's deployed to \\{tomcat-dir}/atlassian-jira/WEB-INF/classes/com/atlassian/jira/mail/MailThreadManagerImpl.java  \n # Grab the source download [https://my.atlassian.com/download/source/jira-software]\n # Unpack\n # navigate to \\{source-dir}/jira-project/jira-components/jira-core/src/main/java/com/atlassian/jira/mail/MailThreadManagerImpl.java\n # Build with ./build.sh in the source root directory","author":"Veracode"},{"text":"thanks. we found it and patched it in, but are using issue key for the topic to guarantee uniqueness:\n{code}\n            email.addHeader(\"Thread-Topic\", issue.getKey());\n{code}\n","author":"Two Sigma (Administrators)"},{"text":"@license6 Good catch on using the issue key.  I'll switch the code on our side also.  Glad to hear that the solution is working for you as well!","author":"Veracode"},{"text":"Will this be patched in the Cloud?","author":"Deleted Account"},{"text":"This fix is extremely important for us. The fire-hose of notifications from people editing tickets means that people mostly ignore notifications from Jira forcing the entire team to \"poll\" tickets rather than efficiently using email as an event based workflow.\r\n\r\n \r\n\r\nIMO priority \"Low\" is inappropriate.","author":"Andrew Somerville"},{"text":"What is the fix or workaround for Cloud users? We are getting ready to go live with our Service Desk, but the email threading is unacceptable. We are using MS Exchange.","author":"fordav-hutct"},{"text":"[~hutct539278548] are you still experiencing this? Which version of Exchange Server are you using? The original ticket describes 2010 but I doubt that that is still in use.\r\n\r\nRegards,\r\n\r\nOliver","author":"Oliver Hookins"},{"text":"@Oliver,\r\n\r\nWe have migrated to the Server edition (no longer using Cloud). Not sure if this is still an issue as I'm not currently receiving ServiceDesk notification emails.\r\n\r\nThanks for following up.\r\n\r\nTim","author":"fordav-hutct"},{"text":"@Oliver,\r\n\r\nWe are still using Exchange Server 2010 and we are still experiencing this.\r\n\r\nRegards, \r\n\r\nChao","author":"Chao Wu"},{"text":"Hi Oliver, I have the same issue also. Can you please clarify what is the fix or has this been fixed yet?\r\n\r\nLike [Fordav-hutch|https://jira.atlassian.com/secure/ViewProfile.jspa?name=hutct539278548] - we are getting ready to go live with our Service Desk, but the email threading is unacceptable. We are using MS Exchange.\r\n\r\nThanks Declan","author":"dclune"},{"text":"We have exchange 2016 and emails we get form our Jira instances are not threading by case","author":"IT-BIB"},{"text":"Is there any update for this issue? We have the same problem and most of our customers use Outlook.","author":"Viwan J."},{"text":"It's funny how I'm getting these email updates for this issue still after 8 years. Not.","author":"Ed Chan"},{"text":"Do wen need to use the newest version of Microsoft exchange?","author":"Myroslav Toloshnyi"},{"text":"Hello, can we please get an update on this?","author":"Christoph Klasen"},{"text":"This has become quite a bothering issue for us and we have customers that have asked us to stop sending notifications from the service desk and use \"ordinary mail\" instead since they can't see the mail history. It's such a pity!","author":"Yordanka Terziyska"}]},{"summary":"Shared filter queries don't work with gadgets' results if login user doesn't have permission to access one or more issues or projects included in the results","key":"JRACLOUD-20916","url":"https://jira.atlassian.com/browse/JRACLOUD-20916","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This bug report is for *JIRA Cloud*. Using *JIRA Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/JRASERVER-20916].\r\n  {panel}\r\n\r\nh3. Steps to Reproduce:\r\n1. Create a shared filter having similar JQL:\r\n{code}\r\nproject in (PROJECT1, PROJECT2) ORDER BY created DESC\r\n{code}\r\n\r\n2. Login as a user having only browse permission for \"PROJECT2\".\r\n3. View the filter in issue navigator.\r\n4. It shows user the number of issues allowed to see. Add a \"filter results\" gadget on the dashboard.\r\n5. Select the filter.\r\n\r\nh3. Result:\r\nThe user gets error message \"The selected filter filter-<ID> has an error: A value with ID '<ID>' does not exist for the field 'project'..\r\n\r\nh3. Expected:\r\nHere also user should be able to view issues from project having browse permission.\r\n\r\nh3. Update\r\n\r\nThe same happens when issue keys are specified in the filter query, but then the issues have a security level whose the login user does not have permissions on. In that case the issue key will be replaced by the issue ID in the search when opening the results, which breaks the search:\r\n{code}\r\nIssue does not exist or you do not have permission to see it.\r\n{code}\r\n !Screen Shot 2022-04-28 at 10.09.21.png|thumbnail!  !Screen Shot 2022-04-28 at 10.07.00.png|thumbnail! \r\n\r\n\r\nh3. Notes\r\n\r\nAttempting to access the XML view of a filter with this configuration will result in a HTTP 400 with an error similar to \"HTTP Status 400 - A value with ID '10000' does not exist for the field 'project'.\" as per the attached image.","createDate":"2010-04-07T04:00:34.000+0000","comments":[{"text":"Attaching screenshot.","author":"Veenu Bharara"},{"text":"This is due to the fact that JQL execution treats explicit project selection as an error. We need to rethink this. Maybe parametise the JQL executor to not do this for shared filter usage from a gadget.","author":"Chris Mountford"},{"text":"We would be very glad if you could pay attention to this problem, because it is an annoying handicap when using shared dashboards.","author":"SimoneK"},{"text":"Just some thoughts on this...\n\nThe problem seems to be that filters can be shared with people who do not have access to some projects. We could fix this in a number of ways:\n* unshare the filters with people who lack the appropriate permissions for that filter, or\n* instead of failing the JQL search, we could silently just remove that query section.","author":"Eric Dalgliesh"},{"text":"Has there been any progress on this issue? It is negatively affecting our organization.","author":"HealthTrust System Engineering"},{"text":"Hi [~chris.milam],\n\nThanks for expressing your interest in this fix, unfortunately this is not currently in the short-term backlog for an upcoming JIRA maintenance release.\n\nHaving said that, this is still an issue we would like to fix when we are working trough other bugs in the Gadgets area. Please watch this issue as I will update it as soon as new information becomes available.\n\nIn the meanwhile, as a workaround, users should still be able to see the results of the shared filter via the issue navigator. \n\nWe are sorry that this is causing pain for your users, and I hope the additional information helps.\n\nRegards,\n\nOswaldo Hernández. \nJIRA Bugmaster.\n[Atlassian].","author":"Oswaldo Hernandez"},{"text":"I've seen a couple of issues like this one where someone from Atlassian puts an \"occurrence factor\" on the issue that estimates the prevalence of the problem.  I'm curious about how Atlassian arrives at the percentage given.  I know they probably have good data on the cloud-based instances, but I wonder how much insight they have into server-based instances.\n\nIn our case:  when a project is over, we assign it a permission scheme that makes it readonly for everyone.  After a time, we make the project hidden altogether.   In addition, our security team makes us pretty diligent about removing people's access to projects when they move on to other assignments.  It seems like there are probably plenty of companies like mine who choose to run server-based instances behind firewalls for a reason.   Security is one of those reasons, so I would think there are other server-based instances whose security policies are similar to ours.   I only have one vote on this issue, but we have 5000+ users in our instance.","author":"DaveT"},{"text":"It is definitely not what I would expect to happen. If a user doesn't have permission to view a project, then the gadget results should simply not include that data. Not error out","author":"MattS"},{"text":"Hi all,\n\nJust a quick status update. \n\nIn order to be able to tackle this bug, it would be necessary to implement the improvement described at JRA-40245.\n\nRegards,\n\nOswaldo Hernández. \nJIRA Bugmaster.\n[Atlassian].","author":"Oswaldo Hernandez"},{"text":"I also commented in JRA-40245 but wanted to comment here as well since these are related issues...\n\nWe have an agile board with multiple \"customers\" (represented by projects) and we want to share access to the board (specifically the backlog view) with those users who have \"BROWSE\" access to ONE of several projects.. HOWEVER, we can't do this because the users must currently have \"BROWSE\" permission on ALL of the projects returned from the shared filter (which drives the issues in the board). Today, when the users who are restricted to view a single project login, they see the board with NO ISSUES because of the limitation of the filter.\n\nIdeally, as described above, if I have filter criteria which includes a project for which a user has BROWSE permission, they will see those results which are related to the specific project issues they are permitted to BROWSE.\n\nThis would allow us as a consulting company to share our sprint boards and our backlog views with our customers, without creating separate boards and running sprints for each customer separately.\n\nI would argue that making this change would be critically valuable when it comes to running a collaborative sprint with mixed permissions.","author":"Sean Hayes"},{"text":"Due to an extended period of inactivity and low interest this bug has been auto-closed. If you’re still experiencing this issue, please comment and we’ll re-open to triage.\r\n\r\nCheers,\r\n\r\nDylan - Service Enablement @ Atlassian","author":"Dylan"},{"text":"Dylan, when can we expect this but to be fixed?\r\n\r\n \r\n\r\nthis was working up till may now I'm getting this problem. this is an active issue. ","author":"Josh"},{"text":"With the changes in [JQL queries containing issuekey or issue will have the error messages and response code changed|https://community.developer.atlassian.com/t/jql-queries-containing-issuekey-or-issue-will-have-the-error-messages-and-response-code-changed/48242] (\"JQL queries with issuekey or issue will be returning different error messages and status codes in case of nonexisting project or lack of permissions.\") this may now happen when the query includes an issue key, as well as a project key, that the user does not have permission to access.","author":"joe"},{"text":"Hey when is this going to be fixed? the above change has been very detrimental to my organization. this is causing us to have to create hundreds of duplicate filters and dashboards to support individual projects. This is another example of Atlassian making changes without viewing how their users are utilizing the software. \r\n\r\n \r\n\r\n[https://community.developer.atlassian.com/t/jql-queries-containing-issuekey-or-issue-will-have-the-error-messages-and-response-code-changed/48242] - this \"fix\" is actually not a fix! users could already not see the full key if they didn't have access to the other project. so the fix was not thought through, and not understood what the ramifications would be and closed out for comments less than a month after creation and change. while there are request to have it fixed that are much older. Please Jira FIX this! please remove the change!","author":"Josh"}]},{"summary":"Project Automation : Missing visual instructions for mandatory form fields","key":"JIRAAUTOSERVER-1118","url":"https://jira.atlassian.com/browse/JIRAAUTOSERVER-1118","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe visual instruction has not provided for the mandatory field that contains the asterisk.\r\nh3. Steps to Reproduce\r\n # Select the \"Administration\" icon from top navigation.\r\n # Navigate to the Manage Apps -> expand \"Automation for Jira\" drop down -> \"Get started\" button.\r\n # Select the \"Automate a sample project\" button.\r\n #  Select the \"Automate\" button.\r\n #  Select \"Create rule\" from the top right corner.\r\n #  Select the \"Skip tour\" link. Note that you only have to select this link first time.\r\n #  Select trigger \"Issue commented\" from the menu.\r\n # Save the \"Issue commented\" trigger\r\n # Select \"New condition\" Component.\r\n # Select \"Issue fields condition\" field.\r\n # Observe that the meaning of \"*\" is not provided visually.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2025-03-24 at 4.23.19 pm.png|thumbnail!\r\nh3. Actual Results\r\n\r\nAlthough the instruction \"* Required\" is provided for mandatory fields such as \"Field\", \"Condition\", and (Value and Field in the tab) “ the instruction is not visible on the page.\r\n\r\nAs a result, cognitive users might not be able to identify the mandatory fields.\r\nh3. Expected Results\r\n\r\nThe meaning of an asterisk should be visible so that all users can understand it.\r\n\r\nEnsure that the instruction \"* Required\" is visible on the page.\r\n\r\nFor more info, refer to the following link: [https://www.w3.org/WAI/WCAG22/Techniques/html/H90]\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-24T12:38:36.000+0000","comments":[]},{"summary":"Assets custom field doesn't retrieve any values in Automation.","key":"JIRAAUTOSERVER-1111","url":"https://jira.atlassian.com/browse/JIRAAUTOSERVER-1111","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAssets custom field doesn't retrieve any values in Automation, even when using the object name (which should work).\r\nh3. Steps to Reproduce\r\n # Create project (you can use an example project with sample data, such as Assets IT Service Management)\r\n # Go to the Automation area under Project Settings\r\n # Create a new rule\r\n # Select any event trigger, such as Issue commented\r\n # Add a new action of type Edit issue\r\n # Select an Assets field, such as Affected Server\r\n # Try to search for an object associated with it, like exchange* (for the example project of point 1)\r\n # The field will load forever and you'll see a 400 error in the browser console:\r\n{code:java}\r\nGET\r\nhttps://linux-92270.prod.atl-cd.net/jsm/rest/insight/1.0/iql/objects?iql=objectTypeId=21 and Name like exchange\r\nStatus\r\n400\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe object is retrieved successfully.\r\nh3. Actual Results\r\n\r\nThe field keeps loading and never returns an object.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\n\r\nThe issue does not occur on (at least) versions 5.17.5 / 10.4.0.","createDate":"2025-02-13T09:10:22.000+0000","comments":[]},{"summary":"Insight update job cause failure on automation rule and throws an error - \"Value 'xxxxxxxxxx' is outside of valid range for type java.lang.Integer\"","key":"JIRAAUTOSERVER-1018","url":"https://jira.atlassian.com/browse/JIRAAUTOSERVER-1018","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes \r\nh3. Steps to Reproduce\r\n # Set up DC environment (v9.12.4) with MySQL v8 and A4J built in version v9.1.1.\r\n # Create an automation rule from (tested on global automation) and create actions to trigger the rule. \r\n # We can see the tables \"AO_589059_RULE_STAT_ROLLUP_DAY\" and \"AO_589059_RULE_STAT_ROLLUP_HR\" updated with increments in ID column. \r\n # Set value of last ID column to a bigint value (eg: 4591732034) that's out of integer range.\r\n # Wait for the Insight scheduled jobs (System --> Scheduler Details) to run:\r\n\r\n * com.codebarrel.jira.plugin.automation.schedule.RuleInsightsUpdateScheduler.DAY.job\r\n * com.codebarrel.jira.plugin.automation.schedule.RuleInsightsUpdateScheduler.HOUR.job\r\n\r\nh3. Expected Results\r\n\r\nThe Schedule runs successfully\r\nh3. Actual Results\r\n\r\nJob fails and there is error thrown in the application logs. It's a bit complex to trigger - in order to reproduce the error, it's necessary for one of the table entries with a large ID value to *also* have its *category* (i.e. state) column set to *IN_PROGRESS*\r\n\r\nThe below exception is thrown in the atlassian-jira.log file:\r\n{noformat}\r\n2024-05-03 09:39:33,238+0200 Caesium-1-3 ERROR anonymous     [c.c.j.p.automation.schedule.RuleInsightsUpdateJob] Error executing rule insights update job\r\ncom.querydsl.core.QueryException: Caught SQLDataException for select `AO_589059_RULE_STAT_ROLLUP_DAY`.`ID`, `AO_589059_RULE_STAT_ROLLUP_DAY`.`RULE_ID`, `AO_589059_RULE_STAT_ROLLUP_DAY`.`CREATED`, `AO_589059_RULE_STAT_ROLLUP_DAY`.`AUDIT_ID`\r\nfrom `AO_589059_RULE_STAT_ROLLUP_DAY` `AO_589059_RULE_STAT_ROLLUP_DAY`\r\nwhere `AO_589059_RULE_STAT_ROLLUP_DAY`.`CATEGORY` = ? and `AO_589059_RULE_STAT_ROLLUP_DAY`.`CREATED` <= ?\r\norder by `AO_589059_RULE_STAT_ROLLUP_DAY`.`CREATED` asc\r\n\tat com.querydsl.sql.DefaultSQLExceptionTranslator.translate(DefaultSQLExceptionTranslator.java:50)\r\n\tat com.querydsl.sql.Configuration.translate(Configuration.java:459)\r\n\tat com.querydsl.sql.AbstractSQLQuery.fetch(AbstractSQLQuery.java:493)\r\n\tat com.codebarrel.jira.plugin.automation.store.JiraRuleInsightStore.lambda$getInsightCategoryDetailsEarlierThan$10(JiraRuleInsightStore.java:311)\r\n\tat com.codebarrel.data.api.jira.JiraDbConnectionManager.lambda$execute$0(JiraDbConnectionManager.java:47)\r\n\r\n-----snip-----\r\n\r\nCaused by: java.sql.SQLDataException: Value '4591732034' is outside of valid range for type java.lang.Integer\r\n\r\n-----snip-----\r\n\r\nCaused by: com.mysql.cj.exceptions.NumberOutOfRange: Value '4591732034' is outside of valid range for type java.lang.Integer{noformat}\r\nWith postgres DB\r\n{code:java}\r\n----snip-----\r\nCaused by: org.postgresql.util.PSQLException: Bad value for type int : 3213385379 {code}\r\nh3. Workaround\r\n\r\nThe work around from this [KB article|https://confluence.atlassian.com/automationkb/integer-out-of-range-database-error-on-automation-for-jira-app-1044777880.html] should work here since it helps to truncate the table and reset ID value. Since MySQL incremental value is different from Postgres, truncate the tables with below queries. \r\n(!) Always take a [backup|https://confluence.atlassian.com/adminjiraserver/backing-up-data-938847673.html] of your database before applying any scripts or changes to the PROD database.\r\n{code:java}\r\nTRUNCATE AO_589059_RULE_STAT_ROLLUP_HR;\r\nTRUNCATE AO_589059_RULE_STAT_ROLLUP_DAY;\r\nALTER TABLE AO_589059_RULE_STAT_ROLLUP_HR AUTO_INCREMENT = 1;\r\nALTER TABLE AO_589059_RULE_STAT_ROLLUP_DAY AUTO_INCREMENT = 1; {code}","createDate":"2024-05-08T06:51:59.000+0000","comments":[{"text":"The problem also occurs with Postgres 14.12 on Jira DC 9.17 (with bundled Automation 9.2.0).","author":"Ulrich Hobelmann [catworkx.com]"}]},{"summary":"Setting resolution field as an edit issue action does not set the resolved date of issue","key":"JIRAAUTOSERVER-960","url":"https://jira.atlassian.com/browse/JIRAAUTOSERVER-960","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSetting the resolution field as an edit issue action does not set the resolved date of the issue\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Create an automation rule with an issue transitioned trigger.\r\n #  An Edit issue field action to set the Resolution field\r\n !Screenshot 2023-11-30 at 9.00.22 PM 1.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\nIssue is transitioned and the Resolution and Resolved date is set successfully. As the trigger is issue transitioned trigger, expect the Resolved date to be set.\r\nh3. Actual Results\r\n\r\nThe issue  resolution is set, but not resolved date\r\n\r\n \r\nh3. Workaround\r\n\r\n* Set resolution field in the Transition Issue action instead of in the Edit issue fields action\r\n !screenshot-1.png|thumbnail! \r\nor\r\n* Set resolution field with a Update Issue field post-function in your transition, and skip Resolution in the Edit issue fields action entirely.","createDate":"2023-11-30T15:39:50.000+0000","comments":[{"text":"Happy New Year, everyone! May it be filled with joy, success, and - who knows - maybe even some miracles. Like Atlassian resolving to fix this bug. We can dream, right?","author":"Tobias Bosshard"},{"text":"There is an inherit assumption that once the resolution is set, the date and time of that action is logged as the resolution date. The mere fact that this is completely different is baffling. ","author":"Tom Tran"},{"text":"I wonder if there's a workaround? \uD83E\uDD72\r\n\r\nCan confirm (for the record) that this bug/behavior is still present in Jira Automation 9.2.3.","author":"Dave Liao"},{"text":"... this bug/behavior is *NOT* in Jira Automation 10.3.2, so that's promising.","author":"Dave Liao"}]},{"summary":"Syncing a large Why field to Jira causes Jira Server to critically fail","key":"JIRAALIGN-8124","url":"https://jira.atlassian.com/browse/JIRAALIGN-8124","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBecause of Jira Server's Lucene apache version, data syncs greater than 32766 bytes will cause a failure on the Jira instance that cannot be silently resolved.\r\nh3. Steps to Reproduce\r\n # Link an instance of Jira Server and Jira Align\r\n # Create a Why field on a Feature with >32766 bytes (generally about 32,000 characters)\r\n # Sync the field back to Jira\r\n # Jira will crash with this request.\r\n\r\nh3. Expected Results\r\n\r\nJira Align should provide a warning when attempting to save a Why field with such a large data set\r\nh3. Actual Results\r\nJira Align will still push the entry to Jira, causing Jira to fail.\r\nh3. Workaround\r\n* Limit Why field entries to under 32766 bytes","createDate":"2025-04-01T22:34:17.000+0000","comments":[]},{"summary":"Enterprise Insights - HTML Entities In Description Fields","key":"JIRAALIGN-8123","url":"https://jira.atlassian.com/browse/JIRAALIGN-8123","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn description fields on work items in Jira Align which support rich text editing, the corresponding record in Enterprise Insights does not properly format/exclude HTML entities.\r\nHTML tags are no longer seen on the EI description following [JIRAALIGN-392|https://jira.atlassian.com/browse/JIRAALIGN-3927] release, but HTML entities can be seen. This impacts customers reporting and use of EI alongside reporting tools that don't support these values.\r\nh3. Steps to Reproduce\r\n # On Jira Align, Create Epic/Capabilities (or any work item that allows rich text editing in the description field)\r\n # Input a description that includes any of the following common values: &, 'double spacing', \", <, >\r\n # Save\r\n # Wait for some time for data refresh to Enterprise Insights (EI)\r\n # Query Description field of the created work item on EI\r\n\r\nh3. Expected Results\r\n\r\nThe value in the description field should contain the actual characters inputted by the user\r\nh3. Actual Results\r\n\r\nThe value in the description field shows HTML entities representing the characters inputted by the user, instead of the actual characters.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T14:38:55.000+0000","comments":[]},{"summary":"Sprint Metric (M1) report - Sprint Goals Table Missing ","key":"JIRAALIGN-8121","url":"https://jira.atlassian.com/browse/JIRAALIGN-8121","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Objective Goals table is missing in Program Sprint Metric (M1) report\r\nh3. Steps to Reproduce\r\n # PI must exist in the system, and be tied to a program. \r\n # Sprints must be created and tied to a PI.\r\n # Teams must be created and tied to a program. \r\n # Stories must be created and tied to a sprint. \r\n # Stories must be pointed (have story points assigned). \r\n # Set Goals for a few of your sprints\r\n # Access Program > Reports > Sprint Metric (M1)\r\n # Note that all the areas (tables) were displayed except by Sprint Goals\r\n ## Please refer to [*Sprint Metric M1*|https://help.jiraalign.com/hc/en-us/articles/115004398087-Sprint-metrics]\r\n\r\nh3. Expected Results\r\n\r\nThe Sprint Goal table should be displayed as per our official documentation\r\nh3. Actual Results\r\n\r\nThe Sprint Goal table is missing\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T14:42:48.000+0000","comments":[]},{"summary":"'Accepted date' of the JA work-item is updated after modifying a field from ADO","key":"JIRAALIGN-8082","url":"https://jira.atlassian.com/browse/JIRAALIGN-8082","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you change the state of a work items the \"Accepted Date\" is updated with the expect timestamp at the moment of the state is changed to  \"Accepted\".\r\nIt is observed that the \"Accepted date\" changes always even with any update being made on the work-items in ADO for example adding a tag or change the title.\r\n\r\nBusiness Impact\r\n\r\nThis gives all wrong reports to the stakeholders.\r\nh3. Steps to Reproduce\r\n * Create a Work-item in JA and sync with ADO\r\n * Change the State of the WorkItem to \"Accepted\", the \"Accepted Date\" is update with the date (in UI is not visible the time), in the image is 11 March\r\n\r\n!image-2025-03-12-12-35-44-919.png|width=486,height=384!\r\n *  The second day update the work-item in ADO, for example change the title or add a tag\r\n * Wait for the sync\r\n * You can observe that the \"Accepted Date\" is change to 12th of March\r\n * This change reflect in Enterprise Insight as well\r\n\r\n!image-2025-03-12-12-37-14-340.png|width=466,height=326!\r\nh3. Expected Results\r\n\r\nThe \"Accepted Date\" does not change\r\nh3. Actual Results\r\n\r\nThe \"Accepted Date\" change\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-12T11:39:16.000+0000","comments":[]},{"summary":"Creating capability using Import functionality in Jira Align creates incorrect data in Enterprise Insights and JA Table","key":"JIRAALIGN-8042","url":"https://jira.atlassian.com/browse/JIRAALIGN-8042","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"Program Increment List\" column in the \"Capability History\" table shows incorrect data when multiple capabilities are created using the Import functionality\r\n\r\nAs a result, the EI data will show a [Program Increment List] column for the [Capability History] table, with the Incorrect data. It displays PIs that are not assigned to the Capability.\r\nh3. Steps to Reproduce\r\n # Create an Excel file to import multiple capabilities (with PI information) (following steps outlined in the help page: [https://help.jiraalign.com/hc/en-us/articles/115000088674-Import-objects-via-Excel-overview])\r\n # Wait for the Enterprise Insight replication to complete\r\n # Run, for example, the following query\r\n{code:java}\r\nselect [Capability Fact Valid To], [FK Capability ID], [Program Increment List] from current_dw.[Capability History] \r\nwhere [FK Capability ID] > \"imported Capability ID\"\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe \"Program Increment List\" column should not display the Program Increment IDs that are not linked to Capability\r\nh3. Actual Results\r\n\r\n\"Program Increment List\" displays the PIs that are not linked to the Capability\r\n!image-2025-02-21-20-09-50-829.png|width=414,height=43!\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-21T14:42:37.000+0000","comments":[]},{"summary":"Quick Add of Dependency from Feature slide-out pre-fills title/description.","key":"JIRAALIGN-7968","url":"https://jira.atlassian.com/browse/JIRAALIGN-7968","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDoing a quick add of Dependency from Epic/Capacity slide-out does not prefill title/description. It only pre-fills the PI/depends-on and gives the user to add title and description to the dependency.\r\n\r\nHowever, when we do a quick add of Dependency from the Feature slide-out, it prefills the title and the description of the new dependency with the exact tile and description of the feature.\r\n\r\nThis is reproducible on Data Center: NA\r\nh3. Steps to Reproduce\r\n\r\n # open a capability or epic and from the slide out, scroll down to dependency section and click on + to quick add dependency. Notice that title and description is blank. Only PI/Dependendent by is prefilled - expected\r\n # open a feature and from the slide-out, scroll down to dependency section and click on + to quick add dependency. The title and description is pre-filled with same detail as features that too converted from RTF to normal.\r\n\r\nh3. Expected Results\r\n\r\nQuick add of dependency from Feature should not pre-fill title and description of the dependency\r\n\r\nh3. Actual Results\r\n\r\nQuick add of dependency from Feature should pre-fills title and description of the dependency\r\n\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-28T13:57:29.000+0000","comments":[]},{"summary":"Clicking \"Save and Close\" on an external report saves but does not close. ","key":"JIRAALIGN-7952","url":"https://jira.atlassian.com/browse/JIRAALIGN-7952","type":"Bug","priority":"","description":"h3. Issue Summary\r\nClicking \"Save and Close\" on an external report saves but does not close the rollout of the opened external report. \r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n# Select a Program\r\n# Select  \"Reports\" and \"External reports\" from the list.\r\n# Select \"edit\" on an available external report. \r\n# Make an edit to the report.\r\n# Click \"Save and close\".\r\n\r\nh3. Expected Results\r\nExternal report is saved and roll out closes. \r\nh3. Actual Results\r\nReport saves and displays \"Updated successfully\" flag  but rollout does not close. \r\n\r\nh3. Workaround\r\nAfter saving, you can click the X to close the rollout. ","createDate":"2025-01-21T20:08:16.000+0000","comments":[]},{"summary":"Program Board loads extra PIs/anchor sprints when filter is reset in a different page and an item on the board is changed","key":"JIRAALIGN-7818","url":"https://jira.atlassian.com/browse/JIRAALIGN-7818","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Program Board reload can get cluttered by additional Program Increments (PIs)/anchor sprints on reload when saving work items if the filter is changed on a different JA page.\r\nh3. Steps to Reproduce\r\n # Navigate to Program Board, select 1 PI in the left filter, it should have some associated work items\r\n # Open a new JA tab, can be any page with left PI filter, for example Portfolio Room\r\n # Remove PI from filter, apply, close this second tab\r\n # On the first tab with Program Board, refresh the page\r\n # Observe that the original PI is still selected and the correct data loads\r\n # Open an objective quick view, click on the title to go to the details panel\r\n # Change the item's description, slick Save and Close\r\n # Observe that the Program Board loads unrelated PIs cluttering the view\r\n\r\nPS.: There is no need to have multiple tabs to observe the symptom. Just by refreshing some data in the work item it will make the PI filter to get screwed.\r\n\r\nh3. Expected Results\r\n\r\nProgram Board should not be affected by other reports and should refresh with the data correctly when making changes.\r\nh3. Actual Results\r\n\r\nUnfiltered PIs load.\r\nh3. Workaround\r\n\r\nSelect a different PI in the filter on the Program Board, then select the original PI, this should reset the filtering correctly and the page should work again.","createDate":"2024-11-25T02:18:02.000+0000","comments":[]},{"summary":"Objective Screen Slides Out and Not Displaying Correctly in Themes/Epics","key":"JIRAALIGN-7814","url":"https://jira.atlassian.com/browse/JIRAALIGN-7814","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen adding or opening an Objective within Themes or Epics, the user interface window is cut off, preventing the Objective from being displayed correctly in the window.\r\nh3. Steps to Reproduce\r\n # Navigate to a Theme or Epic under the Program.\r\n # Attempt to add a new Objective or open an existing Objective.\r\n # Observe that the Objective window is sliding out of view and is partially cut off.\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\nThe Objective should fit correctly within the window when opened under Themes or Epics, without any part of it sliding out or being cut off.\r\nh3. Actual Results\r\n\r\nThe Objective screen, when opened under a Theme or Epic, is partially cut off, making it difficult to view all content.\r\nh3. Workaround\r\n\r\nTo temporarily resolve the issue, the user can:\r\n * Zoom out the browser to 90%, then zoom back in to 100%.\r\n\r\n * Alternatively, moving the browser tab causes the display to automatically adjust.","createDate":"2024-11-22T13:42:29.000+0000","comments":[]},{"summary":"Roadmaps: Renaming Features to Epics and Grouping by Product breaks View Configuration button/filters for that view","key":"JIRAALIGN-7768","url":"https://jira.atlassian.com/browse/JIRAALIGN-7768","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Roadmaps, when feature work item is named Epic/Epics in platform terminology, and View Configuration → Group By Property is set to Product,  View Configuration button stops working on the feature level.\r\nh3. Steps to Reproduce\r\n # Set Feature platform terminology to Epic and Epics, save\r\n # Go to roadmaps, select item level other than features/Epics\r\n # In View Configuration go to Other Options → Group By Property set to Product, apply\r\n # Select item level Features/Epics\r\n # View Configuration button is broken now, nothing happens when clicking it\r\n # Optionally, go to a different item level and set Group By Property to something else\r\n # Come back to Features/Epics, View Configuration button now works, but when looking at the Group By Property - Product is not available for selecton\r\n\r\nh3. Expected Results\r\n\r\nThe button should work.\r\nh3. Actual Results\r\n\r\nIn feature level Roadmaps, when clicking View Configuration, the menu doesn't open up, nothing happens.\r\nh3. Workaround\r\n\r\nSelect a different level item in the Roadmap like JA Epics/Initiatives and select a different Group By Property.\r\n\r\nRenaming feature work items to something other than Epic and Epics (even just adding a few extra characters) makes the button work again too.","createDate":"2024-11-13T00:27:02.000+0000","comments":[{"text":"Hi Folks,\r\n\r\nI'm the Product Manager for Roadmap. We're closing this item as Won't Fix, as there is a suitable workaround. We will instead focus on addressing higher priority functionality improvements. \r\n\r\nThanks","author":"Andrew Zhang"}]},{"summary":"Ideation - Admin group not able to change the settings on the idea group","key":"JIRAALIGN-7650","url":"https://jira.atlassian.com/browse/JIRAALIGN-7650","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter adding a user as group Admin Ideation > Setup > admins, the user is not able to change/ update its assigned Ideation Group.\r\n\r\nBy adding the permission toggle *Ideation -> Manage Groups* this same user it gains has access to update, create and delete *all* the groups even the ones he doesn't have access to as admin/ contributor.\r\n\r\nIt's the opposite written in Jira Align official documentation: [Ideation - Jira Align|https://help.jiraalign.com/hc/en-us/articles/115002754474-Ideation#:~:text=Question%2C%20or%20Ticket.-,Admins.%20Idea%20group%20admins%20can%20change%20the%20settings%20on%20the%20idea%20group.,-Contributors.%20Only%20Contributors]\r\n\r\nOn this condition, the user can't manage only the groups it is assigned as admin but all available ones.\r\n\r\n\r\n\r\nThis is reproducible: (yes) \r\nh3. Steps to Reproduce\r\n # As super admin add another user (non-super admin) as the Idea group administrator let us say *Test Group*\r\n # Remove from this user role permission *Ideation - > Manage Group*\r\n # Note: even as admin he can't change the test group settings\r\n # now add to this user role permission Ideation - > Manage Group\r\n # Note that now it has *Setup* button on Ideation and can work as admin of *Test Group* however he also manages all the other groups created even though it has no assignment to other Groups as admin\r\n\r\nh3. Expected Results\r\n\r\nIf the user is an Idea group admin from *Test Group* it is supposed to have access to manage only this idea group and not all the other availables\r\nh3. Actual Results\r\n\r\nUser with Ideation - > Manage Group has access to update all the idea groups regardless it has admin access to the Idea groups\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-10T19:17:49.000+0000","comments":[]},{"summary":"REST API: PATCH to Update Features Field removes CapacityRank and modifies Points, T-shirt values","key":"JIRAALIGN-7580","url":"https://jira.atlassian.com/browse/JIRAALIGN-7580","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen updating the following fields of a Feature through API PATCH the field capacityRank is removed:\r\n * category\r\n * portfolioAskDate\r\n\r\nAs an additional note, we also see the Points and T-Shirts size details get modified upon updating the PortfolioAskDate to null.\r\n\r\n!Points.png|width=430,height=211!\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n\r\n1. Send the following API call:\r\n{code:java}\r\nPATCH /align/api/2/Features/{id}\r\n[\r\n  {\r\n    \"op\":\"replace\",\r\n    \"path\":\"category\",\r\n    \"value\":\"2\"\r\n  }\r\n] \r\nPATCH /align/api/2/Features/<FeatureID>\r\n[{ \r\n\"value\": null, \r\n\"path\": \"/portfolioAskDate\", \r\n\"op\": \"replace\" \r\n}]\r\n{code}\r\n2. View the Audit Log of the Features from the UI\r\n\r\n!image-2024-09-25-11-27-14-127.png|width=455,height=140!\r\n\r\n!Capacity Rank.png|width=413,height=127!\r\n\r\n \r\nh3. Expected Results\r\n\r\nThe API call should only modify the intended fields without removing the CapacityRank, Points, T-shirt value.\r\nh3. Actual Results\r\n\r\nThe CapacityRank value is removed; Points and T-shirt value are modified.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-09-25T01:29:19.000+0000","comments":[]},{"summary":"Dependency Filter - \"Depends On\" and \"Requested From\" are not respecting the terminology","key":"JIRAALIGN-7572","url":"https://jira.atlassian.com/browse/JIRAALIGN-7572","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Jira Align v11.2.1, the Dependency Filter \"Depends On\" and Requested From\" do not respect the terminology set by the user in the Jira Align.\r\n\r\n\r\n\r\nh3. Steps to Reproduce\r\n # Go to Jira Align -> Dependency -> Filter\r\n # Select \"Depends On\" and Requested From\"\r\n\r\nh3. Expected Results\r\nThe filter respects the Jira Align terminology set by the user, like the example below:\r\n !image-2024-09-23-17-58-02-305.png|thumbnail! \r\n\r\nIt was the behavior expected in the Jira Align 11.1.1.\r\n\r\nh3. Actual Results\r\n\r\nIt is showing \"External,Program,Team\"\r\n !image-2024-09-23-17-56-41-330.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-09-23T20:59:00.000+0000","comments":[{"text":"I also cannot repro this in latest.","author":"Nick Gretta"}]},{"summary":"Product enabled on ideation form is not visible on external idea creation slide-out","key":"JIRAALIGN-7448","url":"https://jira.atlassian.com/browse/JIRAALIGN-7448","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nProduct enabled on ideation form is not visible on external idea creation slide-out\r\nh3. Steps to Reproduce\r\n # Create an ideation form with Product enabled and link it to an ideation group\r\n!Form_product-1.png|width=372,height=165!\r\n # Copy the link of the ideation group and share with external user\r\n # When an external user uses the group link and tries to create an idea, the product is blank though the product can be chosen via the dropdown.\r\n!Product_Blank.png|width=356,height=202!\r\n\r\nh3. Expected Results\r\n\"Product\" should be visible so that external users are aware of what to choose on the ideation form.\r\n\r\nh3. Actual Results\r\nProduct enabled on ideation form is not visible on external idea creation slide-out\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior.","createDate":"2024-08-19T10:27:32.000+0000","comments":[]},{"summary":"Incorrect Audit Logs for Ideation in Jira Align","key":"JIRAALIGN-7378","url":"https://jira.atlassian.com/browse/JIRAALIGN-7378","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIncorrect Audit log for Ideas created within Jira Align.\r\n\r\nh3. Steps to Reproduce\r\n # Subscribe an Idea created in Jira Align.\r\n# Check Audit Log for the Idea.\r\n\r\nh3. Expected Results\r\n\r\nAudit log should list the name of the user who Subscribed to it.\r\n\r\nh3. Actual Results\r\n\r\nAudit log entries for the Subscribed user is incorrect. \r\nFor Ex: Audit log has entires like \"User A subscribed User B,\". However User B themselves subscribed to the Idea.\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-07-29T05:37:46.000+0000","comments":[]},{"summary":"Ideation: It's possible to create an idea without category/type selected, and this idea will not show in the UI","key":"JIRAALIGN-7341","url":"https://jira.atlassian.com/browse/JIRAALIGN-7341","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIt's possible to create an idea without a category/type selected, and this idea will not show in the UI.\r\nh3. Steps to Reproduce\r\n\r\nIf the category field doesn't show or is removed from the new idea form, the form can be submitted without any error and an idea is created without category.\r\n\r\nThis sometimes happens at random when creating ideas.  For whatever reason, the category field doesn't populate and isn't saved when the idea is created.  I cannot reproduce this on demand, but it does happen.\r\nh3. Expected Results\r\n\r\nTypically, it's not possible to leave the category field blank, there's always a default option. Creating an idea via API also fills in the default category, even when we specify an invalid or null category. So it's expected the category will default to first choice and can be changed later.\r\nh3. Actual Results\r\n\r\nAn idea created this way gets categoryId=null, and while it shows in the count, it can't be accessed via a card.\r\n\r\n!image-2023-08-30-18-05-38-209.png|thumbnail!\r\nh3. Workaround\r\n\r\nIt is possible to find these ideas via API and remove them 1 by 1 via browser. We recommend doing so with care. If you're not sure about the below steps or have other questions, please reach out to support.\r\n # Use API to get the idea id\r\n{code:java}\r\n GET https://<your ja site>/rest/align/api/2/ideas?$filter=categoryId eq null{code}\r\n\r\n # Once you know the id, go to URL: https://<your ja site>/izone?iZoneID=<ideaId>\r\n # The previous step should open up the details panel for this idea with the option to modify or delete the idea\r\n # Deleting the idea will remove the associated votes and data\r\n # Recreate the idea with a category selected after copying the info from the details panel","createDate":"2024-07-19T08:45:28.000+0000","comments":[{"text":"point nr 4 from the workaround is part of the existing process - we don't have a \"null\" / \"blank\" value for the Category - we only allow 1 of the 3 options !image-2024-07-19-12-26-56-264.png|width=324,height=413!","author":"inadasan"},{"text":"Why are the terms \"category\" and \"type\" used interchangeably and inconsistently in ideation?  Pick one. ","author":"John Buchenberger"}]},{"summary":"Custom Room with a score of more than 1, Incorrect OKR Score and % value delivered ","key":"JIRAALIGN-6973","url":"https://jira.atlassian.com/browse/JIRAALIGN-6973","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen the 'Value Delivered'/'Key Result Progress %' exceeds 100%, as this results in you being in the Custom Room with a score of more than 1.   \r\n\r\nThis is reproducible on Data Center: (yes) \r\nh3. Steps to Reproduce\r\n # Step 1. Navigated Custom Room and select Objective updated Key Result  \r\n !customRoom.png|thumbnail!  \r\n # Step 2. Updated scores in key results.   \r\n # Step 3. When the 'Value Delivered'/'Key Result Progress %' exceeds 100%, the score value in OKR hub and Objective slideout shows as 1; however, the score in Custom room shows more than 1, and the percentage of value delivered is inconsistent. \r\n !Score.png|thumbnail! \r\n\r\nh3. Expected Results\r\nBased on article [OKRs: the ultimate guide to objectives and key results|https://www.atlassian.com/agile/agile-at-scale/okr#:~:text=It's%20important%20to%20identify%20measurable,helps%20you%20reach%20your%20objectives.] the scoring scale is from 0 to 1, correct score and % of value delivered vales is shown in custom room, same as OKR hub and Objectives \r\n{quote} \r\nScores – A sliding scale between 0 and 1 that indicates whether you missed, came close to, or hit your stated target for the KR.\r\nFor example:\r\n\r\n.3 = you missed the mark by quite a lot\r\n.7 = you didn't hit your target but made great progress\r\n1 = you hit your stretch target \r\n{quote}\r\nh3. Actual Results\r\nIncorrect score and % of value delivered values are shown in Custom Room. \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-03T03:09:30.000+0000","comments":[]},{"summary":"Enterprise Insights Feature Log Table Containing Invalid FK Feature IDs","key":"JIRAALIGN-6895","url":"https://jira.atlassian.com/browse/JIRAALIGN-6895","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn some specific circumstances, when copying a Feature and later on updating the original Feature (the one that was copied), JA will save in tblAuditLog the field ReqID with the AuditLogID of the last entry (instead of the Feature Id as expected).\r\nh3. Steps to Reproduce\r\n\r\nWe don't have the exact steps for reproducing it, although we can see the info on the audit logs of our internal EI instance AlignSupport_DW\r\n * EI [Fature Log]\r\n\r\n{code:sql}\r\nselect fl.[audit log id], fl.[fk feature id], fl.[Detail Text], fl.[Date Audit Event]\r\nfrom export_dw.[feature log] fl\r\nwhere fl.[Audit Log ID] in (9810882,9810883,9810879,9810878)\r\norder by fl.[Audit Log ID]{code}\r\n||audit log id|fk feature id|Detail Text|Date Audit Event|\r\n||9810878|16975|Feature (Jira Epic) Created (This Feature (Jira Epic) was copied from Feature (Jira Epic): 16970)'|2024-02-27 06:05:00.753|\r\n||9810879|9810878|Feature Updated - Added : FXPP3-MasterFeature1 (Program Increment: FxFY24Q3) (Parent 16970) \\| Feature (Jira Epic) copied from : Feature (Jira Epic) 16970 \\| Program : \\| Program Increment : FxFY24Q3|2024-02-27 06:05:00.757|\r\n||9810882|16976|Feature (Jira Epic) Created (This Feature (Jira Epic) was copied from Feature (Jira Epic): 16974)'|2024-02-27 06:05:01.147|\r\n||9810883|9810882|Feature Updated - Added : FXPP3-MasterFeature2 (Program Increment: FxFY24Q3) (Parent 16974) \\| Feature (Jira Epic) copied from : Feature (Jira Epic) 16974 \\| Program : \\| Program Increment : FxFY24Q3|2024-02-27 06:05:01.150|\r\n\r\n \r\n * Internal tblAuditLog\r\n\r\n||AuditLogID|ReqID|UserID|AuditActivityID|AuditTimeStamp|Details|\r\n||9810883|Req9810882|661802|2|2024-02-27 6:05:01|Feature Updated - <ul style=\"list-style-type:disc\"><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Added : </font><a href=\"https://alignsupport.jiraalign.com/Login?EmailClickType=1&ID=16976\" target=\"_blank\"><font style=\"font-family: Arial;font-weight: bold;font-size: 8pt;color: #3B73B9;\">FXPP3-MasterFeature2 (Program Increment: FxFY24Q3) (Parent 16974)</font></a></li><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Feature (Jira Epic) copied from : Feature (Jira Epic) 16974</font></li><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Program :</font></li><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Program Increment : FxFY24Q3</font></li></ul>|\r\n||9810882|Req16976|661802|2|2024-02-27 6:05:01|Feature (Jira Epic) Created (This Feature (Jira Epic) was copied from Feature (Jira Epic): 16974)'|\r\n||9810879|Req9810878|661802|2|2024-02-27 6:05:01|Feature Updated - <ul style=\"list-style-type:disc\"><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Added : </font><a href=\"https://alignsupport.jiraalign.com/Login?EmailClickType=1&ID=16975\" target=\"_blank\"><font style=\"font-family: Arial;font-weight: bold;font-size: 8pt;color: #3B73B9;\">FXPP3-MasterFeature1 (Program Increment: FxFY24Q3) (Parent 16970)</font></a></li><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Feature (Jira Epic) copied from : Feature (Jira Epic) 16970</font></li><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Program :</font></li><li><font style=\"font-family: Arial;font-size: 8pt;color: #626262;\">Program Increment : FxFY24Q3</font></li></ul>|\r\n||9810878|Req16975|661802|2|2024-02-27 6:05:01|Feature (Jira Epic) Created (This Feature (Jira Epic) was copied from Feature (Jira Epic): 16970)'|\r\n\r\n \r\n\r\nIf you take a look at all the examples present on our JA instance alignsupport.jiraalign.com  (and the customer examples), you can see all of them will be similar.\r\nh3. Expected Results\r\n\r\nJA will save in *tblAuditLog* the field  *Feature ID*  with the *AuditLogID*\r\nh3. Actual Results\r\n\r\nJA will save in *tblAuditLog* the field *ReqID* with the *AuditLogID* of the last entry (instead of the Feature Id as expected)\r\nh3. Workaround\r\n\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-15T17:53:03.000+0000","comments":[{"text":"[~55bc69081443] Thomas's analysis indicates that this is working as expected.  Can you please close this ticket?  Thanks. ","author":"Karen Bradshaw"},{"text":"Can someone please give me an update on where this ticket stands? Is  this still a valid problem?","author":"FERMENICH, JUSTIN D."},{"text":"[~55bc69081443] - how are we doing with this bug? Are there any updates that are available? Thanks, and please let me know if you have any questions.","author":"Foster Cryer"}]},{"summary":"Starred items for custom hierarchy do not display the hierarchy selection","key":"JIRAALIGN-6837","url":"https://jira.atlassian.com/browse/JIRAALIGN-6837","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a user stars an item in a Custom Room, the name of the starred item appears identical to a similar item in a different Custom Room. \r\nThis is due to the Custom Hierarchy name selected is not showing in the item description.\r\n\r\nFor any other work level, the selection show accordingly, making the starred selection easily differentiated\r\nh3. Steps to Reproduce\r\n # go to custom rooms\r\n # Select a custom hierarchy and (optional) select a PI \r\n # go to any grid that can be starred, for example Features grid\r\n # Star the selection\r\n # Go to home and look for the starred item\r\n # Notice that the selection who that it is for a custom room, but fails to show the selection\r\nPI if selected is showing accordingly\r\n\r\nh3. Expected Results\r\n\r\nThe selected hierarchy name should show accordingly when listing the starred items.\r\nh3. Actual Results\r\n\r\nThe selected hierarchy is not showing when it is set as a custom hierarchy\r\n\r\nAnother work levels, like portfolio, program, team, etc... show the selection as expected\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-05T01:01:33.000+0000","comments":[]},{"summary":"Setting the Story Process Step using the JA REST API sets an incorrect step","key":"JIRAALIGN-6746","url":"https://jira.atlassian.com/browse/JIRAALIGN-6746","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn a Jira Align configuration that is integrated to Jira and uses State Mappings in the Process Flow to match a Jira Align State with more than one Jira Align Process step, then setting the Process Step for a story to the second one configured for a specific state incorrectly sets the first process step instead.\r\n\r\nIf the same change is attempted against a feature then the correct (second) process step is set\r\nh3. Steps to Reproduce\r\n # In a Jira integrated configuration use a Jira Workflow that has more statuses than the number of states in Jira Align. \r\n # Setup corresponding Process Flows for Stories and Features  in Jira Align and make sure that Paths 1, 3, 4 & 5 in the following article are all configured to match the work/process flows (also make sure that process steps are enabled in the details panel settings for stories and features)  [https://community.atlassian.com/t5/Jira-Align-articles/Mapping-States-Steps-and-Statuses-between-Jira-Align-and-Jira/ba-p/1354724] This will result in some JA States being mapped to more than one Jira State and more the one JA Process Step.\r\n # Create at least one feature and story in Jira (leaving them both in the initial status) and wait for these work items to be created in Jira Align.\r\n # Use API GET request against the Process Flows (from Step 2) to list the numeric IDs of the process steps for stories and features.\r\n # Then using the order of the Process Steps, as defined in the process flow for stories, attempt, using a PATCH REST API call, to change the processStepId of a story  to the 2nd step (related to the same JA State)\r\n # After submitting the patch call, either using a GET call or by refreshing the story in the JA UI, check to see what the process step has been set to.\r\n # If the story is a child of the feature, then set the story back to the first step in the process flow (as a child story can change the state of a parent feature this is necessary to avoid confusion)\r\n # Repeat  the same test  (steps 5 to 7) but against the feature\r\n # Doing a similar test but using the JA UI seems to work correctly for both stories and features. \r\n\r\n(i) In the support reproduction the following mappings were used:\r\n\r\n \r\n||Process Step\r\n(also the Jira Statuses)||Step IDs\r\nfor Stories||Step IDs\r\nfor Features||State Mapped||\r\n|Open|1227|1235|0 - Pending Approval|\r\n|In Preparation|1228|1236|0 - Pending Approval|\r\n|Prepared|1229|1237|1 - Ready to Start|\r\n|In Progress|1230|1238|2 - In Progress|\r\n|Implemented|1231|1239|3 - Dev Complete|\r\n|In Validation|1232|1240|3 - Dev Complete|\r\n|Resolved|1233|1241|4 - Test Complete|\r\n|Closed (Accepted)|1234|1242|5 - Accepted|\r\n\r\n!image-2024-03-15-11-45-36-839.png|width=448,height=406!\r\n\r\n(i) The body of the patch calls contained:\r\n\r\n \r\n{code:java}\r\n[\r\n  {\r\n    \"op\": \"replace\",\r\n    \"path\": \"/processStepId\",\r\n    \"value\": 1228\r\n  },\r\n] {code}\r\n(!) - there is a bug affecting the story patch calls that means the first time you try this on any specific story you will also need to replace the value of automation with null - see https://jira.atlassian.com/browse/JIRAALIGN-5378 \r\n\r\n \r\n\r\n(i) A demo (from the Atlassian test instance) of using Postman to make PATCH  and GET calls for stories and features, demonstrating that the issue only affects stories has been attached to this ticket.\r\nh3. Expected Results\r\n\r\nBoth the story and the feature PATCH call to change the processStepId should correctly set the Process Step even when two Process Steps are mapped to the same State.\r\nh3. Actual Results\r\n\r\nWhile the feature sets the correct process step if attempting to set the second process step linked to a state then the first Process Step linked to that same state will be incorrectly set instead \r\nh3. Workaround\r\n\r\nUse the JA UI to change Process Steps ","createDate":"2024-03-15T11:55:39.000+0000","comments":[]},{"summary":"Custom Room → Epics grid filter by Custom Hierarchy doesn't work","key":"JIRAALIGN-6324","url":"https://jira.atlassian.com/browse/JIRAALIGN-6324","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustom Room → Epics grid filter by Custom Hierarchy doesn't work.\r\nh3. Steps to Reproduce\r\n # In New Nav, go to a Custom Room\r\n # In the left menu, click on Epics\r\n # Click Apply Filters and select a custom hierarchy and apply it\r\n # Observe same items are shown, the items shown don't necessarily have a link to that custom hierarchy\r\n # Similar issue occurs with just normal Epics grid accessed from Items → Epics, but it seems to filter some epics (so fewer items are shown), but it's not clear why as the remaining epics don't seem to be linked to the selected filter either\r\n\r\nh3. Expected Results\r\n\r\nThe filter should show items with a link to the custom hierarchy selected.\r\nh3. Actual Results\r\n\r\nNo changes in the filtered epics.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2023-12-18T20:49:32.000+0000","comments":[]},{"summary":"Organizational Hierarchy report has performance issues","key":"JIRAALIGN-6234","url":"https://jira.atlassian.com/browse/JIRAALIGN-6234","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe report TeamHierarchy report is a report accessible from the Strategy level in the new navigation\r\nThis report is used to display the full hierarchy based on the  Organization Structure  selected in a snapshot\r\n\r\nIf a snapshot takes a large  Organization Structure  that englobes the whole organization, for very large company structures, this report gets excessively slow, over a minute to load\r\n\r\nh3. Steps to Reproduce\r\n # Go to Strategy/Enterprise and select a large snapshot\r\n# Go to more Item and select Organizational Hierarchy\r\n# Notice the report takes a long time to load\r\nNote: This is applicable for very large organization \r\n\r\nh3. Expected Results\r\nThe report should load relatively quickly, as the legacy top tier filter way oof displaying the full organizational hierarchy\r\n\r\nh3. Actual Results\r\nThe request https://your_JA_instance/GraphFileReportsHelper?FunctionID=DrawTeamHierarchyReport Takes a very long time to load,\r\nThis seems to be related to the function called, that is making multiple depth recursive database calls to build the hierarchy\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-12-01T06:29:00.000+0000","comments":[{"text":"Any progress on this? This is still unusable","author":"Joseph Mao"}]},{"summary":"Import- edit features via import corrupts Theme's assignment","key":"JIRAALIGN-5927","url":"https://jira.atlassian.com/browse/JIRAALIGN-5927","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a feature has a theme assignment changed via import, the change does not apply to all data in the feature's details.\r\nh3. Steps to Reproduce\r\n # Have a Feature A\r\n ** Linked to Epic A\r\n *** Linked to Theme A\r\n # Have a Feature B\r\n ** Linked to Epic B\r\n *** Linked to Theme B\r\n # Edit and Export *Feature B so it links to the Theme A*\r\n # Import the feature to apply the change\r\n\r\nThe new hierarchy should be:\r\n * Theme A\r\n ** Epic A\r\n *** Feature A\r\n *** Feature B\r\n * Theme B\r\n ** Epic B\r\n *** none\r\n\r\nh3. Expected Results\r\n\r\nThe data should show the updated theme across the board, including\r\n * Grid columns\r\n * Feature's details\r\n * Filters\r\n * Requirement Hierarchy\r\n * Export\r\n * etc...\r\n\r\nh3. Actual Results\r\n # (/) In Feature grid, the column for Theme shows Epic the correct new assignment,\r\n ** Feature A = Theme A\r\n ** Feature B = Theme A\r\n # (/) The export function shows the correct result\r\n ** Theme A\r\n *** Children : Epic A + Feature A + Feature B\r\n ** Theme B\r\n *** Children : Epic B\r\n # (x) The filters also apply in the same fashion\r\n ** !https://getsupport.atlassian.com/images/icons/emoticons/check.png|width=16,height=16! Feature A and B shows if filter is set to Theme A\r\n ** !https://getsupport.atlassian.com/images/icons/emoticons/error.png|width=16,height=16! Feature B shows if filter is set to Theme B\r\n # (x) The Feature's details panel show incorrect Theme assignment\r\n ** Feature A show like to Theme A\r\n ** Feature B show link to Theme B\r\n # (x) Requirement Hierarchy Shows the incorrect Assignment as well\r\n ** Theme A\r\n *** Epic A\r\n **** Feature A\r\n ** Theme B\r\n *** Epic B\r\n **** Feature B\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-10-25T02:41:53.000+0000","comments":[{"text":"This is also affecting the underlying Enterprise Insights data, which is very troublesome. \r\n\r\nYou really need to prevent imports from updating the Themes directly on a Feature (essentially bypassing the parenting of a Feature by an Epic and then rolling up to the Theme that is the parent of that Epic).  \r\n\r\n ","author":"J Kidner"}]},{"summary":"Ideation: Admin and Internal Contributors dropdown count ","key":"JIRAALIGN-5816","url":"https://jira.atlassian.com/browse/JIRAALIGN-5816","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on the Data Center: (yes) \r\n\r\nWhen managing or creating an Ideation group, the dropdown options 'Select all' and 'Deselect All' present different and conflicting behavior when the total amount of users is greater than 150 and affects both old and new nav\r\nh3. Steps to Reproduce\r\n # Access JA > Ideation > hit 'Setup'\r\n # Click 'Create New Group' or edit an existing one\r\n # Fill in the Title and select the type (results will be the same) if necessary\r\n # In the Admins/Internal contributor dropdown, hit 'Select All' and notice that 150 users were selected despite the total amount (which should be greater than 150)\r\n # Scroll down to the last user selected and hit 'Select All' again, totalizing 300 users selected\r\n # Click on 'Deselect All' and confirm the action\r\n # Notice that the list is now clear, all the 300 users were deselected\r\n\r\nh3. Expected Results\r\n\r\nWhen you click on 'Selecting All', the system should automatically select all users based on the total amount, rather than selecting a fixed number of 150 users.\r\nh3. Actual Results\r\n\r\nWhen the total amount of users is greater than 150, using the 'Select All' option only selects 150 users at a time. On the other hand, the 'Deselect All' option unselects all the users regarding the total amount of users previously selected\r\nh3. Workaround\r\n\r\nSelecting users in batches of 150 until all of them are selected.","createDate":"2023-10-04T15:14:37.000+0000","comments":[]},{"summary":"Adding more than 4000 Internal Contributors to an Idea Group causes performance issues on Idea Group","key":"JIRAALIGN-4946","url":"https://jira.atlassian.com/browse/JIRAALIGN-4946","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen adding internal contributors to an ideation group, adding over 4000 users to a group at once causes the screen to freeze and the side panel to not correctly close when save and close is selected. Users will eventually save, but then editing that Idea group further has performance issues.  This is challenging due the fact that bulk user management for internal contributors cannot be managed any other way. There is no supported API endpoint or import/export for them.\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n# Go to an Ideation Group>Setup page.\r\n# Select Internal Contributors\r\n# Scroll down the list of users until you have at least 4000 'Shown\" users then select all.\r\n# Select Save and Close. \r\n\r\nh3. Expected Results\r\nResults save and add the users to the Idea Group then close the side panel and an 'Updated Group Successfully' is displayed. \r\n\r\nh3. Actual Results\r\nScreen freezes, occasionally displaying browser based \"Page is unresponsive\" dialogs eventually resulting in a Jira Align page error \"Error on Server.\"   Reloading the page, the group will also display blank fields for internal contributors for a significant amount of time in which the screen cannot be edited until the internal contributors populate. Any edits on the page will also result in the save behavior until the internal contributors are removed.\r\n\r\nThe below exception is thrown in the Browser Console, repeated 3 times per attempt:\r\n{noformat}\r\nadrum-21.2.0.3385.js:30     POST https://<CustomerInstance>.jiraalign.com/AjaxFiles/AjaxDropdown?Type=11 504\r\n(anonymous) @ adrum-21.2.0.3385.js:30\r\nsend @ ja_jquery-etirwer-fa48637a40.js:2\r\najax @ ja_jquery-etirwer-fa48637a40.js:2\r\ngetTotalNumber @ core-etirwer-a900ec2de3.js:124\r\naddStatusBox @ core-etirwer-a900ec2de3.js:124\r\nsetupDropDown @ core-etirwer-a900ec2de3.js:124\r\nsuccess @ VM458:28\r\nc @ ja_jquery-etirwer-fa48637a40.js:2\r\nfireWith @ ja_jquery-etirwer-fa48637a40.js:2\r\nD @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ adrum-21.2.0.3385.js:30\r\nsend @ ja_jquery-etirwer-fa48637a40.js:2\r\najax @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ VM458:14\r\nh @ ja_jquery-etirwer-fa48637a40.js:2\r\nc @ ja_jquery-etirwer-fa48637a40.js:2\r\nload (async)\r\nsend @ ja_jquery-etirwer-fa48637a40.js:2\r\najax @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ VM458:14\r\nh @ ja_jquery-etirwer-fa48637a40.js:2\r\nc @ ja_jquery-etirwer-fa48637a40.js:2\r\nsetTimeout (async)\r\n(anonymous) @ ja_jquery-etirwer-fa48637a40.js:2\r\nc @ ja_jquery-etirwer-fa48637a40.js:2\r\nadd @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ ja_jquery-etirwer-fa48637a40.js:2\r\nDeferred @ ja_jquery-etirwer-fa48637a40.js:2\r\nthen @ ja_jquery-etirwer-fa48637a40.js:2\r\nx.fn.ready @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ VM458:5\r\n(anonymous) @ adrum-21.2.0.3385.js:30\r\n_ @ ja_jquery-etirwer-fa48637a40.js:2\r\nNe @ ja_jquery-etirwer-fa48637a40.js:2\r\nappend @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ ja_jquery-etirwer-fa48637a40.js:2\r\n$ @ ja_jquery-etirwer-fa48637a40.js:2\r\nhtml @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ ja_jquery-etirwer-fa48637a40.js:2\r\nc @ ja_jquery-etirwer-fa48637a40.js:2\r\nfireWith @ ja_jquery-etirwer-fa48637a40.js:2\r\nD @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ ja_jquery-etirwer-fa48637a40.js:2\r\nload (async)\r\nsend @ ja_jquery-etirwer-fa48637a40.js:2\r\najax @ ja_jquery-etirwer-fa48637a40.js:2\r\nx.fn.load @ ja_jquery-etirwer-fa48637a40.js:2\r\n(anonymous) @ iZone:2239\r\ndispatch @ ja_jquery-etirwer-fa48637a40.js:2\r\nm.handle @ ja_jquery-etirwer-fa48637a40.js:2\r\n{noformat}\r\n\r\nSplunk log only show the following: \r\n{noformat}\r\n2023-05-02 01:15:58 172.22.16.138 POST /AjaxFiles/AjaxDropdown Type=11 443 661839 172.22.18.237 Mozilla/5.0+(Windows+NT+10.0;+Win64;+x64)+AppleWebKit/537.36+(KHTML,+like+Gecko)+Chrome/112.0.0.0+Safari/537.36 https://<CustomerInstance>.jiraalign.com/iZone <CustomerInstance>.jiraalign.com 200 0 0 66\r\nhost = PA-US-02-WEB-EFsource = C:\\inetpub\\logs\\LogFiles\\W3SVC12\\u_ex230502.logsourcetype = ms:iis:auto\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-05-02T03:14:11.000+0000","comments":[]},{"summary":"Lack of permission role toggles for Custom Rooms","key":"JIRAALIGN-4046","url":"https://jira.atlassian.com/browse/JIRAALIGN-4046","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf Custom Hierarchies is enabled, it is not possible to set the Roles such that only some people are able to see a list of all rooms.\r\nh3. Steps to Reproduce\r\n # Enable Custom Hierarchies\r\n # Under Admin > Roles, pick any role\r\n # Disable every single toggle (including 6. Admin > Other Setup > Custom Hierarchies)\r\n\r\nh3. Expected Results\r\n\r\nThe \"Custom Rooms\" icon does not show up on the Blue navigation bar\r\nh3. Actual Results\r\n\r\nThe \"Custom Rooms\" icon show up on the Blue navigation bar for all users\r\n!image-2022-03-24-13-41-31-058.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior","createDate":"2022-03-24T16:41:58.000+0000","comments":[{"text":"03006445791","author":"Gulam Mustafaaa"}]},{"summary":"Inviting/resending email invite for users with no product access indicates a successful delivery in UI when, by design - the expectation is that an email will not be triggered at all","key":"ID-8906","url":"https://jira.atlassian.com/browse/ID-8906","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a user doesn't have any products assigned to them, clicking ... > *Resend invite* has no effect. This is by design and an invitation email is not sent to users who don't have any product access.\r\n\r\nThe previous Bug ticket: [ID-8080|https://jira.atlassian.com/browse/ID-8080] was closed due to the reported behavior being expected.\r\n\r\nThis Bug ticket aims to correct the feedback message so admins are aware of the situation and knows that invitation emails are not expected to be sent or prompt the admin to assign the end user product access(license).\r\nh3. Steps to Reproduce\r\n # Navigate to admin.atlassian.com and select your organization\r\n # Click \"Directory\" > \"Users\"\r\n # Find a user who doesn't have any product access\r\n # On the user's account, click ... > \"Resend invite\"\r\n\r\nh3. Expected Results\r\n\r\nThe admin should receive an error message stating something like:\r\n{noformat}\r\nInvitation email is not sent\r\nThis user doesn't have any products assigned. Please assign at least 1 product to the end user.\r\n{noformat}\r\nAdditionally, if there are no products selected, the UI should deactivate and gray out the *Send invitation* option as no invitation email will be triggered even if the option is selected.\r\nh3. Actual Results\r\n\r\nThe message below is displayed in the UI, but the no invites are actually sent. This is confusing behavior\r\n{quote}Reminder sent!\r\n\r\nAn email has been sent to the user to complete their account activation.\r\n{quote}\r\nh3. Workaround\r\n\r\nNo known workarounds. If a workaround is found, the details will be added here","createDate":"2025-03-31T12:16:45.000+0000","comments":[]},{"summary":"Possible blank results when searching for some users in the user picker search boxes","key":"ID-8900","url":"https://jira.atlassian.com/browse/ID-8900","type":"Bug","priority":"","description":"h3. Issue Summary\r\n* In rare cases, we might hit into an issue where some users on the site are not searchable in any user picker fields in Confluence.\r\n\r\nh3. Steps to Reproduce\r\n# In any user picker field, search for a user who is licensed to use Confluence;\r\n** *Space permissions page:* {code}https://<SITE-NAME>.atlassian.net/wiki/spaces/<SPACE-KEY>/settings/permissions/users{code}\r\n** *Restrictions pop-up window on any page*\r\n** *User access page:* {code}https://<SITE-NAME>.atlassian.net/wiki/admin/user-access{code}\r\n# The user will not show up in the search results. (x)\r\n# The only exception would be the \"People and Teams\" page, where the user would be searchable. (/)\r\n** *People and Teams:* {code}https://<SITE-NAME>.atlassian.net/wiki/people/search{code}\r\n\r\nh3. Expected Results\r\n* Users who are in the site should be searchable in all user picker fields in Confluence.\r\n\r\nh3. Actual Results\r\n* Some users might not be returned in the search results in the user picker fields.\r\n\r\nh3. Workaround\r\n* Issue is rare, but can happen from time to time with a certain set of users.\r\n* Contact [Atlassian support|https://support.atlassian.com/contact/] to refresh the list of users on the site.","createDate":"2025-03-23T23:30:41.000+0000","comments":[]},{"summary":"User Access Admins are unable to invite users when they previously could","key":"ID-8890","url":"https://jira.atlassian.com/browse/ID-8890","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUser access admins are unable to invite users to their respective products after the addition of Goals and Projects under Platform Experiences\r\nh3. Steps to Reproduce\r\n # Log in to *admin.atlassian.com* \r\n # Assign an user *user access admin* role for say Jira\r\n # Log in with the user account({*}user access admin{*}) and try [inviting|https://support.atlassian.com/user-management/docs/invite-a-user/] an user to Jira\r\n\r\nh3. Expected Results\r\n\r\nAs an *user access admin* the users should be able to invite another user to the same product(where the user is listed as user access admin).\r\nh3. Actual Results\r\n\r\nThe user access admin receives an error message stating limited permissions as shown below:\r\n  !image-2025-03-11-17-04-23-231.png!\r\n\r\nErrors from network logs below: \r\n{noformat}\r\n{\r\n    \"key\": \"productAuthorizationFailed\",\r\n    \"context\": {\r\n        \"message\": \"User doesn't have relevant permissions\",\r\n        \"failedGroups\": {\r\n            \"2c88cd73-614c-4888-bf22-d348722d0704\": \"jira-software-users-mitk\"\r\n        },\r\n        \"failedProductRoles\": {\r\n            \"ari:cloud:project::site/2238006f-2e43-4305-a6ca-b486821e3642\": [\r\n                \"ari:cloud:project::role/product/member\"\r\n            ],\r\n            \"ari:cloud:goal::site/2238006f-2e43-4305-a6ca-b486821e3642\": [\r\n                \"ari:cloud:goal::role/product/member\"\r\n            ]\r\n        },\r\n        \"failedPlatformRoles\": []\r\n    }\r\n} {noformat}\r\nh3. Workaround\r\nh4. For the below workarounds only one of the below will need to be completed;\r\n * \r\nh4. 1. Toggle Off and On the goals and Projects Automatic Access.  \r\n\r\n{code:java}\r\nMust be completed by an Organization Admin{code}\r\n # \r\n ## Log in to admin.atlassian.com\r\n ## Go to \"Products\"\r\n ## Select \"Manage Product\" for the Goals\r\n ### Disable automatic access\r\n ### Re-enable automatic access\r\n ## Do the same disable and then re-enable process for Projects\r\n\r\n * !image-2025-03-11-17-22-22-157.png|width=511,height=238!\r\n\r\n * \r\nh4. 2. Grant the Account - user access admin role for *Goals and Projects* via the user page\r\nh4. !image-2025-03-11-17-08-15-729.png|width=651,height=394!\r\n\r\n * \r\nh4. 3. Grant the user org admin roles to invite new users to the products.  !image-2025-03-11-17-12-12-518.png|width=639,height=145!\r\n\r\n * \r\nh4. 4. Update the current user access admin group to include Goals and Projects.\r\n\r\n ","createDate":"2025-03-11T06:03:39.000+0000","comments":[]},{"summary":"Member dropdown is not shown when adding new members","key":"ID-8862","url":"https://jira.atlassian.com/browse/ID-8862","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n*Add people to group* feature doesn't show users when entering username in the *Add people* field when the page is {+}zoomed in{+}.\r\n\r\nIt is an accessibility bug. The member dropdown should render outside of the modal. \r\nh3. Steps to Reproduce\r\n # Open a group page on admin.atlassian.com\r\n # Click *Add group members*\r\n # Enter texts in the *Add people* field\r\n\r\nh3. Expected Results\r\n\r\nA dropdown appears and a list of users is shown.\r\nh3. Actual Results\r\n\r\nDropdown is covered and the member list is not shown\r\n\r\n!Screenshot 2025-02-18 at 3.49.01 PM.png|width=502,height=305!\r\nh3. Workaround\r\n\r\nZoom out the browser. ","createDate":"2025-02-18T05:03:02.000+0000","comments":[{"text":"Closing this bug ticket as we have an internal a11y project to track these. ","author":"Chris Squire"}]},{"summary":"Export token list shows null for Last Used date","key":"ID-8812","url":"https://jira.atlassian.com/browse/ID-8812","type":"Bug","priority":"","description":"When using the Export token list under Security-> User API tokens, the export contains null for Last Used date. In UI, there is no information for the corresponding Last Used date.\r\n\r\n!Screenshot 2024-12-31 at 12.08.32 PM.png!\r\n\r\nAlso in the UI, there is no Last Used information for some User API tokens","createDate":"2024-12-31T20:10:23.000+0000","comments":[]},{"summary":"Managed users are able to edit their Fullname and Profile","key":"ID-8656","url":"https://jira.atlassian.com/browse/ID-8656","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Managed users are able to edit their full name from the Profile page [https://id.atlassian.com/manage-profile/profile-and-visibility] \r\nh3. Steps to Reproduce\r\n # Step 1: Log in to id.atlassian.com as a user and go to the profile page [https://id.atlassian.com/manage-profile/profile-and-visibility] \r\n # Step 2: Edit the Full name and other profile attributes\r\n\r\nh3. Expected Results\r\n\r\nThe Managed user should not be able to edit the full name and profile as it should be managed/set by the org admin.\r\nh3. Actual Results\r\n\r\nThe Managed users are able to edit the full name and profile from their profile page.\r\nh3. Workaround\r\n\r\nNo","createDate":"2024-06-18T13:21:55.000+0000","comments":[{"text":"Hi,\r\n\r\nIs there any recent changes?\r\n\r\nWe suddently find now managed users are unable to edit their fullname, job title, department by themselves.\r\n\r\nHovering those fields showing:\r\n\r\n\"Full name is set by your admin\"\r\n\r\n\"Job title is set by your admin\"\r\n\r\n\"Department is set by your admin\"\r\n\r\n \r\n\r\nWe can accept the changed behavior on fullname, but not other fields, because users may change their position and dept and should update those info by themselves.\r\n\r\nAnyway, is there some documation stating the changed behavior?","author":"NiYunfan"}]},{"summary":"Unable to invite users through the Invite Users button","key":"ID-8114","url":"https://jira.atlassian.com/browse/ID-8114","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSome costumers are experiencing issues when inviting users through the Invite Users button. They get the following error message:\r\n{code:java}\r\nInvalid recaptcha token provided in request.{code}\r\nThe issue happens when the customer still have the \"Add your team\" form:\r\n !image-2023-02-07-11-40-54-785.png|thumbnail! \r\n \r\nh3. Steps to Reproduce\r\n # Go to User Management (https://admin.atlassian.com/s/<siteid>/users)\r\n# Make sure that the message \"There's a team behind every success\" is appearing.\r\n# Click on \"Invite Users\".\r\n# Try to invite a user.\r\n\r\nh3. Expected Results\r\nThe user should be invited.\r\nh3. Actual Results\r\nThe user is not invited and gets an error message:\r\n{code:java}\r\nInvalid recaptcha token provided in request.{code}\r\n\r\nh3. Workaround\r\n\r\nUsers need to to invite the user by adding their email address to the form instead of using the \"Invite user\" button.","createDate":"2023-02-07T14:44:18.000+0000","comments":[{"text":"Assigned this ticket to #cs-koopa-troopas's queue","author":"Hanqing Zhao"},{"text":"I am having this same issue–I am unable to add a user to Jira Software. What is the work-around, else I would consider this way more than \"minor\".","author":"Kathleen Mullen"}]},{"summary":"Inviting/resending invite for users on an org with no products indicates success in UI but no email is sent","key":"ID-8080","url":"https://jira.atlassian.com/browse/ID-8080","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a customer creates an organization but does not add any cloud products other than Access, the UI indicates to the customer that they can add/invite users to the org and resend invitations for those users, but no invitation is actually sent.\r\nh3. Steps to Reproduce\r\n # Create new Atlassian Organization as a new user\r\n # Start a 30-day trial of Atlassian Access\r\n # Do not add any other Products or Sites\r\n # Navigate to *Directory* > *Users*\r\n # Click *Invite users*\r\n # Input email address not associated with an existing Atlassian account\r\n ** OR an email address associated with an Atlassian account which doesn't have any cloud product access\r\n # Click *Invite users*\r\n # Click *Resend invite* for any user in \"Invited\" status{*}{{*}}\r\n\r\nh3. Expected Results\r\n * The user is added to the list of Users with Status of \"Invited\"\r\n * An invitation email is sent to the invited user\r\n * When *Resend invite* is clicked, a message pops up in the lower left corner indicating an email was sent:\r\n{quote}Reminder sent!\r\nAn email has been sent to the user to complete their account activation\r\n{quote}\r\n * An invitation email is sent to the re-invited user\r\n\r\nOR\r\n * The user is added to the list of Users with Status of \"Invited - Invitation not sent\"\r\n * No email is sent to the invited user\r\n * When *Resend invite* is clicked, customer receives a message indicating that no email can be sent because there are no (cloud) Products linked to the Org\r\n * No email is sent to the invited user\r\n\r\nh3. Actual Results\r\n * The user is added to the list of Users with Status of \"Invited\"\r\n * No email is sent to the invited user\r\n * When *Resend invite* is clicked, a message pops up in the lower left corner indicating an email was sent:\r\n{quote}Reminder sent!\r\nAn email has been sent to the user to complete their account activation\r\n{quote}\r\n * No email is sent to the re-invited user\r\n\r\nh3. Workaround\r\n\r\nAdd at least one Cloud Product to the Org (e.g. Jira or Confluence) before inviting/resending invites for users.","createDate":"2022-12-16T18:15:23.000+0000","comments":[{"text":"working as intended","author":"Mike Epstein"}]},{"summary":"Provisioned group as default access group errors out","key":"ID-7991","url":"https://jira.atlassian.com/browse/ID-7991","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSetting a provisioned group on the new admin UI as a default access group leads to an error.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Provision a group in the new admin UI\r\n # Set the provisioned group as a license group\r\n # Set the provisioned group as a default access group\r\n\r\nh3. Expected Results\r\n\r\nThe UI should not allow the provisioned group to be set as a default access group as it is read-only. \r\n\r\nh3. Actual Results\r\n\r\nThe UI will return a vague error on not being able to set the provisioned group as a default access group\r\n\r\n{quote}\r\nSomething went wrong\r\nThere was a problem updating the default group setting. Please try again in a few minutes.\r\n{quote}\r\n\r\n !error.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\n\r\nThe default access group is used when inviting the end users directly via the site administration and only non-provisioned groups can be set as a default access group.\r\n\r\nThis should not prevent admins from setting provisioned groups as license groups and grant license via AD group membership.","createDate":"2022-07-06T11:46:30.000+0000","comments":[]},{"summary":"Italian translation for the Description of the validator 'Field Required Validator' in Jira is incorrect","key":"I18N-4430","url":"https://jira.atlassian.com/browse/I18N-4430","type":"Bug","priority":"","description":"When creating a new validator under a transition, the Italian translation for the Description of the validator 'Field Required Validator' in Jira is incorrect:\r\n\r\nActual in English:\r\n\r\n\r\n\r\nIn Italian:\r\n\r\n\r\n\r\nBrowser translation of the Italian version:","createDate":"2025-03-14T01:03:26.000+0000","comments":[{"text":"Hi [~dad029d1d8e0] \r\nCan you review this translation with your team?\r\nhttps://smartling.io/yWHIsCGT\r\n[https://smartling.io/KEOJlH1V]\r\n\r\nThanks","author":"Masahito Sugahara"},{"text":"Original fix request from user: https://jira.atlassian.com/browse/JRACLOUD-93622 ","author":"Kenese Lautusi"},{"text":"Hi [~1fa8f36b8478],\r\n\r\nSure, we will check this with our team and get back to you.\r\n\r\n \r\n\r\nThanks!\r\n\r\nChloe","author":"Chloe Kim"},{"text":"Hi [~1fa8f36b8478] \r\n\r\nThe translation of \"Field must not be empty during the transition.\" has been now fixed.\r\n\r\nFor \"Field Required Validator\", we kept as is since it conveys the meaning correctly.\r\n\r\nPlease let us know if you need further assistance from us.\r\n\r\n \r\n\r\nThanks!\r\n\r\nChloe","author":"Chloe Kim"},{"text":"[~dad029d1d8e0] will this be fix out now so i can close? https://jira.atlassian.com/browse/JRACLOUD-93622\r\n\r\nYou say in a previous comment it is fixed, but the ticket is still in-progress. Thanks!","author":"Kenese Lautusi"},{"text":"Thanks for reporting this issue.\r\nThe fix should be available once the next PR is merged and deployed.","author":"Masahito Sugahara"}]},{"summary":"Some Jira Align Epics are marked as \"Restricted work item\" in a Focus Area","key":"FOCUS-8","url":"https://jira.atlassian.com/browse/FOCUS-8","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen users link multiple Jira Align Epics in a Focus Area, some show as \"Resticted work item.\"\r\n\r\nh3. Steps to Reproduce\r\n # Link a Jira Align Epic that has multiple releases, programs, additional programs, and custom fields to a Focus Area. (JA Epics data size exceeding 1mb)\r\n\r\nh3. Expected Results\r\nJira Align Epics linked successfully\r\n\r\nh3. Actual Results\r\nThe linked JA Epic displays as a \"Restricted work item\" on the UI.\r\n !image-2025-03-19-16-08-05-093.png|thumbnail! \r\n\r\nh3. Workaround\r\n\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-19T20:15:18.000+0000","comments":[]},{"summary":"Fisheye throws IO exceptions on network interruption","key":"FE-7225","url":"https://jira.atlassian.com/browse/FE-7225","type":"Bug","priority":"","description":"Jetty throws IIOException, probably due to network interruptions and/or heavy server load.\r\n\r\nThere is an open bug in Jetty's bug tracker related to this issue: [https://github.com/eclipse/jetty.project/issues/3684]\r\n\r\nStack trace :\r\n\r\n{noformat}\r\nERROR [qtp297490204-3794 ] fisheye TotalityFilter-logExceptionDetails - Exception \"javax.imageio.IIOException: I/O error writing PNG file!\" (javax.servlet.ServletException) while processing \"/avatar/xyz\"\r\njavax.servlet.ServletException: javax.imageio.IIOException: I/O error writing PNG file!\r\n\tat com.opensymphony.webwork.dispatcher.DispatcherUtils.serviceAction(DispatcherUtils.java:285) [webwork-2.2.7-atlassian-37.jar:?]\r\n\tat com.opensymphony.webwork.dispatcher.ServletDispatcher.service(ServletDispatcher.java:111) [webwork-2.2.7-atlassian-37.jar:?]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:865) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1732) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:24) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter.doFilter(PrettyUrlsSiteMeshFixupFilter.java:32) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsDispatcherFilter.doFilter(PrettyUrlsDispatcherFilter.java:55) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter.doFilter(PrettyUrlsSiteMeshFilter.java:79) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsMatcherFilter.doFilter(PrettyUrlsMatcherFilter.java:51) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.crucible.filters.CrucibleFilter.doFilter(CrucibleFilter.java:148) [fisheye.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.cenqua.fisheye.web.filters.TotalityFilter.doFilter(TotalityFilter.java:305) [fisheye.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:103) [atlassian-trusted-apps-core-4.1.0.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:67) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56) [?:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:566) [jetty-security-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1340) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1242) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:203) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:73) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.cenqua.fisheye.web.filters.TotalityFilter.doFilter(TotalityFilter.java:207) [fisheye.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:103) [atlassian-trusted-apps-core-4.1.0.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:67) [atlassian-oauth-service-provider-plugin-2.0.6_1550164250000.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56) [atlassian-pretty-urls-plugin-2.1.2.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.cenqua.fisheye.web.filters.ProductInfoFilter.doFilter(ProductInfoFilter.java:43) [fisheye.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:56) [atlassian-pretty-urls-plugin-2.1.2.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58) [atlassian-plugins-servlet-4.4.3.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.cenqua.fisheye.web.filters.UpfrontFilter.doFilter(UpfrontFilter.java:54) [fisheye.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.cenqua.fisheye.web.filters.SecurityHeadersFilter.doFilter(SecurityHeadersFilter.java:54) [fisheye.jar:?]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1719) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat com.atlassian.fecru.profiling.ProfilingServletFilter.doFilter(ProfilingServletFilter.java:60) [fisheye.jar:?]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:344) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:261) [spring-web-4.0.9.RELEASE.jar:4.0.9.RELEASE]\r\n\tat org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1711) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548) [jetty-security-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1340) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) [jetty-servlet-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1242) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:220) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:740) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:503) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_201]\r\nCaused by: javax.imageio.IIOException: I/O error writing PNG file!\r\n\tat com.sun.imageio.plugins.png.PNGImageWriter.write(PNGImageWriter.java:1168) [?:1.8.0_201]\r\n\tat javax.imageio.ImageWriter.write(ImageWriter.java:615) [?:1.8.0_201]\r\n\tat javax.imageio.ImageIO.doWrite(ImageIO.java:1612) [?:1.8.0_201]\r\n\tat javax.imageio.ImageIO.write(ImageIO.java:1578) [?:1.8.0_201]\r\n\tat com.atlassian.fisheye.gravatar.RenderAvatarAction.execute(RenderAvatarAction.java:123) [fisheye.jar:?]\r\n\tat sun.reflect.GeneratedMethodAccessor1075.invoke(Unknown Source) [?:?]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [?:1.8.0_201]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [?:1.8.0_201]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:358) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:218) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:192) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:175) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:116) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.atlassian.fisheye.xwork.SimpleConversionErrorInterceptor.intercept(SimpleConversionErrorInterceptor.java:64) [fisheye.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.webwork.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:174) [webwork-2.2.7-atlassian-37.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.webwork.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:169) [webwork-2.2.7-atlassian-37.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:186) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.atlassian.xwork.interceptors.XsrfTokenInterceptor.intercept(XsrfTokenInterceptor.java:100) [atlassian-xwork-core-1.17.jar:?]\r\n\tat com.cenqua.fisheye.web.util.XsrfCheckInterceptor.intercept(XsrfCheckInterceptor.java:20) [fisheye.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.xwork.DefaultActionProxy.execute(DefaultActionProxy.java:116) [xwork-1.2.5-atlassian-8.jar:?]\r\n\tat com.opensymphony.webwork.dispatcher.DispatcherUtils.serviceAction(DispatcherUtils.java:274) [webwork-2.2.7-atlassian-37.jar:?]\r\n\t... 175 more\r\nCaused by: org.eclipse.jetty.io.EofException\r\n\tat org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:286) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:393) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:380) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:814) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:224) [jetty-util-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:538) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:836) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:887) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHttpOutputInterceptor.write(GzipHttpOutputInterceptor.java:109) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:239) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:215) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat org.eclipse.jetty.server.HttpOutput.flush(HttpOutput.java:397) [jetty-server-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\tat javax.imageio.stream.FileCacheImageOutputStream.flushBefore(FileCacheImageOutputStream.java:258) [?:1.8.0_201]\r\n\tat com.sun.imageio.plugins.png.IDATOutputStream.finishChunk(PNGImageWriter.java:196) [?:1.8.0_201]\r\n\tat com.sun.imageio.plugins.png.IDATOutputStream.finish(PNGImageWriter.java:254) [?:1.8.0_201]\r\n\tat com.sun.imageio.plugins.png.PNGImageWriter.write_IDAT(PNGImageWriter.java:945) [?:1.8.0_201]\r\n\tat com.sun.imageio.plugins.png.PNGImageWriter.write(PNGImageWriter.java:1158) [?:1.8.0_201]\r\n\t... 222 more\r\nCaused by: java.io.IOException: Broken pipe\r\n\tat sun.nio.ch.FileDispatcherImpl.write0(Native Method) [?:1.8.0_201]\r\n\tat sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:47) [?:1.8.0_201]\r\n\tat sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93) [?:1.8.0_201]\r\n\tat sun.nio.ch.IOUtil.write(IOUtil.java:65) [?:1.8.0_201]\r\n\tat sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:471) [?:1.8.0_201]\r\n\tat org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:264) [jetty-io-9.4.12.v20180830.jar:9.4.12.v20180830]\r\n\t... 240 more\r\n\r\n{noformat}\r\n\r\n\r\n We should catch these exceptions and log out a single line error message possibly just with details like the URL being requested and the type of IO error (e.g. broken pipe, connection reset by peer, etc). It may be worth still logging the full exception if debug logging is enabled because it's not inconceivable this information might be useful when diagnosing an issue. (right now the full stack trace as above is printed regardless of if debug logging is enabled)\r\n  \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n ","createDate":"2019-09-25T12:32:58.000+0000","comments":[]},{"summary":"Wrong message displayed on Development Panel when a commit message is updated in a SVN repository","key":"FE-6524","url":"https://jira.atlassian.com/browse/FE-6524","type":"Bug","priority":"","description":"h3. Summary\r\nWhen an SVN commit message that references a JIRA issue is changed to reference a different JIRA issue, and the change is indexed by FishEye/Crucible, the original JIRA issue displays the erroneous message \"You don't have access to view all related commits. Please contact your administrator\":\r\n!devpanel1.png|thumbnail!\r\nIn addition, the Development Panel summary (the \"x commits\" message under the Dev Panel) for the issue which is now referenced by the commit message isn't updated.\r\n\r\nh3. Environment\r\n* JIRA 6.4.5\r\n* FishEye 3.10.2\r\n** Linked to JIRA through Application Link (method: OAuth w/ 2-LO). OAuth tokens created in both sides.\r\n** Having a SVN repository indexed.\r\n* svn, version 1.7.20\r\n\r\nh3. Steps to Reproduce\r\n# In JIRA, create two issues - let's name them TST-1 and TST-2.\r\n# Perform a commit on the SVN repo, referencing TST-1. Wait for it to be indexed by FishEye, and confirm the Dev Panel summary is updated, showing *1 commit*, and that opening its details lists the commit.\r\n# On the SVN repository, change the commit message to reference TST-2:\r\n{noformat}\r\nsvn propset -r N --revprop svn:log \"TST-2 testing change on N\" URL\r\n{noformat}\r\n#* *N* must be replaced by the revision number for which you are editing the commit message.\r\n#* *URL* must be replaced by the repo's location. It's not necessary to use this parameter if you are already in the repository in the command line.\r\n# Go to {{FishEye Administration > Repositories}}, open the repo's config, then go to *Maintenance*. On this screen, under *Subversion Non-Versioned Properties (revprops)*, fill the fields *from* and *to* with an interval of revisions comprehending the one you changed, then click in *Start*.\r\n# Confirm the commit message is updated by looking at this repo's activity in FishEye.\r\n# Acccess the TST-1 issue in JIRA, then click in the *x commit\", which won't be updated. You won't see the revision previously linked to this issue, and the message \"You don't have access to view all related commits. Please contact your administrator\" will be displayed, similarly to:\r\n#* !devpanel1.png|thumbnail!\r\n\r\nh3. Expected Results\r\n* After the non-versioned properties of the revision are re-indexed, the Development Panel should be updated to reflect the commits that are actually linked to each issue.\r\n\r\nh3. Actual Results\r\n* The Development Panel isn't properly updated, displaying wrong results:\r\n** For TST-1, it will keep showing the \"x commits\" link, but its content will be the erroneous message \"You don't have access to view all related commits. Please contact your administrator\".\r\n** For TST-2, the Development Panel summary isn't updated, so there will be no \"x commits\" link, if this issue didn't have any commit previously linked to it.\r\n \r\nh3. Notes\r\n* This seems to be strictly related to the Development Panel, since the *Source* tab properly displays the new information right away.\r\n\r\n*What DOES NOT help*\r\n* Refreshing FishEye/Crucible caches at {{JIRA Administration > Add-ons > FishEye Configuration}} (I believe this is because these caches are for the JIRA FishEye Plugin, while the Development Panel is managed by the Development Integration Plugin).\r\n* Restarting JIRA.\r\n* Re-creating the application link.\r\n\r\nh3.Workaround\r\nI couldn't find a proper workaround around for this, but I observed that:\r\n* After 30 minutes, when JIRA runs the job to collect new information from FishEye, the data in the Development Panel is properly adjusted (both the summary and the details).\r\n* Sometimes, committing a new change seems to clean the Development Panel details - i.e. the number of commits displayed in the summary is still wrong, but the wrong message isn't displayed anymore when opening the Dev Panel. This seems to be intermittent.","createDate":"2016-03-10T22:38:42.000+0000","comments":[{"text":"[~grefosco], So we saw this happen once but can't reproduce it?","author":"mwatson"},{"text":"[~mwatson@atlassian.com],\r\n\r\nThis bug report is about the wrong message displaying in the Dev Panel. This IS reproducible.\r\n\r\nWhat I couldn't reproduce was having the Dev Panel not updating after 30 minutes.","author":"Gustavo Refosco"},{"text":"Any updates on this? This is still an issue for us.","author":"MEDITECH ADMIN TEAM"},{"text":"This is an issue for us too.  FishEye (4.5.3) is updating correctly on a non-versioned property update, but Jira (7.9.2) is not if there wasn't already a commit associated with the Jira issue.  Also the original Jira issue doesn't reflect the correct commit count.","author":"Dave Snyder"},{"text":"This issue has been outstanding for over 3 years - it's very disruptive as it prevents the creation of reviews from commits on the developer panel, which is a common workflow for our teams. ","author":"Phil Businger"},{"text":"See also:\r\n * https://jira.atlassian.com/browse/JRASERVER-70454\r\n * https://jira.atlassian.com/browse/FE-6953\r\n * https://jira.atlassian.com/browse/JSWSERVER-16760","author":"Roland Stahn"}]},{"summary":"Users on the VPN experience a 30-second delay compared to other users.","key":"ECO-757","url":"https://jira.atlassian.com/browse/ECO-757","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nThe partner is experiencing a delay within Atlassian Forge application caused by the VPN. Users on the VPN and using their Forge app, face a 30 second delay between themselves and other users. The partner tried adding delay that used for polling but users on the VPN are still experiencing this issue.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. ","createDate":"2025-04-01T18:54:39.000+0000","comments":[{"text":"Hi Team,\r\n\r\nThis issue is being handled by Support. If you have a specific issue with Forge and your VPN, please investigate and if it's reproducible on different networks and environments then open an Ecosystem Support ticket.\r\n\r\nPlease also review documentation such as\r\n* https://support.atlassian.com/organization-administration/docs/ip-addresses-and-domains-for-atlassian-cloud-products/\r\n\r\nto ensure your network is configured for Forge use.\r\n\r\nJames.","author":"James Richards"}]},{"summary":"Rovo Agent Icons Cut Off in Chat and Browse Agents List","key":"ECO-755","url":"https://jira.atlassian.com/browse/ECO-755","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nRovo Agent icons are getting cut off at the default Rovo chat window width and in the Browse Agents list, particularly with non-Atlassian apps. This issue appears to be caused by long app or developer names that compress the icons. Interestingly, Atlassian apps do not experience this issue, possibly due to their use of inline SVG images. Additionally, the problem does not occur in the \"Last used app\" section at the bottom of the \"Chat.\"\r\nh3. Steps to Reproduce\r\n # Details can be found in the ECOHELP ticket: https://ecosystem.atlassian.net/browse/ECOHELP-60347\r\n\r\nh3. Expected Results\r\n\r\nApp icons should not get cut off in the “Browse Agents” list when the app or developer name are long enough to use up more than one line in non-Atlassian Apps.\r\nh3. Actual Results\r\n\r\nActual results and screenshots can be found in the [ticket|https://ecosystem.atlassian.net/browse/ECOHELP-60347]\r\nh3. Workaround\r\n\r\nA possible workaround would be using a shorter app name, which is not useful. Therefore, there is no known workaround for this behavior.","createDate":"2025-04-01T14:37:12.000+0000","comments":[]},{"summary":"Inconsistent Height Issue: UIKit UserPicker vs. Standard Select Component","key":"ECO-750","url":"https://jira.atlassian.com/browse/ECO-750","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nThe UIKit *UserPicker* component displays an inconsistent height compared to the standard *Select* component. This discrepancy can lead to visual misalignment and a lack of uniformity in the user interface. Ensuring consistent component sizing is crucial for maintaining a polished and cohesive design throughout the application.\r\nh3. Steps to Reproduce\r\n\r\nThe below is the sample code can be used under Frontend -> index.jsx to reproduce the issue.\r\n\r\n \r\n{code:java}\r\nimport React, { useEffect, useState } from 'react';\r\nimport ForgeReconciler, { Text, UserPicker, Inline,DatePicker, Box, Label, Select, xcss} from '@forge/react';\r\nimport { invoke } from '@forge/bridge';\r\n\r\n\r\nconst App = () => {\r\n  const [data, setData] = useState(null);\r\n  useEffect(() => {\r\n    invoke('getText', { example: 'my-invoke-variable' }).then(setData);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Text>Hello world!</Text>\r\n      <Text>{data ? data : 'Loading...'}</Text>\r\n      <Inline space={'space.200'}>\r\n      <Box xcss={xcss({ width: '140px' })}>\r\n      <Label>Start Date</Label>\r\n      <DatePicker\r\n            placeholder={'1977-04-30'}\r\n            weekStartDay={1}\r\n            \r\n          />\r\n        </Box>\r\n  <Box xcss={xcss({ width: '140px' })}>\r\n    <Label>End Date</Label>\r\n    <DatePicker\r\n      placeholder={'2045-04-30'}\r\n      weekStartDay={1}\r\n    />\r\n  </Box>\r\n  <Box xcss={xcss({ width: '200px' })}>\r\n    <UserPicker label={'Reporter'} name={'user'} />\r\n  </Box>\r\n  <Box xcss={xcss({ width: '170px' })}>\r\n    <Label>Statuses</Label>\r\n    <Select options={[\"one\",\"two\"]} isMulti />\r\n  </Box>\r\n\r\n</Inline>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nForgeReconciler.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n); {code}\r\n \r\nh3. Expected Results\r\n\r\nIt is expected that UIKit *UserPicker* component displays a consistent height compared to the standard *Select* component.\r\nh3. Actual Results\r\n\r\nThe UIKit UserPicker component displays an inconsistent height compared to the standard Select component.\r\n # The UIKit *UserPicker* height is 44px\r\n\r\n!Screen Shot 2025-03-27 at 11.00.19 AM.png|width=676,height=78!\r\n\r\n      2. The *Select* component height is 40px\r\n\r\n!Screen Shot 2025-03-27 at 10.59.48 AM.png|width=814,height=85!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T00:08:16.000+0000","comments":[]},{"summary":"Error \"Something went Wrong\" on Connected Apps Page because of limited permissions","key":"ECO-708","url":"https://jira.atlassian.com/browse/ECO-708","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nThe Connected Apps page in the admin portal displays an error message, \"Something went Wrong,\" when user doesn't have access to all the products added to the site. \r\nh3. Steps to Reproduce\r\n # From Jira > Navigate to Apps > Manage your apps page.\r\n # Click on Take me there when directed to the new home for app management page.\r\n\r\nh3. Expected Results\r\n\r\nThe Connected Apps page should load successfully.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nThere is currently no other direct workaround for this issue. Users can manage apps through the \"Manage Apps\" section in product directly.","createDate":"2025-03-10T05:13:12.000+0000","comments":[]},{"summary":"UserPicker component behaviour in a Popup is inconsistent","key":"ECO-703","url":"https://jira.atlassian.com/browse/ECO-703","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nThe [UserPicker|https://developer.atlassian.com/platform/forge/ui-kit/components/user-picker/] component exhibits unexpected behaviour when used within a [popup|https://developer.atlassian.com/platform/forge/ui-kit/components/popup/], including issues with clearing selections and inadvertently closing the popup when a user is selected.\r\n\r\nThis issue is intermittent and primarily occurs after the second instance of opening and closing the popup.\r\n\r\nUpon investigation, there is also known incompatibility with clearing the UserPicker’s defaultValues which requires clearing twice for changes to be reflected in the UI.\r\nh3. Steps to Reproduce\r\n # Create a Forge app in Confluence that uses the Popup and User Picker component. \r\n # Try and use the following code for the frontend/index.jsx below::\r\n # \r\n{code:java}\r\nimport React, { useState } from 'react';\r\nimport ForgeReconciler, { Box, Button, Popup, Stack, UserPicker, xcss } from '@forge/react';const contentStyles = xcss({\r\n  padding: 'space.200',\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  gap: 'space.100',\r\n});const App = () => {\r\n  const [isOpen, setIsOpen] = useState(false);  const defaultValues = [\r\n    'xxxxx', // Default value for the first UserPicker, change to an atlassian id\r\n    'xxxxx', // Default value for the second UserPicker, change to an atlassian id     'xxxxx', // Default value for the third UserPicker, change to an atlassian id   ];\r\n  return (\r\n    <Popup\r\n      isOpen={isOpen}\r\n      onClose={() => setIsOpen(false)}\r\n      placement=\"bottom-start\"\r\n      content={() => (\r\n        <Box xcss={contentStyles}>\r\n          {[1, 2, 3].map((index) => (\r\n            <UserPicker\r\n              key={index}\r\n              isMulti\r\n              label={`Assignee ${index}`}\r\n              placeholder=\"Select a user\"\r\n              name={`user-${index}`}\r\n              description={`The selected user(s) will be assigned to this task ${index}`}\r\n              onChange={(user) => console.log(`UserPicker ${index}:`, user)}\r\n              defaultValue={defaultValues[index - 1]}\r\n            />\r\n          ))}\r\n        </Box>\r\n      )}\r\n      trigger={() => (\r\n        <Button\r\n          appearance=\"primary\"\r\n          isSelected={isOpen}\r\n          onClick={() => setIsOpen(!isOpen)}\r\n        >\r\n          {isOpen ? 'Close' : 'Open'} popup\r\n        </Button>\r\n      )}\r\n    />\r\n  );\r\n};\r\nForgeReconciler.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n); {code}\r\n\r\nh3. Expected Results\r\n * Users should be able to clear existing selections and add new ones without issues.\r\n\r\n * Selecting a user should not close the popup unless explicitly intended.\r\n\r\n * Clearing the UserPicker’s {{defaultValues}} should update the UI immediately without needing to clear twice.\r\n\r\nh3. Actual Results\r\n * -Users are sometimes unable to clear selections or add new ones.- resolved\r\n\r\n * -Selecting a user may cause the popup to close unexpectedly.- resolved\r\n\r\n * Clearing the UserPicker’s {{defaultValues}} requires doing so twice for the UI to update.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-06T23:41:53.000+0000","comments":[{"text":"Can you let us know whether this has been released ?\r\n\r\nThere still seems to be misbehavior, upon the 2nd rendering of the popup, the userpicker `remove user button` (x) has to be clicked twice to be actually removed.","author":"Guillaume Bero"},{"text":"Hi [~243eb1bca4d5] , apologies there was some confusion with this ticket. We've resolved the first two issues:\r\n * Users are sometimes unable to clear selections or add new ones.\r\n\r\n * Selecting a user may cause the popup to close unexpectedly.\r\n\r\nHowever `defaultValues` not clearing is still to be fixed. We will update the ticket accordingly.","author":"Quoc Lieu"},{"text":"A fix for this has been released","author":"Quoc Lieu"}]},{"summary":"Connect condition user_is_project_admin does not restrict users correctly","key":"ECO-586","url":"https://jira.atlassian.com/browse/ECO-586","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConnect condition {{user_is_project_admin}} does not restrict users correctly\r\nh3. Steps to Reproduce\r\n # Create a Connect app for Jira;\r\n # Add the following condition to a module: {{user_is_project_admin}}\r\n # Access the module with a project admin account and verify that the resource is accessible;\r\n\r\n # Log in with a user that is not an admin of the project and attempt to access the module;\r\n\r\nh3. Expected Results\r\n\r\nThe user is not allowed because the condition checks whether the user is a project admin, which it is not.\r\nh3. Actual Results\r\n\r\nThe module loads regardless of whether the user is an admin of the project or not\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-12-23T21:40:58.000+0000","comments":[{"text":"Hello,\r\n\r\nIn External Share for Jira we allow some actions to be available to only to project admins and admins.\r\n\r\nIn our url in manifest we have:\r\n/web/browse/list/project/\\{project.id}?is_project_admin=\\{condition.user_is_project_admin}&is_admin=\\{condition.user_is_admin}\r\n\r\nThis url is signed by Atlassian and we threat is as source of true. \r\n\r\n*We receive information that user is project admin. {color:#de350b}For every user.{color} This is huge security issue.*\r\n\r\nWe already received few complain from  External Share for Jira users that are affected.\r\n\r\nThis is SUPER confusing. \r\n\r\nPlease fix this. It is security bug laying open since at least December.\r\n\r\nI am sure other app are also affected.\r\n\r\nAny ideas when we expect fix?\r\n\r\nBest,\r\nKrzysztof Bogdan","author":"Krzysztof Bogdan"}]},{"summary":"Third-Party App was disabled after the app update","key":"ECO-551","url":"https://jira.atlassian.com/browse/ECO-551","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe third-party app was disabled after the app update\r\nh3. Steps to Reproduce\r\n # As it was an automatic event that happened when the app update was pushed.\r\n\r\nh3. Expected Results\r\n\r\nThe app should be Enabled automatically If downloading the file fails with Time out error.  We must have a retry mechanism in place to handle such scenarios.\r\nh3. Actual Results\r\n\r\nThe app was disabled after the update since there was an issue while downloading translations for the app. The request to download the file timed out after 15 seconds. When it fails to download translations for an app, the app is left installed but not enabled. \r\n{noformat}\r\nmessage: Add-on registry state: 'com.xpandit.plugins.xray' DISABLED @ 1.1.108-AC (MPAC_PER_INSTALL) {noformat}\r\nh3. Workaround\r\n\r\nManually Enable the App by navigating to Apps > Manage Apps > Select the required app.","createDate":"2024-11-28T07:19:39.000+0000","comments":[]},{"summary":"Using LDAP_MATCHING_RULE_IN_CHAIN OID for nested group membership stopped working","key":"CWD-6345","url":"https://jira.atlassian.com/browse/CWD-6345","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUsers in the AD nested group are not synced after upgrading Confluence from any version prior to 8.5.x to 9.x.x\r\n\r\nh3. Steps to Reproduce\r\n # Setup Microsoft AD\r\n # Create users in the AD\r\n # Create a parent group and a child group.\r\n # Add members to the child group.\r\n # Add the child group as a member of the parent group.\r\n # Install and configure 9.2.1 Confluence\r\n # Configure the user directory in Confluence to use the Microsoft AD created earlier.\r\n # In the *User Membership Attribute* field, add *memberOf:1.2.840.113556.1.4.1941:* and check the boxes for *When finding the user's group membership* and *When finding the members of a group* under {*}Use the User Membership Attribute{*}.\r\n # Save and test\r\n # Perform synchronization with the user directory.\r\n # The users in the parent group are not visible.\r\n\r\nh3. Expected Results\r\nThe users in the parent group should be visible.\r\n\r\nh3. Actual Results\r\nThe users in the parent group are not visible.\r\n\r\nh3. Workaround\r\nThis is happening due to a change in Crowd sync on Crowd 5.3.0; [Crowd 5.3 Upgrade Notes|https://confluence.atlassian.com/crowd/crowd-5-3-upgrade-notes-1388151831.html]; LDAP synchronization improvements. The workaround is to disable the new sync:\r\n* Stop Confluence\r\n* Take a backup of <InstallHome>/bin/setenv.sh file\r\n* Add the below JVM parameter just above the export CATALINA_OPTS line\r\n{code:java}\r\nCATALINA_OPTS=\"-Dcrowd.use.legacy.ad.membership.sync=true ${CATALINA_OPTS}\"\r\n{code}\r\n* Start Confluence\r\n* Perform a synchronization\r\n","createDate":"2025-03-25T08:00:19.000+0000","comments":[]},{"summary":"Atlassian Troubleshooting and Support Tools plugin can't be enabled after update","key":"CWD-6339","url":"https://jira.atlassian.com/browse/CWD-6339","type":"Bug","priority":"","description":"h2. Summary\r\n\r\nUpdating ATST from 2.5.1 to 2.6.1 fails on Crowd.\r\nh2. Version info\r\n - ATST version 2.5.1 and 2.6.1\r\n\r\nh2. Description\r\nh3. Issue Summary\r\n\r\nCrowd comes with ATST plugin 2.5.1 bundled. It shows that an UPDATE is available to the latest version 2.6.1. However, after the upgrade it fails to enable as shown below: \r\n\r\n!image-2025-03-10-14-49-57-512.png|width=386,height=216!\r\n\r\n!image-2025-03-10-14-50-14-734.png|width=378,height=192!\r\n\r\nWe see the below errors in the logs:\r\n{code:java}\r\n2025-03-07 14:51:53,346 UpmAsynchronousTaskManager:thread-2 INFO [atlassian.plugin.manager.DefaultPluginManager] Updating plugin 'com.atlassian.troubleshooting.plugin-crowd' from version '2.5.1' to version '2.6.1'\r\n...\r\n2025-03-07 14:51:54,800 UpmAsynchronousTaskManager:thread-2 ERROR [atlassian.plugin.manager.DefaultPluginManager] There was an error loading the descriptor 'Troubleshooting Resources License limit healthcheck config' of plugin 'com.atlassian.troubleshooting.plugin-crowd'. Disabling.\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.atlassian.troubleshooting.healthcheck.data.LicenseUserLimitDataProvider': Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.atlassian.sal.api.features.DarkFeatureManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n...\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.atlassian.sal.api.features.DarkFeatureManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n{code}\r\n{code:java}\r\n2025-03-07 14:51:54,888 UpmAsynchronousTaskManager:thread-2 ERROR [atlassian.event.internal.AsynchronousAbleEventDispatcher] There was an exception thrown trying to dispatch event [com.atlassian.plugin.event.events.PluginModuleDisabledEvent for com.atlassian.troubleshooting.plugin-crowd:troubleshooting-shc-whitelist (null)] from the invoker [com.atlassian.event.internal.ComparableListenerInvoker@4a88f6fd]\r\njava.lang.RuntimeException: The request object has been recycled and is no longer associated with this facade. Listener: com.atlassian.analytics.client.listener.DefaultAnalyticsEventListener event: com.atlassian.plugin.event.events.PluginModuleDisabledEvent\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerIn\r\n...\r\nCaused by: java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade\r\n\tat org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[catalina.jar:9.0.98]\r\n{code}\r\nh3. Steps to Reproduce\r\n # Install Crowd 6.2.2\r\n # Try to update the ATST plugin from 2.5.1 to 2.6.1\r\n\r\nh3. Expected Results\r\n\r\nThe ATST plugin should be enabled automatically after the update.\r\nh3. Actual Results\r\n\r\nThe ATST plugin fails to enable after the update.\r\nh3. Workaround\r\n\r\nFollow the KB: [Unable to start Crowd due to corrupted plugin caches|https://confluence.atlassian.com/crowdkb/unable-to-start-crowd-due-to-corrupted-plugin-caches-320602585.html] to clear the plugins:\r\n # Backup your [Crowd Home Directory|https://confluence.atlassian.com/display/CROWD024/Finding+your+Crowd+Home+Directory]\r\n # Stop Crowd\r\n # Delete the following folders:\r\n ** {{<crowd-home>/bundled-plugins}}\r\n ** {{<crowd-home>/caches}}\r\n # Start Crowd","createDate":"2025-03-10T13:49:20.000+0000","comments":[{"text":"Hello,\r\nit seems that's me who signals this little bug. :)\r\n\r\nA hard reboot of Crowd VM has resolved this problem. Thanks to Atlassian Support for the help.  \r\n\r\nRegards,","author":"Olivier DORVEAUX"},{"text":"We deleted the folders in step 3 on one node at a time. Fixed without downtime for the Crowd cluster. \uD83D\uDC4D","author":"Espen Sandall"}]},{"summary":"Updating a mail configuration field fails","key":"CWD-6319","url":"https://jira.atlassian.com/browse/CWD-6319","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Configure a mail configuration if one doesn't exist\r\n ## Save the configuration if it's a brand new one\r\n # Change the value of any field other than `password`\r\n # The update will fail due to a connection error.\r\n # If you also change the password to the correct it will succeed.\r\n\r\nh3. Expected Results\r\n\r\nYou should be able to update any of the fields and it should succeed.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\nCannot test connection\r\n\r\nWe couldn't connect to the mail server. {noformat}\r\nh3. Workaround\r\n\r\nThe workaround is to also fill in the password field when updating other fields. This does _*not*_ affect the actual mailing system and notifications go out as normal.","createDate":"2024-12-19T14:23:31.000+0000","comments":[]},{"summary":"Enable Crowd interoperability with Azure AD Conditional Access policies (multi-factor authentication)","key":"CWD-5310","url":"https://jira.atlassian.com/browse/CWD-5310","type":"Bug","priority":"","description":"Currently, it's not possible to exclude the Crowd native app registration from Multi-Factor Authentication (MFA) in Azure AD. \r\n\r\nThe request is to enable Crowd interoperability with Azure AD Conditional Access policies.\r\n","createDate":"2018-11-30T15:45:55.000+0000","comments":[{"text":"Is there any plan on when you guys will start working on the issue ? ","author":"Dinesh shivakoti"},{"text":"to be linked to https://jira.atlassian.com/browse/CWD-5629 ?\r\n\r\nit's unclear to me if the library change can also help support Azure AD MFA","author":"Vincent Kopa (Ovyka)"}]},{"summary":"Improve logging when attempting to authenticate using an expired account","key":"CWD-5129","url":"https://jira.atlassian.com/browse/CWD-5129","type":"Bug","priority":"","description":"There are multiple suggestions related to the same issue - Remote apps connected to Crowd display an *incorrect* message when the user password has expired in a Crowd Internal Directory.\r\n\r\n{code}\r\nSorry, your username and password are incorrect - please try again.\r\n{code}\r\n\r\nSince the credentials are expired, rather than incorrect, the application should inform it accordingly.\r\n\r\nEven in small organizations, end-users are usually not aware of all the possible systems that manage their accounts. Thus it is time-consuming for Sys Admins to receive requests from a user trying several times to use a valid password, and then figure out what's the real issue, which it's easily resolved once the user inputs their credentials in Crowd console:\r\n\r\n{code}\r\nPlease change your password, since your current password has expired\r\n{code}\r\n\r\nHaving a better message pointing out what to do, or automatically redirecting the login page to Crowd's \"Change Expired Password\" page would be a huge improvement.\r\n\r\n----\r\n\r\nList of related requests:\r\n\r\nhttps://jira.atlassian.com/browse/JRASERVER-39656\r\nhttps://jira.atlassian.com/browse/JRASERVER-66444\r\nhttps://jira.atlassian.com/browse/CONFSERVER-28819\r\nhttps://jira.atlassian.com/browse/CONFSERVER-10455\r\nhttps://jira.atlassian.com/browse/CWD-1765\r\nhttps://jira.atlassian.com/browse/CWD-3323\r\nhttps://jira.atlassian.com/browse/CWD-5469","createDate":"2018-04-16T12:57:16.000+0000","comments":[]},{"summary":"User loses all local group memberships if LDAP sync is unable to find the user, but the user appears again in subsequent syncs","key":"CWD-4849","url":"https://jira.atlassian.com/browse/CWD-4849","type":"Bug","priority":"","description":"(from original issue in CONF-28621)\r\nh3. Steps to Reproduce\r\n # Add a connection to LDAP in {{Confluence Admin >> User Directories}} with the *Read Only, with Local Groups* option\r\n # Sync the directory and make sure that LDAP users are returned\r\n # Add 1 LDAP user to a local group (membership)\r\n # Change the User Object Filter in the directory's configuration in {{Confluence Admin >> User Directories}} to a dummy filter, such as the following:\r\n{code:java}\r\n(&(objectclass=inetorgperson)(cn=dummynonexistentuser))\r\n{code}\r\n\r\n # Sync the directory again (Notice that the LDAP users are missing)\r\n # Revert the User Object Filter to the previous working filter\r\n # Sync the directory again (notice that the LDAP users are back, but their local group memberships are gone)\r\n\r\n ","createDate":"2016-12-29T13:17:00.000+0000","comments":[{"text":" We are _still_ facing _the same problems_  in Confluence 6.15.1. When will fix this?","author":"Юлия Михайлова"},{"text":"When an LDAP filters is changed and contains a mistake (typo, wrong usage of syntax, ...) we potentially lose all users. When reverting to the original filter all groups are vanished. This is a real pain!\r\n\r\n \r\n\r\nCrowd directories should have a setting to keep local groups for vanished users. It should be a choice because for some companies it might not be desirable.","author":"Charlie Misonne"},{"text":"It's 2021 and still a bug.","author":"Joeran ZELLER"},{"text":"[https://getsupport.atlassian.com/servicedesk/customer/portal/41/PSSRV-30682]\r\n\r\n[https://getsupport.atlassian.com/servicedesk/customer/portal/41/PSSRV-30700]","author":"Alex Lam"}]},{"summary":"User Rename fails for Delegated Directories created before an upgrade to Crowd 2.7 (Null external_id)","key":"CWD-3711","url":"https://jira.atlassian.com/browse/CWD-3711","type":"Bug","priority":"","description":"h3.Steps to Reproduce\r\n# Create a Delegated Directory in Crowd *pre-2.7* (e.g. Crowd 2.5.2). Make sure that the *Synchronise User Details* checkbox is checked, otherwise, the user rename feature will fail no matter what (not related to this bug)\r\n# Login with a couple of users in the delegated directory (so that their accounts are created in the cwd_user table)\r\n# Shutdown Crowd\r\n# Upgrade to Crowd 2.7 (tested with the in-place database upgrade method)\r\n# Run the following query in the Crowd Database:\r\n{code}\r\nSELECT * FROM cwd_user WHERE user_name = '<username>';\r\n{code}\r\nReplace <username> with the user that is affected. Notice that their *external_id* is NULL (which is why this bug occurs).\r\n# Rename the user in the LDAP server itself \r\n# Login with the new username. If you check the cwd_user table now, you will notice that there are now 2 accounts created for the same user, 1 with the old username and 1 with the new username\r\n\r\nh3.Workaround\r\nAfter the Crowd upgrade to Crowd 2.7 , make sure all users login to their accounts *at least once*, before you proceed to rename any of their usernames in the LDAP server, to avoid breaking Crowd and other Crowd-connected applications. Always check the following to see if there are any users left, with a NULL external_id:\r\n{code}\r\nSELECT * FROM cwd_user WHERE external_id IS NULL;\r\n{code}\r\n\r\nh3.Suggestion\r\nWe need to have an upgrade task to force an external_id sync with the LDAP server during/immediately after the upgrade, for all users in the delegated directory","createDate":"2013-11-04T08:55:59.000+0000","comments":[]},{"summary":"Incremental sync does not correctly pick LDAP group rename","key":"CWD-3606","url":"https://jira.atlassian.com/browse/CWD-3606","type":"Bug","priority":"","description":"h2. Steps to reproduce\r\n\r\n# In an AD server, create a user {{deke}} and a group (e.g. {{astronauts}}). Add {{deke}} to the group.\r\n# In Crowd, create a LDAP connector and point it to AD, hen Sync\r\n# Verify that triggered a sync and {{deke}}'s group memberships show {{astronauts}}\r\n# Rename {{astronauts}} to {{retired-astronauts}}\r\n# Trigger a sync (should be an incremental sync)\r\n# Check {{deke}}'s group memberships in Crowd\r\n\r\nh2. Observed\r\n\r\n{{deke}} is a member of {{astronauts}} and {{retired-astronauts}}.\r\n\r\nh2. Expected\r\n\r\n{{deke}} is only a member of {{retired-astronauts}}\r\n\r\nh2. Notes\r\n\r\n* A full sync restores the consistency.\r\n* This can be reproduced with a primary group membership, not just with a regular membership.","createDate":"2013-09-10T03:43:42.000+0000","comments":[{"text":"As a workaround, I've confirmed that a full sync restores the consistency of the memberships. Therefore, until Crowd implements support to pick up group renames from LDAP directories, it is recommended to do a full sync after any group renaming operation.","author":"Diego Berrueta"},{"text":"Disabling and re-enabling the cache in the directory definition also seems to resolve this.","author":"Alain Moran"}]},{"summary":"CROWD - JIRA integration does not synchronize custom user attributes / LDAP attributes","key":"CWD-2417","url":"https://jira.atlassian.com/browse/CWD-2417","type":"Bug","priority":"","description":"We have a running JIRA instance and started evaluating Crowd as directory service for JIRA.\r\n\r\nWe are using JIRA as a help desk system and have extended it with custom user properties (telephone number, user location, ...) using a LDAP plug-in (https://plugins.atlassian.com/plugin/details/16524). The custom properties are displayed on the user profile and issue screen.\r\n\r\nWith JIRA 4.3 Atlassian revoked the support for OSUser so we can't use the plug-in anymore.\r\n\r\nWe have set up CROWD and defined custom user attributes (telephoneNumber), but these attributes are not synchronized into JIRA.\r\n\r\n*Is there a possiblity to defined custom user/group attributes in CROWD and use them in JIRA?\r\n*Why is it not possible to define a \"Delegated Authentication Directory\" and specify LDAP attributes automatically retrieved from the LDAP server and stored in the CROWD/JIRA database?\r\n","createDate":"2011-04-19T15:22:50.000+0000","comments":[{"text":"Creating a user in JIRA via UserUtil.createUserWithNotification(...) into a Remote Crowd Directory works as expected (user is in Crowd and in JIRA)\r\n\r\nBUT:\r\n- JIRA still handles its own exclusive user properties stored somewhere in the property* tables\r\n- calling DirectoryManager.storeUserAttributes() on a user from a Remote Crowd Directory works with the cwd_user_attributes table inside the jira-scheme - no sync into Crowd\r\n- Crowd has its own user attributes stored in the cwd_user_attribute table - no sync into JIRA\r\n\r\nBefore JIRA 4.3 there was one place in jira for properties and one in crowd for attributes. Now we have a third one...\r\n\r\nIdea:\r\n- migrate jira user properties into jira attributes respecting the directory of the user\r\n- DirectoryManager.storeUserAttributes() should work in the given directory (the same way as UserUtil.createUserWithNotification does).\r\n- Sync the user attributes from crowd into jira","author":"Michael Stelzner [Communardo]"},{"text":"This is an issue for us as well.  The benefit of Crowd is managing users is a single location.  If properties are not shared, we lose value and our data becomes suspect because you are relying on someone manually updating these properties in both locations...which often is not done.  We would really like to be able to sync these properties from Crowd to JIRA so that we can use them as the JIRA user properties are critical for our workflows. ","author":"Karie Kelly"},{"text":"We have our Jira having its user credentials mapped to LDAP.\r\n\r\nCan we have an option to benefit sorting of users based on the certain categories (say business units). The information of business unit is available in LDAP, so can we pull that information into Crowd.\r\nWe would really need this feature to generate a report of which team has how many users based on the business unit category to which they belong.\r\n\r\nPlease update us if you have an option to generate users report with this information.\r\n\r\nThanks,\r\nSreedevi\r\n","author":"Sreedevi Raman Pisharody"},{"text":"61 customers voted and 7 years later we are still asking for basic attribute sync...    Not to mention that Atlassian acquired StatusPage three years ago and has not integrated StatusPage login with Crowd.  I have to wonder if Atlassian is serious about Crowd as a solution...","author":"Peter Rush"}]},{"summary":"Client/Server nested groups resolution behaves inconsistently","key":"CWD-1485","url":"https://jira.atlassian.com/browse/CWD-1485","type":"Bug","priority":"","description":"Consider the case where an application is assigned to two directories {{d1}} and {{d2}} and they have the following nested groups:\r\n- {{d1}} : {{B}} member of {{A}}\r\n- {{d2}} : {{C}} member of {{B}}\r\n\r\nThe question is: is {{C}} a nested member of {{A}}?\r\n\r\nCurrently:\r\n- if you use the {{CachingGroupMembershipManager}}, all the group relationships are first downloaded from the server and amalgamated, and then the nesting is resolved locally on the client causing {{C}} to be a member of {{B}} and then {{B}} to be a member of {{A}}.\r\n- if you use the {{ApplicationServiceGeneric}}, the group relationships are calculated incrementally per directory and the final results are amalgamated causing {{C}} be a member of {{B}} only.\r\n\r\nThis behaviour is highly inconsistent as it implies that using caching on the client will produce different results to making queries directly to the server.","createDate":"2009-03-30T01:18:02.000+0000","comments":[{"text":"This still needs to be discussed further by development to define what we 'think' the desired & consistent behavior should be.","author":"Justin Koke"},{"text":"[~dowoc@atlassian.com] I can help you reproduce it. Or even I can tell you that it's a feature:)","author":"Pawel Gruszczynski"}]},{"summary":"Site-wide custom announcement banner not visible","key":"CRUC-8659","url":"https://jira.atlassian.com/browse/CRUC-8659","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nAccording to the [Fisheye 4.9 release notes|https://confluence.atlassian.com/fisheye/fisheye-4-9-release-notes-1484751189.html], there should be a new menu option at {{{}*Administration > Global settings > Custom banner*{}}}, but this menu option is not available.\r\n\r\nThe related Suggestion ticket is CRUC-5201.\r\nh3. Steps to Reproduce\r\n # Go to the Administration area\r\n # Search for the {{*Custom banner*}} menu option in the {{*Global settings*}} section, and it won't be found. In fact, it won't be found under any section of the Administration area.\r\n\r\nh3. Expected Results\r\n\r\nThe {{*Custom banner*}} option should be found at {{*Administration > Global settings*}}\r\nh3. Actual Results\r\n\r\nThe {{*Custom banner*}} option is not found at {{*Administration > Global settings*}}\r\n\r\n!screenshot-1.png|thumbnail!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-01-09T19:55:16.000+0000","comments":[]},{"summary":"Publisher and Published Date are not retained after unmigrated-wiki-markup macro remigration job execution","key":"CONFSERVER-99530","url":"https://jira.atlassian.com/browse/CONFSERVER-99530","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPublisher and Published Date are not retained after unmigrated-wiki-markup macro remigration job execution.\r\nh3. Steps to Reproduce\r\n * Install Confluence version 8.5.16 and 9.2.2.\r\n * Create a new page with the *Unmigrated-wiki-markup* macro as shown below.\r\n ** Create a new page and in a Confluence editor > add `{*}Markup{*}` \r\n ** Choose `{*}Confluence wiki{*}` and insert the below content; notice there are *some whitespaces* in the front of the closing curly bracket.You can see the Preview render a `{*}Wiki Markup{*}` macro  \r\n{code:java}\r\n{\r\n   \" \"\r\n  } {code}\r\n!wikimarkup.png|width=341,height=107!\r\n\r\n * \r\n ** Click the `{*}Insert{*}` button and save the page. This will add an *unmigrated-wiki-markup* macro is added to the page.  !umigratedwikimarkup.png|width=450,height=204!\r\n * Install/upgrade a third-party app that provides macros, such as the Content Formatting for Confluence plugin version 7.2.4.\r\n * Restart the instance.\r\n\r\nh3. Expected Results\r\n\r\nAfter execution of the macro remigration job, the published and published date should be retained for the new page version as shown below in both Confluence version, but only happens in 8.5.x\r\n!issuereprod8516.png|width=396,height=171!\r\nh3. Actual Results\r\n\r\nAfter execution of the macro remigration job, the published and published date is not retained, as shown below in 9.2.2 version.\r\n!9.2.2-new-version-created.png|width=440,height=252! \r\nThe below *INFO* message is shown in the *atlassian-confluence.log* file mentioning the re-migration job started.\r\n{noformat}\r\n2025-03-25 09:42:12,258 INFO [Catalina-utility-1] [xhtml.migration.macro.RemigrationLifecycleItem] startup Remigration is required\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-04-01T15:06:35.000+0000","comments":[{"text":"Hi All,\r\n\r\nJust a quick update on this.\r\n\r\nThis change was made intentionally to surface when a change was made by the remigration task by the system. The previous behavior did not accurately reflect when the job was run, and misattributed the change to the last user to update the page rather than the \"Anonymous\" user indicating a system change.\r\n\r\nThe new behavior is potentially confusing, but is more accurate.\r\n\r\nThanks,\r\nJames Ponting\r\nEngineering Manager - Confluence Data Center","author":"James Ponting"}]},{"summary":"Development field is not shown on Jira issue macros(JIM)","key":"CONFSERVER-99529","url":"https://jira.atlassian.com/browse/CONFSERVER-99529","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe JIRA Issue/Filter macro won't display the information contained on the *Development* field of software projects, and also the macro breaks after trying to reorder the issues using this field.\r\nh3. Steps to Reproduce\r\n # On a Confluence page insert a {*}JIRA Issue/Filter macro{*}.\r\n # Configure a JQL which will return issues with the *Development* field.\r\n # On the macro's view option, *add* the Development field.\r\n # *Save* the macro and publish the page.\r\n # *Reorder* the issues using the Development field.\r\n\r\nh3. Expected Results\r\n * The information contained on the Development field/column should be shown along with the other fields.\r\n * After reordering the issues on the Development field/column, we should see all the information in the new order.\r\n\r\nh3. Actual Results\r\n\r\n!jira_bb_status.png|width=511,height=248!\r\n\r\n!Screenshot 2025-03-28 at 3.37.50 PM.png|width=549,height=135!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-04-01T12:52:38.000+0000","comments":[{"text":"\"Development\" is a section Jira issue view, not a field as such. The bug may be that it's available in field list in the first place.","author":"Jiri Hronik"}]},{"summary":"Attempting to create a Personal space while incremental/background indexing is already flushing/committing data can lead to a slowdown in indexing rates","key":"CONFSERVER-99523","url":"https://jira.atlassian.com/browse/CONFSERVER-99523","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence's incremental/background indexing can occasionally come under some processing load while attempting to flush newly indexed data. This is visible as slowly increasing _Queued for processing_ numbers under _Administration_ > _Content Indexing_ > _Content queue_ OR {_}Change queue{_}. This is normal, and is something that Confluence generally overcomes on its own (given enough time, and a sufficiently suitable dip in content-creation/modification rates).\r\n\r\n{_}However{_}, if a user attempts creating a _Personal space_ in that same timeframe, the sequence of events involved while executing the {{/create-personal-space}} action also include an _immediate_ index-queue flush operation. The index-queue flush operation involves acquiring a lock on the desired index before data is written/committed to it. With incremental/background indexing already in progress (and occasionally stressed with a few pending objects to index), the {{/create-personal-space}} action can end up waiting indefinitely for a lock to execute its own one-time index-queue flush.\r\n\r\nThe situation can worsen if a few more users attempt the creation of their own _Personal spaces_ in that same timeframe. Then, each {{/create-personal-space}} action will attempt executing its own one-time index-queue flush, going through the same motions of waiting to lock the desired index while other threads are still flushing/committing data to that same index.\r\nThis sub-optimal lock-acquisition behavior then results in bringing down the overall indexing rates, which in turn show up as:\r\n - constantly high (hundreds of thousands) _Queued for processing_ numbers under _Administration_ > _Content Indexing_ > _Content queue_ OR _Change queue_\r\n - inaccurate search results (newly created/modified Confluence content is not yet searchable)\r\n\r\n \r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n\r\n(Similar to [CONFSERVER-90319|https://jira.atlassian.com/browse/CONFSERVER-90319])\r\n # Setup a Confluence instance and try to push a lot of content (create new pages, comments etc.) using any kind of automation (plugins or REST API scripts).\r\n # Ensure that the _Queued for processing_ numbers under _Administration_ > _Content Indexing_ > _Content queue_ OR _Change queue_ are in the thousands.\r\n # Attempt creating a new _Personal space_ via _Spaces_ > _Create space_\r\n\r\nh3. Expected Results\r\n\r\nProvided that a _Personal space_ does not already exist for the user account in question, a new _Personal space_ should be created in a matter of a few seconds.\r\nOnce created, content posted to that space should be searchable after a reasonable time (generally a few minutes) once the existing backlog of pending items have been indexed.\r\nh3. Actual Results\r\n\r\nThe _Personal space_ creation action executes an immediate one-time index-queue flush, which in turns waits for the acquisition of a lock. \r\nAdd a few more concurrent _Personal space_ creation actions, along with a sufficiently large and active indexing backlog, and the incremental/background indexing pace will slow down to a crawl from adhering to lock re-acquisition routines.\r\n\r\nThe runtime of the http thread that triggered the _Personal space_ creation may eventually exceed Tomcat's {{StuckThreadDetectionValve}} default threshold of 60 seconds. \r\nThat will show up in the instance's {{<confluence-install-dir>/logs/catalina.*}} log:\r\n{code:bash|title=thread \"http-nio-8090-exec-10\" (for /rest/create-dialog/1.0/space-blueprint/create-personal-space) running for more than 60 seconds}\r\nDD-Mmm-YYYY HH:MM:SS.mmm WARNING [Catalina-utility-2] org.apache.catalina.valves.StuckThreadDetectionValve.notifyStuckThreadDetected Thread [http-nio-8090-exec-10 url: /rest/create-dialog/1.0/space-blueprint/create-personal-space; user: test_user] (id=[5700]) has been active for [69,400] milliseconds (since [MM/DD/YY HH:MM AM/PM]) to serve the same request for [https://<BaseURLWithContext>/rest/create-dialog/1.0/space-blueprint/create-personal-space] and may be stuck (configured threshold for this StuckThreadDetectionValve is [60] seconds). There is/are [1] thread(s) in total that are monitored by this Valve and may be stuck.\r\n\tjava.lang.Throwable\r\n\t\tat sun.misc.Unsafe.park(Native Method)\r\n\t\t\r\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)\r\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:870)\r\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1199)\r\n\t\tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:209)\r\n\t\tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:285)\r\n\t\t\r\n\t\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:68)\r\n\t\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:62)\r\n\t\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.tryLockSingleIndex(LuceneIncrementalIndexManager.java:245)\r\n\t\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.flushQueue(LuceneIncrementalIndexManager.java:123)\r\n{code}\r\n*note* - in extreme cases, this (and similar) thread(s) may eventually terminate successfully only multiple _hours_ later, for which corresponding {{notifyStuckThreadCompleted}} entries will also be recorded\r\n\r\n[Thread dumps|https://confluence.atlassian.com/conf85/generating-a-thread-dump-1283361539.html] will show other such operations waiting on the thread that has successfully acquired the lock and is currently flushing/committing data to the index:\r\n{code:bash|title=single thread dump from one instant in time, showing thread \"http-nio-8090-exec-10\" waiting on thread \" http-nio-8090-exec-55\" (runnable) to acquire a lock}\r\n\"http-nio-8090-exec-10 url: /rest/create-dialog/1.0/space-blueprint/create-personal-space; user: test_user\" daemon prio=5 tid=0x000000000000d5f4 nid=0 waiting on condition \r\n   \r\n   java.lang.Thread.State: WAITING (parking)\r\n\t\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t\r\n\t- parking to wait for <0x00000000752228d6> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\r\n\t owned by http-nio-8090-exec-55 url: /rest/create-dialog/1.0/space-blueprint/create-personal-space; user: test_user2 id=0x0000000000001650\r\n\t\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:870)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1199)\r\n\tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:209)\r\n\tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:285)\r\n\t\r\n\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:68)\r\n\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:62)\r\n\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.tryLockSingleIndex(LuceneIncrementalIndexManager.java:245)\r\n\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.flushQueue(LuceneIncrementalIndexManager.java:123)\r\n{code}\r\nh3. Workaround\r\n\r\n[Set|https://confluence.atlassian.com/doc/configuring-system-properties-168002854.html] the following system property to control/specify the amount of time (in minutes) that a Confluence thread may wait for, in order to acquire a lock on a desired index:\r\n{code:bash}\r\n-Dconfluence.index.manager.lock.timeout=1\r\n{code}\r\nThis will permit contending threads to timeout a lock-acquisition attempt, and allow for the continuance of normal app functioning. \r\nNewly-created space-data will automatically get picked up by the scheduled ({{{}Caesium{}}} - based) incremental/background indexer threads in due time, and there is no need to interrupt the normal processing of indexing lines and force an immediate/out-of-sequence index-flush.","createDate":"2025-03-31T05:17:22.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Cannot Search Users in People Directory Coming from a Crowd User Directory - Backport fix from 9.2","key":"CONFSERVER-99522","url":"https://jira.atlassian.com/browse/CONFSERVER-99522","type":"Bug","priority":"","description":"h2. Summary\r\n\r\nUsers from Crowd Server User Directory do not appear in people directory or search results.\r\nh2. Version info\r\n - Found in:\r\n ** Crowd version 6.2.3 plugged as User Directory in Confluence branch 8.5.19\r\n ** Latest bug-fix LTS version 9.2.2 *does not look affected by the scenario below and this bug is here to ask for a backport of the fix*\r\n\r\nh3. Issue Summary\r\n\r\nAfter having configured the Confluence instance to [connect to Crowd|https://confluence.atlassian.com/conf85/connecting-to-crowd-or-jira-for-user-management-1283360870.html] for user management, when *Update group memberships when logging in* is set to {*}Every time the user logs in{*}, the user may not appear in the Confluence People Directory after logging in.\r\nh3. Steps to Reproduce\r\n # Create a Crowd 6.2.3 instance\r\n # Create a *confluence* application in Crowd (follow the steps [connect to Crowd|https://confluence.atlassian.com/conf85/connecting-to-crowd-or-jira-for-user-management-1283360870.html] to configure the Crowd side)\r\n # Create a dummy user *test* in Crowd not part of any group\r\n # Create a *confluence-users* group in Crowd\r\n # Create a Confluence 8.5.19 instance\r\n # Follow the steps [connect to Crowd|https://confluence.atlassian.com/conf85/connecting-to-crowd-or-jira-for-user-management-1283360870.html] to configure the *Crowd Server User Directory* in Confluence (see recording to see how we configure the directory to especially use *Update group memberships when logging in* is set to *Every time the user logs in*\r\n # Back in Crowd add the *test* user to the *confluence-users* group\r\n # Login to Confluence with the *test* user in an incognito windows\r\n # Confirm *test* user can access Confluence content and is part of *confluence-users* group (/) but can't be searched in People Directory (x)\r\n\r\nAttaching a recording to help in the steps to reproduce\r\n\r\nFor reference you can increase verbose of the 2 modules below to DEBUG \r\n * com.atlassian.confluence.user.crowd.UserIndexingListener - The event that should index users being synchronised\r\n * com.atlassian.crowd.directory.DbCachingRemoteChangeOperations - The sender for the above event\r\n\r\nWhen the user is searchable we se the indexing event happening for adding the user to the group\r\n{code:java|title=atlassian-confluence-security.log}\r\n[...]\r\n[confluence.user.crowd.UserIndexingListener] onMembershipCreatedEvent test (GROUP_USER) added to confluence-users\r\n[...]\r\n{code}\r\nThis log does not happen in the scenario above\r\nh3. Expected Results\r\n\r\nThe *test* user having access to Confluence and being part of the *confluence-users* group should be indexed and searchable in *People Directory* (/)\r\nh3. Actual Results\r\n\r\nThe user is not displayed in the *People Directory* (x)\r\nh3. Workaround\r\n * Retriggering a synchronization of the Crowd User Directory could help but defeat the purpose of the feature that should indexed the new user \"on the fly\"\r\n * Also when configuring *Update group memberships when logging in* is set to *Never* => the user index will happen during the synchronization and the user will be displayed. The customer is still pushing to have near instant display of the user in the People Directory as soon as they have valid access to Confluence.\r\n\r\nh3. Additional Notes\r\n\r\nThe issue has been fixed in Confluence LTS Branch 9.2 and this bug is here to ask for a backport of the fix to LTS Branch 8.5","createDate":"2025-03-31T01:45:00.000+0000","comments":[]},{"summary":"9.2: The create button is smaller now, unnamed for users with only view access in a space (including Anonymous).","key":"CONFSERVER-99505","url":"https://jira.atlassian.com/browse/CONFSERVER-99505","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nback port of https://jira.atlassian.com/browse/CONFSERVER-96560\r\n\r\nThe create button is smaller now, unnamed for either Anonymous users with view access and/or authenticated users with only view access in a space.\r\n\r\nThis is reproducible on Data Center: (yes) \r\nh3. Steps to Reproduce\r\nh6. On Confluence\r\n * Login as admin\r\n * Go to General Configuration > Global Permissions > Edit Permissions and enable can use for Anonymous Access and save the changes. Alternatively, you can use an authenticated user who only has view access in a space.\r\n * Go to any space and click on space tools\r\n * Go to permissions and click on edit permissions\r\n * For Anonymous Access deselect all the checkboxes and only keep the view selected and save the changes. Or, make sure the authenticated user you're testing with only has *view* access.\r\n\r\nh6. As an Anonymous user\r\n * Now logout from Confluence and click on the Confluence logo at the top left corner\r\nAfter clicking you will land on #all-updates page\r\n * Now go to any page from the space that we edited earlier providing view privileges for Anonymous Access\r\n * It's observed that the create page button just becomes a dark blue square box and there is nothing mentioned on the box unless we click on the box\r\n\r\nh6. As an Authenticated user\r\n * Now go to any page from the space that we edited earlier providing view privileges\r\n * It's observed that the \"Create\" page button just becomes a dark blue square box and there is nothing mentioned on the box unless we click on the box\r\n\r\nh3. Expected Results\r\n\r\nThe create page button just becomes a dark blue square box and there is nothing mentioned on the box unless we click on the box\r\nh3. Actual Results\r\n\r\nThe create button should be visible as it used to be on Confluence v8.5.12\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T01:35:26.000+0000","comments":[]},{"summary":"Jira Events dialog in Team Calendar stucks at loading","key":"CONFSERVER-99485","url":"https://jira.atlassian.com/browse/CONFSERVER-99485","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using Jira Events in Team Calendar with large Jira instance linked, the dialog takes long time to load and eventually times out.\r\n\r\nIt is caused by a bug reported in Jira Data Center: JSWSERVER-16764.\r\nh3. Steps to Reproduce\r\n # Establish a connection between Confluence DC and a large Jira DC via Application links.\r\n ## As outlined in the relevant Jira ticket, the issue manifests for a significant number of projects, search filters, and custom date fields ({_}as these three data dimensions are queried{_}).\r\n # Navigate to the Calendars section.\r\n # Open the Add Event dialog.\r\n # Choose one of the Jira event types: Jira Issue Dates, Jira Agile Sprints, or Jira Project Releases.\r\n\r\nh3. Expected Results\r\n\r\nThe dialog loads the form for the selected Jira Event Type, making it functional. Users can utilise it to create new events or edit existing ones.\r\n\r\n!image-2025-03-21-15-13-59-668.png|width=389,height=355!\r\nh3. Actual Results\r\n\r\nThe dialog is stuck in a loading state, ultimately resulting in a timeout that renders it unresponsive.\r\n\r\n!image-2025-03-21-15-13-31-074.png|width=390,height=357!\r\nh3. Workaround\r\n\r\nSame as in the originating Jira issue -> Increase the timeout for the calendar connection as mentioned in the KB article [JIRA Calendar Read Timed Out|https://confluence.atlassian.com/confkb/jira-calendar-read-timed-out-312740464.html].","createDate":"2025-03-21T14:19:22.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Anonymous user unable to see People Directory","key":"CONFSERVER-99483","url":"https://jira.atlassian.com/browse/CONFSERVER-99483","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAnonymous users are unable to see user profiles from the people directory.\r\nh3. Steps to Reproduce\r\n\r\n[https://confluence.atlassian.com/doc/setting-up-public-access-156.html]\r\n\r\nEnable anonymous access to your site:\r\n# Go to *Administration* menu  !https://confluence.atlassian.com/doc/files/747833194/747833195/2/1517274813281/cog.png|width=16! , then *General Configuration* > {*}Global permissions{*}. \r\n# Select {*}Edit Permissions{*}.\r\n# In the *Anonymous Access* section, select the *Can use* checkbox. \r\n# Allow anonymous users to see [user profiles|https://confluence.atlassian.com/doc/your-profile-and-settings-139467.html].\r\n# Select {*}Save All{*}.\r\n# Log out and go to login page\r\n# You will see people option available at the top.\r\n# Click on it.\r\n\r\nh3. Expected Results\r\n\r\nAs per documentation it should it allow anonymous users to see [user profiles|https://confluence.atlassian.com/doc/your-profile-and-settings-139467.html].\r\nh3. Actual Results\r\nRedirect to Confluence login page\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nh3. Versions Tested\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Most Recent Bug-Fix Release| 9.3.2 | Yes |\r\n|Most Recent LTS|9.2.2|Yes|\r\n|Issue Identified Since| 9.0.1 | Yes |\r\n|Previous Supported LTS|8.5|No|\r\n|_Other Versions.._| 8.9 | No |\r\n|_(Add rows as needed)_| | |\r\n","createDate":"2025-03-21T05:56:08.000+0000","comments":[{"text":"To clarify, I am able to access user profiles as an anonymous user, but People Directory (the link in the navigation bar) redirects to the login page.\r\nIn Confluence 8.5.18, People Directory was available to anonymous users.","author":"Jiri Hronik"}]},{"summary":"Search results are not generated after Confluence 9.x.","key":"CONFSERVER-99480","url":"https://jira.atlassian.com/browse/CONFSERVER-99480","type":"Bug","priority":"","description":"h2. Version info\r\n\r\nConfluence 9.x\r\nh2. Description\r\nh3. Issue Summary\r\n\r\nVisiting {{http://<CONFLUENCE_URL>/explain.action?queryString=keywords}} will provide a formatted list of each search result, and what factors contribute to its overall score as outlined in the below document: \r\n * [How to understand the ranking of Confluence's Search Results|https://confluence.atlassian.com/confkb/how-to-understand-the-ranking-of-confluence-s-search-results-785614686.html]\r\n\r\nAfter introducing [Configuring the Velocity method allowlist|https://developer.atlassian.com/server/framework/atlassian-sdk/configuring-the-velocity-allowlist/] with Confluence 9.x, the below methods are blocked and prevent viewing the formatted list of each search result, and what factors contribute to its overall score.\r\n{code:java}\r\ncom.atlassian.confluence.plugins.search.api.model.SearchResults#getSearchQuery()\r\ncom.atlassian.confluence.plugins.search.api.model.SearchResult#getTitle()\r\ncom.atlassian.confluence.plugins.search.api.model.SearchResults#getResults()\r\n{code}\r\nh3. Steps to Reproduce\r\n # Install Confluence 9.x\r\n # Visit the URL {{http://<CONFLUENCE_URL>/explain.action?queryString=TEST}}\r\n # Below message appears in the browser:\r\n{code:java}\r\nquery:\r\n$action.searchResults.searchQuery\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe query should return a list like below:\r\n{code:java}\r\nquery:\r\n+(title:test^2.1 contentBody:test content-name-unstemmed:test) +ConstantScore(+filtered(*:*)->com.atlassian.confluence.impl.search.v2.lucene.filter.ContentPermissionsFilter@f20a14f7 +(-type:space -type:globaldescription +*:*) +(-isExternallyDeletedUser:true -isDeactivatedUser:true +*:*) +*:* +(-ConstantScore(+type:custom +(contentPluginKey:com.atlassian.confluence.plugins.confluence-content-property-storage:content-property contentPluginKey:com.atlassian.confluence.plugins.confluence-emoticons-plugin:custom-emoticon)) +*:*) +((contentStatus:current filtered(*:*)->FieldValueFilter [field=contentStatus, negate=true]) filtered(*:*)->FieldValueFilter [field=contentStatus, negate=true]))\r\n(1) @@@hl@@@TEST@@@endhl@@@:\r\n16.433096 = (MATCH) sum of:\r\n  15.433096 = (MATCH) sum of:\r\n    10.438857 = (MATCH) weight(title:test^2.1 in 0) [BM25LSimilarity], result of:\r\n      10.438857 = score(doc=0,freq=1.0 = termFreq=1.0), product of:\r\n        2.1 = boost\r\n        3.912023 = idf(docFreq=1, maxDocs=74)\r\n        1.2706685 = tfNorm, computed from:\r\n          1.0 = termFreq=1.0\r\n          1.25 = parameter k1\r\n          0.3 = parameter b\r\n          1.5675676 = avgFieldLength\r\n          1.0 = fieldLength\r\n    4.9942393 = (MATCH) weight(content-name-unstemmed:test in 0) [BM25LSimilarity], result of:\r\n      4.9942393 = score(doc=0,freq=1.0 = termFreq=1.0), product of:\r\n        3.912023 = idf(docFreq=1, maxDocs=74)\r\n        1.2766385 = tfNorm, computed from:\r\n          1.0 = termFreq=1.0\r\n          1.25 = parameter k1\r\n          0.3 = parameter b\r\n          1.6891892 = avgFieldLength\r\n          1.0 = fieldLength\r\n  1.0 = (MATCH) ConstantScore(+ConstantScore(com.atlassian.confluence.impl.search.v2.lucene.filter.ContentPermissionsFilter@f20a14f7) +(-type:space -type:globaldescription +*:*) +(-isExternallyDeletedUser:true -isDeactivatedUser:true +*:*) +*:* +(-ConstantScore(+type:custom +(contentPluginKey:com.atlassian.confluence.plugins.confluence-content-property-storage:content-property contentPluginKey:com.atlassian.confluence.plugins.confluence-emoticons-plugin:custom-emoticon)) +*:*) +((contentStatus:current ConstantScore(FieldValueFilter [field=contentStatus, negate=true])) ConstantScore(FieldValueFilter [field=contentStatus, negate=true]))), product of:\r\n    1.0 = boost\r\n    1.0 = queryNorm\r\n{code}\r\n \r\nh3. Actual Results\r\n{code:java}\r\nquery:\r\n$action.searchResults.searchQuery\r\n{code}\r\nh3. Workaround\r\n\r\nThe below system parameter should be set as explained here: [Configuring System Properties|https://confluence.atlassian.com/conf92/configuring-system-properties-1477577226.html]\r\n{code:java}\r\n-Datlassian.velocity.method.allowlist.extra=com.atlassian.confluence.plugins.search.api.model.SearchResults#getSearchQuery\\(\\),com.atlassian.confluence.plugins.search.api.model.SearchResults#getResults\\(\\),com.atlassian.confluence.plugins.search.api.model.SearchResults#getResults\\(\\) {code}","createDate":"2025-03-20T14:57:19.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Missing text in tooltip of \"clear formatting\" shortcut in the page editor","key":"CONFSERVER-99479","url":"https://jira.atlassian.com/browse/CONFSERVER-99479","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMissing tooltip text for shortcut of \"Clear formatting\" in the page editor, this affects all languages.The text is shows as *\"CTRL+tinymce.table_shortcuts=CTRL+...\"*\r\n\r\n{*}!https://jira.atlassian.com/secure/temporaryattachment/02d0227279c6d7d9ff96844bb1b3223efaaf9cbf/temp11793806495293893432_image-2025-03-20-10-22-41-415.png|width=317,height=208!{*}{*}{*}\r\nh3. Steps to Reproduce\r\n # Edit a page, then select any text and click on the *Strikethrough* icon\r\n # Mousehover over the last menu item *\"Clear Formatting\"*\r\n # Notice the text is missing and instead, it is seen as *\"CTRL+tinymce.table_shortcuts=CTRL+...\"*\r\n\r\nh3. Expected Results\r\n\r\nThe text should appear correctly on mouse hover over \"Clear Formatting\" item\r\nh3. Actual Results\r\n\r\nThe text is showing incorrectly *\"CTRL+tinymce.table_shortcuts=CTRL+...\"*\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-20T09:24:45.000+0000","comments":[]},{"summary":"Inline Comment: Non-modal dialogs are inaccessible for both keyboard only and screen reader users","key":"CONFSERVER-99463","url":"https://jira.atlassian.com/browse/CONFSERVER-99463","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “View page\", non-modal dialog becomes available when the user mouse hovers over \"Admin Admin\" is inaccessible.\r\nh3. Steps to Reproduce\r\n # Open any space from the confluence\r\n # navigate to the side navigation & activate any page.\r\n # Navigate to the comment section \r\n # Navigate to the mentioned \"user icon\" link \r\n # Navigate to the mentioned tooltip content using keyboard.\r\n # Turn on the screen reader and observe that tooltip content is not accessible.\r\n\r\nh3. Screenshot \r\n\r\n!image-2025-03-18-16-07-51-997.png|width=478,height=490!\r\nh3. Actual Results\r\n\r\nOn the \"View page \" page, the non-modal dialog that becomes available when the user mouse hovers over “user icon” is not accessible. These non-modal dialogs are coded inappropriately which makes functionality inaccessible for keyboard-only and screen reader users.\r\nh3. Expected Results\r\n\r\nThe mentioned dialog should be accessible for keyboard-only and screen reader users.\r\n\r\nMake the dialog accessible by performing the following steps:\r\n # Ensure that both elements are accessible for all users, including those using screen readers and keyboard navigation.\r\n # Implement the profile icon as a button that triggers a profile card popup; this can be achieved by adding role=”button” \r\n # Add {{role=\"dialog\"}} and {{\"aria-labelledby\"}} attribute to the {{<div>}} element containing the modal dialog heading/title for text “User name”.\r\n # Specify the \"id\" attribute with a unique value to the element containing the heading text i.e “User name” and reference it via the {{\"aria-labelledby\"}} attribute.\r\n\r\nFor information on creating accessible non-modal dialog refer [Non Modal Dialogs|https://hello.atlassian.net/wiki/spaces/A11Y/pages/1105796220/Non+Modal+Dialogs]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2025-03-18T05:06:07.000+0000","comments":[]},{"summary":"Enabling Certain Apps in Confluence fails with com.atlassian.user.impl OSGi error","key":"CONFSERVER-99461","url":"https://jira.atlassian.com/browse/CONFSERVER-99461","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nA variety of apps fail to enable in Confluence 9.3.2. Analysis of the logs shows the following errors when these fail:\r\n{code:java}\r\n2025-03-13 05:35:58,446 ERROR [UpmAsynchronousTaskManager:thread-3] [atlassian.plugin.manager.PluginEnabler] actualEnable Unable to enable plugin com.midori.confluence.plugin.archiving\r\n -- url: /confluence/rest/plugins/1.0/ | userName: admin | referer: https://linux-94980.prod.atl-cd.net/confluence/plugins/servlet/upm/marketplace/featured | traceId: 6e93914f1fef2f83\r\ncom.atlassian.plugin.osgi.container.OsgiContainerException: Cannot start plugin: com.midori.confluence.plugin.archiving\r\n\tat com.atlassian.plugin.osgi.factory.OsgiPlugin.enableInternal(OsgiPlugin.java:423)\r\n\tat com.atlassian.plugin.impl.AbstractPlugin.enable(AbstractPlugin.java:260)\r\n\tat com.atlassian.plugin.manager.PluginEnabler.actualEnable(PluginEnabler.java:120)\r\n...\r\nCaused by: org.osgi.framework.BundleException: Unable to resolve com.midori.confluence.plugin.confluence-archiving-plugin [290](R 290.0): missing requirement [com.midori.confluence.plugin.confluence-archiving-plugin [290](R 290.0)] osgi.wiring.package; (&(osgi.wiring.package=com.atlassian.user.impl)(version>=3.0.0)(version<=3.0.0)) Unresolved requirements: [[com.midori.confluence.plugin.confluence-archiving-plugin [290](R 290.0)] osgi.wiring.package; (&(osgi.wiring.package=com.atlassian.user.impl)(version>=3.0.0)(version<=3.0.0))]\r\n\tat org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4398)\r\n\tat org.apache.felix.framework.Felix.startBundle(Felix.java:2308)\r\n{code}\r\nA non-exhaustive list of the affected apps is below:\r\n * Better Content Archiving\r\n * Mosaic\r\n * PlantUML for Confluence\r\n * Cache for Confluence\r\n\r\nh3. Environment\r\n\r\nConfluence 9.3.2\r\nh3. Steps to Reproduce\r\n # Install Confluence 9.3.2\r\n # Attempt to install one of the affected apps (Midori Better Content Archiving for example)\r\n\r\nh3. Expected Results\r\n\r\nApp is installed and enabled in the UI\r\nh3. Actual Results\r\n\r\nApp is installed, but fails to enable. Attempts to enable in the UI stall out with no observable activity. Analysis of the logs shows the aforementioned errors.\r\nh3. Workaround\r\n{panel:bgColor=#e7f4fa}\r\n(!) As with all recommendations made by Atlassian Support, please follow best practices for Change Management and *test and validate* these settings in a Test or Development environment *prior to* deploying any changes to a Production environment. This allows for the validation of these changes while minimizing the risk and impact to end users.\r\n{panel}\r\nTo manually remove the invalid osgi import packages from `MANIFEST.MF` from `{*}transformed-plugins{*}`:\r\n # Shut down the server\r\n # Goto Confluence home > plugin-osgi-cache > transformed-plugins, find the target transformed plugin, e.g: \r\n{code:java}\r\n// notice: that the full name is important and is different on different server after plugin installed, DO NOT change it\r\n1741915664103plugin_10170326145924478713_bobswift-cache-7.9.11_1741915664103.jar  {code}\r\n\r\n # Backup the target jar in case you want to rollback\r\n # Unzip the original jar file \r\n # Got to unzipped directory > META-INF, open *MANIFEST.MF* in an txt editor\r\n # In `Import-Package` section, find the invalid package, remove it and save the file, such as below or if from the logs there are more invalid osgi packages\r\n{code:java}\r\ncom.atlassian.user.impl;version=\"[3.0.0,3.0.0]\" {code}\r\n\r\n # Got to the root directory of the unzip directories (the parent directory of `META-INF` folder) \r\n # Create an new plugin jar with the updated MANIFEST.MF\r\n{code:java}\r\n// notice: use the name of the transformed plugin from the customer's server, below is just an example\r\njar cmf META-INF/MANIFEST.MF ../1741915664103plugin_10170326145924478713_bobswift-cache-7.9.11_1741915664103.jar *  {code}\r\n\r\n # Replace the original jar file with the new plugin jar file in `{*}transformed-plugins{*}` folder\r\n # Restart the server and check the plugin status  \r\n\r\n{*}Notice{*}: this is not a guarantee that plugin will function well, it is just to fix the problem the invalid osgi package cause the plugin not able to enable. We advise testing in a lower environment before applying this to prod.","createDate":"2025-03-17T19:09:09.000+0000","comments":[{"text":"One of our customers reported that the following apps also suffer from the same problem in Confluence 9.3.2:\r\n * Enterprise Search Plugin for Confluence by Raytion GmbH\r\n * Announcer for Confluence by Appfire\r\n * Content Formatting Toolkit for Confluence by Vectors","author":"Gergely Juhász [Midori]"},{"text":"Any updates on a permanent fix? We are blocked from upgrading the rest of our environments until this gets fixed.","author":"Andrei Timofti"},{"text":"This also blocks us from updating Announcer for Confluence by Appfire in Confluence 9.3.2","author":"Julian Bauer"},{"text":"Can someone confirm/infirm if this issue is present in 9.3.1 as well? We are considering upgrading to it if the plugin issue isn't present there. Thanks!","author":"Andrei Timofti"},{"text":"[~3d82ee4ce133]\r\nWe (Midori) can confirm that Better Content Archiving for Confluence works well in Confluence 9.3.1. The issue seems to be present only in 9.3.2.","author":"Roland Traier-Kiss [Midori]"},{"text":"[~7d703c2a565e] Thanks for the confirmation. I've upgraded one of our other nonPROD envs to 9.3.1 and I can confirm every app that we have is enabled and working fine on 9.3.1. ","author":"Andrei Timofti"},{"text":"this is a blocker bug. we need an ETA from Atlassian support when they plan to deliver the fix. this blocks us from upgrading confluence from 8.5.x LTS to 9.2.x LTS.","author":"Savvas Radevic"},{"text":"Do the symptoms not suggest that this issue only occurs for transformed plugins? Meaning either you are not using Spring Scanner or Java Spring config, or else you are indeed using one of those but you forgot to declare a {{<Atlassian-Plugin-Key>}} in your pom's {{<instructions>}}?\r\n\r\nUsing a transformed plugin has been extremely dicey since the denylist changes were added in Confluence 8.8 and Confluence 9.0+, resulting in random footguns that pop up at random (such as this). If these hypotheses are correct, the only long-term solution is to migrate your code to a fully transformerless plugin.","author":"Scott Dudley [Cenote]"},{"text":"{panel:title=Update: 2025-03-31|borderStyle=solid|borderColor=#6554c0|titleBGColor=#6554c0|bgColor=#eae6ff}\r\nHi all,\r\n\r\nThe affected versions for this bug were previously listed incorrectly and we can confirm that only Confluence 9.3.2 is impacted. Those on Confluence 9.2 LTS or looking to upgrade to that version need not be concerned.\r\n\r\nIf you are on earlier 9.x versions and still experiencing issues installing plugins - please reach out to the affected plugin developer(s) as such issues are unrelated to this bug.\r\n\r\nA fix for this bug will be available in Confluence 9.4.0.\r\n\r\nAs one commenter has pointed out, this bug only impacts plugins which are \"transformed\". Plugin developers can fix this bug for customers immediately by updating their plugins to be \"transformerless\" and releasing a new version. This involves utilising the Atlassian Spring Scanner or the recommended [Spring Java configuration|https://developer.atlassian.com/server/framework/atlassian-sdk/spring-java-config/].\r\n{panel}","author":"Kusal Kithul-Godage"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"A Confluence instance with an Oracle or MSSQL DB backend fails to upgrade to an affected Confluence version if the label table has multiple rows of NULL names and NULL owners","key":"CONFSERVER-99419","url":"https://jira.atlassian.com/browse/CONFSERVER-99419","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA Confluence instance with an Oracle or MSSQL DB backend fails to upgrade to listed affected Confluence versions if the label table has multiple rows of {{NULL}} names and {{NULL}} owners\r\n\\\\\r\n\\\\\r\nThe upgrade will fail at executing schema modification operations triggered by the {{LabelUniqueIndexUpgradeTask}}, specifically the addition of a database-index named {{IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE}} on that table.\r\n\r\n(i) *Note*: Postgres and MySQL instances will let the upgrade succeed even in the presence of multiple {{NULL}} valued label-names and label-owners since {{NULL}} values are parsed/processed differently on those databases.\r\n\r\nh3. Steps to Reproduce\r\n\r\nOn a Confluence 7.19.x or 8.5.x instance (with Oracle or MSSQL as the backend):\r\nAdd bogus {{NULL}} value data to the {{label}} table like this (problematic values highlighted in red):\r\n||LABELID||NAME||OWNER||NAMESPACE||CREATIONDATE||LASTMODDATE||\r\n|720897|favourite|402894949583e753019583e843ac0000|my|2015-09-15 16:59:33.000|2015-09-15 16:59:33.000|\r\n|{color:#de350b}100{color}|{color:#de350b}NULL{color}|{color:#de350b}NULL{color}|global|2015-09-15 16:59:33.000|2015-09-15 16:59:33.000|\r\n|{color:#de350b}200{color}|{color:#de350b}NULL{color}|{color:#de350b}NULL{color}|global|2015-09-15 16:59:33.000|2015-09-15 16:59:33.000|\r\n|{color:#de350b}300{color}|{color:#de350b}NULL{color}|{color:#de350b}NULL{color}|global|2015-09-15 16:59:33.000|2015-09-15 16:59:33.000|\r\n|{color:#de350b}400{color}|{color:#de350b}NULL{color}|{color:#de350b}NULL{color}|global|2015-09-15 16:59:33.000|2015-09-15 16:59:33.000|\r\n|{color:#de350b}500{color}|{color:#de350b}NULL{color}|{color:#de350b}NULL{color}|global|2015-09-15 16:59:33.000|2015-09-15 16:59:33.000|\r\n\r\nTo check if the instance already has this kind of data, execute the following SQL:\r\n{code:sql}\r\nSELECT NAME, OWNER, NAMESPACE, COUNT(*)\r\nFROM LABEL\r\nWHERE NAME IS NULL AND OWNER IS NULL \r\nGROUP BY NAME, OWNER, NAMESPACE\r\nHAVING COUNT(*) > 1;\r\n{code}\r\n\r\nWith this data, attempt upgrading the Confluence instance to listed affected versions.\r\n\r\nh3. Expected Results\r\nThe upgrade task should deal with duplicates in the {{label}} table by deleting/merging the relevant records.\r\nIt should then successfully add the {{IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE}} index to that table.\r\n\r\n\r\nh3. Actual Results\r\nWhile the upgrade task successfully deletes {{non-NULL}} duplicates, it leaves the {{NULL}} named, {{NULL}} owned rows untouched.\r\nSince those values remain undeleted, the subsequent attempt at adding the {{IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE}} index to that table fails with an {{ORA-01452}} error.\r\nGiven below is the log-sequence to upgrade failure (Oracle example, {{DEBUG}} logging enabled for {{com.atlassian.confluence.upgrade}} to show additional info):\r\n# (+) processing of duplicate labels begins and ends:\r\n{code:bash}\r\n2025-03-11 17:47:49,878 INFO [Catalina-utility-1] [confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask] doUpgrade LabelUniqueIndexUpgradeTask: starting upgrade task\r\n2025-03-11 17:47:49,878 INFO [Catalina-utility-1] [confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask] doUpgrade Starting cleaning up duplicated labels\r\n2025-03-11 17:47:49,927 INFO [Catalina-utility-1] [persistence.hibernate.schema.LabelUniqueIndexHelper] lambda$cleanUpDuplicatedLabels$0 Looking for duplicate label records.\r\n2025-03-11 17:47:49,949 INFO [Catalina-utility-1] [confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask] doUpgrade Finished cleaning up duplicated labels\r\n{code}\r\n\\\\\r\n\\\\\r\n# (+) addition of a new virtual column starts and finishes:\r\n{code:bash}\r\n2025-03-11 17:47:50,018 INFO [Catalina-utility-1] [persistence.hibernate.schema.LabelUniqueIndexHelper] getAddVirtualColumnCommand LABEL table OWNER column type is: NVARCHAR2(255), will create virtual column with the same type.\r\n2025-03-11 17:47:50,018 INFO [Catalina-utility-1] [confluence.upgrade.ddl.HibernateAlterTableExecutor] alterTable Executing grouped DDL commands on [LABEL]\r\n2025-03-11 17:47:50,019 INFO [Catalina-utility-1] [confluence.upgrade.ddl.HibernateDdlExecutor] executeDdlStatements Executing DDL: alter table LABEL add  (OWNER_NOT_NULL NVARCHAR2(255) GENERATED ALWAYS AS (COALESCE(OWNER, CAST('' AS NVARCHAR2(255)))) VIRTUAL)\r\n2025-03-11 17:47:50,031 INFO [Catalina-utility-1] [persistence.hibernate.schema.LabelUniqueIndexHelper] lambda$createVirtualColumnAndUniqueIndex$1 Finished adding of virtual column to LABEL table.\r\n{code}\r\n\\\\\r\n\\\\\r\n# (x) attempt to add a new database-index starts and then fails, also causing upgrade failure:\r\n{code:bash}\r\n2025-03-11 17:47:50,031 INFO [Catalina-utility-1] [persistence.hibernate.schema.LabelUniqueIndexHelper] lambda$createVirtualColumnAndUniqueIndex$1 Starting adding of unique index to LABEL table.\r\n2025-03-11 17:47:50,031 INFO [Catalina-utility-1] [confluence.upgrade.ddl.HibernateDdlExecutor] executeDdlStatements Executing DDL: create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)\r\n...\r\n...\r\n2025-03-11 17:47:50,064 WARN [Catalina-utility-1] [confluence.impl.hibernate.ConfluenceHibernateTransactionManager] doRollback Performing rollback. Transactions:\r\n    [com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask.doUpgrade]: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT (Session #135461760)\r\n2025-03-11 17:47:50,093 ERROR [Catalina-utility-1] [atlassian.confluence.plugin.PluginFrameworkContextListener] launchUpgrades Upgrade failed, application will not start: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@22938455 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [72000]; error code [1452]; ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n...\r\n...\r\ncom.atlassian.confluence.upgrade.UpgradeException: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@22938455 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [72000]; error code [1452]; ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n...\r\n...\r\n\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.executeUpgradeStep(AbstractUpgradeManager.java:302)\r\n\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.runSchemaUpgradeTasks(AbstractUpgradeManager.java:258)\r\n...\r\n...\r\nCaused by: org.springframework.jdbc.UncategorizedSQLException: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [72000]; error code [1452]; ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n...\r\n...\r\nCaused by: java.sql.SQLException: ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n...\r\n...\r\nCaused by: Error : 1452, Position : 71, Sql = create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE), OriginalSql = create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE), Error Msg = ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n...\r\n...\r\n2025-03-11 17:47:50,095 ERROR [Catalina-utility-1] [atlassian.confluence.plugin.PluginFrameworkContextListener] launchUpgrades 1 errors were encountered during upgrade:\r\n2025-03-11 17:47:50,096 ERROR [Catalina-utility-1] [atlassian.confluence.plugin.PluginFrameworkContextListener] launchUpgrades 1: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [72000]; error code [1452]; ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n{code}\r\n\r\n\r\nHere's a similar upgrade failure example for MSSQL:\r\n# (+) processing of duplicate labels begins and ends, addition of a new virtual column starts and finishes:\r\n{code:bash}\r\n2025-03-12 06:18:59,272 INFO [Catalina-utility-1] [confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask] doUpgrade LabelUniqueIndexUpgradeTask: starting upgrade task\r\n2025-03-12 06:18:59,272 INFO [Catalina-utility-1] [confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask] doUpgrade Starting cleaning up duplicated labels\r\n2025-03-12 06:18:59,335 INFO [Catalina-utility-1] [confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask] doUpgrade Finished cleaning up duplicated labels\r\n2025-03-12 06:18:59,335 INFO [Catalina-utility-1] [confluence.upgrade.ddl.HibernateAlterTableExecutor] alterTable Executing grouped DDL commands on [LABEL]\r\n2025-03-12 06:18:59,335 INFO [Catalina-utility-1] [confluence.upgrade.ddl.HibernateDdlExecutor] executeDdlStatements Executing DDL: alter table LABEL add  OWNER_NOT_NULL AS (COALESCE(OWNER, ''))\r\n{code}\r\n\\\\\r\n\\\\\r\n# (x) attempt to add a new database-index starts and then fails, also causing upgrade failure:\r\n{code:bash}\r\n2025-03-12 06:18:59,335 INFO [Catalina-utility-1] [confluence.upgrade.ddl.HibernateDdlExecutor] executeDdlStatements Executing DDL: create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)\r\n2025-03-12 06:18:59,367 WARN [Catalina-utility-1] [confluence.impl.hibernate.ConfluenceHibernateTransactionManager] doRollback Performing rollback. Transactions:\r\n    [com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask.doUpgrade]: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT (Session #1862293878)\r\n...\r\n...\t\r\n2025-03-12 06:18:59,382 ERROR [Catalina-utility-1] [atlassian.confluence.plugin.PluginFrameworkContextListener] launchUpgrades Upgrade failed, application will not start: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@314785e4 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [S0001]; error code [1505]; The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.LABEL' and the index name 'IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE'. The duplicate key value is (<NULL>, , global).\r\ncom.atlassian.confluence.upgrade.UpgradeException: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@314785e4 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [S0001]; error code [1505]; The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.LABEL' and the index name 'IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE'. The duplicate key value is (<NULL>, , global).\r\n\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.executeUpgradeStep(AbstractUpgradeManager.java:302)\r\n\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.runSchemaUpgradeTasks(AbstractUpgradeManager.java:258)\r\n...\r\n...\r\nCaused by: org.springframework.jdbc.UncategorizedSQLException: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [S0001]; error code [1505]; The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.LABEL' and the index name 'IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE'. The duplicate key value is (<NULL>, , global).\r\n...\r\n...\r\nCaused by: com.microsoft.sqlserver.jdbc.SQLServerException: The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.LABEL' and the index name 'IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE'. The duplicate key value is (<NULL>, , global).\r\n...\r\n...\r\n2025-03-12 06:18:59,382 ERROR [Catalina-utility-1] [atlassian.confluence.plugin.PluginFrameworkContextListener] launchUpgrades 1 errors were encountered during upgrade:\r\n2025-03-12 06:18:59,382 ERROR [Catalina-utility-1] [atlassian.confluence.plugin.PluginFrameworkContextListener] launchUpgrades 1: StatementCallback; uncategorized SQLException for SQL [create unique  index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [S0001]; error code [1505]; The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.LABEL' and the index name 'IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE'. The duplicate key value is (<NULL>, , global).\r\n{code}\r\n\r\n\\\\\r\nWhile the logs show that, the Confluence web-interface will show a \"Confluence had problems starting up\" johnson (startup error) screen with the following message:\r\n*Oracle*\r\n{quote}\r\nUpgrade failed. Please consult the system logs for details. You will need to fix these problems, restore your database and confluence home directory to the pre upgrade state. Then retry the upgrade. Upgrade error message: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@22938455 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [create unique index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [72000]; error code [1452]; ORA-01452: cannot CREATE UNIQUE INDEX; duplicate keys found\r\n{quote}\r\n*MSSQL*\r\n{quote}\r\nUpgrade failed. Please consult the system logs for details. You will need to fix these problems, restore your database and confluence home directory to the pre upgrade state. Then retry the upgrade. Upgrade error message: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@314785e4 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [create unique index IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE on LABEL (NAME, OWNER_NOT_NULL, NAMESPACE)]; SQL state [S0001]; error code [1505]; The CREATE UNIQUE INDEX statement terminated because a duplicate key was found for the object name 'dbo.LABEL' and the index name 'IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE'. The duplicate key value is (, , global).\r\n{quote}\r\n\r\n\r\nh3. Workaround\r\n{{NULL}} valued label-names and label-owners represent invalid/corrupted data, and they (along with their references) should be removed from the database.\r\n\r\nRollback the affected instance to the last stable pre-upgrade state/snapshot (i.e. Confluence Home, Shared Home and Install directories, as well as the DB).\r\nWith Confluence now restored to the previous version snapshot, stop Confluence (if running), ensure that suitable database backups have been taken, and then execute the following SQL:\r\n# To find all rows in the {{label}} table with {{NULL}} valued label-names and label-owners, execute the following SQL:\r\n{code:sql|title=Query 1 - get all duplicated NULL-data}\r\nSELECT * FROM LABEL WHERE NAME IS NULL AND OWNER IS NULL ;\r\n{code}\r\nNote the {{labelid}} values here.\r\n\\\\\r\n\\\\\r\n# Using those {{labelid}} values, first delete any references in the {{content_label}} and, then the {{notifications}} tables:\r\n{code:sql|title=Query 2 - to delete references from the content_label table}\r\nDELETE FROM CONTENT_LABEL WHERE LABELID IN (SELECT LABELID FROM LABEL WHERE NAME IS NULL AND OWNER IS NULL);\r\n{code}\r\n{code:sql|title=Query 3 - to delete references from the notifications table}\r\nDELETE FROM NOTIFICATIONS WHERE LABELID IN (SELECT LABELID FROM LABEL WHERE NAME IS NULL AND OWNER IS NULL);\r\n{code}\r\n\\\\\r\n\\\\\r\n# With the foreign/child references thus deleted, the {{NULL}} value duplicates in the {{label}} table can then be deleted safely:\r\n{code:sql|title=Query 4 - to delete duplicates in the label table}\r\nDELETE FROM LABEL WHERE LABELID IN (SELECT LABELID FROM LABEL WHERE NAME IS NULL AND OWNER IS NULL);\r\n{code}\r\n(i) *note*: all of the other {{non-NULL}} duplicate data will be addressed by the code in the upgrade task itself, manual-intervention is not necessary","createDate":"2025-03-13T02:46:31.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Copying and pasting table into external app such as Gmail/Outlook loses borders","key":"CONFSERVER-99415","url":"https://jira.atlassian.com/browse/CONFSERVER-99415","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCopying and pasting table into external app such as Gmail/Outlook loses borders\r\nh3. Steps to Reproduce\r\n # Create page\r\n # Add a table\r\n # Save page\r\n # In View page, highlight and copy the table\r\n # Paste table into Gmail\r\n\r\nh3. Expected Results\r\n\r\nTable should have borders\r\nh3. Actual Results\r\n\r\nTable is missing borders\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-12T03:15:53.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Custom CSSs are not applied for Globally or for Spaces using @import in the Stylesheet","key":"CONFSERVER-99402","url":"https://jira.atlassian.com/browse/CONFSERVER-99402","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFrom Confluence 9.1 onwards, custom CSS applied using *@import* is being ignored. This affects the CSS from an external URL and CSS attached to a Confluence page.\r\nh3. Steps to Reproduce\r\n\r\n1. Create a Confluence instance for any of the affected versions (>= 9.1).\r\n\r\n2. In the Global Stylsheet (General Config > Stylesheet) or space's Stylesheet (Space Tools > Look and Feel > Stylesheet), enter:\r\n{code:java}\r\n@import url(\"<any external .css>\");{code}\r\nor\r\n{code:java}\r\n@import url(\"<Confluence attachment URL containing CSS>\")\r\n{code}\r\n3. Load a page from this space\r\n\r\n4. In the developer tools, on the source tab, notice that the external .CSS is not mentioned\r\nh3. Expected Results\r\n\r\nThe CSS provided in the Stylesheet should be applied Globally or to the Space.\r\nh3. Actual Results\r\n\r\nThe CSS is ignored and not applied Globally or to the Space.\r\nh3. Workaround\r\n\r\nA workaround is possible if we manually change the {{custom-css.vm}} file to prioritize *$style* attributes:\r\n # Navigate to <install-folder>/confluence/styles\r\n # Move the \"Custom styles\" section in the file {{custom-css.vm}} so that it is above the \"### CUSTOM SITE LOGOS\", like this:\r\n{code:java}\r\n#disableAntiXss()\r\n\r\n## Custom styles for Confluence (included for all themes by default)\r\n$style\r\n## End custom styles for Confluence\r\n\r\n### CUSTOM SITE LOGOS \r\n.aui-header .aui-header-logo img {\r\n content: var(--confluence-custom-logo-content); \r\n} \r\n{code}\r\n # Save this change and restart Confluence\r\n\r\nPlease take note of this manual change to Confluence's install files. Until a fixed version is released, you will need to reapply this change every time you upgrade your Confluence instance.","createDate":"2025-03-07T13:11:29.000+0000","comments":[{"text":"I've been asked by Atlassian's Support to share the impact this bug has on us: we use {{@import}} in our global stylesheet because it consists of roughly 600 lines of instructions that change from time to time. As Confluence's stylesheet input area provides no versioning and there's next to no syntax highlighting, importing a text file that's attached to a Confluence page is a much better solution. The text file can be opened in Notepad++ via the Companion App, so we're benefitting from both Notepad++'s syntax highlighting and Confluence’s file versioning. This method also keeps space stylesheets neat and tidy, because if any special instructions are needed in a particular space in addition to the global instructions, then we only need to prepend them by a simple {{@import}} one-liner. Without the possibility to use {{{}@import{}}}, we would need to paste the global stylesheet to all those spaces manually every time the global stylesheet changes in any way. This would be very error-prone.","author":"Martin Richter"},{"text":"Another workaround that worked for us which does not involve make changes to install files is to add this to the \"HEAD\" section of in the Custom HTML section of settings:\r\n\r\n\r\n{code}\r\n<link rel=\"stylesheet\" type=\"text/css\" href=\"{URL}\">\r\n{code}\r\n","author":"Dalton Rick"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Task Report Macro not showing all tasks in Confluence when connected to MySQL database","key":"CONFSERVER-99388","url":"https://jira.atlassian.com/browse/CONFSERVER-99388","type":"Bug","priority":"","description":"h3. Issue Summary\r\nTask Report Macro not showing all tasks in Confluence when connected to MySQL database.\r\n\r\nTask Report Index is introduced in Confluence 8.7 which should index all task lists in Confluence to serve Task Report Macro.\r\nHowever, when Confluence is relying on Task Report Index in an instance connected to MySQL database, the Task Report Macro can be inaccurate when the total number of tasks in Confluence is more than 1000.\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Environment\r\n* Confluence 9.1.0\r\n* MySQL 8.2\r\n{code}\r\nmysql> select VERSION();\r\n+-----------+\r\n| VERSION() |\r\n+-----------+\r\n| 8.2.0     |\r\n+-----------+\r\n1 row in set (0.00 sec)\r\n{code}\r\n* Having more than 1000 task lists in {{*AO_BAF3AA_AOINLINE_TASK*}} table\r\n{code}\r\nmysql> select count(*) from AO_BAF3AA_AOINLINE_TASK;\r\n+----------+\r\n| count(*) |\r\n+----------+\r\n|   318019 |\r\n+----------+\r\n1 row in set (0.03 sec)\r\n{code}\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Install Confluence 9.1.0 and connect it with a supported MySQL version\r\n# Create more than 1000 Task Lists\r\n# Insert a Task Report Macro onto a page that is configured to show all tasks (which is more than 1000 that were created from the step above)\r\n\r\nh3. Expected Results\r\nTask Report Macro shows all tasks that satisfy the macro condition\r\n\r\nh3. Actual Results\r\nNot all tasks that satisfy the macro condition is shown.\r\n\r\n\r\nh3. Diagnostic\r\nThis is because a bug in the SQL query Confluence sends to MySQL fails to retrieve tasks after the _first iteration_ when building Task Report Index. The steps below can help to verify the issue:\r\n# Go to *General Configuration* > *Logging and Profiling*\r\n#* Search for {{*com.atlassian.confluence.plugins.tasklist.report.searchindex*}} and set it to *TRACE* level\r\n#* Scroll to the bottom and click *Save*\r\n# Go to *General Configuration* > *Content Indexing*\r\n#* Click *Rebuild* for *Site reindex* option, which will also trigger a rebuild for Task Report Index\r\n(!) Please note that rebuilding site index may take a long time depends on the size of Confluence. Only perform this in a non-production environment as diagnostic step\r\n# Pay attention to the {{atlassian-confluence.log}} with the logging below:\r\n{noformat}\r\n2025-03-06 14:46:50,737 DEBUG [Caesium-1-1] [report.searchindex.indexmanagement.FullReIndexer] removeAllDocuments All documents in the search index have been removed.\r\n2025-03-06 14:46:50,738 TRACE [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] indexNextBatchOfInlineTasks Starting iteration 0 of indexing tasks\r\n2025-03-06 14:46:50,752 TRACE [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] indexNextBatchOfInlineTasks 1000 tasks retrieved from the DB on iteration 0. Indexing them.\r\n2025-03-06 14:46:50,752 TRACE [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] indexNextBatchOfInlineTasks Found 6 unique content ids for 1000 inline tasks on iteration 0\r\n2025-03-06 14:46:50,752 DEBUG [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] getAddSearchDocumentAction Creating a document for content id 163915 and task AO_BAF3AA_AOINLINE_TASK {GLOBAL_ID = 1}\r\n2025-03-06 14:46:50,793 DEBUG [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] getAddSearchDocumentAction Creating a document for content id 1507329 and task AO_BAF3AA_AOINLINE_TASK {GLOBAL_ID = 24}\r\n...\r\n2025-03-06 14:46:51,023 TRACE [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] indexNextBatchOfInlineTasks Finished iteration 0 containing 1000 inline tasks Last processed global task id: 1004. Duration: 00:00:00.271\r\n2025-03-06 14:46:51,024 TRACE [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] indexNextBatchOfInlineTasks Starting iteration 1 of indexing tasks\r\n2025-03-06 14:46:51,025 DEBUG [pool-17-thread-2] [report.searchindex.indexmanagement.FullReIndexer] indexNextBatchOfInlineTasks No more tasks were found on iteration 1\r\n2025-03-06 14:46:51,025 INFO [Caesium-1-1] [report.searchindex.indexmanagement.FullReIndexer] reindexAllTasks Full inline tasks reindexing (for Task Report macro) has been finished. Processed 1000 inline tasks. Duration: 00:00:00.304. In average, 1000 inline tasks were processed in 304 ms.\r\n2025-03-06 14:46:51,025 DEBUG [Caesium-1-1] [report.searchindex.indexmanagement.TaskReportIndexPersistedStateService] markAsReady Task report index is going to be marked as ready. All task report macros will use search index to retrieve tasks.\r\n2025-03-06 14:46:51,025 INFO [Caesium-1-1] [report.searchindex.indexmanagement.TaskReportIndexPersistedStateService] markAsReady Task report index was marked as ready. All task report macros will use search index to retrieve tasks (they will be rendered very fast).\r\n2025-03-06 14:46:51,026 TRACE [Caesium-1-1] [searchindex.indexmanagement.indexqueue.IndexQueueProcessorImpl] flushQueue Inline task index job flushed 0 tasks. Duration: 00:00:00.311\r\n{noformat}\r\n(!) Notice that Confluence would only index the _first iteration_ where the default batch size is set to {{1000}}, and incorrectly report \"_No more tasks were found_\" on the next iteration despite there are more tasks in the database.\r\n\r\nh3. Workaround\r\nAs a workaround, customer can include a {{*Dark Feature*}} to force Confluence to always retrieve the Task Lists from the database instead of relying on the incorrect Task Report Index:\r\n# Go to the URL below with an admin account:\r\n#* <BaseURL>/admin/darkfeatures.action\r\n# Scroll down to the *Site Dark Features* and enter the following feature in the empty field:\r\n{code}\r\nconfluence.task-report.use-database-for-reports\r\n{code}\r\n#* Click *Submit* \r\n\r\n(!) Once this issue is fixed in the future release, please manually remove the Dark Feature flag above to restore the usage of Task Report Index","createDate":"2025-03-06T03:56:47.000+0000","comments":[{"text":"This bug freaks all the users out since they lost all the Tasks after our Confluence 9.2.x upgrade. We cannot revert to the 8.9.x version due to security vulnerability and need to stay on 9.2.x.\r\n\r\nFortunately, the workaround worked for us, but I hope you guys release this fixed version in the next 9.2.x release.","author":"JWCho"}]},{"summary":"With Collaborative Editing turned off, editing or copying a Confluence page with an attachment triggers the execution of inefficient SQL against the bodycontent table resulting in suboptimal performance.","key":"CONFSERVER-99359","url":"https://jira.atlassian.com/browse/CONFSERVER-99359","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn Confluence instances where _Collaborative Editing_ is turned off, editing or copying a Confluence page with an attachment triggers the execution of the following SQL via content-reconciliation threads:\r\n{code:sql|title=SQL seen executing against the bodycontent table if Confluence SQL logging is enabled, excerpt from atlassian-confluence-sql.log, formatted for easy reading}\r\nYYYY-MM-DD HH:mm:SS,mmm DEBUG [reconciliation-executor:thread-6] [org.hibernate.SQL] logStatement \r\nselect \r\n\tbodyconten0_.BODYCONTENTID as bodycont1_13_, \r\n\tbodyconten0_.BODY as body2_13_, \r\n\tbodyconten0_.CONTENTID as contenti3_13_, \r\n\tbodyconten0_.BODYTYPEID as bodytype4_13_ \r\nfrom \r\n\tBODYCONTENT bodyconten0_ \r\nwhere \r\n\tcast(contentId as varchar(255)) in (?)\r\n\t-- comment: the \"in\" clause above will have one or more contentId values\r\n{code}\r\nIn the SQL shown above, the \"{{cast(contentId as varchar(255))}}\" part in the {{where}} clause converts numeric Content IDs into {{varchar}} strings.\r\nThis in turn ignores the already existing {{body_content_idx}} database-index defined on the {{bodycontent}} table's {{contentid}} column, since that database-index operates on a column having numeric values.\r\nDue to this absence of a suitable database-index for matching {{varchar}} casted numbers/contentIDs, a full scan of the {{bodycontent}} table becomes necessary, which can take time (multiple minutes) on large enough datasets.\r\n\r\nFor comparison, the following SQL statement will be magnitudes faster (milliseconds level of execution time) since the existing {{body_content_idx}} database-index aids in findings the relevant row(s) faster:\r\n{code:sql}\r\nselect \r\n\tbodyconten0_.BODYCONTENTID as bodycont1_13_, \r\n\tbodyconten0_.BODY as body2_13_, \r\n\tbodyconten0_.CONTENTID as contenti3_13_, \r\n\tbodyconten0_.BODYTYPEID as bodytype4_13_ \r\nfrom \r\n\tBODYCONTENT bodyconten0_ \r\nwhere \r\n\tcontentId in (?)\r\n\t-- comment: the \"in\" clause above will have one or more contentId values\r\n{code}\r\nh3. Steps to Reproduce\r\nOn a Confluence 9.2.x or 9.1.x instance:\r\n # navigate to *_Administration_* > *_General Configuration_* > {*}_Collaborative editing_{*}, under {*}_Editing mode_{*}, click *_Change mode_* and set it to *_Off_*\r\n # (optional) to see the actual SQL causing suboptimal performance, either:\r\n ** [enable SQL logging on Confluence|https://confluence.atlassian.com/conf85/enabling-detailed-sql-logging-1283361534.html]\r\n(recommended only for brief intervals, use only during troubleshooting/investigation and turn off after the relevant data has been gathered), _OR_\r\n ** obtain the slow-query logs/data from the database-server side (location/format varies based on the database vendor, please engage a Database Admin for this)\r\n # create a new Confluence page, drag and drop an attachment on that page in the editor, save the page\r\n ** this action should result in a {{reconciliation-executor}} thread (within Confluence) triggering the problematic SQL (example shown in the _Issue Summary_ section)\r\n # (optional) the same reconciliation logic kicks in if this page is copied (with its attachment) to a different location in the page-hierarchy or another space on the instance\r\n\r\nh3. Expected Results\r\nReconciliation threads should execute performant/optimized queries that use existing database-indexes for fast data retrieval.\r\n\r\nh3. Actual Results\r\nReconciliation threads end up casting numeric content IDs as {{varchar}} strings in the relevant SQL statements, which ignores the existing {{body_content_idx}} database-index defined on the {{bodycontent}} table's {{contentid}} column, resulting in significantly longer SQL execution times.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behaviour. A workaround will be added here when available.\r\n\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_9.2.1_|_Yes_|\r\n|Most Recent Bug-Fix Release| | |\r\n|Previous Major Release|_9.1.0_ |_Yes_ |\r\n|Most Recent LTS| | |\r\n|Previous Supported LTS| | |\r\n|_Other Versions.._|_9.2.0_ | _Yes_|\r\n|_(Add rows as needed)_| | |","createDate":"2025-03-05T06:16:31.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3 [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Confluence is throwing error about CSSErrorListener in the logs while a user is being mentioned on a page comment","key":"CONFSERVER-99350","url":"https://jira.atlassian.com/browse/CONFSERVER-99350","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThis ticket is created from CONFSERVER-93635 as a continuation as it shares similar behavior that still impacts Confluence after it is closed as fixed.\r\n\r\nConfluence is throwing errors about \"CSSErrorListener\" while a user is being *@ mentioned* on a page comment.\r\n\r\nDespite the error message, the notification will still manage to reach the recipient. However, since the error is thrown every time \"NotificationSender\" picks up a page, Confluence logs will get filled up with similar error messages quickly and create unnecessary noise.\r\n\r\n(i) This issue is not replicable on version 8.5.X\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Set up Confluence 8.6.1\r\n # Set up an SMTP mail server\r\n # @ mention a user on a Page Comment that would trigger an email notification\r\n ** The page can even be a blank page, or simply a page with 1 line of text.\r\n\r\nh3. Expected Results\r\nConfluence will not return any error about the user mention.\r\n\r\nh3. Actual Results\r\nConfluence returns errors about \"CSSErrorListener\" on the user mention action that would trigger an email notification.\r\n\r\nThe below exception is thrown in the {{atlassian-confluence.log}} file:\r\n{noformat}\r\n2025-03-04 10:20:07,806 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAttemptingFullContext CSSErrorListener full context | \r\n -- url: /rest/tinymce/1/content/163926/comment | userName: admin | referer: http://localhost:8090/spaces/PROJ/pages/163926/Test+Page+One | traceId: ab3c9fe07d56f2cf\r\n2025-03-04 10:20:07,807 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAmbiguity CSSErrorListener ambiguity | \r\n -- url: /rest/tinymce/1/content/163926/comment | userName: admin | referer: http://localhost:8090/spaces/PROJ/pages/163926/Test+Page+One | traceId: ab3c9fe07d56f2cf\r\n2025-03-04 10:20:07,811 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAttemptingFullContext CSSErrorListener full context | \r\n -- url: /rest/tinymce/1/content/163926/comment | userName: admin | referer: http://localhost:8090/spaces/PROJ/pages/163926/Test+Page+One | traceId: ab3c9fe07d56f2cf\r\n2025-03-04 10:20:07,814 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAmbiguity CSSErrorListener ambiguity | \r\n -- url: /rest/tinymce/1/content/163926/comment | userName: admin | referer: http://localhost:8090/spaces/PROJ/pages/163926/Test+Page+One | traceId: ab3c9fe07d56f2cf\r\n{noformat}\r\n\r\nh3. Workaround\r\nTo suppress the error messages:\r\n+Via \"Logging and Profiling\"+\r\n # Go to \"Logging and Profiling\" in the admin menu\r\n # Add \"cz.vutbr.web\" to the list via the text box under \"Add New Entry\"\r\n # Set logging level to \"FATAL\"\r\n # Click on \"Add Entry\"\r\n # Click \"Save\" (bottom of the \"Logging and Profiling\" page)\r\n # Refer [Configuring Logging|https://confluence.atlassian.com/doc/configuring-logging-181535215.html] documentation for more details regarding logging configuration in Confluence\r\n\r\n+Via \"log4j.properties\" file+\r\n # Open up the {{/confluence/WEB-INF/classes/log4j.properties}} file\r\n # Add the following line to the file:\r\n{code:java}\r\nlog4j.logger.cz.vutbr.web=FATAL \r\n{code}\r\n # Save the file\r\n # Apply the same changes to the rest of the nodes\r\n # Perform a rolling Confluence restart","createDate":"2025-03-04T05:09:35.000+0000","comments":[]},{"summary":"Generating Support Zip with Confluence customisations options enabled fails.","key":"CONFSERVER-99217","url":"https://jira.atlassian.com/browse/CONFSERVER-99217","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Atlassian Troubleshooting and Support Tools plugin fails to generate the support zip including the customizations when there are customizations in Confluence\r\nh3. Steps to Reproduce\r\n # Install a Confluence instance with version 9.2.1\r\n # Check the ATST plugin version (if it is v2.3.0, please upgrade it to one of the versions 2.4.0, 2.5.1, and 2.6.0)\r\n # Modify the Global layout \r\n # Create the support zip with the customization option enabled\r\n\r\nThe issue is reproducible in Confluence v9.2.1 with ATST versions below:\r\n * 2.4.0\r\n * 2.5.1\r\n * 2.6.0\r\n\r\nh3. Expected Results\r\n\r\nThe support zip should be generated without issue and confluence-customisations folder should exist \r\nh3. Actual Results\r\n\r\nThe confluence-customisation folder is missing in the support zip\r\n\r\nThe below exception is thrown in the application logs:\r\n{noformat}\r\nWARN [support-zip] [troubleshooting.stp.zip.ZipFileAppender] getInnerItems Problem processing 'Confluence customisations': RuntimeException: java.io.FileNotFoundException: /opt/atlassian/confluence/temp/9488269423177458124/Global customised layout - decorators/global.vmd (No such file or directory)\r\n -- url: /confluence/rest/troubleshooting/latest/support-zip/cluster | userName: admin | referer: https://xxxxxxxx/confluence/plugins/servlet/troubleshooting/view/ | traceId: 1e786556832ecbad\r\njava.lang.RuntimeException: java.io.FileNotFoundException: /opt/atlassian/confluence/temp/9488269423177458124/Global customised layout - decorators/global.vmd (No such file or directory) {noformat}\r\nh3. Workaround\r\n\r\nDowngrade the ATST plugin to v2.3.0","createDate":"2025-02-14T09:06:09.000+0000","comments":[{"text":"Thank you for working on this, and for finding a workaround.\r\nUnfortunately, after downgrading ATST plugin to v2.3.0, filenames in the support zip file (subdir: {{{}confluence-customisations/layouts/{}}}) are unrecognizable.\r\n\r\nI usually get filenames like this:\r\n * customLayouts.txt\r\n * Global customised layout - decorators-global.vmd\r\n * Space XYZ customised layout - decorators-global.vmd\r\n * ...\r\n\r\nWith ATST 2.3.0 instead I get this list of files:\r\n * comments.vmd\r\n * comments.vmd0\r\n * comments.vmd1\r\n * comments.vmd2\r\n * customLayouts.txt\r\n * global.vmd\r\n * global.vmd0\r\n * global.vmd1\r\n * global.vmd2\r\n * global.vmd3\r\n * main.vmd\r\n * main.vmd0\r\n * main.vmd1\r\n * main.vmd2\r\n * page.vmd\r\n * page.vmd0\r\n * page.vmd1\r\n\r\nMaybe this is caused by a difference I can see in the list of files stored in {{{}customLayouts.txt{}}}:\r\n * _usually there is:_ Global customised layout - decorators{*}-{*}global.vmd\r\n * _with ATST 9.3.0:_ Global customised layout - decorators{*}/{*}global.vmd\r\n\r\nWrong filenames make the workaround rather uncomfortable.","author":"Fabrizio Catalucci"},{"text":"After applying the workaround (downgrading to ATST 2.3.0) I don't see \"Troubleshooting and Support Tools\" in the Confluence admin menu.","author":"Fabrizio Catalucci"},{"text":"Hello, this issue was fixed in the newest version of the ATST (2.7.0) and will be available in the next release of Confluence 9.2. However, it's also available on the Marketplace, so you can update the plugin through it.","author":"Kamil Kowalewski"},{"text":"I tested the ATST 2.7.0 installed from the marketplace: it's working correctly.\r\nThanks for the fix.\r\n\r\nJust a tiny additional report: I noticed that, in file \"confluence-customizations/customStylesheet.txt\", all the _sections_ are headed by a string like this:\r\n{quote}Global Space XXXX custom stylesheet\r\n{quote}\r\nThe word \"Global\" is unexpected. It should only appear on the \"Global Custom Stylesheet\" item.\r\nIs this another (minor) bug?","author":"Fabrizio Catalucci"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Confluence logs a \"org.apache.logging.slf4j.SLF4JServiceProvider not found\" warning during startup","key":"CONFSERVER-99198","url":"https://jira.atlassian.com/browse/CONFSERVER-99198","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen starting up an unmodified Confluence instance,  the following message can be seen in the Catalina log:\r\n{code:java}\r\n... \r\nSLF4J(E): A service provider failed to instantiate:\r\norg.slf4j.spi.SLF4JServiceProvider: Provider org.apache.logging.slf4j.SLF4JServiceProvider not found\r\nSLF4J(W): No SLF4J providers were found.\r\nSLF4J(W): Defaulting to no-operation (NOP) logger implementation\r\nSLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.... {code}\r\n \r\n\r\nThis is similar to the [JSDSERVER-16004|https://jira.atlassian.com/browse/JSDSERVER-16004] bug for Jira Service Management.\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Start a Confluence 9.x instance\r\n # Check <install_path>/logs/catalina.out\r\n\r\nh3. Expected Results\r\n\r\nNo warnings generated.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the catalina.out file:\r\n{noformat}\r\nSLF4J(E): A service provider failed to instantiate:\r\norg.slf4j.spi.SLF4JServiceProvider: Provider org.apache.logging.slf4j.SLF4JServiceProvider not found\r\nSLF4J(W): No SLF4J providers were found.\r\nSLF4J(W): Defaulting to no-operation (NOP) logger implementation\r\nSLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details. {noformat}\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-13T00:58:00.000+0000","comments":[]},{"summary":"Changing the Event Color in Team Calendars won't affect the Event Icon if using Dark or Light Themes.","key":"CONFSERVER-99196","url":"https://jira.atlassian.com/browse/CONFSERVER-99196","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: Yes\r\n\r\nWhen using Dark or Light Themes and changing the Event Color in Team Calendars, the Event Icon does not change color as it should. The Event color-code used to help identify events in the calendar. \r\nh3. Steps to Reproduce\r\n # Set to use Dark or Light Theme\r\n # Create a new Calendar\r\n # Add an Event to the Calendar\r\n # Change the Event color in the three-doted menu next to the Event icon\r\n\r\nh3. Expected Results\r\n\r\nThe event background in the calendar and the event icon in the event list side panel change color.\r\n\r\n!Screenshot 2025-02-12 at 17.18.26.png|width=275,height=140!\r\nh3. Actual Results\r\n\r\nThe event background in the calendar changes color and the event icon in the event list side panel remains unchanged.\r\n\r\n!Screenshot 2025-02-12 at 17.18.58.png|width=280,height=139!!Screenshot 2025-02-12 at 17.19.20.png|width=312,height=140!\r\nh3. Workaround\r\n\r\nYou can use the 'theme.switcher.disable' dark feature to disable the Theme switcher and force Confluence to the Original Theme. However, the Original Theme is deprecated and this change will result in another bug: [https://jira.atlassian.com/browse/CONFSERVER-99182] ","createDate":"2025-02-12T20:25:24.000+0000","comments":[{"text":"This affects version 9.2.2 as well.\r\n\r\nIt makes team calendars pratically useless in some cases, since color codes cannot be matched to the legend. Hoping for a quick fix","author":"Ludwig Wirth"}]},{"summary":"9.2 LTS Backport - Confluence upgrade fails on Oracle db that using VARCHAR2 when executing label upgrade task ","key":"CONFSERVER-99185","url":"https://jira.atlassian.com/browse/CONFSERVER-99185","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence upgrade fails on Oracle db that using VARCHAR2 when executing label upgrade task with error message:\r\n{code:java}\r\ncharacter set mismatch` {code}\r\nor below error if the type is of different length compared to 255\r\n{code:java}\r\nvalue too large for column \"OWNER_NOT_NULL\" (actual: 1020, maximum: 510) {code}\r\n \r\nh3. Steps to Reproduce\r\n # Create a confluence instance with version (< 9.1) and Oracle db\r\n # Set `Label` table `OWNER` column and all its foreign key columns with type `\r\nVARCHAR2(255)`\r\n # Upgrade confluence to version (>= 9.1) which means to trigger the \r\nLabelUniqueIndexUpgradeTask\r\n\r\nh3. Expected Results\r\n\r\nUpgrade should success without any issue\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\ncom.atlassian.confluence.upgrade.UpgradeException: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@2d609342 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [alter table LABEL add  (OWNER_NOT_NULL NVARCHAR2(255) GENERATED ALWAYS AS (COALESCE(OWNER, CAST('' AS NVARCHAR2(255)))) VIRTUAL)]; SQL state [72000]; error code [12704]; ORA-12704: character set mismatch\r\n\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.executeUpgradeStep(AbstractUpgradeManager.java:302)\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.runSchemaUpgradeTasks(AbstractUpgradeManager.java:258)\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.runAllUpgradeTasks(AbstractUpgradeManager.java:177)\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.upgrade(AbstractUpgradeManager.java:140)\tat com.atlassian.confluence.plugin.PluginFrameworkContextListener.launchUpgrades(PluginFrameworkContextListener.java:127)\tat com.atlassian.confluence.plugin.PluginFrameworkContextListener.contextInitialized(PluginFrameworkContextListener.java:83)\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4003)\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4446)\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:599)\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:571)\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:603)\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1751)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:264)\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:453)\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:407)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:264)\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\tat java.base/java.lang.Thread.run(Thread.java:840)Caused by: org.springframework.jdbc.UncategorizedSQLException: StatementCallback; uncategorized SQLException for SQL [alter table LABEL add  (OWNER_NOT_NULL NVARCHAR2(255) GENERATED ALWAYS AS (COALESCE(OWNER, CAST('' AS NVARCHAR2(255)))) VIRTUAL)]; SQL state [72000]; error code [12704]; ORA-12704: character set mismatch\r\n\tat org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1549)\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:408)\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:444)\tat com.atlassian.confluence.upgrade.ddl.HibernateDdlExecutor.executeDdlStatements(HibernateDdlExecutor.java:92)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355) {noformat}\r\nh3. Workaround\r\n\r\nAs described in CONFSERVER-54048, confluence is using NVARCHAR2 instead of VARCHAR2 as default char set since 5.9. So one possible way is to update all columns that still using `VARCHAR2` to `NVARCHAR2`\r\n\r\nIt is recommended to contact support to evaluate this approach before doing any column type changes. So you do backup and also understand the effort it will cost based on your db size as it may take very long time to execute.\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_9.2.0_|_Yes_|\r\n|Most Recent Bug-Fix Release|9.1.0|Yes|\r\n|Previous Major Release| | |\r\n|Most Recent LTS|9.2.0|Yes|\r\n|Previous Supported LTS|8.5|No|\r\n|_Other Versions.._| | |\r\n|_(Add rows as needed)_| | |\r\n\r\nh3. (!) IMPORTANT\r\n*Confluence 9.2.2 includes a partial fix for this issue. For the complete resolution, please refer to*:\r\nhttps://jira.atlassian.com/browse/CONFSERVER-99168","createDate":"2025-02-12T05:15:39.000+0000","comments":[{"text":"Hi [~5339cdd01cf4] : Could you please let me know when we could expect a fix release?","author":"salini_s"},{"text":"Hi [~f6b8f23da667] ,\r\n\r\nthis backport fix is targeting the next 9.2 LTS bug fix release, which is planned around early Mar 2025","author":"Jeffery Xie"},{"text":"[~5339cdd01cf4] : Oh Great!! Thank you for the update.","author":"salini_s"},{"text":"Hi [~5339cdd01cf4]  Eagerly waiting for 9.2.2 release, as we planned for 9.2.0 in the month of Feb 2025 but ended up having the character set mismatch issue. Hope its fixed in the upcoming 9.2.2 :)any exact date in the month of March? ","author":"Rajeshwari Ekambaram"},{"text":"A fix for this issue is available in Confluence Data Center 9.2.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"The final fix will be included 9.2.3 (will be released very soon), as we have seen some extra edge cases of Oracle db not covered in 9.2.2. ","author":"Jeffery Xie"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"},{"text":"Hi [~5339cdd01cf4] : Since we already upgraded our testing environment to 9.2.2. Can we do a normal upgrade from 9.2.2 to 9.2.3. I mean we dont need to rollback right.?","author":"salini_s"},{"text":"Regarding this issue, can you please confirm if we can upgrade from 7.19.30 directly to 9.2.3 or should I make an intermediate upgrade to 8.5.x ?\r\n\r\n \r\n\r\nTx","author":"Michael Regelin"},{"text":"Hi [~f6b8f23da667] ,\r\n\r\nIf you have already successfully upgraded to 9.2.2, it means the label unique index upgrade task executed successfully on your instance. (You can check database `LABEL` table and verify if index `IDX_UNIQUE_LABEL_NAME_OWNER_NOT_NULL_NAMESPACE` is created). And you *CAN* do a normal upgrade from 9.2.2 to 9.2.3. Thanks.","author":"Jeffery Xie"},{"text":"Hi [~addafc83baca] ,\r\n\r\nThis issue does not affect the way of your upgrade. You can always plan the upgrade on your dev env first to ensure it works. While before you upgrade, be aware of the [major changes of difference version|https://confluence.atlassian.com/conf92/confluence-upgrade-matrix-1477577572.html] and the [supported platforms|https://confluence.atlassian.com/conf92/supported-platforms-1477577494.html] and use the upgrade plan tool to evaluate the requirements. \r\n\r\nPlease dont hesitate to reach out to the support team if you have any issue during upgrade.","author":"Jeffery Xie"}]},{"summary":"Confluence upgrade fails on Oracle db that using VARCHAR2 when executing label upgrade task ","key":"CONFSERVER-99168","url":"https://jira.atlassian.com/browse/CONFSERVER-99168","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence upgrade fails on Oracle db that using VARCHAR2 when executing label upgrade task with error message:\r\n{code:java}\r\ncharacter set mismatch` {code}\r\nor below error if the type is of different length compared to 255\r\n{code:java}\r\nvalue too large for column \"OWNER_NOT_NULL\" (actual: 1020, maximum: 510) {code}\r\n \r\nh3. Steps to Reproduce\r\n # Create a confluence instance with version (< 9.1) and Oracle db\r\n # Set `Label` table `OWNER` column and all its foreign key columns with type `\r\nVARCHAR2(255)`\r\n # Upgrade confluence to version (>= 9.1) which means to trigger the \r\nLabelUniqueIndexUpgradeTask\r\n\r\nh3. Expected Results\r\n\r\nUpgrade should success without any issue\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\ncom.atlassian.confluence.upgrade.UpgradeException: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@2d609342 failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [alter table LABEL add  (OWNER_NOT_NULL NVARCHAR2(255) GENERATED ALWAYS AS (COALESCE(OWNER, CAST('' AS NVARCHAR2(255)))) VIRTUAL)]; SQL state [72000]; error code [12704]; ORA-12704: character set mismatch\r\n\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.executeUpgradeStep(AbstractUpgradeManager.java:302)\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.runSchemaUpgradeTasks(AbstractUpgradeManager.java:258)\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.runAllUpgradeTasks(AbstractUpgradeManager.java:177)\tat com.atlassian.confluence.upgrade.AbstractUpgradeManager.upgrade(AbstractUpgradeManager.java:140)\tat com.atlassian.confluence.plugin.PluginFrameworkContextListener.launchUpgrades(PluginFrameworkContextListener.java:127)\tat com.atlassian.confluence.plugin.PluginFrameworkContextListener.contextInitialized(PluginFrameworkContextListener.java:83)\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4003)\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4446)\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:599)\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:571)\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:603)\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1751)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:264)\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:453)\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:407)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:264)\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\tat java.base/java.lang.Thread.run(Thread.java:840)Caused by: org.springframework.jdbc.UncategorizedSQLException: StatementCallback; uncategorized SQLException for SQL [alter table LABEL add  (OWNER_NOT_NULL NVARCHAR2(255) GENERATED ALWAYS AS (COALESCE(OWNER, CAST('' AS NVARCHAR2(255)))) VIRTUAL)]; SQL state [72000]; error code [12704]; ORA-12704: character set mismatch\r\n\tat org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1549)\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:408)\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:444)\tat com.atlassian.confluence.upgrade.ddl.HibernateDdlExecutor.executeDdlStatements(HibernateDdlExecutor.java:92)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355) {noformat}\r\nh3. Workaround\r\n\r\nAs described in CONFSERVER-54048, confluence is using NVARCHAR2 instead of VARCHAR2 as default char set since 5.9. So one possible way is to update all columns that still using `VARCHAR2` to `NVARCHAR2`\r\n\r\nIt is recommended to contact support to evaluate this approach before doing any column type changes. So you do backup and also understand the effort it will cost based on your db size as it may take very long time to execute.\r\nh3. Versions Tested\r\n\r\nPlease confirm all versions that have been tested for this issue, and indicate whether the tested version is affected or not affected, below: \r\n||Testing Requirements||Version||Affected Version||\r\n|Customers Reported Version|_9.2.0_|_Yes_|\r\n|Most Recent Bug-Fix Release|9.1.0|Yes|\r\n|Previous Major Release| | |\r\n|Most Recent LTS|9.2.0|Yes|\r\n|Previous Supported LTS|8.5|No|\r\n|_Other Versions.._| | |\r\n|_(Add rows as needed)_| | |","createDate":"2025-02-07T04:28:37.000+0000","comments":[{"text":"Can confirm I am seeing this when attempting to upgrade from 8.5.18 -> 9.2.1.","author":"John"},{"text":"We see also this Problem.","author":"Claus köll"},{"text":"Can confirm that Conflunce Version 9.2.2 still have this bug. We just tried to upgrade today.\r\n{code:java}\r\nvalue too large for column \"OWNER_NOT_NULL\" (actual: 1020, maximum: 510)  {code}","author":"Tobias Meyer"},{"text":"Hi [~7000e1b0c01a] ,\r\n\r\nSorry to hear that this issue have in your upgrade. Can you please let us know which database are you using? Oracle or other dbs?\r\n\r\n ","author":"Jeffery Xie"},{"text":"We are using Oracle (Oracle Database 19c EE Extreme Perf Release 19.0.0.0.0 - Production Version 19.24.0.0.0)\r\n\r\nThe error occurs here: \r\n{code:java}\r\nUpgrade failed, application will not start: Upgrade task com.atlassian.confluence.upgrade.upgradetask.LabelUniqueIndexUpgradeTask@3e07bd6c failed during the SCHEMA_UPGRADE phase due to: StatementCallback; uncategorized SQLException for SQL [alter table LABEL add  (OWNER_NOT_NULL VARCHAR2(255) GENERATED ALWAYS AS (COALESCE(OWNER, CAST('' AS VARCHAR2(255)))) VIRTUAL)]; SQL state [72000]; error code [12899]; ORA-12899: value too large for column \\\"OWNER_NOT_NULL\\\" (actual: 1020, maximum: 255) {code}\r\nWhich is a bit strange because we have maximal 32 characters in the OWNER column in the LABEL table since OWNER is the user_key. ","author":"Tobias Meyer"},{"text":"Hi [~7000e1b0c01a] ,\r\n\r\nThanks for the information. It does looks strange. As from the logs, it can be confirmed that it try to create the new column with `VARCHAR2(255)` which should be same column type as `OWNER` column. I guess if there is any corrupted data in your `OWNER` column, so issue happens when copy the value to `OWNER_NOT_NULL`.\r\n\r\nCan I kindly ask you to raise a support ticket, so they can help you analysis the root cause of the problem. Thanks.","author":"Jeffery Xie"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Personal spaces fail to load/create for external users with spaces in usernames","key":"CONFSERVER-99167","url":"https://jira.atlassian.com/browse/CONFSERVER-99167","type":"Bug","priority":"","description":"h3. Problem\r\nIn Confluence 8.5.x, personal spaces for users with spaces in their usernames (e.g., ~test 4) worked correctly. However, after upgrading to Confluence 9.1 and onwards, personal spaces for these users fail to load.\r\n\r\nAlthough *Confluence does not allow creating usernames with spaces* manually, it does not block usernames with spaces when they are synced from LDAP or Active Directory. In 9.1 onward versions, these users can still log in, but their personal spaces can't be accessed or created.\r\n !Screenshot 2025-03-05 at 9.09.53 AM.png|thumbnail! \r\n\r\n\r\nh3. Environment\r\nConfluence DC 9.1 and onward\r\n\r\nh3. Steps to Reproduce\r\n# Deploy a vanilla Confluence 9.2 instance.\r\n# Create a new user in the instance with a blank space in its name (this user needs to be either synced from an external directory or created via JIT).\r\n# Log in to the instance with the new user.\r\n# Try to create a personal space for this user.\r\n\r\nh3. Expected Results\r\nThe personal space should load/create successfully for external users with spaces in their usernames, just like in Confluence 8.5.x.\r\n\r\nh3. Actual Results\r\nThe personal space does not load/create, and users receive an error.\r\n!Screenshot 2025-02-07 at 2.12.08 PM.png|thumbnail! \r\n\r\nh3. Workaround\r\nN/A\r\n\r\nh3. Notes\r\n","createDate":"2025-02-07T04:22:25.000+0000","comments":[{"text":"FYI:\r\n\r\nEven if username and spacekey are updated without spaces, the lucene index does not pick up the new location.\r\n\r\nIt might with a reboot, though.","author":"certbe-cert"},{"text":"Workaround\r\n # rename user without spaces (for future personal spaces)\r\n # rename _SpaceKey_ and _LowerSpaceKey_  in database and remove spaces, use identical lowercase for both\r\n # Content indexing > Site reindex\r\n # *Cache Statistics > Flush All*\r\n\r\n ","author":"certbe-cert"},{"text":"[~c59dcb339913] \r\n{noformat}\r\n2. rename SpaceKey and LowerSpaceKey  in database and remove spaces, use identical lowercase for both{noformat}\r\nRead \r\n{noformat}\r\nrename SpaceKey and LowerSpaceKey  in database and remove spaces characters, use identical lowercase for both{noformat}","author":"Vincent (BleuLemon)"}]},{"summary":"The icon of the \"Application Navigator\" does not follow the \"Header items\" color set in \"Color Scheme\"","key":"CONFSERVER-99163","url":"https://jira.atlassian.com/browse/CONFSERVER-99163","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen Confluence is integrated with other application, the *Application Navigator's* icon appears in the top bar. \r\n\r\nWhen the global colour scheme is customised and a color is set for Header items, it applies to all menu items but does not apply the color to the icon of the Application Navigator's icon, the icon stays in dark blue.\r\n\r\nThis can result in visibility issue when the background of the header is set to a dark color.\r\nh3. Steps to Reproduce\r\n # Integrate another app (e.g. Jira) with Confluence to enable the Application Navigator icon\r\n # Go to *Global Color Scheme* from Administration\r\n # Change the *Header* to #222 and change *Header Items* to YELLOW >> Save\r\n # Go to the dashboard, the icon of the Application Navigator is not visible \r\n # Changing the color of any Element under Color Scheme does not change the color of the Application Navigator icon\r\n\r\nh3. Expected Results\r\n\r\nThe color of the Application Navigator's icon should follow the same color specified for *Header items* in Global Color Scheme\r\nh3. Actual Results\r\n\r\nThe color of the Application Navigator's icon does not follow the same color specified for *Header items* in Global Color Scheme\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-06T10:59:34.000+0000","comments":[]},{"summary":"External group with a comma does not work on the Team Calendar permission setting page","key":"CONFSERVER-99152","url":"https://jira.atlassian.com/browse/CONFSERVER-99152","type":"Bug","priority":"","description":"h3. Problem\r\nWhen setting permissions in Team Calendar, external group names containing a comma (\",\") are not processed correctly. Instead of being recognized as a single group, the system splits the name into multiple parts, causing permission assignment issues.\r\n\r\nh3. Environment\r\nConfluence DC bundled Team Calendar\r\n\r\nh3. Steps to Reproduce\r\n# Set up an external user management system such as OpenLDAP or Active Directory.\r\n# Sync an external group that contains a comma (\",\") in its name (e.g., \"Engineering, DevOps\").\r\n# Navigate to the Team Calendar permission setting page in Confluence.\r\n# Click on the *Group Search* button to add a group.\r\n# Search for and select the synced external group with a comma or slash in its name.\r\n# Confirm the addition of the group.\r\n\r\nh3. Expected Results\r\nThe group should be added as a single entity, with its full name preserved.\r\n\r\nh3. Actual Results\r\nThe group name is split into multiple separate entries, breaking the permission assignment.\r\n!Screenshot 2025-02-05 at 11.47.20 AM.png|thumbnail! \r\n!Screenshot 2025-02-05 at 10.59.59 AM.png|thumbnail! \r\n\r\nh3. Workaround\r\nN/A\r\n\r\nh3. Notes\r\n","createDate":"2025-02-05T00:40:11.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"EPIC link in Jira issue macro is not visible in dark or light theme option","key":"CONFSERVER-99139","url":"https://jira.atlassian.com/browse/CONFSERVER-99139","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Jira issue macro, the EPIC link is not visible on the screen in light or dark theme options.\r\nh3. Steps to Reproduce\r\n # Insert Jira issue macro\r\n # Add \"EPIC LINK\" column\r\n # View the page in both Light or Dark theme\r\n # The link is not visible\r\n\r\nh3. Expected Results\r\n\r\nThe link should be visible\r\nh3. Actual Results\r\n\r\nThe link isn't visible\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n ","createDate":"2025-01-31T16:08:51.000+0000","comments":[{"text":"This issue effects 9.1.1 version ","author":"Lauras Susa"}]},{"summary":"The team calendar event text from Jira is the same as the background color, which becomes invisible if the event is marked as closed/done from Jira. ","key":"CONFSERVER-99135","url":"https://jira.atlassian.com/browse/CONFSERVER-99135","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere are 7 colors out of 21 colors from the color palette affected that the text color is the same as the background color, which makes the text invisible unless we highlight the text.\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Install Confluence and Jira.\r\n # Set the application link. \r\n # Create a version release from Jira. \r\n # Add a *Jira Issue Dates* event from Confluence, select the project that you just created the new release, and show the Version Due Date. \r\n # Confirm the event can be displayed from the Confluence team calendar. \r\n # Release the version release from Jira. \r\n # Refresh the Confluence team calendar again, 7 colors out of 21 colors become white for both text and background in the White Theme, or become black for both text and background in the Dark Theme.  !https://getsupport.atlassian.com/images/icons/emoticons/error.png|width=16,height=16!\r\n\r\nPlease refer to the screen video regarding the issue reproduction:\r\n * [^Calendar_color_issue_reproduction.mov]\r\n\r\nh3. Expected Results\r\n\r\nThe text should be visible no matter the situation below:\r\n # The color of the event. \r\n # White Theme, or Dark Theme. \r\n\r\nh3. Actual Results\r\n\r\n7 colors out of 21 colors from the color palette are affected as below:\r\n\r\n!affected_colors.jpg!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available. ","createDate":"2025-01-30T12:49:59.000+0000","comments":[{"text":"This affects 9.2.2 as well.","author":"TOP Licensing"}]},{"summary":"The modification Section in System Information lists multiple package-lock.json and yarn.lock files","key":"CONFSERVER-99132","url":"https://jira.atlassian.com/browse/CONFSERVER-99132","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center:Yes.\r\n\r\nThe modification section within the System Information should exclusively include a list of files that have been altered or edited by the customer. This ensures that users can easily identify and track the specific changes made to their files, enhancing clarity and organization when reviewing modifications. However, it is listing down multiple *package-lock.json* and *yarn.lock* files, as these are the mainly unwanted files present in the list of modified files.\r\nh3. Steps to Reproduce\r\n # Install Confluence 9.0.3 ( Tested on 9.1.1 and 9.2 as well)\r\n # Go to System Information-> Modification\r\n # There is a long list of files in that section\r\n ## !image-2025-01-29-12-01-35-349.png|width=364,height=357!\r\n\r\nh3. Expected Results\r\n\r\nIt should only list files changed by the user\r\nh3. Actual Results\r\n\r\nit is listing down multiple *package-lock.json* and *yarn.lock* files, as these are the mainly unwanted files present in the list of modified files.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2025-01-29T06:06:26.000+0000","comments":[{"text":"for confluence upgrade 9.2.1 also affected. ","author":"Sawankumar Tak"},{"text":"A fix for this issue is available in Confluence Data Center 9.2.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Restoring space XML backup from Cloud to DC results in missing table background colour","key":"CONFSERVER-99118","url":"https://jira.atlassian.com/browse/CONFSERVER-99118","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen exporting a space to XML from Cloud then restore it into Confluence Data Center, the background colour of all tables is not present on the target DC instance.\r\n\r\nWhen comparing the storage format of two sample pages, Cloud version uses:\r\n{code:java}\r\n data-highlight-colour=\"#ff8b00\"{code}\r\nWhile Data Center version uses additional class:\r\n{code:java}\r\nclass=\"highlight-grey\" data-highlight-colour=\"grey\"\r\n{code}\r\nh3. Steps to Reproduce\r\n # Create a page in Coud >> Insert a table >> change background color of table cells\r\n # Export space from Cloud and restore into DC version\r\n # The background colour is missing\r\n\r\n!image-2025-01-23-10-02-21-076.png|width=116,height=166!\r\nh3. Expected Results\r\n\r\nThe background colour of the table should be present on the target instance after restoring space\r\nh3. Actual Results\r\n\r\nThe background colour of the table isn't present on the target instance after restoring the space\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-23T09:03:45.000+0000","comments":[]},{"summary":"Synchrony fails to start after upgrading from version 8 to 9.1 or 9.2 in a Windows environment","key":"CONFSERVER-99116","url":"https://jira.atlassian.com/browse/CONFSERVER-99116","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter upgrading Confluence 8.x multi node DC to 9.1 or 9.2, Synchrony is unable to start up since hazelcast is prevented from running:\r\n{code:java}\r\n\"Hazelcast CANNOT start on this node. No matching network interface found.\\\\nInterface matching must be either disabled or updated in the member configuration.\"\r\n{code}\r\nThe previously configured ethernet interface worked without issue. Changing the interface via [Hazelcast CANNOT start on this node. No matching network interface found.|https://confluence.atlassian.com/confkb/hazelcast-cannot-start-on-this-node-no-matching-network-interface-found-646447553.html#HazelcastCANNOTstartonthisnode.Nomatchingnetworkinterfacefound.-Option1-DCCluster]  article does not resolve the issue.  This issue typically occurs within a Windows environment.\r\nh3. Steps to Reproduce\r\n # In a Windows environment, install a multi-node Confluence 8.x Data Center Confluence instance\r\n ** You can run just one node but the setup must be multi-node, not non-clustered mode\r\n # Confirm Synchrony is working as expected\r\n # Upgrade Confluence to 9.1 or 9.2\r\n\r\nh3. Expected Results\r\n\r\nSynchrony continues to work without issue.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the synchrony logs:\r\n{code:java}\r\n\"Hazelcast CANNOT start on this node. No matching network interface found.\\\\nInterface matching must be either disabled or updated in the member configuration.\"\r\n{code}\r\nh3. Workaround\r\n # Locate the *synchrony-args.properties* file in the <confluence-home-directory>\r\n # Using admin privileges, edit the *synchrony-args.properties* file by adding the following parameters:\r\n # Insert the following lines, replacing *<IP>* with the appropriate IP address of the server:\r\n{code:java}\r\n cluster.interfaces=<IP>\r\n synchrony.cluster.bind=<IP>\r\n{code}\r\n # Save the file\r\n # Restart Confluence","createDate":"2025-01-23T01:50:46.000+0000","comments":[]},{"summary":"Office Connector settings screen crash when we increase the number of conversion queues","key":"CONFSERVER-99084","url":"https://jira.atlassian.com/browse/CONFSERVER-99084","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen adjusting the office connector settings, a crash occurs if the number of queues is modified. Specifically, we observed that decreasing the value for the conversion queues updates successfully. However, an error arises when attempting to increase the \"number of conversion queues.\"\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n\r\n{*}Step-1{*}. Created a Confluence 9.2.0 environment\r\n{*}Step-2{*}. Navigate to General Configuration -> Office Connector -> Configure Office Connector plugin -> Number of Conversion Queues\r\n{quote}!screen1.png|thumbnail!\r\n{quote}\r\n{*}Step-3{*}. Change the Number of Conversion Queues from 1 to 4\r\n{*}Step-4{*}. Click on Submit\r\nh3. Expected Results\r\n\r\nChanges made to the office connector settings should be saved with the updated value.\r\nh3. Actual Results\r\n\r\nThe office connector settings page crashes when attempting to save updated values.\r\n{quote}!crash.png|thumbnail!\r\n{quote}\r\nh3. Workaround\r\n\r\nAs a temporary workaround, the value can be increased directly from the database. To do this, please follow the steps below:\r\n * Please make sure to back up the database before making any changes and also test it on your test environment first.\r\n * Run this query in the Confluence database\r\n{code:sql}\r\nUPDATE BANDANA SET bandanavalue = '<int>X</int>' WHERE bandanakey like 'com.atlassian.confluence.officeconnector.maxQueues';\r\n{code}\r\n\r\n ** (i) Replace X with the desired value in the above statement.\r\n ** Once you update the column on database, navigate to _Administration_ > _Cache Management_ > (scroll all the way down) > click {_}Flush all{_}. On a multi-node cluster, the cache may need to be flushed on all nodes. This step is make sure all the latest changes on the database are reflected on the application.\r\n\r\nh3. Note\r\n\r\nIn the logs, we could see the following exception.\r\n{code:java}\r\n2025-01-07 19:57:36,125 ERROR [http-nio-28512-exec-6] [apache.struts2.dispatcher.DefaultDispatcherErrorHandler] sendErrorResponse Exception occurred during processing request: null\r\n -- url: /c8512/admin/worddav/adminwordsubmit.action | userName: admin | referer: http://localhost:28512/c8512/admin/worddav/adminword.action | traceId: 10fe9398c351c0b6\r\njava.lang.IllegalArgumentException\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.setCorePoolSize(ThreadPoolExecutor.java:1535)\r\n\tat com.benryan.components.DefaultSlideCacheManager.initCache(DefaultSlideCacheManager.java:206)\r\n\tat com.benryan.webwork.WordAdminAction.processSubmit(WordAdminAction.java:103)\r\n{code}","createDate":"2025-01-08T12:35:24.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Epic Link text is rendered in unreadable colors in the Jira Issues macro in Confluence 9.0.1 and later versions","key":"CONFSERVER-99080","url":"https://jira.atlassian.com/browse/CONFSERVER-99080","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the Jira Issue/Filter Macro on a Confluence page, the Epic Links are rendered in colors that match the background, making the text unreadable. This issue is observed when displaying the Epic Link column and affects visibility due to color rendering issues. It appears to be related to changes introduced with the \"Dark Mode\" feature, first released in Confluence 9.0, although it occurs regardless of whether dark mode is enabled. Notably, the issue is not reproducible in earlier versions such as Confluence 8.7 and 8.9, supporting the hypothesis that the problem is associated with the Dark Mode feature introduced in Confluence 9.0.\r\nh3. Steps to Reproduce\r\n # Create a Confluence page and insert a Jira Issue/Filter Macro.\r\n # Configure the macro to display the Epic Link column.\r\n # Save the page. \r\n # Confirm that the Epic Link column appears empty.\r\n{quote}!jira-issue-render-invisible-link_2025-01-07T04_58_46.017Z.png|width=886,height=259!\r\n{quote}\r\n # Highlight the content of the cells in the Epic Link column.\r\n{quote}!jira-issue-render-link-highlight_2025-01-07T04_58_46.017Z.png|width=899,height=252!\r\n{quote}\r\n\r\nh3. Expected Results\r\n\r\nEpic Links should be clearly visible against the background, regardless of the color theme or mode used. For example, in an ideal scenario, the epic would be displayed in the preview, and the link would be easily readable without needing to highlight the text.\r\nh3. Actual Results\r\n\r\nEpic Links are rendered in colors that match the background, making them unreadable. The text in the Epic Link column appears empty until highlighted, revealing a visibility issue with the current color scheme. This indicates a rendering issue where the text color is not appropriately adjusted for visibility against the background.\r\nh3. Workaround\r\n # In Jira, navigate to the main issue of the affected epic.\r\n # Click on *Admin* > {*}Add field{*}, and look for the *Epic Colour* field.\r\n # This field will contain a value in the format {{{}ghx-label-##{}}}. Empty this field and save the changes.\r\n{panel}\r\n(!)  {*}Note{*}: Modifying the Epic Colour will alter how Jira users see the epic's visual representation in the user interface.\r\n{panel}\r\n # Refresh the Confluence affected page to validate that the epic link is now visible.\r\n{quote}!jira-issue-render-after-workaround_2025-01-07T04_58_46.017Z.png|width=885,height=248!\r\n{quote}","createDate":"2025-01-07T21:01:13.000+0000","comments":[{"text":"How can we escalate this ticket from Low priority?","author":"aengle-smsi"},{"text":"Hi Atlassian team,\r\n\r\nThis is having major impact on multiple levels for Axway. Can this be escalated and fixed with priority. Thanks a lot in advance.\r\n\r\nYavor Christov\r\nDirector | R&D Operations","author":"Yavor Christov"},{"text":"Hi Atlassian Team,\r\n\r\nthis is having major impat on multiple level for Hutchison. Proposed solution with workaround to edit all the pages manually is not an option in a large enterprise installation. Looking forward, that this is fixed in a professional way and soon.\r\n\r\nWe were forced by Atlassian to do a \"Security Upgrade\" and we were forced to use a newer LTS Version, though the old one was still under support, but security fix not availaible (why then LTS... no idea). And now mess with disruption of the user experience. \r\n\r\nbr Karl","author":"Karl Kreutzwiesner"},{"text":"I am currently looking at this ticket. While I am working on it would like to propose a temporary workaround while we try to get this fix out. \r\n # Go to Settings -> General Configuration -> Custom HTML\r\n # In the \"At end of the HEAD\" section paste the piece of code provided below at the end of any existing code that you may have in there already.\r\n # Save your changes\r\n\r\nThis workaround should fix the problem immediately for any affected page.\r\n\r\n \r\n{code:java}\r\n<style >\r\n.refresh-module-id.jira-table {\r\n  & .aui-lozenge.ghx-label-1 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-2 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-3 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-4 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-5 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-6 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-7 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-8 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-9 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-10 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-11 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-12 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-13 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-14 {\r\n      color: var(--ds-text, #fff) !important;\r\n  }\r\n  & .aui-lozenge.ghx-label-0 {\r\n      background-color: var(--ds-text, #fff) !important;\r\n  }  \r\n}\r\n</style>{code}\r\n \r\n\r\n ","author":"Franco Skrzypczak"},{"text":"Franco Skrzypczak, the custom HTML works fine, thanks. Should I remember to remove the custom HTML, once the bug is resolved in a newer version of Confluence?","author":"Pedram Mireftekhari"},{"text":"Hey Pedram, I am working on a proper fix for this issue so yes in the future this code can be removed again. I will update the \"fix versions\" field in this ticket when I am done with the fix.\r\n\r\n ","author":"Franco Skrzypczak"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Office Macro is not able to render graph/image in Excel or Word files while viewing","key":"CONFSERVER-98844","url":"https://jira.atlassian.com/browse/CONFSERVER-98844","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOffice Excel Macro does not show graphs/images in the Excel file on the Confluence page while viewing.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Created a Confluence 8.5.18 environment\r\n # Created a space and a page\r\n # Uploaded the below sample Excel (or Word file containing embedded image or graph) file that contains an image;\r\n[^Test.xlsx]\r\n # Added *Office Excel* macro to the page and select the uploaded Excel file without changing any configuration for the macro\r\n\r\nh3. Expected Results\r\n\r\nThe graph/image should be displayed properly.\r\nh3. Actual Results\r\n\r\nGraph/image is not displayed.\r\n!Screenshot 2024-12-20 at 16.21.19.png|thumbnail!\r\nh3. Workaround\r\n\r\nadd below system property to allow the missing classes for deserialisation\r\n{code:java}\r\n-Dofficeconnector.deserialization.classes.allowlist=com.atlassian.plugins.conversion.convert.html.HtmlConversionData,[B {code}","createDate":"2024-12-20T15:24:15.000+0000","comments":[{"text":"At the time of access of a page, the log file atlassian-confluence.log shows:\r\nWARN [http-nio-8090-exec-8] [com.benryan.conversion.FileBackedCache] loadFile Failed to read file <PATH>: Unauthorized deserialization attempt; com.atlassian.plugins.conversion.convert.html.HtmlConversionData\r\n -- url: /plugins/servlet/benryanconversion | userName: it-admin | referer: <URL> | traceId: e5d0766cf4328e27\r\njava.io.InvalidClassException: Unauthorized deserialization attempt; com.atlassian.plugins.conversion.convert.html.HtmlConversionData\r\n        at com.benryan.conversion.SafeFileObjectInputStream.resolveClass(SafeFileObjectInputStream.java:46)\r\n        at java.base/java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)\r\n        at java.base/java.io.ObjectInputStream.readClassDesc(Unknown Source)\r\n        at java.base/java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)\r\n        at java.base/java.io.ObjectInputStream.readObject0(Unknown Source)\r\n        at java.base/java.io.ObjectInputStream.readObject(Unknown Source)\r\n        at java.base/java.io.ObjectInputStream.readObject(Unknown Source)\r\n        at com.benryan.conversion.FileBackedCache.loadFile(FileBackedCache.java:139)\r\n        at com.benryan.conversion.FileBackedCache.lambda$get$0(FileBackedCache.java:125)\r\n\r\n\r\n\r\nOnly happens when a graph is on the Sheet. Otherwise it is ok.\r\nConfluence DC 8.5.18","author":"Jann Rutishauser"},{"text":"[https://jira.atlassian.com/browse/CONFSERVER-29521]\r\n\r\nSeems to be a bug loop.\r\n\r\nConfluence 9.2.0 works. The fix should be back portet","author":"Hannes Medwed"},{"text":"Reproduced in 8.5.19","author":"Vladimir Verlin"},{"text":"We upgraded to 8.5.18 the other day. Now all pictures, as a part of an Excel /Wordfile, used the macro Office Word or Office Excel, shows broken images. This is for sure bad  news, and we pray that a new version will be released from Atlassian , quite soon! This was an unpleasant one!\r\n\r\n \r\n| |","author":"Terje Bjørgve"},{"text":"Issue is happening in Confluence v9.2.1 also.\r\n\r\nThanks!","author":"Surender"},{"text":"A fix for this issue is available in Confluence Data Center 9.2.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"Does the error also occur in 8.5.20?\r\n\r\nThanks in advance!","author":"Alexandar Jovanovic"},{"text":"Hi [~47f37473287d],\r\n\r\nThe fix was backported to 8.5.20 so the issue should not occur on 8.5.20","author":"Jeffery Xie"},{"text":"I cannot see this in the release notes for 8.5.20, any reason for that?","author":"Johanna Lundhag"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Enabling Maintenance Mode with Recovery Mode enabled in Confluence blocks all user logins.","key":"CONFSERVER-98701","url":"https://jira.atlassian.com/browse/CONFSERVER-98701","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEnabling *Maintenance Mode* + *Recovery Mode* (as described in [Restore Passwords to Recover Admin User Rights|https://confluence.atlassian.com/doc/restore-passwords-to-recover-admin-user-rights-158390.html] results in all login attempts failing, including those for the Recovery Admin user. The error displayed is:\r\n\"{_}Something went wrong. Refresh the page and try again{_}.\"\r\nThis effectively makes Confluence entirely inaccessible.\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Enable *Maintenance Mode* in Confluence.\r\n # Enable *Recovery Mode* by setting the required property in _confluence.cfg.xml_ as per [Atlassian's recovery guide|https://confluence.atlassian.com/doc/restore-passwords-to-recover-admin-user-rights-158390.html].\r\n # *Restart* Confluence.\r\n # Attempt to log in using the Recovery Admin or any other user (admin or non-admin).\r\n\r\nh3. Expected Results\r\n * The generated Recovery Admin user should be able to log in to perform administrative actions.\r\n\r\nh3. Actual Results\r\n * All login attempts (including those from the Recovery Admin) fail with the error:\r\n\"Something went wrong. Refresh the page and try again.\":\r\n!image-2024-11-27-15-56-17-302.png!\r\n\r\nh3. Workaround\r\n*Disable Maintenance Mode and restore access (Outside the UI):*\r\n*Option 1*:\r\n# Modify the _confluence.cfg.xml_ file in the Shared Home directory:\r\n## *From*: <property name=\"access.mode\">*READ_ONLY*</property>\r\n## *To*: <property name=\"access.mode\">*READ_WRITE*</property>\r\n# *Restart* Confluence.\r\n\r\n*Option 2* (Database) - *+Take a backup before any modifications+*:\r\n# Run the following SQL query:\r\n{code:sql}\r\nSELECT * \r\nFROM BANDANA \r\nWHERE BANDANACONTEXT = '_GLOBAL' \r\nAND BANDANAKEY = 'atlassian.confluence.settings';\r\n{code}\r\n# Copy the *entire* *BANDANAVALUE*\r\n# Find <maintenanceBannerMessageOn>*true*</maintenanceBannerMessageOn>\r\n# Change it to <maintenanceBannerMessageOn>*false*</maintenanceBannerMessageOn>\r\n# Run the following query to update the *BANDANAVALUE*:\r\n{code:sql}\r\nUPDATE BANDANA \r\nSET BANDANAVALUE = '<Paste the entire BANDANAVALUE after the modification>'\r\nWHERE BANDANACONTEXT = '_GLOBAL' \r\nAND BANDANAKEY = 'atlassian.confluence.settings';\r\n{code}\r\n# *Restart* Confluence.\r\n\r\nNote that we have a Feature Request to Allow for different ways to put Confluence into Read Only Mode before startup:\r\n* [CONFSERVER-61455|https://jira.atlassian.com/browse/CONFSERVER-61455]\r\n\r\n","createDate":"2024-11-27T15:12:02.000+0000","comments":[{"text":"Effects also version 9.2.0 lts","author":"f.noack@owl-it.de"},{"text":"We had the issue activating the *Maintenance Mode.* \r\n\r\nThe Recovery Mode was activated later, after several restarts of Confluence Service, restart of the System and other checks we did, while no user could login.","author":"Jenny Joos"},{"text":"can confirm for Maintenance Mode only (no Recovery Mode mode) for 9.2.2. No login possible, even for admin users","author":"peter825"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Dashboard | Recent worked on : Content not available with browser zoom","key":"CONFSERVER-98620","url":"https://jira.atlassian.com/browse/CONFSERVER-98620","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Dashboard | All updates” page,content is not available on browser zoom.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to the \"side navigation\" & activate \"All updates\"\r\n # Zoom the page up to 200%.\r\n # Observe that the mentioned content is not available.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-20 at 4.17.26 PM.png|width=211,height=118!\r\nh3. Actual Results\r\n\r\nWhen low vision users view the page after zooming in, some content in the main content area is not available. For e.g. after zooming in to 200%, the content such as \"There is perhaps no better demonstration of the folly of human conceits than this distant image of our tiny world.\" become unavailable.\r\nAs a result, this made it difficult for low vision users to access the page content and functionality.\r\nh3. Expected Results\r\n\r\nThe page content and functionality should be available even when the page is zoomed upto 200%.\r\n\r\nEnsure that the page content is displayed using relative units for text and container so that users can access the page with zoom settings turned on. At the minimum, the page layouts should support up to 200% zoom.\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-20T10:40:24.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Header : Inappropriate label for button","key":"CONFSERVER-98502","url":"https://jira.atlassian.com/browse/CONFSERVER-98502","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe inappropriate label is defined for “Create from template” button in the page.\r\nh3. Steps to Reproduce\r\n # Open the “Confluence DC” page.\r\n # Navigate to \"...\" button under header section.\r\n # Inspect code of the “...” button.\r\n # Listen that the button label is inappropriate.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-06 at 10.53.36 PM.png|thumbnail!\r\nh3. Actual Result\r\n\r\nInappropriate accessible name such as \"Create\" is provided for \"Create from template\" button in the header section.  As a result, screen reader users will not understand the purpose of the button.\r\nh3. Expected Result\r\n\r\nThe screen reader should announce unique and appropriate label for the button.\r\n\r\nIn this scenario, update the aria-label attribute as \"Create from template\" for mentioned button. \r\n\r\n*Code Snippet*\r\n{code:java}\r\n<button aria-label=\"Create from template\" aria-expanded=\"false\" >\r\n(...)\r\n</button>{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-11-06T17:26:24.000+0000","comments":[]},{"summary":"Dashboard | popular: Missing textual description & role for image","key":"CONFSERVER-98495","url":"https://jira.atlassian.com/browse/CONFSERVER-98495","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\non the \"Dashboard | popular\" page, missing role & name for image.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to the \"side navigation\" & activate \"popular\"\r\n # Navigate to the main content area.\r\n # Using screen reader navigate to the mentioned image.\r\n # Listen that the image buttons are announced as \"Unlabelled 1\", \"Unlabelled 2\", \"Unlabelled 3\" and so on respectively. Their purpose is not communicated.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-06 at 8.41.20 PM.png|width=221,height=115!\r\nh3. Actual Results\r\n\r\nThe \"Comment\" & \"Like\"  lacks role img & textual description. Screen readers will announce these buttons as \"Unlabelled\". As a result, screen reader users will be unable to identify the purpose of these images.\r\nh3. Expected Results\r\n\r\nScreen readers should announce the textual description of these image buttons that describes its purpose for the users.\r\nApply the following changes: \r\n * Define the image using role=\"img\"\r\n * Ensure that appropriate textual description for the images is provided and it completely describes the purpose of these images.Use the \"aria-label\" attribute on the img element to provide a textual description\r\n\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-06T11:29:18.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Questions for Confluence endpoint not returning the answerCount","key":"CONFSERVER-98482","url":"https://jira.atlassian.com/browse/CONFSERVER-98482","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen sending a GET request to the endpoint /rest/questions/1.0/question/\\{id}/answers from the [Questions for Confluence plugin|https://marketplace.atlassian.com/apps/1211644/questions-for-confluence?hosting=cloud&tab=support], we got a 0 value from the answersCount field. Even if there are multiple answers, regardless of whether those answers are marked as Accepted.\r\nh3. Steps to Reproduce\r\n # Install the app [Questions for Confluence|https://marketplace.atlassian.com/apps/1211644/questions-for-confluence?hosting=cloud&tab=support] on Confluence Data Center.\r\n # Create a question.\r\n # Answer the question multiple times.\r\n # Send a GET request to the endpoint https://<server>/rest/questions/1.0/question/\\{id}/answers. You will see a 0 in the answersCount.\r\n\r\nh3. Expected Results\r\n\r\nWe can get the correct result when sending a request to the endpoint /rest/questions/1.0/question/<QUESTION_ID> instead of using the /answers endpoint. \r\n\r\nExample:\r\n{code:java}\r\ncurl --location --request GET 'https://<BASE_URL>rest/questions/1.0/question/1703944' | jq . \r\n//RESPONSE TRIMMED \r\n  \"answersCount\": 2,\r\n  \"topics\": [\r\n    {\r\n      \"id\": 1835010,\r\n      \"idAsString\": \"1835010\",\r\n      \"name\": \"development\",\r\n      \"url\": \"/questions/topics/1835010/development\",\r\n      \"featured\": false,\r\n      \"isWatching\": false\r\n    }\r\n  ],{code}\r\nh3. Actual Results\r\n\r\nWhen sending a request to the answers endpoint we get a 0 on the answersCount field:\r\n{code:java}\r\ncurl --location --request GET 'https://<BASE_URL>rest/questions/1.0/question/1703944/answers' | jq .\r\n//RESPONSE TRIMMED\r\n      \"answersCount\": 0,\r\n      \"topics\": [\r\n        {\r\n          \"id\": 1835010,\r\n          \"idAsString\": \"1835010\",\r\n          \"name\": \"development\",\r\n          \"url\": \"/questions/topics/1835010/development\",\r\n          \"featured\": false,\r\n          \"isWatching\": false\r\n        }\r\n      ],{code}\r\nh3. Workaround\r\n\r\nUse the endpoint /rest/questions/1.0/question/<QUESTION_ID> to get the correct value for answersCount.","createDate":"2024-11-05T20:58:45.000+0000","comments":[]},{"summary":"Dashboard | recent worked on: ARIA role defined inappropriately","key":"CONFSERVER-98468","url":"https://jira.atlassian.com/browse/CONFSERVER-98468","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Dashboard ” page, role button is inappropriately defined on <a>.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to the \"side navigation\" & activate \"All updates\"\r\n # Using screenreader, try to access the mentioned content.\r\n # Notice that inappropriate ARIA role information is read out by the screen reader.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-06 at 4.45.33 PM.png|width=288,height=148!\r\nh3. Actual Results\r\n\r\nThe ARIA role=\"button\" is inappropriately used on the anchor element containing text such as \"All updates\",\"popular\" & so on.\r\n\r\nAs a result, screen reader users are communicated with inappropriate role information.\r\nh3. Expected Results\r\n\r\nARIA role should be appropriately used with correct semantics and its unnecessary usage should be avoided.\r\n\r\nRemove role=\"Button\" from the \"anchor\" element in the page source.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<a href=\"#all-updates\" class=\"aui-nav-item nav-item-all-updates\" aria-describedby=\"aui-tooltip\">\r\n<span class=\"aui-icon confluence-icon-all-updates aui-iconfont-discover\"></span>\r\n<span class=\"aui-nav-item-label\">All updates</span>\r\n</a>{code}\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-05T11:56:20.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Dashboard | All updates: Inaccurate reading order","key":"CONFSERVER-98467","url":"https://jira.atlassian.com/browse/CONFSERVER-98467","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Dashboard | All updates” page, the reading order of the content is inaccurate.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to the \"side navigation\" & activate \"All updates\"\r\n # Using screen, navigate to \"Upcoming Events\" heading in main content area.\r\n\r\n # Navigate through the mentioned content.\r\n\r\n # Observe that the reading order is not followed as per the logical order.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-06 at 4.35.34 PM.png|width=237,height=117!\r\nh3. Actual Results\r\n\r\nThe reading order of the content of the page is inaccurate as it does not follow a logical order.\r\nFor instance, screen reader read the content in the following order of the page:\r\n1. \"All Day\" & so on content present in list markup\r\n2. \"Today\"  text\r\n3. \"Date\" such as 06 Nov\r\n \r\nThis inaccurate reading order will create confusion for screen reader users.\r\nh3. Expected Results\r\n\r\nScreen reader should read the content in the correct logical order for its users.\r\nPlace the content of webpages in correct meaningful sequence in the source code. Move the content in the page source in the below mentioned order. CSS can be used to maintain the presentation of the page.\r\n \r\nCorrect Reading order should be:\r\n1. \"Date\" such as 06 Nov\r\n2. \"Today\"  text\r\n3. \"All Day\" & so on content present in list markup\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-05T11:55:18.000+0000","comments":[{"text":"Closed by https://bulldog.internal.atlassian.com/browse/A11Y-566","author":"Bohdan Hulovatyi"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Dashboard | All updates :Heading not defined","key":"CONFSERVER-98449","url":"https://jira.atlassian.com/browse/CONFSERVER-98449","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Dashboard | All updates” page,The text is not declared as headings which visually looks like a heading.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to the \"side navigation\" & activate \"All updates\"\r\n # Navigate to the main content area > \"Upcoming Events\" heading\r\n # Using a screen reader, pull up the list of Headings.\r\n # Observe that the mentioned text content is not marked-up using HTML heading.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-05 at 6.00.02 PM.png|width=353,height=182!\r\nh3. Actual Results\r\n\r\nThe text such as “5 Nov \" ,\"6 Nov\" & so on visually appears to be heading. The mentioned text content is not marked-up using HTML heading.\r\nThis resulted in screen reader users finding it difficult to understand the page content structure.\r\nh3. Expected Results\r\n\r\nMark-up the mentioned text using appropriate HTML headings. In addition, use heading levels as per specification such as <h1> should be followed by <h2>, <h3> and so on.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<h3> 5 Nov </h3> {code}\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-05T04:39:23.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Focus moves inappropriately","key":"CONFSERVER-98447","url":"https://jira.atlassian.com/browse/CONFSERVER-98447","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Comments | inline comment” page,The focus moves inappropriately.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to any space & activate it.\r\n # Navigate to the main content area & select text , to add inline comment\r\n # Navigate to the \"View Inline comment | More options\" & activate it.\r\n # Navigate to the \"Delete\" button & activate it.\r\n # Observe a dialog appears.\r\n # Navigate to the \"cancel\" button & activate it.\r\n # Observe that the focus moves inappropriately.\r\n\r\nh3. Screenrecording\r\n\r\n[^Screen Recording 2024-11-05 at 1.40.34 PM.mov]\r\nh3. Actual Results\r\n\r\nWhen the “Cancel” button is activated to dismiss the dialog (which appears on activating more actions), the focus does not return to the triggering element. Instead, it moves to the container of the page & on tabbing it comes back to the \"next\" interactive element.\r\n\r\nAs a result, keyboard only and screen reader users will have to navigate the screen content again before accessing the content which is after the triggering button.\r\nh3. Expected Results\r\n\r\nWhen the user saves the comment, the keyboard focus should move to the triggering element.\r\n\r\nEnsure that the keyboard focus moves the triggering element when the modal dialog is closed which can be achieved via JavaScript focus() method.\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-05T04:38:32.000+0000","comments":[{"text":"Fixed in scope of this ticket https://bulldog.internal.atlassian.com/browse/A11Y-553","author":"Serhii Panchenko"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Focus moves inappropriately","key":"CONFSERVER-98446","url":"https://jira.atlassian.com/browse/CONFSERVER-98446","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Comments | inline comment” page,The focus moves inappropriately.\r\n\r\n+*Note:*+ A similar issue is found \"When the user likes a comment\" in the inline section.Refer Screenrecording 2.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to any space & activate it.\r\n # Navigate to the main content area & select text , to add inline comment\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Using the screen reader, navigate to the \"inline comment\".\r\n # Try adding comment.\r\n # Using just a keyboard, save the comment using the \"save\" button\r\n # Observe that the focus moves inappropriately.\r\n\r\nh3. Screenrecording 1\r\n\r\n[^Screen Recording 2024-11-05 at 1.23.50 PM.mov]\r\nh3. Screenrecording 2\r\n\r\n[^Screen Recording 2024-11-05 at 1.28.24 PM.mov]\r\nh3. Actual Results\r\n\r\nWhen the “Save” button is activated to add the “comment\" (in the inline comment section), the focus does not return to the triggering element. Instead, it moves to the container of the page & on tabbing it comes back to the \"previous\" interactive element.\r\n\r\nAs a result, keyboard only and screen reader users will have to navigate the screen content again before accessing the content which is after the triggering button.\r\nh3. Expected Results\r\n\r\nWhen the user saves the comment, the keyboard focus should move to the triggering element.\r\n\r\nEnsure that the keyboard focus moves the triggering element when the modal dialog is closed which can be achieved via JavaScript focus() method.\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-05T03:20:09.000+0000","comments":[{"text":"Fixed in scope of this ticket: https://bulldog.internal.atlassian.com/browse/A11Y-554","author":"Serhii Panchenko"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Status message not defined programmatically","key":"CONFSERVER-98445","url":"https://jira.atlassian.com/browse/CONFSERVER-98445","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Comments” page , the status message is not communicated to the users of a screen reader.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to any space & activate it.\r\n # Navigate to the main content area & select text , to add inline comment\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Using the screen reader, navigate to the \"inline comment | More options | delete\" & activate it.\r\n # Observe that the “Deleted” status message is not communicated to the users of a screen reader.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-05 at 8.49.38 AM.png|width=422,height=217!\r\nh3. Actual Results\r\n\r\nOn activating the “Delete” button, the status message “Deleted” gets dynamically added to the page. The dynamically added message is not defined programmatically.\r\n\r\nAs a result, screen reader users are not aware of the message being displayed on the page.\r\nh3. Expected Results\r\n\r\nScreen reader should announce the dynamically added status message for their users.\r\n\r\nUse the ARIA live region to make sure that the dynamic update is announced for screen reader users. This can be achieved by either adding a live region role=\"status\" or aria-live=\"polite\" and aria-atomic=\"true\" attributes to the container used to display the message. Make sure the live region is present in the page source by default.\r\n\r\nFor more information on implementing the live regions, visit [ARIA live regions - Accessibility | MDN|https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions]\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<span role=\"status\" aria-atomic=\"true\" ...>Deleted </span> {code}\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-05T03:00:37.000+0000","comments":[{"text":"Fixed in scope of this ticket https://bulldog.internal.atlassian.com/browse/A11Y-555","author":"Serhii Panchenko"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Collaborative editing is not working when Java 17 is used and /tmp is noexec","key":"CONFSERVER-98444","url":"https://jira.atlassian.com/browse/CONFSERVER-98444","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen Collaborative editing is enabled and Java is updated from version 11 to 17 or 17 is in use, users couldn't edit any pages because of errors in Synchrony. It only happens when */tmp* directory is mounted as {*}noexec{*}.\r\n\r\nThe issue is caused by [bug|https://github.com/xerial/snappy-java/issues/348] *org.xerial.snappy:snappy-java* library, which explains why issue happens - snappy tries to use reflection on private field *{{address}}* from *{{java.nio.Buffer}}* class (see this [line|https://github.com/xerial/snappy-java/blob/snappy-1.1.8/src/main/java/org/xerial/snappy/pure/UnsafeUtil.java#L44] in version 1.1.8). Starting form java 16 (see [https://openjdk.org/jeps/396]), all internal elements are strongly encapsulated, so classes which are not part of the JDK shouldn’t have access to them anymore. This bug was fixed in later versions of snappy library (see release notes for [v1.1.9.0|https://github.com/xerial/snappy-java/releases/tag/v1.1.9.0]), but unfortunately synchrony continue to use version 1.1.8.\r\nh3. Steps to Reproduce\r\n\r\n*Option:1*\r\n # Install Confluence 8.5.12 with Java 11.\r\n # Make sure that the /tmp directory is noexec.\r\n # Use another temp directory by using *-Djava.io.tmpdir=/var/atlassian/tmp* parameter for Confluence.\r\n # Create and edit pages and verify that it is successful.\r\n # Then change the Java version to 17.\r\n # Restart Confluence.\r\n # Create and edit pages and check that it is failing.\r\n\r\n*Option:2*\r\n # Install a fresh Confluence with Java 17 bundled.\r\n # Make sure that the /tmp directory is noexec.\r\n # Use another temp directory by using *-Djava.io.tmpdir=/var/atlassian/tmp* parameter for Confluence.\r\n # Create and edit pages and check that it is failing.\r\n\r\nh3. Expected Results\r\n\r\nCollaborative editing continue to work as usual.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the atlassian-synchrony.log file:\r\n{code:java}\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] 2024-10-24 08:07:51,535 WARN [async-dispatch-16] [synchrony.http.entity-api] Error in put-entity {:entity \\\"/Synchrony-3aafecce-4154-3a29-a6b7-84ab10d6d7de/confluence-375783430\\\", :id \\\"yU0rQV4PAKi0k2yDv6Z1_Q\\\", :throwable #error {\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :cause \\\"[UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address field\\\"\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :data {:type :server-error, :source :server}\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :via\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t [{:type clojure.lang.ExceptionInfo\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t   :message \\\"[UNSUPPORTED_PLATFORM] pure-java snappy requires access to java.nio.Buffer raw address field\\\"\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t   :data {:type :server-error, :source :server}\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t   :at [synchrony.sync.messages$ex_info_from_error_message invokeStatic \\\"messages.cljc\\\" 29]}]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :trace\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t [[synchrony.sync.messages$ex_info_from_error_message invokeStatic \\\"messages.cljc\\\" 29]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [synchrony.sync.connection$request_BANG_$fn__38749 invoke \\\"connection.cljc\\\" 90]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [synchrony.http.entity-api (take?) \\\"entity_api.clj\\\" 497]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [synchrony.http.entity_api$content_reconciliation$fn__66754 invoke \\\"entity_api.clj\\\" 477]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [synchrony.http.entity-api (take?) \\\"entity_api.clj\\\" 541]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [synchrony.http.entity_api$put_revision_handler$fn__67034 invoke \\\"entity_api.clj\\\" 521]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [clojure.lang.AFn run \\\"AFn.java\\\" 22]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [java.util.concurrent.ThreadPoolExecutor runWorker \\\"ThreadPoolExecutor.java\\\" 1136]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [java.util.concurrent.ThreadPoolExecutor$Worker run \\\"ThreadPoolExecutor.java\\\" 635]\r\n2024-10-24 10:07:51,537 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t  [java.lang.Thread run \\\"Thread.java\\\" 833]]}}\r\n....\r\n2024-10-24 10:08:23,698 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :cause \\\"Could not initialize class org.xerial.snappy.pure.UnsafeUtil\\\"\r\n2024-10-24 10:08:23,698 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :via\r\n2024-10-24 10:08:23,698 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t [{:type java.lang.NoClassDefFoundError\r\n2024-10-24 10:08:23,698 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t   :message \\\"Could not initialize class org.xerial.snappy.pure.UnsafeUtil\\\"\r\n2024-10-24 10:08:23,698 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t   :at [org.xerial.snappy.pure.SnappyRawCompressor writeUncompressedLength \\\"SnappyRawCompressor.java\\\" 408]}]\r\n2024-10-24 10:08:23,698 DEBUG [23830:StdOutHandler [/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el8_7.x86_64/bin/java]] \\t :trace {code}\r\nh3. Workaround\r\nh4. Option 1\r\n # Add next lines to *synchrony-args.properties* file\r\n{code:java}\r\nsynchrony.jvm.arg.0=--add-opens=java.base/java.nio=ALL-UNNAMED\r\nsynchrony.jvm.arg.1=--add-opens=java.base/sun.nio.ch=ALL-UNNAMED\r\nsynchrony.jvm.arg.2=--add-opens=java.base/sun.nio.cs=ALL-UNNAMED {code}\r\n # Go to *General Configuration -> Collaborative editing* and press *Restart Synchrony* button\r\n\r\nh4. Option 2\r\n\r\nIf for some reason option 1 doesn't work, try option 2\r\n # Add next line to *synchrony-args.properties* file and add path to another *tmp* folder, where confluence has access (and which is not mounted with noexec flag).\r\n{code:java}\r\nsynchrony.jvm.arg.0=-Djava.io.tmpdir=/path/to/another/tmp/folder {code}\r\nor (either way should work)\r\n{code:java}\r\njava.io.tmpdir=/path/to/another/tmp/folder {code}\r\n # Go to *General Configuration -> Collaborative editing* and press *Restart Synchrony* button\r\n\r\nh4. Option 3\r\n\r\nFollow steps from this KB article - [https://confluence.atlassian.com/confkb/confluence-experiences-could-not-initialize-class-org-xerial-snappy-snappy-error-859462192.html]","createDate":"2024-11-05T02:44:31.000+0000","comments":[{"text":"Any timeline on when the patch version 9.2.3 will be out to fix this issue?","author":"Matt Fornaro"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Keyboard focus not set onto dialog","key":"CONFSERVER-98416","url":"https://jira.atlassian.com/browse/CONFSERVER-98416","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Comment | inline comment” page, The focus is not restricted to the “Delete“ modal.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to any space & activate it.\r\n # Navigate to the main content area & select text , to add inline comment\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Using the screen reader, navigate to the \"inline comment | More options | delete\" & activate it.\r\n # Observe a modal dialog appears.\r\n # Observe that the focus is not set on the modal.\r\n\r\nh3. Screenrecording\r\n\r\n[^Screen Recording 2024-11-05 at 8.42.43 AM.mov]\r\nh3. Actual Results\r\n\r\nThe programmatic focus remains on the triggering element itself when the \"{*}Delete{*}\" dialog appears. Even though non- modal dialog is visible on the screen,content is available at the end of the page for keyboard-only and screen reader users. This required screen reader users and keyboard-only users to tab pass the content on the page before they can interact with the modal dialog.\r\nh3. Expected Results\r\n\r\nThe programmatic focus should be set on the first logical element of the dialog as soon as dialog appears.\r\n\r\nSet the keyboard focus to the first logical element such as \"Delete\" dialog title of the modal dialog in this case using the javascript .focus().\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-04T05:46:25.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Headings not defined","key":"CONFSERVER-98415","url":"https://jira.atlassian.com/browse/CONFSERVER-98415","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Comments” page ,The text is not declared as headings which visually looks like a heading.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to any space & activate it.\r\n # Navigate to the main content area & select text , to add inline comment\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Using the screen reader, navigate to the \"inline comment | More options | delete\" & activate it.\r\n # Using a screen reader, pull up the list of Headings.\r\n # Observe that the mentioned text content not marked-up using HTML heading.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-04 at 9.56.27 PM.png|width=274,height=141!\r\nh3. Actual Results\r\n\r\nThe text such as \"Delete\" visually appears to be heading in the non-modal dialog. The mentioned text content is not marked-up using HTML heading.\r\nThis resulted in screen reader users finding it difficult to understand the page content structure.\r\nh3. Expected Results\r\n\r\nMark-up the mentioned text using appropriate HTML headings. In addition, use heading levels as per specification such as <h1> should be followed by <h2>, <h3> and so on.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<h2>Delete</h2>{code}\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-04T05:46:15.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"'Image caption' Label Shown in Version 8.5 when the Feature is not Available","key":"CONFSERVER-98414","url":"https://jira.atlassian.com/browse/CONFSERVER-98414","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe 'Image caption' option is displayed in image properties, but this feature is not available in 8.5 version.\r\nh3. Steps to Reproduce\r\n # Insert the image onto the page.\r\n # Navigate to Properties > Description.\r\n # You'll see the 'Image caption' label.\r\n\r\nh3. Expected Results\r\n\r\nThe expected outcome is that the 'Image caption' label will not be visible, as this feature is not available in Confluence 8.5. Instead, the label should read 'Title text.'\r\nh3. Actual Results\r\n\r\nThe label 'Image Caption' is shown in the image properties.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-01T20:24:01.000+0000","comments":[{"text":"This issue is caused by a misleading translation.\r\nWhile in the British English, the field in image property dialog is shown as \"Title text\" while in the US English, it's \"Image caption\".\r\n\r\n !Screenshot 2024-11-05 at 12.57.04 PM.png|thumbnail! \r\n !Screenshot 2024-11-05 at 1.03.14 PM.png|thumbnail! ","author":"Jiri Hronik"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"View Page : Color alone is used to distinguish links from surrounding text.","key":"CONFSERVER-98394","url":"https://jira.atlassian.com/browse/CONFSERVER-98394","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nLink is not distinguishable when compared to surrounding text.\r\n\r\n*Note:*  This issue is globally present on the footer area of the pages.\r\nh3. Steps to Reproduce\r\n # Open the \"Confluence DC\" page.\r\n # Navigate to footer section via TAB key.\r\n # Observe that link such as “Atlassian Confluence” and so on links is not distinguishable when compared to surrounding text.\r\n\r\nh3. Screenshot\r\n\r\n!image-2024-10-30-17-11-02-780.png|thumbnail!\r\nh3. Actual Result\r\n\r\nColor alone is used to distinguish the “Atlassian Confluence” and so on links from surrounding text, underlines are visible only on mouse hover. Even though sufficient color contrast is provided the links do not have persistent underlines making it difficult for users with color blindness and mobility impairment to distinguish the link within the text.\r\nh3. Expected Result\r\n\r\nMake sure to provide underlining for link text even when the keyboard focus is not on the interactive element. This will make sure that users can differentiate between links and text.\r\n\r\nProvide the following CSS properties to links:\r\n {{text-decoration: underline;}}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-30T11:34:05.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Visually Hidden interactive element receives keyboard focus","key":"CONFSERVER-98381","url":"https://jira.atlassian.com/browse/CONFSERVER-98381","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the \"Comments\" page, visually hidden content receive keyboard focus.\r\nh3. Steps to Reproduce\r\n # Navigate to \"Recent spaces\"\r\n # Navigate to the \"Test\" Page.\r\n # Navigate to the \"comment\" section & add a comment.\r\n # Using screenreader,navigate to the \"Preview\" button.\r\n # Listen that the visually hidden content is announced.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-04 at 9.51.14 PM.png|width=474,height=244!\r\nh3. Actual Results\r\n\r\nVisually hidden content such as \"{*}Return To edit Mode Type 'e'{*} \" present before the \"save\" button is read out by screen reader in the main content area.\r\nAs a result, screen reader users might be confused and find the information irrelevant as they have not tried to access the hidden content.\r\nh3. Expected Results\r\n\r\nScreen reader should not read the visually hidden content.\r\n * Hide the mentioned content from all users by specifying css display: none; property.\r\n\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-30T04:48:41.000+0000","comments":[{"text":"The issue was resolved by [A11Y-558|https://bulldog.internal.atlassian.com/browse/A11Y-558]","author":"Olena Lymar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Header: Non-descriptive link text","key":"CONFSERVER-98380","url":"https://jira.atlassian.com/browse/CONFSERVER-98380","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the header Section, The “open” link text is non-descriptive in nature.\r\nh3. Steps to Reproduce\r\n # Navigate to the homepage of the confluence\r\n # Navigate to the header section\r\n # Navigate to the \"Notification\" link & activate it.\r\n # Open any comment & navigate to the newly updated content.\r\n # Navigate onto the mentioned instance and inspect it’s code.\r\n # observe that the link text does not clearly describe the purpose of the link.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-11-02 at 11.10.00 AM.png|width=220,height=113!\r\nh3. Actual Results\r\n\r\nThe link text \"Open\" does not describe the destination it points to.\r\nAs a result, screen reader users might not understand the purpose of the link effectively.\r\nh3. Expected Results\r\n\r\nEnsure that the link text should be meaningful and unique so that users of a screen reader comprehends the link’s purpose clearly. In this scenario, provide a complete and descriptive textual description as “Open Comment” for the mentioned link via hidden text.\r\n\r\nIf the above solution is not feasible, use “aria-label” attribute to manually provide a complete and descriptive textual description for the link. Make sure that the “aria-label” attribute value clearly indicates the purpose of the link.\r\n\r\n*Note: Before implementing hidden text/accessible name for the mentioned link. Kindly consult with the content design team for suggestion/approval.*\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<a href=\"...\" ....\">Open<span id=\"hiddentext\">Comment</span></a> \r\nOR\r\n<a href=\"...\" aria-label=\"learn more on Comment\">Open</a>{code}\r\nh3. Environment\r\n\r\n MacBook Pro (16-inch, 2021)\r\nmacOs Sonoma 14.6.1\r\nChrome - Version 129.0.6668.70 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit) \r\nSafari- Version 17.1 (19616.2.9.11.7)\r\nJAWS- Version 2023\r\nNVDA- Version 2021.2 \r\nVoiceover - Version Latest\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-30T04:48:33.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"View page : Checkboxes are not operable in browse mode","key":"CONFSERVER-98304","url":"https://jira.atlassian.com/browse/CONFSERVER-98304","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe checkboxes are not operable using screen reader in browse mode.\r\nh3. Note: This issue exists only in windows\r\nh3. Steps to Reproduce\r\n # Open the “Confluence DC” page.\r\n # Navigate to \"Approved/Not Approved\" checkboxes via TAB key.\r\n #  Observe that the checkboxes are not reachable.\r\n # Listen that the checkboxes are not identified instead they are skipped.\r\n\r\nh3. Screen recording\r\n\r\n[^Testing purpose - testing - Confluence - Google Chrome 2024-10-23 18-39-29.mp4]\r\nh3. Actual Result\r\n\r\nWhen the screen reader user navigate in browser mode, the checkboxes such as \"Approved/Not Approved: are not operable in the main content area. As the result screen reader users not being able to interact with the custom checkboxes.\r\nh3. Expected Result\r\n\r\nMake sure that the checkbox should be operable with all screen readers in browse mode of all platforms. Additionally, modify the scripts to ensure it's operable with the screen reader in browse mode.. So that the screen reader users will navigate to the checkbox effectively. \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-23T09:11:12.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Enabled Nested Groups in Internal and External Directories has no effect","key":"CONFSERVER-98291","url":"https://jira.atlassian.com/browse/CONFSERVER-98291","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Create a External directory/ Edit an Internal directory (mark editable = true in atlassian-plugin : ref pr: https://stash.atlassian.com/projects/CONFSERVER/repos/confluence/pull-requests/34529/overview\r\n # In the Edit view you will be able to \"Enable Nested Groups\" \r\n!https://files.slack.com/files-tmb/TE8HJA7RS-F07SF3S0PA8-3c1cb65b9a/image_720.png!\r\n # With this you should be able to add a \"Group\" inside another Group.\r\n # In the Group search bar for Add member, searching for a group should result in finding the group with the feature enabled.\r\n\r\nh3. Expected Results\r\n\r\n\r\n\r\n1. We should be able to search other groups in the Add member search bar in Group edit page.\r\n2. The group to be added once found should be able to be added in the Parent Group\r\nh3. Actual Results\r\n\r\n \r\n{noformat}\r\nWe are not able to search for the group and hence not able to add it.{noformat}\r\nh3. Workaround\r\n\r\nFor Internal Directory: disable the \"Edit\" functionality, sample pr: [https://stash.atlassian.com/projects/CONFSERVER/repos/confluence/pull-requests/34529/overview]\r\n\r\nFor external directory there is no workaround.","createDate":"2024-10-22T12:33:36.000+0000","comments":[{"text":"hi [@jhronik|https://atlassian.slack.com/team/WEKG31L4B] ,\r\nSo Nested groups is not supported at all in confluence from the prerspective that you can have a Group inside a Group .The behaviour for different directories is different though : # Internal Directories: For internal directories this is not supported at all, but shows up as an option when the edit button is enabled for the directory\r\n # External Directories: You can create nested groups in external directories, but in confluence you need to enable the nested group flag, and the behavior changes as follows:\r\n ## If flag is turned off: You will not be able to see any nested group or group members in the Group users list.\r\n ## If flag is turned on to enable nested groups :  You will be able to see all the users present in the nested group flattened in the group members page\r\n\r\nI have recorded the behavboir for external directories here: [https://www.loom.com/share/3f5921ab89b94ae3b018277db0ad531f] \r\nfor more refernece you can check the thread: [https://atlassian.slack.com/archives/CFGBMQD6D/p1729667137716719]\r\n \r\n\r\nEssentially there are two problems: \r\n1. For Internal Directory: When the edit button is enabled and clicked in directory setup page, the ui shows an option to \"Enable Nested Groups\" , but since internal directories dont support this we need to remove that option in \"Edit\" mode.\r\n2. For external directory: The group page where you can see all members does not show the \"nested-groups\" like visible in external sites like azure, it shows a flattened list of users.\r\n\r\n \r\n \r\n ","author":"Anshul Chokhani"}]},{"summary":"View Page: Focus moves inappropriately","key":"CONFSERVER-98289","url":"https://jira.atlassian.com/browse/CONFSERVER-98289","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n The focus does not move to the first interactive element of the “Share this page\" dialog in the main content area.\r\nh3. Steps to Reproduce\r\n # Open the “Confluence DC” page.\r\n # Navigate onto the “Share” button and activate it.\r\n # A dialog will appear over the screen.\r\n # Observe that keyboard focus is moving to “Copy” button instead of first interactive element of the dialog.\r\n\r\nh3. Screen recording\r\n\r\n[^Screen Recording 2024-10-22 at 4.59.00 PM.mov]\r\nh3. Actual Result\r\n\r\nAs soon as the “Share this page\" dialog appear on the page, the focus moves inappropriately to the \"Copy” button instead of the first interactive element of the dialog.\r\n\r\nAs a result, it will create a poor experience for the screen reader and keyboard-only users.\r\nh3. Expected Result\r\n\r\nMake sure that when the user activates the \"Share\" button, the focus should goes first interactive element such as \"Share link\" form field. This can be achieved via the JavaScript.focus() method.\r\n\r\nFor information, you can refer [Modal Dialog Example|https://www.w3.org/WAI/ARIA/apg/example-index/dialog-modal/dialog.html] and [https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-22T12:03:54.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"View page : Focus not visible","key":"CONFSERVER-98288","url":"https://jira.atlassian.com/browse/CONFSERVER-98288","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe focus is not visible for the “Names” , \"Remarks\" and so on column headers in the page.\r\nh3. Steps to Reproduce\r\n # Open the “Confluence DC” page.\r\n # Navigate to “Names” , \"Remarks\" and so on column headers via TAB key.\r\n # Ensure that the keyboard focus is not visible.\r\n\r\nh3. Screen recording\r\n\r\n[^Screen Recording 2024-10-22 at 4.51.23 PM.mov]\r\nh3. Actual Result\r\n\r\nFocus is not visible for the “Names” , \"Remarks\" and so on column headers in the main content area. A focus indicator is not visually available as the user tabs through these controls using a keyboard.\r\n\r\nAs a result, users with learning and mobility impairments as well as those with low vision will not be able to easily find out which element currently has the focus.\r\nh3. Expected Result\r\n\r\nFocus indicator should be clearly visible while navigating the mentioned elements using a keyboard.\r\n\r\nProvide a clear visual indication display a blinking vertical bar (all four sides) for interactive elements when user navigates via TAB key.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-22T11:11:39.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"View Page : Focus moves inappropriately","key":"CONFSERVER-98284","url":"https://jira.atlassian.com/browse/CONFSERVER-98284","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe focus moves inappropriately, when the \"Watch page\" and \"Watch all content in this space\" checkboxes are activated.\r\nh3. Steps to Reproduce\r\n # Open \"Confluence DC\" page.\r\n # Navigate to \"Watch\" button via TAB key and activate it.\r\n # A pop-up will appear over the screen.\r\n # Navigate to \"Watch page\" and \"Watch all content in this space\" checkboxes and select it.\r\n # Observe the inappropriate movement of keyboard focus.\r\n\r\nh3. Screen recording\r\n\r\n[^Screen Recording 2024-10-21 at 7.20.04 PM.mov]\r\nh3. Actual Result\r\n\r\nWhen the \"Watch page\" and \"Watch all content in this space\" checkboxes are activated the focus is not visible any where on the page. In fact, the focus becomes visible on the next interactive element such as \"Manage watchers\" button when users press tab once. This illogical focus order might make the page difficult to understand for the keyboard and screen reader users.\r\nh3. ExpectedResult\r\n\r\nMake sure that the focus is managed appropriately when the checkboxes are selected/unselected.\r\n\r\nIn this scenario, when the user select/unselect the mentioned checkboxes, the focus should be visible on checkboxes. This can be done with the “focus” method. \r\n\r\nFor more information, refer the following link: [https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-21T13:47:39.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Calendar : Content not available with browsers zoom functionality(at 200 %)","key":"CONFSERVER-98280","url":"https://jira.atlassian.com/browse/CONFSERVER-98280","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn the \"Calendar\" page the content is not available on browser's zoom functionality at 200%.\r\n\r\nh3.Steps to Reproduce\r\n# Open confluence dc test env URL-https://instenv-370431-8mbh.instenv.internal.atlassian.com/calendar/mycalendar.action\r\n# Navigate to \"Calendar\" in the header section\r\n# Navigate to the main content area.\r\n# Follow below steps for browser's zoom functionality →\r\n* Go to Chrome settings\r\n* Zoom\r\n* Set zoom to 200%.\r\n\r\nh3.Screenshot\r\n\r\n\r\nh3.Actual Results\r\nWhen a low vision user magnifies the page using the browser's zoom functionality (at 200% zoom), the \"Subscribe\" button overlaps with the \"Timeline\" button, causing accessibility issues.As a result, this made it difficult for low vision users to access the page content and functionality.\r\n\r\nh3.Expected Results\r\nEnsure that all the page content is visible when zoomed in. Use relative units to define font and container sizes in CSS to ensure that page's content reflows correctly when zoomed in. Flexible layouts should be used to display the page content. Dimensions for container elements used to display the page content should be defined using relative units, such as \"%\", \"em\", \"rem\" etc. to ensure that the content fits on the page when zoomed in.\r\n\r\nh3.Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\n\r\nh3.Environment\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2023\r\nNVDA- Version 2023\r\nVoiceover - Version Latest\r\n\r\n","createDate":"2024-10-21T06:32:59.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Side Navigation : Aria attribute defined incorrectly ","key":"CONFSERVER-98234","url":"https://jira.atlassian.com/browse/CONFSERVER-98234","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAria-Current attribute is defined incorrectly on <li> instead of <a> element \r\nh3. Steps to Reproduce\r\n # Open the \"Confluence DC\" page.\r\n # Navigate to the Side Navigation.\r\n # Navigate to \"Pages\" link via TAB key.\r\n # Inspect  the code.\r\n # Notice that incorrectly the ARIA information is provided on <li> element.\r\n\r\nh3. Screenshot\r\n\r\n!image-2024-10-17-11-20-36-322.png|thumbnail!\r\nh3. Actual Result\r\n\r\nThe aria-current attribute for mentioned link is incorrectly defined on the <li> element instead of <a> element that containing \"pages\" text. As a result, screen reader users are communicated with inappropriate information.\r\nh3. Expected Result\r\n\r\nARIA attributes should be correctly used with correct semantics .\r\n*Apply the following changes:*\r\n * Remove the aria-current=\"true\" attribute from <li> element\r\n * Add the aria-current attribute to <a> element of the link.\r\n * Aria-current value should be set to \"page\" for the mentioned link.\r\n * Ensure that the \"aria-current\" attribute is updated as per user interaction using scripting. \r\n\r\n*Code Snippet:*\r\n \r\n{code:java}\r\n<li>\r\n<a href=\"/collector/.. aria-current=\"page\" >Pages</span></a> \r\n</li>\r\n{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-17T05:30:29.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Side Navigation : Inappropriate label for button","key":"CONFSERVER-98224","url":"https://jira.atlassian.com/browse/CONFSERVER-98224","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe inappropriate label is defined for “Getting Started” button\r\nh3. Steps to Reproduce\r\n # Open the \"Confluence DC\" page.\r\n # Navigate to the Side Navigation.\r\n # Navigate to \"Getting started\" button via TAB key\r\n # Listen that the button label is inappropriate.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-10-16 at 9.43.45 AM.png|thumbnail!\r\nh3. Actual Result\r\n\r\nInappropriate and verbose accessible name such as \"Expand item Getting started\" is provided for \"Getting started\" button. The expand/collapse state information already conveyed via aria expanded attribute . As a result . This dual and verbose information will confuse or misleads about the button state functionality and resulting in difficultly to understand the button state effectively\r\nh3. Expected Result\r\n\r\nMake sure that the buttons label should be appropriate and clear.\r\n\r\nIn this scenario, as the buttons state is conveyed through expanded attribute. Hence we would recommend to you keep the accessible name as “Getting started” constantly.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<button aria-label=\"Getting started\" aria-expanded=\"false\" >\r\n(...)\r\n</button>{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-16T11:31:14.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Side Navigation : Buttons not focusable with a keyboard and lack button role","key":"CONFSERVER-98222","url":"https://jira.atlassian.com/browse/CONFSERVER-98222","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe “2024“ , \"October\" buttons under \"Blog\"section are not focusable and lacks a button role.\r\nh3. Steps to Reproduce\r\n # Open the \"Confluence DC\" page.\r\n # Navigate to the Side Navigation.\r\n # Navigate to the “2024” button in the side navigation under \"blog\" Section.\r\n # Navigate to the mentioned instances and inspect the code.\r\n # Observe that the role and state have not been defined.\r\n\r\nh3. Screen recording\r\n\r\n[^Screen Recording 2024-10-16 at 10.09.37 AM.mov]\r\nh3. Actual Result\r\n\r\nThe \"2024“ , \"October\" buttons in the \"Blog\" section are not focusable with a keyboard. The role of button is not programmatically determined for screen reader users. This made it difficult for keyboard-only and screen reader users to access the functionality associated with the mentioned button.\r\nh3. Expected Result\r\n\r\nThe button should be focusable and operable with a keyboard and have a programmatically defined button role.\r\n\r\nEnsure that all the interactive elements are focusable and operable using a keyboard and screen reader.\r\n*Apply the following changes:*\r\n *  Code the mentioned buttons using {{<button>}} tag or {{role=\"button\"}} and {{{}tabindex=\"0\"{}}}.\r\n * Remove the {{aria-expanded}} attribute from the {{<li>}} element.\r\n * Provide the state of the button using the {{aria-expanded}} attribute to <button>. Also, update the “true” and “false” values appropriately. The value should be set to “true” when the button is expanded and “false” when the button is collapsed.\r\n * Modify the scripts to ensure the button is operable with a keyboard.\r\n\r\nA working example of an accessible button can be found at [https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button]\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<button class=\"css\" aria-expanded =\"false\" >2024</button>{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2024-10-16T09:41:50.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Fix content property field mappings","key":"CONFSERVER-98149","url":"https://jira.atlassian.com/browse/CONFSERVER-98149","type":"Bug","priority":"","description":"h2. Reason\r\n # _ContentPropertyIndexSchema_ will register plugin index schema with the mapping by types as:\r\n ## extract path with type date -> *DateFieldMapping*\r\n ## extract path with type number -> *LongFieldMapping*\r\n # _ContentPropertiesExtractor_ will call _ContentPropertyExtractionManagerImpl_ to extract and mapping stored property jsonString with schemaFields as:\r\n ## DateFieldTransformation -> return *StringFieldDescriptor* with *StringFieldMapping*\r\n ## NumberFieldTransformation -> return *DoubleFieldDescriptor* with *DoubleFieldMapping*\r\n # Then it tries to adding the field mapping from step 2 by comparing with the registered ones from step 1. It throws warnings of mapping types conflicts. As we have:\r\n ## *DateFieldMapping*  vs *StringFieldMapping*\r\n ## *LongFieldMapping*  vs *DoubleFieldMapping*\r\n\r\n \r\nAccording to [the dev doc|https://developer.atlassian.com/server/confluence/content-properties-in-the-rest-api/#supported-index-field-types], it says type number will be indexed as double, and date can be represented as either String or long, so the above mappings are neither correct in both step 1 and 2.\r\n \r\nh2. Summary\r\n # There is no workaround as it requires code changes in confluence to fix this issue. \r\n # This issue will not affect the plugin's main functionality\r\n ## these properties will still be accessible via java code\r\n ## the issue mainly affect the Confluence lucene index for searching content properties, thus will affect the properties accessible by REST API\r\n\r\n \r\n\r\n \r\n\r\nNeed to fix content property field mappings\r\n\r\nThe Date field extractor need to use the new `DateFieldMapping` builder.\r\n\r\nThe Number field should be `DoubleFieldMapping`","createDate":"2024-10-02T07:39:31.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Space favourited by large number of users causes severe latency when loading any page within that space","key":"CONFSERVER-97932","url":"https://jira.atlassian.com/browse/CONFSERVER-97932","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a Confluence space is favourited by a large number of users, this causes severe latency issues when loading any Confluence page within that space and likely other pages related to that space.\r\n\r\nThe exact number of favouritings required to trigger a noticeable increase in latency is not reliably known. It is likely environment and instance activity dependent. It also likely requires the surpassing of the Hibernate L2 cache limits. One large customer observed that a space with roughly 4000 user favourites was seeing Confluence page load times upwards of 10 seconds.\r\n\r\nThe root cause for this issue is the lack of usage of specialised label SQL queries. Whenever a label related operation is performed, all labellings for that entity are retrieved, including all personal labels for all users on that instance. This issue is not limited to just space entities, but this is where it may be more apparent due to the increased likelihood of a large number of user favouritings on a popular space. The current query approach is not scalable with instance user quantity.\r\n\r\nThe retrieval of all space labels on the view of any Confluence page in that space is currently triggered by the code com.atlassian.confluence.userstatus.DefaultFavouriteManager#isUserFavourite(com.atlassian.user.User, com.atlassian.confluence.spaces.Space). Removing or optimising this specific call should provide immediate relief to affected instances.\r\n\r\nTo rectify and prevent potential related issues, and ensure Confluence remains scalable into the future, the com.atlassian.confluence.core.AbstractLabelableEntityObject should be reworked so that personal labels are not fetched from the database by default.\r\nh3. Steps to Reproduce\r\n\r\nTo more easily reproduce this without needing to surpass caching limits, you may disable Hibernate L2 caching by making the following edits in databaseSubsystemContext.xml (Confluence <8.6) or productionDatabaseContext.xml otherwise.\r\n{code:java}\r\n<prop key=\"hibernate.cache.use_query_cache\">false</prop>\r\n<prop key=\"hibernate.cache.use_second_level_cache\">false</prop> {code}\r\n # Create a Space and a page within that Space\r\n # Have multiple users log in and favourite that Space\r\n # Log in as an administrator\r\n # Enable SQL logging at /admin/viewlog4j.action\r\n # Browse to the page within that Space\r\n # Observe the SQL log files\r\n\r\n \r\nh3. Expected Results\r\n\r\nPersonal labels for users other than the authenticated user are not retrieved from the database.\r\nh3. Actual Results\r\n\r\nExcessive number of label SQL queries, such as the following.\r\n{code:java}\r\n2024-09-04 13:02:14,222 DEBUG [org.hibernate.SQL] logStatement select labelling0_.ID as id1_19_0_, labelling0_.LABELID as labelid2_19_0_, labelling0_.CONTENTID as contenti3_19_0_, labelling0_.PAGETEMPLATEID as pagetemp4_19_0_, labelling0_.OWNER as owner5_19_0_, labelling0_.CREATIONDATE as creation6_19_0_, labelling0_.LASTMODDATE as lastmodd7_19_0_, labelling0_.LABELABLEID as labelabl8_19_0_, labelling0_.LABELABLETYPE as labelabl9_19_0_ from CONTENT_LABEL labelling0_ where labelling0_.ID=?\r\n2024-09-04 13:02:14,223 TRACE [type.descriptor.sql.BasicBinder] bind binding parameter [1] as [BIGINT] - [23]\r\n2024-09-04 13:02:14,223 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([labelid2_19_0_] : [BIGINT]) - [6]\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([contenti3_19_0_] : [BIGINT]) - [5]\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([pagetemp4_19_0_] : [BIGINT]) - [null]\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([creation6_19_0_] : [TIMESTAMP]) - [2006-04-24 09:12:49.0]\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([lastmodd7_19_0_] : [TIMESTAMP]) - [2006-04-24 09:12:49.0]\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([labelabl8_19_0_] : [BIGINT]) - [5]\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([labelabl9_19_0_] : [VARCHAR]) - [null]\r\n2024-09-04 13:02:14,224 DEBUG [org.hibernate.SQL] logStatement select label0_.LABELID as labelid1_58_0_, label0_.NAME as name2_58_0_, label0_.OWNER as owner3_58_0_, label0_.NAMESPACE as namespac4_58_0_, label0_.CREATIONDATE as creation5_58_0_, label0_.LASTMODDATE as lastmodd6_58_0_ from LABEL label0_ where label0_.LABELID=?\r\n2024-09-04 13:02:14,224 TRACE [type.descriptor.sql.BasicBinder] bind binding parameter [1] as [BIGINT] - [6]\r\n2024-09-04 13:02:14,225 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([name2_58_0_] : [VARCHAR]) - [favourite]\r\n2024-09-04 13:02:14,225 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([creation5_58_0_] : [TIMESTAMP]) - [2006-04-24 09:12:49.0]\r\n2024-09-04 13:02:14,225 TRACE [type.descriptor.sql.BasicExtractor] extract extracted value ([lastmodd6_58_0_] : [TIMESTAMP]) - [2010-01-13 05:51:41.0]{code}\r\nh3. Workaround\r\n\r\nFirst disable/remove any automations for favouriting spaces.\r\n\r\nDelete user favouritings of the affected space.\r\n\r\nUser may choose to bookmark their favourite spaces instead until a time this issue is fixed.","createDate":"2024-09-11T02:44:00.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.20. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.2.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Create calendar: Instruction not associated with form field","key":"CONFSERVER-97917","url":"https://jira.atlassian.com/browse/CONFSERVER-97917","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"Link this calendar to a space.\" instruction is not associated with the \"Related space\" field.\r\nh3. Steps to Reproduce\r\n # Open the home page\r\n # Activate the \"Calendar\" link > Activate the \"Add calendar\" button\r\n # Navigate to the mentioned instance\r\n # Inspect the code and observe that the instruction is not associated with the respective field.\r\n\r\nh3. Screenshot\r\n\r\n!Defcet 8.png|width=582,height=322!\r\nh3. Actual Result\r\n\r\nThe instruction \"Link this calendar to a space.\" is not associated with the \"Related space\" field present in the \"Create calendar\" modal dialog.\r\n\r\nAs a result, screen reader users might miss out important instructions.\r\nh3. Expected Result\r\n\r\nThe screen reader should announce the instruction along with label text.\r\nApply the following changes:\r\n• Add \"aria-describedby\" attribute to the \"Related space\" field.\r\n• Reference the \"id\" value of the element used to display the instruction text in the \"aria-describedby\" attribute.\r\nh3. Code Snippet\r\n{code:java}\r\n<input aria-describedby=\"one\" id=\"spaceKeyAutocomplete\" type=\"text\" ...>\r\n<div id=\"one\" class=\"description\">Link this calendar to a space.</div> {code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (13-inch, 2018)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 109.0.5414.119 (Official Build) (64-bit)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2024-09-10T06:46:01.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Copying and pasting text with strikethrough formatting from an external document does not preserve the strikethrough style when pasted into the Confluence editor.","key":"CONFSERVER-97899","url":"https://jira.atlassian.com/browse/CONFSERVER-97899","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCopying and pasting text with strikethrough formatting from an external document does not preserve the strikethrough style when pasted into the Confluence editor.\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Steps to Reproduce\r\n\r\n* Create a .doc file in an editor like Microsoft Word or Google Docs.  \r\n* Add some text and apply strikethrough formatting.  \r\n* Copy and paste strikethrough text into a new page in Confluence Data Center.\r\n\r\nh3. Expected Results\r\n\r\nThe strikethrough is preserved.  \r\n\r\nh3. Actual Results\r\n\r\nStrikethrough formatting is not applied in the Confluence editor when copied, even though there is strikethrough formatting available.  Other formatting is preserved (Italic, underline, etc).\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2024-09-09T15:34:26.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Jira project name with special characters (ex: \"<>&) incorrectly displayed via Jira Issue/Filter","key":"CONFSERVER-97656","url":"https://jira.atlassian.com/browse/CONFSERVER-97656","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile the project name from Jira contains any of the special characters (ex: \"<>&), it will be displayed incorrectly via Jira Issue/Filter on the Confluence page. \r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Install Confluence, and Jira, and setup the [application links|https://confluence.atlassian.com/doc/linking-to-another-application-360677690.html] between Confluence and Jira. \r\n # On the Jira side:\r\n ## Create a Jira project with a special character (ex: &) as the project name (ex: A&B).\r\n ## Create one or several sample issues in the project. \r\n # On the Confluence side:\r\n ## Create a new page\r\n ## Insert a *Jira Issue/Filter* macro. \r\n ## In the search area, search the newly created project (ex:  project=\"AB\"). \r\n ## In the {*}Display options{*}, add *Project* as a column to display. \r\n ## Click the *Insert* button to insert the macro and the *Save* button to save the page to display the result on the Confluence page. \r\n\r\n(i) Please refer to the screen video about how to reproduce the issue. \r\n\r\n[^Steps_to_reproduce.mov]\r\nh3. Expected Results\r\n\r\nIn the *Project* column, it should display *A&B* as the project name. (/)\r\nh3. Actual Results\r\n\r\nIn the *Project* column, it displays the project name as the screenshot below. (x)\r\n{code:java}\r\nA&amp;B\r\n{code}\r\n!image-2024-08-07-15-14-01-395.png|width=530,height=228!\r\n\r\nPlease refer to the mapping table below while using the affected character:\r\n{code:java}\r\n\" becomes &quot;\r\n< becomes &lt;\r\n> becomes &gt;\r\n& becomes &amp;\r\n{code}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior to display {*}A&B{*}. But the *Jira Project Name* can be changed to avoid using these characters as the steps below:\r\n # On Jira, navigate to *Projects* > *View All Projects* > select the affected project (ex: A&B)\r\n # Click *Project settings* as a *wheel icon* > *Details* \r\n # In the *Name* field, change the Project Name as you desired (ex: A and B)","createDate":"2024-08-07T13:26:00.000+0000","comments":[{"text":"We are affected by this bug as our teams quite heavly use the special characters in Jira projects. For us these are not only display issues as we use tables to also generate charts. The problem we stumbled across is that at some point the rendering of the special chars works, which leads to inconsitencies in data, thus rendering the charts useless, as they cannot be displayed correctly. This is quite a problem since we have loads of projects with the \"&\" symbol in them.","author":"Hannes Medwed"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"},{"text":"Will this be backported to 9.2.x?","author":"Jason Kemp"}]},{"summary":"Umlauts characters do not show in PDF macro","key":"CONFSERVER-97646","url":"https://jira.atlassian.com/browse/CONFSERVER-97646","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen using a PDF file that content has umlauts, those chars are not displayed in the slide.\r\n\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Add a PDF file to a page\r\n # Add the PDF macro, so it shows the file in slides\r\n\r\nh3. Expected Results\r\nAll characters are shown, when opening the file from Confluence.\r\n\r\nh3. Actual Results\r\nUmlauts are shown as spaces:\r\n !image-2024-08-07-00-56-48-805.png|thumbnail! \r\n\r\nh3. Workaround\r\nNo workaround available","createDate":"2024-08-06T22:57:09.000+0000","comments":[{"text":"This issue was marked as fixed without further information.\r\n\r\nWe're running Confluence v8.5.20 and still facing the problem.\r\n\r\nAny details about fixing the issue would be great!","author":"Sebastian Breitkopf"}]},{"summary":"Attempting to create a Personal space while incremental/background indexing is already flushing/committing data can lead to a slowdown in indexing rates","key":"CONFSERVER-97286","url":"https://jira.atlassian.com/browse/CONFSERVER-97286","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence's incremental/background indexing can occasionally come under some processing load while attempting to flush newly indexed data. This is visible as slowly increasing _Queued for processing_ numbers under _Administration_ > _Content Indexing_ > _Content queue_ OR {_}Change queue{_}. This is normal, and is something that Confluence generally overcomes on its own (given enough time, and a sufficiently suitable dip in content-creation/modification rates). \r\n\r\n{_}However{_}, if a user attempts creating a _Personal space_ in that same timeframe, the sequence of events involved while executing the {{/create-personal-space}} action also include an _immediate_ index-queue flush operation. The index-queue flush operation involves acquiring a lock on the desired index before data is written/committed to it. With incremental/background indexing already in progress (and occasionally stressed with a few pending objects to index), the {{/create-personal-space}} action can end up waiting indefinitely for a lock to execute its own one-time index-queue flush. \r\n\r\nThe situation can worsen if a few more users attempt the creation of their own _Personal spaces_ in that same timeframe. Then, each {{/create-personal-space}} action will attempt executing its own one-time index-queue flush, going through the same motions of waiting to lock the desired index while other threads are still flushing/committing data to that same index.\r\nThis sub-optimal lock-acquisition behavior then results in bringing down the overall indexing rates, which in turn show up as:\r\n - constantly high (hundreds of thousands) _Queued for processing_ numbers under _Administration_ > _Content Indexing_ > _Content queue_ OR _Change queue_\r\n - inaccurate search results (newly created/modified Confluence content is not yet searchable)\r\n\r\n \r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n\r\n(Similar to [CONFSERVER-90319|https://jira.atlassian.com/browse/CONFSERVER-90319])\r\n # Setup a Confluence instance and try to push a lot of content (create new pages, comments etc.) using any kind of automation (plugins or REST API scripts).\r\n # Ensure that the _Queued for processing_ numbers under _Administration_ > _Content Indexing_ > _Content queue_ OR _Change queue_ are in the thousands.\r\n # Attempt creating a new _Personal space_ via _Spaces_ > _Create space_\r\n\r\nh3. Expected Results\r\n\r\nProvided that a _Personal space_ does not already exist for the user account in question, a new _Personal space_ should be created in a matter of a few seconds.\r\nOnce created, content posted to that space should be searchable after a reasonable time (generally a few minutes) once the existing backlog of pending items have been indexed.\r\nh3. Actual Results\r\n\r\nThe _Personal space_ creation action executes an immediate one-time index-queue flush, which in turns waits for the acquisition of a lock. \r\nAdd a few more concurrent _Personal space_ creation actions, along with a sufficiently large and active indexing backlog, and the incremental/background indexing pace will slow down to a crawl from adhering to lock re-acquisition routines.\r\n\r\nThe runtime of the http thread that triggered the _Personal space_ creation may eventually exceed Tomcat's {{StuckThreadDetectionValve}} default threshold of 60 seconds. \r\nThat will show up in the instance's {{<confluence-install-dir>/logs/catalina.*}} log:\r\n{code:bash|title=thread \"http-nio-8090-exec-10\" (for /rest/create-dialog/1.0/space-blueprint/create-personal-space) running for more than 60 seconds}\r\nDD-Mmm-YYYY HH:MM:SS.mmm WARNING [Catalina-utility-2] org.apache.catalina.valves.StuckThreadDetectionValve.notifyStuckThreadDetected Thread [http-nio-8090-exec-10 url: /rest/create-dialog/1.0/space-blueprint/create-personal-space; user: test_user] (id=[5700]) has been active for [69,400] milliseconds (since [MM/DD/YY HH:MM AM/PM]) to serve the same request for [https://<BaseURLWithContext>/rest/create-dialog/1.0/space-blueprint/create-personal-space] and may be stuck (configured threshold for this StuckThreadDetectionValve is [60] seconds). There is/are [1] thread(s) in total that are monitored by this Valve and may be stuck.\r\n\tjava.lang.Throwable\r\n\t\tat sun.misc.Unsafe.park(Native Method)\r\n\t\t\r\n\t\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)\r\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:870)\r\n\t\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1199)\r\n\t\tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:209)\r\n\t\tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:285)\r\n\t\t\r\n\t\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:68)\r\n\t\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:62)\r\n\t\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.tryLockSingleIndex(LuceneIncrementalIndexManager.java:245)\r\n\t\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.flushQueue(LuceneIncrementalIndexManager.java:123)\r\n{code}\r\n*note* - in extreme cases, this (and similar) thread(s) may eventually terminate successfully only multiple _hours_ later, for which corresponding {{notifyStuckThreadCompleted}} entries will also be recorded \r\n\r\n[Thread dumps|https://confluence.atlassian.com/conf85/generating-a-thread-dump-1283361539.html] will show other such operations waiting on the thread that has successfully acquired the lock and is currently flushing/committing data to the index:\r\n{code:bash|title=single thread dump from one instant in time, showing thread \"http-nio-8090-exec-10\" waiting on thread \" http-nio-8090-exec-55\" (runnable) to acquire a lock}\r\n\"http-nio-8090-exec-10 url: /rest/create-dialog/1.0/space-blueprint/create-personal-space; user: test_user\" daemon prio=5 tid=0x000000000000d5f4 nid=0 waiting on condition \r\n   \r\n   java.lang.Thread.State: WAITING (parking)\r\n\t\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t\r\n\t- parking to wait for <0x00000000752228d6> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\r\n\t owned by http-nio-8090-exec-55 url: /rest/create-dialog/1.0/space-blueprint/create-personal-space; user: test_user2 id=0x0000000000001650\r\n\t\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:870)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1199)\r\n\tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:209)\r\n\tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:285)\r\n\t\r\n\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:68)\r\n\tat com.atlassian.confluence.internal.index.lucene.DefaultIndexLockService.lock(DefaultIndexLockService.java:62)\r\n\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.tryLockSingleIndex(LuceneIncrementalIndexManager.java:245)\r\n\tat com.atlassian.confluence.search.lucene.LuceneIncrementalIndexManager.flushQueue(LuceneIncrementalIndexManager.java:123)\r\n{code}\r\n\r\nh3. Workaround\r\n[Set|https://confluence.atlassian.com/doc/configuring-system-properties-168002854.html] the following system property to control/specify the amount of time (in minutes) that a Confluence thread may wait for, in order to acquire a lock on a desired index:\r\n{code:bash}\r\n-Dconfluence.index.manager.lock.timeout=1\r\n{code}\r\nThis will permit contending threads to timeout a lock-acquisition attempt, and allow for the continuance of normal app functioning. \r\nNewly-created space-data will automatically get picked up by the scheduled ({{Caesium}} - based) incremental/background indexer threads in due time, and there is no need to interrupt the normal processing of indexing lines and force an immediate/out-of-sequence index-flush.","createDate":"2024-08-01T12:44:52.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.19. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Garvit Sharma"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.1. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Garvit Sharma"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.3.1. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/doc/confluence-9-3-release-notes-1489808886.html] to see what other issues are resolved.","author":"Garvit Sharma"},{"text":"The fix was implemented in Confluence version 8.5.19 and in the release/18.5 branch of the public.plugin. However, the updated version of public.plugin for release/18.5 was not released or bundled with Confluence 8.5.19. As a result, the fix is not effective in Confluence 8.5.19. Removed the fix version 8.5.19.\r\n\r\n","author":"Garvit Sharma"}]},{"summary":"The create button is smaller now, unnamed for users with only view access in a space (including Anonymous).","key":"CONFSERVER-96560","url":"https://jira.atlassian.com/browse/CONFSERVER-96560","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe create button is smaller now, unnamed for either Anonymous users with view access and/or authenticated users with only view access in a space.\r\n\r\nThis is reproducible on Data Center: (yes) \r\nh3. Steps to Reproduce\r\n\r\nh6. On Confluence \r\n* Login as admin\r\n* Go to General Configuration > Global Permissions > Edit Permissions and enable can use for Anonymous Access and save the changes.  Alternatively, you can use an authenticated user who only has view access in a space.\r\n* Go to any space and click on space tools\r\n* Go to permissions and click on edit permissions\r\n* For Anonymous Access deselect all the checkboxes and only keep the view selected and save the changes.  Or, make sure the authenticated user you're testing with only has *view* access.\r\n\r\nh6. As an Anonymous user \r\n* Now logout from Confluence and click on the Confluence logo at the top left corner \r\nAfter clicking you will land on #all-updates page\r\n* Now go to any page from the space that we edited earlier providing view privileges for Anonymous Access\r\n* It's observed that the create page button just becomes a dark blue square box and there is nothing mentioned on the box unless we click on the box\r\n\r\nh6. As an Authenticated user \r\n* Now go to any page from the space that we edited earlier providing view privileges\r\n* It's observed that the \"Create\" page button just becomes a dark blue square box and there is nothing mentioned on the box unless we click on the box\r\n\r\nh3. Expected Results\r\n\r\nThe create page button just becomes a dark blue square box and there is nothing mentioned on the box unless we click on the box\r\n\r\nh3. Actual Results\r\n\r\nThe create button should be visible as it used to be on Confluence v8.5.12\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-07-24T13:43:41.000+0000","comments":[{"text":"The issue is r{*}eproduced for any user (not only anonymous){*} in the next scenario:\r\n\r\nThe user has \"create\" permissions on some spaces and only \"view\" permissions on the space they are viewing the page on.","author":"Maxim Leizerovich"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.3.1. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"This issue is not fixed in the LTS version. It would be better to have it on LTS 9.2 as well. ","author":"Revati Anvekar"},{"text":"The \"Create from template\" button is broken and visible to users who do not have permission to create a page within a Confluence Space, and the users are able to click on the button.\r\n\r\nThis issue persists for users with only *View* permission in a Space in Confluence 9.2.2.\r\n\r\nAny roadmap for implementing this bug fix in LTS 9.2.2 version?","author":"Jeevitha"}]},{"summary":"Flush Edge Index Queue Job transaction runs for several days halting edge index processing.","key":"CONFSERVER-95982","url":"https://jira.atlassian.com/browse/CONFSERVER-95982","type":"Bug","priority":"","description":"h3. Issue Summary\r\nFlush Edge Index Queue Job transaction runs for several days and so edge index processing is halted. \r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Create few large page trees under Confluence(Eg 5 large page trees with 10K child pages each)\r\n # Change the permissions across these parent pages and toggle these few times. Try out 10 different iterations. \r\n\r\nh3. Expected Results\r\nFlush Edge Index Queue Job queues these changes and processes them in batches one by one.\r\n\r\nh3. Actual Results\r\nFlush Edge Index Queue Job pushes these changes to the same session time and again causing the entities managed by hibernate session to grow. If the sessions entities grew really large in small amount of time, this can cause recursive behaviour(hibernate dirty check mechanism which would walk through each entity) where the transaction would never complete and so this directly impacts edge index processing under Confluence. In this specific case, we could see hibernate was trying to work with 1,090,303 entityEntries as a part of [flushEntities method|https://github.com/hibernate/hibernate-orm/blob/main/hibernate-core/src/main/java/org/hibernate/event/internal/AbstractFlushingEventListener.java] based on heap dumps. \r\n\r\nh3. Workaround\r\n\r\n Copy indexes from the working node manually.  ","createDate":"2024-06-13T16:02:28.000+0000","comments":[]},{"summary":"Reindex throws an error: 1000 sub pages: ORA-01795: maximum number of expressions in a list is 1000","key":"CONFSERVER-95968","url":"https://jira.atlassian.com/browse/CONFSERVER-95968","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence integrated with Oracle Database will throw the following error:\r\n\r\n{noformat}\r\nORA-01795: maximum number of expressions in a list is 1000\r\n{noformat}\r\n\r\nThis is reproducible on Data Center: Yes\r\n\r\nh3. Steps to Reproduce\r\n\r\n*Scenario 1* - when the page tree depth exceeds 1000.\r\n\r\n # Create a _nested_ page tree depth exceeding 1000 pages, e.g.\r\n # Page 1 » Page 2 » Page 3 .... » Page 1000 » Page 1001\r\n\r\n*Scenario 2* - when the number of ancestor pages exceeds 1000.\r\n\r\nh3. Expected Results\r\n\r\nNo exceptions should appear in the logs.\r\n\r\nh3. Actual Results\r\n\r\nThe below exceptions are thrown:\r\n\r\n{noformat:title=atlassian-confluence.log}\r\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:195)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:374)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.execute(HibernateTemplate.java:320)\r\n\tat com.atlassian.confluence.security.persistence.dao.hibernate.HibernateContentPermissionSetDao.getInheritedContentPermissionSets(HibernateContentPermissionSetDao.java:85)\r\n\tat com.atlassian.confluence.core.DefaultInheritedContentPermissionManager.getInheritedContentPermissionSets(DefaultInheritedContentPermissionManager.java:44)\r\n\tat com.atlassian.confluence.core.DefaultInheritedContentPermissionManager.getInheritedContentPermissionSetsIncludeEdit(DefaultInheritedContentPermissionManager.java:37)\r\n\tat com.atlassian.confluence.impl.security.CachingInheritedContentPermissionManager.lambda$getInheritedContentPermissionSets$2(CachingInheritedContentPermissionManager.java:96)\r\n\tat com.atlassian.confluence.impl.security.ContentPermissionSetCache.lambda$getOrLoad$0(ContentPermissionSetCache.java:41)\r\n\tat com.atlassian.confluence.cache.CacheOperations.lambda$get$0(CacheOperations.java:172)\r\n\tat java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1220)\r\n\tat com.atlassian.confluence.cache.CacheOperations.get(CacheOperations.java:172)\r\n\tat com.atlassian.confluence.cache.DeferredOperationsCache.getOrLoad(DeferredOperationsCache.java:92)\r\n\tat com.atlassian.confluence.cache.DeferredOperationsCache.get(DeferredOperationsCache.java:56)\r\n\tat com.atlassian.confluence.cache.TransactionalCacheFactory$TransactionalCache.get(TransactionalCacheFactory.java:346)\r\n\tat com.atlassian.confluence.impl.cache.tx.TransactionAwareCache$1.get(TransactionAwareCache.java:43)\r\n\tat com.atlassian.confluence.impl.security.ContentPermissionSetCache.getOrLoad(ContentPermissionSetCache.java:39)\r\n\tat com.atlassian.confluence.impl.security.CachingInheritedContentPermissionManager.getInheritedContentPermissionSets(CachingInheritedContentPermissionManager.java:96)\r\n\tat com.atlassian.confluence.impl.security.CachingInheritedContentPermissionManager.getInheritedContentPermissionSets(CachingInheritedContentPermissionManager.java:82)\r\n\tat com.atlassian.confluence.impl.search.v2.DefaultContentPermissionCalculator.getInheritedPermissions(DefaultContentPermissionCalculator.java:150)\r\n\tat com.atlassian.confluence.impl.search.v2.DefaultContentPermissionCalculator.calculate(DefaultContentPermissionCalculator.java:59)\r\n\tat com.atlassian.confluence.impl.search.v2.DefaultContentPermissionCalculator.calculate(DefaultContentPermissionCalculator.java:32)\r\n...\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)\r\n\tat org.hibernate.loader.Loader.getResultSet(Loader.java:2322)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:956)\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2868)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2850)\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2677)\r\n\tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\r\n\tat com.atlassian.confluence.security.persistence.dao.hibernate.HibernateContentPermissionSetDao.lambda$getInheritedContentPermissionSets$2(HibernateContentPermissionSetDao.java:114)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:367)\r\n\t... 85 more\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-01795: maximum number of expressions in a list is 1000\r\n...\r\naused by: Error : 1795, Position : 326, Sql = select contentper0_.ID as id1_21_, contentper0_.CONT_PERM_TYPE as cont_perm_type2_21_, contentper0_.CONTENT_ID as content_id3_21_, contentper0_.CREATIONDATE as creationdate4_21_, contentper0_.LASTMODDATE as lastmoddate5_21_ from CONTENT_PERM_SET contentper0_ where contentper0_.CONT_PERM_TYPE=:1  and (contentper0_.CONTENT_ID in (:2  , :3 .... :1000  , :1001  , :1002 )).....\r\n{noformat}\r\n\r\n{noformat:title=atlassian-confluence-index.log}\r\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\tat org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:195)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:374)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.execute(HibernateTemplate.java:320)\r\n\tat com.atlassian.confluence.security.persistence.dao.hibernate.HibernateContentPermissionSetDao.getInheritedContentPermissionSets(HibernateContentPermissionSetDao.java:123)\r\n\tat com.atlassian.confluence.impl.search.v2.extractor.ContentPermissionsBulkExtractor.extractAll(ContentPermissionsBulkExtractor.java:63)\r\n\tat com.atlassian.confluence.internal.index.lucene.BulkFieldPrefetcher.lambda$prefetch$1(BulkFieldPrefetcher.java:75)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat com.atlassian.confluence.internal.index.lucene.BulkFieldPrefetcher.prefetch(BulkFieldPrefetcher.java:73)\r\n\tat com.atlassian.confluence.internal.index.lucene.BulkFieldPrefetcher.prefetch(BulkFieldPrefetcher.java:60)\r\n\tat com.atlassian.confluence.internal.index.lucene.BulkFieldPrefetcher.createPrefetchedDocumentBuilder(BulkFieldPrefetcher.java:48)\r\n...\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n...\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\r\n\tat com.atlassian.confluence.security.persistence.dao.hibernate.HibernateContentPermissionSetDao.getContentPermissionSets(HibernateContentPermissionSetDao.java:168)\r\n\tat com.atlassian.confluence.security.persistence.dao.hibernate.HibernateContentPermissionSetDao.lambda$getInheritedContentPermissionSets$6(HibernateContentPermissionSetDao.java:136)\r\n\tat org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:367)\r\n\t... 31 more\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-01795: maximum number of expressions in a list is 1000\r\n...\r\nCaused by: Error : 1795, Position : 895, Sql = select contentper0_.ID as id1_21_0_, contentper1_.ID as id1_20_1_, contentper0_.CONT_PERM_TYPE as cont_perm_type2_21_0_, contentper0_.CONTENT_ID as content_id3_21_0_, contentper0_.CREATIONDATE as creationdate4_21_0_, contentper0_.LASTMODDATE as lastmoddate5_21_0_, contentper1_.CP_TYPE as cp_type2_20_1_, contentper1_.USERNAME as username3_20_1_, contentper1_.GROUPNAME as groupname4_20_1_, contentper1_.CPS_ID as cps_id5_20_1_, contentper1_.CREATOR as creator6_20_1_, contentper1_.CREATIONDATE as creationdate7_20_1_, contentper1_.LASTMODIFIER as lastmodifier8_20_1_, contentper1_.LASTMODDATE as lastmoddate9_20_1_, contentper1_.CPS_ID as cps_id5_20_0__, contentper1_.ID as id1_20_0__ from CONTENT_PERM_SET contentper0_, CONTENT_PERM contentper1_, CONTENT contentent2_ where contentper0_.ID=contentper1_.CPS_ID(+) and contentper0_.CONTENT_ID=contentent2_.CONTENTID and (contentper0_.CONTENT_ID in (:1  , :2   ... :19595  , :19596  , :19597  , :19598 )),\r\n{noformat}\r\n\r\nh3. Diagnosis\r\n\r\nRun this query to identify all pages with a page tree depth >= 1000.\r\n\r\n{noformat:title=Find all pages with page depth >= 1000}\r\nselect CONCAT('<confluence-base-url>/pages/viewpage.action?pageId=', descendentid) as pageURL, count(*) as pagedepth from confancestors group by descendentid having count(*) >= 1000 order by pagedepth desc\r\n{noformat}\r\n\r\n{noformat:title=Example SQL output}\r\nPAGEURL                                                   PAGEDEPTH \r\n--------------------------------------------------------- --------- \r\n<confluence-base-url>/pages/viewpage.action?pageId=918506 1002      \r\n<confluence-base-url>/pages/viewpage.action?pageId=918505 1001      \r\n<confluence-base-url>/pages/viewpage.action?pageId=918504 1000      \r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nh4. *For Scenario 1* - when the page tree depth exceeds 1000.\r\n\r\nIn *Space Tools*, move/re-order the pages so the maximum page tree depth does not exceed 1000 sub-pages in depth.\r\n\r\nh4. *For Scenario 2* - when the number of ancestor pages exceeds 1000.\r\n\r\nCheck whether the following JVM flags are present with high values:\r\n\r\n{code}\r\n-Dconfluence.reindex.attachments.to.pop (Default value is 20)\r\n-Dconfluence.reindex.documents.to.pop (Default value is 10)\r\n{code}\r\n\r\nIf the above JVM flags are present, try lowering the custom assigned value or deleting the JVM flag to revert to default values.","createDate":"2024-06-12T03:17:57.000+0000","comments":[{"text":"we are in 8.5.19, we are effected with this bug. over 19k parent pages with more than 1k child pages. splitting manually its not possible. can we get a patch for this please?","author":"Subramanyam Aregala"}]},{"summary":"Clicking \"Create blog post\" from \"Blog posts\" macro results in error","key":"CONFSERVER-95894","url":"https://jira.atlassian.com/browse/CONFSERVER-95894","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Create a test page and insert *\"Blog Post\"* macro >> Publish\r\n # Under the macro \"Blog stream\" click on *\"Create blog post\"* button\r\n # An error is thrown{color:#de350b} _\"Your request could not be processed because a required security token was not present in the request. You may need to re-submit the form or reload the page.\"_{color}\r\n\r\nh3. Expected Results\r\n\r\nA blog post should be created without any error when clicking \"Create blog post\" from Blog post macro\r\nh3. Actual Results\r\n\r\nWhen clicking \"Create blog post\" from Blog post macro an error appears:\r\n{noformat}\r\n\"Your request could not be processed because a required security token was not present in the request. You may need to re-submit the form or reload the page.\" {noformat}\r\nh3. Workaround\r\n\r\nUse the \"Create\" button from the top navigation bar to create a blog post instead","createDate":"2024-05-27T08:47:08.000+0000","comments":[{"text":"Hi,\r\n\r\nwe also have the same problem. The reason for this is apparently a new “atl_token”. This must be included in the URL!\r\nA “=” was forgotten in the standard scenario buttons for the blogs...\r\n\r\nExample action-URL when clicking on the button:\r\n[https://.../pages/createblogpost.action?spaceKey=XXX&atl_tokene129a8b90671b5be58cff4d86afdbef130376973|https://...spacekey&atl_tokene129a8b90671b5be58cff4d86afdbef130376973/]\r\n\r\nCorrect would be:\r\n[https://.../pages/createblogpost.action?spaceKey=XXX&atl_token=e129a8b90671b5be58cff4d86afdbef130376973|https://...spacekey&atl_token=e129a8b90671b5be58cff4d86afdbef130376973/]\r\n\r\nIs there a way to deactivate the atl_token or to include it in the URL for your own links?","author":"Dennis Nickel"},{"text":"Hello,\r\n\r\nI am having this same issue. When I click to add a blog post the URL does not include the &alt_token at all.  If I add \"&alt_token=.......\" to the end, then it allows me to add a new blog post. \r\n\r\nThis function used to work fine, does anyone know what has caused this?\r\n\r\nThank you. ","author":"Jessica Hicks"},{"text":"Hello we are also affected confluence DC 8.9.6","author":"Enrico Jr. Rongavilla"},{"text":"We have the same issue, DC 8.9.8. Missing the \"=\".","author":"Robin Powell"},{"text":"Confluence 9.x is also affected.\r\n\r\nA workaround, if using HAProxy, would be a rule to add the missing \"=\":\r\n\r\nacl is_createblogpost path_beg /pages/createblogpost.action\r\nhttp-request set-query %[query,regsub(&atl_token=?,&atl_token=,g)] if is_createblogpost\r\n\r\n ","author":"MabInternet001"},{"text":"Confluence 9.2.2 is affected as well. We hope for a fix soon, as some of our users utilize the Blog posts macro a lot.","author":"Niklas Becker"}]},{"summary":"Benefits modal : Carousel not programmatically determined","key":"CONFSERVER-95875","url":"https://jira.atlassian.com/browse/CONFSERVER-95875","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDynamically updating the slides is not communicated with screen reader users.\r\nh3. Steps to Reproduce\r\n # Open the homepage.\r\n # Kindly log in with the credentials\r\n # Observe that a \"Check out what's changed in Confluence\" modal dialog appears on the page.\r\n # Using a screen reader, navigate to the carousel present in the dialog.\r\n # Listen that the region consisting of a carousel is not identified.\r\n # Activate the carousel controls.\r\n # Observe that slides in the carousel change but this is not announced.\r\n\r\nh3. Screen Recording \r\n\r\n[^Screen Recording 2024-05-22 at 4.26.08 PM.mov]\r\nh3. Actual Results\r\n\r\nOn activating the carousel controls, the content of the respective slide gets dynamically updated. Although the dynamic change in the content is easier to understand for sighted users, it is not intuitive for screen reader users. Moreover, the region consisting of the carousel is not programmatically determined. As a result, screen reader users will not be able to identify the presence of the carousel and find it difficult to understand the behaviour.\r\nh3. Expected Results\r\n\r\nThe region consisting of the carousel should be identified with a screen reader. Also, the screen reader should announce the change of slides when users activate the carousel controls.\r\n \r\nApply the following changes :\r\n• Add role \"region\" and aria-label=\"Carousel\" attribute to the <div> element containing the carousel content.\r\n• Add role=\"status\" to the <div> tag containing the carousel content to ensure that the screen reader announces the updated content.\r\n \r\nFor more information on the carousel, visit [https://www.w3.org/WAI/ARIA/apg/example-index/carousel/carousel-1-prev-next|https://www.w3.org/WAI/ARIA/apg/patterns/carousel/examples/carousel-1-prev-next/]\r\nh3. Workaround\r\n\r\nNot available\r\nh3. Environment\r\n\r\nMacBook Pro (13-inch, 2018)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 109.0.5414.119 (Official Build) (64-bit)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2024-05-22T10:58:59.000+0000","comments":[]},{"summary":"Benefits modal : Inappropriate label for the button","key":"CONFSERVER-95874","url":"https://jira.atlassian.com/browse/CONFSERVER-95874","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe labels have been provided inappropriately for the “Next“, and \"back\" buttons.\r\nh3. Steps to Reproduce\r\n # Open the homepage.\r\n # Kindly log in with the credentials\r\n # Observe that a \"Check out what's changed in Confluence\" modal dialog appears on the page.\r\n # Navigate and activate the \"Next\" button.\r\n # Using the screen reader, navigate to the mentioned buttons.\r\n # Listen that the button label is inappropriate.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2024-05-22 at 4.11.30 PM.png|width=591,height=327!\r\nh3. Actual Results\r\n\r\nThe Inappropriate labels such as \"Back\", and \"Next\" are specified for the \"Previous slide\", and \"Next slide\" buttons. Additionally, the \"Close\" label is provided for the \"Back slide\" button inappropriayely.\r\n\r\nAs a result, screen reader users will find it difficult to understand the button's purpose.\r\nh3. Expected Results\r\n\r\nThe screen reader should announce a unique and appropriate label for the button.\r\n\r\nSpecify appropriate labels such as \"Previous slide\", \"Next slide\", and \"back\" for the \"Back\", \"Next\", and \"Close\" button respectively, using hidden text or the \"aria-label\" attribute.\r\nh3. Code Snippet\r\n{code:java}\r\n<button aria-label=\"Next slide\" class=\"css-mv5jou\" tabindex=\"0\" type=\"button\">\r\n<span class=\"css-178ag6o\">Next</span>\r\n</button>{code}\r\nh3. Workaround\r\n\r\nNot available\r\nh3. Environment\r\n\r\nMacBook Pro (13-inch, 2018)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 109.0.5414.119 (Official Build) (64-bit)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest\r\n\r\n ","createDate":"2024-05-22T10:39:58.000+0000","comments":[]},{"summary":"Advanced Roadmap planner macro export to PDF not working","key":"CONFSERVER-95813","url":"https://jira.atlassian.com/browse/CONFSERVER-95813","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen exporting a page on the new editor with the Advanced Roadmap Planner inside it to PDF, the Advanced Roadmap Planner macro is not showing up in the export.\r\nh3. Steps to Reproduce\r\n # Open a page with the Advanced Roadmap Planner macro;\r\n # Export the page to PDF;\r\n # Notice that the file will be blank where the macro was supposed to be in.\r\n\r\nh3. Expected Results\r\n\r\nThe Advanced Roadmap Planner macro should show up in the output PDF file\r\nh3. Actual Results\r\n\r\nThe macro is not showing in the output PDF file\r\nh3. Workaround\r\n * No workaround available at the moment","createDate":"2024-05-14T09:36:09.000+0000","comments":[]},{"summary":"Editing the title of a page with many incoming links is very slow","key":"CONFSERVER-95804","url":"https://jira.atlassian.com/browse/CONFSERVER-95804","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter changing the title of a page with many incoming links, saving is very slow.\r\nBy my test it takes over 1 minute, if there 1000 pages have links to the page.\r\n\r\nBy the report from customer, it will take over 4 mins to get page saved. Especially, when timeout happens, it is hard for customer to know if the page saved or not.\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Create a target page with title of (Editing Title Test)\r\n # Using script create 1000 pages , each of them contains page to the target page\r\n # Change the title of the target page ( Title Test >> Editing Title Test A)\r\n # Click 'Update' to save the page\r\n\r\nh3. Expected Results\r\n\r\nThe target page should be saved soon, without performance problem\r\nh3. Actual Results\r\n\r\nSaving process is very slow. By my test it takes over 1 minute.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-13T01:08:57.000+0000","comments":[{"text":"Hello,\r\n\r\nConfluence 8.5.5 is also impacted, and for a page of 19 000 links, it doesn't even save.","author":"Guy COURONNE"}]},{"summary":"Cannot save pages after copying date stamps from Jira","key":"CONFSERVER-95628","url":"https://jira.atlassian.com/browse/CONFSERVER-95628","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nConfluence cannot save a page when copying data from a Jira \"Date and Time Picker\" field / Jira issue search and pasting it into a Confluence page.\r\n\r\nThe following error is observed in the *atlassian-confluence.log* file:\r\n{code:java|title=atlassian-confluence.log}\r\n2024-06-28 14:38:09,296 WARN [http-nio-6854-exec-4 url: /rest/api/content/6946819; user: admin] [content.render.xhtml.DefaultFormatConverter] validateAndConvertToStorageFormat XhtmlException converting editor format to storage format. Turn on debug level logging to see editor format data.\r\n -- url: /rest/api/content/6946819 | userName: admin | referer: http://localhost:8090/pages/resumedraft.action?draftId=6946820&draftShareId=9abf3a3c-8323-47b4-be2f-5353a9dd14dc& | traceId: e03e488be556b684\r\ncom.atlassian.confluence.content.render.xhtml.XhtmlException: RuntimeException occurred while transforming editor format to storage format (com.atlassian.confluence.content.render.xhtml.XhtmlException: An error occurred due to invalid date time format during unmarshalling a time from storage format.)\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.EditorXhtmlTransformer.lambda$transform$0(EditorXhtmlTransformer.java:58)\r\n\tat com.atlassian.confluence.content.render.xhtml.StaxUtils.processWrappedWstxExceptionOrTrowMapped(StaxUtils.java:470)\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.EditorXhtmlTransformer.transform(EditorXhtmlTransformer.java:58)\r\n\tat com.atlassian.confluence.content.render.xhtml.TransformerChain.transform(TransformerChain.java:38)\r\n\tat com.atlassian.confluence.content.render.xhtml.TransformerChain.transform(TransformerChain.java:38)\r\n\tat com.atlassian.confluence.content.render.xhtml.PluggableTransformerChain.transform(PluggableTransformerChain.java:42)\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.DefaultEditorConverter.convert(DefaultEditorConverter.java:37)\r\n\tat com.atlassian.confluence.content.render.xhtml.DefaultFormatConverter.convertToStorageFormat(DefaultFormatConverter.java:123)\r\n\tat com.atlassian.confluence.content.render.xhtml.DefaultFormatConverter.validateAndConvertToStorageFormat(DefaultFormatConverter.java:73)\r\n\tat com.atlassian.confluence.api.impl.service.content.ContentBodyConversionManagerImpl.computeConvertedValue(ContentBodyConversionManagerImpl.java:163)\r\n\t[...]\r\nCaused by: java.lang.RuntimeException: com.atlassian.confluence.content.render.xhtml.XhtmlException: An error occurred due to invalid date time format during unmarshalling a time from storage format.\r\n\tat com.atlassian.confluence.content.render.xhtml.transformers.ThrowExceptionOnFragmentTransformationError.handle(ThrowExceptionOnFragmentTransformationError.java:14)\r\n\tat com.atlassian.confluence.content.render.xhtml.transformers.DefaultFragmentTransformer.transformFragment(DefaultFragmentTransformer.java:157)\r\n\tat com.atlassian.confluence.content.render.xhtml.transformers.DefaultFragmentTransformer.transform(DefaultFragmentTransformer.java:123)\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.EditorXhtmlTransformer.transform(EditorXhtmlTransformer.java:45)\r\n\t... 430 more\r\nCaused by: com.atlassian.confluence.content.render.xhtml.XhtmlException: An error occurred due to invalid date time format during unmarshalling a time from storage format.\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.time.EditorTimeUnmarshaller.unmarshal(EditorTimeUnmarshaller.java:32)\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.time.EditorTimeUnmarshaller.unmarshal(EditorTimeUnmarshaller.java:19)\r\n\tat com.atlassian.confluence.content.render.xhtml.UnmarshalMarshalFragmentTransformer.transform(UnmarshalMarshalFragmentTransformer.java:28)\r\n\tat com.atlassian.confluence.content.render.xhtml.transformers.DefaultFragmentTransformer.transformFragment(DefaultFragmentTransformer.java:141)\r\n\t... 432 more\r\nCaused by: java.lang.IllegalArgumentException: Invalid format: \"2024-02-20T09:30:18+1100\" is malformed at \"T09:30:18+1100\"\r\n\tat org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:953)\r\n\tat com.atlassian.confluence.content.render.xhtml.model.time.Time.parseDate(Time.java:66)\r\n\tat com.atlassian.confluence.content.render.xhtml.model.time.Time.<init>(Time.java:26)\r\n\tat com.atlassian.confluence.content.render.xhtml.editor.time.EditorTimeUnmarshaller.unmarshal(EditorTimeUnmarshaller.java:28)\r\n\t... 435 more\r\n{code}\r\nh3. Environment\r\n\r\n.\r\nh3. Steps to Reproduce\r\n * Copy a date from a Jira \"Date and Time Picker\" field and paste it into a Confluence page\r\n * Copy a date from the Jira search screen, and paste it into a Confluence page\r\n\r\n!CONFSERVER-95628-1.png|thumbnail!\r\n\r\n!CONFSERVER-95628-2.png|thumbnail!\r\nh3. Expected Results\r\n\r\nThe date is pasted into the page, and the page can be successfully saved and published\r\nh3. Actual Results\r\n\r\nThe page cannot be saved/edit, with the below error presented in the UI:\r\n!CONFSERVER-95628-3.png|thumbnail!\r\n{code:java}\r\nUnable to save the draft page with an error occurred due to invalid date time format during unmarshalling a time from storage format.)\r\n{code}\r\nh3. Workaround\r\n\r\nManually selecting the dates using the Confluence date picker:\r\n\r\n!CONFSERVER-95628-4.png|thumbnail!","createDate":"2024-05-01T20:20:08.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Insert link: search options are not announced by screen reader.","key":"CONFSERVER-95287","url":"https://jira.atlassian.com/browse/CONFSERVER-95287","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen user type in “Search” field, The search results are dynamically updates but not announced for the screen reader.users. \r\nh3. Steps to Reproduce\r\n # Open the “Confluence version 8.5.6” home page.\r\n # Navigate to the “Create” button and activate it.\r\n # Observe that in the editor mode there is a “Insert Link” button to add link, activate it.\r\n # Observe that “Insert link” modal dialog is observed.\r\n # Navigate to the “Search” menuitem and activate it.\r\n # Using screen reader activate the “Search” input field.\r\n # Now type in the “search” input field and observe the suggestions are being updated dynamically.\r\n # The mechanism is easy to understand visually but using screen reader the suggestion are not announced.\r\n\r\nh3. Screen Recording\r\n{quote}\r\nh3. [^Screen Recording 2024-04-01 at 2.34.51 PM (1).mov]\r\n{quote}\r\nh3. Actual Results\r\n\r\nWhen inserting a link from the editor toolbar -> “Insert More Content” -> “Link”, the search options are not announced for the screen reader users when user press up/down arrow keys to navigate.\r\n\r\nThis makes it difficult for screen reader users to understand the options.\r\nh3. Expected Results\r\n\r\nWhen user type in the mentioned input fields the search results/Suggestions should announced for the screen reader users when user press up/down arrow keys.\r\n\r\nWe can achieve this by modifying it as editable combobox.\r\n * Provide role combobox and other aria attributes to the input field.\r\n\r\n * Provide role listbox to the list of options and associate them to this input field using appropriate aria attributes.\r\n\r\nFor more information on implementation, refer to the following link: [!https://www.w3.org/favicon.ico!Editable Combobox With List Autocomplete Example|https://www.w3.org/WAI/ARIA/apg/patterns/combobox/examples/combobox-autocomplete-list/]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-18T10:49:02.000+0000","comments":[{"text":"Status: Not fixed.\r\n\r\nEnv:[https://instenv-370431-8mbh.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=852035&draftShareId=2a4988ad-1fb7-4ad2-89ac-aa72e0cb8266&] \r\n\r\nObservation: The list of suggested links that appears on typing any character in the \"Search\" input field are still not declared as an editable combobox.\r\n\r\nThe best possible solution in this scenario would be to refactor this component into an editable combobox. \r\n\r\nOn the combobox, use role=\"combobox\". Where possible, expand a native <input>. Make sure that the <input> is labelled. This can be done with <label> or aria-labelledby. Use aria-expanded to differentiate when the listbox is expanded and collapsed. As well, use aria-activedescendant to programmatically determine the active option. This attribute uses the id of the active option. On the listbox, use role=\"listbox\". Where possible, expand a list container such as <ul>. On the options, use role=\"option\". Where possible, expand <li>. As well, use aria-selected to differentiate of the active and inactive options.\r\n\r\nMake sure that the component can be controlled with a keyboard. The standard approach is that users tab onto the combobox and use Arrow Keys to adjust the listbox. This can be done in parallel with the aforementioned aria-activedescendant and aria-selected.\r\n\r\nFor more information, you can refer \"  \"[https://www.w3.org/WAI/ARIA/apg/patterns/combobox/] \"\r\n\r\n*Code Snippet*\r\n\r\n{{<label for=\"ex\">Search links</label>}}\r\n\r\n{{<input id=\"ex\" type=\"search\" role=\"combobox\" aria-activedescendant=\"01\" aria-autocomplete=\"list\" aria-expanded=\"true\" aria-controls=\"results\" aria-haspopup=\"listbox\" ...>}}\r\n\r\n{{<ul id=\"results\" role=\"listbox\" aria-label=\"links list\">}}\r\n\r\n{{<li id=\"01\" role=\"option\" aria-selected=\"true\">...</li>}}\r\n\r\n{{<li id=\"02\" role=\"option\">...</li>}}\r\n\r\n{{...}}\r\n\r\n{{</ul>}}\r\n\r\n \r\n\r\nScreen recording: [^Edit - sample page - admin - Confluence - Google Chrome 2024-10-23 17-47-53.mp4]","author":"Cynthia Singh"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Entering \"465\" for mail server port does not enable SMTPS configurations","key":"CONFSERVER-95036","url":"https://jira.atlassian.com/browse/CONFSERVER-95036","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nEntering \"465\" for mail server port does not enable SMTPS configurations. This issue didn't exist in 7.19.x\r\n\r\nThe mail server properties in the bandana table show the following which is not correct:\r\n{code:java}\r\n <name>Mail Server</name>\r\n          <password>0000000</password>\r\n          <port>465</port>\r\n          <props>\r\n            <property name=\"mail.debug\" value=\"false\"/>\r\n            <property name=\"mail.transport.protocol\" value=\"smtp\"/>\r\n            <property name=\"mail.smtp.port\" value=\"465\"/>\r\n            <property name=\"mail.smtp.quitwait\" value=\"false\"/>\r\n            <property name=\"mail.null.auth\" value=\"false\"/>\r\n            <property name=\"mail.smtp.timeout\" value=\"10000\"/>\r\n            <property name=\"mail.smtp.auth\" value=\"true\"/>\r\n            <property name=\"mail.smtp.starttls.enable\" value=\"true\"/>\r\n            <property name=\"mail.smtp.host\" value=\"host_address\"/>\r\n            <property name=\"mail.smtp.connectiontimeout\" value=\"10000\"/>\r\n          </props> {code}\r\nAs the [javamail article|https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/package-summary.html] {{ _\"if you're using the \"smtps\" protocol to access SMTP over SSL, all the properties would be named \"mail.smtps.*\"._ which isn't happening in 8.5.7}}\r\nh3. Steps to Reproduce\r\n # Go to General configuration >> Mail server >> *Add a new SMTP mail server*\r\n # Enter the information for the mail server and use port *465* >> Save{*}{*}\r\n # Go back to *\"View Mail Servers\"* page, notice that it shows \"SMTP\" under protocol instead of SMTPS\r\n\r\n_Note: Performing the same steps on 7.19.x *DOES* show \"{*}SMTPS{*}\" under the *protocol* column in the *View Mail Servers* page._\r\n\r\n \r\nh3. Expected Results\r\n\r\nSMTPS protocol should be used whenever the 465 port as in version 7.19.x (see screenshots) or a drop-down list should offer to choose SMTP or SECURE_SMTP when configuring a mail server similar to Jira\r\nh3. Actual Results\r\n\r\nUnable to use SMTPS even when entering the SMTPS port\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-03-29T13:40:46.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"StackOverflowError when exporting large pages to PDF","key":"CONFSERVER-94493","url":"https://jira.atlassian.com/browse/CONFSERVER-94493","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nExporting large pages to PDF leads to *StackOverflowError* even after setting high memory for stack size.\r\n\r\nThere is no proper pattern as to how large the page should be which will eventually lead to the error when exported to PDF.\r\nh3. Steps to Reproduce\r\n # Increase the stack size to 100 MB (as an example)\r\n{code:java}\r\nCATALINA_OPTS=\"-Dconversion.sandbox.stack.limit.megabytes=100 ${CATALINA_OPTS}\" {code}\r\n\r\n # Create a large page with 1000+ lines (as an example)\r\n # Export the page to PDF.\r\n\r\nh3. Expected Results\r\n * It is expected that the PDF export of the page completes successfully\r\n\r\nh3. Actual Results\r\n * PDF export leads to error - StackOverflowError\r\n{code:java}\r\n2024-02-13 10:53:04,164 ERROR [http-nio-8090-exec-3 url: /confluence/500page.jsp; user: admin] [atlassian.confluence.status.SystemErrorInformationLogger] logException Unhandled exception 5e1dd2bf-75a0-4512-8952-c9815ae1d012: Method \\\"execute\\\" failed for object com.atlassian.confluence.extra.flyingpdf.impl.ExportPageAsPdfAction@744cb65f\r\n -- traceId: 0b1b919166770a56\r\nognl.MethodFailedException: Method \"execute\" failed for object com.atlassian.confluence.extra.flyingpdf.impl.ExportPageAsPdfAction@744cb65f [java.lang.StackOverflowError]\r\nCaused by: java.lang.StackOverflowError\r\n        at java.base/java.io.ObjectOutputStream.writeClassDesc(ObjectOutputStream.java:1217)\r\n        at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1418)\r\n        at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1169)\r\n        at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1543)\r\n        at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1500)\r\n        at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1423)\r\n        at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1169)\r\n        at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1543) {code}\r\n\r\nh3. Workaround\r\n\r\nWe need to delete the data from the page and then export the page to PDF. As mentioned earlier, there is no fixed pattern of how much data (number of lines) to be retained on the page, we should follow a trial and error approach.","createDate":"2024-02-13T11:23:09.000+0000","comments":[{"text":"Hi,\r\n\r\nwe have this issue on 8.5.15 also.\r\n\r\nBest regards\r\n\r\nVladislav Kolář","author":"Vladislav Kolář"}]},{"summary":"Confluence is throwing error about CSSParser in the logs while sharing a page","key":"CONFSERVER-93635","url":"https://jira.atlassian.com/browse/CONFSERVER-93635","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter upgrading Confluence 8.5.X to 8.6.X, Confluence is throwing errors about \"CSSParser\" while a page is being shared automatically or manually.\r\n\r\nDespite the error message, the notification will still manage to reach the recipient. However, since the error is thrown every time \"NotificationSender\" picks up a page, Confluence logs will get filled up with similar error messages quickly and create unnecessary noise.\r\n\r\n(i) This issue is not replicable on version 8.5.X\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Set up Confluence 8.6.x\r\n # Set up an SMTP mail server\r\n # Share any page in Confluence to a user or email address\r\n ** The page can even be a blank page, or simply a page with 1 line of text.\r\n\r\nh3. Expected Results\r\n\r\nConfluence will not return any error about the page share action, considering all the required fields are filled correctly.\r\nh3. Actual Results\r\n\r\nConfluence returns errors about \"CSSParser\" about the page share action.\r\n\r\nThe below exception is thrown in the {{atlassian-confluence.log}} file:\r\n{noformat}\r\n2023-12-13 06:17:42,078 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSParser] noprop PARSING noprop ERROR | should be empty\r\n -- url: /rest/api/content/1703937 | userName: admin | referer: https://instenv-213827-pyco.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=1703937&draftShareId=ee6ef3ab-cae0-41b9-a881-dfd38b9e0ecb& | traceId: ccf4291cfb3d4e9b\r\n2023-12-13 06:17:42,078 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSParser] declaration PARSING declaration ERROR | consume until SEMICOLON, RCURLY\r\n -- url: /rest/api/content/1703937 | userName: admin | referer: https://instenv-213827-pyco.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=1703937&draftShareId=ee6ef3ab-cae0-41b9-a881-dfd38b9e0ecb& | traceId: ccf4291cfb3d4e9b\r\n{noformat}\r\nh3. Workaround\r\n\r\nTo suppress the error messages:\r\n+Via \"Logging and Profiling\"+\r\n # Go to \"Logging and Profiling\" in the admin menu\r\n # Add \"cz.vutbr.web\" to the list via the text box under \"Add New Entry\"\r\n # Set logging level to \"FATAL\"\r\n # Click on \"Add Entry\"\r\n # Click \"Save\" (bottom of the \"Logging and Profiling\" page)\r\n # Refer [Configuring Logging|https://confluence.atlassian.com/conf89/configuring-logging-1387596331.html] documentation for more details regarding logging configuration in Confluence\r\n\r\n+Via \"log4j.properties\" file+\r\n # Open up the {{/confluence/WEB-INF/classes/log4j.properties}} file\r\n # Add the following line to the file:\r\n{code:java}\r\nlog4j.logger.cz.vutbr.web=FATAL \r\n{code}\r\n\r\n # Save the file\r\n # Apply the same changes to the rest of the nodes\r\n # Perform a rolling Confluence restart","createDate":"2023-12-13T06:31:45.000+0000","comments":[{"text":"Presumably we could hide the offending logging by setting the package 'web.csskit.antlr4' to OFF or FATAL?","author":"Simon Tost [TNG]"},{"text":"Our log is also full of these errors:\r\n{code:java}\r\n2024-01-08 11:57:07,938 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAttemptingFullContext CSSErrorListener full context | 2024-01-08 11:57:07,939 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAmbiguity CSSErrorListener ambiguity | 2024-01-08 11:57:07,940 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAttemptingFullContext CSSErrorListener full context | 2024-01-08 11:57:07,941 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSErrorListener] reportAmbiguity CSSErrorListener ambiguity | 2024-01-08 11:57:07,987 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSParser] noprop PARSING noprop ERROR | should be empty2024-01-08 11:57:07,988 ERROR [NotificationSender:thread-1] [web.csskit.antlr4.CSSParser] declaration PARSING declaration ERROR | consume until SEMICOLON, RCURLY {code}\r\nWe are on Confluence 8.6.2","author":"Julian Bauer"},{"text":"it is also on 8.7.2.","author":"Shpio"},{"text":"We have the same issue in Confluence DC 8.9.2","author":"serge calderara"},{"text":"Similar error messages appear in the Confluence log when we send notification emails in our application through the notification component built into Confluence:\r\n\r\n{code:java}\r\n[web.csskit.antlr4.CSSErrorListener] syntaxError CSSErrorListener syntaxError | extraneous input '$' expecting {INVALID_STRING, INVALID_STATEMENT, IDENT, ATKEYWORD, CLASSKEYWORD, STRING, UNCLOSED_STRING, HASH, NUMBER, PERCENTAGE, DIMENSION, URI, UNCLOSED_URI, UNIRANGE, ';', ':', ',', '?', '%', '=', '/', '>', '<', '{', '}', '(', '[', '!', '-', '+', '*', S, 'expression(', FUNCTION, '~=', '|='}\r\n{code}\r\nWe noticed that the problem is in _templates/email/html/includes/constants.vm_ file, since it contains some syntax errors and a missing css variable (used by other vm files).\r\n\r\nWe had to replace this line:\r\n{code:java}\r\n#set ($menuSeparatorColour = \"var(--ds-border, #bbb\"){code}\r\n to\r\n{code:java}\r\n#set ($menuSeparatorColour = \"var(--ds-border, #bbb)\"){code}\r\nand \r\n{code:java}\r\n#set ($auiWarningBorderColour = \"var(--ds-border-warning, #f7df92\")){code}\r\nto\r\n{code:java}\r\n#set ($auiWarningBorderColour = \"var(--ds-border-warning, #f7df92)\"){code}\r\nand add missing varible\r\n{code:java}\r\n#set ($menuTxtColour = \"var(--ds-text, #000000)\"){code}\r\n \r\n\r\nIn our case, this helped and maybe also provides a guideline in uncovering the original problem.","author":"Gergely Juhász [Midori]"},{"text":"This is still present in Confluence 9.0.3","author":"Francisco Villar Romasanta"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.0. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Quan Pham"}]},{"summary":"TinyMCE Code causing Nested Spans from Copy and Paste","key":"CONFSERVER-93559","url":"https://jira.atlassian.com/browse/CONFSERVER-93559","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*The fix for this bug will be released to our Long Term Support release.*\r\n\r\nThe fix for this bug has been approved for backport and will be available in an upcoming 8.5 release of Confluence. Check the fix-version field for details.\r\n{panel}\r\n{panel:title=23 August 2024 Update|borderStyle=solid|borderColor=#6554c0|titleBGColor=#6554c0|bgColor=#eae6ff}\r\nWith the fix released by the upstream vendor, we're now investigating how to get that fix back to the version of TinyMCE used in our Confluence 8.5 LTS. Unfortunately with the options made available to us, we're having  to investigate backporting the entire editor to this LTS release, which is potentially a breaking change. We're working on it and will provide updates as we have them.\r\n\r\nNote that a separate but related improvement was made as part of [CONFSERVER-54754: Page with excessive nested span tags causes Synchrony to stop working (fixed in Confluence Data Center 8.4.0, 7.19.15)|https://jira.atlassian.com/browse/CONFSERVER-54754] that has already been backported to LTS releases.\r\n{panel}\r\nh3. Issue Summary\r\n\r\nNested spans still created in some scenarios even after [CONFSERVER-54754|https://jira.atlassian.com/browse/CONFSERVER-54754] patch causing a stack overflow for Synchrony. According to development this is a bug in TinyMCE code that needs to be fixed by TinyMCE.\r\nh3. Steps to Reproduce\r\n\r\nReproduction steps vary.\r\nh3. Expected Results\r\n\r\nConfluence should flatten nested spans.\r\nh3. Actual Results\r\n\r\nNested spans are allowed and cause a stack overflow for Synchrony\r\nh3. Workaround\r\n # Install Confluence Source Code Editor\r\n ** [https://marketplace.atlassian.com/plugins/com.atlassian.confluence.plugins.editor.confluence-source-editor/server/overview]\r\n # Edit the page, then click the {{Source Editor}} icon to edit the page source\r\n # Search for the stack of nested tags\r\n # Once identified, remove all nested {{<span></span>}} tags between the {{<p>}} and {{</p>}} tags\r\n # Save Page\r\n\r\nAlternately, the {{remove formatting}} editor option can be used to strip out all the formatting including these span tags.","createDate":"2023-12-07T16:38:19.000+0000","comments":[{"text":"8.6.2 Confluence version is affected","author":"Viktoria Boiko"},{"text":"Confluence 7.19.20.0 is affected.","author":"Dhinesh Govindasamy"},{"text":"Confluence 7.19.22 is affected.","author":"sypt.song"},{"text":"A fix for this issue is available in Confluence Data Center 9.0.1.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.0+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"James Whitehead"},{"text":"Hi All,\r\n\r\nI've provided an update around backporting this change in the note in the summary of the ticket.\r\n\r\nThe short answer is we're working on it, but it's a bit of a beast.\r\n\r\nWe'll update when we have more to share.\r\n\r\nThanks,\r\nJames Ponting\r\nEngineering Manager - Confluence Data Center","author":"James Ponting"},{"text":"Does this fix also repair already affected pages?\r\nWe have Confluence Datacenter 8.5.12 but still have pages with a lot of <span> elements and therefore those pages cannot be edited.\r\nIs there another fix for that?\r\nThanks in advance.","author":"Jiraconfluence Solutionmgm sIT"},{"text":"Hi All,\r\n\r\nJust a quick note on this one.\r\n\r\nWe've completed the backport of this issue to our 8.5 LTS branch. The fix will be available as part of Confluence 8.5.18 which is due out in December.\r\n\r\n[~ff5dbf1888d4] - This fix we've deployed will resolve the duplicated tag issue in any page that can be loaded into the editor. Any page that is degraded to the point that it cannot be loaded will not be fixed by this change.\r\n\r\nThanks,\r\nJames Ponting\r\nEngineering Manager - Confluence Data Center","author":"James Ponting"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.18. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Quan Pham"}]},{"summary":"Create new page | Table : Disable state is not defined for toolbar","key":"CONFSERVER-93264","url":"https://jira.atlassian.com/browse/CONFSERVER-93264","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Create page | Table” page, the aria-disabled=” true” attribute is not defined for the toolbar.\r\nh3. Steps to Reproduce\r\n # Navigate to the above-mentioned page.\r\n # Add the table content in the main content area\r\n # Navigate to the main content area and press Shift + Tab key\r\n # Observe that the toolbar is disabled visually.\r\n\r\nh3. Screen Recording\r\n\r\n[^Screen Recording 2023-11-20 at 2.05.38 PM.mov]\r\nh3. Actual Results\r\n\r\nWhen the shift + tab is hit from the main content area, the toolbar visually seems to be disabled, but the toolbar section is not set as \"disable\" programmatically. As a result, users of screen readers won't comprehend the switch's disabled status. \r\nh3. Expected Results\r\n\r\nSet the HTML \"disabled\" attribute when the toolbar section is in the disabled state. Ensure that the attribute is removed when the section is in an active state.\r\n\r\nAlternatively, set the \"aria-disabled\" attribute to \"true\" when the section is in the disabled state. Ensure that the value of the \"aria-disabled\" attribute changes on user interaction via scripting.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. \r\nh3. Environment \r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS 113.5.2 (22G91)\r\nChrome - Version 118.0.5993.70 (Official Build) (x86_64)\r\nFirefox- Version 114.0 (64-bit)\r\nSafari- 16.6 (18615.3.12.11.2)\r\nJAWS- Version 2023.2306.38\r\nNVDA- Version 2022.2.2\r\nVoiceover - Version Latest","createDate":"2023-11-20T08:27:58.000+0000","comments":[{"text":"{*}Status{*}: Fixed\r\n\r\n{*}Env{*}: [https://instenv-370431-8mbh.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=852044&draftShareId=7334591b-81b7-409a-9ede-783d270c1425&]\r\n\r\n{*}Observation{*}: The elements of the toolbar no longer get disabled when Shift+tab key is pressed. They are always enabled.\r\n\r\n{*}Screen Recording{*}: [^Screen Recording 2024-10-17 at 4.47.36 PM.mov]","author":"Cynthia Singh"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Site backup fails with NullPointerException if external user directory definition has null value for some attributes such as autoAddGroups and ldap.group.dn attributes","key":"CONFSERVER-93216","url":"https://jira.atlassian.com/browse/CONFSERVER-93216","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn normal circumstances, the '{{{}autoAddGroups{}}}' attribute in '{{{}cwd_directory_attribute{}}}' table is only exists for '{_}*Read-only with Local Groups*{_}' type user directories when 'Default Group Memberships' field is field some value in the UI.\r\n\r\nWhen it is left empty for the '{_}*Read-only with Local Groups*{_}' type user directories, or for other user directory types ('Read-only', 'Read/write'), this attribute should not exist in the table. Cannot find how the data in the database level become in this way, but if '{{{}autoAddGroups{}}}' attribute is null, Site backup fails with *{{NullPointerException}}*\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Create an external user directory with '{_}*Read-only with Local Groups*{_}' type\r\n # Set its '{_}*Default Group Memberships*{_}' field.\r\n # Stop Confluence\r\n # Set the '{{{}autoAddGroups{}}}' attribute to null (in database level) for this user directory.\r\n # Start Confluence\r\n # Trigger a Site backup\r\n\r\nh3. Expected Results\r\n\r\nSite backup operation is completed without issues.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the '{*}{{atlassian-confluence.log}}{*}' file:\r\n{noformat}\r\n2023-11-13 16:03:00,547 TRACE [ConfluenceBackupRestoreManager:thread-6] [confluence.impl.backuprestore.ParallelTasksExecutor] waitUntilAllTasksComplete Waiting until the stage task exporting exporter PAGETEMPLATES finished\r\n2023-11-13 16:03:00,547 TRACE [ConfluenceBackupRestoreManager:thread-6] [confluence.impl.backuprestore.ParallelTasksExecutor] waitUntilAllTasksComplete The stage task exporting exporter PAGETEMPLATES has been finished\r\n2023-11-13 16:03:00,547 TRACE [ConfluenceBackupRestoreManager:thread-6] [confluence.impl.backuprestore.ParallelTasksExecutor] waitUntilAllTasksComplete Waiting until the stage task exporting exporter cwd_directory finished\r\n2023-11-13 16:03:00,548 DEBUG [ConfluenceBackupRestoreManager:thread-6] [impl.backuprestore.backup.AbstractBackupService] performBackup Start interrupting all tasks\r\n2023-11-13 16:03:00,549 DEBUG [ConfluenceBackupRestoreManager:thread-6] [backuprestore.backup.container.XmlBackupContainerWriter] close Closing zip streams and creating final zip Confluence-site-export-2023-11-13-16-02-59-164.xml.zip\r\n2023-11-13 16:03:02,536 WARN [backuprestore-site-backup:thread-7] [confluence.impl.hibernate.ConfluenceHibernateTransactionManager] doRollback Performing rollback. Transactions:\\n  ->[null]: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT,readOnly (Session #2023748934)\r\n -- url: /rest/api/backup-restore/backup/site | userName: admin | referer: https://<confluence-baseURL>/plugins/servlet/backup-and-restore/backup | traceId: d2690546456f85f3\r\n2023-11-13 16:03:02,544 WARN [ConfluenceBackupRestoreManager:thread-6] [confluence.impl.backuprestore.ConfluenceBackupRestoreManager] updateJobStateAfterCompletion Backup restore job BackupRestoreJob{id=53575684, jobOperation=BACKUP, jobScope=SITE, jobState=PROCESSING, createTime=2023-11-13T15:02:59Z, startProcessingTime=2023-11-13T15:02:59Z, finishProcessingTime=null, cancelTime=null, owner='admin', whoCancelledTheJob='null', errorMessage='null'} failed: java.util.concurrent.ExecutionException: java.lang.NullPointerException\r\n -- url: /rest/api/backup-restore/backup/site | userName: admin | referer: https://<confluence-baseURL>/plugins/servlet/backup-and-restore/backup | traceId: d2690546456f85f3\r\ncom.atlassian.confluence.backuprestore.exception.BackupRestoreException: java.util.concurrent.ExecutionException: java.lang.NullPointerException\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.SiteBackupService.doBackupSynchronously(SiteBackupService.java:112)\r\n\tat com.atlassian.confluence.impl.backuprestore.BackupRestoreJobRunner.runJobSynchronously(BackupRestoreJobRunner.java:54)\r\n\tat com.atlassian.confluence.impl.backuprestore.ConfluenceBackupRestoreManager.runJobAndUpdateJobProperties(ConfluenceBackupRestoreManager.java:271)\r\n\tat com.atlassian.confluence.impl.backuprestore.ConfluenceBackupRestoreManager.processJobsFromTheQueue(ConfluenceBackupRestoreManager.java:250)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.util.concurrent.ExecutionException: java.lang.NullPointerException\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat com.atlassian.confluence.impl.backuprestore.ParallelTasksExecutor.waitUntilAllTasksComplete(ParallelTasksExecutor.java:119)\r\n\tat com.atlassian.confluence.impl.backuprestore.ParallelTasksExecutor.waitUntilAllStageJobsComplete(ParallelTasksExecutor.java:92)\r\n\tat com.atlassian.confluence.impl.backuprestore.ParallelTasksExecutor.waitUntilAllStageJobsComplete(ParallelTasksExecutor.java:108)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.SiteBackupService.backupAllEntitiesAndAttachments(SiteBackupService.java:155)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.AbstractBackupService.performBackup(AbstractBackupService.java:75)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.SiteBackupService.doBackupSynchronously(SiteBackupService.java:96)\r\n\t... 9 more\r\nCaused by: java.lang.NullPointerException\r\n\tat java.base/java.util.Objects.requireNonNull(Objects.java:221)\r\n\tat java.base/java.util.stream.Collectors.lambda$uniqKeysMapAccumulator$1(Collectors.java:178)\r\n\tat java.base/java.util.stream.Collectors.lambda$groupingBy$53(Collectors.java:1136)\r\n\tat java.base/java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.converters.enrichment.AttributesEnrichment.getAttributeMapsGroupedById(AttributesEnrichment.java:69)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.converters.enrichment.AttributesEnrichment.enrichElements(AttributesEnrichment.java:46)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.converters.EntityWithAdditionalDataConverter.lambda$convertToObjectsReadyForSerialisation$0(EntityWithAdditionalDataConverter.java:28)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.converters.EntityWithAdditionalDataConverter.convertToObjectsReadyForSerialisation(EntityWithAdditionalDataConverter.java:28)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.site.GenericSiteExporter.getBatch(GenericSiteExporter.java:129)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.site.GenericSiteExporter.getFirstBatch(GenericSiteExporter.java:110)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.exporters.site.GenericSiteExporter.exportAllRecords(GenericSiteExporter.java:64)\r\n\tat com.atlassian.confluence.impl.backuprestore.backup.SiteBackupService.lambda$backupAllEntitiesAndAttachments$0(SiteBackupService.java:144)\r\n\t... 4 more\r\n{noformat}\r\nh3. Workaround\r\n # Shutdown Confluence\r\n # (!) Backup Confluence database and filesystem (home and installation directory)\r\n # Find the offending attribute record in the '{*}{{cwd_directory_attribute}}{*}' table and *delete* it\r\n(!) if there are multiple offending records, delete all of them. This can be either {{autoAddGroups}}, {{ldap.group.dn}} and {{ldap.user.dn}}\r\n # Start Confluence\r\n # Re-attempt a Site export.\r\n\r\n(i) If the issue persists, please raise a Support request and provide a Confluence {*}[Support ZIP|https://confluence.atlassian.com/support/create-a-support-zip-790796819.html]{*}.\r\nh4. Notes\r\n\r\nThe issue seems to occur also with other attributes such as ldap.group.dn and ldap.user.dn","createDate":"2023-11-13T15:36:53.000+0000","comments":[]},{"summary":"Excessive <ul><li> tags causing PDF Export to Fail and CPU spike","key":"CONFSERVER-93191","url":"https://jira.atlassian.com/browse/CONFSERVER-93191","type":"Bug","priority":"","description":"An unordered list created with excessive *<ul><li>* tags causes PDF generation to fail for the page\r\n * Sandbox crashes if sandbox process generation is enabled\r\n * OOM issue observed in the logs\r\n * CPU utilization> 100\r\n\r\nh2. Recreation Steps\r\n # Create a new page\r\n # Create an unordered list by pressing Tab multiple Times (storage format attached for sample page)\r\n!image-2023-11-05-15-23-35-302.png|width=465,height=105!\r\n # Create a PDF export\r\n # Issue can be reproduced irrespective of whether sandbox generation is enabled or disabled\r\n\r\nh3. Storage Format\r\n{code:java}\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li style=\"list-style-type: none;\">\r\n<ul>\r\n<li>Test Page</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul> {code}\r\nh2. Expected Results\r\n\r\nPDF export successful without issues\r\nh2. Actual Results\r\nh3. PDF generation fails with below error\r\n\r\n!image-2023-11-05-15-14-31-160.png|width=433,height=161!\r\nh3. CPU spikes\r\n\r\n!image-2023-11-05-15-18-07-054.png|width=544,height=103!\r\nh3. Error in the logs\r\n{code:java}\r\n -- url: /confluence/spaces/flyingpdf/pdfpageexport.action | userName: admin | referer: https://linux-56273.prod.atl-cd.net/confluence/display/PD/Test | traceId: 5b093dbebd82045c\r\n2023-11-05 09:47:34,167 ERROR [http-nio-8090-exec-3 url: /confluence/spaces/flyingpdf/pdfpageexport.action; user: admin] [apache.struts2.dispatcher.DefaultDispatcherErrorHandler] sendErrorResponse Exception occurred during processing request: co\r\nm.atlassian.confluence.importexport.ImportExportException: We couldn't complete your export. There was an error converting the page \\\"Test\\\". <a href=\\\"https://docs.atlassian.com/confluence/docs-86/PDF+export+in+Confluence+Data+Center\\\">Learn mo\r\nre</a>\r\n -- url: /confluence/spaces/flyingpdf/pdfpageexport.action | userName: admin | referer: https://linux-56273.prod.atl-cd.net/confluence/display/PD/Test | traceId: 5b093dbebd82045c\r\njava.lang.RuntimeException: com.atlassian.confluence.importexport.ImportExportException: We couldn't complete your export. There was an error converting the page \"Test\". <a href=\"https://docs.atlassian.com/confluence/docs-86/PDF+export+in+Confluence+Data+Center\">Learn more</a>\r\n        at com.atlassian.confluence.extra.flyingpdf.impl.ExportPageAsPdfAction.doExecute(ExportPageAsPdfAction.java:62)\r\n        at com.atlassian.confluence.extra.flyingpdf.impl.PdfExportSemaphore.run(PdfExportSemaphore.java:28)\r\n        at com.atlassian.confluence.extra.flyingpdf.impl.ExportPageAsPdfAction.execute(ExportPageAsPdfAction.java:34)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at ognl.OgnlRuntime.invokeMethodInsideSandbox(OgnlRuntime.java:1245)\r\n        at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:1230)\r\n        at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1958)\r\n        at ognl.ObjectMethodAccessor.callMethod(ObjectMethodAccessor.java:68)\r\n        at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethodWithDebugInfo(XWorkMethodAccessor.java:98)\r\n        at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethod(XWorkMethodAccessor.java:90)\r\n        at ognl.OgnlRuntime.callMethod(OgnlRuntime.java:2034)\r\n        at ognl.ASTMethod.getValueBody(ASTMethod.java:97)\r\n        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212)\r\n        at ognl.SimpleNode.getValue(SimpleNode.java:258)\r\n        at ognl.Ognl.getValue(Ognl.java:586)\r\n        at com.opensymphony.xwork2.ognl.OgnlUtil.ognlGet(OgnlUtil.java:602)\r\n        at com.opensymphony.xwork2.ognl.OgnlUtil.callMethod(OgnlUtil.java:578)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:434)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:307)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:259)\r\n        at com.atlassian.xwork.interceptors.XWorkProfilingInterceptor.intercept(XWorkProfilingInterceptor.java:16)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:256)\r\n        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:179)\r\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:99)\r\n        at com.atlassian.confluence.core.ConfluenceWorkflowInterceptor.intercept(ConfluenceWorkflowInterceptor.java:25)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.executeConditional(DefaultActionInvocation.java:299)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)\r\n        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)\r\n        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:99)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.executeConditional(DefaultActionInvocation.java:299)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)\r\n        at com.atlassian.confluence.security.interceptors.CaptchaInterceptor.intercept(CaptchaInterceptor.java:44)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:256)\r\n        at com.atlassian.xwork.interceptors.XWorkProfilingInterceptor.intercept(XWorkProfilingInterceptor.java:16)\r\n        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:256)\r\n        at com.atlassian.xwork.interceptors.XsrfTokenInterceptor.intercept(XsrfTokenInterceptor.java:117)\r\n        at com.atlassian.confluence.xwork.ConfluenceXsrfTokenInterceptor.intercept(ConfluenceXsrfTokenInterceptor.java:30)\r\n.\r\n.\r\n.\r\nCaused by: com.atlassian.confluence.importexport.ImportExportException: We couldn't complete your export. There was an error converting the page \"Test\". <a href=\"https://docs.atlassian.com/confluence/docs-86/PDF+export+in+Confluence+Data+Center\"\r\n>Learn more</a>\r\n        at com.atlassian.confluence.extra.flyingpdf.sandbox.SandboxXmlToPdfConverter.convertXhtmlToPdf(SandboxXmlToPdfConverter.java:95)\r\n        at com.atlassian.confluence.extra.flyingpdf.sandbox.SandboxPdfExporterService.renderPdf(SandboxPdfExporterService.java:354)\r\n        at com.atlassian.confluence.extra.flyingpdf.sandbox.SandboxPdfExporterService.createPdf(SandboxPdfExporterService.java:340)\r\n        at com.atlassian.confluence.extra.flyingpdf.sandbox.SandboxPdfExporterService.createPdfForPage(SandboxPdfExporterService.java:230)\r\n        at com.atlassian.confluence.extra.flyingpdf.impl.DelegatingPdfExporterService.createPdfForPage(DelegatingPdfExporterService.java:54)\r\n        at com.atlassian.confluence.extra.flyingpdf.impl.BigBrotherPdfExporterService.createPdfForPage(BigBrotherPdfExporterService.java:122)\r\n        at com.atlassian.confluence.extra.flyingpdf.impl.ExportPageAsPdfAction.doExecute(ExportPageAsPdfAction.java:41)\r\n        ... 459 more\r\nCaused by: com.atlassian.confluence.util.sandbox.SandboxCrashedException: Sandbox has crashed while serving the request\r\n        at com.atlassian.confluence.impl.util.sandbox.SandboxProcess.tryToThrowSpecificException(SandboxProcess.java:174)\r\n        at com.atlassian.confluence.impl.util.sandbox.SandboxProcess.execute(SandboxProcess.java:139)\r\n        at com.atlassian.confluence.impl.util.sandbox.SandboxLocalProcessPool.execute(SandboxLocalProcessPool.java:107)\r\n        at com.atlassian.confluence.impl.util.sandbox.ConfluenceSandboxPoolFactory$LazySandbox.execute(ConfluenceSandboxPoolFactory.java:70)\r\n        at com.atlassian.confluence.impl.util.sandbox.DefaultSandbox.execute(DefaultSandbox.java:36)\r\n        at com.atlassian.confluence.extra.flyingpdf.sandbox.PdfExportSandbox.execute(PdfExportSandbox.java:49)\r\n        at com.atlassian.confluence.extra.flyingpdf.sandbox.SandboxXmlToPdfConverter.convertXhtmlToPdf(SandboxXmlToPdfConverter.java:83)\r\n        ... 465 more\r\nCaused by: java.io.EOFException\r\n        at java.base/java.io.DataInputStream.readInt(DataInputStream.java:397)\r\n        at com.atlassian.confluence.impl.util.sandbox.SandboxMessage.receiveMessage(SandboxMessage.java:43)\r\n        at com.atlassian.confluence.impl.util.sandbox.SandboxProcess.receiveMessage(SandboxProcess.java:227)\r\n        at com.atlassian.confluence.impl.util.sandbox.SandboxProcess.execute(SandboxProcess.java:136)\r\n        ... 470 more\r\n{code}\r\nh2. Workaround\r\n # Install Confluence Source Code Editor\r\n ** [https://marketplace.atlassian.com/plugins/com.atlassian.confluence.plugins.editor.confluence-source-editor/server/overview]\r\n # Edit the page, then click the {{Source Editor}} icon to edit the page source\r\n # Search for the stack of <ul><li></ui></li> tags\r\n # Once identified, remove all nested <ul><li></ui></li>  tags \r\n # Save Page\r\n # Generate PDF","createDate":"2023-11-05T10:00:02.000+0000","comments":[]},{"summary":"Configure Sidebar: Textual description missing for image links","key":"CONFSERVER-92260","url":"https://jira.atlassian.com/browse/CONFSERVER-92260","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"Show Blog link\", \"Hide Blog link\", \"Show Analytics link\", \"Hide Analytics link\" and so on image links lack textual description.\r\nh3. Steps to Reproduce\r\n # Navigate to the sidebar.\r\n # Navigate to the \"Configure Sidebar\" link and activate it.\r\n # Using a screen reader, navigate to the mentioned image links.\r\n # Listen that the href value of these image links are announced and its purpose is not communicated.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-09-29 at 4.45.31 PM.png|width=352,height=171!\r\nh3. Actual Results\r\n\r\nThe \"Show Blog link\", \"Hide Blog link\", \"Show Analytics link\", \"Hide Analystic link\" and so on image links lack textual description. Screen readers announce the href value of links in the absence of appropriately defined textual descriptions. As a result, screen reader users will be unable to identify the purpose of these image links.\r\nh3. Expected Results\r\n\r\nEnsure that appropriate textual description for the image links such as \"Show Blog link\", \"Hide Blog link\", \"Show Analytics link\", \"Hide Analystic link\" and so on are provided and completely describes the purpose of these links.\r\nThe textual description can be provided by adding a visually hidden text using CSS within the <a> element.\r\nh3. Workaround\r\n\r\nNot available\r\nh3. Environment \r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS 13.4.1 (c) (22F770820d)\r\nChrome - Version 115.0.5790.170 (Official Build) (x86_64)\r\nFirefox- Version 114.0 (64-bit)\r\nSafari- Version 16.5.2 (18615.2.9.11.10)\r\nJAWS- Version 2023.2306.28\r\nNVDA- Version 2022.2.2\r\nVoiceover - Version Latest","createDate":"2023-09-29T11:13:26.000+0000","comments":[{"text":"Hi [~zxu2@atlassian.com]\r\nStatus: Fixed.\r\nTest ENV:\r\nhttps://bulldogwiki.stg.internal.atlassian.com/wiki/spaces/MRK/overview\r\nScreenshot:\r\n !screenshot-1.png|thumbnail! \r\nComment: This issue has been verified as fixed. As this ticket concentrates only on providing accessible names. And the below mentioned/associated issues will be covered in a separate task.","author":"Malleswara Rao Konthala"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Table of Contents is not rendered in page Preview mode","key":"CONFSERVER-91527","url":"https://jira.atlassian.com/browse/CONFSERVER-91527","type":"Bug","priority":"","description":"h3. Issue Summary\r\nTable of Contents is not rendered in page Preview mode.\r\n(i) Note: Issue doesn't occur for Table of Content Zone macro\r\n \r\nh3. Steps to Reproduce\r\n # Edit or create a page\r\n # Add a *Table of Contents* macro\r\n # Click Preview button\r\n\r\nh3. Expected Results\r\n\r\nTable of Content is rendered in preview mode\r\n !image-2023-09-15-09-53-02-107.png|thumbnail! \r\n\r\nh3. Actual Results\r\n\r\nTable of Content is not rendered\r\n !image-2023-09-15-09-54-39-296.png|thumbnail! \r\n{code}\r\n2023-09-15 07:50:06,179 ERROR [http-nio-8090-exec-13 url: /confluence/pages/rendercontent.action; user: admin] [content.render.xhtml.DefaultRenderer] renderWithoutMetrics Error rendering content for view: com.ctc.wstx.exc.WstxParsingException: Unexpected close tag </p>; expected </img>.\\n at [row,col {unknown-source}]: [1,1064]\r\n -- url: /confluence/pages/rendercontent.action | userName: admin | action: rendercontent | referer: https://linux-52180.prod.atl-cd.net/confluence/pages/copypage.action | traceId: 12671f3b20059d5f\r\njava.lang.RuntimeException: com.ctc.wstx.exc.WstxParsingException: Unexpected close tag </p>; expected </img>.\r\n at [row,col {unknown-source}]: [1,1064] {code}\r\n\r\nh4. Additional\r\nThe issue is caused by the {{rendercontent.action}} request that doesn't have a proper closing for the {{<img>}} tag.\r\n{code}\r\n<p><img class=\"editor-inline-macro\" src=\"https://linux-52180.prod.atl-cd.net/confluence/plugins/servlet/confluence/placeholder/macro?definition=e3RvY30&amp;locale=en_US&amp;version=2\" data-macro-name=\"toc\" data-macro-id=\"f3ee8063-1d5e-47a1-a48f-4ee4e6739ab7\" role=\"button\" aria-haspopup=\"true\" aria-label=\"toc macro\" data-macro-schema-version=\"1\" tabindex=\"0\"></p><h1>Test 1</h1><h2>Test1.1</h2><p><br /></p>\r\n{code}\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-09-15T07:58:28.000+0000","comments":[{"text":" [^Table of Contents - Product Development - Confluence - 22 September 2023.mp4] \r\n\r\nThis is a demo of the bug.","author":"Bernabe Theodore Costales III"},{"text":"We are also affected on Version 8.5.17 and 8.5.18.","author":"Fabian Haslwanter"},{"text":"Bug is also occurring on Confluence 9.2","author":"Fabian Haslwanter"}]},{"summary":"PDF space export never completes for large spaces","key":"CONFSERVER-91184","url":"https://jira.atlassian.com/browse/CONFSERVER-91184","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nPDF space export hangs at 99% completion for space with thousand of documents (3700 in my test)\r\nh3. Environment\r\n\r\nConfluence 7.19.12\r\nh3. Steps to Reproduce\r\n # Create a new Confluence space with space key *TROL*\r\n # Run the following loop to create 3700 pages in such space\r\n\r\n{code:java}\r\nfor ((i=1;i<3700;i++)) do curl -u admin:password -X POST -H 'Content-Type: application/json' -d '{\"type\":\"page\",\"title\":\"new page'$i'\",\r\n\"space\":{\"key\":\"TROL\"},\"body\":{\"storage\":{\"value\":\"<p>This is <br/> a new page number ${i}</p>\",\"representation\":\r\n\"storage\"}}}' https://confluence.atlassian.test/confluence/rest/api/content/ ; done >/dev/null 2>/dev/null & {code}\r\n # Start a PDF space export through *Space* *Tools->Export->PDF->Normal Export*\r\n\r\nh3. Expected Results\r\n\r\nThe PDF export completes and a download link is provided.\r\nh3. Actual Results\r\n\r\nThe PDF export hangs forever.\r\n\r\nConfluence application logs has the following error:\r\n{code:java}\r\n2023-08-29 10:25:28,151 ERROR [Long running task: PDF Space Export] [confluence.util.longrunning.ConfluenceAbstractLongRunningTask] run Long running task \"PDF Space Export\" failed to run. -- url: /confluence/spaces/flyingpdf/doflyingpdf.action | referer: https://confluence.atlassian.test/confluence/spaces/flyingpdf/flyingpdf.action?key=TROL | traceId: b38cee07ad805b93 | userName: admin | action: doflyingpdfjava.lang.StackOverflowError        at java.base/java.lang.reflect.InvocationTargetException.<init>(InvocationTargetException.java:73)        at jdk.internal.reflect.GeneratedMethodAccessor1481.invoke(Unknown Source)        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.base/java.lang.reflect.Method.invoke(Method.java:566) {code}\r\nh3. Workaround\r\n\r\nAdd the following [Java System properties|https://confluence.atlassian.com/doc/configuring-system-properties-168002854.html]:\r\n{code:java}\r\n-Xss8m -Dconversion.sandbox.stack.limit.megabytes=8{code}\r\nTo set the Stack Size for Tomcat running as a Windows service use the Thread Stack Size input field.\r\nh3. Notes\r\n\r\nAdding only *-Xss8m* is not sufficient as the export will fails again when attempting to generate the final PDF in the sandbox. For this reason *-Dconversion.sandbox.stack.limit.megabytes=8* is required","createDate":"2023-08-29T13:40:42.000+0000","comments":[]},{"summary":"Calendar: Content fails to reflow","key":"CONFSERVER-91140","url":"https://jira.atlassian.com/browse/CONFSERVER-91140","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nContent fails to reflow when viewed at 320 * 256-pixel resolution on the “Calendar\" page.\r\nh3. Steps to Reproduce\r\n # Navigate to the header and activate the \"Calendar\" link\r\n # Press the \"Command + Control + R\" key in Safari browser which will set the screen size to 320 X 256px.\r\n # Observe that reflow causes a loss of content and functionality.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-08-25 at 1.38.34 PM.png|width=289,height=179!\r\nh3. Actual Results\r\n\r\nWeb page content failed to reflow when viewed at 320*256 viewport size. The content in the main content area gets overlapped with other content.\r\nFor e.g. the content such as \"List\", \"Timeline\" tabs and \"Add Event\", \"Subscribe\" buttons gets overlapped.\r\nAs a result, this will result in low-vision users finding it difficult to access the content.\r\nh3. Expected Results\r\n\r\nEnsure that all the page content is visible when viewed at 320 * 256 viewport. Use relative units to define font and container sizes in CSS to ensure that the page's content reflows correctly when viewed at 320 * 256 viewport. In addition, use CSS media queries to display web page content correctly when viewed using different devices, such as mobile phones, tablets and so on.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour.\r\nh3. Environment \r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS 13.4.1 (c) (22F770820d)\r\nChrome - Version 115.0.5790.170 (Official Build) (x86_64)\r\nFirefox- Version 114.0 (64-bit)\r\nSafari- Version 16.5.2 (18615.2.9.11.10)\r\nJAWS- Version 2023.2306.28\r\nNVDA- Version 2022.2.2\r\nVoiceover - Version Latest","createDate":"2023-08-25T08:05:56.000+0000","comments":[{"text":"This instance is still reproducible.\r\n\r\n ","author":"Boju Ankith"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments : Textarea role defined inappropriately","key":"CONFSERVER-90910","url":"https://jira.atlassian.com/browse/CONFSERVER-90910","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the \"Comments | View inline comments\" page, the \"Reply\" input field inappropriately use textarea role.\r\nh3. Steps to Reproduce\r\n # Navigate onto the above mentioned page.\r\n # Navigate onto the \"Reply\" input field.\r\n # Inspect its code and functionality.\r\n # Observe that the functionality of the input field is unclear for Keyboard only and Screen reader users.\r\n # Note that the input field uses <textarea> element inappropriately.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-08-28 at 12.18.33 PM.png|width=274,height=133!\r\nh3. Actual Result\r\n\r\nWhen Keyboard only and Screen reader users navigate to the \"Reply\" form field and try to add an inline comment, they are not able to do so as the input field does not get expanded and the \"Save\" button is not available for them. As a result, it is not at all possible to reply to any inline comment for the users of a keyboard and a screen reader. That there is an input field to enter a comment and there is no \"Save\" button may confuse or mislead them.\r\nh3. Expected Results\r\n\r\nEvery functionality that is available for Mouse users, must be available for Keyboard only and assistive technology users as well. In this scenario, since activating the \"View inline comment\" button does not automatically expand the \"Reply\" popup, make sure that there is a button to do the same. Hence, we would recommend you to refactor this <textarea> element into a button and activating the button can then trigger the \"Reply\" popup.\r\n\r\nIf this is not possible due to any constrains, then make sure that you hide the input field for all users with CSS display: none. As well, provide a separate button element to activate the \"Reply\" popup.\r\n\r\nMake sure that the focus moves onto the \"Reply\" textarea when the \"Reply\" button is activated.\r\n\r\n*Code Snippet*\r\n{noformat}\r\n<button>Reply</button>{noformat}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Monterey Version 12.4\r\nChrome - Version 103.0.5060.134 (Official Build) (arm64)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.5 (17613.2.7.1.8)\r\nJAWS- Version 2023\r\nNVDA- Version 2023.3\r\nVoiceover - Version Latest","createDate":"2023-08-18T08:08:44.000+0000","comments":[{"text":"This issue is still reproducible.","author":"Nayan Kamble"},{"text":"Closed in scope of https://bulldog.internal.atlassian.com/browse/A11Y-355","author":"Iurii Besidka"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Create new page | mention: Dynamically updating results are inappropriately communicated to assistive technologies","key":"CONFSERVER-90818","url":"https://jira.atlassian.com/browse/CONFSERVER-90818","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe dynamically updating results is not communicated to the users of assistive technologies on accessing “@mentions” functionality. \r\nh3. Steps to Reproduce\r\n # Navigate to \"Create\" button present in header section.\r\n # After activating \"Create\" blank page template will appear on the screen.\r\n # Navigate to the \"Insert more content\" button and activate it.\r\n # Select the \"User mention\" option among them.\r\n # Type \"@\" mentions in the \"Rich text area\".\r\n # Start typing any name and check it.\r\n # Observe that few suggestions has been available below which are not accessible for the screen reader users.\r\n\r\nh3. Screenshot\r\n\r\n!image-2023-08-16-18-14-39-266.png|width=523,height=226!\r\nh3. Actual Results\r\n\r\nOn typing any character in the main content area preceded by an “@” symbol, the number of search results are not communicated. As well, this component cannot be adjusted with a keyboard, such as Up and Down arrow keys these options gets closed on interaction. This strange behaviour might mislead or confuse keyboard only and assistive technology users.\r\nh3. Expected Results\r\n\r\nStatus messages must be programmatically determined. To achieve this, use a polite live region, such as role=”status” and aria-atomic=”true” to ensure that the entire text node containing the number of results is always announced.\r\n\r\nMake sure that this component can be controlled with a keyboard. In this scenario, we would recommend you to modify this component in a manner such that users can use Up and Down Arrow keys to navigate amongst the options. They can then press Enter or Return key to select a particular option. Make sure that this instruction is included within the live region along with the number of search results.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<span role=\"status\" aria-atomic=\"true\">10 results found. Use Up and Down arrow keys to navigate amongst the options. Press Enter to select an option.</span>{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS Ventura Version 13.3.1\r\nChrome - Version 114.0.5735.198 (Official Build) (x86_64)\r\nFirefox- Version 112.0.1 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.11.23)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2023-08-16T11:10:55.000+0000","comments":[{"text":"*Status:* Not Fixed\r\n*Env:* [https://instenv-370431-8mbh.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=852035&draftShareId=2a4988ad-1fb7-4ad2-89ac-aa72e0cb8266&]\r\n*My Observation:* This issue is not fixed as when users navigate to the rich text area and add \"@ mention\" macro, the below available suggestions are not announced to screen reader users.\r\n*Screen Recording: [^Screen Recording 2024-10-21 at 7.46.37 AM.mov]*","author":"Sumit Wagh"},{"text":"Hey [~bb797b5e39e7] \r\n\r\n{*}Status{*}: Fixed\r\n\r\n{*}Observation{*}: This issue is fixed. While adding the user name using \"@\" the suggestions populated below are getting announced for screen reader users using down arrow key.\r\n\r\n*Screen Recording*\r\n\r\n[^Screen Recording 2025-03-26 at 12.33.51 PM.mov]","author":"Varsha Bansode"}]},{"summary":"Create new page | Keyboard shortcuts: Color alone used to distinguish links","key":"CONFSERVER-90806","url":"https://jira.atlassian.com/browse/CONFSERVER-90806","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe color alone is used for the links in the \"Keyboard Shortcuts\" modal dialog inappropriately.\r\n\r\n*Note:* Similar issue has been observed on \"Create Page | Insert Link\", \"Dashboard | My calenders\"\r\nh3. Steps to Reproduce\r\n # Navigate to \"Create\" button in the header section and activate it.\r\n # After activating \"Create\" blank page template will appear on the screen.\r\n # Navigate to \"Help\" button and activate it.\r\n # Observe that a modal dialog has been added on the page.\r\n # Navigate to the \"Editor Autoformatting\" button and activate it.\r\n # Check the link, it has only color to identify.\r\n\r\nh3. Screenshot 1\r\n\r\n!image-2023-08-16-07-35-28-620.png|width=511,height=250!\r\nh3. Screenshot 2\r\n\r\n!image-2023-08-16-08-02-19-211.png|width=516,height=238!\r\nh3. Screenshot 3\r\n\r\n!Screenshot 2023-08-24 at 12.54.06 PM.png|width=503,height=251!\r\nh3. Actual Results\r\n\r\nColor alone #0052CC is used to identify \"go to your editor settings\" link This link has a low contrast ratio of 2.1:1 with the surrounding text. This will make it difficult for low vision users and those with colorblindness to distinguish links within the block of text.\r\nh3. Expected Results\r\n\r\nTo make it easy for all users to recognize links the best practice is to persistently underline them or provide any other visual cue such as formatting the text as bold or italic. If the above solution is not feasible, change the color of links so that they have a contrast ratio of at least 3:1 with the surrounding text. Moreover, it is best practice to ensure that the underline appears not only when the mouse is hovered over the links but also when the links receive the keyboard focus.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS Ventura Version 13.3.1\r\nChrome - Version 114.0.5735.198 (Official Build) (x86_64)\r\nFirefox- Version 112.0.1 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.11.23)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2023-08-16T01:57:10.000+0000","comments":[{"text":"*Status:* Not Fixed\r\n*Env:* [https://instenv-370431-8mbh.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=852035&draftShareId=2a4988ad-1fb7-4ad2-89ac-aa72e0cb8266&]\r\n*My Observation:* This issue is not fixed as when users navigate to the mentioned links are with insufficient color contrast ratio of 2.7:1 and also without underline to the links.\r\n*Screenshot:*\r\n!image-2024-10-21-08-58-31-187.png|width=338,height=233!","author":"Sumit Wagh"},{"text":"Hi [~bb797b5e39e7] \r\n\r\nYes it's ok to fix only first two instances.\r\nThanks!","author":"Varsha Bansode"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Create new page: Illogical tab order","key":"CONFSERVER-90789","url":"https://jira.atlassian.com/browse/CONFSERVER-90789","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe tabbing order does not follow the visual order of the elements where the \"Invite people to edit with you\" button receives keyboard focus before the first interactive element.\r\nh3. Steps to Reproduce\r\n # Navigate to the header and activate the \"Create\" link.\r\n # Navigate to the main content area.\r\n # Tab through the section to observe that the tabbing order is not following the visual order of the elements as mentioned.\r\n\r\nh3. Screen Recording\r\n\r\n[^Screen Recording 2023-08-14 at 2.13.15 PM.mov]\r\nh3. Actual Results\r\n\r\nIllogical tabbing order is found on the page. The tabbing order does not follow the visual order of the elements. The interactive elements receive the keyboard focus in the following illogical order:\r\n # \"Profile picture for admin\" button\r\n # \"Invite people to edit with you\" button\r\n # Text format dropdown \r\n\r\nThis illogical tabbing order will create confusion for keyboard-only users.\r\nh3. Expected Results\r\n\r\nPlace the content of the webpage in the correct sequence in the source code as it appears visually. Move the content in the page source in the mentioned order to ensure that the content is available in the correct order. CSS can be used to maintain the presentation of the page.\r\n \r\n # \"Profile picture for admin\" button\r\n # Text format dropdown\r\n # \"Bold\" link\r\n\r\nh3. Workaround\r\n\r\nNot available\r\nh3. Environment \r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS 13.4.1 (c) (22F770820d)\r\nChrome - Version 115.0.5790.170 (Official Build) (x86_64)\r\nFirefox- Version 114.0 (64-bit)\r\nSafari- Version 16.5.2 (18615.2.9.11.10)\r\nJAWS- Version 2023.2306.28\r\nNVDA- Version 2022.2.2\r\nVoiceover - Version Latest","createDate":"2023-08-14T08:37:41.000+0000","comments":[{"text":"*Status:* Not Fixed\r\n*Env:* https://instenv-370431-8mbh.instenv.internal.atlassian.com/pages/resumedraft.action?draftId=852053&draftShareId=bbbfd569-bc11-476b-8d7d-bfd8fd768e61&\r\n*My Observation:* This issue is not fixed as when users navigate to the mentioned control, focus moves with illogical tabbing order. In this scenario, ensure that focus moves with logical tabbing order as per provided recommendation\r\n*Screen Recording: [^Screen Recording 2024-10-21 at 8.04.52 PM.mov]*","author":"Sumit Wagh"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Header : Expandable button has inappropriate reading order","key":"CONFSERVER-90658","url":"https://jira.atlassian.com/browse/CONFSERVER-90658","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe content associated with the “Notifications” expandable button in the header section does not have an appropriate reading order.\r\nh3. Steps to Reproduce\r\n # Navigate onto the above mentioned page.\r\n # Navigate onto the mentioned button with a screen reader and activate it.\r\n # Arrow down onto the expandable content from the button.\r\n # Note that the content associated with it is available at the main content area.\r\n\r\nh3. Screen Recording\r\n\r\n[^Screen Recording 2023-08-09 at 3.39.23 PM.mov]\r\nh3. Actual Results\r\n\r\nWhen the “Notification” button is expanded, the expanded content of this button is available at the end of the page for screen reader users. This is because this content is not coded directly after the button in the DOM. It is instead coded at the end of the page. This inappropriate reading order might disorient the users of screen readers. That the content is available at the end might confuse or mislead them.\r\nh3. Expected Results\r\n\r\nContent must have an appropriate reading order. Assistive technologies navigate content using the order in which elements appear in the DOM. Hence, make sure that the content is programmatically ordered in such a way that it provides an appropriate reading order to the users of assistive technologies. Make sure that the content that gets available on expanding the buttons is coded directly after the expandable buttons in the DOM. This will create an appropriate reading order for the users of assistive technologies. For instance, this will enable them to arrow down onto the expanded content when the buttons are expanded.\r\n\r\n*Code Snippet*\r\n{noformat}\r\n<button aria-expanded=\"true\">Notifications</button>\r\n<h2>Notifications</h2>{noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Monterey Version 12.4\r\nChrome - Version 103.0.5060.134 (Official Build) (arm64)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.5 (17613.2.7.1.8)\r\nJAWS- Version 2023\r\nNVDA- Version 2023.3\r\nVoiceover - Version Latest","createDate":"2023-08-08T10:26:42.000+0000","comments":[{"text":"This issue is still reproducible","author":"Nayan Kamble"},{"text":"Fixed here https://bulldog.internal.atlassian.com/browse/A11Y-339","author":"Serhii Panchenko"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.3.1. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"This PR will be reverted because of a bug, so need to redo.\r\n\r\nupd.\r\nWill be available in 9.4.0","author":"Serhii Panchenko"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"View Page: Unclear functionality of link","key":"CONFSERVER-90647","url":"https://jira.atlassian.com/browse/CONFSERVER-90647","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe functionality associated with \"View inline comment\" link is unclear for screen reader users.\r\nh3. Steps to Reproduce\r\n # Navigate to the \"Side bar\" and activate the page.\r\n # For example, activate the \"Test\" link.\r\n # Using screen reader, navigate to the \"View inline comment\" link and activate it.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-08-09 at 10.16.03 AM.png|width=251,height=133!\r\nh3. Actual Results\r\n\r\nThe functionality associated with \"View inline comment\" link is unclear for screen reader users. On activating the link, the content get updated dynamically below in main content area.\r\n\r\nAlthough the dynamic change in the content is easier to understand for sighted users, it is not intuitive for screen reader users.\r\nh3. Expected Results\r\n\r\nSet the keyboard focus to the beginning of the updated content using JavaScript .focus() method when users activate the link. Alternatively, provide the instructions before the link as \"On clicking the following link the content will update in main content area\".\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2023-08-07T10:13:23.000+0000","comments":[{"text":"This instance is still reproducible.\r\n\r\n ","author":"Boju Ankith"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Unclear functionality of a button","key":"CONFSERVER-90574","url":"https://jira.atlassian.com/browse/CONFSERVER-90574","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe functionality of the button such as “Reopen“ is unclear for the screen reader users.\r\nh3. Steps to Reproduce\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Using the screen reader, navigate to the \"show me\" button & activate it.\r\n # \"Resolved comments\" modal will appear.\r\n # Activate the mentioned button using Enter key.\r\n # Observe that the content gets updated with new content.\r\n # Try navigating through the new content and observe that the keyboard focus has moved to the beginning of the page.\r\n\r\nh3. Screenrecording\r\n\r\n[^Screen Recording 2023-08-07 at 5.10.49 PM.mov]\r\nh3. Actual Results\r\n\r\nThe functionality associated with the “Reopen” button, present in the modal (that becomes available on activating the “Show me” button) is Unclear for screen reader users. Visually, on activating the link, the content gets dynamically updated and the keyboard focus is not moving to the updated content. Although the dynamic change in the content is easier to understand for sighted users, it is not intuitive for screen reader users.\r\nh3. Expected Results\r\n\r\nProvide hidden instruction “Clicking on \"following button\" will update the content below.” Before the \"Reopen\" button to orient screen readers.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-08-04T12:45:21.000+0000","comments":[{"text":"This issue is still reproducible","author":"Nayan Kamble"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Focus moves inappropriately when user dismisses the modal dialog","key":"CONFSERVER-90564","url":"https://jira.atlassian.com/browse/CONFSERVER-90564","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a user closes the \"Resolved comments” modal dialog with the “close” button or ESC key, the focus moves inappropriately to the top of the page.\r\nh3. Steps to Reproduce\r\n # Navigate to \"Recent spaces\"\r\n # Navigate to the \"Test\" Page.\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Navigate to the \"resolve\" button & activate.\r\n # Observe a dialog appears.\r\n # Navigate to the “Cancel” button and observe that the focus moves to the top of the page.\r\n\r\nh3. Screenrecording\r\n\r\n[^Screen Recording 2023-08-04 at 7.06.40 PM.mov]\r\nh3. Actual Results\r\n\r\nWhen a user closes the mentioned modal dialog with the “close” button or ESC key, the focus moves incorrectly to the top of the page instead of the interactive element. As a result, keyboard-only and screen reader users need to pass the extra content to reach to the desired or previously interacted element. \r\nh3. Expected Results\r\n\r\nWhen the user dismisses the mentioned modal dialog with the “Cancel” button or ESC key, the focus should be set to the element that triggered the modal dialog.\r\n\r\nPlace the content of the webpage in a correct sequence in the source code as it appears visually.\r\n * The reading order in a screen-reader is based on the order of the HTML or XHTML elements in the Document Object Model, as it is the default tab order.This technique inserts new content into the DOM immediately following the element that was activated to trigger the script.\r\n * The triggering element must be a link or a button, and the script must be called from its onclick event. These elements are natively focusable, and their onclick event is device independent. Focus remains on the activated element and the new content, inserted after it, becomes the next thing in both the tab order and screen-reader reading order.\r\n\r\nRefer this link [Modal Dialogs|https://hello.atlassian.net/wiki/spaces/A11Y/pages/1104189919/Modal+Dialogs] for accessible modal implementation and detailed information\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-08-04T06:22:29.000+0000","comments":[{"text":"This issue is still reproducible.","author":"Nayan Kamble"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Missing visible label for form field","key":"CONFSERVER-90501","url":"https://jira.atlassian.com/browse/CONFSERVER-90501","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe input field such as \"Reply\" is missing a visible label.\r\n\r\n*Note:* Similar instance is found on \"Create new page- editor | Edit page\"\r\nh3. Steps to Reproduce\r\n # Navigate to the \"View Inline comment\" & activate it.\r\n # Type \"Comment\" in the text area.\r\n # Activate the Enter key using keyboard.\r\n # Observe that the content is not updated.\r\n\r\nh3. Screenshot 1:View Inline comment\r\n\r\n!Screenshot 2023-08-03 at 4.26.38 PM.png|width=407,height=235!\r\nh3. Screenshot 2: Create new page- editor | Edit page\r\n\r\n!Screenshot 2023-08-29 at 9.26.20 AM.png|width=408,height=203!\r\nh3. Actual Results\r\n\r\nWhen the screen reader user navigates onto the mentioned field, no label is announced for it.\r\n\r\nAs a result, screen reader users would not understand the purpose of the input field and they might find it difficult to interact with the unlabelled field.\r\n\r\nEven though placeholder text is present for the field, cognitively impaired users would not be able to understand the purpose of the input field.\r\nh3. Expected Results\r\n\r\nThere should be visible label present for mentioned input field using {{<label>}} element. A visible label such as \"Reply\"\r\n\r\nLabel and input fields should be explicitly associated via “for” attribute of <label> and “id” attribute of <input>. Make sure that the value of “for” and “id” attributes is same.\r\n\r\nVisible labels help all users to understand the purpose of a form element.\r\n\r\n*Note:* Before implementing any visual label please connect with the content design team to take a suggestion/approval from them as per business logic.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest\r\nh4.  ","createDate":"2023-08-01T07:42:26.000+0000","comments":[{"text":"This issue is still reproducible","author":"Nayan Kamble"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Inaccurate alt text specified for interactive image","key":"CONFSERVER-90499","url":"https://jira.atlassian.com/browse/CONFSERVER-90499","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the \"Comments” page, the image present for the \"Admin icon\" is provided with inaccurate alt text for the image link. such as \"User icon: Add a picture of yourself\"\r\nh3. Steps to Reproduce\r\n # Navigate to \"Recent spaces\"\r\n # Navigate to the \"Test\" Page.\r\n # Navigate to the \"comment\" section & add a comment.\r\n # Notice that the alternate text in the \"alt\" attribute is not describing the functionality of the image link.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-08-02 at 3.16.13 PM.png|width=422,height=238!\r\nh3. Actual Results\r\n\r\nInaccurate textual description such as \"User icon: Add a picture of yourself\" is provided for the \"user profile picture\" image link.\r\n\r\nIt does not provide similar information that is visually conveyed by the image link.\r\nh3. Expected Results\r\n\r\nAccurate alternate text of the image link should be read out by the screen reader.\r\n\r\nProvide appropriate and accurate alternate text for the image link using the \"alt\" attribute. Ensure that the alternate text of the image link is describing its purpose.\r\nFor instance, in the mentioned example it is advisable to provide \"User: Add a picture of yourself\" as the value in the \"alt\" attribute.\r\n\r\n*Code snippet*\r\n{code:java}\r\n<a class=\"userLogoLink userlink-0\" data-username=\"admin\" href=\"/users/profile/editmyprofilepicture.action\" title=\"\" data-user-hover-bound=\"true\">\r\n            <img class=\"userLogo logo defaultLogo\" src=\"/s/c6jahy/9011/y1zith/_/images/icons/profilepics/add_profile_pic.svg\" alt=\"User: Add a picture of yourself\" title=\"\">\r\n        </a>{code}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-08-01T07:39:07.000+0000","comments":[{"text":"This issue is stll reproducible","author":"Nayan Kamble"},{"text":"Closed by https://bulldog.internal.atlassian.com/browse/A11Y-364","author":"Bohdan Hulovatyi"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Comments: Inappropriate heading structure","key":"CONFSERVER-90489","url":"https://jira.atlassian.com/browse/CONFSERVER-90489","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Comments” page, text such as “Admin Admin” is marked as heading level 4 inappropriately.\r\nh3. Steps to Reproduce\r\n # Navigate to \"Recent spaces\"\r\n # Navigate to the \"Test\" Page.\r\n # Navigate to the \"comment\" section & add a comment.\r\n # Navigate to mentioned text and and observe screen reader announcement.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-08-02 at 10.39.53 AM.png|width=355,height=194!\r\nh3. Actual Results\r\n\r\nHeading structure is found to be inappropriate on the page. Text such as “Admin Admin” is coded as <h4> which does not match the visual hierarchy on the page.\r\nAs a result, screen reader users found it difficult to understand the page's content structure.\r\nh3. Expected Results\r\n\r\nIt is recommended that the discussed issue be addressed, as screen reader users rely on headings to comprehend the structure of the page and modal dialog.\r\n\r\nText such as \"Admin Admin\" should be coded as <h3> appropriately.\r\n\r\nUse the *H1, H2,…H6* tags as indicators of section headings and subheadings within a page, not just as formatting elements. Screen readers in particular may just scan a page for appropriate H1, H2 and H3 elements.\r\n\r\n*Code snippet*\r\n{code:java}\r\n<h3> Admin Admin </h3>{code}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour . A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-07-31T14:29:39.000+0000","comments":[{"text":"This issue is still reproducible","author":"Nayan Kamble"},{"text":"Fixed in scope of this task https://bulldog.internal.atlassian.com/browse/A11Y-365","author":"Serhii Panchenko"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Calendar | Create Event: Error messages difficult to locate","key":"CONFSERVER-90468","url":"https://jira.atlassian.com/browse/CONFSERVER-90468","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nError messages get dynamically displayed between the form fields and user's focus remains on the \"Save\" button.\r\n\r\n*Note:* A similar issue is found for the below form fields\r\n * \"Add user name\" form field in the \"Add Reminder>>Restriction\" modal dialog.\r\n * \"Related Space\" form field in the \"Add Reminder>>General\" modal dialog.\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to the header and activate the \"Calendar\" link\r\n # Navigate to the dates and activate it \r\n # Using a screen reader, submit the \"Create events\" form empty.\r\n # Observe that user's focus remains on the \"Save\" button and errors get dynamically added between the form fields.\r\n # Press the Tab key to navigate between the form fields.\r\n # Listen that the screen reader fails to announce the error messages.\r\n\r\nh3. Screen recording\r\n\r\n[^Screen Recording 2023-07-28 at 2.04.14 PM.mov]\r\nh3. Screenshot 1: Add Reminder>> Restriction\r\n\r\n^!Screenshot 2023-08-07 at 12.35.48 PM.png|width=288,height=127!^\r\nh3. Screenshot 2: Add Reminder>> General\r\n\r\n!Screenshot 2023-08-07 at 12.42.14 PM.png|width=282,height=113!\r\nh3. Actual Results\r\n\r\nWhen users submit the \"Create Events\" form empty, error messages such as \"Please select a valid user\", \"Field cannot be blank\", \"Invalid date specified. It should look like 28 Jul 2023\" and so on get dynamically displayed between the form fields and user's focus remains on the \"Save\" button.\r\n\r\nAs a result, screen reader users are unaware of the occurrence of errors.\r\nh3. Expected Results\r\n\r\nApply the following changes:\r\n * Add the 'aria-describedby' attribute to the form field.\r\n * Reference the 'id' attribute value of the container used to display the error message to the 'aria-describedby' attribute.\r\n * Set focus on the first field with an error using the JavaScript .focus() method as soon as the form is submitted.\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. \r\nh3. Environment \r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS 13.4.1 (c) (22F770820d)\r\nChrome - Version 115.0.5790.170 (Official Build) (x86_64)\r\nFirefox- Version 114.0 (64-bit)\r\nSafari- Version 16.5.2 (18615.2.9.11.10)\r\nJAWS- Version 2023.2306.28\r\nNVDA- Version 2022.2.2\r\nVoiceover - Version Latest","createDate":"2023-07-28T08:25:49.000+0000","comments":[{"text":"This instance is still reproducible.","author":"Boju Ankith"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"View Page: Focus moves inappropriately","key":"CONFSERVER-90444","url":"https://jira.atlassian.com/browse/CONFSERVER-90444","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe screen reader focus is moving inappropriately when user activate few interactive elements\r\nh3. Steps to Reproduce\r\n # Navigate to the \"Side bar\" and activate the page.\r\n # For example, activate the \"Admin Admin\" link.\r\n # Observe that \"View page\" has been appeared on the page.\r\n # Check the focus order of the interactive elements using screen reader.\r\n\r\nh3. Screen Recording\r\n\r\n[^Screen Recording 2023-07-26 at 5.57.05 PM.mov]\r\nh3. Actual Results\r\nFocus moves inappropriately on top of the page when user activate the \"Like\", \"Edit Labels (Type 'l')\" and \"Save for later\" interactive elements instead of moving on the triggering element when the user close the modal dialog,\r\nAs a result, keyboard only and screen reader users will have to navigate the screen content again before accessing the content which is after the triggering button.\r\nh3. Expected Results\r\nEnsure that the keyboard focus moves the triggering element when the modal dialog is closed which can be achieved via JavaScript focus() method.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS Ventura Version 13.3.1\r\nChrome - Version 114.0.5735.198 (Official Build) (x86_64)\r\nFirefox- Version 112.0.1 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.11.23)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2023-07-26T12:12:08.000+0000","comments":[{"text":"This instance is still reproducible.\r\n\r\n ","author":"Boju Ankith"},{"text":"Closed by https://bulldog.internal.atlassian.com/browse/A11Y-316","author":"Bohdan Hulovatyi"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Updating or adding attachments to a page with many incoming links is slow","key":"CONFSERVER-90436","url":"https://jira.atlassian.com/browse/CONFSERVER-90436","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen updating an attachment on a page with many incoming links, the request can be very slow or even timeout. This is due to attachment reconciliation which occurs in the background to ensure attachment consistency.\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nh3. Steps to Reproduce\r\n # Create a page and copy the link to the page (called main page)\r\n # Create 1500+ pages all having a hyperlink to the main page\r\n # Add or update an attachment on the main page\r\n\r\nh3. Expected Results\r\nReconciliation should only reconcile content that references the attachment, and the request should complete in a timely manner.\r\n\r\nh3. Actual Results\r\nReconciliation reconciles content that references the content an attachment is \"attached to\" causing unnecessary reconciliation - this causes the request to take longer than necessary.\r\n\r\nIn thread dumps you will find a majority of the request time in either:\r\n* *Pre 8.1* AttachmentRelatedContentReconciliationListener\r\n* *8.1+* ReconcileReferringContentTask\r\n\r\nh3. Workaround\r\nThere are 3 known work-arounds:\r\n* Minimise how many incoming links are coming into the page\r\n* Optimise any Synchrony bottlenecks present in the system\r\n* Disable collaborative editing","createDate":"2023-07-26T08:53:13.000+0000","comments":[{"text":"Hi, we're having this issue in our instance of Confluence data center version 8.4.1 on a page with 72 incoming links, 20 external links, and 21 children. The reproduction of the issue mentions 1,500 incoming links which is a larger number, but our issue (and many other customers) is far fewer. Do the number of external links and children also factor into the bug issue with a fewer number of incoming links?","author":"Andrew Showalter"},{"text":"We've seen large ( in terms of space and page count ) instance hit problems at lower incoming page count, 400-500, but we've never seen a timeout below 200 incoming links.","author":"David Benson [draw.io]"},{"text":"Confluence 8.5.X is also affected","author":"Hannes Medwed"},{"text":"A fix for this issue is available in Confluence Data Center 9.1.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.1+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Jordan Anslow"},{"text":"In which 8.5. X LTS version will this fix be provided","author":"Hannes Medwed"},{"text":"Come on guys a short answer would be nice. :(\r\nSince Confluence 9.X.X has not LTS Version we need to know if this bug was fixed in the latest 8.5.17 version","author":"Hannes Medwed"},{"text":"PR for release/8.5 https://stash.atlassian.com/projects/CONFSERVER/repos/confluence/pull-requests/37632/overview","author":"Garvit Sharma"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Search For a Page: Button's State not defined","key":"CONFSERVER-90308","url":"https://jira.atlassian.com/browse/CONFSERVER-90308","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe state of the buttons is not defined programmatically.\r\nh3. Steps to Reproduce\r\n # Navigate to \"Search\" input field present in header section.\r\n # Activate it and observe that modal dialog has been appeared on the screen.\r\n # Navigate to the \"Advanced search\" link and activate it.\r\n # Navigate to the buttons present on left side of the page.\r\n # Using screen reader check that state is not being announced.\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-07-19 at 12.09.21 PM.png|width=416,height=205!\r\nh3. Actual Results\r\n\r\nWhen user activate the button elements such as \"Last month\" and \"Pages\" the content in the page is getting updated without notifying the screen reader users. It is not announcing for screen reader due to lack of attribute in code snippet. As a result, screen reader users won't be aware of the state of all these buttons. \r\nh3. Expected Results\r\n\r\nEnsure that state is announcing to the screen reader users appropriately. To achieve this apply the following changes:\r\n * Provide role listbox to the <ul> element\r\n * Add role option to the options such as \"Any date\", \"Last 24 hours\", \"Last week\", and so on.\r\n * Provide the aria-selected attribute with value true for the selected option and make the value of this attribute should update on user interaction.\r\n\r\n*Code Snippet*\r\n{code:java}\r\n<div class=\"aui-navgroup-vertical\">\r\n<ul class=\"aui-nav\" role=\"listbox\">\r\n<li class=\"aui-nav-selected\" role=\"option\" aria-selected=\"true\"><a href=\"#\" role=\"button\" data-value=\"\">Any date</a></li>\r\n(...)\r\n</ul>\r\n</div>{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOS Ventura Version 13.3.1\r\nChrome - Version 114.0.5735.198 (Official Build) (x86_64)\r\nFirefox- Version 112.0.1 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.11.23)\r\nJAWS- Version 2022\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest","createDate":"2023-07-18T03:14:50.000+0000","comments":[{"text":"This instance is still reproducible.\r\n\r\n ","author":"Boju Ankith"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Dashboard: Redundant image and textual link with redundant alt text","key":"CONFSERVER-90264","url":"https://jira.atlassian.com/browse/CONFSERVER-90264","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn \"Dashboard | All updates\" page,Redundant alternative text \"User icon: admin\" is provided for the image links \"Admin icon\" on the page.\r\nh3. Steps to Reproduce\r\n # Navigate to the mentioned image and textual link in the main content area.\r\n # Inspect the code of the image link and textual link.\r\n # Notice that both links open the same but are defined in separate <a> tags.\r\n \r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-07-17 at 3.24.37 PM.png|width=392,height=197!\r\nh3. Actual Results\r\n\r\nThere are adjacent image and textual links that point to the same destination but are defined in separate <a> tags. Also, the alternate text of the image link is the same as the text of the textual link.\r\nAs a result, screen reader users are presented with repeated information about the link which opens the same page.\r\nh3. Expected Results\r\n\r\n \r\nEnsure that the image and text links that point to the same destination are combined into a single link as a link block.\r\n \r\nApply the following changes: * Define the image and the link text within a single <a> element instead of separate <a> elements.\r\n * Ideally alternate text must be provided to all image links using the \"alt\" attribute. In this instance, since the image and the textual link point to an identical destination page, use an empty ‘alt’ attribute.\r\n * Use CSS if necessary to maintain the presentation of the content.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-07-14T11:26:36.000+0000","comments":[{"text":"This issue is still reproducible","author":"Nayan Kamble"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Dashboard | All popular: Non-modal dialogs are inaccessible for both keyboard only and screen reader users","key":"CONFSERVER-90257","url":"https://jira.atlassian.com/browse/CONFSERVER-90257","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Dashboard ” page, non-modal dialog becomes available when the user mouse hovers over \"Admin Admin\" is inaccessible.\r\nh3. Steps to Reproduce\r\n # Open \"Dashboard | All popular \" page\r\n # Navigate to the mentioned tooltip content using keyboard.\r\n # Turn on the screen reader and observe that tooltip content is not accessible.\r\n\r\nh3. Screenshot \r\n\r\n!Screenshot 2023-07-17 at 3.10.42 PM.png|width=437,height=220!\r\nh3. Actual Results\r\n\r\nOn the \"Dashboard | All popular \" page, the non-modal dialog that becomes available when the user mouse hovers over “Admin Admin” is not accessible. These non-modal dialogs are coded inappropriately which makes functionality inaccessible for keyboard-only and screen reader users. Moreover, the dialog is only available on mouse hover.\r\nh3. Expected Results\r\n\r\nThe mentioned dialog should be accessible for keyboard-only and screen reader users.\r\n\r\nMake the dialog accessible by performing the following steps:\r\n * Replace the avatar element with the native <button> element in the source code so that it receives keyboard focus. (Currently the avatar and username element is coded in one <a> tag so when users tab the keyboard focus receives both the elements)\r\n * Make sure to code the button element which triggers the popup outside the <a> element,since incorrect nesting is done\r\n * Add {{role=\"dialog\"}} and {{\"aria-labelledby\"}} attribute to the {{<div>}} element containing the modal dialog heading/title for text “User name”.\r\n * Specify the \"id\" attribute with a unique value to the element containing the heading text i.e “User name” and reference it via the {{\"aria-labelledby\"}} attribute.\r\n\r\nFor information on creating accessible non-modal dialog refer [Non Modal Dialogs|https://hello.atlassian.net/wiki/spaces/A11Y/pages/1105796220/Non+Modal+Dialogs]\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-07-14T11:19:14.000+0000","comments":[{"text":"This instance is still reproducible.\r\n\r\n ","author":"Boju Ankith"}]},{"summary":"Dashboard: Inappropriate heading structure","key":"CONFSERVER-90186","url":"https://jira.atlassian.com/browse/CONFSERVER-90186","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the “Dashboard” page, text such as “admin admin” is marked as heading level 4 inappropriately.\r\nh3. Steps to Reproduce\r\n # Open the \"Dashboard” page.\r\n # Navigate to the mentioned heading text in the main content area\r\n # Inspect the code or observe the screen reader announcement\r\n\r\nh3. Screenshot\r\n\r\n!Screenshot 2023-07-13 at 6.06.06 PM.png|width=491,height=248!\r\nh3. Actual Results\r\n\r\nHeading structure is found to be inappropriate on the page. Text such as “Admin Admin” is coded as <h4> which does not match the visual hierarchy on the page. \r\nAs a result, screen reader users found it difficult to understand the page's content structure.\r\nh3. Expected Results\r\n\r\nIt is recommended that the discussed issue be addressed, as screen reader users rely on headings to comprehend the structure of the page and modal dialog.\r\n\r\nText such as \"Admin Admin\" should be coded as <h2> appropriately.\r\n\r\nUse the *H1, H2,…H6* tags as indicators of section headings and subheadings within a page, not just as formatting elements. Screen readers in particular may just scan a page for appropriate H1, H2 and H3 elements.\r\n\r\n*Code snippet*\r\n{code:java}\r\n<h2> Admin Admin </h2>{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2019)\r\nmacOs Ventura 13.3.1\r\nChrome - Version 113.0.5672.63 (Official Build) (x86_64)\r\nFirefox- Version 92.0 (64-bit)\r\nSafari- Version 16.4 (18615.1.26.110.1)\r\nJAWS- Version 2022\r\nNVDA- Version 2021.2\r\nVoiceover - Version Latest","createDate":"2023-07-13T12:17:44.000+0000","comments":[{"text":"This instance is still reproducible.","author":"Nayan Kamble"},{"text":"Closed by https://bulldog.internal.atlassian.com/browse/A11Y-577","author":"Bohdan Hulovatyi"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"highlighting of other columns in the table if size matches, while adjusting the size of a column is not happening","key":"CONFSERVER-83211","url":"https://jira.atlassian.com/browse/CONFSERVER-83211","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Create a page\r\n # insert a table with more than 3 columns and with fixed width\r\n # Resize the column sizes randomly\r\n # select one column and start adjusting the size\r\n\r\nAttaching the sample storage format.\r\n * [^StorageFormat.txt]\r\n\r\nh3. Expected Results\r\n\r\nWhen the size of the column matches with another column, the sidebar on the other column would get highlighted in blue\r\n * [^v7.4.3.mp4]\r\n\r\nh3. Actual Results\r\n\r\nIt is no longer highlighting if the column size matches with other columns.\r\n\r\n * [^v8.7.1.mp4]\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-04-18T14:09:08.000+0000","comments":[{"text":"This bug is confirmed fixed in 8.7.0. It's been fixed in one of the previous releases, most likely along by [TinyMCE library upgrade in 8.3|https://confluence.atlassian.com/doc/preparing-for-confluence-8-3-1216971749.html#PreparingforConfluence8.3-EditorTinyMCE6upgrade].","author":"Jiri Hronik"}]},{"summary":"This version of Confluence is unrecognized by the Atlassian Marketplace. It might be a non-standard build or be too new to appear","key":"CONFSERVER-83081","url":"https://jira.atlassian.com/browse/CONFSERVER-83081","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # Download Confluence 7.13.15\r\n # Install Confluence 7.13.15\r\n # Navigate to Atlassian Marketplace\r\n\r\nh3. Expected Results\r\n\r\nAble to view the marketplace without any error.\r\nh3. Actual Results\r\n\r\nWhen you open the page, you can see the following error:\r\n{code:java}\r\n\"This version of Confluence is unrecognized by the Atlassian Marketplace. It might be a non-standard build or be too new to appear\"\r\n{code}\r\nh3. Workaround\r\n\r\nFor now, users can manually Upload app or update it.","createDate":"2023-04-15T05:51:39.000+0000","comments":[{"text":"I've just been hit by this after upgrading 8.5.16 to 9.2.2 \r\n\"Please do the needful\" :)","author":"Brian"}]},{"summary":"Editor: Missing alt attribute for informative image.","key":"CONFSERVER-82773","url":"https://jira.atlassian.com/browse/CONFSERVER-82773","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"alt\" attribute is not provided for the \"Task\" informative image.\r\nh3. Steps to Reproduce\r\n # Open the confluence DC page.\r\n # Navigate to the editor and activate it.\r\n # In the editor, add the “Jira issue\" macro from the toolbar.\r\n # Set the display option to single issue.\r\n # Inspect the code of the image.\r\n # Notice that the \"alt\" attribute is not specified for the <img> tag.\r\n\r\nh3. Actual Results\r\n\r\nThe \"alt\" attribute is not provided for the \"Task\" informative image.\r\nAs a result, screen readers announced the image as unlabelled.\r\nh3. Expected Results\r\n\r\nProvide alternate text for the image using the \"alt\" attribute. Ensure that the alternate text is descriptive of the image’s purpose. Provide descriptive alt as \"task\" to the informative image.\r\n{code:java}\r\n<img class=\"icon\" alt=\"Task\" src=\"https://jira.npdb.hrsa.gov/secure/viewavatar?size=xsmall&amp;avatarId=11718&amp;avatarType=issuetype\"> {code}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2023-03-30T10:09:07.000+0000","comments":[{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Clicking inline tasks on large pages slowly fills the heap over time","key":"CONFSERVER-81037","url":"https://jira.atlassian.com/browse/CONFSERVER-81037","type":"Bug","priority":"","description":"{panel:title=Atlassian Update - 4th June 2024|borderStyle=solid|borderColor=#6554c0|titleBGColor=#6554c0|bgColor=#eae6ff|titleColor=#ffffff}\r\nHi Everyone,\r\n\r\nThank you for your patience with this issue as we are still working on a complete solution.\r\n\r\nDuring our development, we were are able to pre-emptively release some optimisations which should help reduce the impact. This should greatly improve processing efficiency when checking many tasks on the same page.\r\n\r\nThese optimisations have been released in version 8.5.10\r\n\r\nThanks!\r\n{panel}\r\n\r\nh3. Issue Summary\r\n\r\nWhile in page view mode, each inline task interaction increments the page version by one. Whilst this is not a problem in itself, when a checkbox (for inline tasks) is marked or unmarked on a Confluence page, hibernate loads the page contents twice into two string objects.\r\n\r\nWith regular usage, inline tasks will eventually cause heap pressure, resulting in potentially disruptive full-GC pauses.\r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n# Create a relatively large Confluence page with inline tasks included on it.\r\n# Whilst +viewing+ the page (not editing), check and uncheck boxes for inline tasks. Programmatically, CHECKED and UNCHECKED states can be issued for a page (and taskid) via the REST API to simulate user activity automatically:\r\n{code:java}\r\ncurl -D- -u user2:user2 -X POST -H \"X-Atlassian-Token: nocheck\" --data '{\"status\":\"CHECKED\",\"trigger\":\"VIEW_PAGE\"}' -H \"Content-Type: application/json\" http://localhost:8090/rest/inlinetasks/1/task/2228225/55/ {code}\r\n# Whilst monitoring heap activity (via GC logs or JMX), note the heap usage increasing with each click. The larger the page, the bigger the heap usage increase per click.  Eventually this triggers full GC and heap usage remains high.\r\n\r\nh3. Expected Results\r\n\r\nReferenced objects in the heap should not grow unbounded from the use of inline tasks.\r\nh3. Actual Results\r\n\r\n!Conf7192-heap-fullgc.png|thumbnail!|\r\n\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-11-09T06:11:05.000+0000","comments":[{"text":"This issue is impacting our cluster and causing node evictions as well. \r\n\r\nPlease fix this issue ASAP.","author":"Ranganath Nangineni"}]},{"summary":"Inline comment is broken if a page contains Capitioned Item, HTML Macro, Table Transformer,Hidden Data, Draw.io, MultiExcerpt Include  and Confiform macros","key":"CONFSERVER-79879","url":"https://jira.atlassian.com/browse/CONFSERVER-79879","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCannot add inline comments to similar words that exist inside a macro body, which could also be hidden. For example, in a page, a macro body contains the text \"This is inside a macro\" and the text \"I am not inside\" lives outside the macro.\r\n\r\nAdding an inline comment to the word \"inside\" results in this error\r\n{noformat}\r\nWe can't add your inline comment; the section you highlighted may contain a macro or user mention. Try highlighting plain text.\r\n{noformat}\r\n(i) This bug might be affecting other macros as well. Please, add to this list upon confirmation:\r\n * Capitioned Item\r\n * HTML Macro\r\n * Table Transformer\r\n * Hidden Data\r\n * Draw.io\r\n * Confiform\r\n * Code Block\r\n * MultiExcerpt Include \r\n\r\nh3. Steps to reproduce\r\nh4. Steps to reproduce for hidden Captioned Item Macro:\r\n\r\nCan't add an inline comment to a string or substring which is similar to the content inside a hidden macro\r\n # Start editing a page, insert a \"Captioned Item\" macro with the option \"Hidden\" switched ON.\r\n # Type some text inside the macro.\r\n # Type the same text outside the macro.\r\n # Save the page.\r\n\r\nFrom now on you won't be able to make inline comments for any substring, which matches the text inside the macro.\r\nh4. Steps to reproduce for HTML macro:\r\n\r\n1. Create a page and insert HTML Macro to it.\r\n2. Add a few texts inside the HTML Macro\r\n3. Save and publish the page and then add an inline comment to the text which was added inside the macro\r\n4. You will be seeing the same error as above.\r\n\r\n \r\nh4. Steps to reproduce for Table Transformer macro:\r\n\r\n1. Create a page and insert Table transformer Macro to it.\r\n2. Insert a table inside the above macro and Add a few texts inside the table.\r\n3. Save and publish the page and then add an inline comment to the text which was added inside the table within table transformer macro\r\n4. You will be seeing the same error as above.\r\n\r\n \r\nh4. Steps to reproduce for Hidden Data from Scaffolding forms and templates for Confluence plugin:\r\n # Create a page and insert Hidden Data macro\r\n # Type some text inside the macro.\r\n # Type the same text outside the macro.\r\n # Save the page.\r\n # You will be seeing the same error as above.\r\n\r\nh4. Steps to reproduce for [Multiexcerpt Include macro by Appfire|https://marketplace.atlassian.com/apps/169/multiexcerpt?hosting=datacenter&amp;tab=overview]:\r\n # Create a page and insert a MultiExcerpt macro\r\n # Type some text inside the macro.\r\n # Create another page and insert a MultiExcerpt Include macro\r\n # Type the same text outside the macro.\r\n # Save the page.\r\n # You will be seeing the same error as above.\r\n\r\nh3. Expected Results\r\n\r\nInline comments will be placed successfully.\r\nh3. Actual Results\r\n{noformat}\r\nWe can't add your inline comment; the section you highlighted may contain a macro or user mention. Try highlighting plain text.\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2022-09-05T19:28:42.000+0000","comments":[{"text":"Do you have ETA for this issue?","author":"Rambabu Patina {Appfire}"},{"text":"Our App i.e Numbered Captions macro returns the Output Type of {{{}BLOCK{}}}. We don’t have control over the inline comment with us as you know, it is a native feature with Confluence. We are just taking macro parameters and rendering the output which is in our context.\r\n\r\nAnd regarding the other third-party Apps, we verified a couple of native macros of Confluence i.e *Table of Content* and *Expand* macros. We see the same behavior that customer is experiencing with our App.\r\n\r\n[https://confluence.atlassian.com/doc/table-of-contents-macro-182682099.html]\r\n\r\n[https://confluence.atlassian.com/doc/expand-macro-223222352.html]\r\n\r\nWe request you try these from your end and let us know how to proceed further.\r\n\r\nAnd let us know if you need any other details from us which can help your Dev team to narrow down and mark this as Bug.\r\n\r\nThanks\r\n\r\nRK","author":"Rama Krishna Anumola {Appfire}"},{"text":"Can we have ETA for this please, as we need to provide an update back to our customers?","author":"Rama Krishna Anumola {Appfire}"},{"text":"Do you have an ETA for this issue? At least assign this issue to someone for analysis.","author":"Rama Krishna Anumola {Appfire}"},{"text":"ETA??","author":"Rama Krishna Anumola {Appfire}"},{"text":"Wiki V 8.5.4 & Table filter macro V10.2\r\n\r\nsteps to recreate:\r\n\r\nCreate table; Merge 2 cells; Add table macro filter; Try to comment within the table\r\n\r\nThe inline comment can't be saved, and the error occurs: \r\n\r\n\"We can't add your inline comment; the section you highlighted may contain a macro or user mention. Try highlighting plain text.\"\r\n\r\nCommenting with numbers save while characters fail.\r\n\r\nKR,\r\n\r\nZJ","author":"Zinzi Johannes"},{"text":"We are as well affected by this issue and it has a substantial impact on the usability and acceptance of Confluence in our project. May I kindly ask you to reconsider the priority of this issue and provide is with a solution? Much appreciated!","author":"Sam Zurcher"},{"text":"Greetings,\r\n\r\nWe are experiencing the same issue with \"Captioned Item macro\" in Confluence 8.5.6 and we suspect the problem might be with the API endpoint {{{}\"/rest/inlinecomments/1.0/comments\"{}}}. It seems that the endpoint is not handling properly the {{\"matchIndex\"}}  in the API call. I have a screen capture to illustrate this but it looks like I can't attach it in the comment... but essentially:\r\n # We have a simple Confluence page with some plain text containing two occurrences of _\"Atlassian Confluence\"_ ({{{}matchIndex 0 and 1{}}}) above a Captioned item with figure caption _\"Atlassian Confluence\"_ ({{{}matchIndex 2{}}}).\r\n # The user selects the first occurrence of _\"Atlassian Confluence\"_ in the plain text ({{{}matchIndex 0{}}}) then click on \"Add inline comment\" in the pop-up bubble.\r\n # This triggers a REST API call to the above mentioned endpoint.\r\n ## The request payload JSON contains {{{}\"matchIndex:0, numMatches: 3\"{}}}. (GOOD)\r\n ## But the API call fails with {_}412 Precondition Failed{_}. (BAD)\r\n\r\nCheers,\r\nChan\r\n\r\n ","author":"Sheng-ming Chan"},{"text":"Trying to put an inline comment for a word that occurs in a draw.io diagram causes this problem as well:\r\n\r\n!https://gcdnb.pbrd.co/images/3TudihFNL8XZ.png?o=1|width=500,height=389!\r\nh3. Payload\r\n\r\nnumMatches: 2 even though in storage format, there is only one occurrence (s. below)\r\n{code:json}\r\n{\r\n  \"originalSelection\": \"Inline\",\r\n  \"body\": \"<p>test</p>\",\r\n  \"matchIndex\": 1,\r\n  \"numMatches\": 2,\r\n  \"serializedHighlights\": \"[[\\\"Inline \\\",\\\"4:0\\\",0,7]]\",\r\n  \"authorDisplayName\": \"JB\",\r\n  \"authorUserName\": \"j.b\",\r\n  \"authorAvatarUrl\": \"undefined\",\r\n  \"containerId\": \"228038721\",\r\n  \"containerVersion\": \"1\",\r\n  \"parentCommentId\": \"0\",\r\n  \"lastFetchTime\": \"1713281005136\",\r\n  \"hasDeletePermission\": true,\r\n  \"hasEditPermission\": true,\r\n  \"hasResolvePermission\": true,\r\n  \"resolveProperties\": {\r\n    \"resolved\": false,\r\n    \"resolvedTime\": 0\r\n  },\r\n  \"deleted\": false\r\n}\r\n{code}\r\n{code:html}\r\n<p>\r\n  <ac:structured-macro ac:macro-id=\"5063a716-4a0e-46aa-8e96-ee3805517456\" ac:name=\"drawio\" ac:schema-version=\"1\">\r\n    <ac:parameter ac:name=\"border\">true</ac:parameter>\r\n    <ac:parameter ac:name=\"diagramName\">draw.io diagram</ac:parameter>\r\n    <ac:parameter ac:name=\"simpleViewer\">false</ac:parameter>\r\n    <ac:parameter ac:name=\"width\"/>\r\n    <ac:parameter ac:name=\"links\">auto</ac:parameter>\r\n    <ac:parameter ac:name=\"tbstyle\">top</ac:parameter>\r\n    <ac:parameter ac:name=\"lbox\">true</ac:parameter>\r\n    <ac:parameter ac:name=\"diagramWidth\">121</ac:parameter>\r\n    <ac:parameter ac:name=\"revision\">1</ac:parameter>\r\n    <ac:parameter ac:name=\"\"/>\r\n  </ac:structured-macro>\r\n</p>\r\n<p>Inline comment is not working if word occurs in draw.io diagram.</p>\r\n{code}\r\n\r\nApparently, the frontend JavaScript that counts the occurrences of the highlighted word simply parses the DOM regardless of where the content comes from.\r\n\r\nThis will obviously create differences in the match/ occurrence count between DOM and storage format.","author":"Jörn Bungartz"},{"text":"Atlassian, is there any chance that this issue will be fixed some day? This is an awfully annoying problem to those users who use inline comments a lot.","author":"Michael Kotzem"},{"text":"Any chance for this issue to be resolved? We would much appreciate it.","author":"Sam Zurcher"},{"text":"Also occurs on  Confluence 8.5.9 with LucidChart Makros. \r\n\r\nIf there are LucidChart Makros on the Page. You cant add inline Comments.\r\n\r\nPlease fix.\r\n\r\nBest Regards\r\n\r\n ","author":"Eduard Auer"},{"text":"Atlassian, please prioritise a fix for this issue as this is impacting customers of multiple vendors. ","author":"Koti Anekallu"},{"text":"note this appears to be our issue, please see case PSSRV-128656 for details. This behaviour is inconsistent and is puzzling.\r\n\r\nwe are on 8.5.11","author":"chris sieverts"},{"text":"Any ETA on this?\r\n\r\nCreated on: 06/Sep/2022  and still Gathering Impact. ","author":"Rama Krishna Anumola {Appfire}"},{"text":"Affected Version 8.5.19 should be added","author":"Thomas Clemens"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Confluence Editor is Slow to Load When Collaborative Editing is Enabled","key":"CONFSERVER-78521","url":"https://jira.atlassian.com/browse/CONFSERVER-78521","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe Confluence editor is slow to load when collaborative editing is enabled\r\n\r\nThis is reproducible on Data Center: (yes)\r\n\r\nh3. Steps to Reproduce\r\n# Create a Confluence page with a large amount of content (such as a large table)\r\n# Edit the page\r\n# Observer the initial load time of the editor\r\n\r\nh3. Expected Results\r\nThe editor is loaded promptly\r\n\r\nh3. Actual Results\r\nThe page takes a prolonged time to load\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nh3. Note to Support\r\nWhen linking to this issue, please ensure the following has been captured as part of your investigation\r\n# A HAR file of the editor page load\r\n# The browser console output associated with the HAR file/editor page load\r\n# A storage format of the page\r\n\r\n*Please do not attach files to this issue as they will be publicly visible.*","createDate":"2022-04-21T21:49:27.000+0000","comments":[]},{"summary":"Synchrony - Can't sync with the server error when multiple users are saving the same page","key":"CONFSERVER-78177","url":"https://jira.atlassian.com/browse/CONFSERVER-78177","type":"Bug","priority":"","description":"h3. Problem\r\n - When multiple users are editing the same page, and click on update together\r\n\r\nh3. Environment\r\n\r\n.\r\nh3. Steps to Reproduce\r\n * Create a Page in Confluence\r\n * Have multiple users editing the same page (I did it with 5)\r\n * Have them click on publish around the same time\r\n\r\nh3. Expected Results\r\n\r\n_The editions should be synchronized and published_\r\nh3. Actual Results\r\n\r\n_Some of the users will receive an error when trying to save_\r\n_!image-2022-03-24-13-24-48-076.png|width=532,height=370!_\r\n\r\n \r\nh3. Workaround\r\n\r\n_Most of the times, publishing the page again will have it work, if you get the same error after retrying, the page will need to be refreshed, and then saved._\r\nh3. Notes\r\n\r\nIn developer tools, If we look at the post request for the draft, we can see that the API is sending a version that was sent previously by of the other users, and then it fails:\r\n{code:yaml}\r\nRequest: \"page\"\r\nversion: {number: 34, message: \"\", minorEdit: false, syncRev: \"0.sO0vod7WeiIncamVjFZMWQ.0\"}\r\n\r\nResponse:\r\n{\"statusCode\":409,\"data\":{\"authorized\":false,\"valid\":true,\"allowedInReadOnlyMode\":true,\"errors\":[],\"successful\":false},\"message\":\"Version must be incremented on update. Current version is: 34\",\"reason\":\"Conflict\"}\r\n{code}\r\n\r\nSome of the times, the error comes as updating a stale draft:\r\n{code:yaml}\r\n{\"statusCode\":409,\"data\":{\"authorized\":false,\"valid\":true,\"allowedInReadOnlyMode\":true,\"errors\":[],\"successful\":false},\"message\":\"Attempted to update stale data. Try again.\",\"reason\":\"Conflict\"}\r\n{code}\r\n ","createDate":"2022-03-24T16:32:40.000+0000","comments":[{"text":"Same in version 7.17.4","author":"IT Systems"},{"text":"Hi we are having the same issue, do you know how to solve it?\r\n\r\nJusto for you to know, we have a snchrony standalone separated from our Confluence.\r\n\r\nLet us know if you have any clue. Thanks","author":"David Torguet Martos"},{"text":"Same here, version 8.5.4LTS.","author":"SYSGO GmbH"},{"text":"+1","author":"Benedikt Hoffschröer"},{"text":"Same in version 9.2.1","author":"FUB-ZEO ELOPS"}]},{"summary":"Comments - Add inline : Action cannot be performed by keyboard alone","key":"CONFSERVER-78115","url":"https://jira.atlassian.com/browse/CONFSERVER-78115","type":"Bug","priority":"","description":"h2. *Steps to Reproduce*\r\n # Open URL to the page\r\n # Navigate to Spaces and select page from \"Recent pages\".\r\n # Select text such as \"Edit\" and try to hover on the tooltip icon that appears after selecting the text.\r\n # Try to navigate on the tooltip icon using keyboard and observe whether keyboard focus is being received.\r\n\r\nh2. *Screenshot*\r\n\r\n!https://axeauditor.dequecloud.com/api/v1/file/39a1aed2-51e1-11ec-996a-876541f7d965|width=800!\r\nh2. *Actual Behaviour*\r\n\r\nWhen user selects text and try to hover it a tooltip appears the same functionality is not accessible for keyboard only users.\r\nh2. *Expected Result*\r\n\r\nUsers should be able to navigate to the tooltip icon using keyboard. modify the scripts to make sure the <span> element used to define tooltip receives keyboard focus and available for all user to interact.\r\n\r\nBug Ref: 725340","createDate":"2022-03-15T01:05:12.000+0000","comments":[{"text":"!image-2022-07-13-10-17-59-337.png!\r\n\r\nOnce the text is selected by the user and the comment toolbar appears then the user should be able to Tab forward and move focus to the first button in the toolbar. If you code the expanded toolbar as role=toolbar then it would need to manage keyboard focus using arrow keys to select toolbar buttons [https://hello.atlassian.net/wiki/spaces/A11Y/pages/1500119645/Toolbars]\r\n\r\nBasic tabbing through the buttons would be acceptable.\r\n\r\n \r\n\r\nThe fact that the text cursor is not keyboard operable in all browsers would have to be handled by a custom keyboard cursor navigation mode or some other keyboard operable method for a user to select a word with their cursor so that they can leave a comment. This would have to be designed first most likely. I have a past comment suggesting ideas: https://a11y-internal.atlassian.net/browse/CLACCESS-516?focusedCommentId=26572","author":"Paul Adam"},{"text":"How does Atlassian gather information on impact for an issue like this? A year and a half is a long time for a severe issue. ","author":"Jamie Herrera"},{"text":"if this has been reduced to a low priority please indicate what alternative way a user can access and create inline comments when not using a mouse?","author":"Jamie Herrera"},{"text":"This issue is still reproducible","author":"Nayan Kamble"}]},{"summary":"Editing a table in a Page Properties Macro breaks default sorting in the Page Properties Report Macro","key":"CONFSERVER-75330","url":"https://jira.atlassian.com/browse/CONFSERVER-75330","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSorting is broken in the Page Properties Report Macro, when HTML entities are written in the table cells containing the values to be sorted.\r\n\r\nIn the Page Properties Report Macro there is a parameter that can be set in *Options > Sort By* and when this contains a table heading name the tabular data is sorted by default in this manner.\r\n\r\nIf the page or table using the Page Properties macro is edited or values are appended to the table the page source code changes and wraps the cell values to be sorted in *<div>* and/or *<p>* tags. This breaks the default sort order set and displayed in the parent Page Properties Report Macro. However if the heading of the column is manually toggled, the correct sorting is activated.\r\nh3. Steps to Reproduce\r\n # Create a page with the Page Properties Report Macro that sorts on a heading contained in pages containing a Page Properties Macro with tabular data\r\n # Edit the source pages and append values or otherwise update the table on these pages\r\n\r\nh3. Expected Results\r\n\r\nDefault sorting set in the Page Properties Report Macro is followed and displayed correctly on page load.\r\nh3. Actual Results\r\n\r\nSorting is broken and does not follow the logic or parameter set in the Page Properties Report Macro\r\n\r\nThe following entities are seen to wrap the cell value and therefore break the sorting. When the heading of the column is manually toggled, the correct sorting is activated.\r\n{code:html}\r\n<th colspan=\"1\">Sorted by this column</th>\r\n                <td colspan=\"1\">\r\n                  <div class=\"content-wrapper\">\r\n                    <p>1.0</p>\r\n                  </div>\r\n\t\t</td>\r\n{code}\r\nh3. Workaround\r\n\r\nBy editing the page source code with the [Confluence Source Editor|https://marketplace.atlassian.com/apps/1210722/confluence-source-editor?tab=overview&hosting=server] one can remove the HTML entities from the table cell value restoring the correct default sort order.","createDate":"2021-12-13T13:12:23.000+0000","comments":[]},{"summary":"CalendarReminderJob is sending multiple notifications for recurrent events","key":"CONFSERVER-67979","url":"https://jira.atlassian.com/browse/CONFSERVER-67979","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCalendarReminderJob is sending multiple notifications for a recurrent event when Start Date is aligned to 5 min boundary conditions under Team Calendar version - 7.0.17 and 7.0.16. \r\n\r\nh3. Steps to Reproduce\r\n# Create a recurrent Event and set Start Date to any of the boundary values i.e 00,05,10,15,20,25,30,35,40,45,50,55.\r\n# Add a reminder for 5 mins before\r\n\r\nh3. Expected Results\r\nA single notification event is received 5 mins before the start of the event.\r\n\r\nh3. Actual Results\r\nNotification is received 5 mins before the event but then another notification is received at the start of the event as well. \r\n\r\nThe below snippet can be seen under atlassian-confluence.log file once the package com.atlassian.confluence.extra.calendar3.reminder.job.CalendarReminderJob is set to DEBUG\r\n{noformat}\r\n2021-07-29 16:15:00,376 DEBUG [team-calendars-worker-1] [calendar3.reminder.job.CalendarReminderJob] dumpLogDebug CalendarReminderJob is running with a list of reminder user : 1\r\n2021-07-29 16:15:00,376 DEBUG [team-calendars-worker-1] [calendar3.reminder.job.CalendarReminderJob] dumpLogDebug Will remind for user : ConfluenceUserImpl{name='admin', key=402881867a7fedc3017a7ff3fa9a0000}\r\n2021-07-29 16:15:00,376 DEBUG [team-calendars-worker-1] [calendar3.reminder.job.CalendarReminderJob] dumpLogDebug ##### For event com.atlassian.confluence.extra.calendar3.model.ReminderEvent@5c8240c6\r\n2021-07-29 16:20:00,334 DEBUG [team-calendars-worker-3] [calendar3.reminder.job.CalendarReminderJob] dumpLogDebug CalendarReminderJob is running with a list of reminder user : 1\r\n2021-07-29 16:20:00,335 DEBUG [team-calendars-worker-3] [calendar3.reminder.job.CalendarReminderJob] dumpLogDebug Will remind for user : ConfluenceUserImpl{name='admin', key=402881867a7fedc3017a7ff3fa9a0000}\r\n2021-07-29 16:20:00,335 DEBUG [team-calendars-worker-3] [calendar3.reminder.job.CalendarReminderJob] dumpLogDebug ##### For event com.atlassian.confluence.extra.calendar3.model.ReminderEvent@4fa17bd1\r\n{noformat}\r\n\r\nh3. Workaround\r\nModify the Start date of the event so that it does not align with the 5 min boundary i.e any values apart from 00,05,10,15,20,25,30,35,40,45,50,55.","createDate":"2021-07-29T11:33:22.000+0000","comments":[{"text":"Hi Team,\r\n\r\nWe have got autmations to a remote system based on these notifications. Multiple notifications seem to trigger the remote system multiple times and create duplicate tickets. Can this issue be fixed ASAP?","author":"Niranjan"},{"text":"Hi Team,\r\n\r\nour instance is affected by this bug and the workaround to modify the starting time to not align with the 5 min boundary is simply not feasible. We have 500 users in a very bureaucratic environment, for which the starting times of events need to be unambiguous to avoid confusion. Starting all meetings 1-2 min later due to a bug in calendar events is not reasonable either. ","author":"Luisa Grams"}]},{"summary":"Viewing a large page with  attachments macro  causes slow loads and timeouts. ","key":"CONFSERVER-63527","url":"https://jira.atlassian.com/browse/CONFSERVER-63527","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence times out when performing permission checks for a page with lots of attachments macros. \r\n\r\n(i) Improve the performance of searchGroupedByName method.\r\n\r\nh3. Steps to Reproduce\r\n# Add a page with several attachment macros referencing attachments on current page and other pages. \r\n# Publish page\r\n# View page. \r\n\r\nh3. Expected Results\r\nThe page loads within a resemble time. \r\n\r\nh3. Actual Results\r\n\r\nPage eventually times out with error. \r\n\r\nThe below thread dump captures the time spent loading the page:\r\n\r\n{noformat}\r\n\"http-nio-8090-exec-2\" #226 daemon prio=5 os_prio=0 cpu=1205421.88ms elapsed=180041.76s tid=0x000000003e65c000 nid=0xb90 runnable  [0x00000000560ce000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat org.hibernate.type.AbstractStandardBasicType.isEqual(AbstractStandardBasicType.java:198)\r\n\tat org.hibernate.type.AbstractStandardBasicType.isSame(AbstractStandardBasicType.java:186)\r\n...\r\n\tat com.atlassian.crowd.embedded.hibernate2.GroupingHibernateSearch.doInHibernate(GroupingHibernateSearch.java:61)\r\n...\r\n\tat com.atlassian.crowd.directory.AbstractInternalDirectory.searchGroupRelationshipsGroupedByName(AbstractInternalDirectory.java:890)\r\n\tat com.atlassian.crowd.directory.DbCachingRemoteDirectory.searchGroupRelationshipsGroupedByName(DbCachingRemoteDirectory.java:1154)\r\n\tat com.atlassian.crowd.manager.directory.RemoteDirectorySearcher.searchDirectGroupRelationshipsGroupedByName(RemoteDirectorySearcher.java:97)\r\n\tat com.atlassian.crowd.manager.directory.RemoteDirectorySearcher.lambda$nestedGroupsProvider$3(RemoteDirectorySearcher.java:220)\r\n\tat com.atlassian.crowd.manager.directory.RemoteDirectorySearcher$$Lambda$1764/0x000000080240a840.getDirectlyRelatedGroups(Unknown Source)\r\n\tat com.atlassian.crowd.manager.directory.nestedgroups.NestedGroupsProviderImpl.getDirectlyRelatedGroups(NestedGroupsProviderImpl.java:26)\r\n\tat com.atlassian.crowd.manager.directory.nestedgroups.NestedGroupsIterator.fetchRelatedGroups(NestedGroupsIterator.java:40)\r\n\tat com.atlassian.crowd.manager.directory.nestedgroups.NestedGroupsIterator.fetchNextIfNeeded(NestedGroupsIterator.java:65)\r\n\tat com.atlassian.crowd.manager.directory.nestedgroups.NestedGroupsIterator.hasNext(NestedGroupsIterator.java:50)\r\n\tat com.atlassian.crowd.manager.directory.nestedgroups.NestedGroupsIterator.anyMatch(NestedGroupsIterator.java:82)\r\n\tat com.atlassian.crowd.manager.directory.RemoteDirectorySearcher.isUserNestedGroupMember(RemoteDirectorySearcher.java:135)\r\n\tat com.atlassian.crowd.manager.directory.DirectoryManagerGeneric.isUserNestedGroupMember(DirectoryManagerGeneric.java:807)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric$3.fallibleCheckForEntity(ApplicationServiceGeneric.java:1050)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric$DirectoryPredicate.apply(ApplicationServiceGeneric.java:1015)\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric$DirectoryPredicate.apply(ApplicationServiceGeneric.java:1011)\r\n...\r\n\tat com.atlassian.crowd.manager.application.ApplicationServiceGeneric.isUserNestedGroupMember(ApplicationServiceGeneric.java:1528)\r\n\tat com.atlassian.crowd.embedded.core.CrowdServiceImpl.isUserMemberOfGroup(CrowdServiceImpl.java:230)\r\n...\r\n\tat com.atlassian.confluence.security.ContentPermission.isPermitted(ContentPermission.java:150)\r\n\tat com.atlassian.confluence.security.ContentPermissionSet.isPermitted(ContentPermissionSet.java:76)\r\n\tat com.atlassian.confluence.core.DefaultContentPermissionManager.hasInheritedContentLevelViewPermissions(DefaultContentPermissionManager.java:247)\r\n\tat com.atlassian.confluence.core.DefaultContentPermissionManager.hasContentLevelPermission(DefaultContentPermissionManager.java:174)\r\n...\r\n\tat com.atlassian.confluence.security.delegate.PagePermissionsDelegate.hasContentLevelViewPermission(PagePermissionsDelegate.java:123)\r\n\tat com.atlassian.confluence.security.delegate.PagePermissionsDelegate.canView(PagePermissionsDelegate.java:20)\r\n\tat com.atlassian.confluence.security.delegate.PagePermissionsDelegate.canView(PagePermissionsDelegate.java:13)\r\n\tat com.atlassian.confluence.security.delegate.TargetToLatestVersionDecorator.canView(TargetToLatestVersionDecorator.java:24)\r\n\tat com.atlassian.confluence.security.delegate.SharedAccessInterceptor$$Lambda$3158/0x000000080309f040.test(Unknown Source)\r\n\tat com.atlassian.confluence.security.delegate.SharedAccessInterceptor.checkAccess(SharedAccessInterceptor.java:87)\r\n\tat com.atlassian.confluence.security.delegate.SharedAccessInterceptor.canView(SharedAccessInterceptor.java:25)\r\n\tat com.atlassian.confluence.security.Permission$1.checkAgainst(Permission.java:17)\r\n\tat com.atlassian.confluence.security.DefaultPermissionManager.hasPermissionNoExemptions(DefaultPermissionManager.java:100)\r\n\tat com.atlassian.confluence.security.delegate.AttachmentPermissionsDelegate.canCreate(AttachmentPermissionsDelegate.java:120)\r\n\tat com.atlassian.confluence.security.DefaultPermissionManager.hasCreatePermission(DefaultPermissionManager.java:115)\r\n...\r\n{noformat}\r\n\r\nh3. Notes\r\nFastpermissions didn't help in this instance. \r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-04-08T17:08:28.000+0000","comments":[{"text":"Our organization is severely affected by this problem since the upgrade to Confluence 7.11.\r\n\r\nWe have hundreds of complex pages that can't be displayed any longer due to a timeout. Virtually leaves Confluence partially unusable for us.\r\n\r\nVery annoying to say the least...","author":"Daniel Köck"},{"text":"My organization is also affected by this problem, pages with many attachments are essentially unusable. Here an extract from a profiling session:\r\n{code:java}\r\n[222.5ms] - PermissionManager.hasCreatePermission()\r\n [221.9ms] [count: 14, avg: 15.8ms] - CrowdService.isUserMemberOfGroup() \r\n  [216.2ms] [count: 16, avg: 13.5ms] - MembershipDao.searchGroupedByName(){code}\r\nif you now have a more complex permission structure with many groups and many attachments and the permission check for each attachment is >200 ms you get page load times of around 20s - 30s.\r\n\r\nMaybe the issue is related to the caching of group memberships? Because it also does not get better with repeated page loads.","author":"Lukas Reichart"},{"text":"On the confluence database I see *a lot* of queries of the format:\r\n\r\n \r\n{code:java}\r\nSELECT  internalgr1_.group_name AS col_0_0_,  hibernatem0_.child_group_id AS col_1_0_,  internalgr2_.id AS id1_28_,  internalgr2_.group_name AS group_na2_28_,  internalgr2_.lower_group_name AS lower_gr3_28_,  internalgr2_.active AS active4_28_,  internalgr2_.local AS local5_28_,  internalgr2_.created_date AS created_6_28_,  internalgr2_.updated_date AS updated_7_28_,  internalgr2_.description AS descript8_28_,  internalgr2_.group_type AS group_ty9_28_,  internalgr2_.directory_id AS directo10_28_,  internalgr2_.external_id AS externa11_28_ FROM  cwd_membership hibernatem0_ CROSS JOIN  cwd_group internalgr1_ INNER JOIN  cwd_group internalgr2_ ON  hibernatem0_.child_group_id=internalgr2_.id WHERE  hibernatem0_.parent_id=internalgr1_.id AND (hibernatem0_.child_user_id IS NULL) AND (internalgr1_.lower_group_name IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, ...\r\n \r\n{code}\r\nwhich for me would be another indicator that this is a caching-related problem?\r\n ","author":"Lukas Reichart"},{"text":"@Lukas Reichart:\r\nWe have analyzed the cache with Atlassian Support and they said the cache is fine.\r\n\r\nThe problem seems to be due to a different method with permission checks that has been introduced with Confluence 7.11 (from what I understood).\r\n\r\nIf you add the user to the confluence-administrators group, the problem disappears for this user, because for the admins, these permission checks are skipped. So, adding the users to this group is the only workaround (apart from rebuilding all affected pages and make them less complex). Of course, giving users full admin permissions is not a workaround that can be used in most organizations...","author":"Daniel Köck"},{"text":"We are having problems with simply viewing restricted pages rather than attachments.\r\nAll sub-pages of a page with complex permissions applied take a long time to display the page.\r\n\r\n \r\n----\r\n{code:java}\r\n2021-04-15 16:23:44,905 DEBUG [https-jsse-nio-443-exec-19] [atlassian.util.profiling.Timers] onClose [7245.6ms] - /display/~finix/test555\r\n [193.4ms] - PermissionManager.isConfluenceAdministrator()\r\n  [192.2ms] [count: 6, avg: 32.0ms] - CrowdService.isUserMemberOfGroup()\r\n   [189.2ms] [count: 7, avg: 27.0ms] - MembershipDao.searchGroupedByName()\r\n [5.2ms] - UserAccessor.getExistingUserByKey()\r\n [6737.8ms] - XW Interceptor: Before defaultStack: /pages/viewpage.action (ViewPageAction.execute())\r\n  [6731.5ms] - SpaceAwareInterceptor.intercept()\r\n   [6731.5ms] - PageAwareInterceptor.intercept()\r\n    [11.3ms] - PageManager.getPageWithComments()\r\n    [18.6ms] - PermissionManager.hasPermission()\r\n     [18.5ms] - DefaultSpacePermissionManager.hasPermissionNoExemptions(VIEWSPACE, finix, ~finix)\r\n      [18.4ms] [count: 2, avg: 9.2ms] - CrowdService.isUserMemberOfGroup()\r\n       [18.0ms] [count: 3, avg: 6.0ms] - MembershipDao.searchGroupedByName()\r\n    [491.0ms] [count: 3, avg: 163.7ms] - PermissionManager.hasPermission()\r\n     [489.6ms] [count: 8, avg: 61.2ms] - CrowdService.isUserMemberOfGroup()\r\n      [484.0ms] [count: 13, avg: 37.2ms] - MembershipDao.searchGroupedByName()\r\n    [6184.2ms] - XW Interceptor: After defaultStack: /pages/viewpage.action (ViewPageAction.execute())\r\n     [6184.2ms] - XW Interceptor: After validatingStack: /pages/viewpage.action (ViewPageAction.execute())\r\n      [6179.4ms] - XW View: doExecute(/pages/viewpage.vm)\r\n       [6177.3ms] - ApplyDecoratorDirective.render()\r\n        [6175.9ms] - Rendering velocity template(/decorators/root.vmd)\r\n         [6175.7ms] - ApplyDecoratorDirective.render()\r\n          [6175.2ms] - Rendering velocity template(/decorators/page.vmd)\r\n           [113.5ms] - ContentEntityManager.getContributionStatusByUser()\r\n           [208.0ms] - PermissionManager.hasPermission()\r\n            [207.8ms] [count: 6, avg: 34.6ms] - CrowdService.isUserMemberOfGroup()\r\n             [205.7ms] [count: 11, avg: 18.7ms] - MembershipDao.searchGroupedByName()\r\n           [99.2ms] - CrowdService.search()\r\n            [8.9ms] - MembershipDao.search()\r\n            [41.3ms] [count: 6, avg: 6.9ms] - MembershipDao.searchGroupedByName()\r\n            [7.1ms] - MembershipDao.search()\r\n            [40.9ms] [count: 6, avg: 6.8ms] - MembershipDao.searchGroupedByName()\r\n           [4472.1ms] - Parse: /decorators/includes/content-navigation.vm\r\n            [224.7ms] - PermissionManager.hasPermissionNoExemptions()\r\n             [45.2ms] - DefaultSpacePermissionManager.hasPermissionNoExemptions(EDITSPACE, finix, ~finix)\r\n              [45.1ms] [count: 2, avg: 22.6ms] - CrowdService.isUserMemberOfGroup()\r\n               [44.6ms] [count: 3, avg: 14.9ms] - MembershipDao.searchGroupedByName()\r\n             [179.3ms] [count: 6, avg: 29.9ms] - CrowdService.isUserMemberOfGroup()\r\n              [177.4ms] [count: 11, avg: 16.1ms] - MembershipDao.searchGroupedByName()\r\n            [596.3ms] [count: 3, avg: 198.8ms] - PermissionManager.hasPermission()\r\n             [595.8ms] [count: 8, avg: 74.5ms] - CrowdService.isUserMemberOfGroup()\r\n              [590.5ms] [count: 13, avg: 45.4ms] - MembershipDao.searchGroupedByName()\r\n            [139.3ms] - PermissionManager.hasPermissionNoExemptions()\r\n             [139.2ms] [count: 6, avg: 23.2ms] - CrowdService.isUserMemberOfGroup()\r\n              [137.7ms] [count: 11, avg: 12.5ms] - MembershipDao.searchGroupedByName()\r\n            [648.5ms] [count: 3, avg: 216.2ms] - PermissionManager.hasPermission()\r\n             [648.1ms] [count: 8, avg: 81.0ms] - CrowdService.isUserMemberOfGroup()\r\n              [643.1ms] [count: 13, avg: 49.5ms] - MembershipDao.searchGroupedByName()\r\n            [83.5ms] - CrowdService.search()\r\n             [7.6ms] - MembershipDao.search()\r\n             [35.5ms] [count: 6, avg: 5.9ms] - MembershipDao.searchGroupedByName()\r\n             [6.0ms] - MembershipDao.search()\r\n             [33.2ms] [count: 6, avg: 5.5ms] - MembershipDao.searchGroupedByName()\r\n            [1525.9ms] [count: 8, avg: 190.7ms] - PermissionManager.hasPermission()\r\n             [1524.7ms] [count: 13, avg: 117.3ms] - CrowdService.isUserMemberOfGroup()\r\n              [1510.0ms] [count: 18, avg: 83.9ms] - MembershipDao.searchGroupedByName()\r\n            [196.9ms] - CrowdService.search()\r\n             [6.4ms] - MembershipDao.search()\r\n             [50.8ms] [count: 6, avg: 8.5ms] - MembershipDao.searchGroupedByName()\r\n             [7.1ms] - MembershipDao.search()\r\n             [131.2ms] [count: 6, avg: 21.9ms] - MembershipDao.searchGroupedByName()\r\n            [208.3ms] - PermissionManager.hasPermission()\r\n             [208.1ms] [count: 6, avg: 34.7ms] - CrowdService.isUserMemberOfGroup()\r\n              [206.3ms] [count: 11, avg: 18.8ms] - MembershipDao.searchGroupedByName()\r\n            [163.4ms] - PermissionManager.hasPermissionNoExemptions()\r\n             [163.2ms] [count: 6, avg: 27.2ms] - CrowdService.isUserMemberOfGroup()\r\n              [161.5ms] [count: 11, avg: 14.7ms] - MembershipDao.searchGroupedByName()\r\n            [635.8ms] [count: 3, avg: 211.9ms] - PermissionManager.hasPermission()\r\n             [635.1ms] [count: 8, avg: 79.4ms] - CrowdService.isUserMemberOfGroup()\r\n              [629.8ms] [count: 13, avg: 48.4ms] - MembershipDao.searchGroupedByName()\r\n           [172.3ms] - PermissionManager.hasPermission()\r\n            [172.2ms] [count: 6, avg: 28.7ms] - CrowdService.isUserMemberOfGroup()\r\n             [170.3ms] [count: 11, avg: 15.5ms] - MembershipDao.searchGroupedByName()\r\n           [4.4ms] - DefaultRenderer.render\r\n            [4.3ms] - DefaultRenderer.renderWithResult\r\n           [458.4ms] - Parse: /decorators/includes/page-content-includes.vm\r\n            [457.3ms] - Parse: /template/includes/page-move-templates.vm\r\n             [286.9ms] - PermissionManager.hasPermission()\r\n              [286.7ms] [count: 6, avg: 47.8ms] - CrowdService.isUserMemberOfGroup()\r\n               [284.9ms] [count: 11, avg: 25.9ms] - MembershipDao.searchGroupedByName()\r\n             [169.9ms] - PermissionManager.hasRemoveHierarchyPermission()\r\n              [169.7ms] [count: 6, avg: 28.3ms] - CrowdService.isUserMemberOfGroup()\r\n               [167.9ms] [count: 11, avg: 15.3ms] - MembershipDao.searchGroupedByName()\r\n           [2.1ms] - Parse: /decorators/includes/page-metadata.vm\r\n           [593.1ms] - ApplyDecoratorDirective.render()\r\n            [592.5ms] - Rendering velocity template(/decorators/root.vmd)\r\n             [592.2ms] - ApplyDecoratorDirective.render()\r\n              [591.7ms] - Rendering velocity template(/decorators/components/comments.vmd)\r\n               [169.0ms] - PermissionManager.hasCreatePermission()\r\n                [151.7ms] [count: 6, avg: 25.3ms] - CrowdService.isUserMemberOfGroup()\r\n                 [149.9ms] [count: 11, avg: 13.6ms] - MembershipDao.searchGroupedByName()\r\n                [17.1ms] - DefaultSpacePermissionManager.hasPermissionNoExemptions(COMMENT, finix, ~finix)\r\n                 [17.0ms] [count: 2, avg: 8.5ms] - CrowdService.isUserMemberOfGroup()\r\n                  [16.7ms] [count: 3, avg: 5.6ms] - MembershipDao.searchGroupedByName()\r\n               [174.3ms] - Rendering velocity template(templates/quick-comment.vm)\r\n                [172.7ms] - PermissionManager.hasCreatePermission()\r\n                 [172.6ms] [count: 6, avg: 28.8ms] - CrowdService.isUserMemberOfGroup()\r\n                  [170.6ms] [count: 11, avg: 15.5ms] - MembershipDao.searchGroupedByName()\r\n               [246.1ms] - PermissionManager.hasCreatePermission()\r\n                [245.9ms] [count: 6, avg: 41.0ms] - CrowdService.isUserMemberOfGroup()\r\n                 [244.1ms] [count: 11, avg: 22.2ms] - MembershipDao.searchGroupedByName()\r\n           [6.9ms] - Parse: /pages/page-breadcrumbs.vm\r\n            [6.1ms] - Parse: /breadcrumbs.vm\r\n           [12.7ms] - Parse: /template/includes/space-tools-web-items.vm\r\n            [12.4ms] - system.space.tools\r\n             [10.7ms] - PermissionManager.hasPermission()\r\n              [10.7ms] - DefaultSpacePermissionManager.hasPermissionNoExemptions(EXPORTSPACE, finix, ~finix)\r\n               [10.6ms] - CrowdService.isUserMemberOfGroup()\r\n                [10.4ms] [count: 2, avg: 5.2ms] - MembershipDao.searchGroupedByName()\r\n [291.1ms] - SiteMesh: applyDecorator: main (/decorators/main.vmd)\r\n  [286.5ms] - Rendering velocity template(/decorators/main.vmd)\r\n   [103.5ms] - Parse: /decorators/includes/header.vm\r\n    [12.5ms] [count: 3, avg: 4.2ms] - ZduManager.getUpgradeStatus()\r\n    [69.7ms] - VelocityFriendlyPageBuilderService.getConfluenceResourceTags\r\n     [3.7ms] - ZduManager.getUpgradeStatus()\r\n     [18.2ms] [count: 5, avg: 3.6ms] - UserAccessor.getExistingUserByKey()\r\n   [177.6ms] - Parse: /decorators/includes/common-header.vm\r\n    [144.6ms] - Parse: /decorators/includes/aui-header-primary.vm\r\n     [120.4ms] - CrowdService.search()\r\n      [6.7ms] - MembershipDao.search()\r\n      [41.6ms] [count: 6, avg: 6.9ms] - MembershipDao.searchGroupedByName()\r\n      [5.8ms] - MembershipDao.search()\r\n      [65.1ms] [count: 6, avg: 10.9ms] - MembershipDao.searchGroupedByName()\r\n    [23.7ms] - Parse: /decorators/includes/aui-header-secondary.vm\r\n     [12.3ms] [count: 3, avg: 4.1ms] - SpaceManager.getPersonalSpace()\r\n    [8.1ms] - Rendering soy template(com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu, navlinks.templates.appswitcher.switcher)\r\n     [6.8ms] [count: 2, avg: 3.4ms] - UserAccessor.getExistingUserByKey()\r\n{code}","author":"KRAFTON Inc."},{"text":"This bug brought a lot of trouble to us.\r\n\r\nWe are running a 7.11.1 in production without a sync to our active directory, because of the bug https://jira.atlassian.com/browse/CONFSERVER-61194. We needed to restart the app-server while a sync job to the ad. So the sync gets stuck and there is no way get it working again.\r\n\r\nSo we need to upgrade to version 7.12 and hoped for a fix. On the other hand we need to active the \"nested\" group function for a rollout of our installation.\r\n\r\nSo we updated to 7.12 and activated the \"nested\" group-feature. The update failed 2x times because if some load goes to our installation the database cpu utilisation got up to 100% and caused a outage of the whole production system.\r\n\r\nIt is a very frustrating situation for us and we need a fix to go on.","author":"christoph.lamprecht"},{"text":"A fix for this issue is available to Server and Data Center customers in Confluence 7.11.3\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/doc/confluence-7-11-release-notes-1035239482.html?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Jiri Hronik"},{"text":"A fix for this issue is available to Server and Data Center customers in Confluence 7.12.1\r\n[Upgrade|https://www.atlassian.com/software/confluence/download?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/doc/confluence-7-12-release-notes-1044092467.html?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Jiri Hronik"},{"text":"A fix for this issue is available to Server and Data Center customers in Confluence 7.13.0\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/doc/confluence-7-13-release-notes-1044114085.html?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Jiri Hronik"}]},{"summary":"Image effects generates bigger PNG images compared to original size with AdoptOpenJDK-11","key":"CONFSERVER-62341","url":"https://jira.atlassian.com/browse/CONFSERVER-62341","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter adding a PNG image to the page and applying a visual effect to it, the image is rendered much bigger (up to 30x and even more compared to the original size). As a result, it leads to the pages with lots of PNG attachments to go over 100+ mb in size that may refuse to open.\r\nh3. Steps to Reproduce\r\n - Spin up a clean Confluence Server instance with AdoptOpenJDK-11. (used latest Docker image - 7.11.1)\r\n - Add a PNG image to the page\r\n - Apply the \"Snapshot\" visual effect to the image.\r\n - Save the page\r\n - Open developer tools in the browser, disable the cache and refresh the page.\r\n\r\nNote: The 'Snapshot' effect is mentioned here, but the outcome is the same, regardless of the effect used (Taped, Instant Camera, Curl Shadow, Snapshot, Drop Shadow).\r\nh3. Expected Results\r\n\r\nThe effect-applied image's size remains close to its original size.\r\n!bugreport_adoptjdk8_1.jpg|thumbnail! \r\n!bugreport_adoptjdk8_2.jpg|thumbnail!\r\nh3. Actual Results\r\n\r\nThe effect-applied image dramatically increases in size.\r\n!bugreport_adoptjdk11_1.jpg|thumbnail! \r\n!bugreport_adoptjdk11_2.jpg|thumbnail!\r\nh3. Workaround\r\n\r\nFor Confluence versions prior to 8.0.0, using either Oracle or OpenJDK 8 will mitigate the problem.\r\n\r\nFor Confluence versions after 8.0.0, the only known workaround is to use a 3rd-party PNG optimiser (such as {{{}optipng{}}}) to optimise the size of PNG files in the image effects cache (eg. {{{}<sharedhome>/imgEffects/{}}}). This workaround can be used prior to Confluence 8.0 as well.","createDate":"2021-03-18T08:07:59.000+0000","comments":[{"text":"Using Oracle JDK 11 does not help. In fact, it often makes the problem worse. The exception is with the customer screenshot and sniptool files - Oracle JDK 11 does perform slightly better.\r\n\r\nThe following tests were conducted with Confluence 7.19.12 DC, using the following JDK's:\r\n * Oracle Java 1.8.0_212\r\n * AdoptOpenJDK 11.0.7+10\r\n * Oracle Java 11.0.19+9-LTS-224\r\n\r\n||Filename||Details||Java||Size||Taped||Instant Camera||Curl Shadow||Snapshot||Drop Shadow||Notes||\r\n|dlZ.png|PNG image data, 1400 x 875, 8-bit colormap, non-interlaced|Java 8|485 KB|675 KB|637 KB|612 KB|602 KB|1.2 MB| |\r\n|dlZ.png|PNG image data, 1400 x 875, 8-bit colormap, non-interlaced|Open JDK 11|485 KB|4.5 MB|8.6 MB|4.2 MB|8.1 MB|4.1 MB| |\r\n|dlZ.png|PNG image data, 1400 x 875, 8-bit colormap, non-interlaced|Oracle JDK 11|485 KB|9.0 MB|8.6 MB|8.3 MB|8.1 MB|8.3 MB| |\r\n|greyscale.png|PNG image data, 1400 x 875, 8-bit grayscale, non-interlaced|Java 8|534 KB|590 KB|1.2 MB|1.1 MB|1.1 MB|1.1 MB| |\r\n|greyscale.png|PNG image data, 1400 x 875, 8-bit grayscale, non-interlaced|OpenJDK 11|534 KB|4.5 MB|4.3 MB|4.2 MB|4.0 MB|4.1 MB| |\r\n|greyscale.png|PNG image data, 1400 x 875, 8-bit grayscale, non-interlaced|Oracle JDK 11|534 KB|9.0 MB|8.6 MB|8.3 MB|4.0 MB|4.1 MB| |\r\n|Beach.png|PNG image data, 1600 x 1200, 8-bit/color RGBA, non-interlaced|Java 8|3.0 MB|7.0 MB|7.0 MB|6.9 MB|3.5 MB|3.5 MB| |\r\n|Beach.png|PNG image data, 1600 x 1200, 8-bit/color RGBA, non-interlaced|OpenJDK 11|3.0 MB|6.8 MB|6.5 MB|12.7 MB|12.4 MB|12.7 MB| |\r\n|Beach.png|PNG image data, 1600 x 1200, 8-bit/color RGBA, non-interlaced|Oracle JDK 11|3.0 MB|6.8 MB|6.5 MB|6.4 MB|6.2 MB|6.3 MB| |\r\n|aurora-simpsons.png|PNG image data, 800 x 532, 8-bit/color RGB, non-interlaced|Java 8|344 KB|658 KB|650 KB|627 KB|624 KB|627 KB| |\r\n|aurora-simpsons.png|PNG image data, 800 x 532, 8-bit/color RGB, non-interlaced|OpenJDK 11|344 KB|1.8 MB|1.6 MB|1.6 MB|1.5 MB|1.6 MB| |\r\n|aurora-simpsons.png|PNG image data, 800 x 532, 8-bit/color RGB, non-interlaced|Oracle JDK 11|344 KB|1.8 MB|1.6 MB|1.6 MB|1.5 MB|1.6 MB| |\r\n|newbury-interlaced.png|PNG image data, 640 x 480, 8-bit/color RGB, interlaced|Java 8|421 KB|505 KB|494 KB|475 KB|472 KB|475 KB| |\r\n|newbury-interlaced.png|PNG image data, 640 x 480, 8-bit/color RGB, interlaced|OpenJDK 11|421 KB|1.3 MB|1.2 MB|1.2 MB|1.1 MB|1.2 MB| |\r\n|newbury-interlaced.png|PNG image data, 640 x 480, 8-bit/color RGB, interlaced|Oracle JDK 11|421 KB|1.3 MB|1.2 MB|1.2 MB|1.1 MB|1.2 MB| |\r\n|newbury-nonint.png|PNG image data, 640 x 480, 8-bit/color RGB, non-interlaced|Java 8|340 KB|505 KB|494 KB|475 KB|472 KB|475 KB| |\r\n|newbury-nonint.png|PNG image data, 640 x 480, 8-bit/color RGB, non-interlaced|OpenJDK 11|340 KB|2.7 MB|2.4 MB|2.3 MB|2.2 MB|2.3 MB| |\r\n|newbury-nonint.png|PNG image data, 640 x 480, 8-bit/color RGB, non-interlaced|Oracle JDK 11|340 KB|1.3 MB|1.2 MB|1.2 MB|1.1 MB|2.3 MB| |\r\n|transparent.png|PNG image data, 360 x 310, 8-bit colormap, non-interlaced|Java 8|36 KB|74 KB|49 KB|45 KB|43 KB|51 KB| |\r\n|transparent.png|PNG image data, 360 x 310, 8-bit colormap, non-interlaced|OpenJDK 11|36 KB|599 KB|517 KB|487 KB|449 KB|480 KB| |\r\n|transparent.png|PNG image data, 360 x 310, 8-bit colormap, non-interlaced|Oracle JDK 11|36 KB|599 KB|1.0 MB|973 KB|898 KB|959 KB| |\r\n|sample-red.png|PNG image data, 400 x 300, 1-bit colormap, non-interlaced|Java 8|641 b|64 KB|2.5 KB|4.7 KB|2.3 KB|5.6 KB| |\r\n|sample-red.png|PNG image data, 400 x 300, 1-bit colormap, non-interlaced|OpenJDK 11|641 b|635 KB|1.1 MB|1.0 MB|957 KB|1.0 MB|for all effects except 'drop shadow', image turned from red to black|\r\n|sample-red.png|PNG image data, 400 x 300, 1-bit colormap, non-interlaced|Oracle JDK 11|641 b|1.3 MB|1.1 MB|1.0 MB|957 KB|1.0 MB|for all effects except 'drop shadow', image turned from red to black|\r\n|customer-screenshot.png|PNG image data, 1912 x 1072, 8-bit/color RGB, non-interlaced|Java 8|73.7 KB|101 KB|115 KB|72 KB|66.3 KB|69.8 KB| |\r\n|customer-screenshot.png|PNG image data, 1912 x 1072, 8-bit/color RGB, non-interlaced|OpenJDK 11|73.7 KB|7.2 MB|13.9 MB|13.6 MB|13.3 MB|13.5 MB| |\r\n|customer-screenshot.png|PNG image data, 1912 x 1072, 8-bit/color RGB, non-interlaced|Oracle JDK 11|73.7 KB|14.4 MB|7.0 MB|6.8 MB|6.6 MB|6.8 MB| |\r\n|customer-sniptool.png|PNG image data, 1863 x 1033, 8-bit/color RGBA, non-interlaced|Java 8|87 KB|96 KB|107 KB|65 KB|59 KB|63 KB| |\r\n|customer-sniptool.png|PNG image data, 1863 x 1033, 8-bit/color RGBA, non-interlaced|OpenJDK 11|87 KB|13.6 MB|13.1 MB|12.8 MB|12.5 MB|12.7 MB| |\r\n|customer-sniptool.png|PNG image data, 1863 x 1033, 8-bit/color RGBA, non-interlaced|Oracle JDK 11|87 KB|13.6 MB|13.1 MB|12.8 MB|6.2 MB|6.4 MB| |\r\n\r\nFor comparison, the following additional tests were conducted with Confluence 8.5.0 DC, using the following JDK's:\r\n * Oracle Java 11.0.19+9-LTS-224\r\n * AdoptOpenJDK 11.0.7+10\r\n * OpenJDK 17.0.5+8\r\n\r\n||Filename||Details||Java||Size||Taped||Instant Camera||Curl Shadow||Snapshot||Drop Shadow||Notes||\r\n|dlZ.png|PNG image data, 1400 x 875, 8-bit colormap, non-interlaced|Open JDK 11|485 KB|4.5 MB|4.3 MB|4.2 MB|4.0 MB|4.1 MB| |\r\n|dlZ.png|PNG image data, 1400 x 875, 8-bit colormap, non-interlaced|Oracle JDK 11|485 KB|4.5 MB|4.3 MB|8.3 MB|8.1 MB|8.3 MB| |\r\n|dlZ.png|PNG image data, 1400 x 875, 8-bit colormap, non-interlaced|OpenJDK 17|485 KB|4.5 MB|4.3 MB|4.2 MB|4.0 MB|4.1 MB| |\r\n|customer-screenshot.png|PNG image data, 1912 x 1072, 8-bit/color RGB, non-interlaced|OpenJDK 11|73.7 KB|7.2 MB|7.0 MB|6.8 MB|6.6 MB|6.8 MB| |\r\n|customer-screenshot.png|PNG image data, 1912 x 1072, 8-bit/color RGB, non-interlaced|Oracle JDK 11|73.7 KB|7.2 MB|7.0 MB|6.8 MB|6.6 MB|13.5 MB| |\r\n|customer-screenshot.png|PNG image data, 1912 x 1072, 8-bit/color RGB, non-interlaced|OpenJDK 17|73.7 KB|7.2 MB|7.0 MB|6.8 MB|6.6 MB|6.8 MB| |","author":"Malcolm Ninnes"}]},{"summary":"Certain editor operations result in spurious \"unpublished changes\" and an empty diff","key":"CONFSERVER-60725","url":"https://jira.atlassian.com/browse/CONFSERVER-60725","type":"Bug","priority":"","description":"When opening an existing page, certain benign operations mark the editor as having unpublished changes. Of note, this will also cause the diff shown in the \"View changes\" menu item to be empty (no blue/green/red highlighted text)\r\n\r\nSteps to reproduce\r\n # Edit an existing page\r\n # Focus the editor and do one of the things from the list below\r\n # Click \"Close\"\r\n\r\nExpected:\r\n * No unpublished changes lozenge on View Page\r\n\r\nActual:\r\n * Unpublished changes lozenge on View Page\r\n\r\nKnown list of editor actions that trigger unpublished changes:\r\n * Navigate cursor via keyboard arrow keys\r\n * Page up/down, home\r\n * Escape\r\n * Select All\r\n * Select text and press Copy (command+C)\r\n * Open Insert menu, link dialog, or attachments dialog\r\n * Preview\r\n * Click \"View Changes\" and close the page \r\n\r\n*Note*\r\nThe unpublished changes lozenge only shows to people that have entered the editor and made changes (spurious ones outlined in this ticket or real changes). Other historical contributors to the page or just page viewers will _not_ see the lozenge. If the lozenge is really bothering you, proceed to the workaround below.\r\n\r\n*Workaround*\r\n * Under the ellipsis menu, click \"Revert unpublished changes\". _Make sure you don't accidentally revert changes you do want to keep_ by clicking _View Changes_.","createDate":"2020-12-24T03:02:38.000+0000","comments":[{"text":"I'm a user (not admin) in our corporation and have the same very annoying issue. According to the bottom reading on any Confluence page, we're running [Atlassian Confluence|https://www.atlassian.com/software/confluence] 8.6.2 (confluence-prod-confluence-prod-0: 23c0c7ea). Please fix this issue or if it is fixed in a newer version, please tell me which version we need to install to have this issue fixed.","author":"Martin Wermers-Pauly"}]},{"summary":"Race condition on i18n caching, which prevent health check monitor plugin running healcheck","key":"CONFSERVER-60344","url":"https://jira.atlassian.com/browse/CONFSERVER-60344","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen restoring full export from Cloud to Confluence Server, there will be a lot of failed health check warning. The health check task can finishing running due to i18n cache is locked.\r\nh3. Steps to Reproduce\r\n\r\nWe currently can't reproduce the problem\r\nh3. Expected Results\r\n\r\nThe health check plugin run normally.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n2020-08-26 20:12:27,585 WARN [HealthCheck:thread-8] [internal.core.service.VCacheLock] lockWithTimeout Interrupted whilst waiting for a lock on cache: \r\njava.lang.InterruptedException\r\n\tat java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireNanos(Unknown Source)\r\n\tat java.base/java.util.concurrent.locks.ReentrantLock.tryLock(Unknown Source)\r\n\tat com.atlassian.vcache.internal.core.service.VCacheLock.lockWithTimeout(VCacheLock.java:50)\r\n\tat com.atlassian.vcache.internal.core.service.VCacheLock.withLock(VCacheLock.java:31)\r\n\tat com.atlassian.vcache.internal.legacy.LegacyJvmCache.get(LegacyJvmCache.java:42)\r\n\tat com.atlassian.vcache.internal.core.metrics.TimedLocalCacheOperations.get(TimedLocalCacheOperations.java:48)\r\n\tat com.atlassian.confluence.impl.vcache.UnblockingRemovalJvmCache.getIfValid(UnblockingRemovalJvmCache.java:68)\r\n\tat com.atlassian.confluence.impl.vcache.UnblockingRemovalJvmCache.get(UnblockingRemovalJvmCache.java:50)\r\n\tat com.atlassian.confluence.util.i18n.CachingI18NBeanFactory.getI18NBean(CachingI18NBeanFactory.java:75)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor346.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n\tat com.sun.proxy.$Proxy517.getI18NBean(Unknown Source)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor346.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:131)\r\n\tat com.sun.proxy.$Proxy517.getI18NBean(Unknown Source)\r\n\tat com.atlassian.sal.confluence.message.ConfluenceI18nResolver.getI18nBeanForCurrentUserDefaultLocale(ConfluenceI18nResolver.java:54)\r\n\tat com.atlassian.sal.confluence.message.ConfluenceI18nResolver.resolveText(ConfluenceI18nResolver.java:29)\r\n\tat com.atlassian.sal.core.message.AbstractI18nResolver.getText(AbstractI18nResolver.java:49)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor498.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:56)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:60)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.eclipse.gemini.blueprint.service.util.internal.aop.ServiceTCCLInterceptor.invokeUnprivileged(ServiceTCCLInterceptor.java:70)\r\n\tat org.eclipse.gemini.blueprint.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:53)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.eclipse.gemini.blueprint.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:57)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\r\n\tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy1933.getText(Unknown Source)\r\n\tat com.atlassian.troubleshooting.healthcheck.DefaultSupportHealthCheckSupplier.getText(DefaultSupportHealthCheckSupplier.java:136)\r\n\tat com.atlassian.troubleshooting.healthcheck.DefaultSupportHealthCheckSupplier.asPluginSuppliedSupportHealthCheck(DefaultSupportHealthCheckSupplier.java:128)\r\n\tat com.atlassian.troubleshooting.healthcheck.DefaultSupportHealthCheckSupplier.lambda$healthChecksFrom$2(DefaultSupportHealthCheckSupplier.java:120)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(Unknown Source)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(Unknown Source)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(Unknown Source)\r\n\tat com.atlassian.troubleshooting.healthcheck.DefaultSupportHealthCheckSupplier.healthChecksFrom(DefaultSupportHealthCheckSupplier.java:122)\r\n\tat com.atlassian.troubleshooting.healthcheck.DefaultSupportHealthCheckSupplier.byInstance(DefaultSupportHealthCheckSupplier.java:87)\r\n\tat com.atlassian.troubleshooting.healthcheck.SupportHealthStatusBuilder.getHelpPathUrl(SupportHealthStatusBuilder.java:109)\r\n\tat com.atlassian.troubleshooting.healthcheck.SupportHealthStatusBuilder.buildStatus(SupportHealthStatusBuilder.java:134)\r\n\tat com.atlassian.troubleshooting.healthcheck.SupportHealthStatusBuilder.ok(SupportHealthStatusBuilder.java:62)\r\n\tat com.atlassian.troubleshooting.healthcheck.checks.ThreadLimitHealthCheck.check(ThreadLimitHealthCheck.java:45)\r\n\tat com.atlassian.troubleshooting.healthcheck.impl.PluginSuppliedSupportHealthCheck.check(PluginSuppliedSupportHealthCheck.java:49)\r\n\tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n{noformat}\r\nh3. Workaround\r\n\r\nRunning confluence with more param but it could slow due to reload i18n resource: \r\n{code:java}\r\nCATALINA_OPTS=\"-Dconfluence.i18n.reloadbundles=true ${CATALINA_OPTS}\" {code}","createDate":"2020-09-30T00:53:27.000+0000","comments":[]},{"summary":"Notification Email Grammatically Incorrect","key":"CONFSERVER-59434","url":"https://jira.atlassian.com/browse/CONFSERVER-59434","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nNotification email of multiple Edit on Pages send an email stating: \"There's 14 new edits on this page\".\r\n\r\nWhen multiple edits are made, multiple emails are sent, with the incorrect wording.\r\nh3. Environment\r\n\r\nConfluence\r\nh3. Steps to Reproduce\r\n # Edit multiple pages.\r\n # Check the notification emails.\r\n\r\nh3. Expected Results\r\n\r\nThe notification email should be grammatically correct, if there are more then one change, \r\n it should be \"There are\" or simply remove the \"There's\" from the sentence.\r\nh3. Actual Results\r\n\r\nThe notification email writes: \"There's XX new edits on this page\"\r\nh3. Workaround\r\n\r\n_._\r\n\r\nNotes","createDate":"2020-02-05T17:30:51.000+0000","comments":[]},{"summary":"External group with a comma or a slash does not work on space/global permissions page","key":"CONFSERVER-59351","url":"https://jira.atlassian.com/browse/CONFSERVER-59351","type":"Bug","priority":"","description":"{panel:title=Atlassian Update – 24 May 2023|borderStyle=solid|borderColor=#deebff|titleBGColor=#deebff|bgColor=#deebff}\r\n\r\nHello Everyone,\r\n\r\nI'm one of the Product Managers working on Confluence Data Center and wanted to thank you for your interest in this fix.\r\n\r\nWe recognise the need to resolve this issue, however this is not currently on our short-term roadmap.\r\n\r\nWe are investigating when and how we can deliver a fix in the future and will be sure to share any updates.\r\n\r\nKind regards,\r\n\r\nJacqueline Bietz\r\n\r\nConfluence Data Center\r\n{panel}\r\n\r\nh3. Problem\r\nWhen setting space or global permissions in Confluence, external group names containing a comma (\",\") trigger an error message instead of being added successfully. This issue affects external user directories such as LDAP or Active Directory, preventing correct permission assignments.\r\n\r\nh3. Environment\r\nConfluence Server & Data Center\r\n\r\nh3. Steps to Reproduce\r\n# Set up an external user management system such as OpenLDAP or Active Directory.\r\n# Sync an external group that contains a comma (\",\") in its name (e.g., \"Engineering, DevOps\").\r\n# Navigate to the *Global Permissions* or *Space Permissions* settings page in Confluence.\r\n# Search the group.\r\n# Select the synced external group with a comma in its name from the *popup dropdown list*.\r\n# Click Add to assign permissions.\r\n\r\nh3. Expected Results\r\nThe group should be added successfully with its full name preserved.\r\n\r\nh3. Actual Results\r\n* The system displays an error message, preventing the group from being added.\r\n* This issue affects all external groups with commas in their names.\r\n!Screenshot 2025-02-04 at 5.32.35 PM.png|thumbnail! \r\n\r\nh3. Workaround\r\n# Instead of selecting the group from the dropdown list, click the *magnifying glass button* next to the \"Add\" button.\r\n# In the pop-up window, search for the group again and select it from there.\r\n\r\nh3. Note","createDate":"2020-01-15T22:10:01.000+0000","comments":[{"text":"still affected on confluence 7.19.X\r\n\r\nissue occurs specifically with the cn LDAP attribute having \", \", when using both the internal connector and  connector with crowd ","author":"Tyler Mellor"},{"text":"{panel:title=Atlassian Update – 24 May 2023|borderStyle=solid|borderColor=#deebff|titleBGColor=#deebff|bgColor=#deebff}\r\n\r\nHello Everyone,\r\n\r\nI'm one of the Product Managers working on Confluence Data Center and wanted to thank you for your interest in this fix.\r\n\r\nWe recognise the need to resolve this issue, however this is not currently on our short-term roadmap.\r\n\r\nWe are investigating when and how we can deliver a fix in the future and will be sure to share any updates.\r\n\r\nKind regards,\r\n\r\nJacqueline Bietz\r\n\r\nConfluence Data Center\r\n{panel}","author":"Jacqueline Bietz"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"When Chrome requires \"SameSite=None; Secure\" for cross-site cookies, warning messages are displayed in the Developer Tools console","key":"CONFSERVER-59298","url":"https://jira.atlassian.com/browse/CONFSERVER-59298","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nStarting in February 2020, Chrome version 80 (and later Firefox and IE as well) will start enforcing different requirements on cross-site cookies. Reference [https://blog.chromium.org/2019/10/developers-get-ready-for-new.html] for full details on the change in Chrome's behavior.\r\n\r\nWarnings about this can be seen in the Developer Tools console when navigating to pages that have content from an app-linked Jira instance. \r\nh3. Steps to Reproduce\r\n # (prior to the Chrome version 80 rollout) In Chrome version 77+ go to \"chrome://flags/\"\r\n # Search for \"SameSite\" and enable \"SameSite by default cookies\" and \"Cookies without SameSite must be secure\"\r\n # In a Confluence instance which has an application link to a Jira instance, navigate to a Confluence page that has integrated content from Jira (gadgets, issue filters, etc.) \r\n\r\nh3. Expected Results\r\n\r\nJira content will be displayed and no warning messages about the cross-site cookies will be displayed in the Developer Tools console. \r\nh3. Actual Results\r\n\r\nJira content is displayed and the below message is displayed in the Developer Tools console:\r\n{noformat}\r\nA cookie associated with a cross-site resource at http://JIRA-HOSTNAME/ \r\nwas set without the `SameSite` attribute. A future release of Chrome will \r\nonly deliver cookies with cross-site requests if they are set \r\nwith `SameSite=None` and `Secure`. You can review cookies in \r\ndeveloper tools under Application>Storage>Cookies and see \r\nmore details at https://www.chromestatus.com/feature/5088147346030592 \r\nand https://www.chromestatus.com/feature/5633521622188032.\r\n{noformat}\r\nh3. Workaround\r\n * Currently there is no known workaround for this behavior within Confluence. \r\n * Disable `SameSite` change at Chrome as described in [Turning off Google Chrome SameSite Cookie Enforcement|https://support.siteimprove.com/hc/en-gb/articles/360007364778-Turning-off-Google-Chrome-SameSite-Cookie-Enforcement].\r\n * Add cookie headers (SameSite=None) at Tomcat level, Tomcat 8.5.42 introduced a global same-site cookie setting in the default _Rfc6265CookieProcessor_.  Check [Tomcat and Jetty SameSite Workarounds|https://wiki.shibboleth.net/confluence/display/DEV/Tomcat+and+Jetty+SameSite+Workarounds] for more details\r\n * Add cookie headers at the proxy level:\r\n ** For example, if using HAProxy, set _SameSite=None_ and explicitly add _Secure_ as it's required (credit to [~ov3]):\r\n{code:java}\r\nhttp-response replace-header Set-Cookie ^(.*) \\1;\\ SameSite=None;\\ Secure\r\n{code}\r\n\r\n ** Likewise for F5, an iRule can be utilized:\r\n{code:java}\r\n# Set SameSite attribute for the JSESSIONID cookie to \"lax\"\r\nwhen HTTP_RESPONSE {\r\n    if {[HTTP::cookie exists \"JSESSIONID\"]}{\r\n        HTTP::cookie attribute \"JSESSIONID\" remove {samesite}\r\n        HTTP::cookie attribute \"JSESSIONID\" insert {samesite} \"lax\"\r\n    }\r\n}\r\n{code}\r\n\r\n ","createDate":"2019-12-20T00:48:43.000+0000","comments":[{"text":"Affecting Jira 8.5.4","author":"Richard Cross"},{"text":"Our app is affected as well. We are doing an integration of Confluence content in another system and this policy prevents the data to be loaded.","author":"Andi Muka"},{"text":"Hi all,\r\n\r\nwe at [resolution|https://marketplace.atlassian.com/vendors/1210947/resolution-reichert-network-solutions-gmbh] have created a very small open-source app as another workaround if your Confluence version is too old for the Tomcat workaround (or you can't / don't want to modify your config files) and you don't use / don't want to configure a load balancer that can modify the header for you.\r\n\r\nThe (unsupported) app can be downloaded at [https://bitbucket.org/resolutiongmbh/add-samesite-cookie-attribute-plugin/downloads/] . It's very small and only sets the {{SameSite=None}} (and {{secure}}) flags on the JSESSIONID cookie. It's as simple as installing the app (restarting the instance might be necessary). You can consult the README in that repository for more information. \r\n\r\nIf you're using [our SAML SSO app|https://marketplace.atlassian.com/apps/1212129/saml-single-sign-on-confluence-sso-confluence-saml-sso?hosting=datacenter&tab=overview], that same code is already included starting with version 4.0.7 and can be activated in the app's settings under the \"Advanced\" tab. ","author":"Tobi Theobald (resolution)"},{"text":"Tobias,\r\n\r\nIs there a minimum Confluence version for your SameSite app to work? I tried installing it in Confluence 5.1.3 and it spit back an error.\r\n\r\nTerry\r\n\r\n ","author":"Deleted Account"},{"text":"Hi Terry,\r\n\r\nI haven't tested it on such an old (7 years?) Confluence version. My guess would be that the Java version 8 was not yet supported back then. If that's the case, you could try compiling it to an older version of Java by modifying the pom.xml . \r\n\r\nBut again, this is unsupported, so that's all I'm going to say on that topic. And your Confluence version is horribly out of date, which poses a security risk.","author":"Tobi Theobald (resolution)"},{"text":"Our Confluence server is running Java version \"1.8.0_92\" so it must be something else. Anything else come to mind?\r\n\r\nTerry\r\n\r\n ","author":"Deleted Account"},{"text":"[~tobitheo] - THANK YOU SO MUCH. The confluence .jar plugin that you provided quickly resolved this sudden issue for us. We use Resolution's SSO add-on for JSD to resolve the issue where Refined for ServiceDesk breaks the Okta SSO redirect in the customer portal, so now we are using two of your add-ons ;) \r\n\r\nThis issue came onto our radar because Chrome now forcibly drops Confluence's cookies when we embed the confluence iFrame into our JSD portal. \r\n\r\nIs there any tangible difference between solving the problem with your .jar file, versus solving it at the Apache level? ","author":"Will Balson"},{"text":"@wbalson1084395757 Glad to hear it's working for you and that you're happy with our SSO app :)\r\nThere's probably not a big difference between these options. Both techniques have their pros & cons. For example who's responsible (if the person maintaining Confluence is different from the person maintaining the reverse proxy), where do you do the modification so you know to revert it if the feature comes at some point. Stuff like that. What I could see is that is probably takes more trust into a third party developer (hi :) ) to install one of their JARs instead of doing a config change in your reverse proxy. The chance of such a JAR file failing at some point when doing upgrades is probably higher than Apache deciding to change their config format.\r\nI also haven't tested what the performance impact of both techniques would be. I think it should be pretty minimal on both platforms though.\r\nSo if I were an admin, my preferred solution in order of most to least preferred would be: Tomcat config option > Reverse proxy config > JAR file > Disabling option in Chrome\r\n(I would prefer the Tomcat solution over the others because I think SameSite cookie policy is a thing the application should be responsible for and it doesn't require installing a third party software. But I do realize that it might not be an option for people who don't have a new enough Confluence version, which is likely why you're reading this in the first place ;) )","author":"Tobi Theobald (resolution)"},{"text":"Affecting 8.5.8 but with the .jar plugin from Tobi Theobald we could resolve the issue. :) Does it open any security vulnerabilities [~a6fe340952da] when you set samesite to secure with your plugin or on the proxy level?","author":"Christopher Orendi"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.20. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.2.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"\"Sort by\" function in \"Page Properties Report\" macro doesn't work with @user mention, status macro and page links","key":"CONFSERVER-59179","url":"https://jira.atlassian.com/browse/CONFSERVER-59179","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\"Sort by\" function in \"Page Properties Report\" macro doesn't work with @user mention\r\n\r\nPlugin version : 5.2.3\r\n{noformat}\r\nPage Properties Macros - Plugin (confluence.extra.masterdetail, Version: 5.2.3, Installed: bundled)\r\n{noformat}\r\n\r\nh3. Steps to Reproduce\r\n# Create pages with Page Properties Macro\r\n!image-2019-11-28-16-37-10-743.png|thumbnail! \r\n# Create page with Page Properties Report Macro\r\n!image-2019-11-28-16-37-55-519.png|thumbnail! \r\n# Edit Page Properties Report Macro to sort by @user mention column\r\n!image-2019-11-28-16-39-16-285.png|thumbnail! \r\n\r\nh3. Expected Results\r\nAble to sort by @user mention\r\n !image-2019-11-28-16-43-10-553.png|thumbnail! \r\n\r\nh3. Actual Results\r\nUnable to sort by @user mention\r\n !image-2019-11-28-16-43-39-096.png|thumbnail! \r\n\r\nh3. Workaround\r\nSave the page and manually sort at page view\r\n !image-2019-11-28-16-44-54-511.png|thumbnail! ","createDate":"2019-11-28T08:46:31.000+0000","comments":[{"text":"I want add, this macro doesn't work neither with @user mention nor with macro \"status\". \r\n\r\nRegards, \r\n\r\nBenoit.","author":"Benoit Wiskow"},{"text":"Hi, \r\n\r\nCan i have feedback about this request ? \r\n\r\nRegards,","author":"Benoit Wiskow"},{"text":"This bug has been around for years. Will it be fixed at some point?","author":"Jürgn"}]},{"summary":"Application Navigator button doesn't work if the user is not authenticated","key":"CONFSERVER-58238","url":"https://jira.atlassian.com/browse/CONFSERVER-58238","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen clicking the App Switcher in Confluence (Application Navigator), the links don't come up and we receive an error message instead.\r\n\r\n !appswitcher-fail.png|thumbnail! \r\n\r\nh3. Environment\r\n - Confluence 6.13+\r\n\r\nh3. Steps to Reproduce\r\n # Install Confluence 6.13.0 or later;\r\n # Go to *Administration > Application Navigator*;\r\n # Add a new link;\r\n ** If you have an Application Link configured (e.g. Jira), it will automatically add a new line.\r\n ** If there's no Application Link, anything works, like Name: \"Google\" - URL: \"https://google.com\";\r\n # Reload the page and click the App switcher (top right corner) button to confirm it's working;\r\n # Log out and click the App switcher again.\r\n\r\nh3. Expected Results\r\n\r\nThe links appear just fine.\r\nh3. Actual Results\r\n\r\nThe popup only shows \"Something went wrong, please try again.\"\r\n\r\nNothing appears in the application logs, but browser network console reveals a 401 response if we click the \"Try again\" link:\r\n{noformat}\r\nRequest URL: http://localhost:8090/confluence/rest/menu/latest/appswitcher?_=1557241377796\r\nRequest Method: GET\r\nStatus Code: 401 \r\n{noformat}\r\nh3. Workaround\r\n\r\nEnabling *Anonymous access* in Global Permissions is a possible workaround, since this is caused by an unauthorized request. As long as the spaces don't allow Anonymous access, no content will be visible.","createDate":"2019-05-07T15:15:17.000+0000","comments":[{"text":"We are experiencing this issue, that the application navigator doesn't work if you aren't logged in. Sine not all users have access to all services (Jira/Confluence/Bitbucket) this is a limitations since they cant navigate from the default if they dont have access, meaning then will have to type the full URL manually.","author":"Peter S."},{"text":"We also have the same error, with Confluence 7.2.1. As we have enabled external user management, while using Crowd, some customers and also colleagues can't find the link to Crowd, which is in the application navigation ...","author":"Alexander Gülker"},{"text":"We are using Confluence 7.1.0, if the user is not logged in to Confluence, this error occurs.\r\n\r\nWasn't like this when we were using 6.9.1.","author":"JWCho"},{"text":"The new enterprise release Confluence 7.4.0 has the same problem.","author":"Tim Eddelbüttel"},{"text":"Same on 7.5.0","author":"Soheil Gharedaghi"},{"text":"Same on 7.19.4","author":"Gunasekaran N"},{"text":"Workaround (enabling anonymous access) isn't acceptable for us.\r\n\r\nIs any another way to resolve it?","author":"Alexey Astafyev"}]},{"summary":"Certification issue when creating Shared Links","key":"CONFSERVER-58224","url":"https://jira.atlassian.com/browse/CONFSERVER-58224","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen creating Shared Links by using an address without valid certification (such as an internal URL for example), the creation fails.\r\n\r\n\r\nh3. Steps to Reproduce\r\n # Create a Shared Link through the Share a Link blueprint\r\n # Insert a link to a page that doesn't have valid certification\r\n\r\n\r\nh3. Expected Results\r\nThe link would be created as normal. \r\n\r\nh3. Actual Results\r\nAn error message is displayed: \"We can't create that Blueprint right now\".\r\n\r\nThe below exception is thrown in the {{atlassian-confluence.log}} file:\r\n{noformat}\r\nERROR [https-jsse-nio2-443-exec-22] [plugins.sharelinks.metaextractor.MasterLinkMetaDataExtractor] getHeadHtmlData Error with io exception: \r\n -- referer: https://<confluence-url>/plugins/sharelinksbookmarklet/bookmarklet.action?bookmarkedURL=<redacted> | url: /rest/create-dialog/1.0/content-blueprint/create-content | traceId: 5d20c46634ead5dc | userName: <redacted>\r\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\n{noformat}\r\nh3. Notes\r\nWhitelist features have no effect on this - this doesn't work with Whitelist turned off, and also doesn't work even if the link is explicitly enabled in the Whitelist.\r\n\r\nProxies also have no effect on this behavior.\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2019-05-02T21:32:07.000+0000","comments":[{"text":"We have the same behavior on Confluence 6.15.10, with the following trace:\r\n{code:java}\r\n[plugins.sharelinks.metaextractor.MasterLinkMetaDataExtractor] getHeadHtmlData Error with io exception: -- referer: https://confludsi.prod.adp.fr:8443/pages/viewpage.action?pageId=328667 | url: /rest/create-dialog/1.0/content-blueprint/create-content | traceId: bff6663781980ba8 | userName: jira_prod java.net.SocketTimeoutException: connect timed out\r\n{code}","author":"Corentin Bresson"},{"text":"We have seen this behavior on Confluence 6.13.12 with the following trace:\r\n\r\n \r\n{code:java}\r\n2020-10-27 05:22:11,295 ERROR [https-jsse-nio-8443-exec-92 url:/rest/create-di...int/create-content username:jira_prod] [plugins.sharelinks.metaextractor.MasterLinkMetaDataExtractor] getHeadHtmlData Error with io exception:\r\n-- referer: https://confluence.agileservices.com/display/&#126;myspace/Shared+links | url: /rest/create-dialog/1.0/content-blueprint/create-content | traceId: a74a6b5b157653ca | userName: jira_prod\r\njava.net.SocketTimeoutException: connect timed out\r\nat java.net.PlainSocketImpl.socketConnect(Native Method){code}","author":"Madhu Babu Kandragula"}]},{"summary":"Better error reporting in vcache for null lookups","key":"CONFSERVER-57470","url":"https://jira.atlassian.com/browse/CONFSERVER-57470","type":"Bug","priority":"","description":"h3. Summary\r\nWhen Confluence tries to look up something in the cache using a NULL, it cannot find it and outputs the following error in the {{atlassian-confluence.log}} file:\r\n{code}\r\n2018-10-11 15:38:29,703 WARN [main] [confluence.impl.vcache.SynchronousExternalCache] lambda$get$11 Failed to read entry from cache 'com.atlassian.bandana.BandanaPersister': Failed due to UNCLASSIFIED_FAILURE\r\n{code}\r\n\r\nh3.Workaround\r\nThere's no workaround at this time","createDate":"2018-11-07T22:41:53.000+0000","comments":[{"text":"The same messages in 6.11.2","author":"Oleksiy Brushkovskyy"},{"text":"same messages in 6.13.2","author":"Patrik Vincej"},{"text":"Still present 6.13.4, always 2 of these lines on startup\r\n\r\n ","author":"April"},{"text":"same 6.15.7","author":"Italo Qualisoni [e-Core]"},{"text":"Same messages pop up during startup in 7.0.1.","author":"Jaap"},{"text":"Affects also Confluence Enterprise Server 6.13.10\r\n\r\nAppears at least 24 times during boot time, that wastes few minutes","author":"Gilles GAIDO"},{"text":"Also exists in 7.4.0.","author":"Wendy Fergusson"},{"text":"Dear Support,\r\n\r\nIt affects the Confluence DC edition 7.3.4. Below \"WARN\" hits every 10 secs once and because of this log file size is keep increasing.\r\n\r\nWARN [Navlink Plugin Executor:thread-6] [confluence.impl.vcache.SynchronousExternalCache] lambda$get$11 Failed to read entry from cache 'com.atlassian.bandana.BandanaPersister': Failed due to UNCLASSIFIED_FAILURE\r\n\r\nPlease advise and fix this issue.\r\n\r\nThanks.","author":"Saravana Kumar"},{"text":"Hi,\r\n\r\nWe have migrated to Confluence Server 7.4.0 and it was working fine. Now we have followed [https://confluence.atlassian.com/kb/how-to-fix-the-collation-and-character-set-of-a-mysql-database-744326173.html] to use 4-bytes, and now, Confluence does not start :(","author":"Rafael Corredor"},{"text":"This error causes our Confluence Server 7.4.1 to take an extra 5 minutes to start up.\r\n\r\nPlease fix or find workaround.\r\n\r\nThanks!\r\nRick","author":"Rick Carini"},{"text":"In my case the plugin state map was reset. Since then the message is gone. \r\n[How to reset all Confluence plugins back to their default state through the database|https://confluence.atlassian.com/confkb/how-to-reset-all-confluence-plugins-back-to-their-default-state-through-the-database-859509873.html]","author":"Ti.Sch."},{"text":"Hi Atlassian Team,\r\n\r\nI am also seeing same errors floating in 7.4.4 as well due to this our monitoring tool is killing us with error percentage messages.\r\n\r\nkindly let us know,\r\n # will it impact the confluence performance due to this errors?\r\n # is there any work around to stop these error messages?","author":"Jagan Kattaru"}]},{"summary":"Recently worked on dashboard tab can be slow on SQL Server 2014","key":"CONFSERVER-57457","url":"https://jira.atlassian.com/browse/CONFSERVER-57457","type":"Bug","priority":"","description":"h2. Steps to reproduce\r\n * Set up Confluence 6.6.7 with a SQL Server 2014 v12.0.5589 database (may affect other versions of SQL Server as well)\r\n * Populate the database with data with dimensions similar to this:\r\n ** Over 2 million rows in the content table\r\n ** At least one user with ~10,000 documents or versions of documents modified\r\n * Visit the recently worked on tab in the dashboard\r\n\r\nh2. Expected results\r\n\r\nDashboard tab loads in a timely manner.\r\nh2. Actual results\r\n\r\nDashboard tab never loads. The database CPU spikes for a long time and the query takes about 30 minutes to return. Due to the database being so busy this can cause stability issues causing the rest of Confluence to stop working as well.\r\nh2. Workaround\r\n\r\nThe best workaround at the moment is to disable the feature. This involves 2 steps:\r\n # Modify your reverse proxy settings to block requests to the search endpoint when the any requests matching this pattern is issued:\r\n{noformat}\r\n/rest/api/content/search\\?.*recentlyModifiedPagesAndBlogPostsByUser.*{noformat}\r\nUnfortunately there is no way to do this within Tomcat or Confluence itself.\r\n # Add the following CSS to remove the link from the dashboard:\r\n{code:java}\r\n.confluence-dashboard li.nav-item-container-recently-worked {\r\n    display: none;\r\n}\r\n{code}","createDate":"2018-11-05T05:37:32.000+0000","comments":[]},{"summary":"childPagesContextualNav impacts Confluence performance","key":"CONFSERVER-56068","url":"https://jira.atlassian.com/browse/CONFSERVER-56068","type":"Bug","priority":"","description":"Page tree from ia plugin (which is displayed when sidebar is collapsed) could affect performance for huge spaces. Page tree loading takes a lot of time and looks like: \r\n !Screen Shot 2018-07-09 at 4.31.59 pm.png|thumbnail!\r\n\r\nThe same problem is described for page tree plugin in https://jira.atlassian.com/browse/CONFSERVER-55392\r\n\r\nWhat's more, if a user clicks to this icon several times, there will be several heavy requests to the backed sent.","createDate":"2018-07-09T06:36:02.000+0000","comments":[]},{"summary":"Team Calendars \"Week\" view unusable at certain window sizes","key":"CONFSERVER-55800","url":"https://jira.atlassian.com/browse/CONFSERVER-55800","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen there are several all-day events on a Calendar, the \"hourly\" portion of the calendar can become unusably small in the \"Week\" view, depending on the size of the browser window.\r\nh3. Environment\r\n\r\nVerified in Chrome and Firefox, using Team Calandars 6.0.12 on Confluence 6.8.0.\r\nh3. Steps to Reproduce\r\n # In Team Calendars, create 4 or more all-day events with long descriptions\r\n # Select the \"Week\" view\r\n # Adjust the width of the window to various sizes\r\n\r\nh3. Expected Results\r\n * At all window sizes, the calendar adjusts to show all data\r\n\r\nh3. Actual Results\r\n * At a certain width, the \"All day\" section takes over, leaving the \"hourly\" portion just a few pixels tall.\r\n * The exact behavior and window size seems to vary based on the data shown in the calendar, but in the example below, the issue presented itself when the browser was between about 1500 and 2340 pixels wide:\r\n !calendar_bug_example.png|thumbnail!\r\n * At smaller sizes, the entire agenda block is scrollable, allowing you to scroll down to move up the \"All day\" portion and see more of the \"Hourly\" portion. When this bug is happening, however, the \"All day\" and \"Hourly\" section heights are fixed.\r\n\r\nh3. Workaround\r\n\r\nAdjust the window to a different size and refresh the page.","createDate":"2018-06-01T20:14:32.000+0000","comments":[]},{"summary":"Labels List Macro should not include results from Space trash and Drafts","key":"CONFSERVER-55441","url":"https://jira.atlassian.com/browse/CONFSERVER-55441","type":"Bug","priority":"","description":"h2. Summary\r\nThe Labels List macro is returning labels that match content which are only in the space trash. These labels should be excluded from the macro as users cannot actually access those pages in the trash.\r\n\r\nh2. Steps to reproduce\r\n# Create a page and add a label to it\r\n# Create another page in the same space with the \"Labels List\" macro\r\n# Delete the first page so that it goes to the space trash\r\n\r\nh2. Expected behavior\r\nThe Labels List macro should not show the label, as there are no accessible content with that label\r\n\r\nh2. Actual behavior\r\nThe Labels List macro still shows the label. When clicked, the ensuing page shows \"There are no pages at the moment.\" This can be confusing to users.\r\n\r\nh2. Workaround\r\n* Purge the trash (which will permanently delete the page) or publish the drafts\r\n* OR, if you wish for the page to remain in the trash, recover the page and remove the label before re-deleting it, or remove the label from the draft page","createDate":"2018-04-27T18:17:19.000+0000","comments":[{"text":"tested the work around of purging the trash, however this did not solve, and the label had to be added to the filter out setting of the macro.","author":"Valerie Hunt"},{"text":"have purged the trash in our confluence space, however this did not remove all of the empty labels.... ","author":"kassandra.kenny"},{"text":"After converting hundreds if not thousands of lucid images, we now find that our labels list includes \"lucid-conversion-<number>\" for every converted image. The Labels list macro has become unusable for us.","author":"Adrian Morse"},{"text":"The suggested workaround (purge trash of the space it occurs) is especially cumbersome in the event of the label being: _unrestored-unknown-attachment_  that was introduced as a fix earlier ([Newly created pages are labelled unintentionally with 'unrestored-unknown-attachment' label | Confluence | Atlassian Documentation|https://confluence.atlassian.com/confkb/newly-created-pages-are-labelled-unintentionally-with-unrestored-unknown-attachment-label-1252329896.html]) as this can occur in all spaces. ","author":"Dick"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Copy page hierarchy can cause high CPU","key":"CONFSERVER-55337","url":"https://jira.atlassian.com/browse/CONFSERVER-55337","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nThe copy page hierarchy tool was introduced in Confluence 6.0.1. We have found that in some cases, the copy page hierarchy can cause CPU to spike in Confluence prompting a restart.\r\nh3. Steps to Reproduce\r\n # Create a space with thousands of page within it - in our example, this was generated from a space with 40k pages in it\r\n # Visit a page with an extensive page hierarchy\r\n # *...* > Copy\r\n # Select a destination space and home page.\r\n # Mark the box for Include Child Pages\r\n # From the next modal, leave the following options all marked: Labels, Attached files and images, Restrictions\r\n # Click copy to start the process\r\n\r\nh3. Expected Results\r\n\r\nThe copy page hierarchy will complete and maintain an expected amount of CPU.\r\nh3. Actual Results\r\n\r\nThe copy page hierarchy causes high CPU and a long running query, that appear as such in thread dumps, SQL logging:\r\n{code:java|title=SQL query that gets executed for page move}\r\nSELECT DISTINCT page0_.title AS col_0_0_ \r\nFROM   content page0_ \r\n       LEFT OUTER JOIN confancestors ancestors1_ \r\n                    ON page0_.contentid = ancestors1_.descendentid \r\n       LEFT OUTER JOIN content contentent2_ \r\n                    ON ancestors1_.ancestorid = contentent2_.contentid \r\nWHERE  page0_.contenttype = 'PAGE' \r\n       AND ( contentent2_.contentid = @P0 \r\n              OR page0_.contentid = @P1 ) \r\n       AND page0_.spaceid = @P2 \r\n       AND ( page0_.prevver IS NULL ) \r\n       AND page0_.content_status = 'current' \r\n       AND ( Ltrim(Rtrim(( @P3 + Replace(page0_.lowertitle, @P4, @P5 ) ))) IN \r\n                   (SELECT page3_.lowertitle \r\n                   FROM \r\n                   content page3_ \r\n                   WHERE \r\n                   page3_.contenttype = 'PAGE' \r\n                   AND page3_.spaceid = @P6 \r\n                   AND ( page3_.prevver IS NULL ) \r\n                   AND page3_.content_status = 'current'))\r\n{code}\r\n{code:java|title=Threads stack up in Running state from thread dumps}\r\n\"http-nio-8080-exec-278\" daemon prio=5 tid=0x00000000000001bf nid=0 runnable \r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat java.io.DataInputStream.readFully(DataInputStream.java:195)\r\n\tat java.io.DataInputStream.readFully(DataInputStream.java:169)\r\n\tat net.sourceforge.jtds.jdbc.SharedSocket.readPacket(SharedSocket.java:850)\r\n\tat net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:731)\r\n\t- locked <0x000000003d2974d9> (a java.util.concurrent.ConcurrentHashMap)\r\n\tat net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477)\r\n\tat net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114)\r\n\tat net.sourceforge.jtds.jdbc.ResponseStream.peek(ResponseStream.java:99)\r\n\tat net.sourceforge.jtds.jdbc.TdsCore.wait(TdsCore.java:4127)\r\n\tat net.sourceforge.jtds.jdbc.TdsCore.executeSQL(TdsCore.java:1086)\r\n\t- locked <0x0000000043cd8331> (a net.sourceforge.jtds.jdbc.TdsCore)\r\n\tat net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:493)\r\n\tat net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery(JtdsPreparedStatement.java:1029)\r\n\t- locked <0x000000000f9ae0a2> (a net.sourceforge.jtds.jdbc.JtdsConnection)\r\n\tat org.apache.tomcat.dbcp.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:82)\r\n\tat org.apache.tomcat.dbcp.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:82)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:70)\r\n\tat org.hibernate.loader.Loader.getResultSet(Loader.java:2123)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1911)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1887)\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:932)\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2615)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2598)\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2430)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2425)\r\n\tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:502)\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:371)\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:216)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1458)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1426)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1398)\r\n\tat com.atlassian.hibernate.adapter.adapters.query.QueryV2Adapter.list(QueryV2Adapter.java:213)\r\n\tat com.atlassian.confluence.plugins.pagehierarchy.validation.CopyPageHierarchyValidator.validatePageTitles(CopyPageHierarchyValidator.java:174)\r\n\tat com.atlassian.confluence.plugins.pagehierarchy.validation.CopyPageHierarchyValidator.validate(CopyPageHierarchyValidator.java:98)\r\n\tat com.atlassian.confluence.plugins.pagehierarchy.rest.PageHierarchyResource.copyPageHierarchy(PageHierarchyResource.java:113)\r\n{code}\r\n{code:java|title=atlassian-confluence.log evidence}\r\n2018-03-29 14:32:00,517 WARN [http-nio-8080-exec-448] [confluence.util.profiling.DefaultActivityMonitor] close Exceeded the threshold of 60000 ms: ActivitySnapshot{startTime=1522351073971, threadId=24062, threadName='http-nio-8080-exec-448', userId='DK45234', type='web-request', summary='/rest/page-hierarchy/copy'}\r\n -- referer: <redacted> | url: /rest/page-hierarchy/copy | traceId: 6f4491200f0c6f31 | userName: <redacted>\r\n--\r\n--\r\n2018-03-29 14:33:17,926 WARN [Long running task: Copy page hierarchy long running task] [confluence.util.profiling.DefaultActivityMonitor] close Exceeded the threshold of 60000 ms: ActivitySnapshot{startTime=1522351920507, threadId=25556, threadName='Long running task: Copy page hierarchy long running task', userId='', type='long-running-task', summary='Copy page hierarchy long running task'}\r\n -- url: /rest/page-hierarchy/copy | referer: <redacted> | traceId: 6f4491200f0c6f31 | userName: <redacted>\r\n{code}\r\nh3. Workaround\r\n\r\nDo not copy such a hierarchy","createDate":"2018-04-10T17:51:37.000+0000","comments":[{"text":"also reflects in v7.17.4","author":"ray"}]},{"summary":"GIFs inserted in to a page will not autoplay and will display as static images","key":"CONFSERVER-55191","url":"https://jira.atlassian.com/browse/CONFSERVER-55191","type":"Bug","priority":"","description":"h3. Summary\r\nNewly embedded GIFs in the page will not autoplay or animate\r\n\r\nh3. Steps to Reproduce\r\n # Create a new blank page in Confluence\r\n # Add animated gif to a page\r\n You can use bellow gif as an example:\r\n !spidey.gif!\r\n\r\nh3. Expected Results\r\n * gif autoplay on the page once the page is saved as it was in previous Confluence versions\r\n\r\nh3. Actual Results\r\n\r\nGIFs remains static and does not animate unless previewed\r\nGIFs inserted into pages prior to upgrade continue to autoplay\r\n\r\nIf checked on source editor, thumbnail preview can be seen to be added to the image, preventing autoplay:\r\n{code:java}\r\nac:thumbnail=\"true\"\r\n{code}\r\nIf the page is inspected, the same thumbnail can be observed under image class\r\n{code:java}\r\n<img class=\"confluence-embedded-image confluence-thumbnail\" ....\r\n{code}\r\n\r\nh3. Notes\r\n* The Issue is not observed for large gifs, only for small icon size\r\n* The issue is not observed when copy pasting the GIF directly from clipboard into Confluence editor\r\n* The issue is not observed on Confluence 5.10.*\r\n* The issue is not observed on Gifs inserted prior to the upgrade\r\n\r\nh3. Workaround\r\n* Editing image and applying *Effect* will result in image autoplay correctly and no actual effect applied\r\n* Edit the page and ensure that the GIF is not on *thumbnail* size. GIFs on Original size will work correctly. \r\n !CONFSERVER-55191-workaround.png|thumbnail! \r\n* Using [Confluence Source Editor|https://marketplace.atlassian.com/plugins/com.atlassian.confluence.plugins.editor.confluence-source-editor/server/overview] to remove *thumbnail* tag from gif source: *ac:thumbnail=\"true\"* will allow autoplay\r\n","createDate":"2018-03-15T20:11:33.000+0000","comments":[{"text":"This issue has caused much annoyance and overhead in our department due to the high amount of GIFs needed to be fixed (our graphical department use lots of them in their Confluence space, so we have to deal with this multiple times a month). A fix would be much appreciated.","author":"Wolfgang Kerner"},{"text":"I just discovered this bug today and am anxious for a fix as we have gifs used extensively and it's not evident to the user that they should click for an animation. It just looks like a fuzzy static image. \r\n\r\nI appreciate that the poster included a work around to fix this! It would be great if Confluence would provide a method to locate all gifs used in a space until this is resolved. ","author":"Wendi Lewis"},{"text":"Gifs seem to randomly break and show as broken links, not even as an image. I've tried adding them back again, nothing gives. Causing a lot of heartburn since we also use gifs a lot.","author":"Nibu Thomas"},{"text":"[~wendi_lewis42041984], you can edit the gifs and ensure that they are not on thumbnail so that the animation runs! I've updated the steps above to do so. \r\n As for locating all gifs in a space, it seems like Confluence don't have this specific feature yet. However, you can filter your search in Confluence to list out all the attachments in that specific space, by going to Advanced Search (or go to <base_URL>/dosearchsite.action?), put in the name of the space in the \"In Space\" section, as well as selecting \"Attachments\" under the Of Type menu. More information about search syntax can be found [here|https://confluence.atlassian.com/doc/search-139528.html]. Hope this helps!\r\n\r\nUpdate: We can make use Confluence search syntax. Follow [How to search specific attachment type in Confluence|https://confluence.atlassian.com/confkb/how-to-search-specific-attachment-type-in-confluence-975027237.html]\r\n\r\n[~nibu.thomas], It sounds like you are experiencing a different attachment-related issue. Please reach out to us at [https://support.atlassian.com|https://support.atlassian.com/] and we'll be happy to help you sort this out!","author":"Monique Khairuliana"},{"text":"Another *really silly* solution that fixes animation on resized gifs for us using built-in features:\r\n # Add a gif.\r\n # Resize. It will stop animating.\r\n # Click on the gif image, and chose *Properties*.\r\n # Select *Drop shadow* from the formatting options.\r\n # Save. Your gif should animate again, and funny enough it has no shadow applied to it.\r\n\r\n ","author":"Monika Antos"},{"text":"Double whammy: I spent 20 mins trying to figure out why my gifs wouldn't animate and then googling and finding this solution and then *another* 20 minutes hypnotised by the Spider-Man gif  :D","author":"Adam Bartlett"},{"text":"!https://c.tenor.com/Mtj8TATAWPIAAAAC/baboon-laptop.gif!","author":"Ivars"}]},{"summary":"Macro Browser does not respect the User Language preference","key":"CONFSERVER-54369","url":"https://jira.atlassian.com/browse/CONFSERVER-54369","type":"Bug","priority":"","description":"After changing the User Language preference, Macro Browser does not change accordingly\r\n\r\n*Steps To Reproduce*\r\n # Set user's language preference to German\r\n # Edits a page and opens the macro browser\r\n # Now the user changes the language in his individual settings to \"français (France)\"\r\n # Edits a page again and opens the macro browser\r\n\r\n \r\nh5. Actual Behavior\r\n\r\nWhile in German:\r\n\r\n  !screenshot_1.png|thumbnail!\r\n * Activity Stream Macro in Macro Browser still in English (label 1)\r\n * Other Macro still in German (label 2)\r\n * All label in German (label 3)\r\n\r\n \r\n\r\nAfter changed to French:\r\n\r\n!screenshot_2.png|thumbnail!\r\n * Activity Stream Macro in Macro Browser still in English (label 1)\r\n * Other Macro still in German (label 2)\r\n * Some label in German (label 3)\r\n * Some label in French (label 4)\r\n\r\nAfter clearing browser's cookies and caches:\r\n\r\n!screenshot_3.png|thumbnail!\r\n * Activity Stream Macro in Macro Browser still in English (label 1). It seems that clearing the cache does not resolve the Activity Stream language.\r\n * Macros in French (label 2)\r\n * All label in French (label 4)\r\n\r\n*Workaround 1*\r\n\r\nDelete browser's cookies and caches\r\nNote: workaround might not be applicable to Confluence version 6.14.0 and higher\r\n\r\n*Workaround 2*\r\n\r\nIf delete browser's cookies and caches is not enough to fix the issue, restart Confluence.\r\nNote: workaround might not be applicable to Confluence version 6.14.0 and higher\r\n","createDate":"2017-11-29T14:54:30.000+0000","comments":[{"text":"When I navigate to any of the Confluence Administration pages I used to see the message \"  You have temporary access to administrative functions. Drop access...\" in the English language which is our default. After an upgrade to version 6.9.0 this message was displayed in Chinese. Workaround #1 did not work in this situation, workaround #2  to clear the cache on the Confluence server did help.","author":"Marc Botermans"},{"text":"Any update on this issue? When will it be resolved?\r\n\r\nWhen this issue happens, it is random. Functionality is limited and we are at system mercy to revert back itself. Users cannot use several function for several days.","author":"Kirti Pattar"},{"text":"7.14.1 affected","author":"Claus Westerkamp"},{"text":"7.15.0 is also effected\r\n\r\n ","author":"venkat uday"},{"text":"7.13.4 affected as well","author":"Andreas Tscherrig"},{"text":"We are facing the same issue in Jira as well. \r\n\r\n!image-2022-04-01-17-18-42-642.png|width=486,height=286!","author":"Lucrezia Montini"},{"text":"Affects 7.19.1\r\n\r\n \r\n\r\nIt appears the relevant user language preference is cached by confluence, tomcat and/or the apache reverse proxy.\r\n\r\n \r\n\r\n*Steps to reproduce:*\r\n # Restart Confluence, maybe clear proxy caches\r\n # User with e.g. hungarian language preference edits a site and opens the macro browser\r\n # Confluence's cache gets poisoned with a hungarian cache result\r\n # User with english language preference openes the macro browser with a cold browser cache and gets the hungarian-flavored cache result\r\n\r\n \r\n\r\n*Workaround:*\r\n # Open the browsers dev tools and disable caching\r\n # Browser forces a server-side cache refresh\r\n # Macro browser displays the correct language ","author":"Norbert Fischer"},{"text":"https://getsupport.atlassian.com/browse/PSSRV-82372","author":"Iker Alonso"}]},{"summary":"Audit Logs showing \"Anonymous\" user instead of \"System\" when adding Default Group Memberships","key":"CONFSERVER-54007","url":"https://jira.atlassian.com/browse/CONFSERVER-54007","type":"Bug","priority":"","description":"Some entries in the Audit Log are not consistent when the action is not performed by a specific user.\r\nh3. Steps to reproduce:\r\n # Create a User Directory and set it \"Read Only, with Local Groups\";\r\n # Define some groups in Default Group Memberships;\r\n # Save and sync the directory;\r\n # Log into Confluence with a User to be added to the default groups;\r\n # Check the Audit Log;\r\n\r\nh3. Expected results\r\n\r\nWe see a change \"User added to group\" made by the user \"System\", just as any other automatic user change, like a directory sync.\r\nh3. Actual results\r\n\r\nThe user responsible for the change is \"Anonymous\". There are also the IP addresses from Confluence host server and from the client machine used to log in.\r\n\r\n*Notes*\r\nIf the group doesn't exist when the action above is triggered, we can also see an entry \"Group created\" changed by the last user that edited the User Directory along with the same IP addresses described above.","createDate":"2017-10-23T18:30:47.000+0000","comments":[{"text":"This issue is causing my Confluence license count to be exceeded and shutting down the ability for users to edit pages until we remove the users who were added anonymously to the confluence-users access group.","author":"Ralph Ruggiero"},{"text":"I would like to increase the priority/criticality of this issue. This may not affect users directly, but for security reasons and guidelines the audit log has to be correct and not allow changes by anonymous. This is not good for security audits, if we have entries like this - so please consider this into the bug as well.","author":"Robert Pejic"},{"text":"I'm experiencing this problem on Jira server. New users are created by \"anonymous\" or \"System\" and with a username that creates problems with our security guidelines.\r\nI've the same consequences described by @Robert Pejic in the preceding comment. The bug priority should be raised","author":"Francesco R"},{"text":"We are I'm experiencing this problem on Jira server. This creates a big security risk for us. *The bug priority should be raised!!*","author":"Virag Lovas"},{"text":"This potentially raising issue during audit as the information itself is misleading. Anonymous aren't supposed to modify anything in the system and the way the info is being shown is as if the anonymous user is able to login to Jira via browser and create new user, whilst in reality the creation was only triggered by the anonymous when they are attempting to login as new user, but not manually done by anonymous. Please increase the priority of this issue.","author":"Monika Leslivania"},{"text":"We have a similar issue on Confluence DC 8.5.5. Our issue is new users are being adding to our default user group by both \"Anonymous\" and then later by \"System\". Anonymous appears to be adding the user to our LDAP User Directory but then later System appears to add them to the same group on the Internal Directory.","author":"Brad Fitpatrick"}]},{"summary":"Request Add-on/Plugin not sending notifications","key":"CONFSERVER-53665","url":"https://jira.atlassian.com/browse/CONFSERVER-53665","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen a user requests an add-on through the MarketPlace option, the administrators are not notified through email nor workbox\r\nh3. Steps to Reproduce\r\n # Confirm that the administrator is a system administrator, not merely a Confluence administrator.\r\n # Confirm that email notifications are enabled in UPM settings.\r\n # As an admin, allow add-on request.\r\n # Login with a test user and request an add-on.\r\n\r\nh3. Expected Results\r\n\r\nThe system administrator will receive an email notification with the request or a notification in the workbox.\r\nh3. Actual Results\r\n\r\nNo notifications are sent\r\nh3. Workaround\r\n\r\nGo to the *Find new Add-ons* page and in the filter, select \"Most requested\".","createDate":"2017-10-05T19:54:32.000+0000","comments":[]},{"summary":" image in edit mode adds \"confluence-thumbnail\" class unnecessarily causing poor image to be displayed","key":"CONFSERVER-53298","url":"https://jira.atlassian.com/browse/CONFSERVER-53298","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nCopy and pasting image into pages while editing, or uploading images while editing does not work correctly with Internet Explorer.\r\n\r\nInternet Explorer imports the image file with the tag {{ac:thumbnail=\"true\"}} causing the image to be blurry. This does not affect other web browsers when they are used to upload/paste images to pages as they will not include the {{ac:thumbnail=true\"}} tag once saved. \r\nh3. Environment\r\n * Internet Explorer 11\r\n* Microsoft Edge Version 81.0.416.68 (Official build) (64-bit)\r\n\r\nh3. Steps to Reproduce\r\n # In Windows use Snipping Tool\r\n # Create a new Image\r\n # Copy the image with the copy button\r\n # Ctrl+V to Confluence page, or upload a saved image to a page using the image upload feature\r\n\r\nh3. Expected Results\r\n\r\nImage inserted in Internet Explorer should be sharp as appear in Chrome like below. \r\n !chrome.JPG|thumbnail!\r\nh3. Actual Results\r\n\r\nImage show as blurry in Internet Explorer\r\n !IE.JPG|thumbnail!\r\nh3. Notes\r\n\r\nComparing the Storage Format of the page you will see:\r\n * Chrome\r\n{code:java}\r\n<p><ac:image ac:height=\"162\"><ri:attachment ri:filename=\"image2017-8-30_14-1-9.png\" /></ac:image></p>\r\n{code}\r\n\r\n * Internet Explorer\r\n{code:java}\r\n<p><ac:image ac:thumbnail=\"true\" ac:height=\"162\"><ri:attachment ri:filename=\"image2017-8-30_14-0-51.png\" /></ac:image></p>\r\n{code}\r\n\r\nh3. Workaround\r\n\r\nOption 1: Use a different web browser other than IE to upload images to the page while editing\r\n Option 2: Resize the blurry image, then resize it back to the desired size and it will appear correctly once saved, as this removes the tag\r\nh3. Mass clean-up\r\n\r\nRun the following SQL statement to replace the {{ac:thumbnail=\"true\"}} value with a blank value in all pages and all previous versions of pages including drafts:\r\n{code:sql|title=works on Postgres}\r\nUPDATE BODYCONTENT\r\nSET body = replace(body,'ac:thumbnail=\"true\"','') \r\nWHERE body LIKE '%ac:thumbnail=\"true\"%';\r\n{code}\r\n{code:sql|title=works on MS SQL}\r\nUPDATE BODYCONTENT\r\n   SET BODY = REPLACE (CONVERT(VARCHAR(MAX), BODY), 'ac:thumbnail=\"true\"','')\r\n WHERE BODY LIKE '%ac:thumbnail=\"true\"%';\r\n{code}\r\n(!) Always make a full backup of the database and be prepared to roll back before directly editing the db. \r\n\r\nWhen done with the search and replace statement above, go to *General Configuration -> Cache Management -> \"Advanced View\"* and click *\"Flush All\"* at the very bottom of the page. This is so cached versions of pages which have this code still in their storage format will be reloaded from the database at next page visit.\r\n\r\nYou may need to clear browser cache as well or hold down shift+refresh on the page to load the page not from existing browser cache. \r\n\r\n(i) Note: using Internet Explorer to upload new images into pages moving forward will embed the {{ac:thumbnail=\"true\"}} value again. This can be avoided by resizing the image to anything else while editing, then resizing back to the size you want before saving the page.  ","createDate":"2017-08-23T12:27:28.000+0000","comments":[{"text":"It would be nice if this issue could be fixed. Thus IE11 is our companies default-browser we are not able to upgrade confluence until the problem has been solved.","author":"Florian Bodenheimer"},{"text":"Agreed, not a good look for a clean modern view that confluence provides but then fuxxy pictures. \r\n\r\nSuprised it does not have a higher priority","author":"Greg Roberts"},{"text":"with the new 6.4 version we focus also this issue, so we urgently need to align that. Not sure why we the new version we do have also same bugs as before plus new. ","author":"Laura de sabbata"},{"text":"We need this fixed. It seems to still be happening with Chromium version of Microsoft Edge.\r\nVersion 81.0.416.68 (Official build) (64-bit)","author":"Rick Carini"},{"text":"Still an active issue. ","author":"Beth L."},{"text":"Microsoft Edge browsers are our corporate default browsers.\r\nGiven that Edge is now the number two popular browser (bigger than Safari and Firefox combined), I would hope you will be able to pay more attention to issues like these.","author":"Rick Carini"}]},{"summary":"Can't add Fisheye/Crucible gadgets on a page","key":"CONFSERVER-53281","url":"https://jira.atlassian.com/browse/CONFSERVER-53281","type":"Bug","priority":"","description":"h3. Summary\r\nFour Crucible gadgets are not working in Confluence. You can find them in the Macro Browser and also configure the gadgets. However, after clicking on the \"Insert\" button, nothing happens and you are not able to save/update the page anymore.\r\n\r\nh3. Environment\r\n* Confluence 6.2.3\r\n* FeCru 4.4.2\r\n\r\nh3. Steps to Reproduce\r\n# Create an AppLink between FeCru.\r\n# Register an External Feed in Confluence:\r\n{code:title=FeCru feed url}\r\nhttp://gviana:8060/rest/gadgets/1.0/g/feed\r\n{code}\r\n# Clear the plugins cache to ensure that no corrupted cache will cause the problem.\r\n# Open the macro browser and select one of the following gadgets:\r\n#* Hassle Review Blockers\r\n#* Overdue Reviews\r\n#* Review Inbox\r\n#* Review Coverage\r\n\r\nh3. Expected Results\r\nConfluence will render the gadgets properly as how it happens with JIRA.\r\n\r\nh3. Actual Results\r\nNothing happens and the following is logged in atlassian-confluence.log\r\n{code}\r\n2017-08-22 14:52:07,376 ERROR [http-nio-8093-exec-7] [[Standalone].[localhost].[/confluence].[servlet-module-container-servlet]] log Servlet.service() for servlet servlet-module-container-servlet threw exception\r\n -- referer: http://gviana:8093/confluence/pages/editpage.action?useDraft=true&spaceKey=TES&draftId=327700&pageId=327683&& | url: /confluence/s/7/_/plugins/servlet/gadgets/placeholder | traceId: c3130659bd3b9ac4 | userName: admin\r\njava.lang.NullPointerException\r\n\tat com.atlassian.confluence.util.http.httpclient.HttpClientHttpRetrievalService.newHttpClient(HttpClientHttpRetrievalService.java:149)\r\n\tat com.atlassian.confluence.util.http.httpclient.HttpClientHttpRetrievalService.get(HttpClientHttpRetrievalService.java:45)\r\n\tat com.atlassian.confluence.util.http.BaseHttpRetrievalService.get(BaseHttpRetrievalService.java:17)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t{code}\r\n{code}\r\nRequest Information\r\n--------------------------\r\nURL: http://gviana:8093/confluence/500page.jsp\r\nScheme: http\r\nServer: gviana\r\nPort: 8093\r\nURI: /confluence/500page.jsp\r\nContext Path: /confluence\r\nServlet Path: /500page.jsp\r\nPath Info: null\r\nQuery String: gadgetId=aHR0cDovL2d2aWFuYTo4MDYwL3Jlc3QvZ2FkZ2V0cy8xLjAvZy9jb20uYXRsYXNzaWFuLmNydWNpYmxlLnBsdWdpbnMucmV2aWV3LWNvdmVyYWdlLXJlcG9ydDpyZWNlbnQtY2hhbmdlc2V0cy9nYWRnZXQvcmVjZW50LWNoYW5nZXNldHMueG1s\r\n--------------------------\r\nAttributes\r\n--------------------------\r\njavax.servlet.forward.request_uri: /confluence/s/7/_/plugins/servlet/gadgets/placeholder\r\njavax.servlet.forward.context_path: /confluence\r\njavax.servlet.forward.servlet_path: /s\r\njavax.servlet.forward.path_info: /7/_/plugins/servlet/gadgets/placeholder\r\njavax.servlet.forward.query_string: gadgetId=aHR0cDovL2d2aWFuYTo4MDYwL3Jlc3QvZ2FkZ2V0cy8xLjAvZy9jb20uYXRsYXNzaWFuLmNydWNpYmxlLnBsdWdpbnMucmV2aWV3LWNvdmVyYWdlLXJlcG9ydDpyZWNlbnQtY2hhbmdlc2V0cy9nYWRnZXQvcmVjZW50LWNoYW5nZXNldHMueG1s\r\njavax.servlet.error.status_code: 500\r\n_statichash: 7\r\ncom.atlassian.confluence.impl.profiling.DecoratorTimings: com.atlassian.confluence.impl.profiling.DecoratorTimings@399161df\r\ncom.opensymphony.sitemesh.APPLIED_ONCE: true\r\n__cleanup_recursion_counter: 0\r\njavax.servlet.error.message:\r\njavax.servlet.error.servlet_name: noop\r\ncom.atlassian.confluence.web.filter.validateparam.RequestParamValidationFilter_already_filtered: true\r\natlassian.core.seraph.original.url: /500page.jsp?gadgetId=aHR0cDovL2d2aWFuYTo4MDYwL3Jlc3QvZ2FkZ2V0cy8xLjAvZy9jb20uYXRsYXNzaWFuLmNydWNpYmxlLnBsdWdpbnMucmV2aWV3LWNvdmVyYWdlLXJlcG9ydDpyZWNlbnQtY2hhbmdlc2V0cy9nYWRnZXQvcmVjZW50LWNoYW5nZXNldHMueG1s\r\ncom.atlassian.labs.botkiller.BotKillerFilter: true\r\ncom.atlassian.gzipfilter.GzipFilter_already_filtered: true\r\nConfluence-Request-Time: 1503424327306\r\nloginfilter.already.filtered: true\r\njavax.servlet.error.request_uri: /confluence/s/7/_/plugins/servlet/gadgets/placeholder\r\ncom.atlassian.core.filters.HeaderSanitisingFilter_already_filtered: true\r\ncom.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter: true\r\ncom.atlassian.confluence.web.ConfluenceJohnsonFilter_already_filtered: true\r\njavax.servlet.error.exception: java.lang.NullPointerException\r\nos_securityfilter_already_filtered: true\r\ncom.atlassian.seraph.auth.LoginReason: OK\r\ncom.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter: true\r\n--------------------------\r\nParameters\r\n--------------------------\r\ngadgetId : aHR0cDovL2d2aWFuYTo4MDYwL3Jlc3QvZ2FkZ2V0cy8xLjAvZy9jb20uYXRsYXNzaWFuLmNydWNpYmxlLnBsdWdpbnMucmV2aWV3LWNvdmVyYWdlLXJlcG9ydDpyZWNlbnQtY2hhbmdlc2V0cy9nYWRnZXQvcmVjZW50LWNoYW5nZXNldHMueG1s\r\ncaused by: java.lang.NullPointerException\r\nat com.atlassian.confluence.util.http.httpclient.HttpClientHttpRetrievalService.newHttpClient(HttpClientHttpRetrievalService.java:149)\r\n{code}\r\nThe _inspect_ will throw a *500 HTTP error*:\r\n{code}\r\nRequest URL:http://gviana:8093/confluence/s/6/_/plugins/servlet/gadgets/placeholder?gadgetId=aHR0cDovL2d2aWFuYTo4MDYwL3Jlc3QvZ2FkZ2V0cy8xLjAvZy9jb20uYXRsYXNzaWFuLmZlY3J1LmZlY3J1LWdhZGdldHMtcGx1Z2luOmhhc3NsZS9nYWRnZXRzL2hhc3NsZS54bWw\r\nRequest Method:GET\r\nStatus Code:500 Internal Server Error\r\nRemote Address:127.0.0.1:8093\r\nReferrer Policy:no-referrer-when-downgrade\r\nResponse Headers\r\nview source\r\nCache-Control:public\r\nCache-Control:max-age=31536000\r\nConnection:close\r\nContent-Type:text/html;charset=UTF-8\r\nDate:Tue, 22 Aug 2017 17:42:10 GMT\r\nExpires:Wed, 22 Aug 2018 17:42:10 GMT\r\nServer:Apache-Coyote/1.1\r\nTransfer-Encoding:chunked\r\nX-Accel-Buffering:no\r\nX-AUSERNAME:admin\r\nX-Confluence-Request-Time:1503423730308\r\nX-Seraph-LoginReason:OK\r\nRequest Headers\r\nview source\r\nAccept:image/webp,image/apng,image/*,*/*;q=0.8\r\nAccept-Encoding:gzip, deflate\r\nAccept-Language:en-US,en;q=0.8\r\nConnection:keep-alive\r\nCookie:seraph.confluence=360449%3A41bfe7898e827482df293ab75eeb8ca48a0e1c11; JSESSIONID=9FEBAB0039A9B4A881BD2E09E2E817D3; FESESSIONID=1tpay3uau8iql106jixs74x26h; atl.xsrf.token.slash=176bce825ea44e107ec9f028f0aca08b1486d534; remember=admin2:1:cab196d32f9b80b17a53396fc99ed98a; crucibleprefs1=\"D%3D1503422674005\"\r\nHost:gviana:8093\r\nReferer:http://gviana:8093/confluence/pages/editpage.action?useDraft=true&spaceKey=TES&draftId=327700&pageId=327683&&\r\nUser-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.101 Safari/537.36\r\nQuery String Parameters\r\nview source\r\nview URL encoded\r\ngadgetId:aHR0cDovL2d2aWFuYTo4MDYwL3Jlc3QvZ2FkZ2V0cy8xLjAvZy9jb20uYXRsYXNzaWFuLmZlY3J1LmZlY3J1LWdhZGdldHMtcGx1Z2luOmhhc3NsZS9nYWRnZXRzL2hhc3NsZS54bWw\r\n{code}\r\n\r\n \r\nh3. Notes\r\n* JIRA is able to render those 4 mentioned gadgets, although you need to add them manually in JIRA.\r\n* Using JIRA Feed URL won't bring those 4 mentioned gadgets, so you need to manually register a feed in Confluence.\r\n\r\nh3.Workaround\r\nNo workarounds so far.\r\n","createDate":"2017-08-22T18:10:40.000+0000","comments":[{"text":"This bug is blocking our productivity as we cannot integrate contents from Crucible with confluence, and one needs to manually cross-ref between the 2 apps.","author":"Akuna Capital"},{"text":"[https://getsupport.atlassian.com/browse/CSP-261293]","author":"Mark M"}]},{"summary":"Manage User Status Locally does not provide option to manage user status for Read Only directory","key":"CONFSERVER-53264","url":"https://jira.atlassian.com/browse/CONFSERVER-53264","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEnabling the *Manage User Status Locally* option on a _connector user directory_ doesn't give the administrator an option to activate/deactivate users if the directory is configured as _Read Only_ or as _Read Only, with Local Groups_.\r\n(i) This option is only available when connecting to \"Microsoft Active Directory\" type\r\n\r\n\r\nBased on the description in our [documentation|https://confluence.atlassian.com/doc/connecting-to-an-ldap-directory-229838241.html]:\r\n{quote}\r\n|Manage User Status Locally|If true, you can activate and deactivate users in Crowd independent of their status in the directory server.|\r\n{quote}\r\nchecking the \"Manage User Status Locally\" option should allow the administrator to activate/deactivate users even if the directory permission is set to _Read Only_ or _Read Only, with Local Groups_.\r\n\r\n\r\nIf the administrator access the user details from a user provisioned by the external directory, the option to enable (activate) or disable (deactivate) the user isn't available on the UI.\r\n\r\nh3. Steps to Reproduce\r\n# Install a vanilla instance of Confluence.\r\n# Configure a connector Microsoft Active Directory as described in [Connecting to an LDAP Directory|https://confluence.atlassian.com/doc/connecting-to-an-ldap-directory-229838241.html].\r\n#* Make sure to configure it as a _Read Only_ or _Read Only, with Local Groups_ directory and to enable the _Manage User Status Locally_ option.\r\n# Confirm the user directory synchronization works as expected.\r\n# Access a user details from any user synchronized from the external directory configured in steps above.\r\n\r\nh3. Expected Results\r\nThe option to enable or disable a user is available in the UI, since according to the documentation, the activate/deactivate status stays in Confluence(embeded Crowd) independent to the external directory.\r\n !screenshot-5.png|thumbnail! \r\n\r\nh3. Actual Results\r\nThe option to enable or disable a user is *not* available in the UI.\r\n !screenshot-4.png|thumbnail! \r\n\r\nh3. Workaround\r\nTemporarily set the directory as _Read/Write_ and manage the status of the target users.\r\nAfter performing the actions, set the user directory to the previous configuration (_read only_ or _read only with local groups_).","createDate":"2017-08-21T10:20:05.000+0000","comments":[{"text":"We have the same issue here on 6.0.5.\r\n\r\nEspecially painful as we run into an unexpected user increase exceeding the license user limit.\r\n\r\nNow we had no chance to disable some users in order to get working again. Only way was to modify the database directly.","author":"Martin Papproth"},{"text":"Same in 7.9.1. We have also found about the false promise of \"Manage User Status Locally\" after exceeding the license limit. Since consequences of exceeding the limit are severe (no new issues and boards are not accessible) the quick way how to get bellow the limit would be a blessing.","author":"Jan Dvořák"},{"text":"Affecting 7.10.2 as well. We would actually like to enable inactive users in AD to be able to assign them to tickets (regulation forces us to inactivate users in AD that are on vacation).","author":"Thorben"},{"text":"We have the same issue on Confluence Datacenter 7.13.","author":"Sergey Kuznetsov"},{"text":"A fix for this issue is available in Confluence Data Center 9.3.2. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.3+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Akshay Kumar"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"WARN messages \"getPropertyValue Unable to set property 'originalVersionId' on instance of 'class com.atlassian.confluence.pages.Page'\" flood the log file when importing Confluence Cloud backup data","key":"CONFSERVER-52850","url":"https://jira.atlassian.com/browse/CONFSERVER-52850","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWARN messages \"getPropertyValue Unable to set property 'originalVersionId' on instance of 'class com.atlassian.confluence.pages.Page'\" flood the log file when importing Confluence Cloud backup data.\r\nh3. Environment\r\n * Import Confluence Cloud XML backup into Confluence Server\r\n\r\nh3. Steps to Reproduce\r\n # Take a XML Backup on Confluence cloud.\r\n # Import the XML backup\r\n\r\nh3. Expected Results\r\n\r\nNo WARN messages in log file when importing Cloud backup data.\r\nh3. Actual Results\r\n\r\nConfluence versions pre 8.3.0 WARN messages flood the log file:\r\n{noformat}\r\n2017-07-11 15:45:44,656 WARN [Long running task: Importing data] [importexport.xmlimport.persister.ReflectiveObjectPersister] getPropertyValue Unable to set property 'originalVersionId' on instance of 'class com.atlassian.confluence.pages.Attachment' with id 70254775. This is probably due to internal data structure changes and doesn't cause any data loss.\r\n...{noformat}\r\nConfluence versions post 8.3.0 WARN messages flood the log file:\r\n{noformat}\r\n20:33:16,029 WARN [pool-5-thread-1] [restore.domain.ImportedObjectV2] buildProperties Unexpected imported property 'Property[email]=' will be skipped. Entity class 'com.atlassian.confluence.user.ConfluenceUserImpl', id 'ff80928469ecd4cf0159f6222cc70308'.{noformat}","createDate":"2017-07-13T05:40:12.000+0000","comments":[{"text":"Hi! \r\nI have the same issue, \r\naffected version is 6.6.3.\r\n\r\nCheers,\r\nGonchik Tsymzhitov","author":"Gonchik Tsymzhitov"},{"text":"6.9.0 is affected too","author":"Yevgen Lasman"},{"text":"affected version 6.2.3","author":"Matthias Krauss"},{"text":"Affected version, 6.13.0","author":"Vlatko Bojkovski"},{"text":"6.12.4 is also affected.","author":"Daniel Meisen"},{"text":"Facing the same issue, migrating from Cloud to DC, Affected Version, 6.13.4","author":"Abhishek Kapoor"},{"text":"A fix for this issue is available in Confluence Server and Data Center 9.2.3. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.2+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"},{"text":"A fix for this issue is available in Confluence Server and Data Center 8.5.21. [Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+8.5+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.","author":"Pranoy Cherian Mathew"}]},{"summary":"Answers can not be accepted by Admin in Spaces","key":"CONFSERVER-47346","url":"https://jira.atlassian.com/browse/CONFSERVER-47346","type":"Bug","priority":"","description":"*Reproduce Bug*\r\n# Go to a Questions which was asked in a space\r\n# Try to accept a answer as a admin\r\n# \"Accept answer\" button is missing","createDate":"2015-05-27T11:15:37.000+0000","comments":[{"text":"I'd like to add that most of the administration features are unavailable when a question is created in a specific Confluence Space.\r\nThis includes accepting an answer, but also editing answers/comments, and converting to answer/comment. Deleting is the _only_ action that remains available.\r\n\r\nIn that regard, I wouldn't consider it a \"Minor\" bug.","author":"Adrien Siebert"}]},{"summary":"User unable to login and searching for this user yields NPE error","key":"CONFSERVER-45058","url":"https://jira.atlassian.com/browse/CONFSERVER-45058","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nUsers are not able to log in and searching for the user yields and NPE error because the user is not present in the user_mapping table.\r\nh3. Steps to Reproduce\r\n\r\nWe have not found full steps to reproduce yet, but have seen several instances of this.\r\n # Run the following query against the database:\r\n{code:java}\r\nSELECT * FROM user_mapping where username = '<user name>';\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nUser has an entry with the {{user_mapping}} table.\r\n{code:java}\r\n             user_key             | username | lower_username\r\n----------------------------------+----------+----------------\r\n 8a80808a549976be0154ab7b19440006 | admin    | admin\r\n{code}\r\nWhile searching for this users in the user directory, the following error message is displayed:\r\n{code}\r\nCause\r\njava.lang.NullPointerException\r\n    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:187)\r\nStack Trace:[hide]\r\njava.lang.NullPointerException\r\n    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:187)\r\n    at com.google.common.collect.ImmutableList$Builder.add(ImmutableList.java:583)\r\n    at com.google.common.collect.ImmutableList$Builder.add(ImmutableList.java:566)\r\n    at com.google.common.collect.ImmutableCollection$Builder.addAll(ImmutableCollection.java:324)\r\n    at com.google.common.collect.ImmutableList$Builder.addAll(ImmutableList.java:600)\r\n    at com.atlassian.confluence.api.model.pagination.PageResponseImpl$Builder.addAll(PageResponseImpl.java:189)\r\n    at com.atlassian.confluence.api.model.pagination.PageResponseImpl.from(PageResponseImpl.java:94)\r\n    at com.atlassian.confluence.api.impl.pagination.PaginationServiceImpl.lambda$doRequestInTransaction$387(PaginationServiceImpl.java:146)\r\n    at com.atlassian.confluence.api.impl.pagination.PaginationServiceImpl$$Lambda$238/516446270.doInTransaction(Unknown Source)\r\n    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:128)\r\n    at com.atlassian.confluence.api.impl.pagination.PaginationServiceImpl.doRequestInTransaction(PaginationServiceImpl.java:141)\r\n...\r\n{code}\r\n\r\nYou may also see these items in the {{atlassian-confluence.log}}\r\n{code}\r\nCaused by: java.lang.NullPointerException: Unable to find user mapping for <user name>\r\n    at com.atlassian.confluence.user.DefaultPersonalInformationManager.getOrCreatePersonalInformation(DefaultPersonalInformationManager.java:66)\r\n    at sun.reflect.GeneratedMethodAccessor858.invoke(Unknown Source)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n    at com.atlassian.spring.interceptors.SpringProfilingInterceptor.invoke(SpringProfilingInterceptor.java:16)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\r\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\r\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\r\n    at com.sun.proxy.$Proxy78.getOrCreatePersonalInformation(Unknown Source)\r\n    at com.atlassian.confluence.user.crowd.UserIndexingListener.ensurePersonalInformationAndReindex(UserIndexingListener.java:165)\r\n    at com.atlassian.confluence.user.crowd.UserIndexingListener.onCrowdUserUpdatedEvent(UserIndexingListener.java:134)\r\n    at sun.reflect.GeneratedMethodAccessor1879.invoke(Unknown Source)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:36)\r\n    ... 51 more\r\n{code}\r\n\r\nh3. Actual Results\r\n\r\nUser does not have an entry in the {{user_mapping}} table and you receive an empty result:\r\n{code:java}\r\nuser_key | username | lower_username\r\n--------------------------------\r\n(0 rows)\r\n{code}\r\n\r\nh3. Workaround\r\n\r\n*Workaround 1: Finding the user_mapping key from a previous database backup and restoring it manually*\r\n# Restore a database dump to a new database or an old xml backup to a new instance\r\n# Run the following SQL query against your restored database dump/restored instance to find the user mapping key for that user:\r\n{code:sql}\r\nSELECT * FROM user_mapping WHERE username='<user name>';\r\n{code}\r\n# Then run this query against your instance to restore the user_key:\r\n{code:sql}\r\nINSERT INTO user_mapping VALUES ('<user_key_from_previous_query>', '<user name>', '<user name>');\r\n{code}\r\n\r\n*Workaround 2: Replacing the user_mapping entry with a new user_key*\r\n(!) Please note that *this workaround is not recommended* and is provided for informational purposes. Userkeys need to be unique and generating them randomly can cause failures down the line. If you have any information regarding changes made to the user account prior to this issue appearing, please let us know.\r\n\r\n # Use the following SQL query to *add the entry manually:*\r\n{code:sql}\r\nINSERT INTO user_mapping VALUES ('2c9681954172cf560000000000000001', '<user name>', '<user name>');\r\n{code}\r\n ** Note that both the <user name> above has to be in all *lowercase*\r\n ** Always back up your data before performing any modifications to the database. If possible, test any insert, update, or delete SQL commands on a staging server first.\r\n\r\nMake sure that:\r\n # Confluence is shut down before performing any changes to the database\r\n # After performing the workarounds, [Rebuild the Content Indexes from Scratch|https://confluence.atlassian.com/display/CONFKB/How+to+rebuild+the+content+indexes+from+scratch]","createDate":"2016-10-28T20:18:41.000+0000","comments":[{"text":"Affects Confluence 7.13.7","author":"Hartej Arora"}]},{"summary":"inline comment causes page history comment to be deleted","key":"CONFSERVER-44380","url":"https://jira.atlassian.com/browse/CONFSERVER-44380","type":"Bug","priority":"","description":"Steps to replicate :\r\n# Create a new page\r\n# Add some text on there\r\n# Save the page\r\n# Edit the page again so that you will get second version of the page.\r\n# Before saving ensure that you have added a comment on lower right of the page as per the screenshot below\r\n!historyComment.jpg|thumbnail! \r\n# Click on Page Hiistory and you will notice that the comment is added on there :\r\n!pageHistory.jpg|thumbnail!\r\n# Go back to the page and add an inline comment as per screenshot below :\r\n!inlineComment.jpg|thumbnail!\r\n# Go back to page history and you will notice that the page history comment is gone as per the screenshot below :\r\n!pageHistoryDeleted.jpg|thumbnail! \r\n\r\n*Current result* : Page history comment is removed after adding inline comment\r\n*Expected result* : Page history comment should retain after adding inline comment\r\n","createDate":"2016-10-14T13:15:44.000+0000","comments":[{"text":"This is core functionality which should work.  It's a higher priority than 'Low' and it needs to be fixed.\r\n\r\nAdding 'submit comments' when you publish is important for users who were familiar with a previous version and want to know what the changes are without having to look through it.\r\n\r\nDeleting these 'submit comments' when you add an 'inline comment' is obviously a bad bug.\r\n\r\nHow do we get this prioritised high enough to get it fixed?","author":"Anthony Wood"},{"text":"I fully second this. This is clearly bug where data gets destroyed. Absolutely inaceptable to give this a low priority. Some of our documentation workflows are based on the version description and therefore we are unable to use comments any longer until this gets fixed. ","author":"Andreas Heidrich"},{"text":"I fully agree with previous comments. This bug is inaceptable in core functionality of wiki system.","author":"Юлия Смагина"},{"text":"Unacceptable bug. Our customer uses Confluence as quality system with strict workflows. Version comments are essential part of this. They should never disappear without admin actions.","author":"Arto Kovalainen"},{"text":"+500 User","author":"Paula Dasch"},{"text":"It's been two years since this bug was reported.  I think it's clear that Atlassian as a company needs to concentrate it's efforts on it's core products to keep viable, so that's why they are only paying lip service to supporting products like Confluence.","author":"Anthony Wood"},{"text":"affects ~50 users here, our Quality Management System requires change comments and that essential functionality is essentially not working","author":"Application Development Group"},{"text":"Please address this As soon as possible as this is affecting our operations.","author":"Kondal Chityala"},{"text":"This bug is really giving us a lot of trouble, as we use the \"What did you change\" comment rather heavily.","author":"Marianne Larsen"},{"text":"Hello Atlassian, we are here to high light that the bug is still there, and it seriously impacts our operations - our Quality Management System. Please let us know if the bug will be fixed on any future update. We greatly appreciate your help.","author":"Sean C"},{"text":"Thanks for your comments and for drawing my attention to this issue. I'll have this reviewed by the team.\r\n\r\nMakisa | Senior Product Manager, Confluence Server and Data Center","author":"Makisa Appleton"},{"text":"Hello Atlassian, same situation for our company. Our  QA process heavily relies on the existance of the  page history comments. We're stuck. \r\nAlthough it's good finding we're not the only ones concerned by this problem -  We really need a fix for this.","author":"Michael Krause"},{"text":"Hello Atlassian,\r\n\r\nAs we can see this issue can cause a lot of impacts to variety of users, is it possible to give us the timeline on when the status of this issue can be move to \"Ready for Development\" and even \"in Progress\" in the near future? Thanks!","author":"Sean C"},{"text":"Reproduced in \r\n * 7.4.3","author":"Flavio Beck"},{"text":"High impact also for our company (HERE)! \r\n\r\nHow can a bug that causes data loss be minor severity? ","author":"Michael Brändel"},{"text":"For months we have been looking for the reason why change comments disappear. An attentive Atlassian support employee has now provided the decisive clue.\r\n\r\nJust reproduced on version 7.4.8\r\n\r\n1. edit page content\r\n2. enter change comment and publish page\r\n3. check change comment in page history - comment exists\r\n4. display page again and place inline comment on a text\r\n5. check change comment again in page history - comment has disappeared\r\n\r\nPlease hurry up fixing this bug, this is a very high impact for us! ","author":"Jürgen Buchinger"},{"text":"Sorry Atlassian, but something is wrong with your bug prioritisation. The bug has been known since 2016, affects countless versions and is classified as low/minor? That is completely inappropriate! \r\nJust as with bug CONFSERVER-59497 (Tasks are marked as finished/unfinished randomly and without user action), which was ranked low/minor for months and was only prioritised high after massive pressure from us and escalation to the Atlassian Channel Manager.\r\n\r\nSometimes I really get the impression that you don't know how your customers use your software and what kind of impact such bugs have.\r\n\r\nWe have thousands of technical documents that are briefly described with change comments when changes are made. In addition, the changes are marked and explained in the document with inline comments. This allows the user to see very quickly what is new in the document.\r\n\r\n ","author":"Jürgen Buchinger"},{"text":"Hey Atlassian Support, what is going on about this.\r\n\r\nI have seen that the priority is still \"low\". Please urgently rate it higher and fix the bug!\r\n\r\nRegards, Jürgen","author":"Jürgen Buchinger"},{"text":"Hey there, Atlassian developers\r\n\r\nWhat is going on about this bug. There is nothing going forward with this issue.\r\n\r\nWhy is there no activity, to fix this bug?\r\n\r\nThis is realy frustrating for all our users.","author":"Jürgen Buchinger"},{"text":"Hello, 4 year on short term backlog seems a little overkill. When there will be any update?","author":"Štefan Tóth"}]},{"summary":"JIRA Chart Macro Two Dimensional Link Broken","key":"CONFSERVER-43324","url":"https://jira.atlassian.com/browse/CONFSERVER-43324","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-43324].\n  {panel}\n\nh3. Summary\r\n\r\nh3. Steps to Reproduce\r\n# Go to any page\r\n# Insert *JIRA Chart Macro* > *Two Dimensional*\r\n# Insert the JQL\r\n# Save the page\r\n# Open the \"total\" link\r\n!Screenshot1.jpeg|thumbnail!\r\n\r\nh3. Expected Results\r\nIt should redirect users to Issue Navigator page with the full JQL\r\n\r\nh3. Actual Results\r\nIt redirects users to Issue Navigator page with empty JQL: https://example.atlassian.net/issues/?filter=null\r\n \r\nh3. Notes\r\nOther links on the macro are working as expected.","createDate":"2016-07-29T07:15:23.000+0000","comments":[{"text":"We have same issue, plz fix it\r\n","author":"kisik.chung@samsung.com"},{"text":"We are having the same issue.","author":"Shared Contact"},{"text":"Do you have any updates on this issue?","author":"Fabio S"},{"text":"I'm also seeing this on Confluence 6.7.1, Universal Plugin Manager 3.0.1, Confluence Jira plugin 9.0.3","author":"Kevin Ingersoll"},{"text":"I think this might be a duplicate of CONFSERVER-41311?","author":"Kevin Ingersoll"},{"text":"I think this is rather a duplicate of CONFSERVER-41038.\r\n CONFSERVER-41311 is related to proxy configuration.","author":"Tobias Twardon"}]},{"summary":"Missing Jira Issue Type Icon n Confluence Page PDF Export containing JIRA Issue Macro","key":"CONFSERVER-42717","url":"https://jira.atlassian.com/browse/CONFSERVER-42717","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-42717].\r\n  {panel}\r\n\r\n*STEPS TO REPLICATE*\r\n# Create Applink between Confluence 5.8.x and JIRA 7.1.7\r\n# Create several JIRA Issue *type (Epic/Story/Bug/Task)* in *JIRA 7.1.7* (Bug seems not reproducible in Jira 6.3.x and 6.4.x) under same project\r\n# Create a page in Confluence and insert JIRA Issue Macro which will list all the JIRA issue in the project. \r\n# Save the page.\r\n# Export the page to PDF.\r\n\r\n*EXPECTED RESULT*\r\nAll the JIRA Issue type icon (Epic/Story/Bug/Task) will show up in the PDF Export.\r\n\r\n*ACTUAL RESULT*\r\nJIRA Issue Type Icon missing in Confluence Page PDF Export. (Refer to attached image)\r\n\r\n*DIAGNOSIS*\r\nFrom the Confluence logs we can see that Confluence is reaching for the following URL to get the Icon:\r\n{code}\r\nWARN [http-nio-8090-exec-8] [confluence.extra.flyingpdf.ConfluenceExportUserAgent] getImageResource Could not retrieve image resource http://10.60.2.212:8080/jira717/secure/viewavatar?size=xsmall&avatarId=10307&avatarType=issuetype during Confluence export\r\n -- referer: http://10.60.2.212:8090/conf5814/display/TEST/test+jira+issue+pdf | url: /conf5814/spaces/flyingpdf/pdfpageexport.action | userName: admin | action: pdfpageexport | page: 6979586\r\n{code}\r\n\r\nHowever, from JIRA database, the following query shows that the URL for the Icon is different:\r\n{code}select iconurl from issuetype where pname = 'Epic' ;{code}\r\n{code}\"/images/icons/issuetypes/epic.svg\"{code}\r\n\r\n*NOTES*\r\nThis bug only reproducible with JIRA 7.x.x (Tested with JIRA 7.1.7)","createDate":"2016-05-27T10:43:25.000+0000","comments":[{"text":"Also happens with Scroll HTML export","author":"Apiomat Admin"},{"text":"This is major issue with how we intend to use Jira and Confluence to combine in an autonomous solution that outputs client facing documentation. We are only in the concept phases and while all other areas of issue have been resolved, this is a major sticking point that if left unresolved means we will have to abandon.\r\n\r\nWe have found that pictures not exporting is a business critical aspect of our change proposals with clients, and illustrations must be visible on what is effectively becomes a legal binding contract. These are built up from combining a collection of issues that form tasks that must then be followed in order to meet the set requirements.\r\n\r\n!Capture1.PNG!\r\nCapture1.png (shows live site)\r\n!Capture2.PNG! \r\nCapture2.png (shows pdf) \r\n","author":"James Liu"},{"text":"Any updates on this issue? Can we expect it to be addressed by Atlasssian at any time?","author":"Pieter Smit"},{"text":"We are impacted too.\r\n\r\n \r\n\r\nHave you some news?","author":"Florent bahier"},{"text":"Confluence 5.10.8 with JIRA 7.1.7 - the same problem.","author":"Vitek Urban"},{"text":"any update? This issue does not seem to be picked up by Atlassian, how come?","author":"Pieter Smit"},{"text":"The type of the issue, for instance: bug or improvement, can be quite important for the understanding of the issue description. \r\n\r\nDue to the missing icons in the PDF, I have resorted to printing the page and using the \"Print to PDF\" function of the OS instead of using the \"Export to PDF\" function in Confluence. The result is more understandable, but also looks ugly.","author":"Bo Stig Hansen"},{"text":"We have the same issue with Confluence 5.10.6 and Jira 7.1.9. Could it have something to do with the \"&\" not being read correctly? \r\n\r\nAtlassian, please inform us when it will be fixed.","author":"M Hoogenboom"},{"text":"Experiencing the same issue with Confluence ({color:#333333} 1000.0.0-e5ebac66d38{color}) & Jira ({color:#707070}v1001.0.0-SNAPSHOT#100087-{color}{color:#707070}sha1:1fe7d14{color}) for Cloud. This is preventing us from using Confluence to export client facing Release notes. I'm very surprised that this is prioritized as Low and Minor impact. ","author":"Niina Johansson"},{"text":"h3.  6.7.2 is also affected","author":"skorenets"},{"text":"This seems to be a duplicate of https://jira.atlassian.com/browse/CONFSERVER-55160\r\n\r\nAlso for Confluence Cloud customers facing this issue, there is a bug report here: https://jira.atlassian.com/browse/CONFCLOUD-67595\r\n\r\nPlease upvote and watch.","author":"Alex Dopp"},{"text":"So the linked Cloud issue was fixed in Jan 2021, but this is still set to Gathering Interest??  Please fix.\r\n\r\nWe are on Jira Data Center 8.15.1 and Confluence Data Center 7.0.1 and are having this issue when exporting to Word.","author":"danna deaton"}]},{"summary":"Pages with a large amount of Comments are slow to load","key":"CONFSERVER-42671","url":"https://jira.atlassian.com/browse/CONFSERVER-42671","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-42671].\n  {panel}\n\nWhen viewing pages with a large amount of comments in Confluence, the page will take a very long time to load. A page with 200+ comments from different users slows dramatically when loading. \r\n\r\nI see the *content* (the actual comments) loading quickly - but I see a *lot* of GET requests thereafter - many of which are pulling avatars for each of the users that are commenting in the instance, together with a lot of what appears to be template calls.\r\n\r\nThis is really slow (took 32 seconds to load a page) on the instance I tested on, and it does require many users with avatars to see the effect.I believe those things should be pulled from cache, not retrieved on every comment. That would likely speed up the page load.","createDate":"2016-05-23T19:55:16.000+0000","comments":[{"text":"I assume Atlassian doesn't want to fix any of their server customer issues ","author":"Sayan Kaiser"}]},{"summary":"Attachment add via REST APIs fails with 500 response","key":"CONFSERVER-41047","url":"https://jira.atlassian.com/browse/CONFSERVER-41047","type":"Bug","priority":"","description":"This appears to be a frequently hit error when attachments are added concurrently.\r\n\r\n{noformat}\r\n2016-03-14 14:17:15,336 WARN [http-nio-8660-exec-5] [net.sf.hibernate.StaleObjectStateException] <init> An operation failed due to stale data\r\n -- url: /rest/api/latest/content/300420943/child/attachment/300420948/data | userName: automation\r\nnet.sf.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) for com.atlassian.confluence.pages.Attachment instance with identifier: 300420948\r\n\tat net.sf.hibernate.persister.AbstractEntityPersister.check(AbstractEntityPersister.java:513)\r\n\tat net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:673)\r\n\tat net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:630)\r\n\tat net.sf.hibernate.impl.ScheduledUpdate.execute(ScheduledUpdate.java:52)\r\n\tat net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2476)\r\n\tat net.sf.hibernate.impl.SessionImpl.executeAll(SessionImpl.java:2462)\r\n\tat net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2420)\r\n\tat net.sf.hibernate.impl.SessionImpl.flush(SessionImpl.java:2288)\r\n\tat com.atlassian.confluence.core.persistence.hibernate.VersionedHibernateObjectDao.save(VersionedHibernateObjectDao.java:152)\r\n\tat com.atlassian.confluence.pages.persistence.dao.hibernate.AbstractHibernateAttachmentDao.saveNewAttachmentVersion(AbstractHibernateAttachmentDao.java:274)\r\n\tat com.atlassian.confluence.pages.attachments.CachingAttachmentDao.saveNewAttachmentVersion(CachingAttachmentDao.java:196)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.saveNewAttachmentVersion(DefaultAttachmentManager.java:200)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.saveAttachments(DefaultAttachmentManager.java:172)\r\n\tat com.atlassian.confluence.pages.DelegatorAttachmentManager.saveAttachments(DelegatorAttachmentManager.java:154)\r\n\tat com.atlassian.confluence.pages.CachingAttachmentManager.saveAttachments(CachingAttachmentManager.java:205)\r\n\tat sun.reflect.GeneratedMethodAccessor1140.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy36.saveAttachments(Unknown Source)\r\n\tat com.atlassian.confluence.pages.DefaultFileUploadManager.storeResources(DefaultFileUploadManager.java:126)\r\n\tat com.atlassian.confluence.pages.DefaultFileUploadManager.storeResource(DefaultFileUploadManager.java:66)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateAttachmentData(AttachmentServiceImpl.java:449)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateData(AttachmentServiceImpl.java:366)\r\n\tat sun.reflect.GeneratedMethodAccessor1055.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy137.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor1055.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n\tat com.sun.proxy.$Proxy358.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor1055.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:136)\r\n\tat com.sun.proxy.$Proxy358.updateData(Unknown Source)\r\n\tat com.atlassian.confluence.plugins.restapi.resources.AttachmentResource.updateData(AttachmentResource.java:366)\r\n\tat sun.reflect.GeneratedMethodAccessor1141.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker$1.invoke(DispatchProviderHelper.java:205)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$1.intercept(DispatchProviderHelper.java:100)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.expand.interceptor.ExpandInterceptor.intercept(ExpandInterceptor.java:38)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper.invokeMethodWithInterceptors(DispatchProviderHelper.java:132)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker._dispatch(DispatchProviderHelper.java:201)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter$JerseyOsgiServletContainer.doFilter(RestDelegatingServletFilter.java:178)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter.doFilter(RestDelegatingServletFilter.java:73)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilterInternal(RestServletUtilsUpdaterFilter.java:26)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilter(RestServletUtilsUpdaterFilter.java:40)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.efi.OnboardingFilter.doFilter(OnboardingFilter.java:61)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.mywork.client.filter.ServingRequestsFilter.doFilter(ServingRequestsFilter.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.cors.CorsFilter.doFilter(CorsFilter.java:65)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter.doFilter(PrettyUrlsSiteMeshFixupFilter.java:36)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsDispatcherFilter.doFilter(PrettyUrlsDispatcherFilter.java:60)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter.doFilter(PrettyUrlsSiteMeshFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsMatcherFilter.doFilter(PrettyUrlsMatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n\tat com.atlassian.confluence.util.profiling.ProfilingSiteMeshFilter.doFilter(ProfilingSiteMeshFilter.java:50)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceActivityFilter.doFilter(ConfluenceActivityFilter.java:45)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.cache.TransactionalCacheFactoryCleanupFilter.doFilter(TransactionalCacheFactoryCleanupFilter.java:47)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.ServletContextThreadLocalFilter.doFilter(ServletContextThreadLocalFilter.java:21)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.LoggingContextFilter.doFilter(LoggingContextFilter.java:41)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.UserNameHeaderFilter.doFilter(UserNameHeaderFilter.java:27)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.MauEventFilter.doFilter(MauEventFilter.java:37)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimeoutFilter.doFilter(ConfluenceTimeoutFilter.java:65)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:240)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceSecurityFilter.doFilter(ConfluenceSecurityFilter.java:27)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ThreadLocalCacheFilter.doFilter(ThreadLocalCacheFilter.java:30)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:103)\r\n\tat com.atlassian.confluence.util.AbstractBootstrapHotSwappingFilter.doFilter(AbstractBootstrapHotSwappingFilter.java:35)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:79)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestSeraphFilter.doFilter(RestSeraphFilter.java:44)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.ClusterHeaderFilter.doFilter(ClusterHeaderFilter.java:65)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.springframework.orm.hibernate.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:170)\r\n\tat com.atlassian.spring.filter.FlushingSpringSessionInViewFilter.doFilterInternal(FlushingSpringSessionInViewFilter.java:29)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.util.profiling.filters.ProfilingFilter.doFilter(ProfilingFilter.java:99)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.cache.AbstractCachingFilter.doFilter(AbstractCachingFilter.java:33)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.jwt.internal.servlet.JwtAuthFilter.doFilter(JwtAuthFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.analytics.client.filter.DefaultAnalyticsFilter.doFilter(DefaultAnalyticsFilter.java:38)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.web.filter.HttpRequestStatsFilter.doFilter(HttpRequestStatsFilter.java:72)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilterInternal(GzipFilter.java:115)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilter(GzipFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimingFilter.doFilter(ConfluenceTimingFilter.java:53)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.ReverseProxyFilter.doFilter(ReverseProxyFilter.java:467)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:34)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.validateparam.RequestParamValidationFilter.doFilter(RequestParamValidationFilter.java:58)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.TranslationModeFilter.doFilter(TranslationModeFilter.java:44)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.plugin.servlet.filter.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:73)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.LanguageExtractionFilter.doFilter(LanguageExtractionFilter.java:53)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.RequestCacheThreadLocalFilter.doFilter(RequestCacheThreadLocalFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ResponseOutputStreamFilter.doFilter(ResponseOutputStreamFilter.java:25)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.impl.servlet.HoldingUntilStartedFilter.doFilter(HoldingUntilStartedFilter.java:97)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.HeaderSanitisingFilter.doFilter(HeaderSanitisingFilter.java:44)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.servlet.FourOhFourErrorLoggingFilter.doFilter(FourOhFourErrorLoggingFilter.java:71)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.DebugFilter.doFilter(DebugFilter.java:50)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n2016-03-14 14:17:15,339 ERROR [http-nio-8660-exec-5] [sf.hibernate.impl.SessionImpl] execute Could not synchronize database state with session\r\n -- url: /rest/api/latest/content/300420943/child/attachment/300420948/data | userName: automation\r\n2016-03-14 14:17:15,340 ERROR [http-nio-8660-exec-5] [rest.api.model.ExceptionConverter] convertServiceException No status code found for exception, converting to internal server error : \r\n -- url: /rest/api/latest/content/300420943/child/attachment/300420948/data | userName: automation\r\njava.lang.RuntimeException: Could not save: there was a problem flushing the hibernate transaction\r\n\tat com.atlassian.confluence.core.persistence.hibernate.VersionedHibernateObjectDao.save(VersionedHibernateObjectDao.java:160)\r\n\tat com.atlassian.confluence.pages.persistence.dao.hibernate.AbstractHibernateAttachmentDao.saveNewAttachmentVersion(AbstractHibernateAttachmentDao.java:274)\r\n\tat com.atlassian.confluence.pages.attachments.CachingAttachmentDao.saveNewAttachmentVersion(CachingAttachmentDao.java:196)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.saveNewAttachmentVersion(DefaultAttachmentManager.java:200)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.saveAttachments(DefaultAttachmentManager.java:172)\r\n\tat com.atlassian.confluence.pages.DelegatorAttachmentManager.saveAttachments(DelegatorAttachmentManager.java:154)\r\n\tat com.atlassian.confluence.pages.CachingAttachmentManager.saveAttachments(CachingAttachmentManager.java:205)\r\n\tat sun.reflect.GeneratedMethodAccessor1140.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy36.saveAttachments(Unknown Source)\r\n\tat com.atlassian.confluence.pages.DefaultFileUploadManager.storeResources(DefaultFileUploadManager.java:126)\r\n\tat com.atlassian.confluence.pages.DefaultFileUploadManager.storeResource(DefaultFileUploadManager.java:66)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateAttachmentData(AttachmentServiceImpl.java:449)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateData(AttachmentServiceImpl.java:366)\r\n\tat sun.reflect.GeneratedMethodAccessor1055.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy137.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor1055.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.util.ContextClassLoaderSettingInvocationHandler.invoke(ContextClassLoaderSettingInvocationHandler.java:26)\r\n\tat com.sun.proxy.$Proxy358.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor1055.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:136)\r\n\tat com.sun.proxy.$Proxy358.updateData(Unknown Source)\r\n\tat com.atlassian.confluence.plugins.restapi.resources.AttachmentResource.updateData(AttachmentResource.java:366)\r\n\tat sun.reflect.GeneratedMethodAccessor1141.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker$1.invoke(DispatchProviderHelper.java:205)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$1.intercept(DispatchProviderHelper.java:100)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.expand.interceptor.ExpandInterceptor.intercept(ExpandInterceptor.java:38)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper.invokeMethodWithInterceptors(DispatchProviderHelper.java:132)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker._dispatch(DispatchProviderHelper.java:201)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter$JerseyOsgiServletContainer.doFilter(RestDelegatingServletFilter.java:178)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter.doFilter(RestDelegatingServletFilter.java:73)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilterInternal(RestServletUtilsUpdaterFilter.java:26)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilter(RestServletUtilsUpdaterFilter.java:40)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:26)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.efi.OnboardingFilter.doFilter(OnboardingFilter.java:61)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.mywork.client.filter.ServingRequestsFilter.doFilter(ServingRequestsFilter.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.cors.CorsFilter.doFilter(CorsFilter.java:65)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter.doFilter(PrettyUrlsSiteMeshFixupFilter.java:36)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsDispatcherFilter.doFilter(PrettyUrlsDispatcherFilter.java:60)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter.doFilter(PrettyUrlsSiteMeshFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsMatcherFilter.doFilter(PrettyUrlsMatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n\tat com.atlassian.confluence.util.profiling.ProfilingSiteMeshFilter.doFilter(ProfilingSiteMeshFilter.java:50)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceActivityFilter.doFilter(ConfluenceActivityFilter.java:45)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.cache.TransactionalCacheFactoryCleanupFilter.doFilter(TransactionalCacheFactoryCleanupFilter.java:47)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.ServletContextThreadLocalFilter.doFilter(ServletContextThreadLocalFilter.java:21)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.LoggingContextFilter.doFilter(LoggingContextFilter.java:41)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.UserNameHeaderFilter.doFilter(UserNameHeaderFilter.java:27)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.MauEventFilter.doFilter(MauEventFilter.java:37)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimeoutFilter.doFilter(ConfluenceTimeoutFilter.java:65)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:240)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceSecurityFilter.doFilter(ConfluenceSecurityFilter.java:27)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ThreadLocalCacheFilter.doFilter(ThreadLocalCacheFilter.java:30)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:103)\r\n\tat com.atlassian.confluence.util.AbstractBootstrapHotSwappingFilter.doFilter(AbstractBootstrapHotSwappingFilter.java:35)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:79)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestSeraphFilter.doFilter(RestSeraphFilter.java:44)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.ClusterHeaderFilter.doFilter(ClusterHeaderFilter.java:65)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.springframework.orm.hibernate.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:170)\r\n\tat com.atlassian.spring.filter.FlushingSpringSessionInViewFilter.doFilterInternal(FlushingSpringSessionInViewFilter.java:29)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.util.profiling.filters.ProfilingFilter.doFilter(ProfilingFilter.java:99)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.cache.AbstractCachingFilter.doFilter(AbstractCachingFilter.java:33)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.jwt.internal.servlet.JwtAuthFilter.doFilter(JwtAuthFilter.java:31)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.analytics.client.filter.DefaultAnalyticsFilter.doFilter(DefaultAnalyticsFilter.java:38)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:39)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.web.filter.HttpRequestStatsFilter.doFilter(HttpRequestStatsFilter.java:72)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilterInternal(GzipFilter.java:115)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilter(GzipFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimingFilter.doFilter(ConfluenceTimingFilter.java:53)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:58)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.ReverseProxyFilter.doFilter(ReverseProxyFilter.java:467)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:34)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:64)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:70)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:58)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.validateparam.RequestParamValidationFilter.doFilter(RequestParamValidationFilter.java:58)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.TranslationModeFilter.doFilter(TranslationModeFilter.java:44)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.plugin.servlet.filter.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:73)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.LanguageExtractionFilter.doFilter(LanguageExtractionFilter.java:53)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.RequestCacheThreadLocalFilter.doFilter(RequestCacheThreadLocalFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ResponseOutputStreamFilter.doFilter(ResponseOutputStreamFilter.java:25)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.impl.servlet.HoldingUntilStartedFilter.doFilter(HoldingUntilStartedFilter.java:97)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.HeaderSanitisingFilter.doFilter(HeaderSanitisingFilter.java:44)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.servlet.FourOhFourErrorLoggingFilter.doFilter(FourOhFourErrorLoggingFilter.java:71)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.DebugFilter.doFilter(DebugFilter.java:50)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: net.sf.hibernate.HibernateException: could not update: [com.atlassian.confluence.pages.Attachment#300420948]\r\n\tat net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:693)\r\n\tat net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:630)\r\n\tat net.sf.hibernate.impl.ScheduledUpdate.execute(ScheduledUpdate.java:52)\r\n\tat net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2476)\r\n\tat net.sf.hibernate.impl.SessionImpl.executeAll(SessionImpl.java:2462)\r\n\tat net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2420)\r\n\tat net.sf.hibernate.impl.SessionImpl.flush(SessionImpl.java:2288)\r\n\tat com.atlassian.confluence.core.persistence.hibernate.VersionedHibernateObjectDao.save(VersionedHibernateObjectDao.java:152)\r\n\t... 307 more\r\nCaused by: net.sf.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) for com.atlassian.confluence.pages.Attachment instance with identifier: 300420948\r\n\tat net.sf.hibernate.persister.AbstractEntityPersister.check(AbstractEntityPersister.java:513)\r\n\tat net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:673)\r\n\t... 314 more\r\n{noformat}\r\n\r\nh3. Notes\r\n\r\nh4. Table Filter and Charts for Confluence\r\nThis bug affects *Table Filter and Charts for Confluence* app. When doing page export, the *Table Filter and Charts for Confluence* app creates files for the page's macros output that will be used later. It attaches the file to the custom content entity. So when two different files are attached to the custom content entity at the same time it fails to attach one of them as described.\r\nThe issue on *Table Filter and Charts for Confluence* can be identified by these logs:\r\n{noformat}\r\nurl: /confluence/rest/table-filter/1.0/service/export/multi-page | traceId: aaaaaaaaaaaaaaaa | userName: XX99999\r\nnet.sf.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [com.atlassian.confluence.content.CustomContentEntityObject#1111111111]\r\n{noformat}\r\nThere is nothing in the UI to identify the issue.","createDate":"2016-03-14T19:01:24.000+0000","comments":[{"text":"CONF-40416 has the same stack trace.","author":"Bob Swift"},{"text":"A slightly different database error occurs on 5.8.4. I believe this case was updating an existing attachment with a new name and data.\r\n{noformat}\r\n2016-03-15 13:31:34,784 ERROR [http-nio-8155-exec-9] [atlassian.event.internal.AsynchronousAbleEventDispatcher] run There was an exception thrown trying to dispatch event [com.atlassian.confluence.event.events.content.attachment.AttachmentUpdateEvent[source=com.atlassian.confluence.pages.DefaultAttachmentManager@2cbbbf4d]] from the invoker [SingleParameterMethodListenerInvoker{method=public void com.atlassian.confluence.event.listeners.ThumbnailRemovingListener.handleAttachmentUpdateEvent(com.atlassian.confluence.event.events.content.attachment.AttachmentUpdateEvent), listener=com.atlassian.confluence.event.listeners.ThumbnailRemovingListener@36c5b926}]\r\n -- url: /rest/api/latest/content/291740413/child/attachment/291740417/data | userName: automation\r\njava.lang.RuntimeException: Batch update row count wrong: 0; nested exception is net.sf.hibernate.HibernateException: Batch update row count wrong: 0\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:54)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher$1$1.run(AsynchronousAbleEventDispatcher.java:48)\r\n\tat com.google.common.util.concurrent.MoreExecutors$SameThreadExecutorService.execute(MoreExecutors.java:253)\r\n\tat com.atlassian.event.internal.AsynchronousAbleEventDispatcher.dispatch(AsynchronousAbleEventDispatcher.java:107)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.invokeListeners(EventPublisherImpl.java:160)\r\n\tat com.atlassian.event.internal.EventPublisherImpl.publish(EventPublisherImpl.java:79)\r\n\tat com.atlassian.confluence.event.TimingEventPublisher.publish(TimingEventPublisher.java:73)\r\n\tat com.atlassian.event.legacy.LegacyEventManager.publishEvent(LegacyEventManager.java:36)\r\n\tat com.atlassian.confluence.event.ConfluenceEventManager.publishEvent(ConfluenceEventManager.java:48)\r\n\tat sun.reflect.GeneratedMethodAccessor144.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy34.publishEvent(Unknown Source)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.saveNewAttachmentVersion(DefaultAttachmentManager.java:202)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.saveAttachments(DefaultAttachmentManager.java:172)\r\n\tat com.atlassian.confluence.pages.DelegatorAttachmentManager.saveAttachments(DelegatorAttachmentManager.java:154)\r\n\tat com.atlassian.confluence.pages.CachingAttachmentManager.saveAttachments(CachingAttachmentManager.java:205)\r\n\tat sun.reflect.GeneratedMethodAccessor1852.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy35.saveAttachments(Unknown Source)\r\n\tat com.atlassian.confluence.pages.DefaultFileUploadManager.storeResources(DefaultFileUploadManager.java:126)\r\n\tat com.atlassian.confluence.pages.DefaultFileUploadManager.storeResource(DefaultFileUploadManager.java:66)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateAttachmentData(AttachmentServiceImpl.java:443)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateData(AttachmentServiceImpl.java:360)\r\n\tat sun.reflect.GeneratedMethodAccessor2413.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy125.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor2413.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.osgi.hostcomponents.impl.DefaultComponentRegistrar$ContextClassLoaderSettingInvocationHandler.invoke(DefaultComponentRegistrar.java:134)\r\n\tat com.sun.proxy.$Proxy330.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor2413.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:154)\r\n\tat com.sun.proxy.$Proxy330.updateData(Unknown Source)\r\n\tat com.atlassian.confluence.plugins.restapi.resources.AttachmentResource.updateData(AttachmentResource.java:366)\r\n\tat sun.reflect.GeneratedMethodAccessor2958.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker$1.invoke(DispatchProviderHelper.java:205)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$1.intercept(DispatchProviderHelper.java:100)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.expand.interceptor.ExpandInterceptor.intercept(ExpandInterceptor.java:38)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper.invokeMethodWithInterceptors(DispatchProviderHelper.java:132)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker._dispatch(DispatchProviderHelper.java:201)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter$JerseyOsgiServletContainer.doFilter(RestDelegatingServletFilter.java:178)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter.doFilter(RestDelegatingServletFilter.java:73)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilterInternal(RestServletUtilsUpdaterFilter.java:26)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilter(RestServletUtilsUpdaterFilter.java:40)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:25)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.mywork.client.filter.ServingRequestsFilter.doFilter(ServingRequestsFilter.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.plugins.cors.CorsFilter.doFilter(CorsFilter.java:65)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter.doFilter(PrettyUrlsSiteMeshFixupFilter.java:36)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsDispatcherFilter.doFilter(PrettyUrlsDispatcherFilter.java:60)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter.doFilter(PrettyUrlsSiteMeshFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsMatcherFilter.doFilter(PrettyUrlsMatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n\tat com.atlassian.confluence.util.profiling.ProfilingSiteMeshFilter.doFilter(ProfilingSiteMeshFilter.java:46)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceActivityFilter.doFilter(ConfluenceActivityFilter.java:45)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.cache.TransactionalCacheFactoryCleanupFilter.doFilter(TransactionalCacheFactoryCleanupFilter.java:47)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.ServletContextThreadLocalFilter.doFilter(ServletContextThreadLocalFilter.java:21)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.LoggingContextFilter.doFilter(LoggingContextFilter.java:41)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.UserNameHeaderFilter.doFilter(UserNameHeaderFilter.java:26)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimeoutFilter.doFilter(ConfluenceTimeoutFilter.java:63)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:240)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceSecurityFilter.doFilter(ConfluenceSecurityFilter.java:27)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ThreadLocalCacheFilter.doFilter(ThreadLocalCacheFilter.java:30)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:100)\r\n\tat com.atlassian.confluence.util.AbstractBootstrapHotSwappingFilter.doFilter(AbstractBootstrapHotSwappingFilter.java:35)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:79)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestSeraphFilter.doFilter(RestSeraphFilter.java:44)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.ClusterHeaderFilter.doFilter(ClusterHeaderFilter.java:65)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.springframework.orm.hibernate.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:170)\r\n\tat com.atlassian.spring.filter.FlushingSpringSessionInViewFilter.doFilterInternal(FlushingSpringSessionInViewFilter.java:29)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.util.profiling.filters.ProfilingFilter.doFilter(ProfilingFilter.java:99)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.cache.AbstractCachingFilter.doFilter(AbstractCachingFilter.java:33)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.analytics.client.filter.DefaultAnalyticsFilter.doFilter(DefaultAnalyticsFilter.java:36)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:32)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilterInternal(GzipFilter.java:115)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilter(GzipFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimingFilter.doFilter(ConfluenceTimingFilter.java:76)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.ReverseProxyFilter.doFilter(ReverseProxyFilter.java:467)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:34)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.validateparam.RequestParamValidationFilter.doFilter(RequestParamValidationFilter.java:58)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.TranslationModeFilter.doFilter(TranslationModeFilter.java:44)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.plugin.servlet.filter.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:73)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.LanguageExtractionFilter.doFilter(LanguageExtractionFilter.java:53)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.RequestCacheThreadLocalFilter.doFilter(RequestCacheThreadLocalFilter.java:32)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ResponseOutputStreamFilter.doFilter(ResponseOutputStreamFilter.java:25)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.HeaderSanitisingFilter.doFilter(HeaderSanitisingFilter.java:44)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.servlet.FourOhFourErrorLoggingFilter.doFilter(FourOhFourErrorLoggingFilter.java:71)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.DebugFilter.doFilter(DebugFilter.java:50)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\tat org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1517)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1474)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.springframework.orm.hibernate.HibernateSystemException: Batch update row count wrong: 0; nested exception is net.sf.hibernate.HibernateException: Batch update row count wrong: 0\r\n\tat org.springframework.orm.hibernate.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:597)\r\n\tat org.springframework.orm.hibernate.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:353)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.execute(HibernateTemplate.java:375)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.executeFind(HibernateTemplate.java:341)\r\n\tat com.atlassian.hibernate.HibernateObjectDao.findNamedQueryStringParams(HibernateObjectDao.java:477)\r\n\tat com.atlassian.hibernate.HibernateObjectDao.findNamedQueryStringParam(HibernateObjectDao.java:331)\r\n\tat com.atlassian.confluence.pages.persistence.dao.hibernate.AbstractHibernateAttachmentDao.findAllVersions(AbstractHibernateAttachmentDao.java:221)\r\n\tat com.atlassian.confluence.pages.persistence.dao.hibernate.AbstractHibernateAttachmentDao.findAllVersions(AbstractHibernateAttachmentDao.java:215)\r\n\tat com.atlassian.confluence.pages.attachments.CachingAttachmentDao.findAllVersions(CachingAttachmentDao.java:245)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.getAllVersions(DefaultAttachmentManager.java:308)\r\n\tat com.atlassian.confluence.pages.DelegatorAttachmentManager.getAllVersions(DelegatorAttachmentManager.java:192)\r\n\tat com.atlassian.confluence.pages.CachingAttachmentManager.getAllVersions(CachingAttachmentManager.java:240)\r\n\tat sun.reflect.GeneratedMethodAccessor1536.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy35.getAllVersions(Unknown Source)\r\n\tat com.atlassian.confluence.event.listeners.ThumbnailRemovingListener.removeThumbnailsOfAllVersions(ThumbnailRemovingListener.java:59)\r\n\tat com.atlassian.confluence.event.listeners.ThumbnailRemovingListener.handleAttachmentUpdateEvent(ThumbnailRemovingListener.java:42)\r\n\tat sun.reflect.GeneratedMethodAccessor1866.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:36)\r\n\t... 287 more\r\nCaused by: net.sf.hibernate.HibernateException: Batch update row count wrong: 0\r\n\tat net.sf.hibernate.impl.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:65)\r\n\tat net.sf.hibernate.impl.BatcherImpl.executeBatch(BatcherImpl.java:128)\r\n\tat net.sf.hibernate.impl.SessionImpl.executeAll(SessionImpl.java:2465)\r\n\tat net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2424)\r\n\tat net.sf.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:1837)\r\n\tat net.sf.hibernate.impl.SessionImpl.getQueries(SessionImpl.java:1594)\r\n\tat net.sf.hibernate.impl.SessionImpl.find(SessionImpl.java:1559)\r\n\tat net.sf.hibernate.impl.QueryImpl.list(QueryImpl.java:49)\r\n\tat com.atlassian.hibernate.HibernateObjectDao.lambda$findNamedQueryStringParams$6(HibernateObjectDao.java:504)\r\n\tat com.atlassian.hibernate.HibernateObjectDao$$Lambda$87/2031004360.doInHibernate(Unknown Source)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.execute(HibernateTemplate.java:370)\r\n\t... 312 more\r\n2016-03-15 13:31:34,797 ERROR [http-nio-8155-exec-9] [sf.hibernate.impl.SessionImpl] execute Could not synchronize database state with session\r\n -- url: /rest/api/latest/content/291740413/child/attachment/291740417/data | userName: automation\r\n2016-03-15 13:31:34,825 ERROR [http-nio-8155-exec-9] [rest.api.model.ExceptionConverter] convertServiceException No status code found for exception, converting to internal server error : \r\n -- url: /rest/api/latest/content/291740413/child/attachment/291740417/data | userName: automation\r\norg.springframework.orm.hibernate.HibernateSystemException: Batch update row count wrong: 0; nested exception is net.sf.hibernate.HibernateException: Batch update row count wrong: 0\r\n\tat org.springframework.orm.hibernate.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:597)\r\n\tat org.springframework.orm.hibernate.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:353)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.execute(HibernateTemplate.java:375)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.executeFind(HibernateTemplate.java:341)\r\n\tat com.atlassian.hibernate.HibernateObjectDao.findNamedQueryStringParams(HibernateObjectDao.java:477)\r\n\tat com.atlassian.hibernate.HibernateObjectDao.findNamedQueryStringParam(HibernateObjectDao.java:331)\r\n\tat com.atlassian.confluence.pages.persistence.dao.hibernate.AbstractHibernateAttachmentDao.findAllVersions(AbstractHibernateAttachmentDao.java:221)\r\n\tat com.atlassian.confluence.pages.persistence.dao.hibernate.AbstractHibernateAttachmentDao.findAllVersions(AbstractHibernateAttachmentDao.java:215)\r\n\tat com.atlassian.confluence.pages.attachments.CachingAttachmentDao.findAllVersions(CachingAttachmentDao.java:245)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.getAllVersions(DefaultAttachmentManager.java:308)\r\n\tat com.atlassian.confluence.pages.DefaultAttachmentManager.moveAttachment(DefaultAttachmentManager.java:372)\r\n\tat com.atlassian.confluence.pages.DelegatorAttachmentManager.moveAttachment(DelegatorAttachmentManager.java:166)\r\n\tat com.atlassian.confluence.pages.CachingAttachmentManager.moveAttachment(CachingAttachmentManager.java:128)\r\n\tat sun.reflect.GeneratedMethodAccessor1863.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy35.moveAttachment(Unknown Source)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateAttachmentData(AttachmentServiceImpl.java:447)\r\n\tat com.atlassian.confluence.api.impl.service.content.AttachmentServiceImpl.updateData(AttachmentServiceImpl.java:360)\r\n\tat sun.reflect.GeneratedMethodAccessor2413.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)\r\n\tat com.sun.proxy.$Proxy125.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor2413.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.osgi.hostcomponents.impl.DefaultComponentRegistrar$ContextClassLoaderSettingInvocationHandler.invoke(DefaultComponentRegistrar.java:134)\r\n\tat com.sun.proxy.$Proxy330.updateData(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor2413.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugin.osgi.bridge.external.HostComponentFactoryBean$DynamicServiceInvocationHandler.invoke(HostComponentFactoryBean.java:154)\r\n\tat com.sun.proxy.$Proxy330.updateData(Unknown Source)\r\n\tat com.atlassian.confluence.plugins.restapi.resources.AttachmentResource.updateData(AttachmentResource.java:366)\r\n\tat sun.reflect.GeneratedMethodAccessor2958.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker$1.invoke(DispatchProviderHelper.java:205)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$1.intercept(DispatchProviderHelper.java:100)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.expand.interceptor.ExpandInterceptor.intercept(ExpandInterceptor.java:38)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DefaultMethodInvocation.invoke(DefaultMethodInvocation.java:61)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper.invokeMethodWithInterceptors(DispatchProviderHelper.java:132)\r\n\tat com.atlassian.plugins.rest.common.interceptor.impl.DispatchProviderHelper$TypeOutInvoker._dispatch(DispatchProviderHelper.java:201)\r\n\tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)\r\n\tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)\r\n\tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)\r\n\tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)\r\n\tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter$JerseyOsgiServletContainer.doFilter(RestDelegatingServletFilter.java:178)\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)\r\n\tat com.atlassian.plugins.rest.module.RestDelegatingServletFilter.doFilter(RestDelegatingServletFilter.java:73)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilterInternal(RestServletUtilsUpdaterFilter.java:26)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestServletUtilsUpdaterFilter.doFilter(RestServletUtilsUpdaterFilter.java:40)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.applinks.core.rest.context.ContextFilter.doFilter(ContextFilter.java:25)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.mywork.client.filter.ServingRequestsFilter.doFilter(ServingRequestsFilter.java:37)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.plugins.cors.CorsFilter.doFilter(CorsFilter.java:65)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFixupFilter.doFilter(PrettyUrlsSiteMeshFixupFilter.java:36)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsDispatcherFilter.doFilter(PrettyUrlsDispatcherFilter.java:60)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsSiteMeshFilter.doFilter(PrettyUrlsSiteMeshFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsMatcherFilter.doFilter(PrettyUrlsMatcherFilter.java:56)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)\r\n\tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n\tat com.atlassian.confluence.util.profiling.ProfilingSiteMeshFilter.doFilter(ProfilingSiteMeshFilter.java:46)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.confluence.util.profiling.ConfluenceActivityFilter.doFilter(ConfluenceActivityFilter.java:45)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.cache.TransactionalCacheFactoryCleanupFilter.doFilter(TransactionalCacheFactoryCleanupFilter.java:47)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.ServletContextThreadLocalFilter.doFilter(ServletContextThreadLocalFilter.java:21)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.LoggingContextFilter.doFilter(LoggingContextFilter.java:41)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.UserNameHeaderFilter.doFilter(UserNameHeaderFilter.java:26)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimeoutFilter.doFilter(ConfluenceTimeoutFilter.java:63)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.SecurityFilter.doFilter(SecurityFilter.java:240)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceSecurityFilter.doFilter(ConfluenceSecurityFilter.java:27)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ThreadLocalCacheFilter.doFilter(ThreadLocalCacheFilter.java:30)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.security.auth.trustedapps.filter.TrustedApplicationsFilter.doFilter(TrustedApplicationsFilter.java:100)\r\n\tat com.atlassian.confluence.util.AbstractBootstrapHotSwappingFilter.doFilter(AbstractBootstrapHotSwappingFilter.java:35)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.seraph.filter.BaseLoginFilter.doFilter(BaseLoginFilter.java:148)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.oauth.serviceprovider.internal.servlet.OAuthFilter.doFilter(OAuthFilter.java:79)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.plugins.rest.module.servlet.RestSeraphFilter.doFilter(RestSeraphFilter.java:44)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.ClusterHeaderFilter.doFilter(ClusterHeaderFilter.java:65)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.springframework.orm.hibernate.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:170)\r\n\tat com.atlassian.spring.filter.FlushingSpringSessionInViewFilter.doFilterInternal(FlushingSpringSessionInViewFilter.java:29)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.util.profiling.filters.ProfilingFilter.doFilter(ProfilingFilter.java:99)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.cache.AbstractCachingFilter.doFilter(AbstractCachingFilter.java:33)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:46)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.analytics.client.filter.DefaultAnalyticsFilter.doFilter(DefaultAnalyticsFilter.java:36)\r\n\tat com.atlassian.analytics.client.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:32)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilterInternal(GzipFilter.java:115)\r\n\tat com.atlassian.gzipfilter.GzipFilter.doFilter(GzipFilter.java:92)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.confluence.web.filter.ConfluenceTimingFilter.doFilter(ConfluenceTimingFilter.java:76)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.prettyurls.filter.PrettyUrlsCombinedMatchDispatcherFilter.doFilter(PrettyUrlsCombinedMatchDispatcherFilter.java:61)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter$1.doFilter(DelegatingPluginFilter.java:70)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.ReverseProxyFilter.doFilter(ReverseProxyFilter.java:467)\r\n\tat com.atlassian.confluence.extra.webdav.servlet.filter.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:34)\r\n\tat com.atlassian.plugin.servlet.filter.DelegatingPluginFilter.doFilter(DelegatingPluginFilter.java:78)\r\n\tat com.atlassian.plugin.servlet.filter.IteratingFilterChain.doFilter(IteratingFilterChain.java:42)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:77)\r\n\tat com.atlassian.plugin.servlet.filter.ServletFilterModuleContainerFilter.doFilter(ServletFilterModuleContainerFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.validateparam.RequestParamValidationFilter.doFilter(RequestParamValidationFilter.java:58)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.TranslationModeFilter.doFilter(TranslationModeFilter.java:44)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.plugin.servlet.filter.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:73)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.LanguageExtractionFilter.doFilter(LanguageExtractionFilter.java:53)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.util.RequestCacheThreadLocalFilter.doFilter(RequestCacheThreadLocalFilter.java:32)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.ResponseOutputStreamFilter.doFilter(ResponseOutputStreamFilter.java:25)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.core.filters.HeaderSanitisingFilter.doFilter(HeaderSanitisingFilter.java:44)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.servlet.FourOhFourErrorLoggingFilter.doFilter(FourOhFourErrorLoggingFilter.java:71)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.atlassian.confluence.web.filter.DebugFilter.doFilter(DebugFilter.java:50)\r\n\tat com.atlassian.core.filters.AbstractHttpFilter.doFilter(AbstractHttpFilter.java:31)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\tat org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1517)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1474)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: net.sf.hibernate.HibernateException: Batch update row count wrong: 0\r\n\tat net.sf.hibernate.impl.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:65)\r\n\tat net.sf.hibernate.impl.BatcherImpl.executeBatch(BatcherImpl.java:128)\r\n\tat net.sf.hibernate.impl.SessionImpl.executeAll(SessionImpl.java:2465)\r\n\tat net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2424)\r\n\tat net.sf.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:1837)\r\n\tat net.sf.hibernate.impl.SessionImpl.getQueries(SessionImpl.java:1594)\r\n\tat net.sf.hibernate.impl.SessionImpl.find(SessionImpl.java:1559)\r\n\tat net.sf.hibernate.impl.QueryImpl.list(QueryImpl.java:49)\r\n\tat com.atlassian.hibernate.HibernateObjectDao.lambda$findNamedQueryStringParams$6(HibernateObjectDao.java:504)\r\n\tat com.atlassian.hibernate.HibernateObjectDao$$Lambda$87/2031004360.doInHibernate(Unknown Source)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.execute(HibernateTemplate.java:370)\r\n\t... 273 more\r\n{noformat}","author":"Bob Swift"},{"text":"Also affected for 5.9.2 and 5.10.1, 6.1.1, 6.3.4.","author":"Gonchik Tsymzhitov"},{"text":"6.3.2 affected too.","author":"Anar Imamaliev"},{"text":"Confluence 7.17.4 is affected as well. The Table Filter and Charts app with 12k installations is affected by this bug too. \r\n\r\nIs there any chance it will be fixed?","author":"Andrey Khaneev [StiltSoft]"}]},{"summary":"Link in JIRA Chart (Two dimensional) is incorrect","key":"CONFSERVER-41038","url":"https://jira.atlassian.com/browse/CONFSERVER-41038","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nLink in JIRA Chart (Two dimensional) is incorrect.\r\n\r\nh3. Environment\r\n* Confluence 5.9.6\r\n* JIRA 7.1.1\r\n\r\nh3. Steps to Reproduce\r\n# Create an application link between Confluence and JIRA\r\n# Create a project (e.g. test) and an issue (e.g. TEST-1) on JIRA\r\n# Create a page on Confluence and set JIRA Chart Macro and configure a filter (e.g. {{project = test}}) on the page\r\n# Click a link in the chart as follows\r\n !jira_chart.png|thumbnail! \r\n\r\nh3. Expected Results\r\nMove to *JIRA Issue Search* page with some filter and there should be no error on the page\r\n\r\nh3. Actual Results\r\nMove to *JIRA Issue Search* page with the condition that no filter was set and an error was shown on the page\r\n !jira_filter.png|thumbnail! \r\n\r\nh3. Notes\r\nThis problem never happen on any other link in the chart aside from the one mentioned above. It looks like the final column is just summing all the items up instead of referring to a JIRA filter as shown in the screenshot:\r\n\r\n!jira_chart_macro.png|thumbnail!\r\n\r\nYou'll see the URL is showing {{filter=null}}. ","createDate":"2016-03-14T07:56:48.000+0000","comments":[{"text":"Seems like a small issue/fix.  It's been open for over a YEAR?  How many years until you expect the fix to be implemented?","author":"Robert Sullivan"},{"text":"This seems to be a duplicate of CONFSERVER-43324 for me.","author":"Tobias Twardon"},{"text":"I'm hitting this issue in Confluence Cloud.  Is there a like bug report for Cloud?","author":"Lorraine Gorman"},{"text":"I am using Confluence 7.4.0 and this issue still exists\r\n\r\nJira is DC v8.13.6","author":"Ranganath HV"},{"text":"I can reproduce this issue with Confluence 7.19. Please update Affects version/s. I hope to be fixed this issue as soon as possible.","author":"Akira Higuchi"},{"text":"Can reproduce in 8.5.10","author":"Kate Campbell"},{"text":"8 years.... no fix and no workaround???","author":"Lucas Downard"}]},{"summary":"Space-Details macro preview not rendering","key":"CONFSERVER-40892","url":"https://jira.atlassian.com/browse/CONFSERVER-40892","type":"Bug","priority":"","description":"Steps to reproduce : \r\n# Create a page and insert the space details macro.\r\n# Double click on the macro, and the Edit \"Space Details\" Macro will pop up.\r\n# Notice that the preview shows {{Error rendering macro 'space-details' : null}}\r\n# Save the page and you will find that the macro is showing correctly.\r\n\r\nTested on Internet Explorer 11, Google Chrome, Firefox and Safari.","createDate":"2016-02-25T14:41:50.000+0000","comments":[{"text":"Bug still exists in Confluence 6.0.6 (tested with latest Chrome and Firefox).","author":"Francisco Villar Romasanta"},{"text":"Have the same issue for 6.14.2 (Firefix browser)","author":"Mariya Tyukavkina"}]},{"summary":"Inability to Create Local Group in Confluence When a Problematic User Directory Exist","key":"CONFSERVER-39679","url":"https://jira.atlassian.com/browse/CONFSERVER-39679","type":"Bug","priority":"","description":"h3. Summary\r\nConfluence admin is not able to create new group in Confluence instance should one of the User Directories in that instance is problematic.\r\n\r\nh3. Steps to Reproduce\r\n# Add one External LDAP User Directory (_Read Only with Local Groups_) in your Confluence instance and make sure that you can connect to this LDAP server and retrieved users and groups from this LDAP server.\r\n# Add another External LDAP User Directory (_Read Only with Local Groups_) in your instance. However, please ensure that this directory is problematic (e.g. synchronisation would kept on failing/Base DN does not actually exist).\r\n# Navigate to *Confluence Administration panel >> User management >> Groups* and try to add a local group by clicking _Add Group_.\r\n\r\nh3. Expected Results\r\nConfluence admin would be able to create local group successfully.\r\n\r\nh3. Actual Results\r\nConfluence admin is not able to create local group successfully with the errors shown in the attached screenshot displayed in the Confluence UI.\r\n{code}\r\nFailed to create the group 'admins'. Check your server logs for more information\r\n{code}\r\n\r\nThe following appears in Atlassian-Confluence.log:\r\n{code}\r\n2016-01-11 14:55:59,181 ERROR [ajp-nio-8009-exec-2464] [confluence.user.actions.BrowseGroupsAction] doAdd Failed to create group: admins\r\n -- referer: <base_url>/admin/users/browsegroups.action | url: /admin/users/creategroup.action | userName: admin | action: creategroup\r\ncom.atlassian.confluence.user.UserManagementOperationFailedException: javax.naming.NameNotFoundException: [LDAP: error code 32 - 0000208D: NameErr: DSID-03100213, problem 2001 (NO_OBJECT), data 0, best match of:\r\n\t'DC=confluence,DC=atlassian'\r\n ]; remaining name 'OU=sydney,DC=confluence,DC=atlassian'\r\n\tat com.atlassian.confluence.user.DefaultUserAccessor.createGroup(DefaultUserAccessor.java:347)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n...\r\nCaused by: javax.naming.NameNotFoundException: [LDAP: error code 32 - 0000208D: NameErr: DSID-03100213, problem 2001 (NO_OBJECT), data 0, best match of:\r\n\t'DC=confluence,DC=atlassian'\r\n ]; remaining name 'OU=sydney,DC=confluence,DC=atlassian'\r\n{code}\r\nWhere *'OU=sydney,DC=confluence,DC=atlassian'* is the base DN of the problematic user directory\r\n\r\nThe following is observed to appear in Atlassian-Confluence.log for Confluence version 5.9.8\r\n\r\n{code}\r\n2017-01-09 12:36:19,340 ERROR [http-nio-80-exec-2] [confluence.user.actions.BrowseGroupsAction] doAdd Failed to create group: admins\r\n -- referer: <base_url>/admin/users/creategroup.action | url: /admin/users/creategroup.action | userName: admin | action: creategroup\r\ncom.atlassian.confluence.user.UserManagementOperationFailedException: java.net.SocketTimeoutException: connect timed out\r\n\tat com.atlassian.confluence.user.DefaultUserAccessor.createGroup(DefaultUserAccessor.java:314)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Unknown Source)\r\nCaused by: java.net.SocketTimeoutException: connect timed out\r\n\tat java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)\r\n\tat java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)\r\n\tat java.net.AbstractPlainSocketImpl.connect(Unknown Source)\r\n\tat java.net.PlainSocketImpl.connect(Unknown Source)\r\n\tat java.net.SocksSocketImpl.connect(Unknown Source)\r\n\t... 347 more\r\n{code}\r\n\r\nh3. Workaround\r\nDisable/Delete the problematic User Directory before recreating group","createDate":"2015-10-26T08:56:04.000+0000","comments":[]},{"summary":"Confluence remigrates Wiki Markup content on restart if a plugin is updated","key":"CONFSERVER-37710","url":"https://jira.atlassian.com/browse/CONFSERVER-37710","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe recent fix in Confluence 5.7.4 ( -CONF-35004- ) means that on each restart following a plugin update/upgrade/install, Confluence attempts to re-migrate all our \"unmigrated\" pages (1,800 pages and their attachments) because we have some unknown macros in those pages. These pages seem to get re-migrated again if we update any plugin, enable/re-enable plugins followed by a restart.\r\n\r\nThis is polluting the change history of the pages because it adds another version on each page. It also appears that the attachments on those pages are getting re-indexed.\r\n\r\nI understand the fix may have been intentional but it's having some bad side-effects.\r\n\r\nAlso related:\r\n * CONF-35185\r\n * CONF-32837\r\n * -CONF-32318-\r\n\r\nh3. Steps to Reproduce\r\n * Set up a Confluence instance with the new affected versions.\r\n * Create a new page with *Unmigrated-wiki-markup* macro as shown below or monitor an existing page with it.\r\n ** Create a new page and in a Confluence editor > add `{*}Markup{*}`\r\n ** Choose `{*}Confluence wiki{*}` and insert the below content; notice there are *some whitespaces* in the front of the closing curly bracket.You can see the Preview render a `{*}Wiki Markup{*}` macro  \r\n{code:java}\r\n{\r\n   \" \"\r\n  } {code}\r\n!insertmarkup.png|thumbnail!\r\n\r\n ** Click the `{*}Insert{*}` button and save the page. This will add an *unmigrated-wiki-markup* macro is added to the page. !umigratedwikimarkup.png|thumbnail!\r\n * Install/upgrade a third-party app that provides macros. Such as the Content Formatting for Confluence plugin version 7.2.4.\r\n * Restart the instance.\r\n\r\nh3. Expected Results\r\n\r\nNo unexpected messages displayed in the UI or application logs and no new, unnecessary versions created.\r\nh3. Actual Results\r\n\r\nSee notes below.\r\nh3. Notes on re-opening the bug\r\n\r\nWhen this issue occurs, one or two symptoms will be present:\r\n # First, Confluence will display a _Migration of unmigrated content due to installation of a new plugin_ message for an affected page within the *All updates* landing page.    !image-2025-03-27-12-51-37-279.png! \r\n ## In 8.5.x the *Publisher* and *Published date* for the new page version created will be retained as per documentation. !issuereprod8516.png|width=428,height=185!\r\n ## Starting *9.x* the *Publisher* and *Published* date will not be retained and will appear with *Anonymous* user and new date when Confluence was restarted. !9.2.2-new-version-created.png|width=543,height=311!\r\n # Second, the following message appears in the application logs after plugin install/upgrade followed by a restart.\r\n{code:java}\r\n2025-03-27 10:59:07,358 INFO [macro-migration:thread-1] [render.xhtml.migration.ErrorReportingV2Renderer] render Unable to render content on page BIN:My Test\\nWrapping content in unmigrated wiki markup macro due to system error: index -1, length 0\r\n{code}\r\n\r\nh3. Workaround\r\n\r\nA workaround has been added to the description of related ticket CONF-32837, which provides a method via SQL to disable the remigration job on restarts. As with all database manipulation tasks, please be sure to test this on a non-Production environment first.\r\n\r\nIn the release of 5.10.8, a system variable is added to turn off the remigration behavior during startup. To use this feature:\r\n # Open CONF_INSTALL_FOLDER/bin/setenv.sh (setenv.bat or service under Windows)\r\n # Locate \"CATALINA_OPTS\" and add the below line to the file:\r\nCATALINA_OPTS=\"-Dconfluence.startup.remigration.disable=true ${CATALINA_OPTS}\"\r\n # Save the file and restart Tomcat.\r\n\r\n(i) This workaround has been verified to work for Confluence 9.x and would need to be present in the setenv file prior to the first restart of Confluence after an upgrade.","createDate":"2015-05-29T17:39:19.000+0000","comments":[{"text":"The migration code triggers when a plugin with a xhtml-macro is installed, in case it used to only be a regular wikimarkup macro, or in case that macro wasn't present at all, but now is.\r\n\r\nWe can make the code a lot smarter about how it chooses what content to migrate, and which macro installs should trigger it. This can include:\r\n* if we're doing a plugin upgrade, and the old version had xhtml-macro \"foo\", and the new version has xhtml-macro \"foo\", then don't migrate anything\r\n* if we're doing a plugin upgrade, and the old version had wikimarkup macro \"foo\", and the new version has xhtml-macro \"foo\" - check (via the search index) if there are any usages of \"foo\" in unmigrated content. If there are none, then don't migrate anything\r\n* if we're doing a plugin upgrade, and the old version didn't have any macros, but the new version has xhtml-macro \"foo\" - check (via the search index) if there are any usages of \"foo\" in unmigrated content. If there are none, then don't migrate anything\r\n\r\nWe can also be smarter about whether we store a new version of a page when migrating. If we didn't actually change anything, then we shouldn't store the new version. Note that as of Confluence 5.8, we inject a macroId into the content for each xhtml-macro, so any check for changes to save will need to ignore that. There is also a known issue around remigration inserting redundant empty paragraphs around block-level macros that can ruin padding on some tables and comments (or any place where we don't do a great job of collapsing adjacent newlines) - any fix should address this issue as well.","author":"Richard Atkins"},{"text":"A workaround has been added to the description of related ticket CONF-32837, which provides a method via SQL to disable the remigration job on restarts. As with all database manipulation tasks, please be sure to test this on a non-Production environment first.","author":"Robert Chang"},{"text":"Hello All,\r\n\r\nThis issue has been both reported and confirmed on a recent version of Confluence and therefore has been subsequently re-opened. It will be monitored for further activity and continue to be reviewed in accordance to our [Bugfix Policy|https://confluence.atlassian.com/support/atlassian-bug-fixing-policy-201294573.html]. Please note the workaround provided above in the meantime if this issue is run into.","author":"Steve Shaw"}]},{"summary":"Unable to Purge Trash, Unable to Successfully Delete Space, Page Watchers Are Not Visible After Upgrade to 5.3.x Because CONTENTID Column Is NULL (PAGEID Data Were Not Migrated To CONTENTID In NOTIFICATIONS Table)","key":"CONFSERVER-36780","url":"https://jira.atlassian.com/browse/CONFSERVER-36780","type":"Bug","priority":"","description":"Possibly there is an underlying bug in the upgrade task to 5.3.x when the database in use is MS SQL Server. In 5.3.x, PAGEID column should be replaced with CONTENTID instead in NOTIFICATIONS table but for this case somehow both columns exist and the value in CONTENTID column is all NULL. Somehow the migration task did not migrate PAGEID data in NOTIFICATIONS table to CONTENTID column.\r\n\r\nThis has caused three different issues so far:\r\n# Unable to purge a trash or any trash at all. The issue occurred after an upgrade to 5.3.x and the following appears in the atlassian-confluence.log:\r\n{code}\r\n2013-10-22 13:33:13,681 ERROR [http-8090-2] [sf.hibernate.util.JDBCExceptionReporter] logExceptions The DELETE statement conflicted with the REFERENCE constraint \"FK594ACC88C38FBEA\". The conflict occurred in database \"confluence\", table \"dbo.NOTIFICATIONS\", column 'PAGEID'.\r\n -- url: /pages/dopurgetrashitem.action | userName: admin | referer: http://confluence:8090/pages/purgetrashitem.action?key=PLAY&contentId=30114153 | action: dopurgetrashitem\r\n{code}\r\n# Space deletion seems successful however all users still able to access the deleted space (rebuilding the index didn't make any difference) and the following  appears in the atlassian-confluence.log:\r\n{code}\r\n2013-11-27 22:05:32,216 ERROR [Long running task: Space removal long running task] [atlassian.event.internal.AsynchronousAbleEventDispatcher] run There was an exception thrown trying to dispatch event 'com.atlassian.confluence.event.events.space.SpaceRemoveEvent[source=com.atlassian.confluence.spaces.DefaultSpaceManager@4e636bd6]' from the invoker 'SingleParameterMethodListenerInvoker{method=public void com.atlassian.confluence.plugins.createcontent.listeners.RemoveSpaceListener.onSpaceRemoveEvent(com.atlassian.confluence.event.events.space.SpaceRemoveEvent), listener=com.atlassian.confluence.plugins.createcontent.listeners.RemoveSpaceListener@779a9a3f}'.\r\n -- space: 17596426 | url: /conf/spaces/doremovespace.action | userName: admin | referer: http://localhost:8531/conf/spaces/removespace.action?key=AMP7 | action: doremovespace\r\njava.lang.RuntimeException: deleted object would be re-saved by cascade (remove deleted object from associations): 17596426, of class: com.atlassian.confluence.spaces.Space; nested exception is net.sf.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): 17596426, of class: com.atlassian.confluence.spaces.Space\r\n    at com.atlassian.event.internal.SingleParameterMethodListenerInvoker.invoke(SingleParameterMethodListenerInvoker.java:54)\r\n \r\nCaused by: net.sf.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): 17596426, of class: com.atlassian.confluence.spaces.Space\r\n    at net.sf.hibernate.impl.SessionImpl.forceFlush(SessionImpl.java:778)\r\n    at net.sf.hibernate.impl.SessionImpl.save(SessionImpl.java:756)\r\n    at net.sf.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:1401)\r\n    at net.sf.hibernate.engine.Cascades$4.cascade(Cascades.java:114)\r\n {code}\r\n# After an upgrade to 5.3.x, you can no longer see the list of page watchers although there were users watching the page before the upgrade. When you look into the NOTIFICATIONS table, the watch notifications were listed there and they were tied to the correct usernames. However they were referencing to PAGEID instead of CONTENTID. CONTENTID is all NULL instead.\r\n\r\nh5. Resolution:\r\nAll of the above can be fixed by implementing the steps below:\r\n# Stop Confluence\r\n# Backup Confluence database and Home Directory.\r\n# Run the following SQL query to copy the PAGEID values into the CONTENTID column\r\n{code}\r\nUPDATE NOTIFICATIONS SET CONTENTID = PAGEID WHERE PAGEID IS NOT NULL;\r\n{code}\r\n# Run the following query to drop the PAGEID Foreign Key constraint (double check the actual key name in the NOTIFICATIONS table)\r\n{code}\r\nALTER TABLE NOTIFICATIONS DROP FK594ACC88C38FBEA;\r\n{code}\r\n# Run query to drop the index on the PAGEID column\r\n{code}\r\ndrop index NOTIFICATIONS.n_pageid_idx;\r\n{code}\r\n# Run this query to drop the actual PAGEID column\r\n{code}\r\nALTER TABLE NOTIFICATIONS DROP COLUMN PAGEID;\r\n{code}\r\n# Start Confluence\r\n# You should now be able to purge the trash, able to successfully delete any space and the page watchers are listed in Watch > Manage Watchers\r\n\r\n\r\nh5. Important note:\r\nThe original bug in the upgrade task has been fixed. This means customers upgrading from Confluence versions lower then 5.3 to 5.4.4+ should no longer be effected by this.  \r\n\r\nHowever if you have previously upgraded from an older version of Confluence and are effected by this problem upgrading again to Confluence 5.4.4+ will NOT rerun the upgrade task. Therefore for customers in this situation it is still necessary to run the workaround, upgrading alone is not sufficient to fix this problem.","createDate":"2015-03-06T00:24:02.000+0000","comments":[]},{"summary":"Task sorting by completed date not working","key":"CONFSERVER-35831","url":"https://jira.atlassian.com/browse/CONFSERVER-35831","type":"Bug","priority":"","description":"When you go to your profile and choose tasks, you should be able to order your task list by 'Completed on' date. Choosing the 'Completed on' column doesn't change the order of tasks in the list (ascending or descending).","createDate":"2014-12-07T23:10:43.000+0000","comments":[{"text":"We've found this sort option does change the order of items in the list in 5.8.10, but not as intended. It doesn't sort it asc/desc by date.","author":"sysadmins@prometheusgm.com"},{"text":"Our experience is that the first time the column header (\"Completed date\") is clicked it rearranges the rows, but not correctly, clicking again has not effect (should reverse the row-listing, I assume).\r\n\r\n!image-2017-01-30-12-49-32-796.png!\r\n\r\n \r\n\r\nConfluence: 5.10.8.","author":"Ari Vésteinsson"},{"text":"Our observation of the issues is that it actually sorts by the due date of the task.\r\n\r\n Confluence 6.5.1","author":"Victor Liu"},{"text":"I can confirm the tests of Victor:\r\n\r\nConfluence 6.4.2 and 6.6.5","author":"Andreas Spall (ext. Bafin)"},{"text":"+1 from Continental\r\n\r\nThis needs to be fixed. Incorrect results are showing with the sort function :(","author":"Joyce"},{"text":"Agree this needs to be fixed.  Also, in the macro configuration, Completion Date needs to be added as an option for Sort.  We need to be able to sort incomplete Task Report by due date in normal order and completed Task Report by completion date in reverse order.","author":"Al Genzlinger"},{"text":"Issue is still existing in Confluence version *6.14.3*","author":"Loren Jane Gaceta"},{"text":"We also have this problem with version 6.13.3. Please fix --> it doing our work less productive.","author":"Inessa Chernoguz"},{"text":"Still exists in 7.2.1. Is it really so big problem, that can't be solved in 6 years?","author":"Jan Brabec"},{"text":"+1","author":"Adam Jiang"},{"text":"Task sort by \"Completed on\" date is completely broken/useless.\r\nIt does change the order, but it doesn't seem to do anything sensible.\r\nIt's not only sorting wrong by day, sort by year or month is not working either.\r\nMy date format shown is \"7 Oct 2022\", if that makes a difference.","author":"Niko Heikkinen"},{"text":"The problem still exists with Confluence 7.19.18. Please fix this bug before it reaches its 10th birthday this year!","author":"Simone Kaiser"},{"text":"Hard to believe that a Medium priority bug is yet to be assigned for a fix after almost 10 years!","author":"Timothy Patterson"},{"text":"This bug still exists in Version 8.5.14 LTS.","author":"Stefan.mattetat"}]},{"summary":"Poor performance in JIRA isssues macro when used in conjunction with a page properties report","key":"CONFSERVER-35555","url":"https://jira.atlassian.com/browse/CONFSERVER-35555","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-35555].\n  {panel}\n\nh5.Environment: \r\nConfluence 5.4.3, Confluence 5.4.4\r\nJIRA 6.3.7\r\n\r\nh5.Steps to reproduce\r\n# Create an application link between JIRA and Confluence\r\n# In JIRA, create a scrum project, that has at least one epic in it.\r\n# In Confluence, create a page with the \"Page Properties Macro\".\r\n# Give this page a label of \"Report\"\r\n# Insert a table with one row, one heading column and one body column. Set the header to \"Epic\" and insert a JIRA link to the epic you created.\r\n# Duplicate this page 25-30 times\r\n# Create a new page, and insert the \"Page Properties Report\" macro\r\n## Enter \"report\" as the label\r\n## Enter \"epic\" as a field to be displayed\r\n## Save the report page and refresh\r\n\r\nh5.Expected Results\r\nThe page should be displayed as quickly since issues from JIRA should be batched (as per https://jira.atlassian.com/browse/CONF-31899)\r\n\r\nDisplaying lots of JIRA issues on a page isn't a problem - a dozen or so issues on a single macro, displayed 3-4 times on a single page loads almost instantly.\r\n\r\nh5.Actual Results\r\nThe page properties report macro can take a noticeably longer period of time to load. The performance problem can be exacerbated by higher usage in a production environment.\r\n\r\nh5.Workaround\r\nRemove any fields containing a JIRA macro from the page properties report macro. This will at least return performance to normal.\r\n\r\nAdditionally, performance appears to be a little better in newer versions of Confluence, but can still be a problem in a loaded production environment.","createDate":"2014-11-11T00:47:02.000+0000","comments":[{"text":"This can be a very big problem if the page properties macro contains a JIRA filter... such as a JIRA filter macro that returns the count of issues in the filter.\r\n\r\nWe recently had a page properties report that rolled up 33 pages that used the page properties macro. Each macro contained a JIRA filter macro that returned a count of issues.\r\n\r\nThe page properties report caused the page to take anywhere between 20-60 seconds to load (even though the report macro was paged).","author":"Chad Barnes"},{"text":"Here is Confluence 5.7.1. and run across this issue. \r\n\r\nRemoving the fields with a JIRA issue macro is not an option here, since the reports are all about projects that are managed in JIRA.","author":"Adolfo Casari"},{"text":"I too am making a summary report in wiki about projects managed in JIRA.  For each project, I have a templated subpage in wiki where a JIRA Epic can be associated in the header (page properties macro).\r\n\r\nPage Properties Report macro SORTing doen't seem to work in a predictable manner -- I have a column containing JIRA issues in it.  I was hoping to see 'Epics' that are 'in progress' at the top and 'closed' further down (and rows missing jira tasks at the bottom). ","author":"Jeremy Chambers"},{"text":"We sue the page properties report with combination of the Jira macro intensively and it creates a big issue for use, user don't want to use it. This is how we show transparency on product. design ,development and test document status.","author":"Esty Agmon"}]},{"summary":"Modifying location of a page may break links to pages in the content","key":"CONFSERVER-35137","url":"https://jira.atlassian.com/browse/CONFSERVER-35137","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-35137].\n  {panel}\n\nWhen creating a new page, or copying a existing one\r\n\r\n+Repro Steps:+\r\n* For a new page:\r\n*# Create a new page.\r\n*# Add some content, including links to pages in the same space.\r\n*# Click on the _Location_ button and change the location of the page to another space.\r\n*# Save the page.\r\n* For an existing page\r\n*# Visualize a page with links to other pages.\r\n*# Click on _Tools_ > _Copy_.\r\n*# Click on the _Location_ button and change the location of the page to another space.\r\n*# Save the page.\r\n\r\nIn both cases, the links to the pages are broken and they lead you to the creation of a new page with the same title than the one specified for the link.\r\n\r\nI would expect Confluence to update the links to pages when changing the location of a page. This is what happens when you click on the _Move_ button.","createDate":"2014-09-30T15:09:50.000+0000","comments":[{"text":"The error also affected 6.15.1 version","author":"Pavel Afanasev"},{"text":"Issue still present 26/11/2023 (Confluence verision 1000.0.0-2e59beab1614)","author":"Eugenio Mauri"}]},{"summary":"Links to pages and anchors are broken after Space/Page export to Word doc","key":"CONFSERVER-33872","url":"https://jira.atlassian.com/browse/CONFSERVER-33872","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-33872].\r\n  {panel}\r\nh2. Summary\r\nWhen exporting Spaces or Pages to word doc format, the links inside the exported document file are broken\r\n\r\nh2. Issue 1 in a Page Export to Word\r\nh3. Steps to Reproduce\r\n# Create a page in Confluence with a lot of contents\r\n# Create a heading in the bottom of the page and an [anchor|https://confluence.atlassian.com/confcloud/anchor-macro-724765159.html] or [link|https://confluence.atlassian.com/confcloud/insert-links-and-anchors-724764900.html#InsertLinksandAnchors-Linktoaheadingonapage] to the other heading in the top part of the page\r\n !CONFSERVER-33872-1.png|thumbnail! \r\n# Save, ensure that the link/anchor works in Confluence\r\n# Export to word\r\n\r\nh3. Expected Results\r\nThe exported page should contain working anchor links\r\n\r\nh3. Actual Results\r\nThe anchor links does not work in Word.\r\n !CONFSERVER-33872-2.png|thumbnail! \r\n \r\nh2. Issue 2 - Space Export to Word\r\n\r\n# Create a new space with a few new pages.\r\n# Insert a link macro on one of the pages and link it to one of the other pages inside the space\r\n# Export the page to word doc\r\n\r\nh3. Expected Results\r\nThe exported pages [^lalalala.doc]  should contain working links\r\n\r\nh3. Actual Results\r\nThe links does not work in Word.\r\nFor example, the link that inside the page supposed to be {{http://confluence-pc:5410/confluence/display/PDF/page1}} but shown as below instead\r\n !doc.png|thumbnail!  \r\n","createDate":"2014-06-05T09:16:58.000+0000","comments":[{"text":"* Also reproducable with Confluence 5.2 and 5.5\r\n* Also reproducable on online plattform by atlassian:\r\nhttps://confluence.atlassian.com/display/DOC/Confluence+5.5+Release+Notes\r\n\r\n* Also reproducable in PDF, Interwiki-Links widely exported as relative links and not as absolute links!\r\n\r\nThis is NOT a minor bug to me, neither for any user. It makes PDF and Word Documents exported beeing unusable!\r\n\r\n(can't believe that this is the first issue to that with so less attention, but I can't find another one matching this atm ...)\r\nPossibly related to and fixed within confluence 5.6.3 CONF-24703 ?\r\n\r\nCONF-34250 points out that it is working correctly in HTML ?!?\r\n\r\n*edit* marked as \"known-bug\" in CSP-132185","author":"childnode"},{"text":"Hello All,\r\n\r\nHas this issue been updated?  As a workaround, I am having my users export to PDF, but this is still not resolved as of confluence 5.9.8.  Thanks!","author":"orlando.escobales2004120688"},{"text":"Arg! Why is this still marked *Minor*? The Severity of this issue is huge. I am asked this question +constantly+ when I am onsite with customers. Every customer *wants* to use Word exporting. While I personally use PDF when possible, I cannot inflict my opinion on my customer. \r\n\r\nEvery single user that ever presses the 'export to word' button will experience this issue because links are prevalent in nearly all Pages.","author":"Steven F Behnke"},{"text":"Hello again.\r\n\r\nHope you are doing well.  Has there been any progress on this issue? Thanks!","author":"orlando.escobales2004120688"},{"text":"Thoughts:\r\n\r\n* Something as fundamental as internal links being wrong on every single page makes the *Export to Word* unusable. \r\n* As this has been outstanding for over 2 years, and is likely to affect nearly every single page exported anywhere, it's a poor reflection on confluence as a product.\r\n* It would be better to remove (or hide) the option to *Export to Word* in confluence until this is fixed, or at the very least make it clear within [ExportingContenttoWord,PDF,HTMLandXML-ExportsinglepagestoWordorPDF|https://confluence.atlassian.com/conf57/exporting-content-to-word-pdf-html-and-xml-701435210.html#ExportingContenttoWord,PDF,HTMLandXML-ExportsinglepagestoWordorPDF] that this is broken.\r\n* Is Atlassian actually committed to supporting the *Export to Word* functionality?","author":"Alfa Product Team"},{"text":"I fully agree, this issue is not minor, its huge. It prevents me from creating important documents.\r\n\r\nFixing such a bug typically takes an hour of investigation and code fixes.\r\n\r\nPeople are waiting three years now...","author":"Oliver Keim"},{"text":"Why is this still marked *Minor*?","author":"Mor Akiva"},{"text":"Can confirm this issue is present in Confluence v6.10.2 as well, this bug doesn't seem that of minor impact at all.","author":"sam-jackson"},{"text":"The current release documentation of the word export feature still does not have a hint that exporting breaks all in-document-references.\r\n\r\n[https://confluence.atlassian.com/confcloud/export-content-to-word-pdf-html-and-xml-724764824.html]\r\n\r\n ","author":"Oliver Keim"},{"text":"Still not solved. Any estimation? Not sure also how this is \"Low\"...","author":"Dolev Sall"},{"text":"works(seems to be fixed)  in 7.1.2","author":"Paula Dasch"},{"text":"Hi, \r\n\r\nIs there an estimate on when this will be solved? I'm using Confluence 7.4.1 and the links are still broken in Word export. This really affects our customer delivery. ","author":"Izabela"},{"text":"Any updates on this issue? Has this been resolved? Please kindly share the resolution. ","author":"Ibtissam Kaissoumi"},{"text":"Is there an estimation with this well be resolved? If not export with links are solved sharing parts of spaces very hard and the Confluence is not usable for our organization.","author":"Anna Möllerstedt Westring"},{"text":"Congratulations, this ticket will celebrate its 10th birthday tomorrow! And it still looks unresolved when looking at \"Resolution\". ","author":"Oliver Keim"}]},{"summary":"No results found when search query is longer than 256 characters","key":"CONFSERVER-33174","url":"https://jira.atlassian.com/browse/CONFSERVER-33174","type":"Bug","priority":"","description":"When I pass search query LONGER THAN 256 characters, search results in empty search page (no results found).\r\nThe search query is passed through GET method .../dosearchsite.action?where=TEST&type=page&queryString=...\r\n* POST request method did not help either - behavior is the same.\r\n\r\nExample queries - first which is shorter than 256 characters - works fine, second which is longer - doesn't work:\r\n\r\nancestorIds:(29658282 OR 29658159 OR 29658142 OR 29658019 OR 29657896 OR 29657773 OR 29657650 OR 29657527 OR 29657404 OR 29657231 OR 29657090 OR 28543102 OR 28542832 OR 28542603 OR 28542562 OR 28542024 OR 28541754 OR 28541484) AND labelText:\"label1\"\r\n\r\nancestorIds:(29658405 OR 29658282 OR 29658159 OR 29658142 OR 29658019 OR 29657896 OR 29657773 OR 29657650 OR 29657527 OR 29657404 OR 29657231 OR 29657090 OR 28543102 OR 28542832 OR 28542603 OR 28542562 OR 28542024 OR 28541754 OR 28541484) AND labelText:\"label1\"\r\n\r\nSteps to reproduce:\r\n1. Put together search query that is longer than 256 characters\r\n2. Search Confluence with your query .../dosearchsite.action?where=TEST&type=page&queryString=...\r\n\r\nExpected behavior:\r\nfound pages (or at least if search is somehow limited inform user about this limit by some kind of warning message...)\r\n!found-results.png!\r\n\r\nWhat happened instead:\r\nNo results found\r\n!no-results.png!\r\n\r\nQuestion posted on Atlassian forum:\r\nhttps://answers.atlassian.com/questions/267479/is-there-a-length-limitation-of-search-query-in-confluence-5-4-3","createDate":"2014-04-04T07:38:58.000+0000","comments":[{"text":"Could someone from Atlassian developers at least confirm or refute my suspicion? Is there a length limitation (256 char.) of search query or not? (in Confluence 5.4.3)","author":"Samuel Titka"},{"text":"Hi Samuel \r\n\r\nThanks for getting in touch. We've confirmed that this is indeed an issue and something that we need to resolve, hence the open state of this issue. As soon as we have any further updates on this we will update this ticket and let you know.\r\n\r\nRegards\r\nSteve Haffenden\r\nConfluence Bugmaster\r\nAtlassian","author":"Steve Haffenden"},{"text":"I can't believe this issue is still open after over a year? \r\n\r\nFor us this is a SHOW STOPPER in the ability for our company to upgrade and continue to use Confluence. It seems like the fix should be trivial.\r\n\r\n-Greg","author":"gregjm"},{"text":"Is it possible to raise the priority of this issue? \r\n\r\nIt's causing a serious problem with our plans to upgrade from Confluence 4.x to 5.x - it simply breaks our search.\r\n\r\nSee the attached screenshot. All of those search areas on the left are spaces. Our search filter breaks due to the character limitation. \r\n\r\nI tried to update *confluence/decorators/search.vmd* to use *post* instead of *get* but that doesn't seem to help.\r\n\r\nAnyone from R&D with authoritative comments on this issue? Thanks.\r\n\r\n !modular_search.png|thumbnail! \r\n\r\n-Greg\r\n","author":"gregjm"},{"text":"Is there any update on this issue? \r\n\r\nFor us this is a serious defect.\r\n\r\nAnyone?","author":"gregjm"},{"text":"It appears that this issue is simply due to the maxlength parameter (see text below in red) for the form text type input box. It seems like a trivial fix (but not such a trivial bug). I would fix it in our WAR compile if I could find where this is located.\r\n\r\n<header id=\"search-results-header\" class=\"aui-page-header\">\r\n                        <form class=\"aui\" id=\"search-form\">\r\n                <h1>Search</h1>\r\n                <span class=\"search-input-wrapper\">\r\n                    <input type=\"text\" class=\"text long-field search-input\" name=\"queryString\" id=\"query-string\" value=\"license AND spacekey=(eesofkcads | eesofkcalfna | eesofkcama | eesofkcempro | eesofkcgen | eesofkcgg | eesofkcgg | eesofkciccap | eesofkcmbp | eesofkcmqa | eesofkcsysvue | eesofapps | ADS | ALL | ads201501 | ads201401 | ads201306 | ads2012 | ads2011 | ads201101 | ads2009U1 | ads2009 | ads2008U2 | support)\" incremental=\"true\" {color:red}*maxlength=\"255\"*{color}>\r\n                    <span class=\"aui-icon aui-icon-small aui-iconfont-help help-button\">Help</span>\r\n                </span>\r\n                <button type=\"submit\" class=\"aui-button\" id=\"search-query-submit-button\"><span class=\"aui-icon aui-icon-small aui-iconfont-search\">Search</span></button>\r\n                                          </form>\r\n        </header>","author":"gregjm"},{"text":"Hi Greg, you have my like (y) :)","author":"Samuel Titka"},{"text":"I found a workaround, albeit not a perfect one.\r\n\r\nYou can search using REST and CQL with no practical limit on the spaces.\r\n\r\nFor example, this will work:\r\n\r\n*http://your.site.com/rest/api/content/search?os_username=<USER NAME>&os_password=<USER PWD>&cql=(type=page and text ~Nodelocked and space in (eesofkcads,eesofkcalfna,eesofkcama,eesofkcempro,ads201501,ads201401,ads201306,ads2012,ads2011,ads201101,ads2009U1,ads2009,ads2008U2,support))*\r\n\r\n...where <USER NAME> and <USER PWD> are proper login permissions. The authentication is needed if doing a search from a script (like Python etc.). \r\n\r\nThe only issue I now have is that the search results don't return a 'summary' view. At least search does work with this method - I can workaround the summary issue.\r\n\r\n-Greg\r\n","author":"gregjm"}]},{"summary":"When Space XML Imports Fail, Partial Space Data is Left in the Database","key":"CONFSERVER-31528","url":"https://jira.atlassian.com/browse/CONFSERVER-31528","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n  *NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-31528].\r\n  {panel}\r\n\r\nSpace XML imports will sometimes fail due to a variety of reasons:\r\n* Confluence runs out of memory\r\n* The import process times out\r\n* Unique key constraint violations\r\n* A few other causes are described in https://confluence.atlassian.com/display/DOC/Troubleshooting+XML+backups+that+fail+on+restore\r\n\r\nOftentimes these partially imported spaces remain in the DB without any way to remove them via the UI, making a re-import attempt impossible (due to a duplicate Space Key or other constraint violation).\r\n\r\nCan we investigate:\r\n- some way to rollback a failed XML space import (or determine whether imports will fail before it starts)?\r\n- possibilities for Confluence to automatically recognise half-imported Spaces and delete related data from the UI?\r\n\r\n*Current workaround:* [How to Manually Delete a Space|https://confluence.atlassian.com/display/CONFKB/After+a+failed+space+import%2C+it%27s+not+possible+to+re-import+because+of+leftover+space+data] (Cloud users will need to contact Atlassian Support and request removing the Space from Confluence database)","createDate":"2013-11-07T19:27:57.000+0000","comments":[{"text":"Hi [~rchang]\r\n\r\nThanks for re-raising this issue. Could you help me understand why the space import is breaking in the first place. I think it would be better to treat the cause of this issue if possible rather that try to resolve the symptoms.\r\n\r\nRegards","author":"Steve Haffenden"},{"text":"This is also an issue when exporting a space with only specific selected pages from v-5.8.18 to v-5.10.7.\r\n\r\nFirst I made an export of the full space, without problems (only the issues with \"Undexpected EOF in CDATA section\"[1]), and deleted it. Then I tried to export the space with only 1 selected page and imported that. This import also went fine, but when I deleted the space again it seems like it wasn't able to delete everything. When I for the second time imported the same export, I was not able to import it due constraint violation.\r\n\r\n\r\n\r\n*Short recap to reproduce:*\r\n # Export space with only a selected amount of pages\r\n # Import to new instance\r\n # Delete space in new instance\r\n # Import to new instance\r\n\r\n \r\n\r\n[1]: \r\n WARN [Long running task: Importing data] [importexport.xmlimport.persister.XHtmlBodyContentPropertyUserRewriter] translateBodyContentXhtmlProperty Unable to parse text of BodyContent 66742586 as XHTML storage format: The XML content could not be parsed. There is a problem at line 1, column 5552. Parser message: Unexpected EOF in CDATA section\"\r\n\r\n ","author":"Magnus"},{"text":"Just got burned by this using version 6.2 of confluence (Linux) when trying to delete a successfully imported space from an Atlassian Cloud export.\r\nTried your fix... no go - gets stuck near the end on foreign key constraints, just wasting hours of my time trying to manually fix this.\r\n\r\nAt this point I'm probably better just nuking the entire thing and rebuilding from scratch.\r\n\r\n \r\n\r\nERROR: update or delete on table \"spaces\" violates foreign key constraint \"fklmweu06nft59g7mw1i1myorys\" on table \"content\"\r\nDETAIL: Key (spaceid)=(1998852) is still referenced from table \"content\".\r\n********** Error **********\r\n\r\nERROR: update or delete on table \"spaces\" violates foreign key constraint \"fklmweu06nft59g7mw1i1myorys\" on table \"content\"\r\nSQL state: 23503\r\nDetail: Key (spaceid)=(1998852) is still referenced from table \"content\".","author":"Mark Benson"},{"text":"[~mark.benson1447742102] Can you explain me about your statement about \"tried your fix\"? Did you try the workaround from this page https://confluence.atlassian.com/confkb/after-a-failed-space-import-it-s-not-possible-to-re-import-because-of-leftover-space-data-217743668.html ?","author":"Minh Tran"},{"text":"Yes I tried the work around on that page, and no it was not successful.\r\n I was running a Postgres database so followed the Postgres instructions section.\r\n The bulk query failed as per above with the foreign key constraint.\r\n\r\nI ran each statement individually and this is what it was getting hung up on:\r\n _/* DELETE SPACE */_\r\n _DELETE FROM spaces WHERE spaceid=SPACEID_HERE;_\r\n\r\nWhen you queried the \"content\" table with _SELECT * FROM content WHERE spaceid=1998852_ you still saw many remaining objects.\r\n They seemed to mostly be attachment and page objects from what I can recall.\r\n\r\nI ended up just nuking the database and starting over to test again. \r\n I did also test this with Confluence 6.2.1 which made no difference.\r\n It doesn't seem to have anything to do with a failed import as I experienced the same results by doing the following:\r\n # Full space XML export from our Atlassian Cloud Confluence instance\r\n # Import space into Confluence Server 6.2.1 (Postgres) instance\r\n # Attempt to delete space (fails)\r\n # Attempt manual workaround (fails)\r\n\r\nI did actually raise a support ticket about this and was prompted to try the following to get around the constraints: [https://confluence.atlassian.com/kb/how-to-drop-and-recreate-the-database-constraints-on-postgresql-776812450.html] (edit: fixed link to correct one)\r\n However this also failed...\r\n _ERROR: must be superuser to COPY to or from a file_\r\n _SQL state: 42501_\r\n _Hint: Anyone can COPY to stdout or from stdin. psql's \\copy command also works for anyone._","author":"Mark Benson"},{"text":"[~mark.benson1447742102]\r\n\r\nIt seems that you did not run all queries in the instruction\r\n\r\n{quote}\r\n/* Grab Space ID */\r\nSELECT spaceid FROM spaces WHERE spacekey='YOUR_SPACEKEY_HERE';\r\n{quote}\r\nMake a note of the space id.\r\n\r\n\r\nCopy the script below, then do a find and replace for:\r\n{quote}\r\nYOUR_SPACEKEY_HERE = your space key\r\nSPACEID_HERE = your space id.\r\n\r\n/* DELETE CONTENT */\r\n/* REMOVE REFERENCES IN SPACES TO CONTENT */\r\nUPDATE spaces SET homepage=NULL, spacedescid=NULL WHERE spaceid = SPACEID_HERE;\r\n\r\n/* CREATE A DELETE SET */\r\nDROP TABLE IF EXISTS content_delete;\r\nCREATE TABLE content_delete AS (SELECT contentid FROM content c JOIN spaces s ON s.spaceid = c.spaceid WHERE s.spacekey = 'YOUR_SPACEKEY_HERE');\r\n \r\n/* ADD A PRIMARY KEY TO PREVENT DUPES */\r\nALTER TABLE content_delete ADD PRIMARY KEY (contentid);\r\n \r\n/* INSERT INTO THE DELETE SET, ALL CHILD PAGES */\r\nINSERT INTO content_delete (SELECT contentid FROM content WHERE prevver IN(SELECT contentid FROM content c JOIN spaces s ON s.spaceid = c.spaceid WHERE s.spacekey='YOUR_SPACEKEY_HERE'));\r\n \r\n/* INSERT INTO THE DELETE SET, ALL COMMENTS */\r\nINSERT INTO content_delete (SELECT contentid FROM content WHERE pageid IN (SELECT * FROM content_delete));\r\n \r\n/* INSERT INTO THE DELETE SET ALL VERSIONS OF ALL COMMENTS */\r\nINSERT INTO content_delete (SELECT contentid FROM content WHERE contenttype ='COMMENT' AND prevver IN (SELECT * FROM content_delete));\r\n \r\n/* DELETE CONFANCESTORS */\r\nDELETE FROM confancestors WHERE descendentid IN (SELECT contentid FROM content_delete) OR ancestorid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE BODYCONTENT */\r\nDELETE FROM bodycontent WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE CONTENT_LABEL */\r\nDELETE FROM content_label WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE OS_PROPERTYENTRY */\r\nDELETE FROM os_propertyentry WHERE entity_id IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE LINKS */\r\nDELETE FROM links WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE EXTRNLNKS */\r\nDELETE FROM extrnlnks WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE IMAGEDETAILS  */\r\nDELETE FROM imagedetails WHERE attachmentid IN (SELECT c.contentid FROM content c WHERE c.pageid IN (SELECT contentid FROM content_delete));\r\n \r\n/* DELETE ATTACHMENT DATA */\r\nDELETE FROM attachmentdata WHERE attachmentid IN (SELECT c.contentid FROM content c WHERE c.pageid IN (SELECT contentid FROM content_delete));\r\n \r\n/* DELETE ATTACHMENTS */\r\nDELETE FROM content WHERE contenttype = 'ATTACHMENT' AND pageid IN (SELECT contentid FROM content_delete);\r\n​\r\n/* DELETE CONTENT_PERM */\r\nDELETE FROM content_perm WHERE cps_id IN (SELECT id FROM content_perm_SET WHERE content_id IN (SELECT contentid FROM content_delete));\r\n \r\n/* DELETE CONTENT_PERM_SET */\r\nDELETE FROM content_perm_SET WHERE content_id IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE TRACKBACK LINKS */\r\nDELETE FROM trackbacklinks WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE NOTIFICATIONS (CONTENT) */\r\nDELETE FROM notifications WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE NOTIFICATIONS (SPACE) */\r\nDELETE FROM notifications WHERE spaceid = SPACEID_HERE;\r\n \r\n/* DELETE PREVIOUS VERSIONS OF PAGE TEMPLATES */\r\nCREATE TABLE pagetemp_delete AS (SELECT templateid FROM pagetemplates WHERE spaceid=SPACEID_HERE);\r\nDELETE FROM pagetemplates WHERE prevver IN (SELECT templateid from pagetemp_delete);\r\n \r\n/* DELETE PAGETEMPLATES */\r\nDELETE FROM pagetemplates WHERE spaceid=SPACEID_HERE;\r\n \r\n/*DELETE SPACEPERMISSIONS */\r\nDELETE FROM spacepermissions WHERE spaceid=SPACEID_HERE;\r\n \r\n/* DELETE LIKES */\r\nDELETE FROM likes WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE CONTENTPROPERTIES */\r\nDELETE FROM contentproperties WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE CONTENT */\r\nDELETE FROM content WHERE contentid IN (SELECT contentid FROM content_delete);\r\n \r\n/* DELETE ANY DECORATORS FOR THE SPACE */\r\nDELETE FROM decorator where SPACEKEY='YOUR_SPACEKEY_HERE';\r\n​\r\n/* DELETE SPACE */\r\nDELETE FROM spaces WHERE spaceid=SPACEID_HERE;\r\n \r\n/* DELETE REFERENCE FROM BANDANA */\r\nDELETE FROM bandana WHERE bandanacontext='YOUR_SPACEKEY_HERE';\r\n{quote}\r\n\r\n\r\nA listing of all the deleted content is located in the content_delete table that has been created. You can drop these table when you're done with them by executing:\r\n\r\n{quote}DROP TABLE content_delete;\r\nDROP TABLE pagetemp_delete;\r\n{quote}\r\n\r\nFinally, you'll need to rebuild your index from scratch.","author":"Minh Tran"},{"text":"I think you misunderstood I literally copy/pasted that *entire block* from your page to notepad++ and replaced the 2 variables.\r\nThen copy/pasted the entire block into PGAdmin4 and ran it as a query.\r\nSo I can't really see how I'd miss one.\r\n\r\nWhen that did not work I tested each statement in order 1 by 1 from top to bottom to work out where it was getting stuck.\r\nI tried that multiple times on 2 different spaces so it's very unlikely that I missed one.","author":"Mark Benson"},{"text":"Just for fun - here you go.\r\nThis is Confluence 6.2.1 (Linux + Postgres) after a full Confluence restore was made from an Atlassian Cloud instance backup export.\r\n\r\n*Step 1:*\r\n\r\n!Postgres.PNG!\r\n\r\n*Step 2:*\r\n\r\n!Postgres1.PNG!\r\n\r\n*Step 3:*\r\n\r\n!Postgres2.PNG!\r\n\r\n(Slightly different error, but still a constraint violation. This is also the first time I've tried a full complete restore from Atlassian Cloud so I have no idea what might be different due to that)\r\n\r\n \r\n\r\n*Here is the complete query that I ran:*\r\n{code:java}\r\n/* DELETE CONTENT */\r\n/* REMOVE REFERENCES IN SPACES TO CONTENT */\r\nUPDATE spaces SET homepage=NULL, spacedescid=NULL WHERE spaceid = 33521665;\r\n/* CREATE A DELETE SET */\r\nDROP TABLE IF EXISTS content_delete;\r\nCREATE TABLE content_delete AS (SELECT contentid FROM content c JOIN spaces s ON s.spaceid = c.spaceid WHERE s.spacekey = 'ISH');\r\n/* ADD A PRIMARY KEY TO PREVENT DUPES */\r\nALTER TABLE content_delete ADD PRIMARY KEY (contentid);\r\n/* INSERT INTO THE DELETE SET, ALL CHILD PAGES */\r\nINSERT INTO content_delete (SELECT contentid FROM content WHERE prevver IN(SELECT contentid FROM content c JOIN spaces s ON s.spaceid = c.spaceid WHERE s.spacekey='ISH'));\r\n/* INSERT INTO THE DELETE SET, ALL COMMENTS */\r\nINSERT INTO content_delete (SELECT contentid FROM content WHERE pageid IN (SELECT * FROM content_delete));\r\n/* INSERT INTO THE DELETE SET ALL VERSIONS OF ALL COMMENTS */\r\nINSERT INTO content_delete (SELECT contentid FROM content WHERE contenttype ='COMMENT' AND prevver IN (SELECT * FROM content_delete));\r\n/* DELETE CONFANCESTORS */\r\nDELETE FROM confancestors WHERE descendentid IN (SELECT contentid FROM content_delete) OR ancestorid IN (SELECT contentid FROM content_delete);\r\n/* DELETE BODYCONTENT */\r\nDELETE FROM bodycontent WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE CONTENT_LABEL */\r\nDELETE FROM content_label WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE OS_PROPERTYENTRY */\r\nDELETE FROM os_propertyentry WHERE entity_id IN (SELECT contentid FROM content_delete);\r\n/* DELETE LINKS */\r\nDELETE FROM links WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE EXTRNLNKS */\r\nDELETE FROM extrnlnks WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE IMAGEDETAILS */\r\nDELETE FROM imagedetails WHERE attachmentid IN (SELECT c.contentid FROM content c WHERE c.pageid IN (SELECT contentid FROM content_delete));\r\n/* DELETE ATTACHMENT DATA */\r\nDELETE FROM attachmentdata WHERE attachmentid IN (SELECT c.contentid FROM content c WHERE c.pageid IN (SELECT contentid FROM content_delete));\r\n/* DELETE ATTACHMENTS */\r\nDELETE FROM content WHERE contenttype = 'ATTACHMENT' AND pageid IN (SELECT contentid FROM content_delete);\r\n\r\n/* DELETE CONTENT_PERM */\r\nDELETE FROM content_perm WHERE cps_id IN (SELECT id FROM content_perm_SET WHERE content_id IN (SELECT contentid FROM content_delete));\r\n/* DELETE CONTENT_PERM_SET */\r\nDELETE FROM content_perm_SET WHERE content_id IN (SELECT contentid FROM content_delete);\r\n/* DELETE TRACKBACK LINKS */\r\nDELETE FROM trackbacklinks WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE NOTIFICATIONS (CONTENT) */\r\nDELETE FROM notifications WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE NOTIFICATIONS (SPACE) */\r\nDELETE FROM notifications WHERE spaceid = 33521665;\r\n/* DELETE PREVIOUS VERSIONS OF PAGE TEMPLATES */\r\nCREATE TABLE pagetemp_delete AS (SELECT templateid FROM pagetemplates WHERE spaceid=33521665);\r\nDELETE FROM pagetemplates WHERE prevver IN (SELECT templateid from pagetemp_delete);\r\n/* DELETE PAGETEMPLATES */\r\nDELETE FROM pagetemplates WHERE spaceid=33521665;\r\n/*DELETE SPACEPERMISSIONS */\r\nDELETE FROM spacepermissions WHERE spaceid=33521665;\r\n/* DELETE LIKES */\r\nDELETE FROM likes WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE CONTENTPROPERTIES */\r\nDELETE FROM contentproperties WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE CONTENT */\r\nDELETE FROM content WHERE contentid IN (SELECT contentid FROM content_delete);\r\n/* DELETE ANY DECORATORS FOR THE SPACE */\r\nDELETE FROM decorator where SPACEKEY='ISH';\r\n\r\n/* DELETE SPACE */\r\nDELETE FROM spaces WHERE spaceid=33521665;\r\n/* DELETE REFERENCE FROM BANDANA */\r\nDELETE FROM bandana WHERE bandanacontext='ISH';\r\n{code}\r\nPlease let me know if I have done something incorrectly or missed something.\r\n\r\n ","author":"Mark Benson"},{"text":"Hi [~mark.benson1447742102],\r\n\r\nI suggest you to contact with our our support team. They will be able to help you with.\r\nCould I ask that you create a support ticket on [https://getsupport.atlassian.com]?\r\nOnce you've done this one of our support engineers will be in touch to work with you in resolving this problem.\r\n\r\nRegards,\r\nMinh Tran\r\nConfluence Bugmaster\r\nAtlassian\r\n","author":"Minh Tran"},{"text":"Hi Minh, \r\n\r\nI have done this, and it was +*not*+ able to be resolved within our existing Confluence instance. I believe this is due to the database being an Amazon Web Services RDS Postgres database (where Amazon does not allow you to have 100% admin access so some commands cannot run).\r\n\r\nIt sounds like the only solution at this time would be to export the entire Confluence instance out to another local server running a Postgres database where you do have full admin access, run the manual DB fix, then import it all back into the production AWS Server. For a production Confluence instance having to export/import and manually manipulate data directly at the database level is somewhat risky and not really an acceptable solution for a production environment in my opinion.","author":"Mark Benson"},{"text":"Dear [~mark.benson1447742102],\r\n\r\nThanks for sharing your information that your instance to run on AWS.\r\nWe understand the problem you are facing. We will keep updating the ticket when having more information\r\n\r\nBest Regards,\r\nMinh Tran\r\nConfluence BugMaster\r\nAtlassian","author":"Minh Tran"},{"text":"Hi Atlassian,\r\n\r\nI currently have a problem with your work around.  We ran into this over the weekend and started to work with premier support.  However, there are policies in place to not support processes that do DB queries so we had to adjust midway and and go the restore route.  I'd like for Atlassian Development and Support to try and stay more in sync if possible.  \r\n\r\n \r\n\r\nThere are actually two issues here that I think are worth mentioning/addressing. \r\n\r\n \r\n\r\n1) Finding out what caused the corruption in this specific case. \r\n\r\n2) The problem I have where I ask for Atlassian to stay in sync.  \r\n\r\n \r\n\r\nThe first item - There was a support ticket that our TAM @mshelton can help get additional details if I miss anything.  Anyway, we ran into a case where the cloud instance had a project space and someone copied some pages from a personal space over to the project space where those pages still had links on them to the personal space.  The destination instance already had a personal space for said person so the project space failed to import and then failed to be deleted.  We tried to follow the steps above and ran into some errors where comments and page versions couldn't be deleted due to DB constraints.  I know this bug has been opened for a while, but it would be helpful if this could be addressed in a way to fail the import in a way that can be cleaned up, even if it can't do the import itself. \r\n\r\nThe second item is more of an overall Atlassian issue.  I don't solely blame Premier Support.  They do an awesome job for us and handle all the crazy things we come up with.  What I am seeing is a disconnect between the Developer side of the house and the Support side of the house.  While I think that this is going to exist to some degree no matter what, it seems to be a bit more pronounced lately and specifically in cases like this one.  The Development side of the house is going to try to solve problems however they can, find work arounds, push new features.  And Support is going to be more cautious so they can scale too handle the large number of customers.  The problem for customers is when we are stuck in the middle between these suggestion paths and Atlassian Support not backing the Development team's documentation that is available to end users.  I'd like to see Atlassian Support try to endorse and help facilitate customers in following Developer suggestions.  All the same caveats can be in place that this is not to be taken lightly and should be done in sandbox/dev environments and at the customer's own risk, but it would help the customer experience to be a bit more consistent.  \r\n\r\n \r\n\r\nI'm happy to have any one-on-one meetings to discuss further if it would help.  \r\n\r\n \r\n\r\nRegards,\r\n\r\nMark Lang","author":"Mark Lang"},{"text":"Hi [~marlang], thanks for your feedback, we appreciate your honesty and candidness. The topic of import/export is something which we are actively investigating at the moment, so I anticipate improvements in this are to be forthcoming. I will liaise via your TAM for any further discussion.","author":"Adam Barnes"},{"text":"Hi [~mark.benson1447742102],\r\n\r\nI know that this is late relative to your comments, but you can still do this on RDS by outputting to standard output.\r\nI use PostgreSQL on RDS and was forced to employ this solution due to a failed import.\r\n\r\nWhat I did was put the SQL from [here|https://confluence.atlassian.com/kb/how-to-drop-and-recreate-the-database-constraints-on-postgresql-776812450.html] into two initial sql files.\r\n\r\ngenerate-drop-constraints.sql\r\n\r\n{code:sql}\r\nSELECT 'ALTER TABLE '||nspname||'.\"'||relname||'\" DROP CONSTRAINT \"'||conname||'\";'\r\nFROM pg_constraint\r\nINNER JOIN pg_class ON conrelid=pg_class.oid\r\nINNER JOIN pg_namespace ON pg_namespace.oid=pg_class.relnamespace\r\nORDER BY CASE WHEN contype='f' THEN 0 ELSE 1 END,contype,nspname,relname,conname\r\n{code}\r\n\r\ngenerate-recreate-constraints.sql\r\n\r\n{code:sql}\r\nSELECT 'ALTER TABLE '||nspname||'.\"'||relname||'\" ADD CONSTRAINT \"'||conname||'\" '|| pg_get_constraintdef(pg_constraint.oid)||';'\r\nFROM pg_constraint\r\nINNER JOIN pg_class ON conrelid=pg_class.oid\r\nINNER JOIN pg_namespace ON pg_namespace.oid=pg_class.relnamespace\r\nORDER BY CASE WHEN contype='f' THEN 0 ELSE 1 END DESC,contype DESC,nspname DESC,relname DESC,conname DESC\r\n{code}\r\n\r\nThen I ran those two files and send the results to a file.\r\n\r\n{{/etc/alternatives/pgsql-psql --host=MYRDSHOST --port=5432 --username=MYDBUSER --dbname=MYDBNAME < generate-drop-contraints.sql > drop-constraints.sql}}\r\n\r\n{{/etc/alternatives/pgsql-psql --host=MYRDSHOST --port=5432 --username=MYDBUSER --dbname=MYDBNAME < generate-recreate-contraints.sql > recreate-constraints.sql}}\r\n\r\nThen, I can use the drop-constraints.sql and recreate-constraints.sql file to do their job and drop/recreate the constraints.\r\n\r\nNow I only have to figure out how to get my space import to work...\r\n\r\nThanks,\r\nIan","author":"Ian Clelland"},{"text":"Do you mind me asking why the priority was lowered from High to Medium on this one?","author":"Mark Lang"},{"text":"Can you give us a timeline on when this issue will be fixed. \r\n\r\nIt has been a nightmare since we have experienced this issue and now we are holding back on importing any spaces from our other instances. I am pretty sure all a lot of other users/customers are experiencing the same. \r\n\r\nPlease prioritize and work on it. \r\n\r\nThanks","author":"Sid"},{"text":"Hello,\r\n\r\nWe have the same issue when we want to remove a page from trash.\r\n\r\nBest regards,","author":"Open Europa Wikis Team"},{"text":"v.6.15.2 is affected as well. ","author":"Dinesh shivakoti"},{"text":"This hampers us too. We're on v7.3.2.","author":"Marc Botermans"},{"text":"Provided workaround for MySQL doesn't work — queries fail due to constraints eg.\r\n{noformat}\r\nCannot delete or update a parent row: a foreign key constraint fails (`confluencedev`.`CONTENT`, CONSTRAINT `FKwjyn6091q3l1gl7bh143ma2a` FOREIGN KEY (`PAGEID`) REFERENCES `CONTENT` (`CONTENTID`))\r\n{noformat}\r\nor \r\n{noformat}\r\nCannot delete or update a parent row: a foreign key constraint fails (`confluencedev `.`CONTENT`, CONSTRAINT `FKal6o8xwypd4mdgid9b9nw1q51` FOREIGN KEY (`PARENTCOMMENTID`) REFERENCES `CONTENT` (`CONTENTID`)){noformat}","author":"Yevgen Lasman"},{"text":"@Yevgen, setting FOREIGN KEY CHECKS off  may help. Add following query as the first query in the provided workaround for MySQL script.\r\n\r\nSET FOREIGN_KEY_CHECKS = 0;","author":"Dinesh shivakoti"},{"text":"Thank you, I used it successfully. But the issue itself… well, it is ridiculous that app can't clean up itself :\\","author":"Yevgen Lasman"},{"text":"Please, more SQL workarounds for decade old bugs. Everybody enjoys running DELETEs on production databases. In fact, having SQL workarounds all over KBA's is the most enjoyable thing to do if you want to follow \"proper\" processes of taking the tool down, doing a backup, verifying the backup works, applying stuff, verifying it worked, putting back on. Later on in some cases, heck, you might even introduce the same problem later so you can do it all over again!\r\n\r\nYou can sense the salt from afar here, but at this point the requirements to be an Atlassian certified individual you must be a full stack developer w/ DBA experience. I'm not even exaggerating at this point.\r\n\r\nCan we please, maybe, fix bugs creating corrupted data, instead of providing SQL workarounds that are outdated, several years down the line? Thank you.\r\n\r\n \r\n\r\nNo, I am not claiming every tool is amazingly perfect and you can prevent corruption 100% of the time, I'm not disillusioned to think apps never crash, no bugs exist ever. But when you write a wizard that fails miserably, knows it failed - and it failed on a constraint that you defined, and yet doesn't clean after itself and keeps trash lying around, then that's clearly an oversight, isn't it.","author":"Radek Dostál"},{"text":"A fix for this issue is available in Confluence Data Center 9.4.0.\r\n[Upgrade|https://www.atlassian.com/software/confluence/download-archives?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] now or check out the [Release Notes|https://confluence.atlassian.com/display/DOC/Confluence+9.4+Release+Notes?utm_source=confluence_bugfix&utm_campaign=confluence_bugfix&utm_medium=email] to see what other issues are resolved.\r\n","author":"Pranoy Cherian Mathew"}]},{"summary":"Links to anchors in another Confluence space break when they are edited because the spacekey is dropped","key":"CONFSERVER-28087","url":"https://jira.atlassian.com/browse/CONFSERVER-28087","type":"Bug","priority":"","description":"h3. Problem\r\n* Links to an anchor in a Confluence page of another space are broken when they are edited.\r\n\r\nh3. Steps to Reproduce\r\n# Select the text that you want to link\r\n# Click _Insert >> Link_, and go to _Advanced_ tab\r\n# In the Advanced tab, configure the link to point to an anchor in another page using this format:\r\n{noformat}\r\nSPACEKEY:PageName#AnchorName\r\n{noformat}\r\n# Save the link and the page.\r\n# Click the link.\r\n# Return to the page you edited and re-edit the link.\r\n# Save the link *without making any changes* and save the page.\r\n# Click the link.\r\n# Return to the page you edited and attempt to re-edit the link.\r\n\r\nh3. Expected Results\r\n* Both times it is clicked, the link should take you to the correct destination page and scroll to the anchor.\r\n\r\nh3. Actual Results\r\n* The link only works the first time.\r\n* When you return and edit the link, the \"SPACKEY:\" prefix is removed without notice. The link becomes:\r\n{noformat}\r\nPageName#AnchorName\r\n{noformat}\r\n* When this problem occurs, clicking the link takes you to a Create view to create a page with that name in the current space.\r\n\r\nh3. Notes\r\n\r\nOn the first edit the link configuration appears to be correct in the source markup:\r\n{code}\r\n<ac:link ac:anchor=\"ANCHORNAME\">\r\n    <ri:page ri:content-title=\"PAGETITLE\" ri:space-key=\"SPACKEY\"/>\r\n    <ac:plain-text-link-body><![CDATA[LINKTEXT]]></ac:plain-text-link-body>\r\n</ac:link>\r\n{code}\r\n\r\nWhen editing the second time the source markup is unchanged, but in the Edit dialog the space prefix is removed:\r\n!spacekey-removed-from-link.png|thumbnail! \r\n\r\nAfter the second edit the {{ri:space-key}} parameter is dropped.\r\n{code}\r\n<ac:link>\r\n    <ri:page ri:content-title=\"Disabling and enabling apps\"/>\r\n    <ac:plain-text-link-body><![CDATA[enable safe mode]]></ac:plain-text-link-body>\r\n{code}\r\n\r\nThe original reporter also noted, \"It used to be uneditable prior to 4.3.6, as it was fixed in that version.\"\r\n\r\nh3. Workaround\r\n\r\nUse the \"Web Link\" option instead and paste in the absolute/static URL, e.g. http(s)://HOST/SPACEKEY/PAGE#ANCHOR\r\n\r\nNOTE: This link breaks if the name or space of the target page is changed.\r\n","createDate":"2013-02-13T09:29:56.000+0000","comments":[{"text":"We've run into this problem too (Confluence 5.1.3).\r\n\r\nIt's a real annoyance because it makes it _really_ easy to break links.  If you just click on the link to Edit it, (e.g. to change the displayed text) but don't make any change to the actual link itself, when you click Save, you've just broken the link.  \r\n\r\nAnd since you can't edit broken links, you have to start over.","author":"Fred Bunting"},{"text":"We've run into the same problem (Confluence 5.4.4).\r\nNice if this could be fixed.","author":"MichałS"},{"text":"Verified that that bug persists in Confluence 5.5.2 as well.","author":"Fred Bunting"},{"text":"The same error in version 5.9.6","author":"MichałS"},{"text":"I have hundreds of pages that reference macros from a different space.  Everything has been working fine for the past 2-3 years and last week I'm getting this behavior where the spacekey is removed from the macro in some cases where I edit the page, in other instances, just rendering previously existing pages from months-years ago.  We upgraded a lot of macros but no changes were made to the version of Confluence we're on (7.13.3).  We've never run into this problem until now and thought it was an addon vendor issue.  After working with the vendor for close to a week, they have concluded this is a Confluence bug and led me to this issue to submit my feedback.  I'm not sure what could have changed in Confluence to make this happen when it has not been a problem previously, and we make new pages weekly (~50) and reference existing pages that contain data such are metrics from previous sprints.  The only remedy at this time is to go into every affected page (and there are hundreds for us) and reestablish the spaceky for the macro.  This is not a workable solution!","author":"BMJ Ventures"},{"text":"The only reliable workaround I have found for this is to copy a table of contents entry from the source page and use that as the link instead of linking to an anchor.","author":"MD Wilson"}]},{"summary":"Viewfile macro can't find attachment if the page title contain character after colon (:)","key":"CONFSERVER-24540","url":"https://jira.atlassian.com/browse/CONFSERVER-24540","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for *Confluence Server*. Using *Confluence Cloud*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFCLOUD-24540].\r\n{panel}\r\nh3. Summary of The Bug\r\n\r\nWhen page title have any character after a colon( : )\r\n{code:java}\r\nOffice Connector:test\r\n{code}\r\noffice connector can't find the office files attached to the page. If colon is the last character on the page title, attached office files searchable by view office macro.\r\n\r\nThis bug also affects the multimedia macros (adding audio / video files).\r\nh3. How to reproduce the bug\r\n # Create a page (example: 'Office connector:')\r\n !Officepage.png|thumbnail!\r\n # Attached office file into the page\r\n !attached.png|thumbnail!\r\n # Try to view it using view office plugin\r\n !Works.png|thumbnail!\r\n # Change the page title to contain any character after colon (example: 'Office connector:test')\r\n !test.png|thumbnail!\r\n # Try to view it using view office plugin\r\n !broke.png|thumbnail!\r\n # Attached files can't be seen on \"File Name\" fields\r\n (i) When viewed with _Developer Tools_, the {{attachmentsearch.action}} GET request returned HTTP 404 error code.\r\n\r\nh3. Workarounds\r\n\r\nOption 1 - Rename the page to remove the ':'\r\n\r\nOption 2 - Use the insert markup feature:\r\n # From the editor toolbar, expand the '+' menu.\r\n # Choose 'Markup'.\r\n # Insert the following markup (change accordingly):\r\n{code:java}\r\n{viewfile:name_of_the_attachments.ext}\r\n{code}\r\n\r\n # Save\r\n\r\nh1. Work performed\r\n * Changes are backwards-compatible in the plugin, committed in [https://bitbucket.org/atlassian/officeconnector] issue/CONF-24540 . 2 backwards-compatibility issues were raised: CONFDEV-10156 and CONFDEV-10157.\r\n * Changes in confluence-core are still on issue/CONF-24540, and awaiting implementation of a few review comments before being committed.","createDate":"2012-01-31T12:22:21.000+0000","comments":[{"text":"Septa, why did you mark it as a blocker? There is an easy workaround of renaming the page or are there any other things that I am missing?\r\n","author":"Anatoli"},{"text":"Hi Support,\r\n\r\nAny updates for this log? Is there a schedule in resolving this log?","author":"LEI MENG SAN"},{"text":"Hi Support,\r\nAny updates for this log? Is there a schedule in resolving this log?","author":"LEI MENG SAN"},{"text":"I will fix the changes requested during review when we're ok with Inline Tasks.","author":"AdrienA"},{"text":"Fix version should be changed to 4.3.x, I assume.","author":"Mark Hrynczak"},{"text":"The issue was transitioned to Fixed after passing QA, but hasn't been merged yet.\r\n\r\nWe prefer to wait for the delivery of CONF-3649 / CONF-9293 because it will change the way page references are stored. It might imply a bit of reword on CONF-24540 before re-delivering.","author":"AdrienA"},{"text":"This is still broken in 5.2.3. Why doesn't Atlassian just fix it?\r\n-David","author":"Intel CHD Jira Admin"},{"text":"Still broken in 5.2.5 too.","author":"Gareth White"},{"text":"Hey [~psemeniuk]\r\n\r\nIt looks like Adrien was the last person to touch this. Given that he's no longer here I'd talk to Anatoli and Mark to get a better idea of where this issue is at.\r\n\r\nRegards","author":"Steve Haffenden"},{"text":"Hi all, our company is running Confluence version 5.2.3. When a user goes to insert a PDF macro or Power Point macro into the page, there are no attachments in the drop-down if there is a colon in the page-title.\r\n\r\nThanks,\r\nEddie","author":"Eddie Connatser"},{"text":"Hi,\r\n\r\nMy customer also have same issue. so please fix this problem in shortly.\r\n\r\nThanks.","author":"Yoo InChul"},{"text":"Hi all, you might want to vote for this improvement request:\r\n\r\nhttps://jira.atlassian.com/browse/CONF-32856\r\n\r\nThe idea is that Confluence admins would have an option to disallow WebDAV-problematic characters in page titles, which would prevent WebDAV problems. Users would see a friendly error message if they tried to save a page title with the disallowed characters. Existing content would not be affected until someone went to edit the page title.\r\n\r\nAlso, CONF-32856 includes an awesome mockup screenshot which is worth a vote on its own, if I do say so myself. \r\n\r\nIf you have any thoughts about this suggested improvement, please visit CONF-32856 and leave a comment!\r\n\r\nhttps://jira.atlassian.com/browse/CONF-32856\r\n\r\nThank you,\r\nJoe","author":"Joe Westcott (ITDP)"},{"text":"I'm not going to vote for Atlassian to implement a workaround for admins to prevent users from using unsafe characters when they should be fixing this bug. Come on... it's now more than two years old :P","author":"Steve Goldberg"},{"text":"I have voted *against* CONF-32856. This bug should be fixed rather than spending effort on a workaround.\r\n-David","author":"Intel CHD Jira Admin"},{"text":"voted. had the same problem.","author":"Paula Dasch"},{"text":"We are getting near the three-year line for a \"major\" bug. Dear Atlassians: Please finally fix this annoying bug.","author":"kk"},{"text":"As are the others, I'm looking for a resolution on this one.  Time frame??","author":"MEDITECH ADMIN TEAM"},{"text":"The problem could imho be the same as in CONF-37907. This tickets are related, aren't they?","author":"Manuel Kummerländer"},{"text":"We still have the issue on 5.8.10 instance, if I use {viewexcel}\r\n!screenshot-1.png|thumbnail! ","author":"David Puchosic"},{"text":"Facing the issue in 5.8 as well. Any timeline when this issue will be resolved?","author":"Web Infra Engineer"},{"text":"A major bug that's open for over 4 years... :(","author":"Patrick Vanhoof"},{"text":"This bug also affects cross-application-linking between JIRA and Confluence. :(","author":"kk"},{"text":"Atlassian stop teasing us, just get it fixed already. You have had 5 years, that must be enough. It might be a minor thing for you, but when the bug materializes it takes a while (hence money and lost productivity) to discover it is that damn colon causing it.  A colleague of mine had the problem and spend time on it, then he came to me for aid and I spend time on it too. Respect our lost time and fix it!","author":"Deleted Account"},{"text":"I would also love to see this bug fixed. However, I'm actually surprised they haven't simply closed this issue as \"Won't Fix\" given that they plan to remove the view-file macro in a future version: https://jira.atlassian.com/browse/CONF-39829","author":"Gareth White"},{"text":"Team Atlassian:\r\n\r\nPlease kindly reply how your response to user concerns during the the past five years relates to your core values listed below, particularly the middle one.\r\n * Open Company, No Bullshit\r\n * Build with Heart and Balance\r\n * Don’t F@#$ the Customer\r\n * Play, As a Team\r\n * Be the Change You Seek\r\n\r\n*Bottom Line*:  Your users are paying for a working product and your corrective action, yet none is received in this case.  Seems like a not too efficient business model.","author":"Jeff Peters"},{"text":"\"25% - affects a minority of users or feature is not regularly used\" is hubris - where are the poll results - I'd like to see this fixed - not fixing it raises serious concerns that treatment of no alphnumeric characters in page titles will potentially similarly cause problems.  Get your character escape logic right and fix this!","author":"Malcolm Cook"},{"text":"Hi Fellow-Users,\r\n\r\nwe have now added the following \"fix\" to the confluence Custom-HTML-Section:\r\n{code:java}\r\n<script>\r\n$( document ).ajaxComplete(function() {\r\n  var elem=$('#macro-param-page');\r\n  if (elem.val()===undefined)\r\n    return;\r\n  if (elem.val().indexOf(\":\")>0){\r\n    $('#macro-param-page').val(\"\");\r\n    $('#macro-param-page').change();\r\n  }\r\n});\r\n</script>{code}\r\nIt will auto-apply a workaround, by removing the page-title from the parameterized attachment search.\r\n This way the search will be issued for the current page.\r\n So this will cover 95% of the cases where the issue is happening.\r\n\r\nThe only thing not possibly is embedding an attachment from another page in the space, when this has a colon in it...\r\n But this will be negligible.\r\n\r\nBest regards,\r\n Tobias","author":"Tobias Twardon"},{"text":"The above workaround is appreciated.  I see the priority was also moved to \"High\"... does this suggest the workaround, or even better a fix, will be rolled into release?  \r\n\r\nCheers","author":"Malcolm Cook"},{"text":"This issue produces 2 more problems, besides the viewfile-macro-thing:\r\n * the linking to a page fails, if it contains an anchor\r\n * when a user makes changes on a page, but does not save/publish them, they are temporary saved. When he later goes in edit-mode again, he is offered to use these changes.\r\nBut when another user in the meantime changes the page name with special characters (so that the URL changes from title to ID), then the first user can get an erorr message, and the whole content is gone.\r\n\r\nAnd see https://getsupport.atlassian.com/servicedesk/customer/portal/14/CSP-220512: only my case bound a lot of ressources (also in your support team). This time is better used for fixing!\r\n\r\nSo, *dear Atlassian*, please fix issue after now *6 years*","author":"confluence@ecogood.org"},{"text":"And one more thing to add:\r\n\r\nBugs are not equal to bugs. They are different.\r\nAnd this bug is evil *and* ridicolous:\r\n * Evil, because the reason for the misbehaviour is really hard to find, so will always cause every victim to loose a lot of time\r\n * Ridiculous, because it is really a poor design to use internally the fragile name instead of the *ID*, which has always a reliable pattern\r\n\r\nSo please rank higher and fix. There are no excuses for leaving this kind of issues open.","author":"confluence@ecogood.org"},{"text":"More than 7 years and no fix?! Just stumbled over this bug this morning. Took me some time to find out why the file was not found. Please fix this bug asap.","author":"Volker"},{"text":"Still appears in 7.18.3 :(","author":"Ulrich Hinze"},{"text":"Another 3 months then is 13th Anniversary of this issue reported! ;) \r\n\r\nWhat a outstanding achievement!  \uD83E\uDD73  \uD83E\uDD73  \uD83E\uDD73  \uD83E\uDD73 ","author":"Daniel Tan"}]},{"summary":"Prevent duplicate label by adding a constraint in the CONTENT_LABEL table","key":"CONFSERVER-23180","url":"https://jira.atlassian.com/browse/CONFSERVER-23180","type":"Bug","priority":"","description":"It's possible to create a duplicate label in Confluence. This prevents operation such as:\r\n- editing a page (results in a stack trace)\r\n- deleting a space\r\n\r\n{noformat}\r\norg.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): 1836138, of class: com.atlassian.confluence.labels.Labelling; nested exception is net.sf.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): 1836138, of class: com.atlassian.confluence.labels.Labelling\r\nCaused by: net.sf.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): 1836138, of class: com.atlassian.confluence.labels.Labelling\r\n\tat net.sf.hibernate.impl.SessionImpl.forceFlush(SessionImpl.java:761)\r\n\tat net.sf.hibernate.impl.SessionImpl.save(SessionImpl.java:739)\r\n\tat net.sf.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:1384)\r\n\tat net.sf.hibernate.engine.Cascades$4.cascade(Cascades.java:114)\r\n\tat net.sf.hibernate.engine.Cascades.cascade(Cascades.java:436)\r\n\tat net.sf.hibernate.engine.Cascades.cascadeCollection(Cascades.java:526)\r\n\tat net.sf.hibernate.engine.Cascades.cascade(Cascades.java:452)\r\n\tat net.sf.hibernate.engine.Cascades.cascade(Cascades.java:503)\r\n\tat net.sf.hibernate.engine.Cascades.cascade(Cascades.java:482)\r\n\tat net.sf.hibernate.impl.SessionImpl.preFlushEntities(SessionImpl.java:2699)\r\n\tat net.sf.hibernate.impl.SessionImpl.flushEverything(SessionImpl.java:2269)\r\n\tat net.sf.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:1813)\r\n{noformat}\r\n\r\nIt's not clear which operation can cause the duplicate, the current suspicion is this was due to an xml import or certain plugin operations can cause this.\r\n\r\n{code}\r\nCREATE\r\n    TABLE content_label\r\n    (\r\n        id BIGINT NOT NULL,\r\n        labelid BIGINT NOT NULL,\r\n        contentid BIGINT NOT NULL,\r\n        owner CHARACTER VARYING(255),\r\n        creationdate TIMESTAMP(6) WITHOUT TIME ZONE,\r\n        lastmoddate TIMESTAMP(6) WITHOUT TIME ZONE,\r\n        PRIMARY KEY (id),\r\n        CONSTRAINT fkf0e7436e27072aef FOREIGN KEY (labelid) REFERENCES label (labelid),\r\n        CONSTRAINT fkf0e7436e8dd41734 FOREIGN KEY (contentid) REFERENCES content (contentid)\r\n    )\r\n{code}\r\nAs can be seen from the DDL, the CONTENT_LABEL table currently owns two contraints in {{contentid}} and {{labelid}} columns, but perhaps we should make them into a combined constraint. So both the labelid and contentid must be unique for each row.\r\n\r\nCurrent work around involves deleting the row where the duplicate was noticed. A duplicate means two labels of the same labelid exist on the same content (contentid).","createDate":"2011-09-07T01:54:41.000+0000","comments":[]},{"summary":"Unnecessary error produced when one saves Office Connector config via the admin panel","key":"CONFSERVER-21953","url":"https://jira.atlassian.com/browse/CONFSERVER-21953","type":"Bug","priority":"","description":"It looks like this:\r\n{noformat}\r\n2011-03-10 09:26:36,305 ERROR [http-8080-1] [com.benryan.components.DefaultOcSettingsManager] <init> No directory specified in the properties file.\r\n -- referer: http://paulaner:8080/admin/console.action | url: /admin/worddav/adminword.action | userName: admin | action: adminword\r\n{noformat}\r\n\r\nh5. Steps to replicate:\r\n# Visit *http://<confluence url>/admin/worddav/adminword.action*\r\n# Press submit, the error will be logged in the log file","createDate":"2011-03-09T22:35:52.000+0000","comments":[{"text":"Step 1 logged the error for me.\n{noformat}\n2012-07-05 13:45:53,281 ERROR [http-8090-9] [com.benryan.components.DefaultOcSettingsManager] <init> No directory specified in the properties file.\n -- url: /admin/worddav/adminword.action | userName: admin | action: adminword\n{noformat}","author":"jhgorse"},{"text":"Confluence 4.3.1 still have this problem.\nShould we ignore this error?","author":"ChangJoon Lee"},{"text":"I have also experienced this error","author":"Deleted Account"},{"text":"in 5.2.3 as well.\r\n","author":"Martin Cleaver"},{"text":"Seeing the error in Confluence v5.3.1 (Office Connector Plugin v3.1.3).\r\n\r\nReferer is slightly different to originally reported:\r\n\r\n{noformat}\r\n2013-11-15 16:31:22,645 ERROR [http-8090-14] [com.benryan.components.DefaultOcSettingsManager] <init> No directory specified in the properties file.\r\n -- referer: http://foo.bar.com/plugins/servlet/stp/view/ | url: /admin/worddav/adminword.action | userName: marks | action: adminword\r\n{noformat}","author":"Mark Symons"},{"text":"Confluence 5.4.1 office connector 3.1.4.1\r\n{noformat}\r\n2014-01-23 14:48:57,960 ERROR [http-8090-13] [com.benryan.components.DefaultOcSettingsManager] <init> No directory specified in the properties file.\r\n -- url: /confluence/admin/worddav/adminword.action | userName: admin | referer: http://rgoodwin:8090/confluence/plugins/servlet/upm | action: adminword\r\n{noformat}\r\n\r\n","author":"Ryan Goodwin"},{"text":"I get this too, on Confluence 5.4.3:\r\n\r\n{code}\r\n2014-03-05 14:48:03,243 ERROR [http-8080-12] [com.benryan.components.DefaultOcSettingsManager] <init> No directory specified in the properties file.\r\n -- url: /admin/worddav/adminword.action | userName: JPrice | referer: http://wiki.towerco.internal:8080/plugins/servlet/upm/manage/action-required | action: adminword\r\n{code}","author":"John Price"},{"text":"Got same error in Confluence 5.4.3: \r\n\r\n{noformat}\r\n2014-03-11 13:40:15,707 ERROR [http-8081-2] [com.benryan.components.DefaultOcSettingsManager] <init> No directory specified in the properties file.\r\n -- url: /admin/worddav/adminword.action | userName: jakob.grimstveit | referer: https://wiki.miles.no/admin/plugins/webdav/config.action | action: adminword\r\n{noformat}\r\n","author":"Jakob Breivik Grimstveit"},{"text":"Log scanner picks this up in fresh log in Confluence  5.5.1  Only step one is necessary. ","author":"Jimmy Liberato"},{"text":"Have retested this and found that it still affects:\r\n\r\nConfluence v5.7.4   (Office Connector Plugin v3.3.18)\r\n\r\n...but does *not* seem to affect:\r\n\r\nConfluence v5.8.6  (Office Connector Plugin v3.3.24)\r\n\r\nSTP log scan of v5.7.4 still (correctly) directs one's attention to this issue.","author":"Mark Symons"},{"text":"i see this on 5.8.10 with Office Connector 3.4.0","author":"Chander Inguva"},{"text":"Not reproducible in Confluence 6.0.0 with Office Connecter 3.4.16","author":"YoyoGuy"},{"text":"Cannot reproduce bug in latest version at time of writing","author":"YoyoGuy"},{"text":"Have seen this issue under 6.1.1","author":"adrien zablan"},{"text":"Have seen this issue under Confluence 6.2.4","author":"Simon Bozhilov"},{"text":"Have seen this issue under Confluence 6.4.3","author":"Deleted Account"},{"text":"Also seeing it in Confluence 6.5.1","author":"Ryan Schamp"},{"text":"Seeing this error in a fresh install of Confluence 6.6.0","author":"nicoherbigde"},{"text":"I have the same error in Confluence 6.5.2","author":"Oficina Calidad y Mejora Continua"},{"text":"Same in Confluence 6.5.0","author":"Sylvain Robitaille"},{"text":"We see the same error in the logs for Confluence 6.7.2","author":"nellewa"},{"text":"Same error on:\r\n|*Confluence Version*|6.8.0| |\r\n|*Build Number*|7701| |\r\n\r\nDefault, clean install.","author":"Deleted Account"},{"text":"Same in Confluence 6.9.0.","author":"Nicolas Bauland"},{"text":"Confirming this error is also occurring on 6.9.1.","author":"David"},{"text":"I have found this error into the logs after upgrading to version 6.11.0.","author":"AT"},{"text":"I got this error on 6.11.1","author":"Savvas Sarikas"},{"text":"I have found this error into the logs after upgrading to version 6.11.2","author":"alaumann"},{"text":"I have found this error into the logs after upgrading to version 6.12.0","author":"Corentin Bresson"},{"text":"I have the issue in Confluence 6.12.0 and 6.15.2","author":"Marc Antoine BEMTGEN"},{"text":"6.12.2 affected as well.","author":"Dmitry Kuznetsov"},{"text":"6.3.2 affected","author":"Peter Merkel (mgm-tp)"},{"text":"6.15.1 too","author":"Daniele Franceschi"},{"text":"Same here in version 6.14.3","author":"baptistececconi"},{"text":"7.4.4 affected","author":"Tim"},{"text":"7.12.2 still has this issue as well.","author":"Jeffery Tiffin"},{"text":"Same error in 7.13.1","author":"Bill Brinkley"},{"text":"Same in 7.13.2","author":"Lyudmila"},{"text":"Persists in 7.13.7","author":"Matthew Davies"},{"text":"Persists in 7.13.9","author":"Karsten Hain"},{"text":"7.19.1 affected","author":"Heidi Fernandez"},{"text":"7.19.12 affected","author":"Alexander"},{"text":"7.19.16 has this also","author":"matthias.hellen"},{"text":"persists in confluence 8.5.4","author":"Jaspreet KAUR"},{"text":"persists in confluence 8.5.14 and 8.5.14 version","author":"Ram Bhusal"}]},{"summary":"Ensure that the connection is released when SSLHandshakeException is encountered ","key":"CONFSERVER-8626","url":"https://jira.atlassian.com/browse/CONFSERVER-8626","type":"Bug","priority":"","description":"Users are facing problems with Confluence freezing up when the trackbacks failed in different circumstances such as SSL cert validation. This probably causes a lot of connections being held up. Perhaps we should catch this better.\r\n\r\n{noformat}\r\n findPingUrls Error getting content of URL 'https://xxx': javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: \r\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: \r\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:150)\r\n\tat com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1518)\r\n\tat com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:174)\r\n\tat com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:168)\r\n\tat com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:848)\r\n\tat com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:106)\r\n\tat com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:495)\r\n\tat com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:433)\r\n\tat com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:818)\r\n...\r\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)\r\n\tat com.atlassian.trackback.TrackbackUtils.getUrlContent(TrackbackUtils.java:149)\r\n\tat com.atlassian.trackback.DefaultTrackbackFinder.findPingUrls(DefaultTrackbackFinder.java:51\r\n{noformat}","createDate":"2007-06-04T09:17:06.000+0000","comments":[{"text":"That error shouldn't leave an open connection, DB or otherwise.","author":"Tom Davies"},{"text":"We are also experiencing this behavior with 2.10.1 and have tried to find the reason for our Confluence freezes for a while in \r\n\r\nhttps://support.atlassian.com/browse/CSP-41112\r\n\r\nNow we just found this issue and it looks exactly like what we see in our logfiles, and like this is the reason.\r\n\r\n\r\n","author":"Daniel Zahn"},{"text":"also interested in a solution of this issue","author":"marcus_schultheiss"},{"text":"This appears to be an issue still? We have a lot of links in our test documentation that are only valid if you are in the related test network. Apparently Confluence will still try and follow these links for some reason? I see a huge amount of these errors in our logs and Confluence is very unresponsive at times (this seems to be related). We are now at version 5.3.1.\r\n\r\n2014-10-23 15:40:00,053 WARN [scheduler_Worker-5] [com.atlassian.trackback.DefaultTrackbackFinder] findPingUrls Error getting content of URL 'https://testserver/owa/': javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat sun.security.ssl.Alerts.getSSLException(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)\r\n\tat sun.security.ssl.Handshaker.fatalSE(Unknown Source)\r\n\tat sun.security.ssl.Handshaker.fatalSE(Unknown Source)\r\n\tat sun.security.ssl.ClientHandshaker.serverCertificate(Unknown Source)\r\n\tat sun.security.ssl.ClientHandshaker.processMessage(Unknown Source)\r\n\tat sun.security.ssl.Handshaker.processLoop(Unknown Source)\r\n\tat sun.security.ssl.Handshaker.process_record(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.writeRecord(Unknown Source)\r\n\tat sun.security.ssl.AppOutputStream.write(Unknown Source)\r\n\tat java.io.BufferedOutputStream.flushBuffer(Unknown Source)\r\n\tat java.io.BufferedOutputStream.flush(Unknown Source)\r\n","author":"Jan-Willem van den Berg"},{"text":"Running Confluence 5.4.2, this is still an issue:\r\n{noformat}\r\n2014-11-07 10:53:09,093 WARN [scheduler_Worker-1] [com.atlassian.trackback.DefaultTrackbackFinder] findPingUrls Error getting content of URL 'http://10.10.234.10/example.html': java.net.NoRouteToHostException: No route to host\r\njava.net.NoRouteToHostException: No route to host\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\r\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\r\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n        at java.net.Socket.connect(Socket.java:579)\r\n        at java.net.Socket.connect(Socket.java:528)\r\n        at java.net.Socket.<init>(Socket.java:425)\r\n        at java.net.Socket.<init>(Socket.java:280)\r\n        at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:80)\r\n        at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:122)\r\n        at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\r\n        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)\r\n        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\r\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\r\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\r\n        at com.atlassian.trackback.TrackbackUtils.getUrlContent(TrackbackUtils.java:149)\r\n        at com.atlassian.trackback.DefaultTrackbackFinder.findPingUrls(DefaultTrackbackFinder.java:52)\r\n        at com.atlassian.confluence.util.task.TrackbackQueueItem.execute(TrackbackQueueItem.java:40)\r\n        at com.atlassian.core.task.AbstractTaskQueue.flush(AbstractTaskQueue.java:38)\r\n        at com.atlassian.quartz.jobs.TaskQueueFlushJob.doExecute(TaskQueueFlushJob.java:32)\r\n        at com.atlassian.quartz.jobs.AbstractJob.executeInternal(AbstractJob.java:88)\r\n        at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)\r\n        at org.quartz.core.JobRunShell.run(JobRunShell.java:199)\r\n        at com.atlassian.confluence.schedule.quartz.ConfluenceQuartzThreadPool$1.run(ConfluenceQuartzThreadPool.java:20)\r\n        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549)\r\n{noformat}","author":"Ken Roland"},{"text":"same with 5.7.1. Log file is full of these errors.","author":"Paul Derbyshire"},{"text":"Same here with 5.7.3, application links do not work at all.","author":"Zarco"},{"text":"Its happening with version 5.8.10\r\n\r\n\r\n2015-09-14 13:52:04,067 WARN [scheduler_Worker-7] [com.atlassian.trackback.DefaultTrackbackFinder] findPingUrls Unable to connect to 'http://xxxxxxx.com': java.net.ConnectException: Connection refused: connect\r\njava.net.ConnectException: Connection refused: connect\r\n\tat java.net.DualStackPlainSocketImpl.connect0(Native Method)\r\n\tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:345)\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\r\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\r\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\r\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n\tat java.net.Socket.connect(Socket.java:589)\r\n\tat java.net.Socket.connect(Socket.java:538)\r\n\tat java.net.Socket.<init>(Socket.java:434)\r\n\tat java.net.Socket.<init>(Socket.java:286)\r\n\tat org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:80)\r\n\tat org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:122)\r\n\tat org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)\r\n\tat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)\r\n\tat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\r\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\r\n\tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\r\n\tat com.atlassian.trackback.TrackbackUtils.getUrlContent(TrackbackUtils.java:149)\r\n\tat com.atlassian.trackback.DefaultTrackbackFinder.findPingUrls(DefaultTrackbackFinder.java:52)\r\n\tat com.atlassian.confluence.util.task.TrackbackQueueItem.execute(TrackbackQueueItem.java:42)\r\n\tat com.atlassian.core.task.AbstractTaskQueue.flush(AbstractTaskQueue.java:38)\r\n\tat com.atlassian.quartz.jobs.TaskQueueFlushJob.doExecute(TaskQueueFlushJob.java:34)\r\n\tat com.atlassian.quartz.jobs.AbstractJob.lambda$executeInternal$38(AbstractJob.java:129)\r\n\tat com.atlassian.quartz.jobs.AbstractJob$$Lambda$96/1886192795.doInHibernate(Unknown Source)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.execute(HibernateTemplate.java:370)\r\n\tat org.springframework.orm.hibernate.HibernateTemplate.execute(HibernateTemplate.java:337)\r\n\tat com.atlassian.quartz.jobs.AbstractJob.executeInternal(AbstractJob.java:125)\r\n\tat org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86)\r\n\tat com.atlassian.scheduler.quartz1.Quartz1JobFactory$ClassLoaderProtectingWrappedJob.execute(Quartz1JobFactory.java:62)\r\n\tat org.quartz.core.JobRunShell.run(JobRunShell.java:223)\r\n\tat com.atlassian.confluence.schedule.quartz.ConfluenceQuartzThreadPool.lambda$runInThread$46(ConfluenceQuartzThreadPool.java:19)\r\n\tat com.atlassian.confluence.schedule.quartz.ConfluenceQuartzThreadPool$$Lambda$93/1337602256.run(Unknown Source)","author":"Amauri Toscano"},{"text":"I guess our only hope is to use twitter to complain about these bugs. I guess that's the reason why the twitter plugin was disabled at some point, probably a request from marketing.","author":"Sorin Sbarnea"},{"text":"Hello,\r\n\r\nmaybe deactivating trackback can help:\r\nhttps://confluence.atlassian.com/doc/trackback-and-external-referrers-147487.html\r\n\r\nRegards","author":"MK"}]},{"summary":"Legacy Editor copy/paste table data","key":"CONFCLOUD-81295","url":"https://jira.atlassian.com/browse/CONFCLOUD-81295","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nFollowing from existing issue ([CONFCLOUD-58589|https://jira.atlassian.com/browse/CONFCLOUD-58589])\r\n\r\nCurrent work around is to select the line above and below to allow pasting data from one table to another with the same cell format, and not pasting table nested within the select cell.\r\n\r\nThis only appears to work on new tables and not existing tables with formatting already applied. Looking at the storage format, I can see the difference between these two is when <td> is used the paste functionality works as expected. But when <th> is used, it follows the same undesired functionality\r\n\r\n\r\n\r\n<th colspan=\"1\">\r\nvs\r\n<td colspan=\"1\">\r\nh3. Environment\r\n\r\nConfluence Cloud\r\nh3. Steps to Reproduce\r\n\r\nCreate a table with popluated data, publish page, then attempt to use the work around (as outlined in CONFCLOUD-58589) to copy cells from another table. (with selecting line above and below source table)\r\n\r\n\r\nh3. Expected Results\r\n\r\nCell format and data should be pasted following cell structure from source table, as is the case when pasting into a new table\r\nh3. Actual Results\r\n\r\nCell data is pasted within the selected cell as a nested table\r\nh3. Workaround\r\n\r\n_previous work around only applies to new tables_\r\nh3. Notes","createDate":"2025-04-02T06:18:29.000+0000","comments":[]},{"summary":"Scroll bar jumping and screen flickering When you insert homepage or overview to smart link.","key":"CONFCLOUD-81294","url":"https://jira.atlassian.com/browse/CONFCLOUD-81294","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn a Confluence smart Link, when you insert homepage or overview URL to smart Link, the scrolling automatically starts to hop, and the screen flickers.\r\n*  [^CONFCLOUD-81294_Recording.mov] \r\n\r\nh3. Steps to Reproduce\r\n# Copy URL of homepage or overview.\r\n# Navigate Content [+] > [Smart Link]\r\n# Insert the URL\r\n# Add Smart Link\r\n\r\nh3. Expected Results\r\nNo scrolling automatically starts.\r\n\r\nh3. Actual Results\r\nThe scrolling automatically starts to hop, and the screen flickers.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-02T05:01:16.000+0000","comments":[]},{"summary":"Content Status can't be added or edited on the space homepage","key":"CONFCLOUD-81293","url":"https://jira.atlassian.com/browse/CONFCLOUD-81293","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRecently, the Content status can't be added or edited on the space homepage. It was supported before.\r\nh3. Steps to Reproduce\r\n\r\nAdd:\r\n # Open a Space home page without Content Status\r\n!Screenshot 2025-04-02 at 2.57.31 PM.png|width=539,height=81!\r\n # Change it to Edit mode\r\n # Click the page title\r\n\r\nEdit:\r\n # Set a page with Content Status as the home page of the space\r\n # Open this page and the Status is visible on the top\r\n!Screenshot 2025-04-02 at 2.29.40 PM.png|width=523,height=87!\r\n # Change to Edit mode\r\n\r\nh3. Expected Results\r\n\r\nAdd:\r\n * The \"Status\" option should be shown in the pop-up and allow the user to add a Content status for this page, as shown in the below example\r\n!Screenshot 2025-04-02 at 2.52.30 PM.png|width=501,height=91!\r\n\r\nEdit:\r\n * The \"Status\" shows on the top-right, and the user can change its setting, as shown in the below example\r\n!Screenshot 2025-04-02 at 2.39.13 PM.png|width=498,height=137!\r\n\r\nh3. Actual Results\r\n\r\nAdd:\r\n * There is no \"Status\" option in the pop-up\r\n!Screenshot 2025-04-02 at 2.59.49 PM.png|width=526,height=79!\r\n\r\nEdit:\r\n * The \"Status\" doesn't show in Edit mode, so the user can't update its status.\r\n * !Screenshot 2025-04-02 at 2.47.32 PM.png|width=691,height=127!\r\n\r\nh3. Workaround\r\n\r\nThe current workaround is to change the homepage to another page via Space settings -> Space details -> More details -> Home content, edit the status, and then set this page as the homepage again.","createDate":"2025-04-02T04:02:02.000+0000","comments":[]},{"summary":"The space restore process with Rewind Backups for Confluence fails with invalid page's content","key":"CONFCLOUD-81292","url":"https://jira.atlassian.com/browse/CONFCLOUD-81292","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen running a space restore from a backup created with \"Rewind Backups for Confluence\", if one of the space page's body has invalid content, the process will fail due an error with the \"Create page\" API used by the app\r\n\r\nh3. Steps to Reproduce\r\n# Install the \"Rewind Backups for Confluence\" app\r\n# Create a new space\r\n# Create a new page with the following storage format\r\n{code}\r\n<h1>Test page</h1><p><ac:structured-macro ac:name=\\\"children\\\" ac:schema-version=\\\"2\\\" data-layout=\\\"default\\\" ac:local-id=\\\"212382fd-825c-40c9-8ecf-9d514fb9680b\\\" ac:macro-id=\\\"c3a78d51c5c10b66f2f66f08c69b69b96596db6be3d348cda6f6e493cecdfc91\\\"><ac:parameter ac:name=\\\"depth\\\">2</ac:parameter><ac:parameter ac:name=\\\"allChildren\\\">true</ac:parameter><ac:parameter ac:name=\\\"style\\\" /><ac:parameter ac:name=\\\"page\\\"><ac:link /></ac:parameter><ac:parameter ac:name=\\\"sortAndReverse\\\" /><ac:parameter ac:name=\\\"first\\\">0</ac:parameter></ac:structured-macro></p>\r\n{code}\r\n# Create a couple of pages under it\r\n# Run the Rewind backup for the space you just created\r\n# Delete the space\r\n# Trigger a space restore through Rewind\r\n\r\nh3. Expected Results\r\nThe space is restored from the backup, with all pages\r\n\r\nh3. Actual Results\r\nThe space restore will fail due to an issue while recreating the pages using the \"Create page\" API:\r\n{code}\r\n{\r\n    \"errors\": [\r\n        {\r\n            \"status\": 500,\r\n            \"code\": \"INTERNAL_SERVER_ERROR\",\r\n            \"title\": \"Internal Server Error\",\r\n            \"detail\": null\r\n        }\r\n    ]\r\n}\r\n{code}\r\n\r\nThe process fails as the page's body has invalid parameters for the Children Display macro. This was the example we encountered so far, but it can happen with other elements the API won't process.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-25T14:30:33.000+0000","comments":[]},{"summary":"Table of Contents Display Issue with Status Macro in Headings","key":"CONFCLOUD-81290","url":"https://jira.atlassian.com/browse/CONFCLOUD-81290","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere is a display issue with the status macro when used in headings within live-docs. When the status macro is edited, the table of contents (TOC) reflects an altered display where the status macro appears outlined in the status color but lacks the filled color.\r\n\r\nThe issue also happens with regular pages, but it gets automatically fixed after the page is published\r\n\r\nThis issue is specifically problematic for live-docs, as these documents are not published, and thus the display issue persists. \r\nh3. Steps to Reproduce\r\n # Create a page or live-doc and insert a heading with a status macro.\r\n # Add the table of contents macro.\r\n # Edit the status macro within the heading.\r\n # Observe the table of contents display, where the status macro's filled color is missing, showing only an outline.\r\n\r\nh3. Expected Results\r\n\r\nThe status macro should display correctly with the filled color in the table of contents, even after editing, without needing to publish the page.\r\nh3. Actual Results\r\n\r\nThe status macro in the table of contents changes to an outlined version without the filled color, and this persists in live-docs.\r\n\r\n!image-2025-04-01-17-45-30-054.png!\r\nh3. Workaround\r\n\r\nA temporary workaround involves converting the live-doc to a regular page and then reverting it to live edit mode.","createDate":"2025-04-01T20:44:37.000+0000","comments":[]},{"summary":"Unable to Add or remove labels in Confluence cloud page","key":"CONFCLOUD-81286","url":"https://jira.atlassian.com/browse/CONFCLOUD-81286","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers are unable to add or remove labels on a Confluence Cloud page. When attempting to add or remove a label, the action does not complete successfully.\r\nh3. Steps to Reproduce\r\n # The issue is not reproducible. We noticed it on the a specific page.\r\n\r\nh3. Expected Results\r\n * The newly added label should appear on the page.\r\n\r\n * The removed label should no longer be visible.\r\n\r\nh3. Actual Results\r\n * The label is not added, It shows up when we refresh the page.\r\n\r\n * The removed label remains visible, It disappears only if we refresh the page after the removal action.\r\n\r\n * No error message is displayed.\r\n\r\nh3. Workaround\r\n\r\nFor pages using the {*}legacy editor{*}, converting them to the *new editor* allows users to add and remove labels successfully.","createDate":"2025-04-01T18:54:58.000+0000","comments":[]},{"summary":"Images are not loading in Editor mode for users without \"Add Attachments\" permission","key":"CONFCLOUD-81285","url":"https://jira.atlassian.com/browse/CONFCLOUD-81285","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAttachments are not loading in *Editor mode* for users without \"Add Attachments\" permission\r\nh3. Steps to Reproduce\r\n # Login as a user without the \"Add Attachments\"\r\n ## Or impersonate the user\r\n # Navigate to a page with images\r\n # Click the edit button\r\n\r\nh3. Expected Results\r\n * The images should load in editor mode even if the user has no permission to add attachments\r\n\r\nh3. Actual Results\r\n * Images are stuck \"loading\" until Add Attachments permission is granted to the user.\r\n!image-2025-04-01-12-17-47-433.png|width=263,height=185!\r\n\r\nh3. Workaround\r\n\r\nGrant the \"Add Attachment\" permission to the user","createDate":"2025-04-01T18:18:12.000+0000","comments":[]},{"summary":"All public links from a space were disabled without any user intervention or audit log records","key":"CONFCLOUD-81284","url":"https://jira.atlassian.com/browse/CONFCLOUD-81284","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAll public links from a space were disabled without any user intervention or audit log records.\r\n\r\nh3. Steps to Reproduce\r\n- N/A\r\n\r\nh3. Expected Results\r\nAll changes to Public links should be recorded on the *Audit log*, as per our [documentation|https://support.atlassian.com/confluence-cloud/docs/how-secure-are-public-links/#Public-links-are-recorded-in-the-audit-log].\r\n\r\nh3. Actual Results\r\nAll public links from a space were disabled without any user intervention or audit log records.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available\r\n","createDate":"2025-04-01T17:48:46.000+0000","comments":[]},{"summary":"Confluence Sidebar Missing When Using Mobile Browser","key":"CONFCLOUD-81281","url":"https://jira.atlassian.com/browse/CONFCLOUD-81281","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen accessing Confluence using a mobile browser, the sidebar is not visible. This issue affects navigation and usability, as users are unable to access sidebar features and links. \r\nh3. Steps to Reproduce\r\n # Open a mobile browser on a smartphone (e.g., Chrome, Safari).\r\n # Navigate to the Confluence site.\r\n # Attempt to access the sidebar.\r\n\r\nh3. Expected Results\r\n\r\nThe sidebar should be visible and accessible, similar to the desktop version, providing users with navigation options and access to sidebar links.\r\nh3. Actual Results\r\n\r\nThe sidebar is missing, making it difficult for users to navigate through the Confluence site.\r\nh3. Workaround\r\n\r\nUsers can switch the mobile browser to desktop mode, which restores the sidebar visibility, although this is not an ideal solution for mobile users.","createDate":"2025-04-01T14:54:10.000+0000","comments":[{"text":"This is a Confluence Mobile Web bug and assigned to the wrong team. We do not own Confluence Mobile Web browser.","author":"Mansi Shah"}]},{"summary":"Inability to Search for Parent Pages with Specific Titles During Page Copy/Move","key":"CONFCLOUD-81280","url":"https://jira.atlassian.com/browse/CONFCLOUD-81280","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers are unable to search for parent pages with certain titles (e.g., #A, #ttt) when attempting to copy or move a page within the same or different space. This issue persists despite reindexing and affects both customer environments and internal testing labs.\r\nh3. Steps to Reproduce\r\n # Navigate to a page you wish to copy or move.\r\n\r\n # Initiate the copy or move action.\r\n\r\n # Attempt to search for a parent page with a title such as #A or #ttt.\r\n\r\n # Observe that these titles do not appear in the search results.\r\n\r\n # Repeat the process with a title like #B and note that it appears correctly.\r\n\r\nh3. Expected Results\r\n * Users should be able to search and find any parent page title, including those with special characters like #A, #ttt, etc., when copying or moving a page.\r\n\r\nh3. Actual Results\r\n * Parent pages with titles such as #A and #ttt do not appear in search results, while titles like #B are searchable and selectable.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\nAttaching a replication [loom|https://www.loom.com/share/988592abfb414abfaf0c9a8093464dd3?sid=d7df9dbd-66b8-4e2e-b801-647b95506b0e] video.","createDate":"2025-04-01T10:46:43.000+0000","comments":[]},{"summary":"Attachment macro gives ”Error retrieving attachment versions” error when added to the 3rd party macro with the body","key":"CONFCLOUD-81278","url":"https://jira.atlassian.com/browse/CONFCLOUD-81278","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe attachment macro gives ”{*}Error retrieving attachment versions{*}” error when added to the 3rd party macro with the body.\r\nh3. Steps to Reproduce\r\n\r\n1. Create a new page\r\n2. Upload some attachments\r\n3. Add a third-party macro with a body (Aura Panel macro)\r\n4. Add Confluence’s native Attachments macro to the body\r\n5. Save the page\r\n6. Click on the little > icon to the left of one of the attachments\r\nh3. Expected Results\r\n\r\nAttachment to preview without any error.\r\nh3. Actual Results\r\n\r\nWe get ”{*}Error retrieving attachment versions{*}”\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-01T06:31:30.000+0000","comments":[]},{"summary":"Inconsistent spacing between images inserted in the new editor","key":"CONFCLOUD-81277","url":"https://jira.atlassian.com/browse/CONFCLOUD-81277","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe have noticed an issue where the spacing between images in Confluence Cloud is not behaving as expected. The images are not spaced consistently, which may affect the layout and readability of pages.\r\nh3. Steps to Reproduce\r\n # Create a new Confluence page or open an existing one.\r\n\r\n # Insert two - five images on the page.\r\n\r\n # Observe the spacing between the images, the space between the 1st and second image will be more compared to other images. \r\n\r\nh3. Expected Results\r\n\r\nThe images should have consistent and appropriate spacing between them, as per the default page layout or user-configured settings. \r\nh3. Actual Results\r\n\r\nThe images are displayed with inconsistent or incorrect spacing between them. In some cases, the images may be too close to each other, while in other cases, there may be excessive gaps.\r\nh3. Workaround\r\n\r\nAs a workaround, you can separate their images using a layout (which can have up to 5 columns).","createDate":"2025-04-01T06:04:33.000+0000","comments":[]},{"summary":"Anchor links change to resumedraft.action links","key":"CONFCLOUD-81276","url":"https://jira.atlassian.com/browse/CONFCLOUD-81276","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAnchor links can change to {{resumedraft.action}} links due to an unknown condition, supposedly due to a Page Edit.\r\n\r\nThe bug affects all Anchor links on a Page.\r\nh3. Steps to Reproduce\r\n\r\nUnknown condition.\r\nh3. Expected Results\r\n\r\nThe anchor link remains in it's expected format:\r\n{code:java}\r\nhttps://<example>.atlassian.net/wiki/spaces/Charlie/pages/123456789/Page+Name#Anchor\r\n{code}\r\nh3. Actual Results\r\n\r\nThe anchor link gets changed to a link that directs users to Editing mode:\r\n{code:java}\r\nhttps://<example>.atlassian.net/wiki/pages/resumedraft.action?draftId=123456789#PageName-Anchor\r\n{code}\r\nh3. Workaround\r\n\r\nRevert the affected Page to a previous version where the Anchor links are still working.","createDate":"2025-04-01T05:40:14.000+0000","comments":[{"text":"Not only is this is quite annoying since several weeks, the anchor links will often be displayed in their URL-Form, instead of displaying the given text. ","author":"Thorsten Klerlein"}]},{"summary":"Asynchronously converting the Recently Updated macro via REST API returns wrong result","key":"CONFCLOUD-81273","url":"https://jira.atlassian.com/browse/CONFCLOUD-81273","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nLinks in the converted result is showing “null/spaces/…” instead of “/wiki/spaces/…” like with the synchronous conversion REST API.\r\nh3. Steps to Reproduce\r\n\r\nRequest body:\r\n {{{    \"value\": \"<ac:structured-macro ac:name=\\\"recently-updated\\\" ac:schema-version=\\\"1\\\" data-layout=\\\"default\\\" ac:local-id=\\\"b6418e51-aa6f-4801-b1ae-f1fb93dfe58c\\\" ac:macro-id=\\\"1dd8291cfacc9134bb209ad7585382c63d2b6815d6a29a776e8af9fbae2a8a1f\\\"><ac:parameter ac:name=\\\"max\\\">10</ac:parameter><ac:parameter ac:name=\\\"hideHeading\\\">true</ac:parameter><ac:parameter ac:name=\\\"maxToggle\\\">false</ac:parameter></ac:structured-macro>\",\r\n    \"representation\": \"storage\"\r\n}}} # Create and publish a page with a Recently Updated macro.\r\n\r\n # Send a POST request to https://\\{SITE-NAME}.atlassian.com/wiki/rest/api/contentbody/convert/export_view?contentIdContext=\\{CONTENT-ID} with the request body\r\n\r\n # Send a POST request to https://\\{SITE-NAME}.atlassian.com/wiki/rest/api/contentbody/convert/{*}async{*}/export_view?contentIdContext=\\{CONTENT-ID} with the request body\r\n\r\n # Send a GET request to https://\\{SITE-NAME}.atlassian.com/wiki/rest/api/contentbody/convert/{*}async{*}/\\{ASYNC-ID} given the result to Step 3\r\n\r\nh3. Expected Results\r\n\r\nResult of Step 4 is the same as Step 2\r\nh3. Actual Results\r\n\r\nResult of Step 4 is different as described in the issue summary\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T22:55:23.000+0000","comments":[{"text":"This changelog is hilarious: [https://developer.atlassian.com/cloud/confluence/changelog/#CHANGE-2454]\r\n\r\nOne would think the logical order of events would be to ensure the replacement endpoint is bug-free BEFORE deprecating the endpoint it's replacing.","author":"Nathan Waters - AppsPlus"}]},{"summary":"Unable to make space homepage full-width in the editor","key":"CONFCLOUD-81272","url":"https://jira.atlassian.com/browse/CONFCLOUD-81272","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen editing common pages, a button is available in the top-right corner of the editor to enable a full-width layout. This button is missing when editing the homepage of a space.\r\nh3. Steps to Reproduce\r\n\r\n# Navigate to the homepage of a space and enter edit mode.\r\n# Observe that there is no option to enable a full-width layout.\r\n\r\nh3. Expected Results\r\n\r\nThe button for enabling a full-width layout should be visible, allowing users to apply it to the space homepage. Like this:\r\n\r\n!https://jira.atlassian.com/secure/temporaryattachment/ab72889762d7fb81de78484e1bb6f176c300e099/temp16852701981194199710_image-2025-03-31-19-44-33-586.png|width=134,height=92!\r\n\r\nh3. Actual Results\r\n\r\nThe button does not appear, preventing users from setting the homepage to full-width.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this issue. Updates will be provided here as they become available.","createDate":"2025-03-31T22:51:01.000+0000","comments":[{"text":"Workaround for new space setup:\r\n # Create a parent page and make full width.\r\n # Space settings / space details.\r\n # Set the parent page as the new home page.\r\n ## When the parent page becomes the new home page, the full-width button will not load.\r\n # Update the left navigation.\r\n\r\nNo nice workaround for existing sites as some parent trees may have 100s/1000s sub pages. There is a 100 page move limit.","author":"Jonathan Smith"}]},{"summary":"Confluence Spaces Created Without Intent","key":"CONFCLOUD-81271","url":"https://jira.atlassian.com/browse/CONFCLOUD-81271","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustomers reported the creation of multiple duplicate Confluence spaces named 'Atlassian Team' with various space keys. These duplicates have caused potential confusion for users navigating the Confluence instance. Initial investigations suggest that these spaces were created by users within the organization, but no one has intentionally done so.\r\nh3. Steps to Reproduce\r\n\r\nReplication steps are not available due to the absence of identifiable triggers or automation rules responsible for these automatic space creations.\r\nh3. Expected Results\r\nSpaces should be created solely when the user intends to do so or when a specific trigger is activated.\r\nh3. Actual Results\r\n\r\nMultiple duplicate spaces named 'Atlassian Team' with various space keys are present, causing confusion in navigation and management within the Confluence instance.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T18:52:57.000+0000","comments":[]},{"summary":"When viewing embedded cards from an Atlassian Goal on a Confluence page, you get the following error message \"Looks like you haven't signed it yet\"","key":"CONFCLOUD-81270","url":"https://jira.atlassian.com/browse/CONFCLOUD-81270","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen viewing embedded cards from an Atlassian Goal on a Confluence page, you get the following error message \"Looks like you haven't signed it yet\".\r\n\r\nh3. Steps to Reproduce\r\n# Login at your Confluence Cloud instance;\r\n# Add or edit a page;\r\n# Paste a link to a [goal|https://support.atlassian.com/platform-experiences/docs/what-is-a-goal/];\r\n# Publish the page;\r\n\r\nh3. Expected Results\r\nThe user is able to view the Atlassian Goal embedded on a Confluence Cloud page.\r\n\r\nh3. Actual Results\r\nEven though the user is already authenticated, they still get the following error message:\r\n\r\n{code}\r\nLooks like you haven't signed in yet\r\nSign in\r\n{code}\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.\r\n","createDate":"2025-03-31T17:51:43.000+0000","comments":[]},{"summary":"Incoming links are not working in spaces where the space key is mismatched with the space alias","key":"CONFCLOUD-81268","url":"https://jira.atlassian.com/browse/CONFCLOUD-81268","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn some scenarios, space keys do not match the space alias. In such spaces, some linking functionalities in Confluence do not work properly. In order to verify if the space key matches with the alias, the REST API can be used:\r\n{code:java}\r\nhttps://instance.atlassian.net/wiki/rest/api/space/{spaceKey}{code}\r\nThe result would then show something similar to below, where the \"key\" is different to the \"alias\":\r\n{code:java}\r\nid: 1000,\r\nkey: \"TEST\",\r\nalias: \"alias\",\r\nname: \"Test Space\",\r\ntype: \"global\",\r\nstatus: \"current\"\r\n{code}\r\nh3. Steps to Reproduce\r\n # In a space where the alias doesn't match the key, create two Confluence pages\r\n # In the created Confluence pages, insert links to one another to the Confluence pages\r\n # Check the pages' page information\r\n\r\nh3. Expected Results\r\n\r\nThe incoming links would show up in the page information\r\nh3. Actual Results\r\n\r\nThe incoming links are not showing up in the page information\r\nh3. Workaround\r\n\r\nCorrect the space Alias using the *[Update space REST API endpoint|https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-space/#api-wiki-rest-api-space-spacekey-put]* or reach out to Atlassian Cloud Support for assistance","createDate":"2025-03-31T15:37:27.000+0000","comments":[]},{"summary":"When subscribing to Slack notifications from Space settings > Slack Notifications, Confluence throws a \"RESTRICTED\" error code","key":"CONFCLOUD-81267","url":"https://jira.atlassian.com/browse/CONFCLOUD-81267","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen subscribing to Slack notifications from Space settings > Slack Notifications, Confluence throws a \"RESTRICTED\" error code:\r\n\r\nh3. Steps to Reproduce\r\n# Go to any Confluence space and then select *Space settings > Slack Notifications*;\r\n# Perform the steps to subscribe to the space, as shown [here|https://support.atlassian.com/confluence-cloud/docs/use-slack-and-confluence-together/#To-subscribe-to-a-space-].;\r\n\r\nh3. Expected Results\r\nThe Slack notifications are successfully configured.\r\n\r\nh3. Actual Results\r\nWhen viewing the *Space settings > Slack Notifications* page, users experience the following error:\r\n\r\n{code}\r\nError code: RESTRICTED\r\n{code}\r\n\r\nh3. Workaround\r\nTo subscribe to a space in a Slack channel, type {code}/confluence connect <space-url>{code} into the chat window\r\n","createDate":"2025-03-31T15:14:31.000+0000","comments":[]},{"summary":"Image inside an expand macro continuously scales up and down in size during both view and edit modes","key":"CONFCLOUD-81265","url":"https://jira.atlassian.com/browse/CONFCLOUD-81265","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an image inside an expand macro is published, the image continuously decreases in size until it gets too small, and then it jumps back to its full size and resume shrinking again.\r\nh3. Steps to Reproduce\r\n # Create a new Confluence page.\r\n # Attach any PNG image.\r\n # [Using a REST PUT request|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-put], add the following storage format body to the page. Replace \"myImage.png\" with the same of the file you uploaded.\r\n\r\n{code:xml}\r\n<ac:structured-macro ac:name=\"expand\" ac:schema-version=\"1\" ac:macro-id=\"0a50188c-aecc-460b-9161-5d832ab1e712\">\r\n\t<ac:parameter ac:name=\"title\">Expand title</ac:parameter>\r\n\t<ac:rich-text-body>\r\n\t\t<ac:link>\r\n\t\t\t<ri:page ri:content-title=\"Link page name\" ri:version-at-save=\"1\" />\r\n\t\t\t<ac:link-body>\r\n\t\t\t\t<ac:image ac:align=\"center\" ac:layout=\"full-width\" ac:original-height=\"215\" ac:original-width=\"1280\" ac:width=\"960\">\r\n\t\t\t\t\t<ri:attachment ri:filename=\"myImage.png\" ri:version-at-save=\"1\" />\r\n\t\t\t\t</ac:image>\r\n\t\t\t</ac:link-body>\r\n\t\t</ac:link>\r\n\t</ac:rich-text-body>\r\n</ac:structured-macro>\r\n{code}\r\nh3. Expected Results\r\n - The image inside the expand should display at a fixed size.\r\n\r\nh3. Actual Results\r\n - The image continuously decreases in size until it gets too small, and then it jumps back to its full size and resume shrinking again.\r\n\r\nh3. Workaround\r\n\r\n - Updating the page should fix the issue by wrapping the {{<ac:link>}} in a {{<p>}} tag. This can be done [using a REST PUT request|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-put].","createDate":"2025-03-31T14:23:53.000+0000","comments":[]},{"summary":"Converting a parent page to folder moves drafts outside of the folder","key":"CONFCLOUD-81264","url":"https://jira.atlassian.com/browse/CONFCLOUD-81264","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis issue is reminiscent of [CONFCLOUD-80078|https://jira.atlassian.com/browse/CONFCLOUD-80078]. The same end result is observed when a draft is initially a child of one of the pages that are then converted into a folder. \r\nh3. Steps to Reproduce\r\n # Create a new *page A*\r\n # Under {*}page A{*}, create a new unpublished *draft B*\r\n # Convert *page A* into a folder\r\n\r\nh3. Expected Results\r\nDraft B stays under (now) *folder A*\r\n\r\nh3. Actual Results\r\nDraft B is moved outside of *folder A*\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T13:57:23.000+0000","comments":[]},{"summary":"Macro usage page shows error (Showing 2 of NaN results)","key":"CONFCLOUD-81263","url":"https://jira.atlassian.com/browse/CONFCLOUD-81263","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMacro usage page shows wrong numbering (Showing  2 of NaN results)\r\nh3. Steps to Reproduce\r\n # Click on confluence administration\r\n # left side bar >> settings >> macro usage\r\n # Click on any macro (number)\r\n\r\n!Screenshot 2025-03-31 at 4.04.19 PM.png|width=577,height=134!\r\n\r\nh3. Expected Results\r\n\r\n\r\n\r\nIn the output list, the result should be counted and shown as a valid number. like *\"Showing 2 of 2 results\"*\r\nh3. Actual Results\r\n\r\n!Screenshot 2025-03-31 at 4.03.02 PM.png|width=251,height=62!  \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-31T10:36:08.000+0000","comments":[]},{"summary":"Page Jumps During Editing with Table of Contents Macro in Safari","key":"CONFCLOUD-81262","url":"https://jira.atlassian.com/browse/CONFCLOUD-81262","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn Confluence Cloud editor, the page experiences erratic jumping behavior when editing a page that includes the Table of Contents (TOC) macro. This issue occurs exclusively in the Safari browser and is not present in Chrome or Firefox. Removing the TOC macro resolves the issue.\r\n\r\nh3. Steps to Reproduce\r\n# Open Confluence Cloud in the Safari browser.\r\n# Create or open a page with multiple headings.\r\n# Insert the Table of Contents macro to the page.\r\n# Begin editing the page content below the headings at the bottom or anywhere in between the page.\r\n\r\nh3. Expected Results\r\nThe page intermittently jumps or shifts position during editing, disrupting the editing process.\r\n\r\nh3. Actual Results\r\nThe page should remain stable during editing, with no unexpected jumps or shifts, regardless of the presence of the TOC macro.\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n\r\nh3. Workaround\r\nRemove the Table of Contents macro to prevent the page from jumping while editing in Safari.\r\n\r\nOR\r\n\r\nTrying using other browsers like Chrome or Firefox.","createDate":"2025-03-31T07:53:07.000+0000","comments":[]},{"summary":"Text Jumps to Cursor Position in Code Snippet Macro on Firefox","key":"CONFCLOUD-81261","url":"https://jira.atlassian.com/browse/CONFCLOUD-81261","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn the Confluence Cloud editor, when using the Code Snippet macro in the Firefox browser, the text of the line below unexpectedly moves up to the cursor position. This issue does not occur in the Chrome browser.\r\n\r\nh3. Steps to Reproduce\r\n# Open Confluence Cloud in Firefox.\r\n# Navigate to a page and enter the editing mode.\r\n# Insert a Code Snippet macro into the page.\r\n# Type multiple lines of code within the macro.\r\n# Move the cursor to the end of a line above another line of text.\r\n# Continue typing or press Enter.\r\n\r\nh3. Expected Results\r\nThe text from the line below unexpectedly moves up to the cursor position.\r\n\r\nh3. Actual Results\r\nThe text from the line below should remain in its original position, and the cursor should not cause any unexpected text movement.\r\n\r\nh3. Workaround\r\nUse the Chrome browser to edit pages with the Code Snippet macro, as this issue does not occur in Chrome.","createDate":"2025-03-31T06:53:04.000+0000","comments":[]},{"summary":"Filtering for empty or non-empty tag fields in Databases does not work as expected","key":"CONFCLOUD-81255","url":"https://jira.atlassian.com/browse/CONFCLOUD-81255","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen filtering a Confluence Database for a tag field being empty or non-empty, it treats empty tag fields as not being empty if they have *ever* had a value.\r\n\r\nh3. Steps to Reproduce\r\n # Create a database that has a field with the tag type.\r\n # Fill in some of the fields with tags and notate which ones have ever had tags.\r\n # remove all tags from at least one row that has had a tag.\r\n # create a filter, and filter for the tag field for \"is not empty\"\r\n\r\nh3. Expected Results\r\n\r\nOnly rows with values in the field show up\r\n\r\nh3. Actual Results\r\n\r\nAny rows that have *ever* had a value, including those that no longer have any values will show up instead.\r\n\r\nh3. Workaround\r\n\r\nCurrently, the only workaround is to create new rows and copy all other fields into the row to make the field for that row \"empty\" again, or to filter for all possible values.","createDate":"2025-03-28T18:26:20.000+0000","comments":[{"text":"Spoke with [~jlong@atlassian.com] via Slack. He was not able to reproduce the issue where he previously was. Jared confirmed it is okay to close the ticket. ","author":"Michael Sommer"},{"text":"Was unable to reproduce the issue. ","author":"Michael Sommer"},{"text":"Good Afternoon, \r\n\r\nIf this issue was not able to be reproduced, then I need to know how it wasn't produced because it is still happening on my end and it makes an entire process we have been working towards useless. ","author":"Julian Pazynski"},{"text":"Apologies [~2e21e9d2b4e8], \r\n\r\n \r\n\r\nLet me work with [~jlong@atlassian.com] to get things sorted out. ","author":"Michael Sommer"},{"text":"Sorry, not trying to be rude, I can submit a screen recording to the support ticket if you'd like?? [Confluence Database Filter For When Is Not Empty Still displaying Rows|https://support.atlassian.com/requests/PCS-393807]","author":"Julian Pazynski"},{"text":"No worries Julian, and thank you for letting us know you are still facing issues. Attaching a video to the support ticket would be very helpful. [~jlong@atlassian.com] will be following up with you shortly. ","author":"Michael Sommer"}]},{"summary":"Viewing a numbered list in an excerpt on Safari results in incorrect number display","key":"CONFCLOUD-81253","url":"https://jira.atlassian.com/browse/CONFCLOUD-81253","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the Safari browser, a numbered list within an excerpt truncates the leading digit in a two-digit number. Instead of showing 9, 10, 11, 12, it displays 9, 0, 1, 2.\r\n\r\nh3. Steps to Reproduce\r\n # Create a new page or edit an existing page in Confluence.\r\n # Add a numbered list with at least two-digit numbers (e.g., 9, 10, 11, 12).\r\n # Insert the numbered list inside an excerpt macro.\r\n # Save the page and view it in Safari.\r\n # Observe the incorrect display of the numbers.\r\n\r\nh3. Expected Results\r\nThe numbered list should display numbers sequentially as 9, 10, 11, 12.\r\n\r\nh3. Actual Results\r\nThe list displays the numbers incorrectly, showing 9, 0, 1, 2 instead of the expected 9, 10, 11, 12.\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T17:48:52.000+0000","comments":[]},{"summary":"The images do not export to pdf with Numbered heading macro ","key":"CONFCLOUD-81250","url":"https://jira.atlassian.com/browse/CONFCLOUD-81250","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn a confluence page with high count of large images, the numbered headings macro disallow the images to get exported.\r\nh3. Steps to Reproduce\r\n # Export page with approximate 15 images .\r\n # Apply numbered heading macro.\r\n # Export the page to pdf.\r\n\r\nh3. Expected Results\r\n\r\nThe images are exported without any issue.\r\nh3. Actual Results\r\n\r\nThe images do not download .\r\nh3. Workaround\r\n\r\nEither reduce the number of images in the page by splitting the page or remove numbered headings macro.","createDate":"2025-03-28T15:25:59.000+0000","comments":[{"text":"[~b9285d00faf3]\r\n\r\nThank you for this bug report.  However, I cannot reproduce the issue by following the steps you've provided.  Are you using [this Numbered Headings app on the Atlassian Marketplace|https://marketplace.atlassian.com/apps/16063/numbered-headings?tab=overview&hosting=cloud]?  Can you share some information about the structure of the page?\r\n\r\n–\r\nNicholas Reichert\r\nSoftware Engineer, Confluence Cloud","author":"Nicholas Reichert"}]},{"summary":"Space manager fails to load Active and Trash tabs","key":"CONFCLOUD-81248","url":"https://jira.atlassian.com/browse/CONFCLOUD-81248","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen opening the Space Manager at /wiki/admin/space-manager , the Active and Trashed tabs show the following error.\r\n{quote}We’ve hit a snag\r\nThe issue should resolve on its own. In the meantime, you can check the [status page, (opens new window)|https://confluence.status.atlassian.com/]. There may be a known incident reported related to [this error, (opens new window)|https://confluence.atlassian.com/confkb/getting-we-ve-hit-a-snag-error-message-when-viewing-confluence-pages-1095238852.html]. If it keeps happening, ask your admin to contact [our support team, (opens new window)|https://support.atlassian.com/contact/#/] and give them:\r\n{quote}\r\n{quote}The URL of this page\r\n{quote}\r\n{quote}The code associated with this error: *nuivcc*\r\n{quote}\r\nThe list of spaces is not showing up\r\nh3. Steps to Reproduce\r\n\r\nOpen the Space Manager at the page https://<INSTANCE_NAME>.atlassian.net/wiki/admin/space-manager \r\nh3. Expected Results\r\n\r\nAll the tabs present in Space Manager will work correctly.\r\nh3. Actual Results\r\n\r\nThe Active and Trashed tabs show the error:\r\n{quote}We’ve hit a snag\r\nThe issue should resolve on its own. In the meantime, you can check the [status page, (opens new window)|https://confluence.status.atlassian.com/]. There may be a known incident reported related to [this error, (opens new window)|https://confluence.atlassian.com/confkb/getting-we-ve-hit-a-snag-error-message-when-viewing-confluence-pages-1095238852.html]. If it keeps happening, ask your admin to contact [our support team, (opens new window)|https://support.atlassian.com/contact/#/] and give them:\r\n{quote}\r\n{quote}The URL of this page\r\n{quote}\r\n{quote}The code associated with this error: *nuivcc*\r\n{quote}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T11:36:49.000+0000","comments":[]},{"summary":"Drag drop function dosen't work for Jira discovery boards in confluence whiteboard.","key":"CONFCLOUD-81247","url":"https://jira.atlassian.com/browse/CONFCLOUD-81247","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, we can integrate Jira issues, Jira project discovery boards into confluence whiteboards and we can also edit the issues, drag drop issues within the whiteboard.\r\n\r\nBut the drag drop functionality is not working with the Jira product discovery while the drag drop functionality is working well with Jira software issue boards.\r\nh3. Steps to Reproduce\r\n # Create a white board in confluence\r\n # Copy paste a Jira product discovery board URL into the whiteboard.\r\n # Use\" Embed\" option for the board.\r\n # Drag and drop issues from one panel to another.\r\n\r\nh3. Expected Results\r\n\r\nDrag and drop should transfer issues.\r\nh3. Actual Results\r\n\r\nThe drag option dosen't work with the Jira project discover boards while the same works well with the Jira boards.\r\n\r\n \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T08:10:47.000+0000","comments":[]},{"summary":"Live docs titles can't be updated through REST API v2","key":"CONFCLOUD-81242","url":"https://jira.atlassian.com/browse/CONFCLOUD-81242","type":"Bug","priority":"","description":"h3. Issue Summary\r\nLive docs titles can't be updated through REST API v2\r\n\r\nh3. Steps to Reproduce\r\n# Make sure your Confluence Cloud instance has the [live docs|https://support.atlassian.com/confluence-cloud/docs/create-and-collaborate-in-real-time-with-live-docs/] feature enabled;\r\n# Create a live doc(page) and give it any title(test1);\r\n# Update the page's title using the [Update page|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-put] endpoint;\r\n\r\nh3. Expected Results\r\nThe live doc title is successfully updated.\r\n\r\nh3. Actual Results\r\nEven though the request succeeds(HTTP 200) and you can view the new page title on the request's response, the Confluence UI still displays the old page title.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-27T21:06:14.000+0000","comments":[]},{"summary":"PDF Export issue: Images in included Confluence pages display \"Preview Unavailable\"","key":"CONFCLOUD-81235","url":"https://jira.atlassian.com/browse/CONFCLOUD-81235","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen we use the \"Include Page\" macro to insert a Confluence page into another page, the expected behavior is that the receiving page displays all images and content from the included page. While the images appear correctly on the Confluence page, exporting the combined page to PDF results in images under the \"Include Page\" macro showing as \"Preview unavailable\" instead of displaying the original image.\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a Confluence page (Page A) with images.\r\n# Create another Confluence page (Page B) and use the \"Include Page\" macro to insert Page A.\r\n# Export Page B to PDF.\r\n\r\nh3. Expected Results\r\nThe exported PDF should display all images from both the main page and the included page correctly.\r\n\r\nh3. Actual Results\r\n\r\nIn the exported PDF, images from the included page display as \"Preview unavailable\" rather than showing the actual images.\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T18:10:15.000+0000","comments":[]},{"summary":"Keyboard shortcut added to ContentAction doesn't open the module.","key":"CONFCLOUD-81231","url":"https://jira.atlassian.com/browse/CONFCLOUD-81231","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nKeyboard shortcuts added to {{ContentAction}} in a Forge app are being displayed as capital letters and do not function as expected to open the module.\r\n \r\nh3. Steps to Reproduce\r\n # Create a Forge app using the {{confluence-content-action}} template.\r\n # Add a keyboard shortcut to the manifest file:\r\n{code:json}\r\n      keyboardShortcut:\r\n        accelerator: shift+d\r\n{code}\r\n # Deploy the Forge app.\r\n # Navigate to a Confluence page and open the More Actions menu (...).\r\n # Go to Apps -> Observe the tooltip displaying the shortcut in capital letters.\r\n # Attempt to use the shortcut (both lowercase and uppercase).\r\n\r\nh3. Expected Results\r\n * The tooltip should correctly display the shortcut without translating it to capital letters unless it requires a capital letter.\r\n * Pressing the defined shortcut (Shift+D) should open the module directly, regardless of current navigation focus.\r\n\r\nh3. Actual Results\r\n * The tooltip displays the shortcut in capital letters.\r\n * Pressing the shortcut, whether in lowercase or uppercase, only opens the More Actions menu instead of directly opening the module.\r\n\r\nh3. Workaround\r\n\r\nNavigate to the *More Actions(...)* -> *Apps* -> selects your app , and then press the shortcut keys. It works in both lowercase and capital letters.","createDate":"2025-03-27T12:29:14.000+0000","comments":[]},{"summary":"Image inside an expand macro shows \"Unsupported macro\" when a link has been added to it","key":"CONFCLOUD-81230","url":"https://jira.atlassian.com/browse/CONFCLOUD-81230","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an image inside an expand macro has a link added to it - selected from one of the pages from the dropdown list - it shows \"Unsupported macro\" in edit mode\r\nh3. Steps to Reproduce\r\n # Create a page with an expand macro\r\n # Insert an image within the expand macro\r\n # Add a link on the image\r\n # Instead of pasting a direct URL choose one of the pages from the dropdown\r\n # Save the page\r\n # Go back to the edit mode and check the image - it will show \"Unsupported macro\" on the image\r\n\r\nSee the screen recording below:\r\n\r\n\r\n[^UnsupportedMacro.mov]\r\nh3. Expected Results\r\n\r\nImage showing properly in both edit and view mode\r\nh3. Actual Results\r\n\r\nThe image will show \"Unsupported Macro\" and if you try to edit the image, you will get the error:\r\n{quote}This macro can’t be edited\r\nThis macro was added to a page that was converted from the legacy editor. It can’t be edited because it is now incompatible with the current editor.\r\n{quote}\r\nh3. Workaround\r\n\r\nRe-insert the image in the expand macro, and instead of selecting a page from the dropdown, use the direct URL","createDate":"2025-03-27T10:30:16.000+0000","comments":[]},{"summary":"Adding a header image to an article causes the screen to flicker","key":"CONFCLOUD-81229","url":"https://jira.atlassian.com/browse/CONFCLOUD-81229","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen an article has a header image, and the page requires scrolling, the page will flicker until it is scrolled down\r\nh3. Steps to Reproduce\r\n # Create a page that has a header image\r\n # Add text and other elements to make the page scrollable \r\n\r\nh3. Expected Results\r\nThe page is static until scrolled down\r\nh3. Actual Results\r\nThe page will flicker until it is scrolled down\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-25T00:04:11.000+0000","comments":[]},{"summary":"Timeout in Edit Mode When Using TOC Macro Inside Scroll Ignore Macro","key":"CONFCLOUD-81218","url":"https://jira.atlassian.com/browse/CONFCLOUD-81218","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe have identified a timeout issue occurring in *Edit mode* when the *TOC macro* is placed inside the {*}Scroll Ignore macro{*}. While macros load correctly in {*}View mode{*}, in {*}Edit mode{*}, all macros fail to load due to the timeout, preventing users from editing the page.\r\nh3. Steps to Reproduce\r\n # Insert a *Scroll Ignore macro* on a Confluence Cloud page.\r\n\r\n # Inside the Scroll Ignore macro, insert a {*}Table of Contents (TOC) macro{*}.\r\n\r\n # Save the page and switch between View and Edit modes.\r\n\r\n # In {*}View mode{*}, the macros render correctly.\r\n\r\n # In {*}Edit mode{*}, the macros do not load, and the page times out.\r\n\r\nh3. Expected Results\r\n\r\nThe TOC and Scroll Ignore macros should function correctly in both View and Edit modes.\r\nh3. Actual Results\r\n * The page fails to load macros in Edit mode due to a timeout.\r\n\r\n * A *503 error* appears in the logs, suggesting that Confluence is dropping the request.\r\n\r\n * The *cc-proxy logs* indicate slow API calls.\r\n\r\nh3. Workaround\r\n\r\nMoving the TOC macro *outside* the Scroll Ignore macro allows the page to load in Edit mode.","createDate":"2025-03-26T14:34:13.000+0000","comments":[]},{"summary":"PDF export V2 is slow for custom exports on the space level","key":"CONFCLOUD-81213","url":"https://jira.atlassian.com/browse/CONFCLOUD-81213","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen exporting PDF files on the space level using the \"custom\" option to select specific pages, the PDF export is very slow despite selecting only 1 page with not a lot of content.\r\n\r\nBelow is an example of an export with space that only has a few pages containing just a few text:\r\n\r\n!image-2025-03-26-10-14-12-329.png|width=268,height=169!\r\n\r\nIn some cases, it goes all the way up to 1 hour or more.\r\n\r\n*(!) The issue only seems to impact the custom export. Page-level exports are performing better.*\r\nh3. Steps to Reproduce\r\n # Export a space using the \"custom\" option\r\n # Select one or two small pages\r\n # Start the export\r\n\r\nh3. Expected Results\r\n\r\nPDF export finishes in a reasonable amount of time\r\nh3. Actual Results\r\n\r\nPDF export takes much longer in relation to the amount of content within the selected pages to be exported\r\nh3. Workaround\r\n\r\nUse page-level exports","createDate":"2025-03-26T09:15:54.000+0000","comments":[]},{"summary":"Header: Inaccurate alt text specified for interactive image","key":"CONFCLOUD-81212","url":"https://jira.atlassian.com/browse/CONFCLOUD-81212","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn inaccurate textual description \"Custom logo\" is specified for the \"CG Logo\" image link.\r\nh3. Note:\r\n\r\nTo resolve the current bug, it is necessary to implement a feature that enables administrators to add alt text for the custom logo. This functionality should be flexible enough to allow admins to customize the alt text according to their organization's specific requirements.\r\n\r\nFeature Request Link: [https://jira.atlassian.com/browse/CONFCLOUD-81193]\r\nh3. Steps to Reproduce\r\n # Open the Confluence Cloud instance with custom logo present.\r\n # Using a screen reader, navigate to the mentioned image link in the header section.\r\n # Listen that the textual description is not describing the functionality of the image link.\r\n\r\nh3. Screen Recording\r\n\r\n[^Inaccurate Alt Text.mp4]\r\nh3. Actual Results\r\n\r\nWhen screen reader users navigate through the header section in Confluence, the \"CG Logo\" informative image link is announced as \"Custom logo\", which does not accurately convey the information visually represented by the image.\r\n\r\nThe issue occurs because inaccurate alt text has been provided in the \"alt\" attribute.\r\n\r\nAs a result, this creates a poor experience for screen reader users.\r\nh3. Expected Results\r\n\r\nEnsure that the accurate textual description of the image is read out by the screen reader.\r\n\r\nApply the following changes:\r\n * Provide an appropriate and accurate textual description for the informative image.\r\n * Ensure that the textual description accurately reflects the purpose of the image.\r\n * In this case, ensure that the textual description for the mentioned image link is \"CG Confluence Homepage\".\r\n\r\nh3. Code Snippet:\r\n\r\n*Syntax:* <img src=\"...\" alt=\"ClientName_ ProductName_Homepage\">\r\n\r\n*Correct code Example:*\r\n\r\n<a href=\"/wiki\" data-testid=\"app-navigation-custom-wordmark\">\r\n\r\n<img src=\"...\" alt=\"CG Confluence Homepage\">\r\n\r\n</a>\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\nMacBook Pro (16-inch, 2021)\r\nmacOS Sonoma 14.7\r\nOperations - Windows11\r\nChrome - Version 134.0.6998.166 (Official Build) (64-bit)\r\nSafari- Version 18.0\r\nFirefox- Version 135.0 (64-bit)\r\nJAWS- Version 2023\r\nNVDA- Version 2024.4.2\r\nVoiceOver - Version Latest","createDate":"2025-03-26T09:15:28.000+0000","comments":[]},{"summary":"Allow Tag Creation' Disabled, but Tags Can Still Be Created in Database","key":"CONFCLOUD-81211","url":"https://jira.atlassian.com/browse/CONFCLOUD-81211","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAllow Tag Creation' Disabled, but Tags Can Still Be Created in Confluence Database\r\n\r\nh3. Steps to Reproduce\r\n # Create a database\r\n # have field where the field type is TAG\r\n# Make sure that the option to 'Allow tags creation' is unchecked\r\n# Try creating tags in the field (the tags will be created)\r\n\r\n\r\nh3. Expected Results\r\nThe tags must not be created\r\n\r\nh3. Actual Results\r\nThe tags can be created\r\n\r\nh3. Workaround\r\nEnable and the disable the tag check box","createDate":"2025-03-26T09:07:49.000+0000","comments":[{"text":"This isn't a permissions issue.  It appears to be a setting users can configure in their Confluence Database page.","author":"Keith Ott"}]},{"summary":"Problem render Jira issues description field data containing '{}' in table format on Jira legacy macro","key":"CONFCLOUD-81210","url":"https://jira.atlassian.com/browse/CONFCLOUD-81210","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Legacy macro in Jira issues interprets text within curly braces '{}' in issue descriptions as special values. This interpretation causes table rows containing '{}' to collapse into a single row, which distorts the table data format.\r\nh3. Steps to Reproduce\r\n # Create an issue in Jira and feed the description filed with the table\r\n # Fill out rows with data containing '{}'. like API calls with variables included. e.g. POST questions-list/questionnaire/v2/\\{questionnaire-responses}/123\r\n # Use Jira legacy macro on Confluence Cloud and include a description field as well.\r\n # Then publish the Confluence page\r\n\r\nh3. Expected Results\r\n\r\nOn the Confluence page, The Jira issues description field should render the table data in the original format similar to how it appears on the Jira issue\r\nh3. Actual Results\r\n\r\nThe table will be rendered with a few rows collapsed into a single row.\r\nh3. Workaround\r\n\r\nThe only workaround is to replace the '{}' with any other symbols like '<>'","createDate":"2025-03-26T09:04:10.000+0000","comments":[]},{"summary":"Page appears unstable after creating a smart link ","key":"CONFCLOUD-81197","url":"https://jira.atlassian.com/browse/CONFCLOUD-81197","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a user creates a page and adds a header image, then proceeds to create a smart link from the content tree on the left panel, the page enters a \"shaky mode\" where the display is unstable. This instability lasts for a few minutes before the page stabilizes.\r\nh3. Steps to Reproduce\r\n # Create a new page and add a header image.\r\n\r\n # On the left panel, locate the content tab.\r\n\r\n # Click the \"+\" button to create a smart link referring to the newly created page.\r\n\r\n # Observe the page behavior.\r\n\r\nh3. Expected Results\r\n\r\nThe page should display smoothly without any instability immediately after creating a smart link.\r\nh3. Actual Results\r\n\r\nThe page enters a \"shaky mode\" where the display flickers or shakes for a few minutes before stabilizing.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-25T13:16:28.000+0000","comments":[]},{"summary":"Formatting Issue: Inline Content Changes When Using Excerpt Include Macro in Confluence","key":"CONFCLOUD-81180","url":"https://jira.atlassian.com/browse/CONFCLOUD-81180","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere is a formatting issue in Confluence where content that appears inline while using the Excerpt Include Macro in edit mode changes to a different formatting once published. This impacts the ability to maintain consistent inline formatting.\r\nh3. Steps to Reproduce\r\n\r\n*Step 1:* Edit a page that uses the Excerpt Include Macro to display content inline.\r\n\r\n*Step 2:* Publish the page and observe the formatting changes.\r\nh3. Expected Results\r\n\r\nThe content should maintain its inline formatting after being published.\r\nh3. Actual Results\r\n\r\nThe content changes its formatting once published, disrupting the intended inline appearance.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-24T18:52:09.000+0000","comments":[]},{"summary":"Table of content links in the New Confluence navigation","key":"CONFCLOUD-81174","url":"https://jira.atlassian.com/browse/CONFCLOUD-81174","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nTable of content links in the New Confluence navigation\r\nh3. Steps to Reproduce\r\n # Add Table of contents macro on the page.\r\n # Enable Confluence new navigation.\r\n # Click any of the heading links in the macro\r\n\r\nh3. Expected Results\r\n\r\nThe page should scroll to the respective heading.\r\nh3. Actual Results\r\n\r\nThere is no action after clicking the heading links in the macro.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-24T12:07:29.000+0000","comments":[{"text":"Issue Appeared to affect Site admin opting into new navigation experience. Cause was found & fixed. Fix should begin rolling out to production in the next 4-8 hours. Mar 26 ~ 12-4PM PST. Please refresh your session to get the change.","author":"tm"},{"text":"Complexity of opt-in/out mechanisms allowed for the majority of the new nav experience to function correctly, but for a few exceptions like scrolling. Detailed investigation found exceptions to the primary method of checking for new nav experience. ","author":"tm"},{"text":"When should we expect to see this in standard instances? We are not yet seeing the fix. ","author":"Cara DiMattia"}]},{"summary":"Confluence Comment Links not working when clicking on it ","key":"CONFCLOUD-81163","url":"https://jira.atlassian.com/browse/CONFCLOUD-81163","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEver since switching over to the new navigation experience, comment links do not work. If I click to go to a comment from slack or an email, it takes me to the page but doesn't open the comment. I've also tried clicking the Show Comments button but nothing happens.\r\n\r\nSteps to reproduce\r\n\r\nClick on View Comment from a notification email\r\nClick on comments in the page nothing happens \r\n\r\nUnexpected behavior: Confluence page opens up but it does not open up the comment\r\nExpected behavior: Confluence page opens with the comment opened.\r\n\r\nh3. Steps to Reproduce\r\n\r\n # Step 1 Click on View Comment from a notification email\r\n # Step 2 Click on comments in the page nothing happens \r\n\r\nh3. Expected Results\r\n\r\nThe page should open \r\n\r\nh3. Actual Results\r\nNothing happens \r\n\r\nh3. Workaround\r\nCurrently thier is no work around ","createDate":"2025-03-21T19:33:29.000+0000","comments":[{"text":"This is actually a very disruptive issue since we use the comment links to direct people to very specific places on a large confluence page. Please consider raising the priority on this. ","author":"Alix Scales"}]},{"summary":"In Database Smart links with no content are not considered empty for filtering","key":"CONFCLOUD-81151","url":"https://jira.atlassian.com/browse/CONFCLOUD-81151","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Database Smart links with no content are not considered empty for filtering\r\nh3. Steps to Reproduce\r\n\r\nIn Confluence Database, when filtering for empty/non-empty values in a smart link field, values that show up with just a link symbol are not treated as empty. \r\n\r\nThis can happen when:\r\n # importing empty values to a link field\r\n\r\n # clearing content in link field through backspace\r\n\r\nh3. Expected Results\r\n\r\nThe filter feature should filter out the contents if it is empty. \r\nh3. Actual Results\r\n\r\nThe Smart links with no content are not considered empty for filtering\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-20T19:19:02.000+0000","comments":[{"text":"We have fixed this bug: Smart Links with no content are now correctly considered empty for filtering and calculations.","author":"Jordan Hoyt"}]},{"summary":"Event icons size on Team Calendars are oversized","key":"CONFCLOUD-81148","url":"https://jira.atlassian.com/browse/CONFCLOUD-81148","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nIcon sizes are increased, covering the entire event inside Calendar dates and also on the filter events menu.\r\n\r\nThis happens both in the Calendar view and TC macros. Even some icons within calendar settings are affected, for example, the padlock icon within the \"Embed\" settings for calendars is oversized now. \r\nh3. Environment\r\n\r\nConfluence Cloud with Team Calendar feature enabled\r\nh3. Steps to Reproduce\r\n # Create a calendar and add events to it.\r\n # Add a Team Calendar macro on a page.\r\n # Observe the size of the event icons on both the calendar dates and the filter events menu.\r\n\r\nh3. Expected Results\r\n\r\nThe event filter icons and icons inside the calendar should display at a standard size, not covering the entire event or affecting readability.\r\nh3. Actual Results\r\n\r\nThe event filter icons and icons inside the calendar are oversized, obscuring the event details and affecting user interaction.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-20T16:36:18.000+0000","comments":[{"text":"Has this issue been identified? I see this component keeps changing values. Issue started on 3/20 before 8AM CST.","author":"Jonathan Smith"},{"text":"[~9d5caf15d0b3] \r\n\r\nThis is first time I see this issue, please let me know what needs to be done to fix it!","author":"Allan Zaraga"},{"text":"Please see this, I just noticed the unpublished changes, not sure if this related \r\n\r\n!image-2025-03-26-14-16-04-499.png|width=658,height=148!","author":"Allan Zaraga"},{"text":"[~27791240e8dc] , I am not an Atlassian :), just helping to try and identify the window in which a change may have went in to cause the icon problems.","author":"Jonathan Smith"},{"text":"Hi [~9d5caf15d0b3]  Yes we are constantly making changes to the release calendar depending on the project and go live. Please I need this to be fix as soon as possible as the project manager and testers are having problem reading it because effects shadow","author":"Allan Zaraga"},{"text":"Its a display bug so going by Atlassian track record of fixing small bugs, this may take the rest of the year to fix.","author":"Danijel Pavlovic"}]},{"summary":"Add-on window closes when you click/interact with it on Confluence pages","key":"CONFCLOUD-81145","url":"https://jira.atlassian.com/browse/CONFCLOUD-81145","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAdd-on window closes when you click/interact with it on Confluence pages\r\nh3. Steps to Reproduce\r\n # With the new navigation changes, Navigate to a page on Confluence\r\n # Click on the three dots ... -> Apps -> Click on an one of the addons\r\n # When the add-on window opens, click on any of the options on the window\r\n\r\nh3. Expected Results\r\n\r\nThe action corresponding to the option clicked should be executed.\r\nh3. Actual Results\r\nThe entire add-on window exits and no action is executed. \r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-20T08:20:01.000+0000","comments":[{"text":"A fix for this issue has been deployed","author":"Evelyn Chen"}]},{"summary":"The button to open the inline comments sometimes does nothing, even when there are comments to read","key":"CONFCLOUD-81128","url":"https://jira.atlassian.com/browse/CONFCLOUD-81128","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe button does not open the comments panel when clicking on it.\r\nh3. Steps to Reproduce\r\n # Click on the button comments\r\n!image-2025-03-18-15-57-41-709.png|width=204,height=114!\r\n\r\nh3. Expected Results\r\n\r\nThe comments panel should open when clicking on the comments button.\r\nh3. Actual Results\r\n\r\nThe comments panel don't open when clicking on the comments button.\r\nh3. Workaround\r\n\r\nThere's no workaround for it so far.","createDate":"2025-03-18T19:00:35.000+0000","comments":[]},{"summary":"In the Card macro, titles don't display in view mode when using links requiring authentication.","key":"CONFCLOUD-81107","url":"https://jira.atlassian.com/browse/CONFCLOUD-81107","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe have noticed an issue an issue with the {*}Card & Carousel macro{*}. When adding a {*}public link{*}, updating the title, and viewing the page, the {*}title appears correctly{*}. However, if a *SharePoint or OneDrive link* (requiring authentication) is added, the {*}title does not display in view mode{*}.\r\nh3. Steps to Reproduce\r\n # *Create a Page:* Open Confluence and create a new page using the {*}New Fabric Editor{*}.\r\n # *Add a Card Macro:* Insert a *Card macro* into the page.\r\n # *Insert Links:*\r\n ** Add a *public link* to the Card macro.\r\n ** Add a *SharePoint link* that requires authentication.\r\n *** Be sure the title of this link is filled out and saved in the corresponding card title field in config panel.\r\n # *Publish the Page:* Save and publish the page.\r\n # *Verify the Issue:*\r\n ** View the page as a user who has access to the Confluence page but *does not have access* to the SharePoint link.\r\n ** Observe that the *title does not display* for the SharePoint link in the Card macro instead user will notice the message \"Connect to your Ondrive\"\r\n\r\nh3. Expected Results\r\n\r\nThe Card should display Title regardless of the URL requirements.\r\nh3. Actual Results\r\n\r\nIf we have a URL that needs Authentication, The card does not display Title in the view mode. \r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-17T09:24:38.000+0000","comments":[]},{"summary":"Full width pages overflow the screen due to object sidebar","key":"CONFCLOUD-81091","url":"https://jira.atlassian.com/browse/CONFCLOUD-81091","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFull width pages overflow the screen when they have the new object sidebar UI element.\r\n\r\nh3. Steps to Reproduce\r\n1. Visit a full width page in a cloud site with the new object Sidebar UI enabled.\r\n2. Notice that the content overflows viewport width (has a horizontal scrollbar)\r\n\r\nh3. Expected Results\r\n\r\nThe content resizes to fit the viewport\r\n\r\nh3. Actual Results\r\n\r\nThe content either does not resize to fit the viewport or does so very slowly.\r\n\r\nh3. Workaround\r\n\r\nThere is currently no workaround to this issue.","createDate":"2025-03-14T15:06:25.000+0000","comments":[]},{"summary":"Create multiple Jira is not working as expected","key":"CONFCLOUD-81088","url":"https://jira.atlassian.com/browse/CONFCLOUD-81088","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFrom a table when trying to create multiple issue, and if the issues are modified within the create issue window as shown the below recording. the create issue window just keep loading.\r\n\r\nBut issues are created in Jira not linked to the confluence page.\r\nh3. Steps to Reproduce\r\n\r\n[^Screen Recording 2025-03-14 at 5.01.09 PM.mov]\r\nh3. Expected Results\r\n\r\nIssue must be linked on the confluence page\r\nh3. Actual Results\r\n\r\nIssues gets created in jira, but do not get linked on the confluence page.\r\nh3. Workaround\r\n\r\ndo not modify or click on the (/) button to create the issue. use creat all button at the bottom of the create issue screen.","createDate":"2025-03-14T11:36:34.000+0000","comments":[]},{"summary":"Column is empty in Jira Issue Macro when there are duplicate custom field names","key":"CONFCLOUD-81084","url":"https://jira.atlassian.com/browse/CONFCLOUD-81084","type":"Bug","priority":"","description":"h3. Issue Summary\r\nSimilar to [CONFCLOUD-80466|https://jira.atlassian.com/browse/CONFCLOUD-80466#], when the correct custom field is using global context and there are duplicated custom fields with context defined to other Projects, the column is not populated. \r\nSource code shows that all custom fields with the same name have been selected for the same column:\r\n{code}\r\n...\r\n\"views\":[{\"type\":\"table\",\r\n\"properties\":{\"columns\":\r\n[{\"key\":\"key\"},\r\n{\"key\":\"summary\"},\r\n{\"key\":\"customfield_18280\",\"width\":127},\r\n{\"key\":\"customfield_14762\",\"width\":110},\r\n{\"key\":\"customfield_18273\"},\r\n{\"key\":\"customfield_18277\",\"width\":98},\r\n{\"key\":\"customfield_15682,customfield_18939,customfield_19456\"}] ===> Multiple fields\r\n}}]}\"\">\r\n...\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n1. Create two custom fields with the same name, for instance \"dupField\" One may be a selection list, and the other a checkbox;\r\n2. The checkbox was added to the screens used by project \"Test1\", the Selection list for the project \"Test2\";\r\n3. Create some issues for the 'Test1\" project, with values for the \"dupField\";\r\n4. In Confluence, create a new page and add the Jira Issues Macro;\r\n5. Use a JQL to select issues from the \"Test1\" project, and select the \"dupField\" column;\r\n6. Publish the page, observe that the column \"dupField\" is correct;\r\n7. In Jira, edit each \"dupField\" and change the context. Keep Global for checkbox, and the selection list with context to the project \"Test2\";\r\n8. In Confluence, add the Jira Issues Macro and use the same JQL used on step 5. Select the \"dupField\" column.\r\n\r\nh3. Expected Results\r\nNo changes, the dupFields Column shows valid content\r\n\r\nh3. Actual Results\r\n* The column does not show values.\r\n\r\nh3. Workaround\r\n* Use Jira Legacy Macro. Select both dupFields and observe which column returned value;\r\n* Remove the other dupFields that did not show values.\r\n","createDate":"2025-03-13T20:53:28.000+0000","comments":[{"text":"This workaround is not feasible for my team. We have hundreds of pages that use this macro. To have to go and change to use the legacy on every page until this is fixed is untenable for us. Please prioritize this one higher.","author":"Lori Milam"},{"text":"Users use Confluence to generate dashboards for managing issue due dates.\r\n\r\nThis bug affects the team's due date management as duplicate due date fields cannot be referenced.\r\n\r\nPlease release a bug fix as soon as possible.","author":"Masayuki Abe"}]},{"summary":"Confluence Analytics records presenting discrepancies between number of created pages","key":"CONFCLOUD-81082","url":"https://jira.atlassian.com/browse/CONFCLOUD-81082","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSince Confluence Analytics numbers are based on events triggered by actions taken on pages (creation, updates, etc.), on a few specific occasions, those events may either be duplicated or missed, resulting in discrepancies between the actual number of pages created by a user and what is displayed within Analytics screens.\r\n\r\nThe discrepancies may be either bigger (potential duplicate events) or lower (potential missed events) numbers than the actual value.\r\nh3. Steps to Reproduce\r\n\r\nSo far we have not been able to reproduce the issue consistently, but already gathered multiple case examples for analysis.\r\nh3. Expected Results\r\n\r\nNumbers matching between DB queries and Analytics\r\nh3. Actual Results\r\n\r\nDiscrepancies between the number of pages created in DB vs Analytics\r\nh3. Workaround\r\n\r\nCurrently, the only workaround is to manually search and count the pages from a given user – which we understand is not feasible in most cases.","createDate":"2025-03-13T18:49:30.000+0000","comments":[]},{"summary":"When printing a page from web browsers the Printing Preview shows blank pages","key":"CONFCLOUD-81042","url":"https://jira.atlassian.com/browse/CONFCLOUD-81042","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen printing a page from web browsers the Printing Preview shows blank pages\r\nh3. Steps to Reproduce\r\n # Navigate to any Confluence Page\r\n # Press *command+P* or {*}right click{*}+{*}print{*}...\r\n\r\nh3. Expected Results\r\n * The Print Preview should show the page in a PDF format\r\n\r\nh3. Actual Results\r\n * In Google Chrome - all pages show as blank pages\r\n * In Microsoft Edge - all pages show as blank pages \r\n * In Firefox - The First page shows as a blank page, the content starts showing on the second page\r\n\r\nh3. Workaround\r\n * Use Safari if allowed by company policies\r\n * Change the Print Preview *Layout* to *Landscape*\r\n * Collapse *Confluence* *sidebar* before printing","createDate":"2025-03-10T23:31:07.000+0000","comments":[]},{"summary":"Fetching attachments while paginating descendants can 500 on pages with no attachments. ","key":"CONFCLOUD-81039","url":"https://jira.atlassian.com/browse/CONFCLOUD-81039","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n[While using the following expands and query params, a 500 can occur on certain pages:|https://instance-url.atlassian.net/wiki/rest/api/content/627769346/descendant/page?next=true&expand=version,children.attachment,ancestors&limit=5&start=1200]\r\n- [/wiki/rest/api/content/[CONTENT_ID]/descendant/page?next=true&expand=children.attachment&limit=X&start=Y,|https://paypal.atlassian.net/wiki/rest/api/content/627769346/descendant/page?next=true&expand=version,children.attachment,ancestors&limit=5&start=1200]\r\n\r\nh3. Steps to Reproduce\r\nUnclear, but there are no attachments on the pages that fail, and the expand that requests them triggers a 500.\r\n\r\nh3. Expected Results\r\nNo attachments linked to this page should be returned, but the base data for the page should be returned.\r\n\r\nh3. Actual Results\r\n{noformat}\r\nRequest Returns a 500 response{noformat}\r\n\r\nh3. Workaround\r\n\r\nThere is currently no workaround","createDate":"2025-03-10T20:51:33.000+0000","comments":[{"text":"Also affects some other APIs like /wiki/rest/api/content?spaceKey=XXXXX&start=2700&limit=25&expand=ancestors,version.collaborators.users,metadata.labels\r\n\r\n \r\n\r\nresponse:\r\n\r\n{\"statusCode\":500,\"data\":\\{\"authorized\":true,\"valid\":true,\"errors\":[],\"successful\":true},\"message\":\"com.atlassian.confluence.api.service.exceptions.ServiceException: Pagination request timed out\"}'","author":"NiYunfan"}]},{"summary":"Users are still able to create live pages despite disabling it in the space features","key":"CONFCLOUD-81019","url":"https://jira.atlassian.com/browse/CONFCLOUD-81019","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSpace admins are able to turn off specific feature available in a space by navigating to *Space Settings > General > Features* \r\nh3. Steps to Reproduce\r\n # Navigate to *Space Settings > General > Features*\r\n # Disable *Live Pages* \r\n\r\nh3. Expected Results\r\n\r\nUsers will not be able to create new live pages in the space\r\nh3. Actual Results\r\n\r\nUsers are still able to create new live pages and designate it to the space where the live pages are disabled\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-07T16:17:56.000+0000","comments":[{"text":"Intentional behavior","author":"Ben Keene"}]},{"summary":"JSM customers receive daily digest emails from confluence","key":"CONFCLOUD-81014","url":"https://jira.atlassian.com/browse/CONFCLOUD-81014","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen a KB space is open to JSM customers, they can watch that space and receives daily digest emails. \r\n\r\nh3. Steps to Reproduce\r\n # (Confluence) Create a space and a calendar in the space\r\n # (Jira Service Management) Go to a service project and link the space to the project\r\n #* Make sure that 'All logged-in users' is set to 'Who can view'\r\n # Log in as a JSM customer (with no Confluence licence) and Go to the Confluence space created in Step 1\r\n # Watch the space\r\n\r\nh3. Expected Results\r\nJSM customer does not receive a notification.\r\n\r\nh3. Actual Results\r\nJSM customer receives a notification.\r\n\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n\r\n","createDate":"2025-03-07T13:48:17.000+0000","comments":[]},{"summary":"Page: Nameless button is found in the confluence IOS app","key":"CONFCLOUD-80994","url":"https://jira.atlassian.com/browse/CONFCLOUD-80994","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn the \"Confluence iOS app\" there is a \"Restriction\" icon button is available which does not have accessible name.\r\nh3. Steps to Reproduce\r\n # Open the \"Confluence\" app in any iPhone.\r\n # Using voice over Create a project and publish 1 page.\r\n # Now observe that there is a \"Lock\" icon button.\r\n # Navigate to that button and listen to the output of the voice over.\r\n # Observe that it is announced as \"button\" only.\r\n\r\nh3. Screen Recording\r\n\r\nhttps://jira.atlassian.com/secure/attachment/488135/Nameless%20button\r\nh3. Actual Results\r\n\r\nWhen a user navigates to the \"Restriction\" icon button on any published Confluence page, it is missing an accessible name and is announced only as \"button\". This issue occurs exclusively in the iOS mobile app when navigating with the VoiceOver screen reader.\r\nAs a result, VoiceOver screen reader users are unable to effectively understand the purpose of the button.\r\nh3. Expected Results\r\n\r\nThe \"Restriction\" icon button should have an accessible name that is clearly communicated to screen reader users. This name should be both unique and sufficiently descriptive to convey the button's function effectively.\r\n\r\nFor further guidance on accessibility best practices, refer to the following resources:\r\n * [Icon buttons should be labeled with aria-label|https://dev.to/masakudamatsu/day-16-icon-buttons-should-be-labelled-with-aria-label-551g]\r\n * [How to fix common iOS accessibility issues|https://www.deque.com/blog/how-to-fix-common-ios-accessibility-issues/]\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\nh3. Environment\r\n\r\niPhone-8\r\niOS version - 16.6\r\nModel Name- MQ6M2\r\nVoiceOver - Version Latest","createDate":"2025-03-06T10:46:09.000+0000","comments":[{"text":"Fixed in version 4.9.4","author":"Nikita Leonov"}]},{"summary":"Table of content macro not showing links correctly","key":"CONFCLOUD-80974","url":"https://jira.atlassian.com/browse/CONFCLOUD-80974","type":"Bug","priority":"","description":"h3. Issue Summary:\r\n\r\nTable of Content macro links are not blue and the font size is also incorrect.\r\nh3. Steps to reproduce:\r\n # Create a Table of Content macro on a page\r\n\r\n      2. Add headings to the page\r\nh3. Expected result:\r\n\r\nThe links to headings in the macro are blue and 16px font.\r\nh3. Actual result:\r\n\r\nThe links to headings in the macro are black and 14px font.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-04T14:48:08.000+0000","comments":[{"text":"Hello,\r\n\r\nI have an issue about Table of Content macro, if the title is in panel, the link doesn't work\r\n\r\nSo you cannot navigate from Table of Content.\r\n\r\nIf I'm in edit mode the link works\r\n\r\nBut in view mode, I got an error:\r\n{code:java}\r\nUncaught DOMException: Document.querySelector: '#presenter-mode-container #2---V\\%C3\\%A9rifier-le-r\\%C3\\%A9sultat' is not a valid selector    onClick scrollToHeader.tsx:4    onClick TableOfContentsElementStructure.tsx:84    React 11 23822.voxqHS76TZ.js:1    onClick scrollToHeader.tsx:4    onClick TableOfContentsElementStructure.tsx:84    React 11 {code}\r\nAtlassian Could fix this problem?\r\n\r\nThank you","author":"Mohand TALBI"}]},{"summary":"Number of Jira Issues indicator is missing in the new UI experience","key":"CONFCLOUD-80971","url":"https://jira.atlassian.com/browse/CONFCLOUD-80971","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe indicator displaying the number of Jira issues on Confluence pages is currently absent in the new user interface experience.\r\nh3. Steps to Reproduce\r\n # Create a new page in a Confluence instance that the new navigation experience.\r\n # Insert a Jira issue on that page.\r\n\r\nh3. Expected Results\r\n\r\nThe Number of Jira Issues indicator should be displayed next to the breadcrumbs.\r\n * !Screenshot 2025-03-04 at 13.35.29.png!\r\n\r\nh3. Actual Results\r\n\r\nThe Number of Jira Issues indicator is missing.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-04T12:39:47.000+0000","comments":[{"text":"priority not low (IMO) teams use this function quite often and it's affecting workflows. s/b High","author":"Tere Pile"},{"text":"Agree with Tere - a function our team used day to day.","author":"Andrius Meldaikis"}]},{"summary":"PDF export shows a divider/horizontal line in top part","key":"CONFCLOUD-80954","url":"https://jira.atlassian.com/browse/CONFCLOUD-80954","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPDF export of a page shows a divider in the first half portion of a page\r\nh3. Steps to Reproduce\r\n # Create a page\r\n # Add any text or leave it empty\r\n\r\nIssue is same with Page and space export\r\nh3. Expected Results\r\n\r\nThe Page should be exported with the exact contents on the page in view mode.\r\nh3. Actual Results\r\n\r\n \r\n{noformat}\r\nThere is a horizontal line/divider in the top part of export{noformat}\r\nh3. Workaround\r\n\r\n-Currently there is no known workaround for this behavior. A workaround will be added here when available-\r\nPlease add the following css code to the PDF stylesheet:\r\n{code:java}\r\ndiv[data-testid=\"reaction-placeholder-divider\"] {\r\n  border: none\r\n} {code}\r\n ","createDate":"2025-03-03T10:04:30.000+0000","comments":[{"text":"I am not sure why this is a low priority bug? It appears on every single export to PDF and will affect every customer who relies on the export to PDF function.  I was able to verify that the bug happens on multiple confluence sites, not just my own. ","author":"Kenneth Curtis"},{"text":"I agree with the comment above - this should not be 'minor severity.' It compromises our ability to use the PDF export, which plays an important role in our processes.","author":"dave.drexler"},{"text":"Hi folks,\r\n\r\nWe have a workaround for removing the grey line. Please add the following css code:\r\n{code:java}\r\ndiv[data-testid=\"reaction-placeholder-divider\"] {\r\n  border: none\r\n} {code}","author":"Jacky Lai"},{"text":"Why is this bug in low priority Status?  This issue is occurring with every PDF export and impacting the pdf delivery with the  customers who rely on this feature. Please confirm us a timeline when this issue will be resolved?","author":"Rajith Ravindranathan"},{"text":"+1","author":"Michal Boruta"},{"text":"Can we have an update on the timeline for this fix please.","author":"Mike Saltis"}]},{"summary":"Page and Space Hide Related Content does nothing","key":"CONFCLOUD-80940","url":"https://jira.atlassian.com/browse/CONFCLOUD-80940","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nHide Related Content on Confluence page does not hide any related content.\r\nh3. Steps to Reproduce\r\n # Go to a Confluence page and use the Hide Related Content option under More Actions > Advanced.\r\n # Confirm Hide for Everyone.\r\n # Go to Space Settings > Related pages\r\n # Toggle off related pages\r\n\r\nh3. Expected Results\r\n\r\nRelated Content at the bottom of the page should no longer appear on the pages.\r\nh3. Actual Results\r\n\r\nRelated content is still shown at the bottom of the pages.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-28T09:13:00.000+0000","comments":[{"text":"What release is this fix in?  We are still having the same problem.","author":"Mary Heather Cox"},{"text":"I would like to echo what the other commenter said. If we could get a timeline on this fix release.","author":"gfernandez.el"}]},{"summary":"Background CSS not working in PDF exports","key":"CONFCLOUD-80887","url":"https://jira.atlassian.com/browse/CONFCLOUD-80887","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a CSS customization is added to the PDF export settings to add a background color or image, the background seems to be under another layer of HTML which makes it hidden.\r\n\r\nUsing the sample code below (taken from [this documentation|https://support.atlassian.com/confluence-cloud/docs/additional-pdf-export-settings/#2.-Background-Images-in--page]):\r\n{code:java}\r\n@media print {\r\n    body {\r\n        background: green !important;\r\n    }\r\n} {code}\r\nWe are getting these results:\r\n\r\n!image-2025-02-24-14-50-38-680.png|width=380,height=490!\r\nh3. Steps to Reproduce\r\n # Add a PDF customization with the code below:\r\n\r\n{code:java}\r\n@media print {\r\n    body {\r\n        background: green !important;\r\n    }\r\n} {code}\r\n\r\n # Export one of the pages to PDF\r\n\r\nh3. Expected Results\r\n\r\nThe background is visible in the PDF document\r\nh3. Actual Results\r\n\r\nThe background is hidden under elements in the resulting PDF file\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-24T13:53:04.000+0000","comments":[{"text":"Hello Atlassian Team,\r\n\r\n \r\n\r\nAfter discussing this issue with Atlassian Support, we confirmed that it is no longer possible to export PDFs with our company logo, and there is currently no workaround.\r\n\r\nI want to emphasize the importance of this feature for us, as we rely on it to generate documents for our customers and stakeholders. Losing this functionality significantly impacts our workflows.\r\n\r\nWe would greatly appreciate any updates on a resolution or potential alternatives.\r\n\r\n \r\n\r\nBest regards,\r\nCaili Fu","author":"Caili Fu"},{"text":"Hello Atlassian Team,\r\n\r\nhow can this issue be in the state \"Gathering Impact\"?\r\nFrom my understanding, this is affecting all customers or no customers.\r\n\r\nEven the support was able to reproduce this issue.\r\n\r\nPlease fix this.\r\n\r\n \r\n\r\nBest Regards,\r\n\r\nBenjamin","author":"BFR"}]},{"summary":"Inserting a base64 image in the Confluence endpoint, and after editing the page, the image disapears from the published page","key":"CONFCLOUD-80863","url":"https://jira.atlassian.com/browse/CONFCLOUD-80863","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen inserting a base64 image into a Confluence page via the [API|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-post], the image disappears from the published page after editing the page in the UI mode.\r\nh3. Steps to Reproduce\r\n * Use the [Confluence API|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-post] to insert a base64 image into a page.\r\n * Publish the page and verify that the image is displayed correctly.\r\n * Edit the page using the native Confluence editor.\r\n * Publish the page again after making any edit.\r\n\r\nh3. Expected Results\r\n\r\nThe base64 image should remain visible on the published page even after any edits are made.\r\nh3. Actual Results\r\n\r\nAfter editing and republishing the page, the base64 image disappears from the published page.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-02-20T18:25:29.000+0000","comments":[{"text":"We are trying to migrate our documentation base to Confluence and this is a critical feature needed. It affects our ability to update documentation.","author":"Aris Ariawan"},{"text":"Hi everyone,\r\nThis is Vinodh from the Confluence team. Thank you for bringing this issue to our attention.\r\n\r\nThis behavior of images being uploaded to Confluence in base64 not being retained intentionally works this way as we do not support uploading images in base64 to Confluence. \r\n\r\nTo set the right expectations, we are closing this bug as ‘Won’t Fix' as we do not have any plans to change the behavior of this feature. If this behavior has a significant impact on your work, please share examples with us to help us understand your use cases when using this feature.\r\n\r\nThank you again for providing valuable feedback to our team! I will be marking it as closed for now.\r\n\r\nVinodh N.","author":"Vinodh Nagarajan"}]},{"summary":"Get footer comment versions API endpoint exhibiting inconsistent behavior","key":"CONFCLOUD-80855","url":"https://jira.atlassian.com/browse/CONFCLOUD-80855","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the [Get footer comment versions|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-version/#api-footer-comments-id-versions-get] endpoint, specific behaviors occur if the page linked to the comment has been deleted:\r\n * If there is only one version of the comment, the endpoint returns an empty response.\r\n\r\n * If multiple versions of the comment exist, the response will exclude the latest version of the comment.\r\n\r\nh3. Steps to Reproduce\r\n # Add a footer comment to a page and save the changes.\r\n # Update the footer comment by using the Edit button on the footer comment and save the modifications.\r\n # Update the same footer comment once more and save the changes.\r\n # Utilize the [Get footer comments for page|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-comment/#api-pages-id-footer-comments-get] REST API endpoint to retrieve the footer comments ID.\r\n # Utilize the [Get footer comment versions|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-version/#api-footer-comments-id-versions-get] endpoint to obtain the versions of the comments, where all versions will be returned.\r\n # Delete the page where the comment was added and retain it in the trash.\r\n # Utilize the [Get footer comment versions|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-version/#api-footer-comments-id-versions-get] endpoint to retrieve the versions of the comments.\r\n\r\nh3. Expected Results\r\n * It is expected that all versions of the comment is returned.\r\n\r\nh3. Actual Results\r\n * If there is only one version of the comment, it returns an empty response.\r\n\r\n * If there are multiple versions of the comment, the response does not include the latest version of the comment.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-20T11:15:29.000+0000","comments":[{"text":"we have the same problem and I filed CES-69092","author":"Calvin So"}]},{"summary":"Deleting space from trash will fail","key":"CONFCLOUD-80839","url":"https://jira.atlassian.com/browse/CONFCLOUD-80839","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe user will try to delete a space from the trash, but after confirming the deletion, there's no status update in the trash to indicate it failed. The space will remain in the trash.\r\n\r\nh3. Steps to Reproduce\r\n# This is more likely to occur with larger Spaces\r\n\r\nh3. Expected Results\r\n# The user should see an accurate progress bar indicating the success of the deletion\r\n# The space should be deleted successfully\r\n\r\nh3. Actual Results\r\n\r\nIt's not clear if the progress bar is active. Refreshing the page will remove it, but the user will still see the Space in the trash.\r\n\r\nSupport intervention is required to determine if the delete task has failed.\r\n\r\nh3. Workaround\r\n\r\nReach out to Atlassian Support for further assistance","createDate":"2025-02-18T16:58:54.000+0000","comments":[{"text":"Ive seen this at least 3 timer over the last month, really a pain under migrations tests/preparing.","author":"Normann P. Nielsen (Netic)"}]},{"summary":"Copy Confluence data migrates whiteboards containing the content in the page tree but not the actual data. ","key":"CONFCLOUD-80835","url":"https://jira.atlassian.com/browse/CONFCLOUD-80835","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCopy Confluence data migrates whiteboards containing the content in the page tree but not the actual data. \r\n\r\nAs per [What product data is copied|https://support.atlassian.com/organization-administration/docs/what-product-data-is-copied/] the whiteboards are not supposed to be copied.\r\nh3. Steps to Reproduce\r\n # Create a Whiteboard on a space on a cloud site.\r\n # Use Copy product data to migrate the space containing the whiteboard to another cloud site.\r\n\r\nh3. Expected Results\r\n\r\nAs per [What product data is copied|https://support.atlassian.com/organization-administration/docs/what-product-data-is-copied/] the whiteboards are not supposed to be copied.\r\nh3. Actual Results\r\n *  The content in the page tree is copied but not the actual data.\r\n\r\n*Source:*\r\n\r\n<Source_site>/wiki/spaces/MIG1/whiteboard/164038?atl_f=PAGETREE\r\n\r\n!image-2025-02-18-13-13-11-645.png|width=513,height=274!\r\n\r\n*Destination:*\r\n\r\n<Destintaion_site>/wiki/spaces/MIG1/whiteboard/106430520?atl_f=PAGETREE\r\n\r\n  !image-2025-02-18-13-13-24-865.png|width=504,height=216!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-18T07:44:38.000+0000","comments":[{"text":"Hi [~e0621f72df9f] . I am an engineer from the Confluence Whiteboards team.\r\n\r\nWhiteboards currently support only one form of migration — Site BRIE (backup and restore).\r\n\r\nCopy Confluence (aka C2C — [see different migration types|https://hello.atlassian.net/wiki/spaces/CCM/pages/3859718123/What+are+the+different+migration+types#Copy-Product-Data-(C2C)]) is currently not supported. We plan to support it when we implement Space Backup/Restore. Our PM ([~9ea5d2862e41]) is the person to speak to around when it is likely that we will prioritise this feature.","author":"Hady Osman"},{"text":"Aligned with whiteboards PM ([~9ea5d2862e41]) that this is not meant to be on the WB's side. Whiteboards do not support space backup/restore yet and so the importing logic in the importer service should not be creating records for these.\r\n\r\nThis requires a fix in the importer service. Changing the component to [Migrations - Space - Import|https://jira.atlassian.com/issues/?jql=project+%3D+CONFCLOUD+AND+component+%3D+%22Migrations+-+Space+-+Import%22]","author":"Jaro"}]},{"summary":"Archiving a Confluence page tamper the page version history","key":"CONFCLOUD-80830","url":"https://jira.atlassian.com/browse/CONFCLOUD-80830","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe UI action (archive page) modifies the 'createdAt' field of the last edition when checked against the response request of the following endpoint [Get page by id .|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-get]\r\nh3. Steps to Reproduce\r\n # Create or choose a page\r\n\r\n # Publish it\r\n\r\n # Get the page by id with [The Confluence Cloud REST API|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-get] , use header {{include-versions}} with the boolean value {{{}true{}}}; check the field {{createdAt}} from the most recent version.\r\n\r\n # Go back to the page in Confluence, archive the page\r\n\r\n # Re-do step 3\r\n\r\nh3. Expected Results\r\n\r\nChanges in the status only and createdAt unchanged.\r\n\r\n \r\nh3. Actual Results\r\n\r\n \r\n\r\nThe createdAt field changes.\r\n(Seems like it's having a modifiedAt or lastModified behaviour)\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-17T17:32:17.000+0000","comments":[{"text":"At first glance it seems this bug could corrupt content audit trails broadly and/or influence how Guard Detect and Guard Premium might treat Confluence content, as well as influence Legal Discovery against Confluence content that customers are trying to perform (archived pages appear as Created At within the discovery timeframe, instead of correctly outside of it). And finally there are several third party vendors that rely on page and version metadata to manage content, including Midori Better Archiving, B1NARY Breeze Content Management, Bordant's Automatic Archiving, Ricksoft's Pages Manager... likely others.\r\n\r\nAre you sure that overwriting the version metadata is currently _correctly_ set at such a Low priority and Minor Sev? /cc @[lmehrkens@atlassian.com|mailto:lmehrkens@atlassian.com] @[mtse@atlassian.com|mailto:mtse@atlassian.com] ","author":"Nick Wade -Opus Guard-"},{"text":"Checking back in a month on. The priority remains low and the severity minor, despite what I can reasonably guesstimate is at minimum 1,550+ customers affected (the publicly available Cloud installs numbers of Midori Better Content Archiving + other archiving apps in Marketplace) HOWEVER this issue affects any customer that Archives any page in Confluence Cloud. Affected customers would be any Confluence Cloud customer site that has ever called Archive Page more than 0 times. This seems likely to be a lot. \r\n\r\nAgain, with broad exposure, I'm struggling to understand the Low / Sev 3 and hiding in JAC state of this report.","author":"Nick Wade -Opus Guard-"}]},{"summary":" content tree throws generic error when updating title of whiteboard over 60 characters","key":"CONFCLOUD-80815","url":"https://jira.atlassian.com/browse/CONFCLOUD-80815","type":"Bug","priority":"","description":"you can update the whiteboard title through the content tree via {{...}} → {{{}rename{}}}.\r\n\r\nThe max size of a whiteboard title is currently 60 characters currently. \r\n\r\nThis means you can type over 60 chars while renaming a whiteboard, and if you try to save it, you just get a generic: \"something went wrong\" error flag.\r\n\r\nIt would be great to increase the limit from 60 chars while editing a whiteboard title, or provide a better error message for exceeding the max title length. ","createDate":"2025-02-14T11:37:26.000+0000","comments":[]},{"summary":"Confluence database jira custom field value is not showing up","key":"CONFCLOUD-80785","url":"https://jira.atlassian.com/browse/CONFCLOUD-80785","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile using confluence Database with field type \"Jira issue details\" custom fields data is not showing up.\r\nh3. Steps to Reproduce\r\n # Create a Jira project\r\n # Create a Jira issue with custom fields\r\n # Go to the confluence site and Create a confluence database.\r\n # Create a column and select the field type as \"Jira issue details\"\r\n # Type manually the custom field name in \"Jira issue detail\"\r\n\r\nh3. Expected Results\r\n\r\nThe custom field values should show up in the database column\r\nh3. Actual Results\r\n\r\n\r\n\r\nThe custom field is shown blank\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-11T11:16:35.000+0000","comments":[{"text":"Also, quick search only provides results of a Ctrl+F search, which is really weak. Table can have hundreds of rows and this searches only the ones that had been cached.","author":"petr.mazurek"}]},{"summary":"Deleted user groups breaks page restriction dialog","key":"CONFCLOUD-80781","url":"https://jira.atlassian.com/browse/CONFCLOUD-80781","type":"Bug","priority":"","description":"h3.  Issue Summary\r\n * Deleted user groups don't show up in the page restriction dialog.\r\n * But still appear to lock the page, without the option to remove them individually.\r\n\r\nh3. Steps to Reproduce\r\n # Add a \"User\", and a \"User group\" to a page restriction in Confluence.\r\n # Delete the \"User group\" from the site.\r\n # Remove the User from the Space's Restricted Pages list.\r\n # Check on the page using Admin Key\r\n # The restriction icon will still be red/locked.\r\n ** !RESTRICTION_ICON.png|thumbnail!\r\n # Click on the icon, and the pop-will show no \"View\" restrictions. (x)\r\n ** !RESTRICTION_POP_UP.png|thumbnail!\r\n # Attempt to clear the restriction by selecting \"Anyone in this space can edit\", and the changes can't be applied. (x)\r\n ** !RESTRICTION_CLEAR.png|thumbnail!\r\n # We can only clear the restriction by adding another \"User\", or \"User group\" in, and then switch back to \"Anyone in this space can edit\". (x)\r\n ** !RESTRICTION_ADD.png|thumbnail!\r\n\r\nh3. Expected Results\r\n * Deleted \"User groups\" should {*}either{*}:\r\n ** Not apply to the page, or\r\n ** If they apply, should be removable via the page restriction dialog.\r\n\r\nh3. Actual Results\r\n * Deleted \"User groups\" continue to restricts pages\r\n * And can't be directly cleared from the page restriction dialog.\r\n\r\nh3. Workaround\r\n * Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-11T06:44:34.000+0000","comments":[]},{"summary":"Confluence Databases: Scroll bar jumping and screen flickering when user is scrolling on Database set on 'Card layout'","key":"CONFCLOUD-80775","url":"https://jira.atlassian.com/browse/CONFCLOUD-80775","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOn a Confluence Database page, when there are multiple entries, each containing an image; if you set the layout to\"Card\" and scroll the page, after a few lines, the scrolling automatically starts to hop, and the screen flickers.\r\n\r\nThis is reproducible on Data Center: YES\r\nh3. Steps to Reproduce\r\n # Create a Confluence Database with a Name, Image, Type, Date, Tag, Page link, User fields\r\n # Add the necessary data under these fields\r\n # Duplicate the first entry multiple times\r\n # Set the layout on 'Card'\r\n # Scroll the page\r\n\r\nh3. Expected Results\r\n\r\nThe page scrolls to the bottom without any trouble.\r\nh3. Actual Results\r\n\r\nAfter a few lines, the scrolling automatically starts to hop and the screen flickers.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-10T15:46:44.000+0000","comments":[{"text":"We are affected by this bug and it is very impactful for us. The entire bottom section of a database is unusable. Please fix this bug as soon as possible.","author":"Filip Labarque"},{"text":"This is coded as minor but it makes card layout completely unusable.","author":"Todd Skelton"},{"text":"[~e33a5c9c5845] bringing this issue to your radar (as you were the assignee for the same issue that you have marked resolved).\r\n\r\nWould you be able to help expedite and reprioritize this request since it's been flagged as higher priority by multiple users in this and previous tickets?\r\n\r\nThank you!\r\n\r\n ","author":"Paul Song"},{"text":"Hello. My team is heavily affected by this bug. We have about 4 databases which is used as a troubleshooting system, one with almost 100 entries and only about 30-40% is accessible at times due to the bug.\r\n\r\nWould it be possible to bump up the priority of this ticket?","author":"Denniz Elci"},{"text":"This is also affecting are ability to use the Confluence databases in the card layout. It also does not allow you to take it off of card layout. Is there an estimation on when this will be resolved?","author":"Julian Pazynski"},{"text":"Hi everyone,\r\n\r\nThis is Patrick from the Databases team. The team is working on a fix for this issue, and will provide an update when it's available. Thank you for your patience!","author":"Patrick Huang"}]},{"summary":"Trying to manage Space Watchers with large amount of entries times out the UI","key":"CONFCLOUD-80743","url":"https://jira.atlassian.com/browse/CONFCLOUD-80743","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen attempting to manage Watchers from a Space, if there are a large amount of Watchers on the Space the UI element can time out and throw a generic error. \r\n\r\n!Screenshot 2025-02-05 at 16.23.43.png|width=205,height=107!\r\nh3. Steps to Reproduce\r\n * On any page, click Watcher icon.\r\n * On tooltip popup, click 'Mange Watchers'\r\n * Change selection from Page to Space.\r\n ** If there are a large number of Watchers, the UI will time out. \r\n\r\nh3. Expected Results\r\n\r\nUI will load Space Watchers and allow removal and addition of watchers. \r\nh3. Actual Results\r\n\r\nUI times out performing backend permissions checks.\r\n{code:java}\r\n[{errors: [{,…}], data: {spaceWatchers: null}}]\r\n 0: {errors: [{,…}], data: {spaceWatchers: null}} \r\n  data: {spaceWatchers: null} \r\n   spaceWatchers: null \r\n\r\nerrors: [{,…}] \r\n 0: {,…}\r\n  extensions: {classification: \"DataFetchingException\"}\r\n   locations: [] \r\n   message: \"Exception querying the remote GraphQL service: java.net.SocketTimeoutException: 10,000 milliseconds timeout on connection http-outgoing-444618 [ACTIVE]\" \r\npath: [\"spaceWatchers\"] \r\n 0: \"spaceWatchers\"  {code}\r\nh3. Workaround\r\n\r\nYou can leverage the [Remove Space Watch|https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-content-watches/#api-wiki-rest-api-user-watch-space-spacekey-delete] API call to lower the number of watchers on the Space. Once the number is low enough, the UI should recover. ","createDate":"2025-02-05T21:33:00.000+0000","comments":[]},{"summary":"Using the shortcut to add an image in Confluence Cloud allows selection but fails without permissions","key":"CONFCLOUD-80722","url":"https://jira.atlassian.com/browse/CONFCLOUD-80722","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nIn Confluence Cloud, when a user lacks permissions to add or delete attachments in a space, they cannot upload files while editing a page. The editor menu bar option for \"Add Image, Video or file\" is not visible.\r\n\r\n(!) However, when using the shortcut (/image) in the editor, the option appears but fails to function, leading to user confusion.\r\nh3. Environment\r\n\r\nConfluence Cloud\r\nh3. Steps to Reproduce\r\n # Ensure the user does not have permission to add or delete attachments in a space.\r\n # Open a page in edit mode.\r\n # Attempt to add an image via the editor menu bar (option is not available).\r\n # Use the /image shortcut to add an image.\r\n\r\nh3. Expected Results\r\n\r\nWhen a user without attachment permissions attempts to add an image using the shortcut, they should receive a warning about their lack of permissions, or the shortcut should not be available.\r\nh3. Actual Results\r\n\r\nThe shortcut option appears, and users can attempt to add an image, but the action fails without any warning, causing confusion.\r\nh3. Workaround\r\n\r\nThere is no workaround available; Users need to be informed about their permissions before attempting to use the shortcut.\r\nh3. Notes\r\n\r\nThe issue causes confusion for users who are unaware of their permission limitations. Enhancing the user interface to prevent the appearance of the shortcut, or providing a clear warning message, *would improve the user experience.*","createDate":"2025-02-04T16:35:38.000+0000","comments":[]},{"summary":"Unable to edit gadgets - the preview is showing blank with no options to edit","key":"CONFCLOUD-80681","url":"https://jira.atlassian.com/browse/CONFCLOUD-80681","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsing Jira Legacy Editor, when adding macros that uses \"Preview\", the preview remains blank with no options to edit.\r\nIt was observed so far for \r\n* Filter results macro\r\n* ‘Issue Statistics’ Macro\r\n* Sprint Health gadget\r\n* Pie Chart gadget\r\n* ‘Labels Gadget’ Macro\r\n* Activity Stream’ Macro\r\n* ‘Days Remaining in Sprint Gadget’ Macro\r\n* ‘Quick links’ Macro\r\n* ‘Projects’ Macro\r\n* ‘Jira Issues Calendar’ Macro\r\n\r\nh3. Steps to Reproduce\r\n # Create a page using Legacy Editor\r\n # Add a macro, for instance, \"Sprint Health\"\r\n\r\nh3. Expected Results\r\nWe should see the preview and configure the options\r\n\r\nh3. Actual Results\r\nPreview remains empty. No options to edit \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-30T19:39:39.000+0000","comments":[{"text":"This issue is impacting our ability to generate 2024 end of year reports OR create 2025 reports. Please prioritize this issue asap.","author":"Nicole Colyer"},{"text":"One of the objectives I have this year is to create performance and quality statistics. I picked Confluence to be able to showcase our Jira Stats. But now I can't even work on these reports anymore because of this bug. Please fix this ASAP.\r\n\r\nI have an appointment this week to showcase all I worked on in the past month for the metrics. And if this bug is still there it's not going to make me look super good to the executives at my company.\r\n\r\n \r\n\r\nEDIT: If this issue affects you or your company in any way. Please vote on this issue to give us a small chance of it getting fixed.","author":"Danny Labrie"},{"text":"Hi there - this ticket was updated 12hrs ago suggesting that the due date of resolution was next week (11 Feb). Could the assignee confirm whether this is correct please? Thanks\r\n\r\n  \r\n|Changes by *Rebekkah Dorhout* on 04/Feb/2025 12:31 AM|\r\n| |\r\n| |\r\n|Due Date:|-28- 11 /Feb/2025|\r\n|","author":"Sam Balti"},{"text":"On our instance it neither works on the new editor. As far the following Gadgets aren't editable on the UI:\r\n * Average Time In Status Gadget\r\n * Workload Pie Chart Gadget\r\n * Assigned to Me Gadget\r\n * Average Age Chart Gadget\r\n * Created vs Resolved Gadget\r\n * Filter Results Gadget\r\n * Heat Map Gadget\r\n * Issues in Progress Gadget\r\n * Labels Gadget\r\n * Pie Chart Gadget\r\n * Project Gadget\r\n * Quicklinks Gadget\r\n * Recently Created Chart Gadget\r\n * Road Map Gadget\r\n * Issue Statistics Gadget\r\n * Time Since Chart Gadget\r\n * Two Dimensional Statistics Gadget\r\n * Activity Stream Gadget\r\n * Agile Wallboard Gadget\r\n * Sprint Burndown Gadget\r\n * Sprint Days Remaining Gadget\r\n * Sprint Health Gadget\r\n * Version Report Gadget\r\n\r\nHowever you can update/modify the page using the REST API and enter the correct macro definition. \r\n\r\n*Workaround:*\r\n # Get the Confluence Page: [GET /wiki/api/v2/pages/\\{pageId}?body-format=storage&version|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-get]\r\n # Your Page Content will be $.body.storage.value\r\n # Add the preferences macro parameter to your Gadget macro: (please note that this parameter is different for most of the macros mentioned above. I was able to get this information using a datacenter instance and check what will be stored)\r\n\r\n{code:java}\r\n<ac:parameter ac:name=\\\"preferences\\\">projectOrFilterId=project-10110&amp;statuses=1&amp;periodName=daily&amp;yaxisPeriod=hourly&amp;daysprevious=300&amp;isConfigured=true&amp;refresh=false</ac:parameter> {code}\r\n\r\n # Updating the Confluence Page: [PUT /wiki/api/v2/pages/\\{pageId}|https://developer.atlassian.com/cloud/confluence/rest/v2/api-group-page/#api-pages-id-put]","author":"Tobias Meyer"},{"text":"What will these macros be replaced with? There are additional macros and gadgets that are impacted including: Heat Maps, Resolution Time, Time Since Chart, Average Time in Status, Time to First Response, Average Age Chart, Created vs. Resolved Chart......ETC. Basically any macro that integrates with Jira. We have purchased Confluence BECAUSE of the integration with Jira and it's reporting capabilities. \r\n\r\nIf these macros are no longer going to be supported, what will the integration look like moving forward? ","author":"Nicole Colyer"},{"text":"Hello [~a7fc8e29f8c8]\r\n\r\nThe statements on this [page |https://support.atlassian.com/confluence-cloud/docs/use-gadgets-to-add-dynamic-content/]are contradictory. On the one hand, it is written that the Jira gadgets will no longer be supported from 26.09.2022. However, the following sentence states that existing gadgets will continue to work and that new gadgets can also be added. \r\n\r\n \r\n{panel:title=As of September 26, 2022, Confluence will no longer support Jira gadgets in Confluence. }\r\nAny existing instances of these gadgets will continue to work and be available to add to a Confluence page from the insert menu and using the slash command.\r\n{panel}\r\nNow Atlassian has changed something so that the gadgets can no longer be edited, which makes them useless. My expectation is that if Atlassian breaks something, they will fix it or provide an equivalent alternative. Regardless of whether the support is there or not!\r\n\r\nYour original comment:\r\n\r\n_Since the impacted tools listed under the issue summary are all gadgets no longer supported in Confluence, this ticket will not be investigated._\r\n\r\n ","author":"Tobias Meyer"},{"text":"This has been closed as \"won't fix\" without any official workaround or description of widgets/gadgets replacing that functionality. This is critical, hundreds of charts/gadgets cannot be edited/replaced.","author":"David Diaz"},{"text":"Hi Team,\r\n\r\n \r\n\r\nWe are trying to use Agile Wallboard option in our Confluence Cloud pages and its not rendering anything to add the details or boards manually, please help us in resolving the issue. Please add this feature.","author":"Siddarth Goje"},{"text":"Hi Everyone,\r\n\r\nIf I can at least provide one workaround which is specifically for the {*}Jira Filter Results Gadget/Macro{*}. If you edit a confluence page and you paste the link to a Jira filter. It will automatically transform into a Filter Result view. Where you can configure the columns you want the filter view to display.\r\n\r\nThat being said. I have no clue if there's a way to use \"smartlinks\" to get the equivalent for all the various other gadgets like 2D Charts, average resolution time, pie charts, and all of that.\r\n\r\nLike others we have countless 2D Charts to collate performance and quality metrics. But now I don't know how to have a simple chart that shows tickets resolved by resolution & priority. Something that used to be so simple.","author":"Danny Labrie"},{"text":"[~b76ba7f11b60] - really useful. Have you or anyone on this thread been able to work out how to bring in a Jira text field within a filter (eg Latest Status) with a line break? Filters unfortunately display without a line break, therefore anything spanning two lines of text doesn't display!\r\n\r\nAppreciate any insight from the masses. Thanks.","author":"Sam Balti"},{"text":"It is possible to create a Jira Dashboard with a Gadget - For instance:\r\n* Add the \"Issue Statistics\" gadget and configure it as you previously did with the Confluence Gadget.\r\n* Adjust the Dashboard layout to fill the entire page if desired.\r\n* Publish the Dashboard.\r\n* At the top right corner of the Dashboard, you'll find a link icon. Click this icon and copy the URL.\r\n* Paste the URL into your Confluence page. It will appear as a Smart Link embedded in the page.\r\n","author":"Murakami"},{"text":"For some gadgets, another workaround is to use the option to share *Reports*:\r\n* On Jira, open the Project and reach the \"Reports\" option;\r\n* Select one report, for instance, for \"Burndown Chart\";\r\n* Hit the \"Share\" icon at the top right corner and use the \"Copy link\" option;\r\n* Paste the URL in a Confluence Page - It will be an embedded Smart Link.\r\n\r\nNote: Not all Reports contain the Share link.","author":"Murakami"}]},{"summary":"Emojis on page titles appear as question mark when searching for a page in the side bar","key":"CONFCLOUD-80628","url":"https://jira.atlassian.com/browse/CONFCLOUD-80628","type":"Bug","priority":"","description":"h3. Issue Summary\r\n{panel:title=UPDATE 11-02-2025}\r\nThe bug was previously reported for Safari only but this has recently surfaced on all browsers\r\n{panel}\r\nConfluence allows users to use emojis directly from their keyboards but on Safari, they appear as question marks when they are displayed as a search result when searching for pages in the page tree:\r\n\r\n!image-2025-01-24-15-35-34-276.png|width=454,height=219!\r\nh3. Steps to Reproduce\r\n # Create a new Confluence page with the following title: \"test emoji \uD83E\uDD33\"\r\n # Publish the page\r\n # On the page tree on the side bar, search for the same page\r\n\r\nh3. Expected Results\r\n\r\nThe page shows up in the search results\r\nh3. Actual Results\r\n\r\nIn Safari, the page still shows up but the emoji is showing up as a question mark\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-24T14:37:12.000+0000","comments":[]},{"summary":"Fix Jira Issue macros in Confluence cloud","key":"CONFCLOUD-80615","url":"https://jira.atlassian.com/browse/CONFCLOUD-80615","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nThere are Jira issue macros with URLs such as\r\n{noformat}\r\n<ac:structured-macro ac:name=\"jiraissues\" ac:schema-version=\"1\" ac:macro-id=\"ca8f02ed-018d-43c6-a8da-xxxxxxxxxxxx\">\r\n    <ac:parameter ac:name=\"cache\">off</ac:parameter>\r\n    <ac:parameter ac:name=\"count\">true</ac:parameter>\r\n    <ac:parameter ac:name=\"title\">Umgesetzte &Auml;nderungen</ac:parameter>\r\n    <ac:parameter ac:name=\"url\"><ri:url ri:value=\"https://{cloud-url}.atlassian.net/sr/jira.issueviews:searchrequest-xml/21119/SearchRequest-21119.xml?tempMax=1000\" /></ac:parameter>\r\n    <ac:parameter ac:name=\"height\">250</ac:parameter>\r\n</ac:structured-macro>\r\n\r\n{noformat}\r\nEven after updating the base URL as you can see in the above metadata, the macros is still not fixed.\r\nh3. Observation\r\n\r\nWhen visiting the partially fixed link from the storage format\r\n{code:java}\r\nhttps://{cloud-site}.atlassian.net/sr/jira.issueviews:searchrequest-xml/21119/SearchRequest-21119.xml?tempMax=1000{code}\r\nWe get an \"XSRF Security Token Missing\", this may be due to an OAuth error. In Jira and Confluence Cloud, we regularly run health checks to ensure that the OAuth connection is secure. Any time Jira searches are run from outside Jira (Confluence is outside Jira), then a valid, non-expired token is required. To replicate, if we go to:\r\n{noformat}\r\n> https://{cloud-site}.atlassian.net/issues/?filter=21119\r\n> Then click \"Export\" (top right corner)\r\n> Then click \"Export XML\", and then we'll see a valid search.\r\n> If we inspect the URL bar, you will see:\r\n> https://{cloud-site}.atlassian.net/sr/jira.issueviews:searchrequest-xml/21119/SearchRequest-21119.xml?atl_token=549xxxxxxxxxxxxxxxxxxxxxxxxxxxx48_lin&tempMax=1000{noformat}\r\nThe addition of an \"atl_token\" parameter. This is missing from the Jira issue macro in Confluence - it is not able to perform an authenticated valid search as it is missing a token.\r\nh3. Next Steps:\r\n\r\nThere is no known workaround.","createDate":"2025-01-23T08:44:41.000+0000","comments":[{"text":"Hi [~802848781776],\r\n\r\ngetting the email notification of the comment that's not visible to everyone anymore...\r\n{quote}\r\nThe root cause is most likely that the customer is using the legacy XML endpoint as the search URL. Please try changing it to the REST API endpoint.  \r\n{quote}\r\n\r\nThe so called legacy XML endpoint is also used when someone goes to Jira search and click on Export as XML, etc. If the jiraissues marco itself would work (without converting it as jira macro instead) just with another url, what's the url that should be used instead?\r\n\r\nRegards,\r\nTim\r\n\r\n","author":"Tim Eddelbüttel"}]},{"summary":"Smart value {{page.url}} is not correct when site is using a custom domain","key":"CONFCLOUD-80588","url":"https://jira.atlassian.com/browse/CONFCLOUD-80588","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * Smart value \"{{{}page.url{}}}\" can be used in Confluence automation\r\n * custom domains can be configured to provide a custom URL to access Confluence sites. For [https://example|https://example/] wiki.confluence.example.com/wiki can be configured for site [https://example.atlassian.net/wiki]\r\n * When the above smart value is used in Confluence automation its printing wrong URL as [https://wiki.confluence.example.com/spaces/EXCEL/pages/281739275] rather than [https://wiki.confluence.example.com/wiki/spaces/EXCEL/pages/281739275]\r\n\r\nThis is reproducible on Data Center: NA\r\nh3. Steps to Reproduce\r\n\r\nPrerequisite:\r\n * Confluence automation rule that generates the value using smart value \"{{{}page.url\"{}}}\r\n * A site with custom URL configured for Confluence Cloud.\r\n\r\n # Create an automation rule\r\n ## \"When Page published\"\r\n ## If user condition, the user who triggered the user event is -> Your name\r\n ## Then send email to email address with body \"{{{}page.url{}}}\"\r\n # Create a page to trigger the above automation rule\r\n # Check the link thats sent in the email.\r\n\r\n!image-2025-01-21-15-02-56-899.png|width=664,height=284!\r\nh3. Expected Results\r\n\r\nThe link in email should be [https://wiki.confluence.example.com/wiki/spaces/EXCEL/pages/281739275] \r\nh3. Actual Results\r\n\r\nThe link in the email is\r\n\r\n[https://wiki.confluence.example.com/spaces/EXCEL/pages/281739275]\r\n\r\n!image-2025-01-21-15-04-22-240.png|width=499,height=185!\r\nh3. Workaround\r\n\r\nIt might be possible to use the below workaround to print the page URL\r\n\r\n{code}https://wiki.confluence.example.com/wiki/spaces/{{space.key}}/pages/{{page.id}}{code}","createDate":"2025-01-21T04:04:55.000+0000","comments":[]},{"summary":"Product Link tool updates the target of links on Confluence Pages, but not the display text of the link","key":"CONFCLOUD-80539","url":"https://jira.atlassian.com/browse/CONFCLOUD-80539","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCurrently, the Product Link fix tool on Cloud updates the target of links in Confluence pages, but not the display text of the link, like the following format;\r\n\r\n{noformat} <a href=\"<DestBaseURL>/wiki/download/attachments/31227906/Test%20Document%202.docx?api=v2\">\r\n<SourceBaseURL>/download/attachments/150306904/Test%20Document%202.docx?api=v2</a>{noformat}\r\n\r\n\r\n\r\nh3. Steps to Reproduce\r\n1. Post Confluence Migration, run the Product Links tool\r\n2. Links in the format above should have the display text updated, however only the link in the anchor tag is updated.\r\n\r\nh3. Expected Results\r\nThe Product Link Fix Tool should be capable of display text of links.\r\n\r\nh3. Actual Results\r\nCurrently, The Product Link Fix Tool is not updating display text in links\r\n\r\nh3. Workaround\r\nTo resolve this type of links issue, please reach out to Atlassian support for assistance.","createDate":"2025-01-08T16:53:28.000+0000","comments":[]},{"summary":"Deleting a space causes the automation rule's scope to change from single space to global","key":"CONFCLOUD-80515","url":"https://jira.atlassian.com/browse/CONFCLOUD-80515","type":"Bug","priority":"","description":"h3. Issue Summary\r\nDeleting a space causes the automation rule's scope to change from single space to global.\r\n\r\nh3. Steps to Reproduce\r\n# Create an automation rule and set its scope to a *single space*\r\n# Set the trigger to *Scheduled*;\r\n# Add a *Page branch*, example: Last updated more than 5 months ago;\r\n# Add the *Send email* action to something like this: \"This is a reminder to update your content titled '{{page.title}}' at {{page.url}}. It has not been updated in the last 5 months.\";\r\n# Turn on the rule and wait for it to run on its schedule.\r\n-- You should receive an email with pages matching the criteria you set in step 3, only pages from a single space.\r\n# *Delete the space* where the rule is;\r\n# Wait for the rule to run on its next schedule.\r\n\r\nh3. Expected Results\r\nThe automation rule shouldn't run(as the space is deleted) or its scope should remain on the single space you set.\r\n\r\nh3. Actual Results\r\nThe automation rule's scope is changed from single space to global and your *Page branch* criteria expands to all space, like a Global scope.\r\n\r\nh3. Workaround\r\n[Restore the space|https://support.atlassian.com/confluence-cloud/docs/delete-a-space/#Restore-a-space].\r\n","createDate":"2025-01-09T20:51:53.000+0000","comments":[]},{"summary":"Restricted pages not listed in the Space's Restricted Pages list","key":"CONFCLOUD-80480","url":"https://jira.atlassian.com/browse/CONFCLOUD-80480","type":"Bug","priority":"","description":"h3. User Problem\r\n# When a \"user group\" that's used for page restriction is deleted;\r\n** The restriction from the group still applies to the page.\r\n# The restriction does not show up in the Space's Restriction list\r\n** !Space_Restricted_Content.png|thumbnail!\r\n** Making it impossible for Space admins to even know that they exist, and how to fix them.\r\n\r\nh3. Steps to Reproduce\r\n# Add a page view restriction to a page in Confluence, making sure to add a \"user group\" into the list of exemption.\r\n# Proceed to delete the \"user group\" from the site's user/groups management.\r\n** {code:java}https://admin.atlassian.com/s/<SITE-ID>/groups{code}\r\n# Check on the Space's restriction list;\r\n** {code:java}https://<SITE-NAME>.atlassian.net/wiki/pages/listpermissionpages.action?key=<SPACE_KEY>{code}\r\n** The \"user group\" will no longer be visible/listed. (x)\r\n# Remove the remaining restriction for the page from the restriction list\r\n** {code:java}https://<SITE-NAME>.atlassian.net/wiki/pages/listpermissionpages.action?key=<SPACE_KEY>{code}\r\n# Check on the page and it will still be restricted (x)\r\n** !User_2_Page.png|thumbnail!\r\n# *Any Space admin:* Check on the restriction list, and there'll be no pages listed (x)\r\n** !Space_Restricted_Content.png|thumbnail!\r\n\r\nh3. Expected Results\r\n* Restricted pages should be listed in the Space's restricted pages list, with the option for Space admins to remove them.\r\n\r\nh3. Actual Results\r\n* Deleted user groups are not listed in the page's restriction option, or Space's Restriction list.\r\n* Making it impossible to unrestrict these pages without Site admins assistance using Admin Key (Confluence Premium only)\r\n\r\nh3. Current Workarounds\r\n# *Option #1* -  Contact [Atlassian support|https://support.atlassian.com/contact/]\r\n** Referencing this bug, CONFCLOUD-80480, to apply a temporary fix which will display deleted user groups in a Space's restricted pages list\r\n** {code}https://<SITE-NAME>.atlassian.net/wiki/pages/listpermissionpages.action?key=<SPACE-KEY>{code}\r\n# *Option #2* - For Premium/Enterprise customers only\r\n** Use the [admin key|https://support.atlassian.com/confluence-cloud/docs/bypass-access-restrictions-on-a-page-with-admin-key/] feature to view and remove all restrictions from a page.","createDate":"2025-01-08T04:12:45.000+0000","comments":[{"text":"As noted by our support team on this ticket, there is now a viable workaround that allows customers who wish to see deleted groups in the Restricted pages list for a space. You can contact Atlassian support referencing this ticket, CONFCLOUD-80480, to apply a fix which will display deleted user groups in a space's Restricted pages list.\r\n\r\nShowing deleted groups on this screen is not the intended product experience, therefore, we are closing this ticket out.","author":"Marie Casabonne"}]},{"summary":"Disappearing Column in Jira Issue Macro when there are duplicate custom field names","key":"CONFCLOUD-80466","url":"https://jira.atlassian.com/browse/CONFCLOUD-80466","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA column disappears unexpectedly in the Jira issue macro on Confluence pages if a Column is using a Jira custom field with duplicate name and different context.z\r\nWe can observe that although the macro preview shows the correct value, the source code shows that *all custom fields with the same name have been selected for the same column.*\r\nFor instance:\r\n{code:java}\r\nproperties\":\\{\"columns\":\r\n[\\{\"key\":\"issuetype\"\\},\r\n\\{\"key\":\"key\"\\},\r\n\\{\"key\":\"summary\"\\},\r\n\\{\"key\":\"status\"\\},\r\n\\{\"key\":\"resolutiondate\"\\},\r\n\\{\"key\":\"customfield_10001,customfield_10124\"\\}]\\}   <= it should only have customfield_10124\r\n{code}\r\nh3. Steps to Reproduce\r\n\r\n1. Create two custom fields with the same name, for instance \"dupField\" One may be a selection list, and the other a checkbox;\r\n2. The checkbox was added to the screens used by project \"Test1\", the Selection list for the project \"Test2\";\r\n3. Create some issues for the 'Test1\" project, with values for the \"dupField\";\r\n4. In Confluence, create a new page and add the Jira Issues Macro;\r\n5. Use a JQL to select issues from the \"Test1\" project, and select the \"dupField\" column;\r\n6. Publish the page, observe that the column \"dupField\" is correct;\r\n7. In Jira, edit each \"dupField\" and change the context from Global to the specific project - So, dupFields checkbox with context to the project \"Test1\" and dupFields Selection list with context to the project \"Test2\";\r\n8. Refresh Confluence page\r\nh3. Expected Results\r\n\r\nNo changes, the dupFields column is still visible.\r\nh3. Actual Results\r\n * The column is no longer visible\r\n * Using the view mode, when reaching the \"Columns\" icon, we can observe that the Custom Field is checked. Observe that when we opened this Columns window, the column \"dupFields\" was visible again. If we refresh the results, the column disappears again.\r\n * Using the edit mode, when reaching the \"Columns\" icon, we can observe that the Custom Field is checked. Observe that when we opened this Columns window, the column \"dupFields\" was visible again. if we run the search, the column disappears.\r\n\r\nh3. Workaround\r\n * Use Jira Legacy Macro. Select both dupFields and observe which column returned value;\r\n * Remove the other dupFields that did not show values.","createDate":"2025-01-03T20:29:56.000+0000","comments":[{"text":"Although a workaround has been noted, having to modify many Confluence pages that are using the Jira Issues macro and replace them with the Jira Legacy macro isn't a very acceptable workaround. And, once this is resolved, we'll then have to go back and update all of the pages with the Jira Issues macro since the report results from that macro offers the preview option and the Jira Legacy macro results do not.","author":"Melanie Dixon"}]},{"summary":"Home Page search box not working for Archived Spaces with custom Space Key","key":"CONFCLOUD-80429","url":"https://jira.atlassian.com/browse/CONFCLOUD-80429","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSetting a Space Home Page is possible by navigating to {*}Space Settings > Space Details{*}, searching for a page under Home Page and clicking {*}Save{*}.\r\n\r\nThe Home Page search box does not display any results under a specific condition:\r\n * the Space is Archived\r\n * the Space Key is changed from it's original value\r\n\r\nh3. Steps to Reproduce\r\n\r\nSteps:\r\n # Create a new Space\r\n # Navigate to *Space Settings > Space Details*\r\n # Search for an existing page under Home Page (works)\r\n # Change the Space Key to a new value and click *Save*\r\n # Navigate to *Space Settings > Archive Space*\r\n # Click the *Archive Space* button\r\n # Navigate back to Space Details\r\n # Search for an existing page under Home Page (does not work)\r\n\r\nh3. Expected Results\r\n\r\nSpace Admins can search for existing pages and set a new Space Home Page.\r\nh3. Actual Results\r\n\r\nThe Space Home Page search box does not display any results with a \"No options\" message.\r\nh3. Workaround\r\n\r\nThe available workarounds are:\r\n # Restore the Space from *Space Settings > Archive Space > Restore Space*\r\n # Change the Space Key back to its original value from *Space Settings > Space Details > Space Key*\r\n\r\nPS: revery the changes done once the Space Home Page is changed.","createDate":"2024-12-26T00:24:44.000+0000","comments":[]},{"summary":"PDF export for large spaces consists unselected pages","key":"CONFCLOUD-80428","url":"https://jira.atlassian.com/browse/CONFCLOUD-80428","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe PDF export feature for large spaces is not functioning correctly. When a user selects a specific page and its child pages for export, the resulting PDF includes pages that were not selected.\r\nh3. Steps to Reproduce\r\n # Access a large space. A space with at least 10,000 pages will suffice.\r\n # Got to space settings -> General -> Export space\r\n # Select PDF Export format -> Choose 'Select what to export'\r\n # Unselect the root page selection and do a search on the page(Cmd+F) and search for any page.\r\n # Select only this page and its child pages.\r\n # Click on Export\r\n # Download and verify the exported PDF file.\r\n\r\nh3. Expected Results\r\n\r\nExport the selected page and its child pages.\r\nh3. Actual Results\r\n\r\nExported results contain the pages that were not selected.\r\nh3. Workaround\r\n\r\nCopy a page, along with its child pages, to another Confluence space, which can either be newly created or contain a limited number of pages. Then, export the pages to PDF from this new Confluence space.","createDate":"2024-12-25T15:14:25.000+0000","comments":[]},{"summary":"Links in exported PDF is redirecting back to Cloud instances","key":"CONFCLOUD-80393","url":"https://jira.atlassian.com/browse/CONFCLOUD-80393","type":"Bug","priority":"","description":"h3. Summary\r\nThe links in the PDF (space export), is redirecting back to Cloud Instances. \r\n\r\nh3. Steps to Replicate\r\n# Export a space that contains a few pages to PDF\r\n# In the PDF file, click on the links to the page\r\n# It will redirect back to Cloud Instance\r\n\r\nh3. Expected Result\r\nThe link should bring the user to the page within the PDF\r\n\r\nh3. Current Result\r\nThe link redirects the user back to Cloud instance\r\n\r\nh3. Workaround\r\nNone","createDate":"2024-12-19T10:21:11.000+0000","comments":[{"text":"I also have the same issue...","author":"David Lee"},{"text":"Because of this issue, I am still unable to deliver the documentation to my customer. This is a very critical bug that needs to be fixed ASAP. ","author":"Sanjivani Iyer"},{"text":"The same problem for me, as Sanjivani! Pls fix urgently...","author":"David Lee"},{"text":"Despite providing the business justification in the comment on Feb. 05 2025, no progress has been made on this ticket. This is blocking my delivery to the customer. Can you please provide an ETA to get this issue resolved? If there is no ETA, please give us a workaround at least. Will reverting to V1 be beneficial? Ever since this release was pushed, we have been facing so many issues that are blocking us from delivering docs to our customers. Request you to bump up the priority and get the right attention to this bug. It is critical.","author":"Sanjivani Iyer"},{"text":"Hello, for us it is also a very big inconvenience. Due this bug Confluence is not a tool that allows us to properly manage the documentation and, in this case, we would have to consider using other alternatives. Please solve this problem as soon as possible.","author":"Ricardo Galvez"}]},{"summary":"Database macro display a URL link instead of the embedded database/macro for the customer portal view in JSM","key":"CONFCLOUD-80375","url":"https://jira.atlassian.com/browse/CONFCLOUD-80375","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhile it is possible to add a database macro and embedded database through a macro, when viewing the same Confluence pages where it is correctly working for licensed users, in the KB view as articles in the service desk portal as JSM customers, it is not possible to see the macro and it is displayed a URL link for the database instead.\r\n\r\nh3. Steps to Reproduce\r\n # Create a space and integrate with JSM to serve as a knowlegde base\r\n# Create a confluence page\r\n # Add a database macro\r\n # Create a new database or embedded an existing one\r\n# Login with a JSM customer account\r\n# Search for the page in the service desk portal as a customer\r\n\r\nh3. Expected Results\r\nThe embedded database or the content from the macro database displays as expected\r\n\r\nh3. Actual Results\r\nThere is only a link to the database macro/page\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-12-17T18:09:46.000+0000","comments":[]},{"summary":"discrepancy in the page orders seen in the Sidebar and via \"Space Settings > Content > Reorder\"","key":"CONFCLOUD-80368","url":"https://jira.atlassian.com/browse/CONFCLOUD-80368","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere's a discrepancy in the page orders seen in the *sidebar* and via *Space Settings > Content > Reorder*\r\n\r\nThe issue occurs when we copy a page multiple times using the *sidebar* by clicking the meatball menu.\r\n\r\nIn the {*}sidebar{*}, the newly created pages will show up in the following order.\r\n * The newly created page would be above the page it was copied from\r\n ** if *page 2* was copied from {*}page 1{*}; then *page 3* was copied from *page 1* again. then it'd look like this\r\n *** page 2\r\n *** page 3\r\n *** page 1\r\n\r\nIn {*}Space Settings > Content > Reorder{*}; however, the pages would show up in a different order\r\n * The newly created page would show up below the page it was copied from.\r\n ** if *page 2* was copied from {*}page 1{*}; then *page 3* was copied from *page 1* again. then it'd look like this\r\n *** page 1\r\n *** page 2\r\n *** page 3\r\n\r\nh3. Steps to Reproduce\r\n * Create some pages like this\r\n ** Parent \r\n *** page 1 \r\n **** page 1a\r\n **** page 1b\r\n * Using the *Meatball Menu > Copy* , make a copy of *page 1* with children and use \"Replace title world\" to create *page 2*\r\n * Repeat the same and make *page 3* from *page 1*\r\n * Observe the page orders in *sidebar* and *Space Settings > Content > Reorder*\r\n\r\nh3. Expected Results\r\n\r\nThe order in both places should be identical\r\nh3. Actual Results\r\n\r\nThe order in both are different. But, if we click the alphabetical order button, then both places gets updated and shows consistent alphabetical ordering.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-12-17T04:47:43.000+0000","comments":[]},{"summary":"PDF export fails for large Confluence spaces with ~ 10k pages.","key":"CONFCLOUD-80253","url":"https://jira.atlassian.com/browse/CONFCLOUD-80253","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPDF export of a space with more than 10K pages fails with the below message on UI.\r\n\r\n \r\nh3. Steps to Reproduce\r\n # Select Confluence space having [10k+ current pages].\r\n # Navigate to Space settings > Export space > PDF > Click on Next\r\n\r\nh3. Expected Results\r\n\r\nThe page is redirected to the next page \"Export PDF Options\" with the below options.\r\n # Export all pages, with attachments. Comments are excluded.\r\n # Select what to export\r\n\r\nh3. Actual Results\r\n\r\nThe \"Page unavailable\" Error is shown on the UI.\r\n\r\n!image-2024-12-03-19-05-32-004.png!\r\nh3. Workaround\r\n\r\nDivide the space into multiple pages by copying or moving pages to a second space, then attempt the PDF export from the newly created spaces.","createDate":"2024-12-03T13:44:37.000+0000","comments":[]},{"summary":"A4C: Pages created via Automation with templates does not use the width set in the template","key":"CONFCLOUD-80220","url":"https://jira.atlassian.com/browse/CONFCLOUD-80220","type":"Bug","priority":"","description":"h3. Issue Summary\r\n# When creating templates in Confluence, we can set the width of the template and pages created via it to be *\"full width\"*, or *\"fixed width\"*.\r\n** Pages created manually using this template will use the width that's set in the template, regardless of the user's editor settings.\r\n# But pages created using automation will instead use the user/actor's width setting in their profile.\r\n\r\nh3. Steps to Reproduce\r\n# First, create a template in the site or Space, and set the width for the template to \"full width\".\r\n# Create an automation that uses this template to create pages. For example:\r\n** *Trigger:* Manual\r\n** *Action:* Publish new page (with the template created above)\r\n# In the user's site settings, *\"uncheck\"* the \"Enable full-width as the default for new pages\" option.\r\n** https://<SITE-NAME>.atlassian.net/wiki/users/viewmyeditorsettings.action\r\n# As the same user, try to *create a new page manually* using the template.\r\n** The page will be set to \"full width\" as what we've set in the template. (/)\r\n# With the same user, *trigger the automation to create the page*.\r\n** The page will be created as \"fixed-width\" following the user's settings.\r\n\r\nh3. Expected Results\r\n* Width set in the template should be used when pages are created using them.\r\n\r\nh3. Actual Results\r\n* User's settings for editor is used for pages created using templates via Automation.\r\n\r\nh3. Workaround\r\n* Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-11-28T00:47:58.000+0000","comments":[]},{"summary":"Updating Space detail throwing error Something went wrong","key":"CONFCLOUD-80167","url":"https://jira.atlassian.com/browse/CONFCLOUD-80167","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf the space has fairly large number of pages. Editing Space details can take long time and get times out resulting into 500 Internal error. We have seen this behavior with space that have ~5000 pages.\r\nh3. Steps to Reproduce\r\n # Navigate to Space settings >> Space Details >> Edit Space Details\r\n # Update Description or homepage or any other field and then Save\r\n\r\nh3. Expected Results\r\n\r\nSpace Details should be updated.\r\nh3. Actual Results\r\n\r\nIt redirect to following error page and take longer than normal time to proceed but will eventually finish:\r\n\r\n*UI Error*\r\n{code:java}\r\nSomething went wrong.\r\nWe're moving mountains to get it sorted.\r\nView our status page and subscribe for\r\nservice updates.{code}\r\n*Browser Console Error*\r\n{code:java}\r\nRequest URL:https://<instance>.atlassian.net/wiki/spaces/doeditspace.action?key=<space-key>\r\nRequest Method:POST\r\nStatus Code:500 Internal Server ErrorRemote{code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2024-11-22T01:18:10.000+0000","comments":[]},{"summary":"Large PDF files gets cut off in the media viewer","key":"CONFCLOUD-80092","url":"https://jira.atlassian.com/browse/CONFCLOUD-80092","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a large PDF document that is not following the standard document sizes (for example, exported diagrams from figma), the preview of the document when clicking it gets cut off\r\n\r\nThe issue seems to be related to the default zoom of the media viewer as zooming out resolves the issue\r\nh3. Steps to Reproduce\r\n # Attach a large PDF file in a Confluence page\r\n # Publish the page and view the attached PDF file\r\n\r\nh3. Expected Results\r\n\r\nPDF file can be viewed through the media viewer\r\nh3. Actual Results\r\n\r\nPDF file can be viewed but it looks cut off\r\nh3. Workaround\r\n * Resize the PDF file to standard document sizes","createDate":"2024-11-13T15:20:45.000+0000","comments":[]},{"summary":"Page templates with an index parent page that are created under Folders are placed automatically outside","key":"CONFCLOUD-80078","url":"https://jira.atlassian.com/browse/CONFCLOUD-80078","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPages created with templates that have a index page, like the meeting notes template, does not keep page created under the folder hierarchy and places the page outside folder, under the index parent page automatically.\r\nThis does not happen if a page from the template is created as a children of another parent page.\r\n\r\nThis is extremely confusing as why it works with pages, but not with folders.\r\nh3. Steps to Reproduce\r\n # Access a space, and create a folder section\r\n # Under that folder, create a new page with the '{*}Meeting notes'{*} template by using the '{_}Quick Actions{_}' section at the bottom to choose the template or using button \"{*}...{*}\" then \"{_}*Templates & import doc*{_}\" to choose the template.\r\n # Create a second page without using the template, outside the folder/index page hierarchy\r\n # Create a children page under this parent page using the meeting notes template\r\n\r\nh3. Expected Results\r\n\r\nThe page gets created successfully under that folder.\r\nh3. Actual Results\r\n\r\nPage is placed automatically outside the folder and under the index page.\r\nh3. Workaround\r\n\r\nPlace the index page inside the folder section to have it created automatically under the folder hierarchy, or drag and drop the created meeting notes page under the folder manually.","createDate":"2024-11-11T11:30:21.000+0000","comments":[]},{"summary":"Tables inside Page Properties show unnecessary horizontal scroll bar","key":"CONFCLOUD-79961","url":"https://jira.atlassian.com/browse/CONFCLOUD-79961","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere are cases where nested tables inside Page Properties show horizontal bar even though the bar is not needed\r\nh3. Steps to Reproduce\r\n\r\nIn a Confluence Cloud page:\r\n * Create a layout with two columns\r\n * Create a table in one of the two columns of the layout\r\n * Create a Page properties macro inside the same column\r\n * Create a second table, this time inside the Page properties macro\r\n\r\n!image-2024-10-30-15-50-42-728.png|width=512,height=224!\r\nh3. Expected Results\r\n\r\nBoth the tables are not scrollable given that there is enough space for the table content\r\n\r\n \r\nh3. Actual Results\r\n\r\nThe table inside the Page Properties macro is scrollable, even if not necessary:\r\n\r\n!image-2024-10-30-15-52-46-736.png|width=553,height=436!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-30T14:53:20.000+0000","comments":[]},{"summary":"Error occurs when inserting Jira objects into Team Calendars","key":"CONFCLOUD-79902","url":"https://jira.atlassian.com/browse/CONFCLOUD-79902","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen numerous projects and filters exist on the Jira side, users are encountering timeout errors when attempting to add Jira Agile Sprints to Confluence Team Calendars.\r\n{code:java}\r\njava.net.SocketTimeoutException: Read timed out {code}\r\nh3. Steps to Reproduce\r\n # Navigate to any space on Confluence that is linked to a Jira instance with a significant number of projects and filters.\r\n # Navigate to the Calendars section from the left sidebar.\r\n # Click on the Add Event button and select Jira Agile Sprints.\r\n\r\nh3. Expected Results\r\n * It is expected that the Projects dropdown within the Add Event pop-up will be populated with the Jira Agile Sprints.\r\n\r\nh3. Actual Results\r\n * If the user has access to multiple projects and filters are present on the Jira side, the Projects dropdown may not populate, resulting in a timeout error being observed.\r\n * Inspecting browser's Developer Tools, we can see the below request is returning HTTP 500 Internal Server Error: \r\n{code:java}\r\n https://site.atlassian.net/wiki/rest/calendar-services/1.0/calendar/jira/<CalendarID>/query/options.json{code}\r\n\r\nh3. Workaround:\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-23T09:42:32.000+0000","comments":[]},{"summary":"Custom Space export times out on building the page tree","key":"CONFCLOUD-79888","url":"https://jira.atlassian.com/browse/CONFCLOUD-79888","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen performing a custom space export for a huge space (>2000 pages), building of the tree will hit a timeout and the custom export cannot proceed.\r\nh3. Steps to Reproduce\r\n # Identify a huge space\r\n # *Space Settings > Export Space > HTML > Select what to export*\r\n\r\nh3. Expected Results\r\n\r\nThe page tree should be loaded and the user can choose which pages to export.\r\nh3. Actual Results\r\n\r\nThe page tree never loads. In the backend, a Gateway Timeout (504) can be seen when trying to load the page url=wiki/spaces/exportspacetree.action?key=SPACEKEY\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-10-22T16:24:48.000+0000","comments":[{"text":"This issue is stopping us to export pages/space into HTML format. ","author":"Bharat Kalia"}]},{"summary":"When using the \"page.aiSummary\" and the \"page.aiActionItems\" Smart Values in an automation rule, the output is empty","key":"CONFCLOUD-79792","url":"https://jira.atlassian.com/browse/CONFCLOUD-79792","type":"Bug","priority":"","description":"\r\nh3. Issue Summary\r\nWhen using the \"page.aiSummary\" and the \"page.aiActionItems\" Smart Values in an automation rule, the output is empty.\r\n\r\nh3. Steps to Reproduce\r\n# Create a new automation rule;\r\n# Add the *Manually triggered* trigger;\r\n# Add the *smart values* condition;\r\n# Set the *first value* to {noformat}{{page.title}}{noformat};\r\n# Set the *condition* to \"contains\";\r\n# Set the *second value* to any random text;\r\n# Add the *Add comment* action;\r\n# Set the *comment* field to these [smart values|https://support.atlassian.com/cloud-automation/docs/smart-values-in-confluence-automation/#Page]:\r\n-- {noformat}{{page.aiSummary}}{noformat}\r\n-- {noformat}{{page.aiActionItems}}{noformat}\r\n# Save and enable the automation rule;\r\n# Create a test page, using the title from step 6 and add some random text to it;\r\n# Publish the test page;\r\n# Manually trigger the automation rule from the test page;\r\n\r\nh3. Expected Results\r\nThe automation rule adds a comment with the smart values, with their expected values:\r\n\r\n# {noformat}{{page.aiSummary}}{noformat} - an AI generated summary of a page \r\n# {noformat}{{page.aiActionItems}}{noformat} - an AI generated list of action items of a page\r\n\r\nh3. Actual Results\r\nThe automation rule adds an empty comment.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available\r\n","createDate":"2024-04-23T20:41:31.000+0000","comments":[{"text":"My problem appears to be a page length issue.  If I cut the page in half it was able to create the summary","author":"Dan W"},{"text":"It seems that the smart values are empty for any page that hits a certain length causing the summary to take too long to generate. And it doesn't work in the audit log, when creating a variable, or using the value in a webhook step. If Atlassian could add a \"wait for this step\" option for ai variables, similar to web requests, it would probably fix the problem generically.","author":"Elizabeth Oxton"},{"text":"This Bug impact AI action usage in confluence. It's a mess for something very useful. For example, we use AI to generate action Items on meeting-notes page. Of course, the content exceed length limit.","author":"ALICE CAUDY"}]},{"summary":"Confluence - Add a Label inside a brach for confluence cloud results in multiple labels with the same name ","key":"CONFCLOUD-79791","url":"https://jira.atlassian.com/browse/CONFCLOUD-79791","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an automation is triggered to process multiple pages inside a branch and then add a *new* label, there might be a chance of creating multiple labels with the same name but different ids causing issues while you want to find those pages\r\nh3. Steps to Reproduce\r\n # Create an automation\r\n # Add related entities branch\r\n # Add a CQL example = \"type=page\"\r\n # Inside the branch add action \"Add label\" create a new label\r\n # Run the automation as test\r\n\r\nh3. Expected Results\r\n\r\nAt the database level we should have only one entry for each label name, however, multiple entries are found\r\nh3. Actual Results\r\n\r\nWhen a label has not been created and must be done inside the automation branch multiple labels with the same and different ids are name are created\r\nh3. Workaround\r\n\r\nCreate the label and link it to a page, then run the automation.\r\n\r\n*Notes:* \r\n\r\nThere was an old bug that is already resolved, I tried to replicate it but it is not possible\r\n\r\n[https://jira.atlassian.com/browse/CONFCLOUD-73005]\r\n\r\n ","createDate":"2024-10-01T08:19:41.000+0000","comments":[]},{"summary":"Smart link of Box custom domain (<company>.box.com) open previews with URL app.box.com","key":"CONFCLOUD-79665","url":"https://jira.atlassian.com/browse/CONFCLOUD-79665","type":"Bug","priority":"","description":"h3. Issue Summary\r\nUsers use the Box with their custom domain like (<company>.box.com or <company>.ent.box.com).\r\nThey paste the Box content link in the Confluence page as a smart link.\r\n\r\nIf they select the smart link style in card or embed, it opens preview with URL: app.box.com\r\n\r\nAlso, if they create the smart link with custom domain in content tree ([+ create] > [Smart link]), open the created smart link Action[...] on upper-right > [Replace link], it shows the URL like app.box.com.\r\n\r\nIf their network does not allow accessing to app.box.com URL, users can't see the linked contents in Confluence.\r\n\r\nh3. Steps to Reproduce\r\n # Use box custom domain\r\n # Paste the link of box custom domain in Confluence\r\n # Select the smart link style in a card or embed\r\n # Click [Open preview]\r\n\r\nh3. Expected Results\r\nSmart link of box custom domain is not replaced to app.box.com\r\n\r\nh3. Actual Results\r\nSmart link of box custom domain are replaced to app.box.com\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-09-30T00:47:50.000+0000","comments":[{"text":"Our organization blocks access to app.box.com for security reasons. We hope to have the problem fixed as soon as possible.","author":"Masayuki Abe"},{"text":"I don't understand why I'm being redirected to app.box.com. \r\nDue to this issue, I am unable to view Box files and this is causing a lot of trouble for me. \r\nI urgently request an improvement.","author":"Koichi Nishikawa"},{"text":"Bumping this. When I create a Smart Link to my custom domain, it won't display the page.","author":"Derek Fields (RightStar)"}]},{"summary":"Space export has no content even if no pages are restricted","key":"CONFCLOUD-79651","url":"https://jira.atlassian.com/browse/CONFCLOUD-79651","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSpace export has no content even if no pages are restricted\r\nh3. Steps to Reproduce\r\n # Create a space with no restricted pages\r\n # Take a CSV space export with Confluence user role and another export with Site/Org admin role.\r\n\r\nh3. Expected Results\r\n\r\nSpace export should contain all unrestricted content for both roles.\r\nh3. Actual Results\r\n\r\nSpace export doesn't have any content with User role. Only Site/Org admin can take complete export.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. ","createDate":"2024-09-27T06:25:09.000+0000","comments":[{"text":"This affects us.\r\n\r\nOur space admins need to migrate some spaces to another Confluence Cloud instance with the CSV export option. Currently they are not able to do so.\r\n\r\nOnly global Confluence admins seem to be able to perform these exports properly.","author":"Charlie Misonne"}]},{"summary":"Confluence AI summary defaults to English when used with Confluence Automation","key":"CONFCLOUD-79622","url":"https://jira.atlassian.com/browse/CONFCLOUD-79622","type":"Bug","priority":"","description":"h3. Issue Summary\r\n# AI summaries in Confluence is meant to use [user's preferred language|https://jira.atlassian.com/browse/CONFCLOUD-76852] that is set in their [Atlassian account preference|https://id.atlassian.com/manage-profile/account-preferences]\r\n# This works as expected when using the AI summary on a page directly.\r\n# But if the AI summary is used via Confluence Automation to send email summaries, it is sent in English.\r\n** {{page.aiSummary}}\r\n** {{blog.aiSummary}}\r\n\r\nh3. Steps to Reproduce\r\n# In a Confluence site, edit the Global default language to be anything other than English;\r\n** https://<SITE-NAME>.atlassian.net/wiki/admin/configuration\r\n# In the Atlassian account preference page below, change the prefered language to match the above;\r\n** https://id.atlassian.com/manage-profile/account-preferences\r\n# Refresh Confluence, and visit any page, confirming that the AI summary is in the prefered language that's set in the user profile.\r\n# Create a simple automation in Confluence, to trigger an AI summary email. For example;\r\n## Trigger: Adding a label\r\n## Action: Send email\r\n## Add a user email, and in the email, use one of the AI summary smart values below;\r\n*** {{page.aiSummary}}\r\n# Now trigger the automation by adding the label to the page from before.\r\n# The email will be sent with the AI summary of the page, in English.\r\n\r\nh3. Expected Results\r\n# The AI summary sent via automation should follow the language that the user has set in their profile.\r\n# Or at least, the language of the content on the page.\r\n\r\nh3. Actual Results\r\n* Regardless of the following items below, the AI summary sent from Automation will always be in English.\r\n## Content language\r\n## Site language\r\n## User profile language\r\n\r\nh3. Workaround\r\n* Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-09-24T01:54:31.000+0000","comments":[]},{"summary":"Renaming pages result in broken links","key":"CONFCLOUD-79554","url":"https://jira.atlassian.com/browse/CONFCLOUD-79554","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUser has renamed a page and now linking from other pages has been broken.\r\n\r\nPages using the renamed content are being redirected to:\r\n[https://xxxxxx.atlassian.net/wiki/pages/createpage.action?spaceKey=]\r\nh3. Steps to Reproduce\r\n\r\nCreate a page\r\n # Add the page as link in hundres of pages\r\n # Rename the page created on the step 1\r\n # Check if links were updated in all pages (random issue) \r\n\r\nh3. Expected Results\r\n\r\nWhen a page is renamed you expect the page link to be replaced in all pages\r\nh3. Actual Results\r\n\r\nPage name is updated but not all links were replaced, some of them points to the previous page and some of them points to the correct page \r\n\r\n \r\n\r\nAfter the name of the page is changed you can find some pages with the following broken link in ADF\r\n\r\n \r\n{code:java}\r\ncontent: [{type: \"paragraph\",content: [{type: \"inlineCard\",attrs: {url: https://xxxx.atlassian.net/wiki/pages/createpage.action?spaceKey=xx&title=xxxxx&linkCreation=true&fromPageId=xxxxx}},{text: \" \",type: \"text\"}]}] {code}\r\n \r\n\r\nWhen this happens the storage format still pointing to the previous page name\r\n{code:java}\r\n<p><ac:link ac:card-appearance=\"inline\"><ri:page ri:content-title=\"Old name\" /><ac:link-body>Old name</ac:link-body></ac:link> </p> {code}\r\n \r\n\r\nExpectation in ADF\r\n{code:java}\r\ncontent: [{type: \"inlineCard\",attrs: {url: https://xxxx.atlassian.net/wiki/spaces/xxxx/pages/xxxxxx}},{text: \" \",type: \"text\"}] {code}\r\nh3. Workaround\r\n\r\nEdit the pages where the link is incorrect and replace the link manualy ","createDate":"2024-09-16T08:28:07.000+0000","comments":[{"text":"Hi everyone,\r\n\r\nThis is Aniruddha from the Confluence team. I have great news that we have identified a fix to address this bug! \r\nWe are in the process of releasing the fix through our deployment stages, and are planning to slowly roll it out to customers. As a result, this fix may take 1-2 weeks to reach you. Thank you for your patience!\r\n\r\nBest,\r\nAniruddha","author":"Aniruddha Kakade"},{"text":"Hi everyone,\r\n\r\nThis is Aniruddha from the Confluence team. Thank you for your patience as we work on fixing this bug. The bug has taken longer than expected for us to fix because we saw some issues during internal soaking, and had to go back and make additional changes. We know you have been waiting eagerly for this fix as we are, and we expect to begin rolling it out to customers this week. Thank you again for your patience!\r\n\r\nBest,\r\nAniruddha","author":"Aniruddha Kakade"}]},{"summary":"\"Copy link to heading\" in edit mode uses URL from the editor","key":"CONFCLOUD-79486","url":"https://jira.atlassian.com/browse/CONFCLOUD-79486","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen editing a page, if you click on a \"Copy link to heading\" icon beside a heading, the heading URL will refer to the editor link.\r\n\r\nh3. Steps to Reproduce\r\n# Create a new page\r\n# Include a heading (h1~h6) and click on the \"Copy link to heading\" icon\r\n# On the same page, include a Link macro and past the heading URL copied on the previous step\r\n# Publish the page\r\n# Click on the heading link\r\n\r\nh3. Expected Results\r\nOnce you click the heading link, you should be redirected to the heading\r\n\r\nh3. Actual Results\r\nWhen clicking on the heading link, you will be redirected to the page in edit mode\r\n\r\nh3. Workaround\r\nAfter the headings are included, publish the page and copy the heading links on view mode","createDate":"2024-09-05T20:03:35.000+0000","comments":[{"text":"Why is this low priority? It's an enormous pain if you are adding cross references within a page you are editing. And it's a super easy fix.","author":"Pete Buckney"},{"text":"Could you please consider {*}bumping the priority on this bug{*}? As [~5c3811d19907] mentioned, *it is really painful..*","author":"loris.friedel"},{"text":"I absolutely cannot see any reasonable use case for this (new) behaviour.... it is just a chance for errors and confusion.","author":"Henri Volk [amily]"},{"text":"Also seeing this issue in our spaces. This means we need to go back and find all the links in our space that reference other sections and manually fix them. Please address.","author":"Nate Williams"},{"text":"Why is this ticket with priority low ?? This bug is such a pain ! \r\n\r\nPlease reconsider the priority.","author":"Jonathan Serex"}]},{"summary":"Space Custom PDF export fails for large Confluence space","key":"CONFCLOUD-79400","url":"https://jira.atlassian.com/browse/CONFCLOUD-79400","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * Confluence space PDF custom export [exporting only selected pages] fails when space contains too many pages.\r\n\r\n!image-2024-08-27-13-23-27-222.png|width=230,height=192!\r\n\r\n\r\nh3. Steps to Reproduce\r\n * Select Confluence space having [10k+ current pages].\r\n * Navigate to Space settings > Export space > PDF > \"Select what to export\".\r\n * Select a page with its child pages\r\n * Click on Export\r\n\r\nh3. Expected Results\r\n * The pages should be exported successfully to PDF.\r\n\r\nh3. Actual Results\r\n * PDF export fails with error message as \"Something went wrong\" on UI.\r\n\r\nh3. Workaround\r\n # Copy page   [with its child pages] to another Confluence space [either newly created or with limited number of pages]\r\n # Export pages to pdf from this new Confluence space","createDate":"2024-08-27T08:04:12.000+0000","comments":[{"text":"Hello everyone,\r\n\r\nThis is Joe Larson from the Confluence team. Thank you for your patience as we work on fixing this bug. The bug has taken longer than expected for us, and we are currently tracking towards resolution by end of 2024. We know you have been waiting eagerly for this fix as we are, and we will be providing any updates as they come. Thank you again for your patience!\r\n\r\nBest,\r\n\r\nJoe Larson","author":"Joseph Larson"},{"text":"The bug was supposed to be resolved by end of 2024, but there has been no information. Can this be escalated. With more than 25K Confluence users, it becomes difficult to manage their expectations with workarounds.\r\n\r\nRegards,\r\nAmanpreet Singh Sandhu","author":"Amanpreet Singh Sandhu"}]},{"summary":"Confluence Storage Format Links Incorrectly Create New Pages Instead of Handling Moved or Renamed Targets in Migrated Instances","key":"CONFCLOUD-79399","url":"https://jira.atlassian.com/browse/CONFCLOUD-79399","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMigration is a long process, usually executed moving and validating few spaces per time. During the migration process, pages can be moved or renamed, causing the target links to fail with \"Page not found error\".\r\n\r\nHowever, when the link is using Confluence Storage Format, when hitting the link it tries to create a new page on the target space, instead of be smart to redirect to the new location or title name (ideally) or show a Page note found error, with the suggestion of the new location/new title.\r\nh3. Steps to reproduce\r\n\r\n1. Confluence On-Prem with:\r\nSpaces A and the pages: \"A page 1\"\r\nSpaces B and the pages: \"B page 2\", \"B page 3\"\r\nSpaces C and the pages: \"C page 2\", \"C page 3\"\r\n\r\n2. Edit \"A Page 1\" on Space A to add links to the pages on space B and C;\r\n\r\n3. Hit the Link icon again, but select \"search\" and search for the pages \"B page 2\" and \"C page 2\". Observe that the link created will use the Confluence Storage Format:\r\n{code:java}\r\n<ac:link><ri:page ri:space-key=\"spaceB\" ri:content-title=\"B page 2\" /></ac:link>\r\n<ac:link><ri:page ri:space-key=\"spaceC\" ri:content-title=\"C page 2\" /></ac:link>\r\n{code}\r\n4. Copy and paste the URL from \"B page 3\" and \"C page 3\". Observe that the link created will also use the Confluence Storage Format:\r\n{code:java}\r\n<ac:link><ri:page ri:space-key=\"spaceB\" ri:content-title=\"B page 3\" /></ac:link>\r\n<ac:link><ri:page ri:space-key=\"spaceC\" ri:content-title=\"C page 3\" /></ac:link>\r\n{code}\r\n5. Migrate space A to Cloud using the Migration Assistance\r\n\r\n6. On Cloud, reach space A, \"A page 1\". Observe that:\r\n * The target links remains on the same \"A page 1\" (!)\r\n\r\n7. Migrate space C to Cloud using the Migration Assistance\r\n\r\n9. On Cloud, reach space A, \"A page 1\". Observe that:\r\n * Target links for the pages \"C page 2\" and \"C page 3\" now are working properly, opening the pages on space C.\r\n\r\n10. On the On-Prem environment, rename the pages on space B to \"B renamed page 2\", \"B renamed page 3\"\r\n\r\n11. Migrate space B to Cloud using the Migration Assistance\r\n\r\n12. On Cloud, reach space A, \"A page 1\".\r\nh3. Expected results\r\n\r\nIt is expected to be redirected to \"B renamed page 2\" (ideally) or show \"Page not found\" error with the suggestion to the renamed page.\r\nh3. Actual Results\r\n\r\nit opens a new draft page with the same previous tile on Space B\r\nh3. Workaround\r\n\r\nRemove the link and add again to the renamed page\r\n\r\nnote: Same issue observed when moving the page to another space, instead of renaming.","createDate":"2024-08-26T23:26:09.000+0000","comments":[{"text":"FYI. Running Link fixing should resolve this problem after migration. ","author":"jchen7"}]},{"summary":"Page Ownership Issue After Editor Conversion in Confluence Cloud","key":"CONFCLOUD-79389","url":"https://jira.atlassian.com/browse/CONFCLOUD-79389","type":"Bug","priority":"","description":"h4. Issue Summary\r\n\r\nAfter converting pages from the legacy editor to the new editor in Confluence Cloud, the recently updated page owner is incorrectly reverting to the original page owner or creator.\r\nh4. Steps to Reproduce\r\n # User A create a new legacy page\r\n # User A change owner of Page to User B\r\n # User A edit and convert the page to fabric.\r\n # Page Owner changed back to original creator User A.\r\n\r\nh4. Expected Results\r\n\r\nAfter conversion, User B should retain ownership of the page.\r\nh4. Actual Results\r\n\r\nAfter Conversion, system inaccurately assigns ownership back to original creator of legacy page, leading to discrepancies in user ownership.\r\nh4. Workaround\r\n\r\nTarget user can create a copy of the legacy editor page first and convert it instead. However, it's crucial to note that this workaround does not retain the page history, posing limitations on version tracking.","createDate":"2024-08-26T03:06:44.000+0000","comments":[{"text":"Hello support, thanks for raising this bug report. Appreciate if you could fix this bug as the workaround is not ideal, we would like to retain the page history etc. ","author":"Jack Cui"},{"text":"Hello support,\r\n\r\nThis also affects our team.","author":"James D"}]},{"summary":"Contextual dropdown - not all options are included in dropdowns due to limit on results returned","key":"CONFCLOUD-79252","url":"https://jira.atlassian.com/browse/CONFCLOUD-79252","type":"Bug","priority":"","description":"h3. Examples of where this is happening\r\n * Parent page dropdown list for Confluence connection in *automation rule* does not show more than 25 items. If the pages have a similar name and you search for it, only the first 25 pages will be shown\r\n * Searching for Projects in Global Automation provides a maximum of 50 search results\r\n * Displaying all the select list options for the custom field in issue field condition of an Automation rule - maximum 15 results are returned [Jira API constraint]","createDate":"2022-09-15T18:01:48.000+0000","comments":[{"text":"Please either increase the limit to 200 fields or allow ORG admins to change customize this setting. This limitation creates confusion on what options we have in the dropdown as we don't always know everything single name that can be searched for. ","author":"Hal Wolin"},{"text":"understand JiraAPI constraint but there should be a warning when \"Automation rule - maximum 15 results are returned\" ","author":"Catherine"}]},{"summary":"Confluence Automation fails to update page status when the scope is set to multiple spaces","key":"CONFCLOUD-79247","url":"https://jira.atlassian.com/browse/CONFCLOUD-79247","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nConfluence Automation fails to update page status when the scope is set to multiple spaces\r\nh3. Steps to Reproduce\r\n # Create a custom status with the same name and color on two separate spaces\r\n # Create an automation rule, with the following steps:\r\n ** *Branch rule / related entities* - CQL=type = page\r\n ** *Action - Change page status* - Select the custom status created on the first step\r\n # On the rule's details, select scope as \"Multiple spaces\" and list the two spaces you created the custom status on\r\n # Save the rule\r\n # Run the rule\r\n\r\nh3. Expected Results\r\n\r\nThe rule will sweep all pages on each of both spaces and add the custom status to all pages\r\nh3. Actual Results\r\n\r\nThe rule will fail to change the page status from one of the spaces.\r\nWhen selecting the status on the action \"Change page status\", the list will be populated with all statuses from all spaces in scope, comparing their name and color, but not their ID. The custom status will be listed only once from one space.\r\nWhen the rule is run, it uses the custom status ID to update the pages. This will work for all pages in one space, but it won't find that status ID for the pages in the other space.\r\n\r\n*Error:* We can’t run a rule relating to page status on a global scope. Select Rule details and change the Scope field to one or more space.\r\nh3. Workaround\r\n\r\nCreate an automation rule for each space, instead of selecting multiple space scope","createDate":"2024-07-19T21:10:40.000+0000","comments":[{"text":"A corollary to this: when exporting/importing Confluence Cloud Automation rules that utilize page statuses, the page statuses must be manually created first in each space, then the imported rule must be edited to update the align the status IDs that are specific to that space (and are different from the status IDs in the export).","author":"Brian Leveille"}]},{"summary":"When copying pages that include children, an automation rule using the \"Page Published\" trigger results in \"Failed to fetch page info\" errors for some pages being created","key":"CONFCLOUD-79245","url":"https://jira.atlassian.com/browse/CONFCLOUD-79245","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen copying pages that include children, an automation rule using the \"Page Published\" trigger results in \"Failed to fetch page info\" errors for some pages being created.\r\n\r\nh3. Steps to Reproduce\r\n# Create a Page with 10 child pages.\r\n# Create an automation that uses the \"Page Published\" Trigger and creates a log entry with these Smart Values \"{{now}}\" \"{{page.id}}\" \"{{page.title}}\".\r\n# Select Copy from the Parent page(step 1) and choose to include all children, labels, and restrictions.\r\n# Check the audit log for the automation\r\n\r\nh3. Expected Results\r\n- The automation rule logs the details(step 2) for each and every copied page.\r\n\r\nh3. Actual Results\r\n- The automation rule logs the details for some of the copied pages, while for others, it throws the following error:\r\n\r\n{code}\r\nFailed to fetch page info\r\nTrace ID: cd6d8bcf-cb54-41ea-840e-a3479f1abbb9::00::cd6d8bcf-cb54-41ea-840e-a3479f1abbb9\r\n{code}\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2024-07-26T15:14:43.000+0000","comments":[]},{"summary":"Create Page Action with Templates should copy attachments & labels present on the Template","key":"CONFCLOUD-79242","url":"https://jira.atlassian.com/browse/CONFCLOUD-79242","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCurrently, with Automation(both Jira and Confluence), it is not possible to copy attachments & labels while creating a page using a template.\r\n\r\nh3. Steps to Reproduce\r\n # Step: In the automation rule, use the action to Publish a page(In Confluence) or Create a Confluence Page(In Jira) using a template that includes attachments/images and labels.\r\n # Step: Verify the page if it includes the attachments and labels.\r\n\r\nh3. Expected Results\r\nAttachments & labels should be copied and the page should look just like the template.\r\n\r\nh3. Actual Results\r\nAttachments & labels are not copied.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2023-06-06T14:47:31.000+0000","comments":[{"text":"This defect seems related to this one: https://jira.atlassian.com/browse/AUTO-12","author":"William Sheboy"},{"text":"this one as well https://jira.atlassian.com/browse/AUTO-333","author":"Majken Longlade"},{"text":"+1","author":"Byron Galietta"}]},{"summary":"[Custom Domains] Redirect link on the Jira link counter fails with \"The provided url is not included in the whitelist!\"","key":"CONFCLOUD-79197","url":"https://jira.atlassian.com/browse/CONFCLOUD-79197","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nAfter switching to [Custom Domains|https://support.atlassian.com/organization-administration/docs/add-a-custom-domain], customers are reporting that clicking on Jira link in the Jira link Counter on a Confluence page leads to a \"The provided url is not included in the whitelist!\"\r\nh3. Steps to Reproduce\r\n # Enable Custom domain for Jira\r\n # Add a Jira link to a Confluence page\r\n # Publish page\r\n # Click on the Jira issue in the Jira Issue Counter\r\n\r\nh3. Expected Results\r\n - Redirected to the Jira issue that is linked\r\n\r\nh3. Actual Results\r\n - Page will show the following message: \"The provided url is not included in the whitelist!\"\r\n\r\nh3. Screen Recording\r\n\r\n[^2024-08-02_15-21-38.mp4]\r\nh3. Workaround\r\n\r\n- Click on the Jira link on the Confluence page to navigate directly to the Jira issue\r\n - Or contact the Support team to apply a workaround","createDate":"2024-08-02T05:26:07.000+0000","comments":[]},{"summary":"Drafts of published pages show up on the page tree","key":"CONFCLOUD-79075","url":"https://jira.atlassian.com/browse/CONFCLOUD-79075","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDrafts of published pages show up on the page tree along with the published pages. Only unpublished drafts should show up in page trees. \r\n\r\nAccessing such drafts will result in an error message stating, \"Editing is restricted for this content.\". Requesting access and approving it will not open the draft page.\r\n\r\nThe published page should be available without any issues.\r\nh3. Steps to Reproduce\r\n\r\nThe creator of the published page will be able to view the drafts of these pages in the page tree.\r\nh3. Expected Results\r\n\r\nOnly unpublished drafts should show up in page trees.\r\nh3. Actual Results\r\n\r\nDrafts of published pages show up on the page tree along with the published pages.\r\nh3. Workaround\r\n\r\nContact Atlassian support to fix the eissue.","createDate":"2024-07-18T07:47:40.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/PCS-314018","author":"Avinash Bisht"},{"text":"This popped up for my team.\r\n\r\nJST-1056961","author":"Aram Ghanimian"},{"text":"I have been met with this problem and there has been no solution for this yet.  I tried clearing my browser cache but I don't see what that would do given that the pages in this state are being found from the current user context.","author":"Matt Sardi"}]},{"summary":"Exporting a Space into HTML while selecting \"Select what to export\" will not always workl","key":"CONFCLOUD-79031","url":"https://jira.atlassian.com/browse/CONFCLOUD-79031","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen performing a Space Export in Confluence cloud and selecting the HTML format with the \"Select what to export,\". option, the export may fail.\r\nRetrying the export will work after a couple of attempts.\r\n\r\nh3. Steps to Reproduce\r\n# Go to the Space you want to export\r\n# click on Space Settings\r\n# Select the Space export option\r\n# Select HTML\r\n# Select \"Select what to export\".\r\n# Be sure that all comments are included, and do not uncheck anypage\r\n# click on export.\r\n\r\nh3. Expected Results\r\n\r\nAn export task for an HTML file that is the whole Space export should be generated for download\r\n\r\nh3. Actual Results\r\n\r\nA blank page with the title: \"Something went wrong.\" is seen\r\n\r\nIn your Developer tools you will see a 500 response with the following response\r\n\r\n{code:HTML}\r\n<!doctype html>\r\n<html>\r\n    <head>\r\n        <meta charset=\"utf-8\"/>\r\n        <title>Something went wrong.</title>\r\n        <script defer=\"defer\" src=\"https://cc-fe-bifrost.prod-east.frontend.public.atl-paas.net/assets/master/error-app.881bd1a97813596c95aa.js\"></script>\r\n    </head>\r\n    <body>\r\n        <div id=\"confluence-ui\"></div>\r\n    </body>\r\n</html>\r\n{code}\r\n\r\nh3. Workaround\r\n\r\nYou can export the space in any other format.\r\nYou may also fully export the HTML\r\nYou may retry the Select what to export\" option","createDate":"2024-07-11T23:50:47.000+0000","comments":[{"text":"\"{*}Export to HTML{*}\" option is not listed for us. Attached the screenshot for reference from https://gcs-statestreet.atlassian.net\r\n\r\n!image-2024-08-13-14-49-10-383.png!","author":"Babu Muthupandiyan"}]},{"summary":"Intermittent discrepancy in task status between Confluence Cloud page and backend ","key":"CONFCLOUD-78994","url":"https://jira.atlassian.com/browse/CONFCLOUD-78994","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe task status on the Confluence Cloud page sometimes shows as 'done', but the actual status in the backend, specifically in the task table, is shown as 'unchecked'. This discrepancy is intermittent and is generally observed when a task is checked, unchecked, and then checked again.\r\nh3. Steps to Reproduce\r\n # Navigate to the Confluence Cloud page.\r\n # Find a task and check its status.\r\n # publish the page\r\n\r\n \r\nh3. Expected Results\r\n\r\nThe task status on the Confluence Cloud page and the actual status in the backend should be consistent. If a task is marked as 'done' on the Confluence Cloud page, it should also be marked as 'checked' in the backend\r\nh3. Actual Results\r\n\r\nThe task status on the Confluence Cloud page sometimes shows as 'done', but the actual status in the backend, specifically in the task table, is shown as 'unchecked'. This discrepancy is intermittent and is generally observed when a task is checked, unchecked, and then checked again\r\nh3. Workaround\r\n\r\nUpdate the bug status via backend or API call","createDate":"2024-07-08T12:42:18.000+0000","comments":[]},{"summary":"Unable to delete inline comments on pages with certain macros being used","key":"CONFCLOUD-78489","url":"https://jira.atlassian.com/browse/CONFCLOUD-78489","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIt appears that on pages with certain macros (for example the {*}Excerpt{*}, {*}Page Properties{*}, or *ToC* macro) being used, the \"{*}Delete{*}\" button on inline comments does not appear.\r\nh3. Steps to Reproduce\r\n # Create a page that has both plain text AND either an {*}Excerpt{*}, *Page Properties* or *ToC* macro in it.\r\n # Leave an inline comment or two on the plain text of the page.\r\n # Click on the inline comment and try to delete it.\r\n\r\nh3. Expected Results\r\n\r\nYou will see the \"{*}Delete{*}\" button and be able to remove the inline comment.\r\nh3. Actual Results\r\n\r\nThe \"{*}Delete{*}\" button is not displayed.\r\nh3. Workaround\r\n\r\nRemove the macro, update the page, delete the inline comment, and add back the macro.\r\n\r\nAlternatively, create a new page without those macros and add an inline comment. Confirm the \"Delete\" button appears for the comments on this new page, then navigate to the original page (without refreshing the browser). The \"Delete\" button should now appear.","createDate":"2024-05-16T11:38:01.000+0000","comments":[{"text":"Same thing here.\r\n\r\nSometimes, after editing a page, the Delete option is back. Then it's gone again :) \r\n\r\nWe checked the source HTML and there doesn't seem to be an issue","author":"Kristian Klima"},{"text":"Our Confluence is also affected by this. I noticed this was working fine up until mid-May. Before then, I was able to make and delete inline comments that were present inside of a Page Properties macro.\r\n\r\n \r\n\r\nI've also noticed that I cannot make inline comments inside this macros without pressing 'Edit' on my page first.\r\n\r\n ","author":"Rhyan W"}]},{"summary":"Failed to parse XHTML content from Jira Macro Repair","key":"CONFCLOUD-78324","url":"https://jira.atlassian.com/browse/CONFCLOUD-78324","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen updating pages to fix broken macros (such as in Jira Macro Repair), user generated content needs to be parsed, updated, and then saved. Due to errors in the format of the XHTML, it's possible some pages cannot be parsed or saved, causing the content fixing to fail. \r\n\r\n \r\n\r\nThis is reproducible on Data Center: _with suitable samples of XHTML_\r\nh3. Steps to Reproduce\r\n\r\nN/A\r\nh3. Expected Results\r\n\r\nPages should be able to be parsed and saved. \r\nh3. Actual Results\r\n\r\nSome pages fail when being parsed or being updated. \r\n\r\n \r\n+*Troubleshooting*+\r\n\r\nWhen parsing fails, this log entry is logged from Jira Macro Repair: \r\n{noformat}\r\nFailed to parse content on page{noformat}\r\nor\r\n{code:java}\r\nSkipping page update due to parsing error.{code}\r\n \r\n\r\nUse these steps to find these failed update entries\r\n * First run this Splunk query with the cloud ID of the tenant:\r\n\r\n{{\"<cloudId>\" `connie-prod` \"ValidatorMessageRunner\"}}\r\n * Use the *trace ID* from one of the logs ({_}*ext.traceId*{_}) with the following Splunk query:\r\n\r\n {{\"<traceId>\" `connie-prod` level=ERROR | stats count by message}}\r\n * There can be several traceId values to work through\r\n\r\n \r\n\r\n*The error stack trace exception will show*\r\n{code:java}\r\ncom.atlassian.confluence.content.render.xhtml.XhtmlException: RuntimeException occurred while performing an XHTML storage transformation (Cannot invoke \"javax.xml.stream.events.Attribute.getValue()\" because \"macroNameAttribute\" is null)\r\n...\r\nCaused by: java.lang.NullPointerException: Cannot invoke \"javax.xml.stream.events.Attribute.getValue()\" because \"macroNameAttribute\" is null{code}\r\n \r\nh3. Workaround\r\n\r\nPlease reach out to Atlassian Support.","createDate":"2024-04-26T12:07:06.000+0000","comments":[{"text":"[https://getsupport.atlassian.com/browse/MOVE-1749616] ","author":"Rananjay Pathania"}]},{"summary":"Large XML space exports may result in the UI not displaying the download link","key":"CONFCLOUD-78314","url":"https://jira.atlassian.com/browse/CONFCLOUD-78314","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nLarge XML space exports may result in the UI not displaying the download link, even though the export was completed successfully.\r\nh3. Steps to Reproduce\r\n # Export a large space ~150GB+ to XML\r\n # The export will progress and then appear to be stuck\r\n # The export completes in the backend, but no download link is ever displayed\r\n\r\nh3. Expected Results\r\n\r\nWhen the export completes a download link should be available.\r\n\r\nWe have also created a feature request, CONFCLOUD-78317, which would trigger an email notification with a link to download the file upon completion.\r\nh3. Actual Results\r\n\r\nWhen the export completes a download link is not provided.\r\nh3. Workaround\r\n * Try the export again, this can be due to latency issues.\r\n * Reach out to support and request their help to provide the download link.","createDate":"2024-04-25T17:08:46.000+0000","comments":[]},{"summary":"Multiple legacy Jira issue macros on a page with combined results exceeding 1000 results in performance degradation ","key":"CONFCLOUD-78290","url":"https://jira.atlassian.com/browse/CONFCLOUD-78290","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a page has multiple legacy Jira issue macros, and the results surpass 1000, it can cause performance issues.\r\nh3. Steps to Reproduce\r\n # Create a page in Confluence.\r\n # Add multiple legacy Jira issues macros and ensure the total results will be over 1000. The individual macros should still have a smaller number of results.\r\n\r\nh3. Expected Results\r\n\r\nSlowness isn't expected because the individual macros have a small subset of issues.\r\nh3. Actual Results\r\n\r\nThe page loads slowly due to the total number of results being over 1000.\r\nh3. Workaround\r\n\r\nChange the macros to use the new Jira List of Links Macro. [https://support.atlassian.com/confluence-cloud/docs/insert-the-jira-issues-macro/]","createDate":"2024-04-23T09:18:11.000+0000","comments":[]},{"summary":"Microsoft docx attachment cannot preview Georgian Character in confluence page","key":"CONFCLOUD-78212","url":"https://jira.atlassian.com/browse/CONFCLOUD-78212","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: n/a\r\n\r\nWhen previewing a Microsoft attachment with Docx file that is written in Georgian characters.\r\nThe content does not load the Georgian characters.\r\n\r\nh3. Steps to Reproduce\r\n # Add an attachment macro\r\n # Upload the docx file which contains Georgian characters\r\n # Proceed to click on view on the attachment\r\n\r\nh3. Expected Results\r\nThe content gets loaded\r\n\r\nh3. Actual Results\r\nThe Georgian character does not get load\r\n\r\nh3. Workaround\r\n* Currently download the attachment to view the Georgian contents.\r\n* Before uploading the docx file, save the file with option \"embedding custom fonts\" described in 3rd party vendor knowledge article https://support.microsoft.com/en-us/office/benefits-of-embedding-custom-fonts-cb3982aa-ea76-4323-b008-86670f222dbc#OfficeVersion=macOS\r\n\r\n","createDate":"2024-04-11T11:40:49.000+0000","comments":[{"text":"hi [~vvaidhyanathan@atlassian.com] we have an internal ticket in our backlog already against this [https://product-fabric.atlassian.net/browse/CXP-2978,] this has been prioritised relative to other tickets.","author":"Samuel Razali"}]},{"summary":"The syntax highlighting for the language ABAP in code macro is not correct","key":"CONFCLOUD-78210","url":"https://jira.atlassian.com/browse/CONFCLOUD-78210","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe syntax highlighting for the language ABAP in code macro is not correct\r\nh3. Steps to Reproduce\r\n # Create a new page \r\n # Add a code macro and select ABAP\r\n # Insert some ABAP code \r\n # \r\n{code:java}\r\nSCIENTIFIC_WITH_LEADING_ZERO\r\nSCALE_PRESERVING_SCIENTIFIC\r\nRMC_COMMUNICATION_FAILURE\r\nEND-ENHANCEMENT-SECTION\r\nMULTIPLY-CORRESPONDING\r\nSUBTRACT-CORRESPONDING\r\nVERIFICATION-MESSAGE\r\nDIVIDE-CORRESPONDING\r\nENHANCEMENT-SECTION\r\nCURRENCY_CONVERSION\r\nRMC_SYSTEM_FAILURE\r\nSTART-OF-SELECTION\r\nMOVE-CORRESPONDING\r\nRMC_INVALID_STATUS\r\nCUSTOMER-FUNCTION\r\nEND-OF-DEFINITION\r\nENHANCEMENT-POINT\r\nSYSTEM-EXCEPTIONS\r\nADD-CORRESPONDING\r\nSCALE_PRESERVING\r\nSELECTION-SCREEN\r\nCURSOR-SELECTION\r\nEND-OF-SELECTION\r\nLOAD-OF-PROGRAM\r\nSCROLL-BOUNDARY\r\nSELECTION-TABLE\r\nEXCEPTION-TABLE\r\nIMPLEMENTATIONS\r\nPARAMETER-TABLE\r\nRIGHT-JUSTIFIED\r\nUNIT_CONVERSION\r\nAUTHORITY-CHECK\r\nLIST-PROCESSING\r\nSIGN_AS_POSTFIX\r\nCOL_BACKGROUND\r\nIMPLEMENTATION\r\nINTERFACE-POOL\r\nTRANSFORMATION\r\nIDENTIFICATION\r\nENDENHANCEMENT\r\nLINE-SELECTION\r\nINITIALIZATION\r\nLEFT-JUSTIFIED\r\nSELECT-OPTIONS\r\nSELECTION-SETS\r\nCOMMUNICATION\r\nCORRESPONDING\r\nDECIMAL_SHIFT\r\nPRINT-CONTROL\r\nVALUE-REQUEST\r\nCHAIN-REQUEST\r\nFUNCTION-POOL\r\nFIELD-SYMBOLS\r\nFUNCTIONALITY\r\nINVERTED-DATE\r\nSELECTION-SET\r\nCLASS-METHODS\r\nOUTPUT-LENGTH\r\nCLASS-CODING\r\nCOL_NEGATIVE\r\nERRORMESSAGE\r\nFIELD-GROUPS\r\nHELP-REQUEST\r\nNO-EXTENSION\r\nNO-TOPOFPAGE\r\nREDEFINITION\r\nDISPLAY-MODE\r\nENDINTERFACE\r\nEXIT-COMMAND\r\nFIELD-SYMBOL\r\nNO-SCROLLING\r\nSHORTDUMP-ID\r\nACCESSPOLICY\r\nCLASS-EVENTS\r\nCOL_POSITIVE\r\nDECLARATIONS\r\nENHANCEMENTS\r\nFILTER-TABLE\r\nSWITCHSTATES\r\nSYNTAX-CHECK\r\nTRANSPORTING\r\nASYNCHRONOUS\r\nSYNTAX-TRACE\r\nTOKENIZATION\r\nUSER-COMMAND\r\nWITH-HEADING\r\nABAP-SOURCE\r\nBREAK-POINT\r\nCHAIN-INPUT\r\nCOMPRESSION\r\nFIXED-POINT\r\nNEW-SECTION\r\nNON-UNICODE\r\nOCCURRENCES\r\nRESPONSIBLE\r\nSYSTEM-CALL\r\nTRACE-TABLE\r\nABBREVIATED {code}\r\n\r\n #  Save the file and check how the code is highlighted\r\n\r\nh3. Expected Results\r\n\r\nThe code should be highlighted as all the words are ABAP syntax \r\nh3. Actual Results\r\n\r\nABAP code inside the code macro should be highlighted \r\nh3. Workaround\r\n\r\nNo","createDate":"2024-04-11T10:46:06.000+0000","comments":[{"text":"Hey folks, we are rolling out a fix for this now :) ","author":"Michael Abrahamian"},{"text":"The fix has now been fully rolled out in Jira and Confluence.","author":"Michael Abrahamian"}]},{"summary":"Legacy Page Load Failure Due to Timeout Issues with JIRA Chart","key":"CONFCLOUD-77891","url":"https://jira.atlassian.com/browse/CONFCLOUD-77891","type":"Bug","priority":"","description":"h3. Issue Summary\r\nLegacy pages with Jira Chart couldn't be loaded successfully, whenever Jira Chart hit into time out. \r\n\r\nh3. Steps to Reproduce\r\n# Integrate your Confluence Data Center with Jira Data Center. \r\n#- In Jira Data Center\r\nAdd multiple custom values in your Jira fields\r\n#- In Confluence Data Center\r\nAdd a page with Jira Chart macro pointing to the Jira Data Center above. Please make sure that we're retrieving the custom values from Jira Data Center accordingly. \r\n# Perform a Confluence migration using [CCMA app|https://marketplace.atlassian.com/apps/1219672/confluence-cloud-migration-assistant?tab=overview].\r\n(i) Jira Data Center data is yet to be migrated at this point, which then led to Jira Charts having invalid JQLs.  \r\n# Attempt to view the page\r\n\r\nh3. Expected Results\r\nPage content loads successfully.\r\n\r\n(on) As this issue is originally occurred due to invalid JQLs, we should show the correct error message as follows (instead of 504), as well as rendering other page contents. \r\n !Screenshot 2024-03-19 at 5.24.21 PM.png|thumbnail! \r\n\r\nh3. Actual Results\r\nPage content fails to load (blank page) or the following generic error message ({{We couldn't find what you're looking for}}) is being shown instead.\r\n !Screenshot 2024-03-19 at 5.12.40 PM.png|thumbnail! \r\n\r\nWith the following errors thrown in the back-end log:\r\n{code}\r\nstack: com.atlassian.confluence.macro.MacroExecutionException: com.atlassian.sal.api.net.ResponseException: java.net.SocketTimeoutException: Read timed out\r\ncom.atlassian.confluence.plugins.jiracharts.DefaultJQLValidator.validateJQL(DefaultJQLValidator.java:92)\r\ncom.atlassian.confluence.plugins.jiracharts.DefaultJQLValidator.doValidate(DefaultJQLValidator.java:70)\r\ncom.atlassian.confluence.plugins.jiracharts.JiraChartMacro.execute(JiraChartMacro.java:97)\r\ncom.atlassian.confluence.extra.jira.executor.StreamableMacroFutureTask.renderValue(StreamableMacroFutureTask.java:96)\r\n...\r\nCaused by: com.atlassian.sal.api.net.ResponseException: java.net.SocketTimeoutException: Read timed out\r\ncom.atlassian.sal.core.net.HttpClientRequest.executeAndReturn(HttpClientRequest.java:118)\r\ncom.atlassian.plugins.rest.module.jersey.JerseyRequest.executeAndReturn(JerseyRequest.java:124)\r\ncom.atlassian.applinks.core.auth.ApplicationLinkRequestAdaptor.execute(ApplicationLinkRequestAdaptor.java:56)\r\ncom.atlassian.confluence.plugins.jiracharts.DefaultJQLValidator.validateInternal(DefaultJQLValidator.java:128)\r\ncom.atlassian.confluence.plugins.jiracharts.DefaultJQLValidator.validateJQL(DefaultJQLValidator.java:83)\r\n...\r\nmessage: Error executing Jira Issues Macro: com.atlassian.confluence.macro.MacroExecutionException : com.atlassian.sal.api.net.ResponseException: java.net.SocketTimeoutException: Read timed out\r\n{code}\r\n\r\nh3. Workaround\r\n{panel}\r\n*+Convert page to new editor via API+*\r\nMake a {{PUT}} request to this endpoint:\r\n{code:java}\r\nPUT https://<site-name>.atlassian.net/wiki/rest/api/content/<contentID>/convert?hash=0\r\n{code}\r\nThe request can be made with Basic authentication, using an API token as the password. [https://id.atlassian.com/manage-profile/security]\r\n * You can follow this guide to generate an API token: [Manage API tokens for your Atlassian account|https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/]\r\n{panel}","createDate":"2024-03-19T06:16:36.000+0000","comments":[]},{"summary":"Jira issue macro shows Time Spent field in seconds","key":"CONFCLOUD-77715","url":"https://jira.atlassian.com/browse/CONFCLOUD-77715","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira issue macro shows Time Spent and Σ Time Spent in seconds like below screenshot.\r\n!AtlassianSupport.png|width=380,height=279!\r\n\r\nIn Jira filter, it shows like \"1h\", \"1day\". \r\nJira issue macro on Confluence should display in same format.\r\nh3. Steps to Reproduce\r\n # Create/Edit page in Confluence\r\n # Add the New Jira Issue macro\r\n # Add fields \"Time Spent\" and \"Σ Time Spent\"\r\n\r\nh3. Expected Results\r\n\r\nTime Spent and Σ Time Spent should be displayed like \"1h\", \"1day\", as well as other time tracking field (Remaining Estimate, Original estimate).\r\nh3. Actual Results\r\n\r\nTime Spent and Σ Time Spent are displayed in seconds.\r\nh3. Workaround\r\n[Use the Jira legacy macro|https://support.atlassian.com/confluence-cloud/docs/insert-the-jira-issues-macro/#Use-the-Jira-legacy-macro], as it shows Time Spent and Σ Time Spent in \"1h\", \"1day\" format.\r\n","createDate":"2024-02-27T05:20:59.000+0000","comments":[{"text":"This is a huge issue for not only my scrum team, but all others in my company. We rely on this basic data and to not have it is ridiculous. The solution to go back and use the legacy version of this macro is also ridiculous. This bug should be prioritized much higher than LOW. Very disappointed.","author":"Meggan James"},{"text":"Hi all, fixing this would make my teams' work so much easier - I'd appreciate a higher priority a lot.\r\n\r\nThanks and best wishes,\r\n\r\nLisa","author":"lisa.ehrhardt"},{"text":"Hi all, we support our reporting for customers through Confluence.\r\n\r\nCan you make sure that this is fixed before you make any changes to legacy option? ","author":"Ioannis"},{"text":"Have to echo [~0bb25e18419b] as well as [~cffdc0d4296e] here - this seems to be a small bug, but impacts our daily work in a major way. \r\n\r\nPlease raise the priority of this bug and implement a solution ASAP, we really can't use the reporting currently due to this issue. ","author":"Markus Schumacher"},{"text":"Priority: {*}High{*}; Symptom Severity: *Major*\r\nRenders JQL queries in Confluence and any reporting useless.","author":"Deleted Account"},{"text":"Please fix it.","author":"Andres Oss"},{"text":"Is there any update on this issue?\r\n\r\nI recently created a JIRA macro in Confluence, and the *Time Spent* field displaying in seconds is not very useful or user-friendly. It would be great to have a more readable format.\r\n\r\nThank you","author":"Greg Zwierzynski"},{"text":"Please address the formatting issue. This inconsistency needs to be resolved. We can not use filters to monitor time spent without it. ","author":"Marko Šidlovský"},{"text":"My board in Confluence has no value when I try to show SUM ORIGINAL ESTIMATE vs SUM TIME SPENT.\r\n\r\nIt's pretty essential in tracking effort to have this info","author":"Patrice Lamothe"}]},{"summary":"Microsoft Word attachment cannot preview Korean Character in confluence page","key":"CONFCLOUD-77275","url":"https://jira.atlassian.com/browse/CONFCLOUD-77275","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: n/a\r\n\r\nWhen previewing a Microsoft attachment with Docx file that is written in Korean characters.\r\nThe content does not load the Korean characters.\r\nh3. Steps to Reproduce\r\n # Add an attachment macro\r\n # Upload the docx file which contains Korean characters\r\n # Proceed to click on view on the attachment\r\n\r\nh3. Expected Results\r\n\r\nThe content gets loaded\r\nh3. Actual Results\r\n\r\nThe Korean character does not get load\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-12-28T02:53:34.000+0000","comments":[{"text":"Hi, our work in one of the department has completely stopped due to this issue. We need this bug to be fixed asap or we can not continue with confluence plan.. please expedite this issue..   !image-2024-06-03-15-29-11-451.png!","author":"베스현승"}]},{"summary":"When exporting a page with full width tables to PDF, the table's width decreases and title is misaligned on the PDF file","key":"CONFCLOUD-77249","url":"https://jira.atlassian.com/browse/CONFCLOUD-77249","type":"Bug","priority":"","description":"h3. Issue Summary\r\n- When exporting a page with full-width tables to PDF, the table's width decreases on the PDF file.\r\n\r\nh3. Steps to Reproduce\r\n# Create or edit a Confluence page;\r\n# Add a table with full width;\r\n# Export the page to PDF;\r\n\r\nh3. Expected Results\r\n- The tables in the PDF file should look exactly the same as on the page;\r\n\r\nh3. Actual Results\r\n- The tables in the PDF file had their width decreased;\r\n\r\nh3. Workaround\r\n- Currently there is no known workaround for this behavior. A workaround will be added here when available.\r\n","createDate":"2023-12-20T12:37:48.000+0000","comments":[]},{"summary":"Smart Links not working with Box links if the same don't start with app.box.com on URLs ","key":"CONFCLOUD-76870","url":"https://jira.atlassian.com/browse/CONFCLOUD-76870","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn the new editing experience, we're able to use Smart Links with a variety of links, such as google drive, dropbox, figma and box links.\r\n\r\nHowever, even though it works for app.box.com links to be rendered as smart links if the same are pasted from the share copy link, the same don't work if the link is not from the share link on box.com and if the link has the name of the company, such as companyname.box.com/s/filename instead of app.box.com/s/filename, the links doesn't render as smart links.\r\n\r\nh3. Steps to Reproduce\r\n # Create a new page\r\n # Paste a link from box.com from the share file link that has the similar link companyname.box.com/s/filename\r\n # With the same URL link, replace the companyname with the \"app\" word, it should be like app.box.com/s/filename\r\n\r\n\r\nh3. Expected Results\r\nBoth URLs links are valid and render as Smart Links\r\n\r\nh3. Actual Results\r\nOnly the link as app.box.com/s/filename render as a Smart Link\r\n\r\nh3. Workaround\r\nReplace the companyname.box.com to use the app.box.com to render it as a smart link or use the ctrl + k (link macro) to enter the link a name to the file link shared.","createDate":"2023-10-31T08:21:45.000+0000","comments":[]},{"summary":"Migrated Jira macros do not show columns for custom fields in edit view","key":"CONFCLOUD-76688","url":"https://jira.atlassian.com/browse/CONFCLOUD-76688","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter migrating Confluence pages that contain Jira macros the edit page does not show the columns for custom fields but those columns still render. Example below. No columns are shown in the edit view except \"status\" but the columns still render in the macro:\r\n\r\n!image-2023-10-03-16-47-20-208.png|width=922,height=644!\r\n\r\n!image-2023-10-03-16-47-31-156.png|width=923,height=108!\r\n\r\n \r\nh3. Steps to Reproduce\r\n # Create Jira macro onprem inside Confluence page\r\n # Migrate page to cloud\r\n # Edit Jira macro and review Confluence columns\r\n\r\nh3. Expected Results\r\n\r\nAll columns in use should show in the edit view\r\nh3. Actual Results\r\n\r\nCustom fields are not shown in the edit view. Running Jira macro repair or redindexing has no effect on this behavior. This is because the custom field id's have changed during migration.\r\n\r\nh3. Workaround\r\n\r\nRemoving all custom fields from a macro and leaving only one built-in field, status for example, and then readding all the custom fields will show them correctly in the edit view going forward. This requires manual editing of all Jira macros however which is not scalable.","createDate":"2023-10-03T22:52:07.000+0000","comments":[]},{"summary":"Confluence Cloud - Space Migration Fails with this error message - 'Container did not start'","key":"CONFCLOUD-76657","url":"https://jira.atlassian.com/browse/CONFCLOUD-76657","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe customer is trying to migrate a bulk number of spaces using CCMA 3.4.15 and 3.4.17, they are seeing a large number of  spaces failing to migrate with this error message - 'Container did not start'.  The actual problem appears to occur in bulk uploads and not in a single space upload. \r\nh3. Steps to Reproduce\r\n # Launch CCMA 3.4.15 or 3.4.17\r\n # Attempt to Migrate the bulk number of spaces; most of those spaces are failing to migrate with this error - 'Container did not start'\r\n\r\nh3. Expected Results\r\n\r\nExpected all the spaces to be migrated without any problems.\r\nh3. Actual Results\r\n\r\nThe actual problem is occurring from import side\r\n{code:java}\r\n2023-09-27 18:27:26,101 ERROR [com.atlassian.migration-StepExecutionService:thread-19] [agent.service.stepexecutor.ProgressTracker] error Step failed, message: Import to cloud failed. Message: ERROR: new row for relation \"content_perm\" violates check constraint \"content_perm_valid_principal_fields\"; {code}\r\nh3. Workaround\r\n\r\nNo Workaround ","createDate":"2023-09-28T14:40:46.000+0000","comments":[{"text":"Hello, \r\n\r\nThis is Nilay from the Confluence team. I'm closing this bug as the check constraint mentioned no longer exists. \r\n\r\nThank you,\r\n\r\nNilay","author":"Nilay Modi"}]},{"summary":"Page Properties Report Macro columns not showing for Page Properties with header rows","key":"CONFCLOUD-76612","url":"https://jira.atlassian.com/browse/CONFCLOUD-76612","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: yes\r\n\r\nPage properties report macro columns are empty for page properties that contain a header row in the table.\r\nh3. Steps to Reproduce\r\n # Create a page with page properties macro and keep header row on (on by default) and add label to the page.\r\n # Create a page with page properties report macro and add any columns to show from page properties macro and filter by label\r\n\r\nh3. Expected Results\r\n\r\nThe data from the columns show\r\n\r\n!image-2023-09-22-11-29-59-736.png!\r\n!image-2023-09-22-11-32-23-591.png!\r\nh3. Actual Results\r\n\r\nThe columns are empty in the page properties report macro even though it exists in page properties macro\r\n\r\n!image-2023-09-22-11-30-46-419.png!\r\n!image-2023-09-22-11-31-20-516.png!\r\nh3. Workaround\r\n\r\nThere is a workaround by removing the header row option\r\n\r\n!image-2023-09-22-11-39-55-604.png|thumbnail! \r\n!image-2023-09-22-11-37-32-918.png!","createDate":"2023-09-22T15:40:20.000+0000","comments":[]},{"summary":"Custom export PDF fails for some trees in a space with a significant amount of pages","key":"CONFCLOUD-76505","url":"https://jira.atlassian.com/browse/CONFCLOUD-76505","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe overall scenario:\r\n * User is not able to use the feature *custom export PDF*\r\n * User is trying to export a single tree\r\n * About 13000 pages in the space\r\n * For some reasons It seems that the system is trying to convert all the pages to HTML before the actual PDF export\r\n\r\n!image-2023-09-08-13-45-51-085.png|width=383,height=168!\r\n\r\n \r\nh3. Steps to Reproduce\r\n\r\nMore details in the ticket CES-18979\r\nh3. Expected Results\r\n\r\nThe custom export PDF should work for any tree\r\nh3. Actual Results\r\n\r\nFor some trees, the custom export pdf fails\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-09-08T11:51:02.000+0000","comments":[{"text":"At this point we are not prioritizing this due to low usage at this scale, we will revisit in the future.","author":"Steven Bao"}]},{"summary":"calling the `/pages` api on some page ids has an error in the response","key":"CONFCLOUD-76283","url":"https://jira.atlassian.com/browse/CONFCLOUD-76283","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (yes)\r\nh3. Steps to Reproduce\r\n # call the API \r\n\r\n\r\n{code:java}\r\nhttps://hello.atlassian.net/wiki/api/v2/pages\\?id\\=2766555794\\&body-format\\=atlas_doc_format {code}\r\nor any of the following page ids:\r\n\r\n \r\n{code:java}\r\nari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/246677534ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/258611343ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/258616626ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/346652934ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/510593188ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/510595583ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/512394973ari:cloud:confluence:1ac9888e-7a2a-42ba-bc86-4bba23ef701b:page/512397038ari:cloud:confluence:2c128141-4216-4aa1-b772-16c2c3ed876a:page/380774280ari:cloud:confluence:2c128141-4216-4aa1-b772-16c2c3ed876a:page/861870074 {code}\r\n \r\n # see 200 HTTP result body\r\n # the response `body.atlas_doc_format.value` is not a valid JSON\r\n\r\n \r\n{code:java}\r\n\"body\":{\"atlas_doc_format\":{\"value\":\"<div class=\\\"error fatal-render-error\\\">Error: RuntimeException occurred while performing an XHTML storage transformation (Expected one of [tfoot, thead, tbody, tr] start elements but got: *)</div>\" {code}\r\n \r\n\r\n \r\nh3. Expected Results\r\n\r\n1. when requesting for the query param `body-format\\=atlas_doc_format` in the `/v2/pages` API, it should return a valid ADF doc should that is a valid JSON. \r\n2. if `/v2/pages` fails to convert, it should not return a 200\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n\"body\":{\"atlas_doc_format\":{\"value\":\"<div class=\\\"error fatal-render-error\\\">Error: RuntimeException occurred while performing an XHTML storage transformation (Expected one of [tfoot, thead, tbody, tr] start elements but got: *)</div>\"  {noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior.","createDate":"2023-08-03T15:04:45.000+0000","comments":[]},{"summary":"Custom space pdf export times out on building the page tree","key":"CONFCLOUD-76114","url":"https://jira.atlassian.com/browse/CONFCLOUD-76114","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen performing a custom space export for a huge space, building of the tree can hit the proxy time-out and the custom export cannot proceed.\r\nh3. Steps to Reproduce\r\n # Identify a huge space\r\n # *Space Tools > Content Tools > Export > PDF > Custom*\r\n\r\nh3. Expected Results\r\n\r\nThe page tree should be loaded and the user can choose which pages to export.\r\nh3. Actual Results\r\n\r\nThe following error message appears after 60 seconds.\r\n{noformat}\r\nError Loading Pages An error was encountered loading page for the space SPACEKEY. Please contact your administrator for help. error: url=/wiki/spaces/flyingpdf/flyingpdftree.action params=key=SPACEKEY {noformat}\r\nh3. Workaround\r\n\r\nMove the pages to be exported to the TOP of the page tree. Then attempt the custom export again.","createDate":"2023-07-06T08:47:50.000+0000","comments":[{"text":"Hi,\r\n\r\nThere are spaces that have more than 1 million pages so the custom pdf export that is located at the Space level will never work for these spaces.\r\n\r\nMaybe, is better to add menu under Page Export to -> Word/PDF, to flip between current page versus current page + all child pages (no minitree as it will lead to the same problem with a page that has 1 million children pages).\r\n\r\nThis way is faster for users too, they most likely just edited or looked at the page to be exported, rather than having to go out into the Space level menus and Export from there.\r\n\r\n ","author":"Octavian Stanescu"},{"text":" \r\n\r\nHello!\r\n\r\nThis issue is also impacting our team.\r\n\r\nFor regulatory reasons due to the activity of our company, we have to provide some documetantions that one of our teams regulary export from a big confluence space - and recently it stoped working as expected.\r\n\r\n ","author":"Rafael Fernandez Coelho"},{"text":"The work around does not work for the space I am trying to export from. When \"Choosing pages for export\", I get the message \"Error Loading Pages\" before the list is displayed. Moving pages did not make a difference. I still get \"Error Loading Pages\" and cannot make page selections.","author":"Goldsworthy, Michelle L"},{"text":"As I mentioned, spaces can have a lot of pages (100K build out over the years) \r\n\r\nThe Custom Export doesn't work unless the GUI component is modified to display a subset (maybe take only a few tree level deep) then as the user selects individual nodes it expands these selections only.\r\n\r\n ","author":"Octavian Stanescu"}]},{"summary":"Questions for Confluence Votes not working after S2C migration","key":"CONFCLOUD-75755","url":"https://jira.atlassian.com/browse/CONFCLOUD-75755","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nQuestions that have been migrated from Server to Cloud will experience a behavior where their vote count will not update after an up/down vote.\r\nh3. Steps to Reproduce\r\n # Migrate Question from Server to Cloud environment\r\n # Have User A upvote the question\r\n # Have User B upvote the question\r\n # Have User B refresh the page\r\n # Vote will return to previous vote count\r\n\r\nh3. Expected Results\r\n\r\nVotes should display correct count\r\nh3. Actual Results\r\n\r\nThe frontend grabs the up/down vote. The Backend doesn't process it. The UI will return to previous vote count.\r\nh3. Workaround\r\n\r\nRecreate the Question.","createDate":"2023-04-26T19:45:15.000+0000","comments":[]},{"summary":"Scroll bar lost after converting from TinyMC editor to Prose mirror editor","key":"CONFCLOUD-75646","url":"https://jira.atlassian.com/browse/CONFCLOUD-75646","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe horizontal scroll bar is lost when converting a table or page properties macro report from a TinyMC editor to a prose-mirror editor. Additionally, the table is not wysiwyg between the editor and renderer.\r\n\r\nh3. Steps to Reproduce\r\n # Create a TinyMC page and add a table that overflows \r\n # Copy the table\r\n # Go to Create a new page on your instance, and select the ‘Legacy Editor’ template when creating.\r\n # Paste the table or page properties report macro on the page, should see a horizontal scroll bar.\r\n # Publish the page\r\n # Edit the page again, you should be able to see a notification saying you can convert the page to use the new Editor.\r\n # Follow the notification to convert the page\r\n # The horizontal scroll is gone after convert\r\n # Check the editor and renderer, you can see the scroll is not consistent between them.\r\n # Please Check [^table scroll bar.mov]for more details.\r\n\r\nh3. Expected Results\r\n\r\nThe scroll bar should be maintained after the conversion\r\nh3. Actual Results\r\n\r\nThe scroll bar is lost. Additionally, the table is not wysiwyg.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behaviour. A workaround will be added here when available","createDate":"2023-04-06T16:56:46.000+0000","comments":[{"text":"I am missing the scroll/slide bar in Confluence Cloud (see attachment).\r\n\r\nIt appears only at the end of the page but this is very problematic if you manage a long list. The Confluence server version had this scroll/slide bar in the middle of the page as well.\r\n\r\nThere was this scroll bar in the old version of confluence! ","author":"Katarina Mueras Jiménez"}]},{"summary":"Attachments macro doesn't add labels to uploaded attachments when dragged and dropped","key":"CONFCLOUD-75617","url":"https://jira.atlassian.com/browse/CONFCLOUD-75617","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Attachments macro can be configured to filter the list of attachments by labels. When this is configured, uploading attachments by clicking the \"browse for files\" macro will apply those labels to the uploaded attachments.\r\n\r\nHowever, the labels don't get added when using the drag-and-drop target in the macro.\r\nh3. Steps to Reproduce\r\n # Step: Create a page and add an attachments macro with the filter label.\r\n # Step: Now drag and drop an attachment.\r\n\r\nh3. Expected Results\r\n\r\nThe label is expected to be added to the attachment.\r\nh3. Actual Results\r\n\r\nThe label is not added to the attachment using drag-and-drop but when we try to \"browse for files\" and upload, it adds the label.\r\nh3. Workaround\r\nIf files are uploaded using drag-and-drop, then go to the page > More > Attachments, click and add the label for the desired attachment.","createDate":"2023-04-03T07:48:15.000+0000","comments":[{"text":"{panel:title=Atlassian Update - March 31, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Confluence users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\n{panel}","author":"Matthew Hunter"}]},{"summary":"iFrame macro in Confluence Mobile loads indefinitely","key":"CONFCLOUD-75616","url":"https://jira.atlassian.com/browse/CONFCLOUD-75616","type":"Bug","priority":"","description":"h3. Issue Summary\r\niFrame macro loads indefinitely when viewing pages in Confluence Mobile. This happens intermittently.\r\n* Observed on iOS 16.3.1\r\n\r\nh3. Steps to Reproduce\r\n # Create a page\r\n# Add an iFrame macro\r\n# Add any URL (i.e. [Insert the iFrame macro|https://support.atlassian.com/confluence-cloud/docs/insert-the-iframe-macro/])\r\n# Publish page\r\n# View page on Confluence mobile app\r\n\r\nh3. Expected Results\r\nMacro loads as expected\r\n\r\nh3. Actual Results\r\niFrame loads indefinitely and content is not displayed. \r\n\r\nh3. Workaround\r\nLoading the page once again may fix the issue, as this behaviour is intermittent.","createDate":"2023-04-03T07:41:37.000+0000","comments":[{"text":"{panel:title=Atlassian Update - March 31, 2025|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Confluence users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\n{panel}","author":"Matthew Hunter"}]},{"summary":"<Cannot preview PDF from attachment macro> <on Confluence page>","key":"CONFCLOUD-75321","url":"https://jira.atlassian.com/browse/CONFCLOUD-75321","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCannot preview PDF from attachment macro.\r\nTrying to preview a PDF via the attachments macro displays a blank div. Previewing other attachment types work fine.\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Create a new page\r\n # Attach a PDF file\r\n # Insert the Attachments macro\r\n # Publish the page\r\n # Click the > button next to the PDF filename, to expand the preview area.\r\n\r\nh3. Expected Results\r\n\r\nThe attachment displays a preview of the PDF.\r\nh3. Actual Results\r\n\r\nAn empty area appears where the preview should be.\r\n\r\n!image-2023-02-10-21-26-52-113.png|width=307,height=254!\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-02-10T15:55:55.000+0000","comments":[]},{"summary":"Copy REST API returns 504 for pages with many attachments","key":"CONFCLOUD-75318","url":"https://jira.atlassian.com/browse/CONFCLOUD-75318","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWrong API response for /copy REST API.\r\nh3. Steps to Reproduce\r\n # create a page with 1000 attachments.\r\n\r\n # call below REST API\r\n\r\n\r\n{code:java}\r\nhttps://YOUR_SITE.atlassian.net/wiki/rest/api/content/PAGE_ID_WITH_1000_ATTACHEMNTS/copy\r\nbody:\r\n{\r\n  \"copyAttachments\": true,\r\n\t\"destination\": {\r\n    \"type\": \"parent_page\",\r\n    \"value\": \"PAGE_ID_WITH_1000_ATTACHEMNTS\"\r\n  },\r\n  \"pageTitle\": \"copy_test\"\r\n}\r\n {code}\r\n \r\n\r\nh3. Expected Results\r\nPage copied and API should return 200.\r\n \r\nh3. Actual Results\r\n\r\nPage copied and API returns 504.\r\n\r\nh3. Workaround\r\n\r\nUse [/pagehierarchy/copy|https://developer.atlassian.com/cloud/confluence/rest/v1/api-group-content---children-and-descendants/#api-wiki-rest-api-content-id-pagehierarchy-copy-post] instead of /copy","createDate":"2023-02-10T14:33:48.000+0000","comments":[{"text":"Hi all \uD83D\uDC4B Also an important aspect to take into account is to *allow users to discard attachments that are no longer used in the current version* of the page. Let's say the page relies heavily on images and since its creation, 64 versions have been created. Each version has an average of 20 image changes. At version 65 you'll end up with a huge amount of attachments that might not need to be parsed or even copied over to the new page.","author":"Guillaume Cheseaux"},{"text":"@Damian thanks for finding this!","author":"Adrian Kupis"},{"text":"Hi team, please reconsider the priority of this issue. Before, on Server, we used to have most of our attachments under the space's Attachments directory. This directory has been moved to our space's root page in Cloud. So now we ended up with one page having over 4000 attachments in each version.\r\n\r\nIn our company we use Scroll Documents to manage the versions of our documentation on the Cloud. Because of this bug, the said page cannot be copied and hence, we cannot create a new version of our documentation. \r\n\r\nThis is a huge blocker. Because of this we cannot publish our documentation to our customers as we cannot have new versions.  And because of this we are still using Confluence Server whereas we were planning on going live with the Cloud version in July. \r\n\r\nAs the Server support is approaching its end of life and we cannot switch to Cloud because of this bug, we seem to be stuck and that is why the resolution of this bug is essential to us.","author":"Dima Ilieva"},{"text":"Hello,\r\n\r\nThis issue cost me several week of delay in getting my Confluence [Product]Manual to produce a Scroll Document Version to publish to our online Help Centers (several weeks after the Prod version of the Product was released) .\r\n\r\nAt first I opened a Support ticket with Confluence and the support guy closed the ticket insisting this was not a Confluence issue but rather a \"3rd Party product issue\" (i.e., Scroll Doc /K15t Support issue). I was not impressed :( as up to this point I have enjoyed excellent support from Atlassian. \r\n\r\nScroll / K15t Support were much more diligent in helping me and directed me to look at the 1st Page (I call it the manual title page) “Attachments”. There were 299 “Attachments” (but there were actually no images on this title page). Then he directed me to install another 3rd party product called “Attachment Manager”. \r\n\r\nOnce I quickly got rid of the 299 “unused” attachments on my Manual Title Page with Attachment Manager I was able to successfully create a new Scroll Doc version.\r\n\r\nI’m not thrilled that we have to buy this “Attachments Manager” to fix what seems to be a Confluence bug or at least attachment management shortcoming - that's why I'm casting my vote on this  CONFCLOUD-75318- Copy REST API returns 504 for pages with many attachments) issue.\r\n\r\nPlease bump up the priority of this issue.\r\n\r\nAlso, please advise the Confluence Support Team about this issue & this workaround “Attachment Manager” so others won't be impeded by this issue. [https://marketplace.atlassian.com/apps/1222381/attachments-manager-for-confluence?hosting=cloud&tab=overview]\r\n\r\nThanks\r\n\r\nKind Regards,\r\n\r\nSheila Glass","author":"Sheila Glass"},{"text":"This is causing a significant impact on the team approaching a deadline.  I'm currently refactoring the page for one of the engineers (due to timescales) and having to manually manage all the attachments is a really bad user experience.","author":"Gareth Jones"},{"text":"The large attachment count has become a limitation in all of the translation tools I've tried to adopt. We cannot localize our documentation because the translation tools timeout before we can get the translation completed. Please re-prioritize this issue. ","author":"lainie.berger.davis"},{"text":"Hello,\r\n\r\nThe endpoint also returns 504 on pages with 200 attachments and there isn't a homogenous error response. We get an *Internal server error* as a message and sometimes an HTML format as a message with the title *{{Something went wrong}}* and body *We're moving mountains to get it sorted.*\r\n\r\n\r\n\r\nThe workaround does not help in our case (Comala Publishing Cloud), since we need some functionality of the affected endpoint, like the destination params. With the workaround endpoint you can not copy a page in a specific space as a root page, only accept copying the page in an existing page ID ({*}destinationPageId{*}) and you can not replace the content page on an existing page, if the page already exists the endpoint returns a 400 status with message {*}com.atlassian.confluence.api.service.exceptions.BadRequestException: The copied content tree has conflicting titles. Please specify a title prefix to avoid conflict.{*}{*}{{*}}\r\n\r\nSince more of our clients are migrating from server to cloud, we are having more support tickets related to this problem. The problem dates back to last year and has still not been solved. Please, reconsider the priority of this issue or give us a workaround that could fit our case when you need the same functionality of the affected endpoint.\r\n\r\nThanks.","author":"Miguel Angel Zapatero"},{"text":"The workaround will not work for us as it's completely functionally different - you cannot update existing pages using the hierarchy copy, which is a core feature of our use case, and you additionally do not receive information about the created page, another core requirement of our use case. Due to these limitations, and the nature of the endpoints actually being quite different, I'm not sure that the workaround can really be labeled as a workaround.","author":"James Gwynne"},{"text":"Since Confluence lacks a native translation tool, this has become a major issue for us. The high number of attachments poses a significant limitation with every translation tool we've attempted to use.","author":"Amitab"}]},{"summary":"Custom emojis can't be rendered in macros","key":"CONFCLOUD-75137","url":"https://jira.atlassian.com/browse/CONFCLOUD-75137","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCustom emojis can't be rendered in macros, such as blogpost macro, page properties report macro, task report macro, etc\r\n\r\nNote: Custom emojis are those uploaded to Confluence via the [\"add your own emoji\"|https://support.atlassian.com/confluence-cloud/docs/use-symbols-emojis-and-special-characters/] feature\r\nh3. Steps to Reproduce\r\n * Add custom emoji in a task, Try render it in task report macro\r\n * Add custom emoji in a blog, Try render it in blogpost macro\r\n * Add custom emoji in a page property macro, Try render it in page property report macro\r\n * ...\r\n\r\nh3. Expected Results\r\n\r\nThe emoji can be rendered as we've seen it in editing mode.\r\nh3. Actual Results\r\n\r\nThe emoji can't be displayed, it shown as {{:text:}}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-01-11T07:22:41.000+0000","comments":[{"text":"Hi, the issue is happening in task report marco:\r\n\r\n[https://atlassian.slack.com/archives/C01A4QC2SA2/p1702520483432969]\r\n\r\n ","author":"xtan"},{"text":"We're also seeing this on the include page macro. Custom emojis are being replaced with a red triangle with a ! in the middle.","author":"mahima.chander"}]},{"summary":"Legacy Editor Table always tries to fit window size and will squish images","key":"CONFCLOUD-74997","url":"https://jira.atlassian.com/browse/CONFCLOUD-74997","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: NA\r\nh3. Steps to Reproduce\r\n # Step 1 Create a table in the legacy editor and populate the cells with images\r\n # Step 2 Set the images to have a fixed size\r\n # Step 3 Set the table to have a fixed width and ensure that the table has plenty of space in the cells for the images.\r\n # Step 4 Publish the page and view the page while making your viewport/browser smaller\r\n\r\nh3. Expected Results\r\nA table gets a horizontal scrollbar to maintain the width of the images\r\n\r\nh3. Actual Results\r\n\r\nimage width gets \"squished\" to force the table to fit the screen\r\n\r\nh3. Workaround\r\n\r\nReducing the Zoom on the browser may work in some scenarios.","createDate":"2022-12-06T21:20:52.000+0000","comments":[]},{"summary":"Open the KB article in new tab redirects to confluence","key":"CONFCLOUD-74762","url":"https://jira.atlassian.com/browse/CONFCLOUD-74762","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nChildren macro on the KB space is not converting the links to the service desk knowledge base but redirecting the customers to confluence.\r\nh3. Steps to Reproduce\r\n # Create a knowledge base space in confluence and link it to a Service management project.\r\n # Create page A ( with child pages) in the KB space with children macro to display the child pages. \r\n # Access the knowledge article A from the service desk portal as a customer\r\n # Right-click on the page URL displayed in children macro and open the link in a new tab\r\n\r\nh3. Expected Results\r\n\r\nThe links in the service desk portal should open in the Service desk only not in the confluence\r\nh3. Actual Results\r\n\r\nRight Click and open in a new tab leads to a confluence URL that the customers don't have access to\r\n\r\n*Note*: This bug affects all other Confluence macros that generates hyperlinks as well. (E.g: Table of content, Page properties report)\r\n\r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-10-25T09:00:40.000+0000","comments":[]},{"summary":"Moving pages between spaces breaks images with links","key":"CONFCLOUD-74478","url":"https://jira.atlassian.com/browse/CONFCLOUD-74478","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nThis issue only happens when moving multiple pages at the same time and is consistently reproducible.\r\n\r\nWhen moving a page tree between two spaces, if one of the pages contains {*}attachments with links pointing to pages within the same page tree{*}, the attachments will break. \r\n\r\n*Please view attached screen recording to follow steps to reproduce.*\r\n\r\nThe move page with has the proper source code like the screenshot below, but still shows \"unknown attachment\"\r\n\r\n!image-2023-09-18-10-37-23-999.png!\r\n\r\n \r\nh3. Environment\r\n * Confluence Cloud\r\n\r\nh3. Steps to Reproduce\r\n\r\n \r\n\r\n1. Create page page tree. Here's an example:\r\n{code:java}\r\nParent page\r\n├─ Child page 1\r\n├─ Child page 2  \r\n└─ Child page 3{code}\r\n2. Add attachments to the parent page.\r\n\r\n3. Copy the link from the child pages.\r\n\r\n4. Add the links from the child pages to each of the attachments.\r\n\r\n5. Move the page tree to a different space.\r\n\r\n \r\nh3. Expected Results\r\n\r\nThe attachments shouldn't break\r\nh3. Actual Results\r\n\r\nThe attachments containing links to pages that were moved together will break. They display as \"Unknown Attachments\".\r\n\r\n!image-2022-08-25-14-10-26-352.png|width=226,height=218!\r\nh3. Workaround\r\n\r\nThere are two ways to prevent this issue from happening:\r\n # Users can move the pages individually. That is, first move the page containing the attachments with links, then the other pages.\r\n # Make a copy of the pages instead of moving them. Depending on the scenario, that's not a good choice as the author of the page will change and the page history will be lost.\r\n\r\nh3. Note\r\n\r\nThis issue is very similar to the behavior described on CONFCLOUD-63034.","createDate":"2022-08-25T17:13:52.000+0000","comments":[{"text":"I've added a comment to the closed version of this issue (since I found that before I found this one). The issue is still very much alive and definitely deserves attention. See my comment on https://jira.atlassian.com/browse/CONFCLOUD-63034","author":"Bart Bream"}]},{"summary":"[PDF Export] Jira Issues don't render properly when Table of Content Macro present","key":"CONFCLOUD-74069","url":"https://jira.atlassian.com/browse/CONFCLOUD-74069","type":"Bug","priority":"","description":"h3. Summary\r\nIt has been observed that when a Confluence page contains a Table of Content (TOC) macro with the \"Printable\" option selected then the Jira issues on the PDF export will not be rendered properly. It will show \"Getting issue details...\" instead of the issue summary.\r\n\r\nh3. Steps to Reproduce\r\n# Add a Table of Content Macro\r\n# Add some Jira issues to a Confluence page\r\n# Edit the TOC macro and check the option Printable is activated\r\n# Export page to PDF\r\n\r\nh3. Expected Results\r\nJira issues render in exported PDF file\r\n\r\nh3. Actual Results\r\nJira issues do not render properly:\r\n !image-2022-06-02-07-17-53-158.png|thumbnail! \r\n \r\n\r\nh3. Workaround\r\n- Turn off the \"Printable\" option in the TOC Macro setting\r\n**  !Screen Shot 2022-09-29 at 11.44.48.png|thumbnail! \r\n**  !image-2022-06-02-07-19-23-383.png|thumbnail! \r\n","createDate":"2022-06-01T21:24:10.000+0000","comments":[{"text":"We export an cross-team sprints-summary release notes from confluence every 2 weeks to share with the rest of our company. I'd like to continue to be able to use the Table of Contents, since it's a multi-page pdf, while also still render the Jira issues properly.","author":"abby.kaske"},{"text":"Hi [~pferreira@atlassian.com] and everyone,\r\n\r\nThis is Kateryna from the Confluence team. Thank you for raising this bug and bringing it to our attention. After our investigation into this issue, we weren’t able to reproduce the behavior within our instances. We would like to get to the root cause of what you’re experiencing. Could you provide some more details or a screenshot to help us narrow down this case?\r\nWe will keep this issue open for another 14 days, but if we don’t hear back by then we will need to close this out to focus on our upcoming roadmap for all Confluence users.\r\n\r\nBest,\r\nKateryna","author":"Kateryna Barmina"},{"text":"I am still seeing the issue as described when the TOC is Printable. !image-2022-11-21-11-27-11-779.png!","author":"abby.kaske"},{"text":"I was able to reproduce the problem in one of our customer's instance, but the workaround helped.","author":"Ferenc Nagy [Appnovation]"},{"text":"The workaround is just thst - a workaround. I'd like a proper solution.","author":"luke west"},{"text":"The workaround seems not to be functional anymore. My best quess would be that somebody changed the functionality of the exclude tickbox and now it somehow messes up. \r\n\r\nThe other workaround of having TOC in the end of the document however still works. ","author":"Lasse Suvanto"},{"text":"We are working on a new batch of improvements to our V2 PDF functionality so that we can deprecate V1 PDF and issues associated with it such as this. We estimate to release by the end of November 2024. Stay tuned!","author":"Joseph Larson"}]},{"summary":"Unable to export content from inside a Html macro while doing Html export","key":"CONFCLOUD-73936","url":"https://jira.atlassian.com/browse/CONFCLOUD-73936","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen exporting a space to HTML the content added to a Dynamic content macro is not exported.\r\n\r\nThis is not reproducible on Data Center.\r\nh3. Steps to Reproduce\r\n # Create a new page and apply the *HTML macro* using the plugin [https://marketplace.atlassian.com/apps/252/html-for-confluence?hosting=cloud&tab=support]\r\n # On the HTML macro, generate an SVG image ([HTML5 SV Graphics|https://www.w3schools.com/html/html5_svg.asp]) and publish the page\r\n # Export the space containing the recently created page in {*}HTML format{*}.\r\n\r\nh3. Expected Results\r\n\r\nSvg content should be rendered in the html export and should be there in the html code as well\r\nh3. Actual Results\r\n\r\nSvg content is missing from the Html export\r\nh3. Workaround\r\n\r\nAdd svg image as an attachment to the page","createDate":"2022-05-04T20:17:55.000+0000","comments":[{"text":"This is *Priority 1 - Highest* category, not sure why it is tagged as low? It is impacting our work and we are not getting any help on this.","author":"Inderpal Yadav"},{"text":"Any update on this ticket ?\r\n\r\nThis is affecting our clients\r\n\r\n \r\n\r\nBest regards, Corentin[Requirement Yogi]","author":"Corentin"},{"text":"This longstanding issue is a critical blocker for our use of Confluence as a documentation system.  \r\n\r\nWe need to be able to create offline packages of our rich sites (using various add-on macros, including specifically Requirements Yogi) with the HTML export function for customer audit requirements and our information retention policies.\r\n\r\nThe only workaround at this time would be to license the Scroll HTML Exporter, which does make the necessary [https://developer.atlassian.com/cloud/confluence/modules/macro-render-modes/] API calls to reconstruct full HTML representations of the Confluence pages.\r\n\r\nThis seems like such an easy fix.  It already is working correctly for the PDF and Word exports, the absence in the HTML export is pretty egregious at this point.\r\n\r\nPerhaps Atlassian can gift us a free license to Scroll HTML exporter while they figure it out?","author":"Drew Cox"},{"text":"For reference, see also this forum post from 2022.\r\n\r\n[https://community.developer.atlassian.com/t/html-export-via-space-settings-doesnt-trigger-rendermodes-default-endpoint/57055]","author":"Drew Cox"}]},{"summary":"Converting a template from the legacy to the current editor will not work","key":"CONFCLOUD-72329","url":"https://jira.atlassian.com/browse/CONFCLOUD-72329","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen spaces or global templates are using the legacy editor, there will have an option to convert it so they can use the current/new editor of Confluence.\r\n\r\nDepending on how the edit mode for them is structured, a different result will happen, but, the template will not get converted.\r\nh3. Steps to Reproduce\r\n # Make sure to have templates that were created with the legacy editor.\r\n # On a space that has the template, the *Convert* option {*}may or may not be displayed{*}.\r\n # Tap the *Convert* button is visible and confirm the conversion after the preview.\r\n\r\nh3. Expected Results\r\n\r\nAfter the preview and confirmation, the template should be converted to the new/current editor.\r\nh3. Actual Results\r\n * *Convert button Not available*\r\n * If tapping the *Edit* button of the template redirects to the legacy editor mode ([https://example.atlassian.net/wiki/pages/templates2/editpagetemplate.action?entityId=ID_HERE&key=SPACE_KEY]), upon tapping the *Convert* button, a message stating that the conversion has worked will be displayed, but the template will still use the legacy editor:\r\n!success_template.png|thumbnail!\r\n * If the edit mode automatically has the template in the new/current editor ([https://example.atlassian.net/wiki/spaces/SPACE_KEY/templates/edit/TEMPLATE-ID]), upon tapping the *Convert* button, a message stating that the template could not be found will be displayed:\r\n!not_found.png|thumbnail!\r\n\r\nh3. Workaround\r\n * When convert button is not available manually re-create the template using the current/new editor\r\n * For the scenarios where the \"edit\" button redirects to the new/current editor, use the \"Edit\" button and publish the template, which will convert it to the new editor.\r\n * For the scenarios where the \"edit\" button will redirect to the legacy one, manually re-create the template using the current/new editor","createDate":"2021-06-22T20:08:05.000+0000","comments":[{"text":"We have this same issue that started in our Confluence Cloud environment since this week. We were able to edit legacy editor-templates last week without issues. Since this used to work, I don't see how suddenly people have to be forced to switch to the new editor without any prior warning. Can this be fixed as soon as possible please?","author":"hans.polder"},{"text":"We do have the same issue since this week. Please fix the issue.","author":"blockchainmaster3000"},{"text":"My customers are getting upset.....conversion allows for editing, but this may corrupt some macros","author":"Carsten Schäfer"},{"text":"I have a feeling it is working again (Editing a legacy template that came from SERVER)....can anyone confirm? ","author":"Carsten Schäfer"},{"text":"This ticket will be lowered in priority from High to Medium, given that editing legacy templates has been resolved in this ticket here: CONFCLOUD-77324.","author":"Clare Jeon"}]},{"summary":"Jira issue macro doesn't display data from custom fields created in Next-gen projects","key":"CONFCLOUD-72046","url":"https://jira.atlassian.com/browse/CONFCLOUD-72046","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen adding the Jira issues macro to display information from a Next-gen project in a Confluence page, the data from the custom fields don't appear.\r\n\r\nh3. Steps to Reproduce\r\n*In Jira*\r\n # Create a next-gen project in Jira.\r\n# Create a custom field to an issue type.\r\n# Create new issues using this issue type.\r\n# Populate the custom field.\r\n\r\n*In Confluence*\r\n# Create a page.\r\n# Add the Jira issue macro to the page.\r\n# Select the issues you have just created in Jira.\r\n# Under display options, choose the custom field you created previously.\r\n\r\nh3. Expected Results\r\nThe data from the custom fields should be displayed in Confluence.\r\nh3. Actual Results\r\nThe column for the custom fields shows blank in Confluence.\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-04-26T14:34:00.000+0000","comments":[{"text":"Was informed that this may have had fix applied, but confirmed that this issue still exists and is not fixed.  ","author":"Jason Eslick"},{"text":"We have multiple users that are affected by this. I am submitting a ticket today. I have spoken with Jagriti Mahto and Isaac Spann in support already. ","author":"Brian Jarvis"},{"text":"+1","author":"Surendra Bisoyi"},{"text":"This bug is affecting the rollout of some of our team-managed projects.   Surprisingly, this severity 2 major bug has been open since 2021. ","author":"Brian Taylor"}]},{"summary":"Changes made to a draft with REST API won't take effect on the editor","key":"CONFCLOUD-71499","url":"https://jira.atlassian.com/browse/CONFCLOUD-71499","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen updating a draft using the REST API (PUT /wiki/rest/api/content/\\{id\\}?status=draft), the draft's body.storage will be updated but those changes won't take effect on the editor.\r\n\r\nWhen the page is edited through the UI, the old contents are shown.\r\nh3. Steps to Reproduce\r\n # Create a page and copy its ID\r\n # Perform the following request (replace the PAGE_ID and the INSTACE_URL)\r\n{code:js}\r\nfetch(\"https://INSTACE_URL/wiki/rest/api/content/450953226?status=draft\", {\r\n    \"headers\": {\r\n        \"content-type\": \"application/json\",\r\n    },\r\n    \"body\": \"{\\\"version\\\":{\\\"number\\\":1},\\\"type\\\":\\\"page\\\",\\\"status\\\":\\\"draft\\\",\\\"title\\\":\\\"Page title - updated through API\\\",\\\"body\\\":{\\\"storage\\\": {\\\"value\\\": \\\"<p>Test draft</p>\\\",\\\"representation\\\": \\\"storage\\\"}}}\",\r\n    \"method\": \"PUT\",\r\n}){code}\r\n\r\n # Edit the page through the UI\r\n\r\nh3. Expected Results\r\n\r\nThe draft should contain \"Test draft\"\r\nh3. Actual Results\r\n\r\nThe draft still shows the old contents\r\nh3. Workaround\r\n\r\nCurrently, the only available workaround is to force the draft to refresh through the following request after the update:\r\n{code:js}\r\nfetch(\"https://INSTANCE_URL/wiki/rest/synchrony/1.0/content/PAGE_ID/recovery?behind=SYNCHRONY\", {\r\n  \"headers\": {\r\n    \"accept\": \"*/*\",\r\n  },\r\n  \"body\": null,\r\n  \"method\": \"PUT\"\r\n});{code}","createDate":"2021-01-28T21:43:23.000+0000","comments":[]},{"summary":"In-editor inline comments don't show within third-party macros","key":"CONFCLOUD-71242","url":"https://jira.atlassian.com/browse/CONFCLOUD-71242","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWith the new inline comments feature, working on Confluence got easier with the possibility to add these comments from within the editor. \r\n Though that's a great feature, it seems it is not working well when an inline comment is being added within a third-party macro.\r\nh3. Steps to Reproduce\r\n # Install one of the below third-party add-ons on Confluence (for example):\r\n ** [Numbered Headings|https://marketplace.atlassian.com/apps/16063/numbered-headings?hosting=cloud&tab=overview];\r\n ** [Table Filter and Charts for Confluence|https://marketplace.atlassian.com/apps/27447/table-filter-and-charts-for-confluence?hosting=cloud&tab=overview];\r\n** [Content Formatting Macros for Confluence|https://marketplace.atlassian.com/apps/247/content-formatting-macros-for-confluence?hosting=cloud]\r\n # Create a new page;\r\n # Insert a macro from one of the installed add-ons;\r\n # After typing some text within the macros, add an inline comment somewhere in this text;\r\n # Publish the page.\r\n\r\nh3. Expected Results\r\n\r\nThe inline comment is being shown in the text.\r\nh3. Actual Results\r\n\r\nNo inline comment can be seen.\r\n\r\n*Notes*:\r\n * It might be happening with other different third-party macros - the 2 mentioned above are just as an example, since they were macros we tested this behavior;\r\n * From the published page, if we add {{?focusedCommentId=COMMENT_ID#comment-COMMENT_ID}} at the end of the URL, the comment gets shown at the right side of the screen.\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior, but removing the content from within the macros will get the inline comment shown in the text.","createDate":"2020-12-02T13:24:33.000+0000","comments":[{"text":"As we use inline commenting more and more, we noticed that it works with (3rd party, for example the scroll exporter extensions for cloud.) macros in the editing mode of a page, but not after the page is published. \r\n\r\nThis is very confusing for our users. In editing mode, it is only useful for some situations. You can't see the comments if you look at the published page or add comments to a published page.\r\n\r\nAs we use inline commenting more and more, this significantly impacts the usefulness of Confluence for our users.","author":"Jor"}]},{"summary":"Space PDF Export timer is not acurate","key":"CONFCLOUD-70799","url":"https://jira.atlassian.com/browse/CONFCLOUD-70799","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen exporting a space, specially large ones, the timer does not represent the actual time to complete the whole export.\r\n\r\nh3. Steps to Reproduce\r\n # Access a space with complex and large pages, with many pages and child pages. \r\n# Go to Space Settings > Content Tools > Export\r\n # Choose PDF and export the space;\r\n\r\nh3. Expected Results\r\n* Timer should represent accurately the time for the process to complete.\r\n\r\nh3. Actual Results\r\n* Timer does not represent time to completion acurately, and may present users with a wrong estimate\r\n\r\n\r\nh3. Workaround\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-09-16T20:01:39.000+0000","comments":[]},{"summary":"Unchecking Text select checkbox does not disable the pop-ups","key":"CONFCLOUD-68244","url":"https://jira.atlassian.com/browse/CONFCLOUD-68244","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn Confluence, if the user unchecks the checkbox for *Show option panel when text is selected* in order to disable the pop-ups for Inline comments and Jira issues macro, it will not work/will not disable such features.\r\n\r\nh3. Steps to Reproduce\r\n# In Confluence go to your profile picture on the bottom of the sidebar and select *Settings*\r\n# There, make sure to *edit* the details and *uncheck* the *Text select* checkbox.\r\n# *Save* the configuration\r\n# Go to a page and highlight text\r\n\r\nh3. Expected Results\r\nNo pop-ups should be displayed when highlighting the text.\r\n\r\nh3. Actual Results\r\nThe pop-ups are still displayed.\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2019-10-18T21:52:00.000+0000","comments":[{"text":"{panel:title=Atlassian Update - October 16, 2021|borderStyle=solid|borderColor=#2684ff|titleBGColor=#2684ff|bgColor=#ffffff}\nHi everyone,\n\nThank you for previously raising this bug and bringing it to our attention.\n\nWithin our company roadmap and work capacity, we try to address or review each bug request but admit that not each one will be resolved. To continue the culture of being honest and open, we are closing this bug to focus on our upcoming roadmap for all Confluence users.\n\nAs we continue to roll out features we do look at requests made by our users and if you feel like this bug is still impacting your team please let us know.\n\nThank you again for providing valuable feedback to our team!\n{panel}","author":"Matthew Hunter"},{"text":"Incredible! You accept that the available options simply do not work.\r\nI've never seen anything like that before. An open statement that actually means that 'available software option does not work whatsoever, and we don't care, that's your problem.'\r\n\r\nBy the way - the priority is wrong. Based on Medium Severity definition:\r\n'The application or specific feature isn't working as expected, {*}but there is a workaround available{*}.'\r\n\r\nThere is no workaround available so that bug meets criteria of High Severity:\r\n{*}A feature is unavailable{*}, application performance is significantly degraded, or users job functions are impaired.","author":"Zbigniew Piotrowicz"},{"text":"If you have a Userstyle Addon like Stylus in your browser, you can add the following CSS to it to hide the popup:\r\n{code:css}\r\ndiv#highlight-actions-portal-container {\r\n    display: none;\r\n}\r\n{code}\r\n\r\nNot sure if this breaks anything else, but at first glance it works.","author":"Dennis Stengele"},{"text":"Is there a way to adjust this same concept at the Space or the entire Confluence product level?","author":"Peter Gilchrist"}]},{"summary":"Inserting Markdown on Markup Macro does not work","key":"CONFCLOUD-65789","url":"https://jira.atlassian.com/browse/CONFCLOUD-65789","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe markdown content is not rendered when inserted on the Markup macro and selecting the \"Markdown\" syntax.\r\n\r\nh3. Environment\r\n- Old editor\r\n\r\nh3. Steps to Reproduce\r\n# Create a page\r\n# Insert a Markup Macro\r\n# Choose *Markdown* on the syntax selector\r\n# Paste the Markdown text\r\n# Publish the page\r\n\r\nh3. Expected Results\r\nThe page would render the content properly\r\n\r\nh3. Actual Results\r\nThe raw Markdown text is inserted. \r\n\r\nh3. Workaround\r\n- None","createDate":"2019-03-07T21:59:01.000+0000","comments":[{"text":"As per [https://getsupport.atlassian.com/servicedesk/customer/portal/23/JST-753379,] this started affecting [https://codehaus-cargo.atlassian.net/wiki/spaces/CARGO/] recently (some weeks back) - Has there been a recent regression?\r\n\r\nSteps to reproduce:\r\n # Open [https://codehaus-cargo.atlassian.net/wiki/spaces/CARGO/pages/491587/WebSphere+8.5.x]\r\n # Click the Insert -> Markup option in the toolbar\r\n # Enter some markup (or, for that matter, just the word \"test\")\r\n # Click Insert\r\n\r\nThe Insert Markup screen goes blank after step 4, and nothing gets inserted.","author":"S. Ali Tokmen"},{"text":"Hi, [~4e36e42d8c01]!\r\n\r\nThank you very much for the observation, my friend.\r\n\r\nUpon checking and working on internal production environments, we can see that the behavior is different indeed and now, the macro cannot be used at all as tapping \"Insert\" makes it blank. For that, the following bug has just been created and all related cases were already added, which should make its priority be increased soon:\r\n * *Inserting markup on the legacy editor does not work* - https://jira.atlassian.com/browse/CONFCLOUD-73878\r\n\r\nThank you for your patience and understanding. Feel free to add yourself as a watcher there and express your thoughts through comments too!\r\n\r\nWish you the best, \r\nGiuliano C.\r\nAtlassian Team","author":"Giuliano C."},{"text":"The issue is impossible to reproduce due to this bug https://jira.atlassian.com/browse/CONFCLOUD-73878 ","author":"Oksana Bodnar"}]},{"summary":"The page share dialogue does not use the tiny link for a page - instead it uses a rather **long** url.","key":"CONFCLOUD-61515","url":"https://jira.atlassian.com/browse/CONFCLOUD-61515","type":"Bug","priority":"","description":"The page share dialogue does not use the tiny link for a page - instead it uses a rather *{*}long{*}* url. On extranet the share dialogue uses the tiny url for a page.\r\nh3. Workaround:\r\n\r\nPress K while viewing the page, a tiny URL is generated without the atlOrigin part","createDate":"2018-07-03T01:13:51.000+0000","comments":[{"text":"The copy link function used to be for creating shorter permalinks that were convenient for pasting into emails. Now the link will become longer. Wasting time to manually edit the links when removing the {{atlorigin }}part will be PITA. This is poor design and negatively impacts usability.","author":"Teemu QVICK"}]},{"summary":"JIRA Issue/Filter Macro table column widths are not sizeable","key":"CONFCLOUD-36044","url":"https://jira.atlassian.com/browse/CONFCLOUD-36044","type":"Bug","priority":"","description":"{panel:bgColor=#e7f4fa}\r\n*NOTE:* This bug report is for *Confluence Cloud*. Using *Confluence Server*? [See the corresponding bug report|http://jira.atlassian.com/browse/CONFSERVER-36044].\r\n{panel}\r\nWhen I insert a JIRA Issue/Filter macro on a Confluence page as a table, a long text is not wrapped and the width of the column is fixed by the length of the text. \r\n If the the page is then exported to Word or PDF, the table either runs off the page (Word) or columns are missing entirely (PDF).\r\n\r\nUpdate: The Change History macro is causing this issue. After removing the Change History macro from the Confluence page, the text is wrapping as expected and all the table columns I have defined are visible on the page even after exporting to Word and PDF formats.\r\n\r\nNote: Depending on the number of columns defined,JIRA Issue/Filter Macro tables are prone to overflow the page when exported.\r\n\r\nh3. Workaround\r\nReduce the number of columns on the JIRA Issues macro to fit on the page on Confluence without needing to scroll to right.","createDate":"2015-01-05T18:28:51.000+0000","comments":[{"text":"We are having this same issue and do not utilize the Change History Macro on our Confluence spaces so I can't remove it in order to attempt the workaround provided here.   Is there any other workaround that will force the Jira Issue Macro results to wrap?","author":"Jeffrey Holzapfel"},{"text":"This is not a good workaround.... my management is asking for this report/data so should I gob ack to them and say sorry, you can't have it since Confluence can't fit-to-a-page? I'm trying to get management to change over from another system to JIRA/Confluence and this gives them ammunition to stay with the other system... ","author":"Lillian Shibata-Salley"},{"text":"Hi [~e4434f5cc867] and everyone,\r\n\r\nThis is Nataliia from the Confluence team. Thank you for raising this bug and bringing it to our attention. After our investigation into this issue, we weren’t able to reproduce the behavior within our instances. We would like to get to the root cause of what you’re experiencing. Could you provide some more details or a screenshot to help us narrow down this case?\r\n\r\n{*}We will keep this issue open for another 14 days{*}, but if we don’t hear back by then we will need to close this out to focus on our upcoming roadmap for all Confluence users.\r\n\r\nBest,\r\n\r\nNataliia","author":"Nataliia K"},{"text":"This is definitely a problem and without change history macro. Enough with some Jira description that has a larger image in it like a screenshot","author":"elvis"},{"text":"We are eperiencing the same problem when texts are long in the Jira issue filter then it is truncated when exporting to pdf Not sure if we are using the change history, but regardless this should be solved or the pdfexport can't be used.","author":"Tobias Ednersson"},{"text":"This issue/ bug has been a major issue to our organization. I am working in a a startup and I am trying to bring in a new system and unfortunately Confluence cannot fix this bug. How can I sway my leadership to use confluence if the reports with tables are clunky. please fix this issue or provide a work around. Thanks!","author":"Aditi Vadodkar"},{"text":"We have the same issue and I can confirm that removing Change History fixes the issue, *BUT* \"unfortunately\", we also need the change history.","author":"Adnan Vilic"}]},{"summary":"Compass components continue to appear in Jira Software options even after they have been deleted.","key":"COMPASS-16","url":"https://jira.atlassian.com/browse/COMPASS-16","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe customer reported that after the trial period ended, their Compass instance was canceled. However, the Compass components they had created still appear in Jira Software.\r\n\r\nh3. Steps to Reproduce\r\n* There is no way to reproduce.\r\n\r\nh3. Expected Results\r\n\r\nAfter canceling the instance and deleting the components, remove the deleted components from the Jira Software components list.\r\nh3. Actual Results\r\n\r\nThe names of components that were removed with the Compass instance are still visible in Jira Software.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-19T20:26:02.000+0000","comments":[{"text":"Hi \r\nI reported PCS-345828 Old deleted components are shown in Jira\r\n\r\nWe have a list of 23 manually created components in Compass.\r\n\r\n*The issue is that the list we see in Components i Jira software is far longer* including components that we played around with in a previous installation of Compass on the instance.\r\n\r\nWe wish to continue using Compass with our 23 manually created components","author":"Martin Trouman"}]},{"summary":"Audit log webhook tab missing for an Org with enterprise entitlements","key":"CLOUD-12314","url":"https://jira.atlassian.com/browse/CLOUD-12314","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPer this [document|https://support.atlassian.com/security-and-access-policies/docs/learn-more-about-audit-log-webhooks], audit log Webhook tab should be available to Orgs with an Enterprise plan for Jira or Confluence or Atlassian Guard Premium. \r\nh3. Steps to Reproduce\r\n # Go to [Atlassian Administration|https://support.atlassian.com/organization-administration/docs/explore-an-atlassian-organization/]. \r\n # Select *Security* > {*}Audit log{*}.\r\n # Select {*}Settings{*}.\r\n # Select the *Webhook* tab.\r\n\r\nh3. Expected Results\r\n\r\nThe audit log Webhook tab should be visible. \r\n!Screenshot 2025-03-19 at 5.15.44 PM.png|thumbnail! \r\n\r\nh3. Actual Results\r\n\r\nThe audit log Webhook tab is missing.\r\n!Screenshot 2025-03-17 at 8.03.40 PM.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. ","createDate":"2025-03-20T11:34:02.000+0000","comments":[{"text":"Tracking work on this RUBY ticket","author":"Jocelyn Salada"}]},{"summary":"External users are unable to join the site using the invitation link sent by email","key":"CLOUD-12313","url":"https://jira.atlassian.com/browse/CLOUD-12313","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an admin invites external users to the organization's using the \"invite button\" and the permission to the product is granted using a non-default group, if the user tries to access the product using the link they receive on email, they are unable to join the site and are redirected to home.atlassian.com instead.\r\nh3. Steps to Reproduce\r\n # Have a domain verified\r\n # Invite an external user to the organization (not from the verified domain) granting access to a product using a non-default group\r\n # The user tries to access the site using the invitation link he receives in the email.\r\n\r\nh3. Expected Results\r\n\r\nThe user is supposed to access the product on the respective site where he was granted access.\r\nh3. Actual Results\r\n\r\nThe user receives an error and is redirected to home.atlassian.com instead of the actual org site from which the invitation was sent.\r\n\r\nIn the dev tools, we see the following error recorded:\r\n{noformat}\r\n{ \"code\": 403, \"message\": \"Access by external users not allowed. https://support.atlassian.com/security-and-access-policies/docs/understand-external-user-security/\" }  {noformat}\r\nh3. Workaround\r\n\r\nAt the moment, the only known workaround is for the users to access the product using the site URL directly.","createDate":"2025-04-01T12:45:35.000+0000","comments":[]},{"summary":"Created By Field is not Visible for Old User Experience Organizations","key":"CLOUD-12312","url":"https://jira.atlassian.com/browse/CLOUD-12312","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen doing a C2C Migration/Copy Product Data in Old User Experience organizations, the \"Created By\" field is empty. \r\n\r\n!Screenshot 2025-04-01 at 10.24.21.png|width=434,height=259!\r\nh3. Steps to Reproduce\r\n # Do a copy product migration in Organizations on Old User Experience\r\n # Verify the Created By field in Migration Dashboard. \r\n\r\nh3. Expected Results\r\n\r\nCreated By field should be visible\r\nh3. Actual Results\r\n\r\nCreated By field is not visible as the user access request throws 400 \r\nh3. Workaround\r\n\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-01T08:27:28.000+0000","comments":[]},{"summary":"Jira Core still showing as valid product key","key":"CLOUD-12307","url":"https://jira.atlassian.com/browse/CLOUD-12307","type":"Bug","priority":"","description":"Jira Core still showing as valid product key in the below API documentation though it no longer exists :\r\n * [https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-users/#api-rest-api-3-user-post]","createDate":"2025-03-26T13:12:51.000+0000","comments":[]},{"summary":"License downgrade can cause sandbox to be deactivated","key":"CLOUD-12300","url":"https://jira.atlassian.com/browse/CLOUD-12300","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen downgrading a product license from Enterprise to Premium, any existing sandboxes will be deactivated.\r\nh3. Steps to Reproduce\r\n # While on an Enterprise plan, create a sandbox.\r\n # At any point the subscription is downgraded to Premium. This can also happen if the sandbox was created while on an Enterprise trial.\r\n\r\nh3. Expected Results\r\n\r\nDespite the downgrade, the sandbox should still be functional as both Enterprise and Premium subscriptions are entitled to sandboxes.\r\nh3. Actual Results\r\n\r\nThe sandbox will be deactivated and you will be unable to restore it from the admin page, getting the error below:\r\n{code:java}\r\nRequest URL: https://admin.atlassian.com/gateway/api/sandbox/8de19c8c-2f65-4e70-977e-88d8541cc8e3/restore?orgId=2ba6b374-9c81-49ad-a223-272dead0044c\r\nFull response: 500 Internal Server Error {code}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. If having this issue, please get in touch with our technical support.","createDate":"2025-03-21T19:42:44.000+0000","comments":[{"text":"There are similar issue happend with other customers. I see the oms team had resolved it. Started a thread with them here: https://atlassian.slack.com/archives/C016U73MTC1/p1742718115330009","author":"Abhishyam Chennayipalem"}]},{"summary":"Unable to \"Add People\" from Business Project Boards","key":"CLOUD-12297","url":"https://jira.atlassian.com/browse/CLOUD-12297","type":"Bug","priority":"","description":"h3. Problem\r\n\r\nFor all Business projects alone, the user list does not load when trying to \"Add People\" from Project Board. However, this works well from Project Settings -> People.\r\nh3. Environment\r\n\r\nJira Cloud\r\n\r\nCloud URL - [https://optimizely.atlassian.net|https://optimizely.atlassian.net/] \r\n\r\nCloud ID - 8436982d-be58-420d-b3da-cb29f22637f2\r\nh3. Steps to Reproduce\r\n\r\nIn the customer instance, (Site Admin Permissions are sufficient)\r\n # Go to any Business Project like [AA Example for testing - Work Management|https://optimizely.atlassian.net/browse/EWM] for example\r\n # Click on Add People from project board and give any search text.\r\n # Notice that User list does not load.\r\n\r\nVideo demonstrating recreating the issue - [^Board - AA Example for testing - Work Management - JIRA - 5 March 2025.mp4]\r\nh3. Expected Results\r\n\r\nList of users matching the search text should be displayed.\r\nh3. Actual Results\r\n\r\nNo user list is displayed\r\nh3. Workaround\r\n\r\nCan use Project Settings -> People section to add people to project.\r\nh3. Notes\r\n\r\nUpon further investigation, we identified that the API that is called for a business project(Board-Add People) is {color:#0747a6}_/gateway/api/external-users/third-party/search?query=<searchtext>&cloudId=<cloudID>_{color}\r\n\r\nThis API request is not fired for customer instance.","createDate":"2025-03-19T05:11:48.000+0000","comments":[{"text":"[https://atlassian.slack.com/archives/CFJ06MWAK/p1741260721442759]\r\n\r\nAs discussed in this thread, this is not a bug and correctly evaluates the users permissions based on site settings.","author":"Ant"}]},{"summary":"Copy Production Data in Confluence Sandbox fails with 400 Bad request when parent site has large number of spaces","key":"CLOUD-12277","url":"https://jira.atlassian.com/browse/CLOUD-12277","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPerforming Confluence Sandbox refresh by triggering Copy Production Data (Full Data Copy) gives below error popup:\r\n{noformat}\r\nData copy couldn't schedule Try to schedule the data copy process again. If this keeps happening, contact support{noformat}\r\nh3. Steps to Reproduce\r\n # Make sure parent Confluence site has large number of spaces (around 15k)\r\n # Create a Confluence Sandbox for the above parent site\r\n # Perform Copy Production Data on Sandbox and select Full Data Copy \r\n\r\nh3. Expected Results\r\n\r\nData copy should be initiated successfully\r\nh3. Actual Results\r\n\r\nThe request gets failed with error message\r\n\r\nData copy couldn't schedule Try to schedule the data copy process again. If this keeps happening, contact support\r\n\r\nHttp error 500 can be seen in HAR logfile:\r\n{noformat}\r\nRequest URL:https://admin.atlassian.com/gateway/api/sandbox/clone-full?orgId=xxxxx \r\nRequest Method:POST \r\nStatus Code:500 \r\nRemote Address:13.32.99.20 {noformat}\r\nError calling downstream service\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. Kindly reach out to Support Team for further assistance.","createDate":"2025-03-10T09:57:26.000+0000","comments":[{"text":"[~e202140bb02e] is trying to gather more information from the downstream services that help triaging the issue to figure out the root cause","author":"Pendem Sirisha"},{"text":"internal bug ticket: [https://hello.jira.atlassian.cloud/browse/SANDBOX-6288] ","author":"Sonal Gupta"}]},{"summary":"Product Updates Search Functionality Fails to Return Expected Results","key":"CLOUD-12276","url":"https://jira.atlassian.com/browse/CLOUD-12276","type":"Bug","priority":"","description":"*Issue Summary:* \r\nWhen performing a search for a specific product feature in the list, the search fails to return all relevant results, omitting some entries even though the correct keywords are used.\r\n\r\n*Steps to Reproduce:*\r\n * Go to Products and select Product Updates.\r\n * Enter the search term \"View your fields now in custom tabs in the issue view.\"\r\n * Observe that no results are returned. Alternatively, searching for \"View your ...\" does not display the expected feature.\r\n\r\n*Expected Result:* \r\nThe search should display all updates associated with \"View your ...\" or the entire subject of the feature when entered.\r\n\r\n*Actual Result:* \r\nThe search does not include this specific feature in its results.\r\n\r\n*Workaround:*\r\nApply a filter for the JSM product, and the feature should then appear in the results.","createDate":"2025-03-10T08:07:48.000+0000","comments":[]},{"summary":"Adding a new product in a sandbox fails due to expired app licenses","key":"CLOUD-12272","url":"https://jira.atlassian.com/browse/CLOUD-12272","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCreating a new product (Jira, Jira Service Management, or Confluence) in an existing sandbox is blocked if there are apps with expired licenses in the sandbox instance. When attempting to add a new product, the following error occurs: \"Sandbox creation failed. Try to create your sandbox again. If this keeps happening, contact support.\"\r\nh3. Steps to Reproduce\r\n # Access the sandbox creation area and product addition section within the sandbox via {_}[https://admin.atlassian.com/o/]<YOUR ORG ID>/sandbox{_}.\r\n # Click on \"Add\" to attempt adding a new product.\r\n # Select the product you want to add to your sandbox site.\r\n # Click on \"Add\"\r\n\r\nh3. Expected Results\r\n\r\nThe new product should be successfully added to the existing sandbox without any errors.\r\nh3. Actual Results\r\n\r\nAn error message is displayed: \"Sandbox creation failed. Try to create your sandbox again. If this keeps happening, contact support.\"\r\n!Sandbox_error_create.png|width=244,height=102!\r\nh3. Workaround\r\n\r\n*Investigation from the user interface:*\r\n # Access the sandbox creation area and product addition section within the sandbox via {_}[https://admin.atlassian.com/o/]<YOUR ORG ID>/sandbox{_}.\r\n # Before clicking \"{*}Add{*}\" to add a new product, open the *browser's developer tools* by right-clicking and selecting \"{*}Inspect{*}\".\r\n # Navigate to the \"{*}Network{*}\" tab.\r\n # Click on \"Add\" to attempt to add a new product.\r\n # Select the product you want to add to your sandbox site.\r\n # Click on \"Add\"\r\n # If there are issues with expired app licenses, observe an HTTP status code: 409 Conflict on the browser's developer tools.\r\n # Open the error and on the tab *Response* see the results as follows:\r\n\r\n{code:java}\r\n{\r\n    \"additionalData\": {\r\n            \"expiredApps\": [\r\n                {\r\n                    \"name\": \"App example name\",\r\n                    \"expiryDate\": \"2025-03-01\"\r\n                }\r\n            ],\r\n        ...\r\n    },\r\n    \"errorCode\": 100,\r\n    \"message\": \"Account contains one or more expired applications.\",\r\n    \"reason\": \"ACCOUNT_EXPIRED\"\r\n}\r\n{code}\r\n*To resolve this issue:*\r\n # Reinstall the apps that have expired licenses in the current sandbox.\r\n # Unsubscribe from any trial licenses associated with these apps.\r\n # Uninstall the apps after unsubscribing.\r\n # Attempt to create a new product in your sandbox again.","createDate":"2025-03-07T22:27:49.000+0000","comments":[{"text":"Hi, \r\nThe issue has been fixed. Customer's should be able to see the expired apps at sandbox page while creating sandboxes if there are any.","author":"Ishank Mittal"}]},{"summary":"Adding the user who is not in the same site but in same org via project settings \"Add people\" does not trigger invite","key":"CLOUD-12269","url":"https://jira.atlassian.com/browse/CLOUD-12269","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf the organization has multiple site, project admins can see the users [Project settings] > [People] > [Add people] > \"Names or emails\" list.\r\nThey can see the users who are not added to the site but added to the same organization.\r\n\r\nSelect the user from \"Names or emails\" list and [Add] does not trigger the user invitation.\r\nSo the added user is listed in [Project settings] > [People], but they are not added to the site and granted the product access. They can't access to the project until the product access is granted.\r\n\r\nEven the [User access settings > User invites|https://support.atlassian.com/user-management/docs/control-how-users-get-access-to-products/#User-invites] is configured as invite anyone, invite is not triggered.\r\n\r\nh3. Steps to Reproduce\r\n # In the single org, there are 2 sites (Site A & B). User X is project admin for site A, and User Y is product user of site B\r\n # User X add the User Y to the project via [Project settings] > [People] > [Add people] > Selecting \"Names or emails\" list\r\n # User Y is not received the invitation, and checking the User Y product access in admin.atlassian.com, product access for Site A is not granted.\r\n\r\nh3. Expected Results\r\nAdding the user who belongs to same org should trigger the user invitation based on user access settings.\r\n\r\nh3. Actual Results\r\nAdding the user who belongs to same org does not trigger user invitation.\r\n\r\nh3. Workaround\r\n\r\nAdd product access via admin.atlassian.com > [Directory] > [Users], and then add to the project","createDate":"2025-03-03T02:41:09.000+0000","comments":[{"text":"This ticket is in progress, impact is low.","author":"Ant"}]},{"summary":"Sandbox data copy gets stuck on Import step","key":"CLOUD-12231","url":"https://jira.atlassian.com/browse/CLOUD-12231","type":"Bug","priority":"","description":"h3. Issue Summary\r\n - Sandbox data copy gets stuck without any error message on UI\r\n\r\nh3. Steps to Reproduce\r\n # Initiate data clone to Jira sandbox\r\n\r\nh3. Expected Results\r\n - Sandbox data copy should get completed or throw an error if there any issue with permissions\r\n\r\nh3. Actual Results\r\n - Sandbox data copy gets stuck without any error on UI.\r\n - As there is no workaround to cancel the ongoing sandbox data copy, user have to wait till the time ongoing copy \"timed_out\".\r\n\r\nh3. Workaround\r\n - User initiating the sandbox data clone should have site admin , Product access, User admin access permissions on sandbox instance.","createDate":"2025-02-19T09:12:13.000+0000","comments":[]},{"summary":"Unable to remove Goals and Projects from the Products list.","key":"CLOUD-12222","url":"https://jira.atlassian.com/browse/CLOUD-12222","type":"Bug","priority":"","description":"h3. User problem:\r\n\r\nCurrently users are being auto enrolled into platform experience which adds Goals and Projects in their product list in admin hub. However, if the user decides to opt out of platform experience they cannot remove Goals and Projects yet.\r\nh3. Suggested solution:\r\n\r\nThe Goals and Projects should be removed once the user opts out of platform experience.\r\nh3. Current workarounds:\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-02-11T07:41:37.000+0000","comments":[{"text":"n/a","author":"Ian Ramsden"},{"text":"Hi! I've raised this with PM and this is not a bug but feedback. ","author":"Angie Gyi"},{"text":"Auto enrolled also enabled every group in our Atlassian Suite to access Project and Goals ....\r\n\r\nYou can remove Project and Goals access from unticking the Platform Experience option.\r\n\r\nIt doesn't stop them from being on the main page home.atlassian.com however, the tabs are there with a Sign Up now prompt.\r\n\r\nI would rather have the ability to completely hide this from an end user.","author":"Ian Ramsden"},{"text":"[~ce213513e7b5] how is this related to Product Updates? And why did you add \"Admin - Product Updates\" as the component?","author":"Prashant Gadagi"}]},{"summary":"'Create from Template' macro button doesn't work after C2C migration","key":"CLOUD-12101","url":"https://jira.atlassian.com/browse/CLOUD-12101","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen migrating Confluence spaces from cloud to cloud the 'Create from template' macro doesn't work and displays the following message when clicked on:\r\n{quote}The original template has been deleted. Select a new template for the Create From Template macro.\r\n{quote}\r\nThis is reproducible on a cloud site: Yes\r\nh3. Steps to Reproduce\r\n # Create a space on the source site;\r\n # Create a new page and add the 'Create from Template' macro button, point it to the page desired template;\r\n # Migrate space from Cloud to Cloud via 'Copy Product Data';\r\n\r\nh3. Expected Results\r\n\r\nThe 'create-from-template' macro button works on the destination. But it doesn't.\r\nh3. Actual Results\r\n\r\nClicking the macro button causes the following message to show:\r\n{quote}The original template has been deleted. Select a new template for the Create From Template macro.\r\n{quote}\r\nh4. Some Notes\r\n - Below is the 'View Storage Format' from the source site:\r\n\r\n{code:java}\r\n<p>\r\n   <ac:structured-macro ac:name=\"create-from-template\" ac:schema-version=\"1\" ac:local-id=\"db40b7c6-97f5-4d5a-a7c6-f6acb5c0892a\" ac:macro-id=\"733ada09-fdeb-4a66-8c55-ef9b01d7a26f\">\r\n   ...\t\t\t\t...\r\n   <ac:parameter ac:name=\"contentBlueprintId\">f879304d-5c20-46a8-9207-100d309c1367</ac:parameter>\r\n   <ac:parameter ac:name=\"templateName\">f879304d-5c20-46a8-9207-100d309c1367</ac:parameter>\r\n   ...\r\n   </ac:structured-macro>\r\n<p/>\r\n{code}\r\n\r\n- The 'View Storage Format' from the destination site is the same as the source page.\r\n\r\n(!) After performing the workaround on the destination, the parameter IDs are now updated to the expected ones. \r\n\r\n{code:java}\r\n<p>\r\n   <ac:structured-macro ac:name=\"create-from-template\" ac:schema-version=\"1\" ac:local-id=\"db40b7c6-97f5-4d5a-a7c6-f6acb5c0892a\" ac:macro-id=\"371bee16-27bd-4a0b-a5ba-c71d3c5ebcfd\">\r\n   ...\r\n   <ac:parameter ac:name=\"contentBlueprintId\">708ffcae-5202-4bd7-a574-f86d1ba6a292</ac:parameter>\r\n   <ac:parameter ac:name=\"templateName\">708ffcae-5202-4bd7-a574-f86d1ba6a292</ac:parameter>\r\n   ...\r\n   </ac:structured-macro>\r\n<p/>\r\n{code}\r\n\r\n\r\nh3. Workaround\r\n\r\nEdit the macro on the page and hit 'Save' on the 'Create from Template' macro without changing the parameters. If you don't hit the 'Save' button and update the page, hit the 'Cancel', the behavior persists.","createDate":"2024-11-06T18:24:42.000+0000","comments":[]},{"summary":"Site URL is unavailable even though no active site is associated with it","key":"CLOUD-12043","url":"https://jira.atlassian.com/browse/CLOUD-12043","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nIn a scenario where a customer is trying to create an Atlassian Cloud site with a desired name but for some technical reasons if the creation fails, then the site name will show as “Taken” or “Already in use” even though the URL is not associated with any active site.\r\n\r\nThe URL gets placed in a short-term reservation list on our end and, hence, can't be associated with any site. This short-term reservation is for a period of 7 days, after which the URL will be released for use.\r\nh3. Suggestion:\r\n\r\nIt would be great to reduce the wait time or allow customers to release the URL manually after the failure in creation.\r\nAlso, it would be helpful to display a relevant message in the UI stating the reason for URL unavailability and the expected release time.","createDate":"2024-09-23T06:19:17.000+0000","comments":[{"text":"Signup Platform team has created a ticket in the backlog - https://hello.jira.atlassian.cloud/browse/BXPSU-3844","author":"Joe Ferng"}]},{"summary":"Data security policies cannot be deactivated or deleted because of deleted sandbox instances.","key":"CLOUD-12012","url":"https://jira.atlassian.com/browse/CLOUD-12012","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen attempting to deactivate or delete Data Security Policies, the following error is occurring.\r\n{code:java}\r\nWe're unable to deactivate the policy\r\nWe're not sure what went wrong. Try again.\r\n{code}\r\nThe error occurred because the data security policy was applied to a sandbox in the past, which was later deleted. We can observe the error below in the browser Developer Tools.\r\n\r\n{*}Path{*}: [https://admin.atlassian.com/gateway/api/admin/v1/orgs/********/policies/********]\r\n\r\n{*}Response{*}: \r\n{code:java}\r\n{\r\n    \"timestamp\": \"2024-08-26T11:06:08.706+00:00\",\r\n    \"path\": \"/api/admin/v1/orgs/********/policies/*************\",\r\n    \"status\": 400,\r\n    \"error\": \"Bad Request\",\r\n    \"requestId\": \"*******-********\",\r\n    \"errors\": [\r\n        {\r\n            \"id\": \"*************\",\r\n            \"status\": \"400\",\r\n            \"code\": \"ERROR_*********\",\r\n            \"title\": \"Products don't belong to site\",\r\n            \"detail\": \"Product [confluence] does not belong to any site owned by Organization [**************]\"\r\n        }\r\n    ]\r\n}{code}\r\nh3. Steps to Reproduce\r\n # Create a Data Security Policy.\r\n # Set up the policy to be enforced on both a production site and a sandbox site.\r\n # Remove the sandbox site where the policy has been enforced.\r\n # Try to deactivate or deleted the data security policy.\r\n\r\nh3. Expected Results\r\n * It is expected the data security policy to be deactivated or deleted.\r\n\r\nh3. Actual Results\r\n\r\nThe following error is occurring.\r\n{noformat}\r\nWe're unable to deactivate the policy\r\nWe're not sure what went wrong. Try again. {noformat}\r\nh3. Workaround\r\n\r\nAs a workaround, the request triggered by clicking on the deactivate or delete buttons can be modified to exclude the deleted sandbox information from the request body. Once the modification is made, the request can be resent.","createDate":"2024-08-26T10:10:01.000+0000","comments":[{"text":"Hi [~fa85d9e95975] ,\r\n\r\nThanks for raising the bug. \r\n\r\nWould it be possible to increase the severity and priority of the bug as seems to be the root cause of blocking our backups and we did not get any workaround.","author":"HAEGELIN Sacha"},{"text":"Hi team, we are looking into this issue and will provide an update after discussing it within our team.","author":"Suhai Yehuza"},{"text":"Just an FYI [~fa85d9e95975] you can track [https://hello.jira.atlassian.cloud/browse/SFK-1540] to see when the issue is addressed.","author":"Suhai Yehuza"},{"text":"[~fa85d9e95975] , while we are working on a long term solution with the above ticket, we think we have a temporary workaround to unblock the customer. This will require us getting the orgId and policyId of the customer to detach the resource from faulty sandbox site. This will then make their policy editable (including activation/deactivation) as well as deletable. Lmk if you would like us to do this.","author":"Suhai Yehuza"},{"text":"https://ops.internal.atlassian.com/jira/browse/PCC-963","author":"Suhai Yehuza"},{"text":"We have a temporary solution to unblock the customer. \r\nWe will need Support to obtain the orgId and policyId of the affected policy for us to manaully detach the problem resource from the policy. This will make the policy usable.","author":"Suhai Yehuza"}]},{"summary":"Downloading a Post Migration Report is failed because this XML file does not appear to have any style information associated with it.","key":"CLOUD-11964","url":"https://jira.atlassian.com/browse/CLOUD-11964","type":"Bug","priority":"","description":"h3. Issue Summary\r\nDownload a Post Migration Report for a completed migration, it will error out as \"This XML file does not appear to have any style information associated with it\"\r\n\r\nh3. Steps to Reproduce\r\n # Perform a cloud-to-cloud migration and the migration was successful\r\n # Try to download a Post Migration Report but unable to download it because of the error.\r\n\r\nh3. Expected Results\r\nAble to download the Pst Migration Report.\r\n\r\nh3. Actual Results\r\nEncounter the following error.\r\nThis XML file does not appear to have any style information associated with it. The document tree is shown below.\r\n{code:xml}\r\n<Error capture-installed=\"true\">\r\n  <code>InvalidArgument</code>\r\n  <Message>Header value cannot be represented using ISO-8859-1</Message>\r\n <ArgumentName>response-content-disposition</ArgumentName>\r\n <ArgumentValue>attachment;filename=<FileName></ArgumentValue>\r\n <RequestID>XXXXX</RequestId>\r\n <HostId>XXXXX</HostId>\r\n{code}\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-07-23T06:01:15.000+0000","comments":[{"text":"Hi Minori, seems like PMR report is very large (more than 32mb) that's why it was failing though we were not able to confirm this as  migration is expired. We have seen large size report issue we are tracking it internally, I don't have the ticket handy right now, will attach here, the dev working on it is not available right now.","author":"Mukul Jain"}]},{"summary":"De-activating a Jira product premium/standard subscription on the production cloud site results in losing access to the entire Jira sandbox site","key":"CLOUD-11879","url":"https://jira.atlassian.com/browse/CLOUD-11879","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen a specific Jira product is unsubscribed on the production site, the corresponding sandbox site for the product is also deleted. However, it is possible that this action might cause the entire Jira sandbox site to be inaccessible. \r\n\r\nh3. Steps to Reproduce\r\n # Ensure you have Jira (JSW) and Jira Service Management (JSM) premium subscription on a cloud site\r\n # Create JSW and JSM sandbox sites in the Organization\r\n # De-activate JSM premium product subscription on the production site\r\n\r\nh3. Expected Results\r\nSince the JSM product is deactivated, the JSM sandbox site will be deleted. However, the JSW sandbox site should still be active since the JSW product subscription is active.\r\n\r\nh3. Actual Results\r\nWhen the JSM product is deactivated, the entire sandbox cloud site (JSW and JSM) are inaccessible. The following message is seen in the UI:\r\n{quote}The Sandbox site has been deleted{quote}\r\n\r\nh3. Workaround\r\nIf you are facing this issue, please contact [Atlassian Support|https://support.atlassian.com/contact]","createDate":"2024-05-09T15:31:48.000+0000","comments":[{"text":"We have accepted this as an issue, however this requires changes in multiple systems.\r\n\r\nWe are also in between modelling JPD workflows. So this change will mostly be taken up as a part of that.","author":"schakravarty"},{"text":"Until this is fixed, please add a big red warning when removing JSW/JSM products from a site, and link to this issue.\r\n\r\nYou cannot reasonably expect an Atlassian admin to be aware of this unintuitive, unexpected side effect.","author":"Eemil"},{"text":"This week, we have a migration JWM to Jira so Jira Work Managament is desactivate but noboby give me the information that we lost our Sandbox  \r\n\r\nSince months, I ask, what will be impact of migration and we always say no impact but this one don't seen ...","author":"T. Vanessa"},{"text":"We had SAME case today. Sandbox was there, we finally found out how to approach the mess with JWM to Jira regarding how to communicate changes ton users and as soon as reseller cancels the JWM.....boom, entire Jira SB is gone.\r\n\r\nWe use SB to allow a controlled set of people, including my own team colleagues, to try out scenarios and configure features such as AI before they are set in PROD.\r\n\r\nTo have had potentially lost it all was a shock we did not want to have prior a weekend. Sad enough, that Atlassian contacts had not been aware of this highly visible \"effect\" .\r\n\r\nWe have no words for Atlassian since last spring......really.","author":"Carsten Schäfer"},{"text":"The long term solution is being worked upon and the fix to be available by end of Apr. ","author":"Pendem Sirisha"}]},{"summary":"Unable to delete Statuspage on Atlassian Billing Platform","key":"CLOUD-11748","url":"https://jira.atlassian.com/browse/CLOUD-11748","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, when using an Atlassian cloud site under the Atlassian Billing Platform you are unable to delete the Statuspage product\r\nh3. Steps to Reproduce\r\n # Add Statuspage to the Atlassian Billing Platform enabled Atlassian cloud site\r\n # Click Billing >> Manage subscription\r\n\r\n\r\nh3. Expected Results\r\n\r\nDeletion should be possible through the Atlassian admin hub.\r\nh3. Actual Results\r\n\r\nYou are sent in a loop. When you click the manage subscription button it takes you to the Statuspage instance instead of sending you to the billing area where you can delete the product. \r\n\r\n \r\nh3. Workaround\r\n\r\nPlease reach out to support for Statuspage deletion. Support.atlassian.com >>> Scroll down >> Contact support >> Technical issues >> Statuspage. Please reference this public tracking ticket if possible.","createDate":"2023-12-29T21:25:52.000+0000","comments":[]},{"summary":"Unable to delete Opsgenie on Atlassian Billing Platform","key":"CLOUD-11706","url":"https://jira.atlassian.com/browse/CLOUD-11706","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, when using an Atlassian cloud site under the Atlassian Billing Platform you are unable to delete the Opsgenie product\r\nh3. Steps to Reproduce\r\n # Add Opsgenie to the Atlassian Billing Platform enabled Atlassian cloud site\r\n # Click Billing >> Manage subscription\r\n!image-2023-11-01-11-33-32-308.png|width=562,height=273!\r\n\r\nh3. Expected Results\r\n\r\nDeletion should be possible through the Atlassian admin hub.\r\nh3. Actual Results\r\n\r\nYou are sent in a loop. When you click the manage subscription button it takes you to the Opsgenie instance. Then scrolling down to the delete option results in a message to perform the action on the Atlassian side:\r\n[^2023-11-01_11-35-44.mp4]\r\n\r\n \r\nh3. Workaround\r\n\r\nPlease reach out to support for Opsgenie deletion. Support.atlassian.com >>> Scroll down >> Contact support >> Technical issues >> Opsgenie. Please reference this public tracking ticket if possible.","createDate":"2023-11-01T16:32:52.000+0000","comments":[{"text":"hi team, could you please provide an upgrade? we really need opsgenie deleted","author":"Luz"},{"text":"Sure thing.  Below is the URL we use, and need removed.\r\n\r\nhttps://mightykingdom.app.opsgenie.com/","author":"Jamie Vuyk"}]},{"summary":"Atlassian Cloud Performance from within China","key":"CLOUD-10692","url":"https://jira.atlassian.com/browse/CLOUD-10692","type":"Bug","priority":"","description":"h2. Summary\r\nUsers from within China experience slower performance with Atlassian products.\r\n\r\nh2. Cause\r\n This is due to [Great Firewall of China|https://en.wikipedia.org/wiki/Great_Firewall] blocking or restricting internet contents from outside China. \r\n\r\nh3. Note\r\n\r\nAtlassian discloses domains and IP addresses that need to be allowed: [IP addresses and domains for Atlassian cloud products|https://support.atlassian.com/organization-administration/docs/ip-addresses-and-domains-for-atlassian-cloud-products/].\r\n\r\nh2. Workaround\r\nUsing a VPN provider (preferably outside China) Could help boost performance. No guarantees on how much is expected.","createDate":"2018-10-11T02:08:03.000+0000","comments":[{"text":"The priority of this issue is currently Low, but we have four important partner development teams that we work with throughout China (Shenzhen, Beijing, Shanghai, Fuzhou).  If the usage experience cannot be improved, we will have to seek an alternative platform, as the current latency makes Jira EXTREMELY slow, and even unusable for some.  \r\n\r\nThe VPN workaround is no longer an effective solution for most in China, as restrictions on VPN usage in China have been heightened significantly.\r\n\r\nIs there a possibility that Atlassian will deploy something within mainland China? ","author":"Gaston@TS"},{"text":"Same situation here - Jira/Confluence access from Shanghai site is intermittent. We are using VPN, but VPN service itself can be blocked from time to time.\r\n\r\nTruly need a reliable solution from Atlassian. We don't have the issue with Github...\r\n\r\n ","author":"Dinghua"},{"text":"Given AWS is available in China (whilst managed through a third party), surely this could be looked into. Trying to go through firewall may connect but is significantly slower than mainland hosted servers. Yes, permit licenses are an issue but this could be explored at a later stage of the data residency project.","author":"Tom Foxwell"},{"text":"Our customers are also interested in a better connectivity of Atlassian Cloud products in China, as they provide support from China. Would be great if the solution can be introduced to us in the nearest time, as we are making more and more value on Cloud products usage. ","author":"Nadia"},{"text":"https://getsupport.atlassian.com/browse/JST-562848","author":"Gerson P."},{"text":"We have a lot of our teams in China and this really affecting us especially during PI planning. This should be improve as matter of urgency.","author":"Kwame Afreh"},{"text":"This is also affecting our company, mainly for our users in Suzhou.","author":"Filip Labarque"},{"text":"I noticed that data residency in India, South Korea, Japan, the United Kingdom, Switzerland, Germany will be launched from 2023 Q4 to 2024 Q1.\r\n\r\nhttps://www.atlassian.com/wac/roadmap/cloud?search=Data%20residency\r\n\r\nWhether there will be Store in-scope product data at rest in China from 2024 to 2025?","author":"Ollie Guan"},{"text":"Our employees in China are being severely affected by this issue since we migrated Confluence to the cloud. ","author":"Jack Griffith"},{"text":"This ticket is over five years old. Is there still nothing Atlassian can do about it? For premium plan users, if this problem cannot be improved, how can we have the confidence to upgrade to Enterprise?","author":"Ollie Guan"},{"text":"Hi Atlassian support, any update on this case? Ticket is open since 2018 and Jira still does not work reliably and stably in China. The situation is not satisfactory!\r\n\r\nThanks!","author":"d.kleiner"}]},{"summary":"\"Create Group\" REST API failed with XSRF check failed ","key":"BSERV-20043","url":"https://jira.atlassian.com/browse/BSERV-20043","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\"Create Group\" REST API mentioned int the doc [here|https://developer.atlassian.com/server/bitbucket/rest/v905/api-group-permission-management/#api-api-latest-admin-groups-post] failed with XSRF check failed. \r\n\r\nh3. Steps to Reproduce\r\nCreate a group using REST API as per the document [here|https://developer.atlassian.com/server/bitbucket/rest/v905/api-group-permission-management/#api-api-latest-admin-groups-post].\r\n{code:java}\r\nkkumar4@K045XXPPGV Downloads % curl -u admin --request POST \\\r\n  --url 'https://instenv-471854-5sta.instenv.internal.atlassian.com/rest/api/latest/admin/groups?name=jiraadmins' \\\r\n  --header 'Accept: application/json;charset=UTF-8'\r\nEnter host password for user 'admin':\r\nXSRF check failed%\r\n{code}\r\n\r\nh3. Expected Results\r\nThe group should create without XSRF check failure\r\nFor example:\r\n{code:java}\r\nkkumar4@K045XXPPGV Downloads % curl -u admin --request POST \\\r\n  --url 'https://instenv-471854-5sta.instenv.internal.atlassian.com/rest/api/latest/admin/groups?name=temp_users1' \\\r\n  --header 'Content-type: application/json' |jq\r\nEnter host password for user 'admin':\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100    39    0    39    0     0     39      0 --:--:-- --:--:-- --:--:--    39\r\n{\r\n  \"name\": \"temp_users1\",\r\n  \"deletable\": true\r\n}\r\n{code}\r\n\r\nh3. Actual Results\r\nGroup creation fails via REST API with XSRF check failed error\r\n{code:java}\r\nkkumar4@K045XXPPGV Downloads % curl -u admin --request POST \\\r\n  --url 'https://instenv-471854-5sta.instenv.internal.atlassian.com/rest/api/latest/admin/groups?name=jiraadmins' \\\r\n  --header 'Accept: application/json;charset=UTF-8'\r\nEnter host password for user 'admin':\r\nXSRF check failed%\r\n{code}\r\n\r\nh3. Workaround\r\nAs per the document header is set accept \r\n{code:java}\r\ncurl --request POST \\\r\n  --url 'http://{baseurl}/rest/api/latest/admin/groups?name={name}' \\\r\n  --header 'Accept: application/json;charset=UTF-8'\r\n{code}\r\nReplace this header with Content-type \r\n{code:java}\r\ncurl --request POST \\\r\n  --url 'http://{baseurl}/rest/api/latest/admin/groups?name={name}' \\\r\n  --header 'Content-type: application/json;charset=UTF-8'\r\n{code}","createDate":"2025-03-25T07:28:42.000+0000","comments":[{"text":"This is not a bug, but a security practice enforced by the common security layer in Bitbucket.\r\n\r\nPOST requests are vulnerable to CSRF attacks and as security best practice the common security layer enforces CSRF validation if no content type is specified.\r\n\r\nWhen content-type of `application/json` is specified, and the fact that the request is not coming from a browser, this CSRF validation is bypassed and the REST endpoint is allowed to process the request.\r\n\r\nI will raise a documentation improvement ticket to add a note about this behaviour in the [Errors & Validation section|https://developer.atlassian.com/server/bitbucket/rest/v905/intro/#errors---validation] for the Forbidden 403 response code.","author":"David Zhu"}]},{"summary":"PostgreSQL JDBC driver 42.7.5 has issues with checking for the existence of database tables if the database name is uppercase","key":"BSERV-20038","url":"https://jira.atlassian.com/browse/BSERV-20038","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBitbucket version 9.4.4 comes with PostgreSQL JDBC driver postgresql-42.7.5.jar; Bitbucket 9.4.3 uses postgresql-42.7.4.jar. The PostgreSQL driver 42.7.5 has issues when checking for the existence of database tables if the database name is {*}uppercase{*}.\r\n\r\nAfter upgrading Bitbucket 9.4.3 to 9.4.4 using an existing uppercase-named PostgreSQL database, liquibase tries to create its own \"databasechangelog\" table although that one already exists, and fails.\r\nh3. Steps to Reproduce\r\n # Create a database with an upper-case name:\r\n{code:sql}\r\ncreate user bb_user with password 'bb_user';\r\ncreate database \"DB_UPPERCASE\" with owner bb_user encoding 'UTF8';\r\n{code}\r\n\r\n # Install Bitbucket 9.4.3 and point it to that database --> everything works fine.\r\n # Shut down Bitbucket 9.4.3, \"upgrade\" it to 9.4.4, and point to the same database --> error is logged:\r\n{noformat}\r\nroot@bitbucket-devuan:/opt/atlassian# cat bitbucket/log/atlassian-bitbucket.log\r\n2025-03-18 13:48:26,746 INFO  [main]  c.a.b.i.b.BitbucketServerApplication Starting BitbucketServerApplication v9.4.4 using Java 17.0.14 on bitbucket-devuan with PID 8407 (/opt/atlassian/atlassian-bitbucket-9.4.4/app/WEB-INF/classes started by atlbitbucket in /opt/atlassian/bitbucket)\r\n2025-03-18 13:48:26,747 INFO  [main]  c.a.b.i.b.BitbucketServerApplication No active profile set, falling back to 1 default profile: \"default\"\r\n2025-03-18 13:48:27,170 INFO  [main]  c.a.b.i.boot.log.BuildInfoLogger Starting Bitbucket 9.4.4 (969cc1f built on Thu Mar 06 09:31:14 CET 2025)\r\n2025-03-18 13:48:27,170 INFO  [main]  c.a.b.i.boot.log.BuildInfoLogger JVM: Eclipse Adoptium OpenJDK 64-Bit Server VM 17.0.14+7\r\n...\r\n2025-03-18 13:48:29,413 INFO  [spring-startup]  c.a.s.internal.home.HomeValidator Upgrading Bitbucket from 9.4.3 to 9.4.4\r\n2025-03-18 13:48:30,443 WARN  [spring-startup]  o.s.w.c.s.XmlWebApplicationContext Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'crowdAliasDao': Unsatisfied dependency expressed through method 'setSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sharedHomeLockAcquirer' defined in class path resource [stash-context.xml]: Cannot resolve reference to bean 'licenseHelper' while setting constructor argument; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'licenseHelper' defined in URL [jar:file:/opt/atlassian/atlassian-bitbucket-9.4.4/app/WEB-INF/lib/bitbucket-service-impl-9.4.4.jar!/com/atlassian/stash/internal/license/DefaultLicenseHelper.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bootstrapLiquibase' defined in class path resource [stash-context.xml]: Invocation of init method failed; nested exception is liquibase.exception.DatabaseException: ERROR: relation \"databasechangelog\" already exists [Failed SQL: (0) CREATE TABLE public.databasechangelog (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP WITHOUT TIME ZONE NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))]\r\n2025-03-18 13:48:30,452 INFO  [spring-startup]  c.a.s.internal.home.HomeLockAcquirer Releasing lock on /opt/atlassian/bitbucket\r\n2025-03-18 13:48:30,453 ERROR [spring-startup]  c.a.j.s.w.s.JohnsonDispatcherServlet SpringMVC dispatcher [springMvc] could not be started\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'crowdAliasDao': Unsatisfied dependency expressed through method 'setSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sharedHomeLockAcquirer' defined in class path resource [stash-context.xml]: Cannot resolve reference to bean 'licenseHelper' while setting constructor argument; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'licenseHelper' defined in URL [jar:file:/opt/atlassian/atlassian-bitbucket-9.4.4/app/WEB-INF/lib/bitbucket-service-impl-9.4.4.jar!/com/atlassian/stash/internal/license/DefaultLicenseHelper.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bootstrapLiquibase' defined in class path resource [stash-context.xml]: Invocation of init method failed; nested exception is liquibase.exception.DatabaseException: ERROR: relation \"databasechangelog\" already exists [Failed SQL: (0) CREATE TABLE public.databasechangelog (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP WITHOUT TIME ZONE NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:824)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:591)\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:143)\r\n\tat java.base/java.lang.Thread.run(Thread.java:840)\r\n\t... 19 frames trimmed\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sharedHomeLockAcquirer' defined in class path resource [stash-context.xml]: Cannot resolve reference to bean 'licenseHelper' while setting constructor argument; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'licenseHelper' defined in URL [jar:file:/opt/atlassian/atlassian-bitbucket-9.4.4/app/WEB-INF/lib/bitbucket-service-impl-9.4.4.jar!/com/atlassian/stash/internal/license/DefaultLicenseHelper.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bootstrapLiquibase' defined in class path resource [stash-context.xml]: Invocation of init method failed; nested exception is liquibase.exception.DatabaseException: ERROR: relation \"databasechangelog\" already exists [Failed SQL: (0) CREATE TABLE public.databasechangelog (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP WITHOUT TIME ZONE NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))]\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\r\n\t... 5 common frames omitted\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'licenseHelper' defined in URL [jar:file:/opt/atlassian/atlassian-bitbucket-9.4.4/app/WEB-INF/lib/bitbucket-service-impl-9.4.4.jar!/com/atlassian/stash/internal/license/DefaultLicenseHelper.class]: Unsatisfied dependency expressed through constructor parameter 3; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bootstrapLiquibase' defined in class path resource [stash-context.xml]: Invocation of init method failed; nested exception is liquibase.exception.DatabaseException: ERROR: relation \"databasechangelog\" already exists [Failed SQL: (0) CREATE TABLE public.databasechangelog (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP WITHOUT TIME ZONE NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:794)\r\n\t... 5 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bootstrapLiquibase' defined in class path resource [stash-context.xml]: Invocation of init method failed; nested exception is liquibase.exception.DatabaseException: ERROR: relation \"databasechangelog\" already exists [Failed SQL: (0) CREATE TABLE public.databasechangelog (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP WITHOUT TIME ZONE NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\r\n\t... 5 common frames omitted\r\nCaused by: liquibase.exception.DatabaseException: ERROR: relation \"databasechangelog\" already exists [Failed SQL: (0) CREATE TABLE public.databasechangelog (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP WITHOUT TIME ZONE NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255), DEPLOYMENT_ID VARCHAR(10))]\r\n\tat liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:440)\r\n...\r\nCaused by: org.postgresql.util.PSQLException: ERROR: relation \"databasechangelog\" already exists\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)\r\n...\r\n{noformat}\r\n\r\nh3. Expected Results\r\n\r\nThe upgrade from Bitbucket 9.4.3 to 9.4.4 with the upper-case PostgreSQL database name to go smoothly.\r\nh3. Actual Results\r\n\r\nThe upgrade fails with {{{}Caused by: org.postgresql.util.PSQLException: ERROR: relation \"databasechangelog\" already exists{}}}.\r\nh3. Workaround\r\n\r\nManually replace the postgresql-42.7.5.jar JDBC driver with an older one, postgresql-42.7.4.jar, from Bitbucket 9.4.3 in Bitbucket installation directory, {{<BITBUCKET_INSTALL_DIR>/app/WEB-INF/lib/}}\r\n\r\nh3. Other notes\r\n\r\nRelevant links:\r\n* https://github.com/pgjdbc/pgjdbc/issues/3560\r\n* https://github.com/liquibase/liquibase/issues/6666","createDate":"2025-03-20T15:44:32.000+0000","comments":[]},{"summary":"Unable to see Bamboo warnings in Bitbucket Pull request overview page","key":"BSERV-20029","url":"https://jira.atlassian.com/browse/BSERV-20029","type":"Bug","priority":"","description":"h3. Issue Summary\r\nBamboo warnings can no longer be seen in Bitbucket pull request page.\r\n\r\nh3. Steps to Reproduce\r\n # Create Application links between Bitbucket and Bamboo DC and make sure they are in connected state.\r\n# Add linked repository (testrepo) in Bamboo\r\n # In Bitbucket, create/push a file in java/any other language (ex. test.java) that writes warnings on compilation into \"testrepo\"\r\n# In Bamboo, create a plan and add the following tasks \r\n## configure a script task to compile the source file in Bitbucket. For example - {code}javac -Xlint test.java{code} that compiles the test.java file in Bitbucket and reports errors\r\n## Configure \"Build warnings parser\" configuration task to compile the source code file\r\n# Navigate to \"Branches\" tab in Bamboo plan configuration and select \"When a pull request is created (Forked repositories are allowed)\" under \"Create plan branch\" section. \r\n# Save the Bamboo plan configuration and enable the plan. \r\n# Create a branch b1 and make/push changes to the file {{test.java}}\r\n# Create a pull request from b1 -> master which triggers a build in Bamboo.\r\n# Bamboo warnings hyperlink is not seen in Pull request overview page \r\n\r\nh3. Expected Results\r\nBamboo warnings are seen directly in Pull request page.\r\n !81.png|thumbnail! \r\n\r\nh3. Actual Results\r\nBamboo warnings are not seen in pull request overview page.\r\n !93.png|thumbnail! \r\nIn atlassian-bitbucket.log, we see\r\n{noformat}\r\n2025-03-06 10:35:09,232 DEBUG [http-nio-7990-exec-5] @4YC9HHx635x380x1 <IP> \"GET /rest/insights/1.0/projects/<PROJ>/repos/<repo>/commits/92c7f9c7d6c4903a8556b92408339fefb4af343a/reports/BLUE-BLUE12-1 HTTP/1.1\" c.a.b.i.r.f.EscalateAnonymous2LOFilter Escalating permissions to [REPO_READ] for anonymous 2LO REST call\r\n2025-03-06 10:35:09,260 DEBUG [http-nio-7990-exec-5] @4YC9HHx635x380x1 <IP> \"GET /rest/insights/1.0/projects/<PROJ>/repos/<repo>/commits/92c7f9c7d6c4903a8556b92408339fefb4af343a/reports/BLUE-BLUE12-1 HTTP/1.1\" c.a.b.i.r.e.ServiceExceptionMapper Mapping AuthorisationException to REST response 401 - You are not permitted to access this resource\r\n{noformat}\r\n\r\nIn Bamboo log, we see \r\n{noformat}\r\n2025-03-06 10:35:09,300 ERROR [WarningsSender-2] [BuildWarningSenderWorker] com.atlassian.stash.rest.client.api.StashUnauthorizedRestException: You are not permitted to access this resource\r\ncom.atlassian.bamboo.plugins.stash.repository.StashRepositoryException: com.atlassian.stash.rest.client.api.StashUnauthorizedRestException: You are not permitted to access this resource\r\n\tat com.atlassian.bamboo.plugins.stash.BitbucketServerBuildWarningsUpdater.lambda$sendBuildWarnings$3(BitbucketServerBuildWarningsUpdater.java:97) ~[?:?]\r\n\tat com.atlassian.bamboo.plugins.stash.BitbucketServerBuildWarningsUpdater.withBbsRepository(BitbucketServerBuildWarningsUpdater.java:145) ~[?:?]\r\n{noformat}\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-13T12:17:18.000+0000","comments":[{"text":"I don't understand, why this is a minor issue.\r\n\r\nIf I cannot see newly introduced warnings in the pull request diff, this will definitely cause issues in the future. It's undoubtedly making reviews less effective. I guess every Atlassian user should be complaining about this bug. Even Atlassian should have observed it when using their own products for development.","author":"Uwe Kraft"}]},{"summary":"Install Elasticseach documentation needs a warning on all 9.x versions","key":"BSERV-20021","url":"https://jira.atlassian.com/browse/BSERV-20021","type":"Bug","priority":"","description":"h3. Issue Summary\r\nElasticsearch support was deprecated in 8.x and removed in 9.x.  The documentation found at https://confluence.atlassian.com/bitbucketserver094/install-and-configure-a-remote-elasticsearch-server-1489802994.html doesn't give any indication that Elasticsearch must not be used for any 9.x version\r\n\r\nh3. Steps to Reproduce\r\n # Go to any 9.x version of this document https://confluence.atlassian.com/bitbucketserver094/install-and-configure-a-remote-elasticsearch-server-1489802994.html\r\n\r\nh3. Expected Results\r\nA bold warning that this document is no longer valid once you upgrade to 9.0 or higher\r\n\r\nh3. Actual Results\r\nThis document discusses how Elasticsearch, up to 7.17.16, can still be configured and used by Bitbucket.  No indication using Elasticsearch will generate errors in the logs, and it is unlikely to function\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\nCaused by: com.atlassian.bitbucket.internal.search.indexing.exceptions.IndexException: Unsupported search version Elasticsearch 7.17.16. Unable to continue, operator intervention is required.\r\n2025-03-11 16:19:27,136 ERROR [I/O dispatcher 13] c.a.b.i.s.c.s.t.DefaultSearchConnectionTester Connected to an unsupported search server version: Elasticsearch 7.17.16\r\n{noformat}\r\n\r\nh3. Workaround\r\nUse Elasticsearch is the only available option","createDate":"2025-03-11T20:46:13.000+0000","comments":[]},{"summary":"Commit signed with SSH key of user with special symbols in the name causes an error in UI","key":"BSERV-20020","url":"https://jira.atlassian.com/browse/BSERV-20020","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe commits signed by the user with an ID containing a special symbol like {{\\@}} cause an error while clicking on a check to verify the signature.\r\n\r\nh3. Steps to Reproduce\r\n# Create a user with email as username: {{user@domain.com}}\r\n# Add an SSH key to the user profile\r\n# Make a new commit locally and sign it with the SSH key\r\n# Push the commit upstream\r\n# Go to Repository => Open Commits\r\n# Click on the check mark next to the commit\r\n\r\nh3. Expected Results\r\nThe pop-up appears without any error showing signature details \r\n\r\nh3. Actual Results\r\nThe pop-up appears showing signature details but it is covered by the error Page not found - User user@domain.com does not exist \r\n\r\nIn the HAR file the request to REST API is done to the following endpoint:\r\n{code}\r\n/rest/api/latest/users/user%40domain.com?avatarSize=32\r\n{code}\r\nAnd the endpoint returns {{com.atlassian.bitbucket.user.NoSuchUserException}}\r\n\r\nWhile the endpoint\r\n{code}\r\nrest/api/latest/users/user_domain.com?avatarSize=32\r\n{code}\r\nreturns expected details\r\n\r\nh3. Workaround\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-11T13:03:46.000+0000","comments":[]},{"summary":"Warning of less transformer web resource deprecation in application log","key":"BSERV-19915","url":"https://jira.atlassian.com/browse/BSERV-19915","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWarning of [less transformer web resource|https://developer.atlassian.com/server/framework/atlassian-sdk/updates/less-transformer/removal/#less-transformer-removal] deprecation in atlassian-bitbucket.log. \r\n\r\nh3. Steps to Reproduce\r\nInstall Bitbucket 8.19.15 and the warning will be logged in atlassian-bitbucket.log file for every page visit.\r\n\r\n\r\nh3. Expected Results\r\nThe deprecation warning is expected to log only dev mode i.e. for plugin developers using amps, etc.).\r\n\r\nh3. Actual Results\r\nThe below warning is thrown in the atlassian-bitbucket.log file:\r\n{noformat}\r\n2025-02-26 15:25:52,713 WARN  [http-nio-7990-exec-10] @1GOTNZDx925x168x1 v61uje 172.29.213.252,10.229.141.168 \"GET /s/a895d3d5a2d60ac571a91db1c8d61e4a-CDN/-832381851/8a09456/n1cn5w/503d3423e2296de61dbdfb11257394ad/_/download/contextbatch/css/bitbucket.page.project.create,atl.general,bitbucket.layout.base,bitbucket.layout.focused,bitbucket.internal.feature.theme,bitbucket.internal.feature.whats.new,zdu-banner-all,-_super/batch.css HTTP/1.1\" c.a.p.l.LessWebResourceTransformer Use of less web resource transformer is deprecated. Consider switching to the `less` compiler from npmjs at build time, or converting the LESS files to CSS.\r\n2025-02-26 15:25:52,714 WARN  [http-nio-7990-exec-10] @1GOTNZDx925x168x1 v61uje 172.29.213.252,10.229.141.168 \"GET /s/a895d3d5a2d60ac571a91db1c8d61e4a-CDN/-832381851/8a09456/n1cn5w/503d3423e2296de61dbdfb11257394ad/_/download/contextbatch/css/bitbucket.page.project.create,atl.general,bitbucket.layout.base,bitbucket.layout.focused,bitbucket.internal.feature.theme,bitbucket.internal.feature.whats.new,zdu-banner-all,-_super/batch.css HTTP/1.1\" c.a.p.l.LessWebResourceTransformer Use of less web resource transformer is deprecated. Consider switching to the `less` compiler from npmjs at build time, or converting the LESS files to CSS.\r\n2025-02-26 15:25:52,714 WARN  [http-nio-7990-exec-10] @1GOTNZDx925x168x1 v61uje 172.29.213.252,10.229.141.168 \"GET /s/a895d3d5a2d60ac571a91db1c8d61e4a-CDN/-832381851/8a09456/n1cn5w/503d3423e2296de61dbdfb11257394ad/_/download/contextbatch/css/bitbucket.page.project.create,atl.general,bitbucket.layout.base,bitbucket.layout.focused,bitbucket.internal.feature.theme,bitbucket.internal.feature.whats.new,zdu-banner-all,-_super/batch.css HTTP/1.1\" c.a.p.l.LessWebResourceTransformer Use of less web resource transformer is deprecated. Consider switching to the `less` compiler from npmjs at build time, or converting the LESS files to CSS.\r\n{noformat}\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-02-28T05:35:00.000+0000","comments":[{"text":"Latest versions of Bitbucket have upgraded to fixed versions of the less-transformer-plugin. Issue is not reproducible anymore.","author":"David Zhu"}]},{"summary":"Using LDAP_MATCHING_RULE_IN_CHAIN OID for nested group membership stopped working","key":"BSERV-19883","url":"https://jira.atlassian.com/browse/BSERV-19883","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThis is reproducible on Data Center: yes\r\n\r\nUsers synced from Microsoft AD lose all the group membership after upgrading Bitbucket from any version prior to 8.19.x to 9.x.\r\n\r\nh3. Steps to Reproduce\r\n# Install Bitbucket 8.19.x.\r\n# Set up Microsoft AD with nested groups.\r\n{noformat}\r\nCN=moga,DC=example,DC=com\r\n    memberOf: CN=group1,OU=ou1,DC=example,DC=com\r\n    memberOf: CN=group2,OU=ou2,DC=example,DC=com\r\n        memberOf: CN=group3,OU=ou1,DC=example,DC=com\r\n            memberOf: CN=group6,OU=ou1,DC=example,DC=com\r\n        memberOf: CN=group4,OU=ou1,DC=example,DC=com\r\n            memberOf: CN=group5,OU=ou1,DC=example,DC=com\r\n                memberOf: CN=group4,OU=ou1,DC=example,DC=com\r\n            memberOf: CN=group6,OU=ou1,DC=example,DC=com\r\n{noformat}\r\n# Create a user directory in Bitbucket with the following configuration:\r\n{noformat}\r\nldap.basedn: DC=example,DC=com\r\nldap.group.dn: OU=ou1\r\nldap.nestedgroups.disabled: true\r\nldap.group.usernames=member: 1.2.840.113556.1.4.1941:\r\nldap.user.group: memberOf: 1.2.840.113556.1.4.1941:\r\nldap.usermembership.use: true\r\nldap.usermembership.use.for.groups: true\r\n{noformat}\r\n# Sync the directory and observe the behaviour; user moga will have the following membership:\r\n#* group1\r\n#* group3\r\n#* group4\r\n#* group5\r\n#* group6\r\n# Upgrade the instance to Bitbucket 9.0.x.\r\n# Perform the directory sync and observe the behaviour - the user will not belong to any user groups.\r\n\r\nh3. Expected Results\r\nThe user moga should have the following group membership:\r\n* group1\r\n* group3\r\n* group4\r\n* group5\r\n* group6\r\n\r\nh3. Actual Results\r\nThe user moga have no group memberships.\r\n\r\nh3. Workaround\r\nThis is happening due to a change in Crowd sync on Crowd 5.3.0; [Crowd 5.3 Upgrade Notes|https://confluence.atlassian.com/crowd/crowd-5-3-upgrade-notes-1388151831.html]; LDAP synchronization improvements. The workaround is to disable the new sync:\r\n# Add the following in <bitbucket installation path>/bin/_start-webapp.sh: \r\n{noformat}\r\nJVM_SUPPORT_RECOMMENDED_ARGS=\"-Dcrowd.use.legacy.ad.membership.sync=true\"\r\n{noformat}\r\n# Restart Bitbucket.\r\n# Initiate the sync.","createDate":"2025-02-26T00:36:48.000+0000","comments":[{"text":"Closing this as already tracked by Crowd Bug https://jira.atlassian.com/browse/CWD-6345","author":"David Zhu"}]},{"summary":"Jira issue popup window get broken when using Japanese  profile language ","key":"BSERV-19725","url":"https://jira.atlassian.com/browse/BSERV-19725","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nJira issue popup window get broken when using Japanese  profile language.\r\n\r\nThis is reproducible on Data Center: (yes) \r\nh3. Steps to Reproduce\r\n # Have a Bitbucket environment(8.19.6) and integrate with Jira (9.12.12) via application link.\r\n # 'Manage account' and change your profile language into Japanese\r\n # Open a repo, list the source\r\n # Click issue key link showing in Description(if no existing  issue key link, you may commit one).\r\n # Jira ticket window will popup.\r\n\r\nh3. Expected Results\r\n\r\nShowing ticket information correctly.\r\nh3. Actual Results\r\n\r\nShowing some broken fields, like below:\r\nタイプ:dialog.heading.description=説明\r\n\r\n...\r\n\r\n\r\nSee detail in attached screenshot.\r\n !broken_jira_issue_popup.png|thumbnail! \r\n \r\nh3. Workaround\r\n\r\nUsing English as profile language.","createDate":"2024-11-08T09:06:54.000+0000","comments":[{"text":"Hello [~rli@atlassian.com] \r\n\r\nI unzipped the Language Pack (bitbucket-language-pack-ja_JP-8.19.0.rc4-202403032039.jar) on Bitbucket 8.19.6 and checked the property file. As shown below, multiple entries are listed on a single line.　 There are several such lines.\r\n{code:java|title=jira-integration-plugin_ja_JP.properties}\r\ndialog.field.type=\\u30bf\\u30a4\\u30d7:dialog.heading.description=\\u8aac\\u660e{code}\r\nI modified this file, as you can see below.\r\n{code:java}\r\ndialog.field.type=\\u30bf\\u30a4\\u30d7:\r\ndialog.heading.description=\\u8aac\\u660e{code}\r\nI recreated the jar file and tested it. The problem was solved. I hope Atlassian will implement this fix in the next release.\r\n\r\nBest Regards,\r\n\r\nAkira","author":"Akira Higuchi"}]},{"summary":"API Docs for /rest/api/1.0/projects/{projectKey}/repos/{repositorySlug}/commits/{commitId}/builds, don't include PARENT as a required field","key":"BSERV-19721","url":"https://jira.atlassian.com/browse/BSERV-19721","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsing the below API to manually post the build status:\r\n{code:java}\r\nhttp://{baseurl}/rest/api/latest/projects/{projectKey}/repos/{repositorySlug}/commits/{commitId}/builds'{code}\r\nwithout the {{PARENT}} parameter gives the warning on the Bitbucket UI \"{_}Successful build of testFolder for the latest commit is required before this pull request can be merged{_}\".\r\nWe need to update the REST API documentation to make this a required parameter.\r\nh3. Steps to Reproduce\r\n # In the request body of the API\r\n{code:java}\r\nhttp://{baseurl}/rest/api/latest/projects/{projectKey}/repos/{repositorySlug}/commits/{commitId}/builds'\r\n{code}\r\ndon't include the parent parameter:\r\n{code:java}\r\n{\r\n    \"key\": \"TEST-REP123\",\r\n    \"state\": \"SUCCESSFUL\",\r\n    \"url\": \"https://bamboo.url/browse/TEST-REP1-3\",\r\n    \"buildNumber\": \"3\",\r\n    \"description\": \"Unit test build\",\r\n    \"duration\": 1500000,\r\n    \"lastUpdated\": 1359075920,\r\n    \"name\": \"Database Matrix Tests\",\r\n    \"ref\": \"refs/heads/master\",\r\n    \"testResults\": {\r\n        \"failed\": 1,\r\n        \"skipped\": 8,\r\n        \"successful\": 0\r\n    }\r\n}\r\n{code}\r\n # Manually try to run this API query to POST the build status.\r\n\r\nh3. Expected Results\r\nThe API should be able to add/update the Build status to Bitbucket\r\nh3. Actual Results\r\n\r\nThe warning \"{_}Successful build of testFolder for the latest commit is required before this pull request can be merged{_}\" can be seen on the Bitbucket UI.\r\nFor the _Required builds_ feature to work, we look for the *Parent* parameter and check if it has successful builds attached to it\r\nh3. Workaround\r\n\r\nThe *parent* parameter is the one we check to determine if the build is successful or not, here's an example:\r\n{code:java}\r\n{\r\n    \"key\": \"TEST-REP123\",\r\n    \"state\": \"SUCCESSFUL\",\r\n    \"url\": \"https://bamboo.url/browse/TEST-REP1-3\",\r\n    \"buildNumber\": \"3\",\r\n    \"description\": \"Unit test build\",\r\n    \"duration\": 1500000,\r\n    \"lastUpdated\": 1359075920,\r\n    \"name\": \"Database Matrix Tests\",\r\n    \"parent\": \"TEST-REP\",\r\n    \"ref\": \"refs/heads/master\",\r\n    \"testResults\": {\r\n        \"failed\": 1,\r\n        \"skipped\": 8,\r\n        \"successful\": 0\r\n    }\r\n}{code}\r\nPlease make sure to include that in the request body for the POST query.\r\nRelevant API links for example:\r\n * [Bitbucket 8.19 REST API documentation|https://developer.atlassian.com/server/bitbucket/rest/v819/api-group-builds-and-deployments/#api-api-latest-projects-projectkey-repos-repositoryslug-commits-commitid-builds-post]\r\n * [Bitbucket 7.21 REST API documentation|https://docs.atlassian.com/bitbucket-server/rest/7.21.0/bitbucket-rest.html#idp229] ","createDate":"2024-11-05T03:55:34.000+0000","comments":[]},{"summary":"Viewing pull requests that contain large, binary files in a forking workflow can leave behind tmp_pack files","key":"BSERV-19503","url":"https://jira.atlassian.com/browse/BSERV-19503","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nViewing pull requests that contain large, binary files in a [forking workflow|https://www.atlassian.com/git/tutorials/comparing-workflows/forking-workflow] can leave behind {{tmp_pack_*}} files.\r\n\r\nThe issue occurs when the backend {{git fetch}} command for retrieving the PR's effective diff takes longer than a pre-configured limit of 60 seconds.\r\n\r\n \r\n\r\nThis is reproducible on Data Center: yes\r\nh3. Steps to Reproduce\r\n # Use [forking workflow|https://www.atlassian.com/git/tutorials/comparing-workflows/forking-workflow]\r\n # Create a PR from the fork repo to the target repo\r\n # Add several commits that include non-LFS tracked large, binary files to the source repo\r\n{_}Note{_}: there should be enough differences between the source and target branches to make the backend {{git fetch}} command called by the {{getEffectiveDiff}} method take more than 60 seconds and cause a timeout.\r\n # View the pull request's Diff tab\r\n\r\nh3. Expected Results\r\n\r\nThe PR Diff tab can be viewed.\r\nh3. Actual Results\r\n\r\nViewing the Diff tab returns a \"Server Unreachable\" error in the web UI.\r\n\r\nThis action can leave behind large {{tmp_pack_*}} files in the {{<$BITBUCKET_HOME>/shared/data/repositories/<REPO_ID>/objects/pack}} directory.\r\n\r\nIn severe cases, the {{tmp_pack_*}} files can lead to all disk space being consumed and cause an outage.\r\n\r\n \r\n\r\nThe following error is written to the atlassian-bitbucket.log file:\r\n{noformat}\r\n2024-06-17 15:48:24,439 ERROR [http-nio-127.0.0.1-13997-exec-8 url: /projects/PROJECT1/repos/repo1/pull-requests/468/commits/b09c8db02dc08c8356ce24d8a6600ca05035cd71, /mvc/projects/PROJECT1/repos/repo1/pull-requests/468/commits/b09c8db02dc08c8356ce24d8a6600ca05035cd71; user: user1] user1 @1TYRSEUx948x20867902x6 1pvupif 10.195.72.232,127.0.0.1 \"GET /projects/PROJECT1/repos/repo1/pull-requests/468/commits/b09c8db02dc08c8356ce24d8a6600ca05035cd71 HTTP/1.1\" c.a.s.i.w.HandlerExceptionResolverImpl 'git fetch --negotiation-tip=696292162c592cee7d4622e92ee8475ab9b1743f --negotiation-tip=85093196d772c56cbede3f2b1dfa30ec9aec5e47 --negotiation-tip=85093196d772c56cbede3f2b1dfa30ec9aec5e47 /var/atlassian/application-data/bitbucket/shared/data/repositories/285513 b09c8db02dc08c8356ce24d8a6600ca05035cd71:' timed out; exited with code 15\r\ncom.atlassian.bitbucket.scm.CommandTimeoutException: 'git fetch --negotiation-tip=696292162c592cee7d4622e92ee8475ab9b1743f --negotiation-tip=85093196d772c56cbede3f2b1dfa30ec9aec5e47 --negotiation-tip=85093196d772c56cbede3f2b1dfa30ec9aec5e47 /var/atlassian/application-data/bitbucket/shared/data/repositories/285513 b09c8db02dc08c8356ce24d8a6600ca05035cd71:' timed out; exited with code 15\r\n{noformat}\r\nIt shows that the {{git fetch}} command has timed out.\r\n\r\nThe Mesh sidecar profiler logs show that the {{git fetch}} command took longer than 60 seconds:\r\n{noformat}\r\n2024-06-17 15:48:24,435 | grpc-server:thread-2693 | 6LKQF02Rx947x4383288x4\r\n[61648.2ms] - void com.atlassian.bitbucket.mesh.git.GrpcPullRequestService.getEffectiveDiff(RpcGetPullRequestEffectiveDiffRequest,StreamObserver)\r\n [61648.2ms] - PullRequestEffectiveDiff com.atlassian.bitbucket.mesh.git.pull.DefaultPullRequestManager.getEffectiveDiff(GetPullRequestEffectiveDiffParameters)\r\n [61646.6ms] - git fetch --negotiation-tip=696292162c592cee7d4622e92ee8475ab9b1743f --negotiation-tip=85093196d772c56cbede3f2b1dfa30ec9aec5e47 --negotiation-tip=85093196d772c56cbede3f2b1dfa30ec9aec5e47 /var/atlassian/application-data/bitbucket/shared/data/repositories/285513 b09c8db02dc08c8356ce24d8a6600ca05035cd71:\r\n{noformat}\r\nh3. Workaround\r\n\r\nPossible workarounds\r\n - Open PR's with smaller changes\r\n - Change {{gc.prune.expire.default=24}} in {{<$BITBUCKET_HOME>/mesh/mesh.properties}} for the Sidecar or in {{<$MESH_HOME>/mesh.properties}} for standalone Mesh nodes\r\n\r\n \r\n\r\nLong term recommendations:\r\n - Use [Git LFS|https://confluence.atlassian.com/bitbucketserver/git-large-file-storage-794364846.html] for tracking large files.\r\n\r\n ","createDate":"2024-06-25T07:02:27.000+0000","comments":[]},{"summary":"Bitbucket 8.19 (Hazelcast 5.2) Azure discovery with Virtual Machines Scale Set and hazelcast.network.azure.instance.metadata.available=true does not work","key":"BSERV-19407","url":"https://jira.atlassian.com/browse/BSERV-19407","type":"Bug","priority":"","description":"h2. Summary\r\n\r\nIt is not possible to use Bitbucket 8.19 (Hazelcast 5.2) in Azure setups that *use Virtual Machine Scale Sets*, with Azure IMDS discovery, that is with \r\n{code}\r\nhazelcast.network.azure.instance.metadata.available=true\r\n{code}\r\nA bug in Azure's API does not allow the tagging of network interfaces in a VMSS (on the contrary, tagging of network interfaces in a standalone VMs work).\r\n\r\nThe equivalent setup with Bitucket 7.x (Hazelcast 3.12) in our test environment worked.\r\n\r\nh2. Analysis\r\n\r\nHazelcast 5.2 relies on Azure REST API endpoint [List Virtual Machine Scale Set Network Interfaces|https://learn.microsoft.com/en-us/rest/api/virtualnetwork/network-interface-in-vm-ss/list-virtual-machine-scale-set-network-interfaces?view=rest-virtualnetwork-2023-09-01&tabs=HTTP] to get tagged interfaces. Due to the Azure problem, no interfaces are tagged and Hazelcast doesn't form a cluster.\r\n\r\n# Bitbucket 7.x uses Hazelcast 3.12. \r\nHazelcast 3.12 uses Microsoft-provided libraries for access to Azure API.\r\n# Bitbucket 8.19 uses Hazelcast 5.2, which no longer uses Microsoft libraries. \r\nInstead, it relies on publicly documented Azure REST API.\r\n# When running as part of a Virtual Machine Scale Set (VMSS), the [code inside Hazelcast 5.2|https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/java/com/hazelcast/azure/AzureComputeApi.java#L91-L93] does this:\r\n## Calls Azure REST API endpoint [List Virtual Machine Scale Set Network Interfaces|https://learn.microsoft.com/en-us/rest/api/virtualnetwork/network-interface-in-vm-ss/list-virtual-machine-scale-set-network-interfaces?view=rest-virtualnetwork-2023-09-01&tabs=HTTP].\r\n## Parses the response [looking for the \"tag\" property|https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/java/com/hazelcast/azure/AzureComputeApi.java#L102] attached to the network interface.\r\n\r\nHere is the problem: *network interfaces attached to VM instances operating inside the Azure VM scale set are not tagged by Azure*.\r\n\r\nh2. What we tried\r\n\r\nWe tried to tag network interfaces using several approaches but to no avail:\r\n# Add tags to the network interface while creating a VM scale set.\r\nAzure accepts the tag, but no tags are assigned to any interface when looking through the above REST API endpoint.\r\n# When we try from the https://portal.azure.com web portal, going to \"VM scale set / Networking / Network settings / Network security group\" then \"Network interfaces / <choose one interface>\", then choose \"Add tags\", there is an error displayed in the web UI:\r\n{code}\r\nDetails\r\ncolumnNumber: 57 fileName: https://portal.azure.com/Content/Dynamic/hDWs869FxoLX.js line 37 > Function lineNumber: 3 message: Unable to process binding \"with: function(){return tagsEditor }\" Message: tagsEditor is not defined name: ReferenceError stack: with@https://portal.azure.com/Content/Dynamic/hDWs869FxoLX.js line 37 > Function:3:57 i@https://portal.azure.com/Content/Dynamic/hDWs869FxoLX.js:37:7336 f/t</<@https://portal.azure.com/Content/Dynamic/hDWs869FxoLX.js:37:10772 o/init/<@https://portal.azure.com/Content/Dynamic/hDWs869FxoLX.js:37:22638 evaluateImmediate_CallReadThenEndDependencyDetection@https://portal.azure.com/Content/Dynamic/H7ZYsMnJ-ch2.js:43:29183\r\n...\r\n...\r\n{code}\r\n# [REST API \"add tag to network interface\"|https://learn.microsoft.com/en-us/rest/api/virtualnetwork/network-interfaces/update-tags?view=rest-virtualnetwork-2023-09-01&tabs=HTTP] also does not work and displays an error:\r\n{code}\r\n{\r\n  \"error\": {\r\n    \"code\": \"AuthorizationFailed\",\r\n    \"message\": \"The client '8a053114-1926-44f6-bddb-3385602d02a5' with object id '8a053114-1926-44f6-bddb-3385602d02a5' does not have authorization to perform action 'Microsoft.Network/networkInterfaces/write' over scope '/subscriptions/46f50e93-27c2-48cf-ae60-3400d294f77f/resourceGroups/Nenad-test2-RG/providers/Microsoft.Network/networkInterfaces/Nenad-test2-RG-vnet-nic01' or the scope is invalid. If access was recently granted, please refresh your credentials.\"\r\n  }\r\n}\r\n{code}\r\n\r\nThe same thing happens with both \"system assigned managed identity\" and \"user assigned managed identity\".\r\n\r\nh2. How to replicate\r\n\r\n# Setup an Azure Virtual Machine Scale Set with 2 VM instances to use metadata discovery (IMDS)\r\n** Try to add tags to network interfaces using any approach - it won't work. The setup will still be without tags on the interfaces.\r\n# Try to form a Hazelcast 5.2 cluster (use Bitbucket 8.19 or some test code)\r\n** Cluster forming will fail, there will be 2 clusters each with 1 node.\r\n\r\nh2. Known workarounds\r\n\r\n# Use the Bitbucket clustering configuration with an Azure service principal settings, that is setting all of these properties:\r\n{code}\r\nhazelcast.network.azure.instance.metadata.available=false\r\nhazelcast.network.azure.tag=...\r\nhazelcast.network.azure.resource.group=...\r\nhazelcast.network.azure.tenant.id=...\r\nhazelcast.network.azure.subscription.id=...\r\nhazelcast.network.azure.client.id=...\r\nhazelcast.network.azure.client.secret=...\r\n{code}\r\n# Use the {{tcpip}} discovery mechanism and add the IP addresses as a hardcoded list in the {{bitbucket.properties}} file. This may be automated as new nodes being added can just add the complete list of nodes to their list. When that new node connects to existing nodes, that list will update all other nodes as well.\r\n{panel:title=Note}\r\n[Hazelcast - Discovering Members by TCP |https://docs.hazelcast.com/hazelcast/5.2/clusters/discovering-by-tcp] mentions \"You do not have to list all these cluster members, but at least one of the listed members has to be active in the cluster when a new member joins\"\r\n{panel}\r\n","createDate":"2024-05-01T14:03:37.000+0000","comments":[{"text":"This is high severity bug and affect LTS version, when Atlassian is going to resolve it?","author":"Allan Margono"},{"text":"This issue has been found to be caused by bug in Hazelcast. [Issue #26494|https://github.com/hazelcast/hazelcast/issues/26494] has been raised and a [patch submitted |https://github.com/hazelcast/hazelcast/pull/26495](pending review/acceptance).\r\n\r\nAs a workaround, customers can use TCP/IP discovery mechanism, which only require specifying the IP address of a known _master_ node. Other nodes / new nodes added through autoscaling can use this IP address as an \"entry point\" into the cluster.\r\n\r\nDetails of the bug and patch follows.\r\n\r\nHazelcast's Azure Discover Strategy works as follows:\r\n # Retrieve list of network interfaces using the Azure Resource Manager (ARM) REST api ([https://management.azure.com|https://management.azure.com/])\r\n # Filter the network interfaces for the presence of a specific tag (e.g. HZ-CLUSTER=MY-CLUSTER)\r\n # The IP addresses of the filtered network interfaces are used as candidates of the cluster and join attempts will proceed against them\r\n\r\nHowever, Hazelcast uses the {{Microsoft.Compute/virtualMachineScaleSets/networkInterfaces}} resource to retrieve network interfaces when running under VMSS, which seems to always return an empty array [], causing it to form a single node cluster containing the itself as the only member.\r\n\r\nFurthermore, it seems that [tagging network interfaces at the VMSS level|https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/tag-support#microsoftcompute] is not supported - tagging must be performed on individual network interfaces (on each VM in the VMSS).\r\n\r\nThe patch to fix the issue simply uses the {{Microsoft.Network/networkInterfaces}} resource to retrieve network interfaces when running in a VMSS. This resource returns all networks interfaces available for the subscription / resource group, with each network interface containing tags that Hazelcast can use to filter on","author":"David Zhu"}]},{"summary":"The Default Reviewer Conditions User Interface Has a Hard Limit of 100 Entries instead of pagination","key":"BSERV-18990","url":"https://jira.atlassian.com/browse/BSERV-18990","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Default Reviewer Conditions User Interface currently has a hard limit of 100 entries, lacking pagination. This limitation can lead to confusion in repositories with numerous rules, as not all reviewer conditions will be displayed in the interface, causing uncertainty about the application of specific rules.\r\n !screenshot-1.png|thumbnail! \r\nh3. Steps to Reproduce\r\nCreate a 100+ default reviewer conditions for a repository.\r\n\r\n\r\nh3. Expected Results\r\nAll the reviewer conditions should be displayed using paging system.\r\n\r\nh3. Actual Results\r\nNot all the reviewer conditions are displayed.\r\n\r\n\r\nh3. Workaround\r\n\r\n* Use the [GET API|https://developer.atlassian.com/server/bitbucket/rest/v815/api-group-pull-requests/#api-default-reviewers-latest-projects-projectkey-repos-repositoryslug-conditions-get] with limit=1000 to get list of '1000' configured reviewer conditions: (This would list the ones not visible in the UI)\r\n{code}\r\nGET <<Bitbucket_base_URL>>/rest/default-reviewers/latest/projects/<<project_key>>/repos/<<repo_slug>>/conditions?limit=1000\r\n{code}\r\n* In case you want to remove a particular condition not visible in the UI, use the [DELETE API|https://developer.atlassian.com/server/bitbucket/rest/v815/api-group-pull-requests/#api-default-reviewers-latest-projects-projectkey-repos-repositoryslug-condition-id-delete] after capturing the condition id from the previous step.\r\n{code}\r\nDELETE <<Bitbucket_base_URL>>/rest/default-reviewers/latest/projects/{projectKey}/repos/{repositorySlug}/condition/{id}\r\n{code}\r\n","createDate":"2023-11-17T12:22:10.000+0000","comments":[]},{"summary":"Duplicate pull request and branch information appear in Jira development panel on moving Jira issue key from one project to another in Jira ","key":"BSERV-18975","url":"https://jira.atlassian.com/browse/BSERV-18975","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn moving a Jira issue key from one project to another project in Jira, Bitbucket associates the pull request and branch information to 2 Jira issue keys (Old issue key and new issue key). This causes duplicate pull requests and branch information to appear in Jira development panel.\r\n\r\nThis is reproducible on Data Center: yes\r\nIssue is reproducible on Jira Cloud as well.\r\nh3. Steps to Reproduce\r\n# Create a repository (repo1) in Bitbucket\r\n# Create 2 projects in Jira (HOT, COOL)\r\n# Create an issue in HOT, i.e HOT-1\r\n# Create a new branch in Bitbucket (branch1)\r\n# Push a change to branch1\r\n# specifying issue key HOT-1 in the commit message and Create a pull request specifying issue key HOT-1 in the pull request title\r\n# You will see the commit and pull request details appearing in Jira development panel for issue HOT-1\r\n# Move the issue key HOT-1 from one project to another project in Jira, in this case, HOT to COOL project\r\n# The issue key HOT-1 is changed to COOL-1 in project COOL\r\n# Push another commit to the branch branch1 specifying the latest issue key which is COOL-1 and create a pull request specifying issue key COOL-1 in the pull request title\r\n# You will now see 2 pull requests (#1 duplicate records) and 2 branches in Jira development panel.\r\n\r\nh3. Expected Results\r\nOnly one pull request per PR ID/branch per branch is expected to appear in Jira development panel \r\n\r\nh3. Actual Results\r\nTwo pull request records per PR ID/ 2 branch records per branch appear in Jira development panel.\r\n!pullrequests.png|thumbnail! \r\n!branches.png|thumbnail! \r\n\r\nh3. Workaround\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-11-10T12:21:10.000+0000","comments":[]},{"summary":"Overriding cache-control header for Jira causes smart commits (and other remote events) to stop working","key":"BSERV-11779","url":"https://jira.atlassian.com/browse/BSERV-11779","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nOverriding the default cache-control header (Cache-Control: no-transform, max-age=600, stale-if-error=86400, stale-while-revalidate=86400 ) and if max-age, stale-if-error, stale-while-revalidate are not set for Jira, then it causes the smart commits to stop working.\r\n\r\nThis issue is noticed in environment where Jira is running behind IIS where ASP.NET is registered with IIS and the application pool doesn't have the \"No Managed code\" selected. But this is not limited to IIS , if the proxy overrides the cache-control as mentioned above, this issue may occur.\r\n\r\n*Note:* This will affect *all remote events that Bitbucket publishes* if the consumer that subscribes to those events is behind a proxy that is overriding the {{Cache-Control}} header in the response. It is not specific to just Jira and Smart commits but all Bitbucket events Jira is interested in and even Bamboo events such as branch created, branch changed, pull request events etc.\r\n \r\nh3. Environment\r\n\r\nBitbucket Server has an application link with a Jira instance which is running behind proxy and proxy is overriding Cache-control header.\r\nh3. Steps to Reproduce\r\n\r\nExample with IIS\r\n * Configure IIS in front of Jira\r\n * Register ASP.NET for IIS with a command as below\r\n{code:java}\r\ncd C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\r\n C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319>dism /online /enable-feature /all /featurename:IIS-ASPNET45 \r\n{code}\r\n\r\n * Find the Application pool that site is using and change the .NET CLR Version to .NET CLR Version 4.x.x.x\r\n * Create application Link with Bitbucket\r\n * Restart Bitbucket to make sure cache is cleared\r\n * Test smart commit\r\n * To check the cache-control run curl with verbose and verify the header\r\n{code:java}\r\ncurl -v http://<JIRA-URL>/rest/remote-event-consumer/1/capabilities\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nSmart commit will work as expected.\r\nh3. Actual Results\r\n\r\nSmart commits stop working and following appear in log. As you can see consumable by is empty\r\n{noformat}\r\n2019-05-07 11:31:42,217 DEBUG [AtlassianEvent::thread-2]  c.a.e.r.impl.RemoteEventDispatcher RemoteEvent com.atlassian.devstatus.IssueChangedEvent@51802add[issueKeys=[JRA-227],sourceId=<null>,sourceUrl=<null>] consumable by []\r\n2019-05-07 11:31:42,217 DEBUG [AtlassianEvent::thread-4]  c.a.e.r.impl.RemoteEventDispatcher RemoteEvent \r\n{noformat}\r\nh3. Workaround\r\n * [Bypass a reverse proxy|https://confluence.atlassian.com/kb/how-to-bypass-a-reverse-proxy-or-ssl-in-application-links-719095724.html] and recreate the application link.\r\n * Change the cache-control setting in proxy to not override it.\r\n * For IIS, make sure the application for the site is using \"No Managed code\"","createDate":"2019-05-29T04:08:19.000+0000","comments":[{"text":"Any update on fix version release date for this we upgraded from *7.21.7 to 8.9.2* and we are still seeing this issue.","author":"kiran.su"},{"text":"Please give us ETA for fixed version to this bug. Currently we are in Bitbucket version 8.9.2 and this is affecting our environment. ","author":"Mathumitha"},{"text":"Any update on the fixed version? the workaround is not helping us, and this is impacting We have an open ticket [AIDT-22482|https://adtjira.accenture.com/browse/AIDT-22482] on this issue. As new LTS version8.9.2 also has this issue as confirmed by your support team.","author":"kiran.su"}]},{"summary":"Bitbucket Cloud search code feature shows duplicate values","key":"BCLOUD-23644","url":"https://jira.atlassian.com/browse/BCLOUD-23644","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen using the Bitbucket Cloud search code feature in API or UI, it shows duplicate values.\r\n\r\nh3. Steps to Reproduce\r\n # Use code search either in API or UI\r\n\r\nh3. Expected Results\r\nThere are no duplicate values in the search output\r\n\r\nh3. Actual Results\r\nIn some cases the output provides duplicate values\r\n\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-02T06:04:24.000+0000","comments":[]},{"summary":"Components, Milestones, and Versions pages of issue tracker settings are blank","key":"BCLOUD-23636","url":"https://jira.atlassian.com/browse/BCLOUD-23636","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen an issue tracker is enabled for a Bitbucket Cloud repo, an admin has the option to set {*}Components{*}, {*}Milestones{*}, and *Versions* from the respective pages in {*}Repository settings{*}.\r\n\r\nThese pages are blank at the moment.\r\nh3. Steps to Reproduce\r\n # Open a Bitbucket Cloud repository\r\n # Go to *Repository settings* > *Issue tracker*\r\n # Select either *Private issue tracker* or *Public issue tracker* and then the button *Save*\r\n # Refresh the page\r\n # The left sidebar with the repository settings will now have new options for the Issue tracker. Select either {*}Components{*}, or {*}Milestones{*}, or {*}Versions{*}.\r\n\r\nh3. Expected Results\r\n\r\nThe user can see any existing components, milestones, or versions respectively, and add new ones.\r\nh3. Actual Results\r\n\r\nThe page displayed is blank and the user cannot add new components, milestones, or versions respectively.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T15:08:47.000+0000","comments":[{"text":"(+) List of {*}Components{*}, or {*}Milestones{*}, or *Versions* are back on my end.\r\n(-) Unfortunately editing a version is not stored\r\n\r\n\r\nfor all three Components, Milestones, and Versions add, and delete works. \r\nOn editing one only gets an empty input field, an prefilled existing values is missing. \r\nafter giving the new value neither \"Save\" nor enter-key updates/stores the value.","author":"marcus.helbig"}]},{"summary":"Bitbucket Pipelines stuck on building status","key":"BCLOUD-23635","url":"https://jira.atlassian.com/browse/BCLOUD-23635","type":"Bug","priority":"","description":"h3. Issue Summary\r\nBitbucket Pipelines stuck in \"IN PROGRESS\" state and can't start the manual steps\r\n\r\nh3. Steps to Reproduce\r\n* Start a Bitbucket Pipelines build, that has regular steps and manual steps\r\n\r\nh3. Expected Results\r\nWhen the normal steps are finished, the build is in paused status and can start the manual steps\r\nh3. Actual Results\r\nThe build is in IN PROGRESS status and can't start the manual steps\r\nh3. Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-28T07:13:32.000+0000","comments":[]},{"summary":"Branches: Missing explicit association of form controls","key":"BCLOUD-23628","url":"https://jira.atlassian.com/browse/BCLOUD-23628","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe explicit association is missing for “From branches” and “Branch name” form controls in the modal dialog (that becomes available on activating “Create branch” button) in the main content area.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Open the “Branch” page.\r\n# Navigate to the main content.\r\n# Navigate to the “Create branch” button and activate it.\r\n# A modal dialog appears on the page.\r\n# Navigate to the mentioned form controls.\r\n# Inspect the code.\r\n\r\n\r\nh3.Screenshot\r\n !screenshot-1.png|thumbnail! \r\nh3. Actual Results\r\nThe “From branch” and “Branch name” form controls do not have label explicitly associated to these. The 'for' and 'id' association is missing between the label and the form controls.\r\n\r\nAs a result, screen reader might get confuse about the form controls.\r\n\r\nh3. Expected Results\r\nAssociate the label explicitly with the form control by providing identical value which is unique from other IDs to \"for\" and \"id\" attribute to ensure that assistive technologies identify the label for the form control correctly.\r\n\r\nh3.Code Snippet\r\n\r\n{code:java}\r\n<label for=\"123\" class=\"css-a67pis e8xapdy1\">From branch</label>\r\n<input id=\"123\" autocapitalize=\"none\" autocomplete=\"off\" autocorrect=\"off\" id=\"react-select-5-input\" spellcheck=\"false\" tabindex=\"0\" type=\"text\" aria-autocomplete=\"list\" value=\"\" style=\"box-sizing: content-box; width: 2px; background: 0px center; border: 0px; font-size: inherit; opacity: 1; outline: 0px; padding: 0px; color: inherit;\">\r\n\r\n{code}\r\n\r\nh3. Environment\r\nMacBook Pro (16-inch, 2021)\r\nmacOs Monterey Version 12.3.1\r\nChrome - Version 101.0.4606.81 (Official Build) (64-bit)\r\nFirefox- Version 93.0 (32-bit)\r\nSafari- Version 15.3 (17612.4.9.1.5)\r\nJAWS- Version 2021\r\nNVDA- Version 2020.3\r\nVoiceover - Version Latest\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-26T08:02:11.000+0000","comments":[]},{"summary":"Bitbucket API and UI href for project avatars should reference bytebucket","key":"BCLOUD-23626","url":"https://jira.atlassian.com/browse/BCLOUD-23626","type":"Bug","priority":"","description":"h3. Issue Summary\r\nFor projects, when using the API, or when viewing inspecting the object in the UI, the avatar resource link is returned in the following JSON object:\r\n{code}\r\n    },\r\n    \"html\": {\r\n      \"href\": \"https://bitbucket.org/<workspaceID>/workspace/projects/<projectKey>/avatar\"\r\n    },\r\n{code}\r\n\r\nHowever, this is not the case with repositories' and workspaces' avatars. These resources are available in  the following format instead for repositories and workspaces:\r\n{code}\r\n    \"avatar\": {\r\n      \"href\": \"https://bytebucket.org/ravatar/%7B<UUID>%7D\"\r\n    },\r\n{code}\r\n\r\nThe impact of this is that, for repositories and workspaces, the avatar image can be viewed publicly, without requiring users to be logged into Bitbucket. This is inconsistent with the behavior of projects, which require the user to be authenticated before redirecting to the appropriate resource in S3.\r\n\r\nh3. Steps to Reproduce\r\nThere are two ways to reproduce this:\r\nFirst option:\r\n # Navigate to any project in the UI;\r\n # Open the devtools console (F12) and click on the avatar for the project\r\n # You should see that the reference for the avatar resource is https://bitbucket.org/<workspaceID>/workspace/projects/<projectKey>\r\n\r\nSecond option:\r\n # Use the following Bitbucket API endpoint \r\n{code}\r\nhttps://api.bitbucket.org/2.0/workspaces/{workspace}/projects/{project_key}\r\n{code}\r\n # Check the response. The project avatar object will look like this:\r\n{code}\r\n    },\r\n    \"html\": {\r\n      \"href\": \"https://bitbucket.org/<workspaceID>/workspace/projects/<projectKey>/avatar\"\r\n    },\r\n{code}\r\n\r\nh3. Expected Results\r\nThe Avatar reference to the resource should reference the appropriate bytebucket link in the API and UI, like so:\r\n{code}\r\nhttps://bytebucket.org/ravatar/%7B<UUID>%7D\r\n{code}\r\n\r\nThis will allow users to access the avatar resource without authentication, to be consistent with other endpoints such as repositories and workspaces.\r\n\r\nh3. Actual Results\r\nBitbucket references the following link to redirect to the Avatar resource for projects, both on API and UI:\r\n{code}\r\nhttps://bitbucket.org/<workspaceID>/workspace/projects/<projectKey>/avatar\r\n{code}\r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-25T17:16:27.000+0000","comments":[]},{"summary":"Merge button on the branch view page is greyed out and shows \"You do not have permission to merge this branch to XXX\"  message","key":"BCLOUD-23620","url":"https://jira.atlassian.com/browse/BCLOUD-23620","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile trying to merge branches from the branch view page(Branches -> select the source branch -> click (*...*) -> Merge, the Merge button on the branch view page is greyed out and shows \"*You do not have permission to merge this branch to XXX*\"  message\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Create a new branch \"_feature_\" in a repo and make some changes\r\n# Navigate to *Branches* page -> Click on the feature branch we just created\r\n# Click (*...*) -> Merge\r\n\r\n\r\nh3. Expected Results\r\n\r\n* The diff is loaded correctly\r\n* If there are no conflicts and branch restrictions blocking merge access, you should be able to merge the feature branch into destination\r\n\r\nh3. Actual Results\r\n\r\n* The diff is loaded correctly\r\n* Even if there are no conflicts, sometimes it shows that there are conflicts\r\n*  Even though there are no branch restrictions blocking merge access to the user, the merge button is greyed out and shows *You do not have permission to merge this branch to XXX*  message.\r\n\r\n(i) Another issue is that if we change the destination branch, the diff is not updated until page refresh. \r\n\r\nh3. Workaround\r\n\r\n* After loading the diff, change the \"destination\" branch to a different branch and then change it back to the \"destination\" previously listed or refresh the page\r\n","createDate":"2025-03-21T08:39:58.000+0000","comments":[{"text":"Hi everyone - we are aware of an issue relating to the Merge button on the branch page and are looking into a resolution that we can provide ASAP. More details to follow.\r\n\r\n*Update:* We're currently in the process of implementing a fix for this issue. As a short-term work-around, refreshing your browser should resolve the problem.","author":"Edmund Munday"}]},{"summary":"Bitbucket Repository Import URL Validation False – Valid URLs Throw Errors","key":"BCLOUD-23610","url":"https://jira.atlassian.com/browse/BCLOUD-23610","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n\r\n\r\nWhen importing a Bitbucket repository, valid URL formats are being rejected. For example, the following URL formats are considered valid:\r\n * {{https://bitbucket.org/workspace/repo/src/master/}}\r\n * {{https://bitbucket.org/workspace/repo}}\r\n * {{https://username@bitbucket.org/workspace/repo.git}}\r\n\r\nh3. Steps to Reproduce\r\n # Click on *Create Repository* → {*}Import{*}.\r\n # Enter any of the above repository URL formats.\r\n # The system displays a \"No repository exists at that URL.\" error (404 not found).\r\n\r\nh3. Expected Results\r\n\r\nThe import should validate the URL as correct and proceed with the repository import.\r\nh3. Actual Results\r\nThe system throws a 404 error with the message: \"No repository exists at that URL.\"\r\n\r\n\r\nh3. Workaround\r\n\r\nUsers can continue to use one of the valid URL formats by explicitly entering the username, password, project, and repo name, then clicking on import. In such cases, the repository imports successfully. If any error occurs during this process, it should be reported to bitbucket cloud support.\r\n\r\n","createDate":"2025-03-13T08:54:26.000+0000","comments":[]},{"summary":"Navigating between the PR overview tab to the 'Files Changed' tab, or the 'Commits' tab causes the emojis to not render properly.","key":"BCLOUD-23584","url":"https://jira.atlassian.com/browse/BCLOUD-23584","type":"Bug","priority":"","description":"h3. Issue Summary\r\nEmojis added to the pull request overview tab description or comment will not render when the user navigates between the Files Changed or Commit tab.\r\n\r\nh3. Steps to Reproduce\r\n# Create a Pull request\r\n# Add emoji for example :white_check_mark:\r\n# Emoji Render showing Green check mark\r\n# Navigate to the Files Changed or Commit tab and back to the Overview page\r\n\r\nh3. Expected Results\r\nEmoji render properly when switching between tab\r\n\r\nh3. Actual Results\r\nThe emoji did not render and show the emoji name\r\n !Screenshot 2025-02-25 at 9.39.20 AM.png|thumbnail! \r\n\r\nh3. Workaround\r\nRefresh the page, this will render the emoji.","createDate":"2025-02-24T22:41:34.000+0000","comments":[{"text":"Hi [~skhandelwal@atlassian.com], we suspect this issue originates from the editor team's packages that we import. We had hoped that upgrading to the latest version would resolve it, but unfortunately, the issue still persists. We've reached out to the editor team to see if they have any insights into the root cause and whether this falls under their responsibility. You can follow the discussion here: [https://atlassian.slack.com/archives/CFG3PSQ9E/p1742247240069679].","author":"Kinza Ahmed"}]},{"summary":"When adding a reviewer through API the creator of the PR gets removed from the watchers","key":"BCLOUD-23540","url":"https://jira.atlassian.com/browse/BCLOUD-23540","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen adding a reviewer through API the creator of the PR gets removed from the watchers\r\n\r\nh3. Steps to Reproduce\r\n # Create a PR on the UI and check that you'll be a watcher\r\n # Use the API (with OAuth or Workspace Access Tokens) to add another person as a reviewer\r\n # Refresh the browser page and check that you are no longer listed as a watcher\r\n\r\nh3. Expected Results\r\n - That the creator of the PR is not removed from the watchers\r\n\r\nh3. Actual Results\r\n - The creator of the PR is removed from the watchers\r\n\r\nh3. Workaround\r\n - The only workaround is to use the same credentials from the creator of the PR, so that you're not removed from the watchers of the PR","createDate":"2025-01-14T14:30:14.000+0000","comments":[]},{"summary":"Slowness on New Runtime","key":"BCLOUD-23509","url":"https://jira.atlassian.com/browse/BCLOUD-23509","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nA small minority of customers have reported performance issues on the new runtime, mainly when using {*}Node.js{*} and *PHP*. This issue is isolated to a few specific IO conditions and is currently under investigation by the engineering team to identify the root cause and potential solutions.\r\n\r\nMost build performance variations are likely unrelated to this bug. Please raise a support ticket to investigate. ","createDate":"2024-12-17T06:35:52.000+0000","comments":[]},{"summary":"The bitbucket-pipelines.yml Validator doesn't support 4x/8x size options","key":"BCLOUD-23485","url":"https://jira.atlassian.com/browse/BCLOUD-23485","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe recent introduction of 4x/8x size options are not supported by the bitbucket-pipelines.yml Validator\r\n * [https://bitbucket.org/product/pipelines/validator]\r\n\r\nThis is reproducible on Data Center: (no)\r\nh3. Steps to Reproduce\r\n # Navigate to [https://bitbucket.org/product/pipelines/validator]\r\n # Add the 4x or 8x size options\r\n ** Example:\r\n ** \r\n{code:none}\r\nimage: atlassian/default-image:3\r\n\r\noptions:\r\n  size: 4x\r\n{code}\r\n\r\nh3. Expected Results\r\n * File should be vaild and no error message should be shown\r\n\r\nh3. Actual Results\r\n * A message \"Use either 1x or 2x as the string\" appears and the file is \"Invalid\"\r\n!image-2024-11-22-14-58-54-617.png|width=360,height=169!\r\n\r\nh3. Workaround\r\n * Ignore the error and commit the changes as normal, since 4x/8x sizes are supported.","createDate":"2024-11-22T23:00:32.000+0000","comments":[]},{"summary":"Endless Windows Loop on \"Configure Email\" in Notifications Settings and on Username change","key":"BCLOUD-23484","url":"https://jira.atlassian.com/browse/BCLOUD-23484","type":"Bug","priority":"","description":"h4. *Issue Summary*\r\n\r\nIn Bitbucket's personal settings, users experience an infinite loop of windows when attempting to configure their email under the \"Notifications\" tab. Clicking on \"Configure email\" repeatedly opens new windows instead of navigating correctly.\r\n\r\nA similar issue is reproducible when changing the Bitbucket username\r\nh4. *Steps to Reproduce*\r\n # Navigate to your Bitbucket personal settings.\r\n # Go to the *\"Notifications\"* tab.\r\n # Click on *\"Configure email\"* under the notifications settings.\r\n\r\nA similar issue is reproducible when changing the Bitbucket username:\r\n # Navigate to your Bitbucket personal settings.\r\n # Select the link *(change)* next to the Bitbucket username.\r\n # Provide a new username and select {*}Change{*}.\r\n\r\nh4. *Expected Results*\r\n\r\nClicking \"Configure email\" should open a single window or navigate directly to the email configuration page without triggering an endless loop.\r\n\r\n*Screenshot:*\r\n*!image-2024-11-22-18-05-15-580.png|width=640,height=341!*","createDate":"2024-11-22T12:36:01.000+0000","comments":[]},{"summary":"Default branch is incorrect when repo is created via API","key":"BCLOUD-23465","url":"https://jira.atlassian.com/browse/BCLOUD-23465","type":"Bug","priority":"","description":"When a new repository is created in the Web UI, the \"defaultbranch\" defaults to \"main\" with the option to provide a custom name as desired.\r\n\r\nWhen a new repository is created via the REST API, the \"defaultbranch\" defaults to \"master\" despite the [initiative to switch away from master to main|https://www.atlassian.com/blog/it-teams/moving-away-from-master-as-the-default-name-for-branches-in-git].\r\n\r\nThe default should be \"main\" to make the experiences the same.","createDate":"2024-11-08T19:03:58.000+0000","comments":[{"text":"Hello Atlassian team - we are also waiting to have this feature available \r\n\r\nPlease look into it .\r\n\r\nThanks ","author":"Hari Ghimire"}]},{"summary":"Rerun on custom pipelines does not carry over the variables","key":"BCLOUD-23448","url":"https://jira.atlassian.com/browse/BCLOUD-23448","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * When running manual pipelines with the *custom* keyword, you can request specific variables for that step. If you select to re-run entire pipeline, it will spawn a new pipeline but will not carry over the variables' values, nor ask you to input them again.\r\n * This doesn't apply to a rerun of the failed steps of a pipeline (it doesn't spawn a new pipeline).\r\n\r\nh3. Steps to Reproduce\r\n # Setup a custom pipeline and ask for any variable;\r\n # Run the custom pipeline and input the variables as needed;\r\n # Rerun that build.\r\n\r\nh3. Expected Results\r\n * The variables should be carried over to the rerun build, or it should ask for you to input the variables again;\r\n\r\nh3. Actual Results\r\n * The build runs but the custom variables are empty.\r\n\r\nh3. Workaround\r\n * Run the custom build again directly from the pipelines page.","createDate":"2024-10-18T15:02:58.000+0000","comments":[{"text":"This makes \"rerun\" UI feature difficult to use for us. Would be great if this could be picked up as there seems to be no alternatives for storing info at the pipeline level, let me know otherwise though!","author":"Kenneth.Kwak"},{"text":"This makes the Rerun feature almost useless. Jenkins has had this feature for +10 years.","author":"Matt Fields"}]},{"summary":"Next link for Pagination in Bitbucket API uses workspace and repo slugs instead of IDs which breaks forge apps.","key":"BCLOUD-23447","url":"https://jira.atlassian.com/browse/BCLOUD-23447","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nNext link for Pagination in Bitbucket API uses workspace and repo slugs instead of IDs which breaks forge apps.\r\n\r\nThis affects many APIs including [List Commits|https://developer.atlassian.com/cloud/bitbucket/rest/api-group-commits/#api-repositories-workspace-repo-slug-commits-get] and [List pipeline variables|https://developer.atlassian.com/cloud/bitbucket/rest/api-group-pipelines/#api-repositories-workspace-repo-slug-pipelines-config-variables-get] etc will have a next page link like this.\r\n\r\nFor example, [List pipeline variables|https://developer.atlassian.com/cloud/bitbucket/rest/api-group-pipelines/#api-repositories-workspace-repo-slug-pipelines-config-variables-get] will have next link in the following format.\r\n\r\n{code}\r\n\"next\": \"https://api.bitbucket.org/2.0/repositories/${workspace_slug}/${repo_slug}/pipelines_config/variables?page=2&pagelen=10\",\r\n{code}\r\n\r\nIf we try to use this with [Forge routeFromAbsolute|https://developer.atlassian.com/platform/forge/apis-reference/fetch-api-product.requestbitbucket/#absolute-path-construction--routefromabsolute-] then we get a 400 - INVALID_TARGET_URL error.\r\n\r\n{code}\r\nconst fetchVariables = async (workspaceId, repositoryId) => {\r\n    const res = await api\r\n        .asApp()\r\n        .requestBitbucket(route`/2.0/repositories/${workspaceId}/${repositoryId}/pipelines_config/variables`);\r\n   \r\n    const data = await res.json();\r\n    \r\n    const res2 = await api\r\n  .asApp()\r\n  .requestBitbucket(routeFromAbsolute(`${data.next}`)); // calling the second page here.\r\n\r\n  const data2 = await res2.json();\r\n\r\n    return data2;\r\n};\r\n{code} \r\n\r\nh3. Steps to Reproduce\r\n # Create a Forge app for Bitbucket\r\n # Using *requestBitbucket* call the next page using the link received in the first response\r\n\r\nh3. Expected Results\r\nThe next page can be retrieved using the next link\r\n\r\nh3. Actual Results\r\n\r\nwe get a 400 - INVALID_TARGET_URL error. Because, *requestBitbucket* expects workspace and repo IDs in the link and not slugs.\r\n!invalid_url.png|width=300!\r\n\r\nh3. Workaround\r\n\r\nWe can increase the pagelen (i.e. ?pagelen=500) in the first call to retrieve all the responses in a single call to avoid pagination.","createDate":"2024-10-18T00:30:13.000+0000","comments":[]},{"summary":"ADD Command in Dockerfile Fails with BuildKit Enabled on Cloud Pipelines","key":"BCLOUD-23409","url":"https://jira.atlassian.com/browse/BCLOUD-23409","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe {{ADD}} command is typically used to fetch content from a URL and copy it to a local directory specified in the Dockerfile. However, following the recent Docker Daemon 25 upgrade, BuildKit is enabled by default, which breaks this functionality in cloud pipelines.\r\nh3. Steps to Reproduce\r\n # Create a Dockerfile with the {{ADD}} command.\r\n # Use the command {{{}ADD <public_repository_URL> /tmp{}}}.\r\n # Build the Docker image using Docker services in cloud pipelines with {{{}DOCKER_BUILDKIT=1{}}}.\r\n\r\nh3. Expected Results\r\n\r\nThe repository content should be fetched and added to the {{/tmp}} directory.\r\nh3. Actual Results\r\n\r\nThe build fails with the following error:\r\n{noformat}\r\nfailed to load cache key: failed to init repo at /var/lib/docker/165536.165536/overlay2/r4bgug976866y3z0t486h7zn7/diff: exec: \"git\": executable file not found in $PATH {noformat}\r\nh3. Workaround\r\n * Disable the Docker buildkit \r\n\r\n{code:java}\r\nDOCKER_BUILDKIT=0{code}\r\n * Or use self-hosted runners with custom docker daemon (service) image. Where you can have buildkit enabled and can use ADD command to fetch the remote URL contents. ","createDate":"2024-09-25T08:34:00.000+0000","comments":[]},{"summary":"Cannot select files from Pull request file tree","key":"BCLOUD-23403","url":"https://jira.atlassian.com/browse/BCLOUD-23403","type":"Bug","priority":"","description":"h3. Issue Summary\r\nFor large PRs, files that are present on the bottom of the screen in the file tree cannot be selected to review when using \"individually\" option for load files\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # On pull requests page go to \"Settings\"\r\n # Select Load files as \"individually\"\r\n # For a large PR, try to select a file from bottom of the screen\r\n \r\n\r\nh3. Expected Results\r\nShould be able to select the file\r\nh3. Actual Results\r\nThe screen get sticky and user will not be able to scroll and select the file\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n...\r\n{noformat}\r\n\r\nh3. Workaround\r\nClose sub directories from the list so that the list looks shortened and can fit the screen allowing you to select the file","createDate":"2024-09-19T10:40:04.000+0000","comments":[]},{"summary":"Selecting \"No status\" at the end of a finished review after a pull request has been merged can cause missing approvals","key":"BCLOUD-23373","url":"https://jira.atlassian.com/browse/BCLOUD-23373","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a user approves a pull request and then starts a batch comment review while another user merges the pull request, the first user can remove their own approval at the end of the review, leading to a merged pull request that has missing approvals.\r\nh3. Steps to Reproduce\r\n # User 1 approves User 2's pull request\r\n # User 1 starts adding comments to User 2's pull request with a batch comment review.\r\n # User 2 merges the pull request, since the minimum approval branch restriction is met.\r\n # Without refreshing the page, user 1 finishes the review and selects \"No status\" for submitting the review.\r\n\r\nh3. Expected Results\r\n\r\nThe pull request should still be allowed to be merged. However, user 1 should not have the ability to clear their approval for a pull request that has been merged. Potentially, users who are in the middle of a batch comment review should have their review discarded when the pull request becomes merged.\r\nh3. Actual Results\r\n\r\nThe pull request is in a \"merged\" state, but user 1's approval is missing from the pull request and the approval event is no longer shown in the activity feed. However, the minimum approvals branch restriction is still passing.\r\nh3. Workaround\r\n\r\nWhen batch comment reviews are in progress, the author of the pull request who attempts to merge their pull request will receive a warning that there are reviews still in progress. In order to avoid this pull request state, authors should wait until reviews have concluded prior to merging in their pull request.\r\nUsers who are in the middle of a batch comment review should regularly refresh the page, when prompted by the reload flag, to make sure they are reviewing an updated pull request.","createDate":"2024-08-23T17:09:34.000+0000","comments":[]},{"summary":"Clicking the \"Sync now\" button at the same time as merging the pull request fails branch restrictions, but may allow the pull request to be merged anyways","key":"BCLOUD-23360","url":"https://jira.atlassian.com/browse/BCLOUD-23360","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSyncing the source branch of a pull request at the same time as the pull request gets merged leaves it in a state where the minimum approvers branch restriction fails, but the PR is merged anyway. There seems to be a race condition between whether or not the sync commit or the merge commit finishes first.\r\nh3. Steps to Reproduce\r\n # Set up branch restrictions on a branch to merge into that branch via pull requests such that a minimum number of approvals is required and that changing the source branch resets approvals.\r\n # Open a pull request, setting the destination branch as the one with the merge restrictions. Get the minimum number of approvers to approve the pull request.\r\n # Merge the pull request, but at the same time, have another user click the \"Sync now\" button to update the branch.\r\n\r\nh3. Expected Results\r\n\r\nThe branch restrictions should fail, since updating the source branch reset approvals, and the PR should not be merged.\r\nh3. Actual Results\r\n\r\nThe branch restrictions fail and pull request approvals are reset. However, the PR still merges anyway.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior.","createDate":"2024-08-16T23:44:51.000+0000","comments":[]},{"summary":"Docker cache is not being used in Bitbucket Pipelines","key":"BCLOUD-23193","url":"https://jira.atlassian.com/browse/BCLOUD-23193","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn Bitbucket Pipelines, docker-cached layers from previous builds are not being used in subsequent builds.\r\n\r\nThe docker cache is successfully generated and uploaded in the initial pipeline. It's downloaded in the next step, but it's not used by docker, which is building the layers from scratch.\r\nh3. Steps to Reproduce\r\n # Create a pipeline and have a step configured to do a *docker build* , and to use the docker pre-defined cache\r\n{code}\r\npipelines:\r\n  custom:\r\n    test-build-docker-image:\r\n      - step:\r\n          name: Build Docker image\r\n          script:\r\n            - docker build .\r\n          caches:\r\n            - docker\r\n          services:\r\n            - docker\r\n{code}\r\n # Run the pipeline the first time. It will generate a cache with the docker image built layers and upload it to Bitbucket.\r\n# Run the pipeline a second time. It will now download the previously generated cache, but docker will not use the cache layers and will build each layer again from scratch.\r\n\r\nh3. Expected Results\r\nDocker should use the cached layers from the previous build if no change was applied to that layer in the Dockerfile\r\nh3. Actual Results\r\nDocker is using the previous cache layers.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-04T20:45:55.000+0000","comments":[{"text":"Hello, we are also lacking this feature.. we do have public images in AWS registry containing all our dependencies (except our software code)... we would really like to speed up this build time, specially needed when we have to deploy hotfixes urgently.\r\n\r\nThank you","author":"Henrique Haas"},{"text":"How is lack of caching not a priority fix?  This burns build minutes and slows down deployments and the CI cycle.  This should be a basic feature of a cloud pipeline that uses docker.","author":"Bryant Foresman"},{"text":"Please fix this asap! Our CI pipeline is so slow due to this","author":"Simon Tegelid"},{"text":"I am seeing the same thing in my projects. Cache gets built, pushed, loaded and not used.\r\n\r\nBuilding the image locally does use the cache as expected.","author":"Ezequiel"}]},{"summary":"Renamed files or moved files won't save the \"Viewed\" option in PRs","key":"BCLOUD-23186","url":"https://jira.atlassian.com/browse/BCLOUD-23186","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * While reviewing a Pull Request, when marking a file that was simply renamed or moved to a different directory as \"Viewed\", this status won't be saved after refreshing the browser tab or after moving to the next file.\r\n\r\nh3. Steps to Reproduce\r\n # Rename a file or move it to a different directory in branch1 of a repository\r\n # Create a Pull Request with branch1 as a source branch\r\n # Mark the renamed or moved file as *Viewed*\r\n # Refresh the screen or move to the next PR file to review\r\n\r\nh3. Expected Results\r\n * All files that were marked as *Viewed* should have their status saved \r\n\r\nh3. Actual Results\r\n * Renamed and moved files will appear as if they were not marked as *Viewed*\r\n\r\nh3. Workaround\r\n * Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-04-02T14:02:27.000+0000","comments":[]},{"summary":"Pushing an LFS object using Pipelines default authentication method does not work","key":"BCLOUD-23180","url":"https://jira.atlassian.com/browse/BCLOUD-23180","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPushing an LFS object using Pipelines default authentication method does not work\r\nh3. Steps to Reproduce\r\n # Create a repository and enable Pipelines on it\r\n # Install LFS and add one file to be tracked as LFS objects. The following yml file is a sample\r\n\r\n{code:yaml}\r\nimage: atlassian/default-image:4\r\n\r\nclone:   lfs: true\r\n  \r\npipelines:   \r\n    default:     \r\n        - step: \r\n                name: Default\r\n                script: \r\n                - echo \"Hello World\" >> out1.json          \r\n                - apt-get update\r\n                - apt-get upgrade -y\r\n                - apt-get install -y git-lfs\r\n                - git add . && git commit -m \"[skip ci] LFS JSON Push\"\r\n                - git push\r\n{code}\r\n3. In the above example, json files are tracked as LFS. Hence, the push contains an LFS object in the commit.\r\nh3. Expected Results\r\n\r\nThe push is completed\r\nh3. Actual Results\r\n\r\nThe Pipeline fails with this error -\r\n{noformat}\r\ngit push\r\n\r\nfatal: could not read Username for 'https://bitbucket.org': No such device or address\r\n\r\nfatal: could not read Username for 'https://bitbucket.org': No such device or address\r\n\r\nfatal: could not read Username for 'https://bitbucket.org': No such device or address\r\n\r\nGit credentials for https://bitbucket.org/%7B%7D/%7B<repo_UUID>%7D/info/lfs/object/verify?upload_id=<upload-ID> not found.\r\n\r\nerror: failed to push some refs to 'http://bitbucket.org/<workspace-ID>/<repo-slug>'\r\n{noformat}\r\n \r\n\r\nIt looks like the workspace field is empty and only contains encoded brackets - %7B%7D\r\nh3. Workaround\r\n\r\nYou can push using other mechanisms such as SSH or App Password. Here is a push command using App Password that has repo read permissions - \r\n\r\n{code}\r\ngit push https://$username:$app_password@bitbucket.org/<workspace-id>/<repo-ID>.git\r\n{code}\r\n ","createDate":"2024-03-28T17:23:06.000+0000","comments":[{"text":"Hi, this bug should have Medium priority as per Atlassian Bug Fix Policy, thanks","author":"andrea.lincetto"}]},{"summary":"Java OutOfMemoryError: Direct buffer memory in Runners","key":"BCLOUD-23153","url":"https://jira.atlassian.com/browse/BCLOUD-23153","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPipeline builds fail due to runners crashing with an OutOfMemoryError Java error\r\nh3. Steps to Reproduce\r\n # start an instance with 64 cores\r\n # launch a runner with restricted memory (~1GB)\r\n # run pipelines that generate caches/artifacts until it crashes (100 steps over and over)\r\n\r\nh3. Expected Results\r\n\r\nIf the step memory consumption is low, ideally the runners should execute builds within the allocated memory.\r\nh3. Actual Results\r\n\r\nOver time, we should see more and more memory consumed and runners will crash with Java OutOfMemoryError: Direct buffer memory\r\nh3. Workaround\r\n\r\nworkaround is to assign a minimum number of CPUs, for example: add {{cpus=2}} to the {{docker run}} command to launch runners. This needs to be explicitly added, else default runners assign all available CPUs. In the above-discussed case, it will assign 64 CPUs by default.","createDate":"2024-03-12T08:03:28.000+0000","comments":[]},{"summary":"Uploading files to repository Downloads via API or UI results in error","key":"BCLOUD-23114","url":"https://jira.atlassian.com/browse/BCLOUD-23114","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUnable to upload files in repository downloads section using API and UI.\r\n\r\nAny upload that is taking more than 2 mins fails with below error:\r\n{code:java}\r\n* Connection #0 to host api.bitbucket.org left intact\r\n{\"type\": \"error\", \"error\": {\"message\": \"Unauthorized\"}}%   {code}\r\nh3. Steps to Reproduce\r\n # Try uploading a file at lower speed so that the upload takes more than 2 minutes\r\n\r\n{code:java}\r\n% curl -vvv --request POST https://api.bitbucket.org/2.0/repositories/{workspace_ID}/{repo_slug}/downloads -F files=@tes_file --header 'Authorization: Bearer xxxx ' --limit-rate 4000K | tee curl160.log\r\n\r\n100  479M    0    55  100  479M      0  3918k  0:02:05  0:02:05 --:--:-- 3348k\r\n* Connection #0 to host api.bitbucket.org left intact\r\n{\"type\": \"error\", \"error\": {\"message\": \"Unauthorized\"}}%    {code}\r\n\r\nh3. Expected Results\r\n\r\nThe file should get uploaded in the repository Downloads section.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown and the file upload fails:\r\n{noformat}\r\n{\"type\": \"error\", \"error\": {\"message\": \"Unauthorized\"}}%   {noformat}\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-02-22T10:10:54.000+0000","comments":[{"text":"Is there an estimated fix date for this? This issue is impacting our release process.","author":"Kieran Marshall"},{"text":"This bug has a significant impact on our activities. We would like to ask that this issue be addressed as a higher priority, such as Normal, rather than Low.\r\n\r\nWe strongly hope for a quick resolution.\r\n\r\nBest regards,\r\nKINOSHITA Hidetoshi","author":"木下 英俊"}]},{"summary":"Updating PR descriptions gets 400 Bad Request if the reviewer has left / become inactive","key":"BCLOUD-23093","url":"https://jira.atlassian.com/browse/BCLOUD-23093","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: Unsure.\r\nh3. Steps to Reproduce\r\n # Create a PR\r\n # Add a reviewer\r\n # Make that reviewer user inactive / deleted\r\n # Try to update the PR description\r\n\r\nh3. Expected Results\r\n\r\nUpdating the PR description succeeds. \r\n\r\nAlso, provide meaningful error message in the UI to self-serve the users.\r\nh3. Actual Results\r\n\r\nThe update fails every time, with an HTTP 400 \"Bad request\" error. Error message: \r\n\"Malformed reviewers list\".\r\nExample HTTP request that fails:\r\n{noformat}\r\nPUT https://bitbucket.org/!api/2.0/repositories/atlassian/barrel/pullrequests/11727 {noformat}\r\nh3. Workaround\r\n\r\nRemove the inactive reviewer, and then updates will succeed.","createDate":"2024-02-14T09:04:53.000+0000","comments":[{"text":"Duplicate of https://jira.atlassian.com/browse/BCLOUD-20266","author":"Brian Victor"},{"text":"Hey [~d8ab8beb03e9], this one's a bit different, and more sinister. BCLOUD-20266 just wants a nicer validation message {_}when adding reviewers{_}. This bug is about *PR description updates* actually failing, with an Unexpected error (with no indication to users that it's _even related_ to the PR reviewers).","author":"Stephen Wrathall"},{"text":"[~42f170a9d44d] Thanks for pointing that out, and apologies for glossing over it too quickly. Reopened.","author":"Brian Victor"},{"text":"Thanks [~d8ab8beb03e9]","author":"Stephen Wrathall"}]},{"summary":"Pipeline unresponsive while parsing test report","key":"BCLOUD-23066","url":"https://jira.atlassian.com/browse/BCLOUD-23066","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nParsing test reports where the report have more than 2000 characters per text block or more than 100 test cases, it becomes unresponsive and runs for 120 minutes consuming extra build minutes and leads to having failed pipeline. \r\nh3. Steps to Reproduce\r\n # Try to create a pipeline with a test report having more than 2000 characters per text block.\r\n\r\nh3. Expected Results\r\n\r\nPipeline should complete successfully as normal.\r\nh3. Actual Results\r\n\r\nPipeline is stuck at Build Teardown step.\r\nh3. Workaround\r\n * Keep your test reports with the limits of 2000 characters per text block and 100 test cases.\r\n * As a workaround, use after-script to delete the test report xml files that the file size is greater than 30mb. \r\n\r\n{code:java}\r\nafter-script:          \r\n  - find app/build/test-results -type f \\( -name \"*xml\" \\) -size +30M -delete \r\n{code}\r\nThis will make user lose the test report result, but it will unblock user for the time being","createDate":"2024-01-23T10:44:21.000+0000","comments":[]},{"summary":"LFS clone error with project Access Key","key":"BCLOUD-23023","url":"https://jira.atlassian.com/browse/BCLOUD-23023","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers can observe LFS clone errors when clone is done using Access key added under \"Project Settings\"\r\n\r\nh3. Steps to Reproduce\r\n # Configure \"Access key\" under \"Project Settings\"\r\n # Use the command \"git lfs clone <repo URL>\"\r\n\r\n\r\nh3. Expected Results\r\nClone should be successful\r\n\r\nh3. Actual Results\r\n{code}\r\nbatch response: Access key not authorized for this repository                                                                                                                                                                                        \r\nerror: failed to fetch some objects from 'https://bitbucket.org/tes******t/info/lfs'\r\n{code}\r\n\r\n\r\nh3. Workaround\r\nConfigure Access keys under \"Repository Settings\"","createDate":"2023-12-15T11:04:05.000+0000","comments":[{"text":"hello,\r\n\r\nwhen this issue be fixed by Atlassian?\r\n\r\nthank you","author":"ferenc.papai"},{"text":"Our team is affected by this problem. When it will be solved?","author":"George"}]},{"summary":"Cannot set large files as viewed in a pull request","key":"BCLOUD-22995","url":"https://jira.atlassian.com/browse/BCLOUD-22995","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen attempting to view the number of files accessed within the PR diff, the count does not display accurately, even after viewing all the files.\r\nh3. Steps to Reproduce\r\n * Access the PR with a large diff.\r\n * Confirm all files as viewed.\r\n * In cases where there are 9 files, the count may incorrectly display as 8 files viewed, despite having viewed all files. The displayed number is inaccurate.\r\n\r\nPlease find the attached video for the same. ","createDate":"2023-11-29T10:09:47.000+0000","comments":[{"text":"Note that this also applies to files where \"{*}File renamed but contents unchanged{*}\".","author":"Caleb Larsen"},{"text":"Another note: this occurs for both pull requests where all files are viewable on a single page or where you're required to page through a single file at a time. Additionally, the check boxes won't necessarily remain checked as they do in the original attached video.","author":"Caleb Larsen"}]},{"summary":"Intermitent error editing files in the UI","key":"BCLOUD-22971","url":"https://jira.atlassian.com/browse/BCLOUD-22971","type":"Bug","priority":"","description":"h3. Issue Summary\r\n* When trying to edit a file online and setting it to automatically create a Pull Request upon commit,  users intermittently get \"We had trouble creating your pull request.\" \r\n\r\nh3. Steps to Reproduce\r\n# Edit a file through the UI\r\n# Click Commit\r\n# Check the box to automatically create a pull request.\r\n# Click commit \r\n\r\nh3. Expected Results\r\n* The Pull Request should be created with the commit\r\n\r\nh3. Actual Results\r\n* The commit is successful and the branch is created, however, the Pull Request is not\r\n\r\nThe below exception is thrown in the browser console:\r\n{code}\r\nError 404 - Branch not Found.\r\n{code}\r\n\r\nh3. Workaround\r\n* Since both the commit and the branch are properly created, create the Pull Request manually afterward;","createDate":"2023-11-09T15:25:03.000+0000","comments":[]},{"summary":"concurrent merges to the same branch times out with \"Something went wrong\" error","key":"BCLOUD-22889","url":"https://jira.atlassian.com/browse/BCLOUD-22889","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nconcurrent merges to the same branch times out with \"Something went wrong\" error\r\n\r\nh3. Steps to Reproduce\r\n\r\nThere aren't specific steps to reproduce the issue since it's intermittent and can occur rarely. The error can occur when a user tries to perform a concurrent merge into the same branch. \r\n\r\nh3. Expected Results\r\nThe PR merge should complete without any errors\r\n\r\nh3. Actual Results\r\nThe PR merge fail with any \"Something went wrong\" timeout error\r\n\r\nh3. Workaround\r\n\r\nThe workaround is to retry multiple times to complete the merge","createDate":"2023-09-19T08:28:39.000+0000","comments":[]},{"summary":"user under project permissions with admin access can create a repository but cannot fork a repository into the project","key":"BCLOUD-22884","url":"https://jira.atlassian.com/browse/BCLOUD-22884","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUsers under project permissions with admin access within a specific user group can create a repository but cannot fork a repository into the project.\r\n\r\nThis links to the \"Can create repositories for this workspace\" option is disabled for the user group, but enabling this option allows forking to work within the project.\r\nh3. Steps to Reproduce\r\n# Create a user group and uncheck \"Can create repositories for this workspace\".\r\n# Add a user to the group \r\n# Add the group to a project with \"Admin\" permissions or add the user directly to the project with \"Admin\" permissions\r\n# The user forks a repository into the project they administer.\r\n\r\nh3. Expected Results\r\nThe user should be able to fork the repository to a project they administer \r\n\r\nh3. Actual Results\r\nThe user can create a repository, but forking the repository fails with \r\n{code:none}\r\nError: \"You can't create repositories under this account. You must specify an owner.\"\r\n{code}\r\n\r\nor \r\n\r\n{code:none}\r\nYou do not have sufficient permissions to create repositories in this project/workspace. You must specify an owner.\"\r\n{code}  \r\n\r\nh3. Workaround\r\n* Give the workspace group or add the user to a workspace group with \"Can create projects in this workspace\" permission\r\n\r\n*UPDATE:* Organisations that are making use of the [unified user management experience|https://bitbucket.org/blog/unified-user-management-is-generally-available-for-new-bitbucket-cloud-workspaces] cannot apply the above workaround as these options are no longer available in group settings (as these are managed with roles in Atlassian admin). Only users with Product Admin role will be able to perform forks until this bug is resolved.\r\n","createDate":"2023-09-15T11:25:24.000+0000","comments":[{"text":"Since the workaround is to create a new workspace just for that project so they can fork with workspace wide permissions, would Atlassian provide standard level subscription free of charge ?","author":"Stefan Amarandei"}]},{"summary":"API documentation for deployments API needs improvement","key":"BCLOUD-22876","url":"https://jira.atlassian.com/browse/BCLOUD-22876","type":"Bug","priority":"","description":"h3. Issue Summary\r\n- As per our new SOP, I am raising this as a public bug to gain traction on the existing ADOC ticket\r\n\r\n*+EXISTING BCLOUD-20744+*\r\n- Please improve Bitbucket API documentation and provide example of the POST JSON body for creating deployment environment within a repository using Bitbucket open API: \r\n[https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/environments/#post]\r\n* Specify that we only support the \"name\" for already existing environments and highlight it as a requirement. \r\n* When user is trying to create a deployment environment with the name that doesn't already exist we respond with: \r\n{code:java}\r\n{\"key\": \"deploy-service.request.validation-error\",\"message\": \"The request body contains invalid properties\",\"arguments\": {\"environment.environment_type.name\": \"Unknown environment type.\"}\r\n{code}\r\n*Here is the example of the POST request that end users can use for reference, until the public documentation is updated:* \r\n{code:java}\r\n{\"deployment_gate_enabled\": false,\r\n\"rank\": 0,\r\n\"hidden\": false,\r\n\"type\": \"deployment_environment\",\r\n\"slug\": \"staging123\",\r\n\"environment_type\": {\r\n\"type\": \"deployment_environment_type\",\r\n\"name\": \"Staging\",\r\n\"rank\": 1\r\n},\r\n\"name\": \"Staging123\"\r\n}\r\nOR \r\n{\r\n\"hidden\": false,\r\n\"type\": \"deployment_environment\",\r\n\"slug\": \"feature1234-6\",\r\n\"environment_type\": {\r\n\"type\": \"deployment_environment_type\",\r\n\"name\":\"Production\",\r\n\"rank\": 0\r\n},\r\n\"name\": \"Feature1234-6\"\r\n}\r\n{code}\r\n \r\n*+FURTHER INFORMATION+*\r\n* For updating an environment (for example a namechange), there is also nothing in the API documentation about the JSON payload required - if we could include payload information for example to UPDATE the deployment environment name:\r\n{code}\r\n{\r\n\t\"change\":\r\n\t{\r\n\t\t\"name\":\"InsertNameHere\"\r\n\t}\r\n}\r\n{code}\r\n\r\nThis is reproducible on Data Center: no\r\nh3. Steps to Reproduce\r\n # Observe existing API documentation\r\n\r\nh3. Expected Results\r\n* API documentation is clear and up-to-date\r\n\r\nh3. Actual Results\r\n* API documentation needs to be updated\r\n\r\nh3. Workaround\r\n- Currently, we will need to refer customers to this public bug for assistance with JSON payloads","createDate":"2023-09-11T04:53:06.000+0000","comments":[{"text":"We can not use our paid Bitbucket subscription fully because the API documentation for Bitbucket Cloud is wrong/incomplete. Please fix this bug.","author":"Max Albrecht"}]},{"summary":"Pipelines build completed without any build logs","key":"BCLOUD-22859","url":"https://jira.atlassian.com/browse/BCLOUD-22859","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\npipeline build gets completed (passed) without any build logs, It won't run any of the script commands, only running its build setup and build teardown\r\n\r\nThere are a few scenarios where the issue is reproducible. They are mentioned below.\r\nh3. Steps to Reproduce\r\n # Scenario 1 - /tmp directory is not present on the image that was used for the build\r\n # Scenario 2 - /bin/sh not present on the build image\r\n # Scenario 3 - For Linux Docker runners, the local volume path for /var/lib/docker/containers:ro is likely incorrect\r\n # Scenario 4 - The default docker container user is a \"nobody\" user, which is often used for running processes with minimal privileges.\r\n\r\nh3. Expected Results\r\nThe build should fail with an appropriate error message, for example: \"Insufficient user permissions.\"\r\n\r\nh3. Actual Results\r\npipeline build gets completed (passed) without any build logs\r\n\r\nh3. Workaround\r\n\r\nManually, the build cannot be failed, but the fixes/solutions for all the above-mentioned scenarios are captured in the knowledge base document\r\n\r\nhttps://confluence.atlassian.com/bbkb/pipelines-build-completed-without-any-build-logs-1224641345.html","createDate":"2023-08-30T12:57:37.000+0000","comments":[]},{"summary":"Self-hosted runners do not always clear the docker mount directory","key":"BCLOUD-22851","url":"https://jira.atlassian.com/browse/BCLOUD-22851","type":"Bug","priority":"","description":"h3. Issue Summary\r\n- Occasionally, users report that they receive the following error when executing their runner builds:\r\n{code}\r\nbash: docker: command not found\r\n{code}\r\n- This issue is caused by the local Runner directory /tmp/<runner_uuid>/ already containing an empty docker folder. \r\n- We are not yet sure why the Runner directory sometimes already contains an empty docker folder (theory is that it's because of an unsuccessful runner configuration that has not cleaned itself up)\r\n- Since the docker folder already exists, the Runner fails to mount the new docker directory and the docker binary won't be present during the build.\r\n\r\nThis is reproducible on Data Center: no\r\nh3. Steps to Reproduce\r\n # Execute a build within a dockerized Self-hosted Runner\r\n # Observe the error that occurs (this is intermittent - hard to reproduce)\r\n\r\nh3. Expected Results\r\n* The build is able to execute\r\n\r\nh3. Actual Results\r\n* The build fails as it is unable to mount the directory\r\n\r\nh3. Workaround\r\n* The workaround is described in the following article:\r\nhttps://confluence.atlassian.com/bbkb/docker-command-not-found-error-while-running-docker-commands-in-self-hosted-runner-1206785605.html","createDate":"2023-08-29T05:04:28.000+0000","comments":[{"text":"Hello - This issue affects our build and deployment automation.  Please fix asap.  Thanks.","author":"gil"},{"text":"This is happening to us very frequently. Maybe every 50-100 runs on some of our runners. Please look into this. At this time we're going to have to invest in automation to try to clean this up.","author":"Alex Figliolia"},{"text":"Hi - this issue is very frustrating to our team as we have no way of knowing when it going to happen and we rely on our overnight CI pipelines for development the next day.\r\n\r\nThe prescribed workaround does not work for us either: [https://confluence.atlassian.com/bbkb/docker-command-not-found-error-while-running-docker-commands-in-self-hosted-runner-1206785605.html]\r\n\r\nPlease could you look into this issue as a matter of priority.\r\n\r\nThanks","author":"Charlie Davies"},{"text":"Hello, any updates ? It's frustrating for my customer, need asap help","author":"Jan Domański"},{"text":"Any update on this? This is really frustrating and is affecting teams across our organization. ","author":"Franz QT"},{"text":"Hi, As I mentioned here https://community.atlassian.com/t5/Bitbucket-questions/Bitbucket-self-hosted-runner-failed-to-create-shim-task-OCI/qaq-p/2459381#U2685295 this issue happens usually on most unfortunate times, do we expect tier 1 support logging in into runners that are usually deal with  escalated privileged automation scripts? I wouldn't consider as low priority as it forces us to compromise security just to be able to use this feature.  ","author":"Jefferson Fermo"},{"text":"I would like to appeal to reclassify symptom severity to something much higher than minor. While there is a workaround, it's extremely frustrating to users and it requires pager duty to get a runner unstuck, blocking the deploy process while it gets manually fixed. It happens relatively frequently (once every 40-50 builds in our experience so far). ","author":"Dejan Čabrilo"},{"text":"I can confirm that this issue occurs relatively frequently and is quite frustrating when it happens, as not everyone has access to runners. As a result, the entire company’s pipeline remains blocked until a manual fix is applied. Describing the severity as ‘minor’ is, in my opinion, an understatement.","author":"Bojan Kopanja"},{"text":"This is causing a big issue for our organisation. We have many agents that only a few people are allowed to administer. When this occurs it the fix whilst straight forward takes a long time to roll out to all agents.","author":"Ben"},{"text":"One thing we've noticed regarding the failures is that it seems to occur when a Pipeline with a Pipe integration is executed.  Our Runners that execute Pipelines that have no Pipe configuration are all running fine.","author":"Curtis"},{"text":"Jumping in here to add to the frustration claim. This is a major issue for us and keeps us constantly having failed builds requiring manual remediation on servers that only a few resources can access.","author":"Alex Figliolia"},{"text":"This is a major issue for us and keeps us constantly having failed builds requiring manual remediation.\r\nPlease fix!","author":"Dan Milman"},{"text":"Our self hosted continues to experience this failure, varies between a couple of times a week to every day when we have very active projects approaching deadlines.\r\n\r\nSurprised it has not yet been solved.","author":"Tom Emerson"},{"text":"Today, two of my self-hosted runners started showing this error for {{pipe: trigger-pipeline}} calls. It was all out of the blue. Both of them left behind an empty docker directory around the same time: 15:57 and 16:00 GMT.\r\n\r\nBoth runners are sharing the same server, which has 4 runners on it. I'm guessing that if I had enough load, all 4 of them would have shown the symptom.\r\n\r\nI deleted both empty {{docker}} directories, reran the pipeline, and the pipe failed again, exactly the same way, leaving behind an empty {{docker}} directory.\r\n\r\nRestarting the runners after deleting the empty directory fixes the issue, and I see an executable file called {{docker}} in there.\r\n\r\n*Do you know what that looks like?* Looks like what happens when I {{{}docker -v /file/that/does/not/exist:/dest{}}}. It would create {{/file/that/does/not/exist}} as a directory on the host, and mount it as such.","author":"Radu Cristescu"}]},{"summary":"Clicking on workspace variable link from a repository variable by a user who does not have workspace admin permissions still gets access","key":"BCLOUD-22845","url":"https://jira.atlassian.com/browse/BCLOUD-22845","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere is a link to view Workspace Variables in the Repository Variable Settings. This link looks like -\r\n{code:java}\r\nhttps://bitbucket.org/<workspace-name>/workspace/settings/addon/admin/pipelines/account-variables.\r\n{code}\r\n!image-2023-08-23-19-35-42-122.png|thumbnail!\r\n\r\nClicking on this opens up workspace variables for every user regardless of their workspace permission. For a user who has workspace admin permissions, it does not matter and behaves as expected.\r\n\r\nHowever, for a user that does not have workspace admin permissions, the expected behavior is to show a screen that says you do not have permissions since workspace variables are restricted to users with workspace admin access. However, it shows the workspace variable window -\r\n\r\n!image-2023-08-23-19-38-10-495.png|thumbnail!\r\n\r\nWith no other settings visible. This screen is in a read only capacity. You cannot add, edit or delete variables. However, you can see the variables. Additionally, refreshing the page results in a 403. Opening the link in a new tab or copying the link and pasting it in a different window also results in a 403 which is the expected outcome. The problem is when the link is clicked that gives permission to view workspace variables.\r\nh3. Steps to Reproduce\r\n # Create a user who has a repository admin access but no workspace admin access\r\n # Go to Repository Settings -> Repository variables\r\n # Click on the Workspace Variables link\r\n\r\nh3. Expected Results\r\n\r\nA 403 screen that says you do not have permission\r\nh3. Actual Results\r\n\r\nA read only page that shows workspace variables\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-08-24T12:05:09.000+0000","comments":[]},{"summary":"Not able to create PR for a commit with the API","key":"BCLOUD-22822","url":"https://jira.atlassian.com/browse/BCLOUD-22822","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe documentation for the *Create a pull request* endpoint says that we can set a branch, repository, or commit as the source. However, while trying to create a Pull Request for a commit we will see the following error message:\r\n{code:java}\r\n{\"type\": \"error\", \"error\": {\"message\": \"source: no branch specified\", \"fields\": {\"source\": [\"no branch specified\"]}}}%\r\n{code}\r\nHere is the request used as an example:\r\n{code:java}\r\ncurl https://api.bitbucket.org/2.0/repositories/{workspace-id}/{repo-slug}/pullrequests \\\r\n  -u {bitbucket username}:{app password} \\\r\n  --request POST \\\r\n  --header 'Content-Type: application/json' \\\r\n  --data '{\r\n        \"title\": \"Test from API\",\r\n        \"source\": {\r\n            \"commit\": {\r\n                \"hash\": \"4f69d6af29968e86e0375f4a49b18492e2b5011c\"\r\n            }\r\n        }\r\n    }'\r\n{code}\r\nAPI documentation:\r\n * [https://developer.atlassian.com/cloud/bitbucket/rest/api-group-pullrequests/#api-repositories-workspace-repo-slug-pullrequests-post]\r\n\r\nh3. Steps to Reproduce\r\n # Try creating a PR from the API using a commit as a source.\r\n\r\nh3. Expected Results\r\n\r\nIt's expected to create the PR.\r\nh3. Actual Results\r\n\r\nThe user receives an error message:\r\n{code:java}\r\nhttps://developer.atlassian.com/cloud/bitbucket/rest/api-group-pullrequests/#api-repositories-workspace-repo-slug-pullrequests-post\r\n{code}\r\nThe below exception is thrown in the xxxxxxx.log file:\r\n{noformat}\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-08-07T19:13:22.000+0000","comments":[]},{"summary":"Signing in to access a private project does not redirect and load project contents","key":"BCLOUD-22812","url":"https://jira.atlassian.com/browse/BCLOUD-22812","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (no)\r\nh3. Steps to Reproduce\r\n\r\n1. Click on a bookmark or URL to access a private project while signed out\r\n!image-2023-07-31-13-07-30-302.png|width=235,height=96!\r\n2. Sign in to your account to access the project\r\n!image-2023-07-31-13-14-41-524.png|width=232,height=85! \r\n3. Once signed in, the same message indicating \"Project not found\" and prompting to log in is still present\r\nh3. Actual Results\r\n * The same message indicating \"Project not found\" and prompting to log in is still present.\r\n * Clicking on the \"Log in\" button redirects to the current page\r\n\r\nh3. Expected Results\r\n * Contents of the private project should load immediately after signing in\r\n\r\nh3. Workaround\r\n * Refresh the page after the initial sign-in process, and the contents will load","createDate":"2023-07-31T20:17:34.000+0000","comments":[]},{"summary":"Pipelines build logs does not render correctly when a step fails and the after script has same commands as the step's script","key":"BCLOUD-22802","url":"https://jira.atlassian.com/browse/BCLOUD-22802","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a bitbucket pipeline step fails, and the step contains after-script with same commands as the step's script, the UI will render it incorrectly marking the wrong command as failed.\r\nh3. Steps to Reproduce\r\n # Use the following bitbucket-pipelines.yml file as example\r\n{code:java}\r\npipelines:\r\n  default:\r\n     - step: \r\n        name: 'Build and Test'\r\n        script:\r\n          - echo \"testing logging \"\r\n          - exit 1 #force pipeline exit\r\n          - sleep 5\r\n          - echo \"testing 1\"\r\n          - echo \"testing 2\"\r\n          - echo \"testing 3\"\r\n        after-script:\r\n          - echo \"testing 1\"\r\n          - echo \"testing 2\"\r\n          - echo \"testing 3\"\r\n{code}\r\nThe after-script section has the same commands as the step's script. Also, we are forcing the step to fail with exit 1.\r\n# Run the build and the logs will be rendered incorrectly :\r\n!image-2023-07-26-12-58-51-935.png|width=286,height=207!\r\n\r\nh3. Expected Results\r\n\r\nThe builds logs in the UI should render the after-script section correctly, and mark in the read the actual command that failed.\r\nh3. Actual Results\r\n\r\nBuilds logs are marking the wrong command as the one that failed, and also not logging the after script section.\r\nh3. Workaround\r\n * If possible, make a change in the commands that are exactly the same between after-script and step's script, so they become different. For example :\r\n{code:java}\r\npipelines:\r\n  default:\r\n     - step: \r\n        name: 'Build and Test'\r\n        script:\r\n          - echo \"testing logging \"\r\n          - exit 1 #force pipeline exit\r\n          - sleep 5\r\n          - echo \"testing 1\"\r\n          - echo \"testing 2\"\r\n          - echo \"testing 3\"\r\n        after-script:\r\n          - echo \"Testing 1\"\r\n          - echo \"Testing 2\"\r\n          - echo \"Testing 3\"\r\n{code}\r\nChanged \"testing\" to \"{*}T{*}esting\"","createDate":"2023-07-26T16:04:05.000+0000","comments":[]},{"summary":"Greying out of the merge button (final merge window)","key":"BCLOUD-22787","url":"https://jira.atlassian.com/browse/BCLOUD-22787","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSometimes, the merge button on the merge window greys out for a while. one need to wait until the merge button is available to merge the PR\r\nh3. Steps to Reproduce\r\n\r\nThis is a random issue and not reproducible every time.\r\n ## Click on the merge button of an open PR.\r\n ## The PR merge window pops up, allowing us to select the merge strategy and choose whether to close the source branch. The merge button is located in the bottom right corner\r\n\r\nh3. Expected Results\r\n\r\nThe merge button should allow you to merge the PR.\r\n\r\nh3. Actual Results\r\n\r\nThe merge button is greyed out, and one need to wait until it becomes available to merge the PR\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2023-07-21T11:08:06.000+0000","comments":[]},{"summary":"Sometimes recent commits that exist on the remote repository are not visible in the website, in the 'Commits' page of the repo","key":"BCLOUD-22728","url":"https://jira.atlassian.com/browse/BCLOUD-22728","type":"Bug","priority":"","description":"h3. This issue has been forked out of [BCLOUD-19548|https://jira.atlassian.com/browse/BCLOUD-19548].\r\nh3. Issue Summary\r\n\r\nSometimes recent commits that exist on the remote repository are not visible in the website, in the 'Commits' page of the repo.\r\n\r\nThis impacts users' ability to open Pull requests: if a user wants to open a PR for an affected branch, they won't be able to, as no commits will show for this branch.\r\nh3. Steps to Reproduce\r\n\r\nThere are no steps to reproduce this, this issue rarely occurs in some repos\r\nh3. Workaround\r\n\r\nUsers have reported that pushing another commit or a new branch to the repo, solves the issue.\r\n\r\nYou can also contact Bitbucket Cloud Support ([https://support.atlassian.com/contact/#/]) to fix the issue for your repository.\r\n\r\n ","createDate":"2023-06-20T19:49:42.000+0000","comments":[]},{"summary":"User using Microsoft sign in unable to accept invitation.","key":"BCLOUD-22692","url":"https://jira.atlassian.com/browse/BCLOUD-22692","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThe user who uses Microsoft Sign-In is unable to accept an invitation and received \"AADSTS90015: Requested query string is too long.\" error. This happens because of a limitation in Microsoft as they only allowed 2048 characters length in URL.\r\n !Screenshot+2023-05-26+at+12.14.41+PM.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n# Create a Bitbucket user that uses Microsoft Sign-in\r\n# Log out and send an invite to the new user\r\n# New user opens the email and invites link\r\n# Redirect to login and select the Microsoft login option\r\n# User received \"AADSTS90015: Requested query string is too long.\" error\r\n\r\nh3. Expected Results\r\nThe user was able to accept the invitation via Microsoft Sign in\r\n\r\nh3. Actual Results\r\nThe user was unable to accept the invitation and received \"AADSTS90015: Requested query string is too long.\" error message.\r\n\r\n\r\nh3. Workaround\r\nWe have available KB as a workaround:\r\nhttps://confluence.atlassian.com/bbkb/troubleshooting-aadsts90015-requested-query-string-is-too-long-error-while-accepting-bitbucket-cloud-invitation-using-the-microsoft-sign-in-button-1236602026.html","createDate":"2023-06-05T07:44:25.000+0000","comments":[]},{"summary":"Creating a README or gitignore on a new repo that has its main branch write restricted does not create the README or gitignore","key":"BCLOUD-22633","url":"https://jira.atlassian.com/browse/BCLOUD-22633","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCreating a README or gitignore on a new repo that has its main branch write restricted does not create the README or gitignore.\r\nh3. Steps to Reproduce\r\n # Create a branch restriction at the project level for the {{main}} branch\r\n\r\n ## “Only specific people or groups have write access” → “Nobody has write access”\r\n\r\n # Create a new repository in the project\r\n\r\n ## Specify {{main}} as the default branch name\r\n\r\n ## Select either “Include a README?” or “Include .gitignore?”\r\n\r\n # You will be redirected to the new repository\r\n\r\n # Expected Results\r\n\r\nh3. Expected Results\r\n\r\nThe repo has 1 branch, {{{}main{}}}, and the .gitignore and/or README exists.\r\nh3. Actual Results\r\n\r\nThe new repository has no branches, nor does it have a .gitignore or README (either would require a branch to have been created).\r\nh3. Workaround\r\n\r\nAn admin who does have write access to the restricted branch must create the branch in the repo, and make an initial commit.","createDate":"2023-05-03T23:06:18.000+0000","comments":[]},{"summary":"Bitbucket Cloud Pipelines to support JSON case insensitive deserialisation as variables","key":"BCLOUD-22605","url":"https://jira.atlassian.com/browse/BCLOUD-22605","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, if you use the Pipes script ([atlassian/trigger-pipeline|https://bitbucket.org/atlassian/trigger-pipeline/src/master/]) to trigger a Pipelines build to another repository while passing a JSON file as variables, Pipelines can only parse variables with the correct casing. It will fail if the incorrect casing has been used in the JSON format.\r\n\r\nFor example:\r\n{code:java}\r\n  {\r\n    \"Key\": \"SOME_KEY\",\r\n    \"Value\": \"SOME_VARIABLE\"\r\n  }\r\n{code}\r\nh3. Steps to Reproduce\r\n # Use the Pipes script to trigger a build - [atlassian/trigger-pipeline|https://bitbucket.org/atlassian/trigger-pipeline/src/master/]\r\n # Pass JSON variables (with the example format above) to the *PIPELINE_VARIABLES* variable (or using the below step configuration)\r\n # Run a build\r\n{code:java}\r\n      - step:\r\n          name: Some Step\r\n          script:\r\n            - export VARIABLES=$(envsubst < ./some_data.json)\r\n            - pipe: atlassian/trigger-pipeline:5.1.0\r\n              variables:\r\n                BITBUCKET_USERNAME: $BITBUCKET_USERNAME\r\n                BITBUCKET_APP_PASSWORD: $BITBUCKET_APP_PASSWORD\r\n                REPOSITORY: 'some_repo'\r\n                REF_TYPE: 'branch'\r\n                REF_NAME: 'some_branch'                \r\n                CUSTOM_PIPELINE_NAME: 'some_custom_pipelines_name'\r\n                PIPELINE_VARIABLES: $VARIABLES\r\n                WAIT: 'true'\r\n                DEBUG: 'true' \r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe JSON file will be parsed even if it's case insensitive\r\nh3. Actual Results\r\n\r\nThe JSON file is not being parsed by Pipelines due to case insensitivity\r\nh3. Workaround\r\n\r\nUpdate the JSON format by using lower casing.","createDate":"2023-04-17T03:31:30.000+0000","comments":[]},{"summary":"Cannot create a repo via /2.0/repositories/{workspace}/{repo_slug} with PAT","key":"BCLOUD-22568","url":"https://jira.atlassian.com/browse/BCLOUD-22568","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCannot create a repo via /2.0/repositories/\\{workspace}/\\{repo_slug} with project access token (PAT)\r\nh3. Steps to Reproduce\r\n # create a PAT from project settings with scope repository:admin\r\n # try creating a repository using [create repository API endpoint|https://developer.atlassian.com/cloud/bitbucket/rest/api-group-repositories/#api-repositories-workspace-repo-slug-post]\r\n\r\nh3. Expected Results\r\n\r\nThe repository should be created\r\nh3. Actual Results\r\n\r\nThe below error is thrown in the API response:\r\n{noformat}\r\n{\r\n\t\"type\": \"error\",\r\n\t\"error\": {\r\n\t\t\"message\": \"You do not have access to view this workspace.\"\r\n\t}\r\n}\r\n{noformat}\r\nh3. Workaround\r\n * Use an [App password|https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/] for authentication instead of an access token\r\n\r\nExample:\r\n{code:none}\r\ncurl --request POST \\\r\n--url 'https://api.bitbucket.org/2.0/repositories/{workspace}/{repo_slug}' \\\r\n--user '{username}:{app_apssword}' \\\r\n--header 'Content-Type: application/json' \\\r\n--data '{\r\n    \"is_private\": \"true\",\r\n    \"scm\": \"git\",\r\n    \"project\": {\r\n        \"key\": \"TEST\"\r\n        }\r\n    }'\r\n{code}\r\n","createDate":"2023-03-29T12:36:01.000+0000","comments":[{"text":"I am receiving the same error, is there an alternative/ workaround or has this been resolved?","author":"Eric Waite"},{"text":"@Eric Waite According to Atlassian, this is the workaround....\r\n{quote}For now, the best way to deal with creating new repositories within a given workspace is to use workspace access tokens (WAT) instead. This feature is documented here:\r\n{panel}\r\n[https://support.atlassian.com/bitbucket-cloud/docs/using-workspace-access-tokens/]\r\n{panel}\r\nIn short, to create one, all you have to do is access the workspace settings (as an admin) and click on access tokens, under \"security\". You can then follow the on-screen instructions to complete the token creation.\r\n\r\nYou will need to grant the token access to the account, project, and repository scopes for it to be able to create new repos.\r\n{quote}","author":"syeager"},{"text":"This is an issue, especially since the API docs don't spell this out at all. Having to provide privileged access to the workspace isn't a good workaround, as access tokens at the project level have write ability to the project. Being able to automate the creation of repos in a given project can be a huge time saver, but not at the expense of security and least privilege principles. ","author":"Hart Johnson"},{"text":"Hello, im trying to automate the Repo creation in the project-level scope and this issue is limiting the usage of the Access Token. I think that using user:app_password or Workspace-level access token is a worst scenario. Is there any news on the resolution? ","author":"Mateo Agustín Di Loreto"}]},{"summary":"Updating Source Branch on Pull Request fails but will eventually succeed on backend","key":"BCLOUD-22493","url":"https://jira.atlassian.com/browse/BCLOUD-22493","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSometimes when a commit is pushed to the repository, the open Pull Request will take time to be updated with the new commit. \r\n\r\nWhen you open this pull request, it will detect that the Pull Request source branch is not updated with new commits for which you'll see a banner with an option to Update the PR. This sometimes generates an error because, there's probably an event on the backend already updating the PR for this branch. \r\nEventually the PR will get updated when the backend process updating the PR will be completed.\r\n\r\nIn addition to that this error could be misleading as even though it shows as failed, it would eventually update the PR successfully on the backend. From a user's perspective, it might seem like the PR failed to update the source branch with the latest commits.\r\n\r\nh3. Steps to Reproduce\r\n(i) Not easily reproducible. Only reproducible on a specific scenarios depending on the state of the repository\r\n\r\nh3. Expected Results\r\n\r\nPR source branch will be updated with the latest commits\r\n\r\nh3. Actual Results\r\n\r\nPR Source branch fails to update banner is shown\r\n\r\n !Screenshot 2023-02-15 at 13.37.48_2023-02-15T13_39_14.895Z.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\n\r\nThere is no direct workaround to this issue. However, when the manual update of source branch in the PR fails, it should eventually succeed on the backend, sometime later. You can refresh the PR to check it. ","createDate":"2023-02-20T11:18:37.000+0000","comments":[]},{"summary":"Not able to see individual files in Pull Requests when binary files were moved/changed","key":"BCLOUD-22438","url":"https://jira.atlassian.com/browse/BCLOUD-22438","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAccording to [Limits for viewing content and diffs|https://support.atlassian.com/bitbucket-cloud/docs/limits-for-viewing-content-and-diffs/] , when a pull request exceeds the diff limit, the file diffs should be loaded individually.\r\n\r\nHowever, when moving/changing a large binary file in the source branch of a Pull Request, the diff just timeout, and the other small files changed in the source branch are not being loaded individually. Users cannot see the list of what files changed in the UI either.\r\nh3. Steps to Reproduce\r\n # Create a few large binary files (~300MB) in the master branch\r\n # Create a feature branch from the master branch\r\n # On the feature branch, move the large binary files to a different folder. Also, create or make small changes to other text files. Push the changes to bitbucket\r\n # Create a Pull Request from the feature branch to the master branch\r\n # Try to load the diff of the pull request\r\n\r\nh3. Expected Results\r\n\r\nPull requests would allow seeing the file diffs individually. Binary diffs would not be shown, but the small text file diffs should be calculated.\r\nh3. Actual Results\r\n\r\nThe pull request diff times out and the user is not able to see any diff, even for the small text files.\r\nh3. Workaround\r\n * Push a change to the source branch to remove the binary files from it, as this will likely resolve the diff timeout. Add the binary files in a separate branch where you don't need the diffs to be calculated.\r\n * Convert the binary files to LFS following the instructions of [Migrate a repo to git lfs|https://support.atlassian.com/bitbucket-cloud/docs/use-bfg-to-migrate-a-repo-to-git-lfs/]","createDate":"2023-01-31T20:20:56.000+0000","comments":[]},{"summary":"Runner cache setup and teardown scripts appear to hang where caches contain large numbers of files.","key":"BCLOUD-22420","url":"https://jira.atlassian.com/browse/BCLOUD-22420","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen running a step with a cache, when the cache is downloaded, there is an observed pause in the Build Setup phase where the setup caches script is copying extracted files into the build directory.\r\n\r\n \r\n\r\nDuring build teardown, if we are about to upload a cache, the same delay is noticed, where we are copying files into place in preparation to compress the cache.\r\n\r\n \r\n\r\nThis copy step can introduce a fair amount of time (noticed on Windows), where 60K files resulted in a minimum of 1 minute delay. \r\nh3. Steps to Reproduce\r\n\r\nTrigger a step that uses a cache, where the cache is initially empty. Notice during teardown there is a delay where it appears the step has hung.\r\n\r\nTrigger another step that consumes the cache - noticed there is a delay where it appears Build Setup has hung.\r\nh3. Expected Results\r\n\r\nThere should be minimal delay, and/or some feedback to the user indicating what is happening.\r\nh3. Actual Results\r\n\r\nIt appears the build script has hung during Setup and Teardown.\r\n\r\n \r\nh3. Workaround\r\n\r\nNone available.","createDate":"2023-01-24T01:48:33.000+0000","comments":[]},{"summary":"Scrolling sidebar file tree includes extra whitespace at the bottom ","key":"BCLOUD-22319","url":"https://jira.atlassian.com/browse/BCLOUD-22319","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn PR with a lot of files, the file tree in the sidebar has a lot of extra whitespace on the bottom of the page that a user is able to keep scrolling through.\r\n\r\nThis is reproducible on Data Center: no\r\n\r\nh3. Steps to Reproduce\r\n # Go to a PR with >100 files \r\n # Click the \"Files\" tab in the right sidebar \r\n# Use mouse to scroll to bottom\r\n\r\nh3. Expected Results\r\nThere would be no extra whitespace (not scrollable past bottom of list)\r\n\r\nh3. Actual Results\r\nThere is lots of extra whitespace (as much as the full file diff would have been if it wasn't in single file mode).\r\n\r\nh3. Workaround\r\nNone (this is only a visual bug, does not block functionality)","createDate":"2022-12-09T21:32:07.000+0000","comments":[]},{"summary":"Repositories get stuck in creation","key":"BCLOUD-22265","url":"https://jira.atlassian.com/browse/BCLOUD-22265","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRepositories are getting stuck in creation randomly.\r\n\r\nh3. Steps to Reproduce\r\n # Create repositories via API.\r\n\r\nh3. Expected Results\r\n\r\nRepositories are created\r\n\r\nh3. Actual Results\r\n\r\nIntermittently the repositories are stuck in creation and have to be deleted from the backend.\r\n\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-11-16T08:55:49.000+0000","comments":[]},{"summary":"Enabling IP allowlist doesn't apply to /2.0/repositories API","key":"BCLOUD-22219","url":"https://jira.atlassian.com/browse/BCLOUD-22219","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEnabling IP allowlist doesn't apply to /2.0/repositories API. It still shows the list of private repositories.\r\n\r\nThe current set of endpoints that are not enforced by IP allowlist:\r\n* cross-workspace APIs:\r\n{code:none}\r\nGET /2.0/repositories\r\nGET /2.0/pullrequests/{selected_user}\r\nGET /2.0/user/permissions/repositories\r\nGET /2.0/snippets\r\nGET /2.0/user/permissions/workspaces\r\nGET /2.0/workspaces\r\n{code}\r\n* non cross-workspace APIs:\r\n{code:none}\r\nGET /2.0/repositories/{workspace}\r\nGET /2.0/workspaces/{workspace}/projects\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n * As part of Premium plan, enable IP whitelisting([access controls|https://support.atlassian.com/bitbucket-cloud/docs/control-access-to-private-content-in-a-workspace/])\r\n * Make a GET request to */2.0/repositories* endpoint\r\n\r\nh3. Expected Results\r\n\r\nThe list of private repositories are not shown and throws an error because of IP whitelisting\r\nh3. Actual Results\r\n\r\nThe list of private repositories are shown.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-10-27T12:15:49.000+0000","comments":[]},{"summary":"Adding a Jira ticket on a Pull Request Comment breaks the markdown format in the PR notification emails","key":"BCLOUD-22207","url":"https://jira.atlassian.com/browse/BCLOUD-22207","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf you add a Jira ticket to a Pull Reuqest comment, the triggered notification email will not show the proper markdown format. The Bitbucket UI would still show it accurately. \r\n\r\nh3. Steps to Reproduce\r\n # Enter a PR comment\r\n !image-2022-10-21-15-22-46-935.png|thumbnail! \r\n # Notification email generated is accurate: \r\n !image-2022-10-21-15-23-22-388.png|thumbnail! \r\n# Enter a second PR comment with a Jira case on top.\r\n !image-2022-10-21-15-28-07-835.png|thumbnail! \r\n# Notification email content is broken\r\n !image-2022-10-21-15-28-46-968.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\r\nThe notification email would mirror what the UI shows in the PR comment. \r\n\r\nh3. Actual Results\r\n\r\nThe notification email appears to be broken upon adding a Jira issue.\r\n\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-10-21T09:59:56.000+0000","comments":[]},{"summary":"Improve error message for pipe with IP allowlist enabled","key":"BCLOUD-22201","url":"https://jira.atlassian.com/browse/BCLOUD-22201","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using the Atlassian pipe [Bitbucket build statistics|https://bitbucket.org/atlassian/bitbucket-build-statistics] with the premium feature of IP Allowlisting enabled, the pipe will fail without a clear message for the user.\r\n\r\nFor some builds, the user receives the error message below, and in other cases, doesn't.\r\n{code:java}\r\n{\"type\": \"error\", \"error\": {\"message\": \"To access this repository, an admin must whitelist your IP.\"}}\r\n{code}\r\n \r\nh3. Steps to Reproduce\r\n # Enabled the premium feature of [IP allow listing|https://support.atlassian.com/bitbucket-cloud/docs/control-access-to-your-private-content/#Allowlisting-IP-addresses].\r\n # Create a pipeline build and use the [Bitbucket build statistics|https://bitbucket.org/atlassian/bitbucket-build-statistics] pipe.\r\n\r\nh3. Expected Results\r\n\r\nThe user expects the build to work or an error message indicating what happened.\r\nh3. Actual Results\r\n\r\nThe user is presented with the following error message:\r\n{code:java}\r\n✖ 403 Client Error: Forbidden for url: https://api.bitbucket.org/2.0/repositories/<workspaceid>/<repo-slug>/pipelines/?sort=-created_on&page=1&pagelen=100\r\n{code}\r\nh3. Workaround\r\n\r\nThe workaround is to insert all [Bitbucket Pipelines IPs|https://support.atlassian.com/bitbucket-cloud/docs/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall/#Valid-IP-addresses-for-Bitbucket-Pipelines-build-environments] into the allowed list.","createDate":"2022-10-19T22:14:26.000+0000","comments":[]},{"summary":"Pipelines steps are being queued indefinitely while using multiple Linux Docker Runners","key":"BCLOUD-22196","url":"https://jira.atlassian.com/browse/BCLOUD-22196","type":"Bug","priority":"","description":"h3. Issue Summary\r\nThere are instances where Pipelines steps are being queued indefinitely while using multiple Linux Docker Runners.\r\nIt seems happening intermittently. \r\n\r\nh3. Steps to Reproduce\r\n# Use Linux Docker Runners\r\n# Create multiple Runners on different AWS EC2 instances from different regions (e.g. 4 in asia-pacific, 5 in US-east, 4 in EU) with a common label like \"aws\"\r\n# Use the common label (e.g. aws) to run Pipelines\r\n\r\nh3. Expected Results\r\nPipelines steps will not be queued indefinitely\r\n\r\nh3. Actual Results\r\nPipelines steps are being queued indefinitely\r\n\r\nh3. Workaround\r\nYou can follow the workaround and/or solution mentioned on this KB page - [Bitbucket pipeline steps being queued indefinitely with runners|https://confluence.atlassian.com/bbkb/bitbucket-pipeline-steps-being-queued-indefinitely-with-runners-1157474174.html]","createDate":"2022-10-19T06:57:20.000+0000","comments":[{"text":"It affected us as well - very disruptive!","author":"PG"},{"text":"So will removing my runners from different regions prevent the problem recurring?","author":"schinckel"},{"text":"This affect local runners as well. A bit cumbersome to have to re-create runners. ","author":"Boris Alyurov"}]},{"summary":"Merged Pull request doesn't retain approvals from default reviewer if the user is removed from Default reviewers list in the repository","key":"BCLOUD-22193","url":"https://jira.atlassian.com/browse/BCLOUD-22193","type":"Bug","priority":"","description":"h3. Issue Summary\r\nMerged Pull request doesn't retain approvals from default reviewer if the user is removed from Default reviewers list in the repository\r\n\r\nh3. Steps to Reproduce\r\n* Add a user \"X\" as a default reviewer to a repository\r\n* Enable merge checks \"1+ approval from default reviewers\" for a branch, say master\r\n* Create a PR from source -> master\r\n* Now the user \"X\" approved the PR\r\n*Pull request is merged(or open)\r\n* Remove the user \"X\" from the default reviewers(and/or from repo).\r\n\r\nh3. Expected Results\r\nThe PR still shows \"1+ approval from default reviewers\" in green (check passed)\r\n\r\nh3. Actual Results\r\nPR has been updated showing \"1+ approval from default reviewers\" unchecked(merge check failed)\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-10-17T08:34:35.000+0000","comments":[]},{"summary":"Pull request Merge banner(green) shows Author as the user who pushed the merge commit","key":"BCLOUD-22191","url":"https://jira.atlassian.com/browse/BCLOUD-22191","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen the source and destination branches of a PR are merged locally and the merge commit is pushed to remote, the Pull request Merge banner(green box) shows Author as the user who pushed the merge commit\r\n\r\nh3. Steps to Reproduce\r\n* Create a PR between src and dest\r\n* On a locally cloned repository, merge the branches\r\n\r\n{code:java}\r\n$ git checkout sandbox\r\n$ git merge src --no-ff\r\n{code}\r\n\r\n* Push the merge commit to remote\r\n\r\n{code:java}\r\n$ git push origin sandbox\r\n{code}\r\n\r\n\r\nh3. Expected Results\r\nNow the PR shows the user who pushed the merge commit as the PR author in the green box/banner.\r\n\r\nh3. Actual Results\r\n\r\nPR shows the user who pushed the merge commit as the PR author in the green banner/box\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-10-14T16:04:36.000+0000","comments":[]},{"summary":"Sometimes commit list page does not load tags/branches information on first load","key":"BCLOUD-22117","url":"https://jira.atlassian.com/browse/BCLOUD-22117","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSometimes commit page does not load tags/branches information on the first load (tags and branches) \r\nh3. Steps to Reproduce\r\n # The problem can occur randomly.\r\n\r\nh3. Expected Results\r\n # The tag/branch information should get loaded for each commit\r\n\r\nh3. Actual Results\r\n # Tag/branch information for the commit does not load.\r\n\r\nh3. Workaround\r\n\r\nMultiple refresh of the commit page will load the tag/branch information. ","createDate":"2022-09-02T10:55:02.000+0000","comments":[{"text":"still happening.","author":"Erez Weiss"},{"text":"Does never load the tags for some of our repositories with a lot of tags (3000+)","author":"Christian Nyvoll"},{"text":"It is November 2023 and we are still there.\r\n\r\nGood job, Atlassian!","author":"Alexey Kirillov"},{"text":"Started happening recently for me. Refreshing doesn't do anything. For me, the branches show up but no tags are displayed.","author":"Luke Hermanson"}]},{"summary":"Searching for a string using Code Search provides inconsistent results","key":"BCLOUD-22107","url":"https://jira.atlassian.com/browse/BCLOUD-22107","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe code search feature on Bitbucket Cloud tends to provide inconsistent results. \r\n\r\nIn certain scenarios, you would see 5  results and if you search again it might have a different number. \r\nh3. Steps to Reproduce\r\n\r\n* Not easily reproducible as root cause is unknown.\r\nh3. Expected Results\r\n\r\n* Consistent search results\r\nh3. Actual Results\r\n\r\nInconsistent search results\r\n\r\nh3. Workaround\r\n\r\n* Use Source API to search through each file in the repository. \r\n** https://developer.atlassian.com/cloud/bitbucket/rest/api-group-source/#api-repositories-workspace-repo-slug-src-commit-path-get","createDate":"2022-08-26T08:00:08.000+0000","comments":[{"text":"We noticed that in some of our repos, the search functionality is bringing results from previous commits (not what's in the main branch). When you click on the search result, it shows an error message if the file no longer exists or it loads the file but without the searched word (because the opened file is in the main branch and the searched term no longer exists).\r\n\r\nNew commits to the main branch are not re-indexing these files (even if we touch these outdated files).\r\n\r\n \r\n\r\n ","author":"Michael Prado"}]},{"summary":"Repository search filter is not working in a folder with 1K or more folders","key":"BCLOUD-22104","url":"https://jira.atlassian.com/browse/BCLOUD-22104","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, if you have a folder in a repository where it has 1000 or more folders, the search filter is not working.\r\nh3. Steps to Reproduce\r\n # In a new or existing repository\r\n # Create a folder (e.g. Folder_parent) in the *main* branch\r\n # Then add 1000 or more folders in that \"Folder_parent\" folder\r\n # Go to the repository *Source* > *Folder_parent*\r\n # Use the search filter and search folder\r\n\r\nh3. Expected Results\r\n\r\nThe search filter should be able to search folders\r\nh3. Actual Results\r\n\r\nThe search filter is not working as expected\r\nh3. Workaround\r\n\r\nSearch folders from a local copy of the repository","createDate":"2022-08-24T22:49:51.000+0000","comments":[]},{"summary":"Premium features are not dropping when plan has been downgraded ","key":"BCLOUD-22084","url":"https://jira.atlassian.com/browse/BCLOUD-22084","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a plan has been downgraded from Premium to Free if any repositories have premium features branch restrictions, it is not possible to update branch restrictions.\r\n \r\nh3. Steps to Reproduce\r\n\r\n1. The customer is on the PREMIUM plan and using some of the [premium features|https://support.atlassian.com/bitbucket-cloud/docs/suggest-or-require-checks-before-a-merge/] in repository branch restrictions.\r\n\r\n*Premium Features:*\r\n * Reset approvals when the source branch is modified\r\n * Prevent a merge with unresolved merge checks\r\n\r\n2. The customer downgrades the plan to FREE.\r\n\r\n3. Try updating the branch restrictions in any of the repositories which already had premium branch restrictions.\r\n\r\n4. You will get a 400 error as below:\r\n{code:java}\r\nStatus Code: 400 \r\n{\"type\": \"error\", \"error\": {\"message\": \"premium merge checks cannot be enabled without a premium plan\"}}\r\n{code}\r\nh3. Expected Results\r\n\r\nThe premium permissions or checks need to be removed when the plan has been downgraded to FREE and there should not be any issues while updating existing branch permissions.\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in the log file:\r\n{noformat}\r\nStatus Code: 400 \r\n{\"type\": \"error\", \"error\": {\"message\": \"premium merge checks cannot be enabled without a premium plan\"}} {noformat}\r\nh3. Workaround\r\n # Use [API to get the branch restriction ID for the kind \"enforce_merge_checks\" |https://developer.atlassian.com/cloud/bitbucket/rest/api-group-branch-restrictions/#api-repositories-workspace-repo-slug-branch-restrictions-id-get] and [delete the branch restriction rule using this API|https://developer.atlassian.com/cloud/bitbucket/rest/api-group-branch-restrictions/#api-repositories-workspace-repo-slug-branch-restrictions-id-delete]. <OR>\r\n # The existing branch restriction needs to be removed and a new branch restriction needs to be added.","createDate":"2022-08-15T08:12:20.000+0000","comments":[{"text":"Maybe this is why our merge checks aren’t working? I’ve tried minimum 1 and 2 approvals, and other tickets/bugs resolved here say to check prevent merges with unresolved merge checks, but I don’t have premium and that option isn’t clickable but also unchecked. Our merge approvals are not being enforced.","author":"Brian Youngblood"},{"text":"Exact same issue here. \r\n\r\nEnabled some premium merge checks, and later downgraded to the standard plan.\r\n\r\nNow we're unable to change any of the branch restrictions because those premium checks are ticked, but greyed out, so throws an error.\r\n\r\nIt's simply infeasible to delete and remake the branch permission when you have hundreds of repositories for multi-tenant operations, and I cannot condone spending a few days of developer resource to write and debug a script to interact with the Bitbucket API.\r\n\r\nPlease just uncheck the box automatically, or ignore premium options, if an org has downgraded their plan.","author":"David King"}]},{"summary":"Switching through tasks links in a Pull Request does not work if files are loaded individually","key":"BCLOUD-22056","url":"https://jira.atlassian.com/browse/BCLOUD-22056","type":"Bug","priority":"","description":"h3. Issue Summary\r\n* As per the title, when a user has many inline comments linked to multiple tasks, and files are set to load individually, the page will not be properly refreshed bringing the user to the desired inline comment which originated the task.\r\n\r\nh3. Steps to Reproduce\r\n# Open a Pull Request with at least 2 files;\r\n# Open the Pull Request's settings and set files to be loaded individually;\r\n# Add inline comments on both files and create tasks from those comments;\r\n# In the right side panel, try to cycle through the tasks' links;\r\n\r\nh3. Expected Results\r\n* The links should properly load the file containing the inline comment which originated that task.\r\n\r\nh3. Actual Results\r\n* The page is not refreshed and you will still be seeing the same file.\r\n\r\nh3. Workaround\r\n\r\n* The links will still work properly and bring you to the correct files if the Pull Request is set to load files all at once.","createDate":"2022-07-28T20:57:36.000+0000","comments":[{"text":"The workaround is not possible when you have many (> 100 ?) files in your PR.  In this case, you're simply stuck with links that do not work.  We have observed this same issue on comments without associated tasks.","author":"Aurora Tiffany-Davis"}]},{"summary":"Comment links on pull requests does not auto-scroll","key":"BCLOUD-22031","url":"https://jira.atlassian.com/browse/BCLOUD-22031","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently, the comments link from a pull request's *Activity* tab does not auto-scroll if you set your PR \"Load files\" setting to \"Individually\".\r\nh3. Steps to Reproduce\r\n # In an existing pull request, add a comment to a line of code\r\n # Change the pull request settings to load files \"Individually\"\r\n ** Click *Settings*\r\n ** Select *Individually* (Under {*}Load files{*})\r\n ** Click *Save*\r\n # Reload the page\r\n # Click *Activity* tab\r\n # Click the comment hyperlink\r\n\r\nh3. Expected Results\r\n\r\nThe page should auto-scroll to the comment\r\nh3. Actual Results\r\n\r\nThe page does not auto-scrolling to the comment\r\nh3. Workaround\r\n\r\nAs a workaround, you can load files \"All at once\".\r\n # Click *Settings*\r\n # Select *All at once* (Under {*}Load files{*})\r\n # Click *Save*","createDate":"2022-07-19T07:42:08.000+0000","comments":[]},{"summary":"Jira plugin on Pull Requests page points to old site/issue during Jira site or project migration when the issue key is the same","key":"BCLOUD-22005","url":"https://jira.atlassian.com/browse/BCLOUD-22005","type":"Bug","priority":"","description":"h3. Issue Summary\r\nJira plugin on Pull Requests page points to old site during Jira site migration and site changes when the issue key is the same\r\nh3. Steps to Reproduce\r\n# Link your Bitbucket Workspace to a Jira site\r\n# Create a project in the site and then create an issue\r\n# Add a commit and a PR with the issue in the title (Make sure the Jira plugin in the PR shows the issue)\r\n# Unlink the site and link a new site\r\n# Add a new project with the same name and create another issue\r\n# You will notice that the commit message and PR title will change the URL to reflect the new site link while the Jira plugin will still point to the old site\r\n\r\n!image-2022-07-08-21-28-29-348.png|thumbnail! \r\n\r\nAbove screenshot shows the locations where the correct info is shown with the new site but the plugin has old data links which is not the expected outcome. \r\n\r\nJira plugin which provides information to the PR page is called “Bitbucket Jira” on the Installed Apps page whereas the plugin that provides the other information is called “Jira”. The Jira plugin shows the correct links whereas Bitbucket Jira shows the wrong links\r\n\r\nThe Jira plugin uses DSS to fetch the information unlike the Bitbucket Jira plugin. If we look at the customer’s apps, we can see the following links - \r\n\r\nJira - https://<customer-site-name>.atlassian.net/rest/aci/1.0/installation/jira-bitbucket-connector-plugin/descriptor\r\n\r\nBitbucket Jira - https://bb-jira-service.services.atlassian.com/atlassian-connect\r\n\r\nThe bb-jira-service is the same problematic URL for all customers and the cause of the problem. Hence, I can replicate the issue on my end as well. \r\n\r\nh3. Workaround\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-07-08T16:02:31.000+0000","comments":[{"text":"This issue is related to [https://jira.atlassian.com/browse/JRACLOUD-93467?focusedId=3579394&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-3579394] where I note that a use case is switching from Team managed to Company managed. You have to either accept the tickets will have new keys (which results in this bug) or accept a new project key is required.","author":"joseph.purcell"}]},{"summary":"'Project' field inside the webhook payload for repo:update comes empty after changing a repo's project","key":"BCLOUD-21981","url":"https://jira.atlassian.com/browse/BCLOUD-21981","type":"Bug","priority":"","description":"h3. Issue Summary\r\n* When changing a repository's project, the *project* object inside the event payload for *repo:update* webhook is always empty;\r\n\r\nThis is reproducible on Data Center: (yes) / (no)\r\nh3. Steps to Reproduce\r\n # Create a repository and add a webhook with the trigger *repo:update*\r\n # Move this repository to a different project;\r\n\r\nh3. Expected Results\r\n* On the event payload for the webhook, inside the *changes* object, the *new* and *old* project objects should be present;\r\n\r\nh3. Actual Results\r\n* The payload has an empty change for the project object:\r\n{code}\r\n\"changes\": {\r\n    \"project\": {\r\n      \"new\": {},\r\n      \"old\": {}\r\n    },\r\n    \"language\": {\r\n      \"new\": \"html/css\",\r\n      \"old\": \"c++\"\r\n    },\r\n    \"description\": {\r\n      \"new\": \"test test test\",\r\n      \"old\": \"test\"\r\n    },\r\n{code}\r\n\r\nh3. Workaround\r\n\r\n * Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-06-28T21:24:20.000+0000","comments":[]},{"summary":"Self hosted runner cannot pull images from ECR on a private VPC","key":"BCLOUD-21890","url":"https://jira.atlassian.com/browse/BCLOUD-21890","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe self hosted Bitbucket Pipelines runner can be configured to pull images from ECR, which may involved a call out to the AWS STS service (e.g if trying to pull images using OIDC). When the runner is inside of a private VPC, using VPC endpoints to allow traffic to ECR and STS, the Runner fails trying to pull images.\r\n\r\nDue to default behaviour of the AWS java sdk ([https://github.com/aws/aws-sdk-java/issues/2362)] , the AWS STS client will always try to use global endpoints despite being configured to use a region. Global endpoints are not accessible from a private VPC (since traffic is restricted out to the public internet). For this to work, the AWS STS client must instead use the regional endpoint.\r\nh3. Steps to Reproduce\r\n # Push an image into a private ECR registry.\r\n # Configure the necessary IAM and OIDC config to allow the image to be pulled by a Bitbucket Pipelines self hosted Runner.\r\n # Launch a self hosted runner into a private VPC, with private endpoints configured to allow traffic to STS and ECR.\r\n # Run a step that tries to pull an image using OIDC from ECR. The call made to STS to generate credentials to pull the image will fail due to a connection reset error, since the AWS client attempts to talk to STS over the public internet, for which traffic is blocked.\r\n\r\nh3. Expected Results\r\n\r\nThe step should complete successfully.\r\nh3. Actual Results\r\n\r\nThe step will fail with a connection reset error talking to STS.\r\nh3. Workaround\r\n\r\nUsers can allow access from their VPC out to the global STS endpoint. This is not ideal, as it requires from traffic to flow from the private VPC out to the public internet.","createDate":"2022-05-09T00:26:52.000+0000","comments":[{"text":"Community Post [https://community.atlassian.com/t5/Bitbucket-discussions/Docker-image-of-self-hosted-uses-global-STS-endpoint-in-AWS/m-p/2022019#M3606?utm_source=dm&utm_medium=unpaid-social&utm_campaign=P:online*O:community*I:social_share*] has also been created for this","author":"Gerard Menezes"},{"text":"Also, related to Incident https://getsupport.atlassian.com/servicedesk/customer/portal/11/BBS-184006","author":"Gerard Menezes"}]},{"summary":"PRs are uneditable if a reviewer that no longer has access to the pull request is a reviewer","key":"BCLOUD-21777","url":"https://jira.atlassian.com/browse/BCLOUD-21777","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf pull request has a reviewer added to them that no longer has access to the repository, it's impossible to perform the following actions on that Pull Request:\r\n * Edit the PR title;\r\n * Edit the PR's body\r\n * Merge\r\n\r\nh3. Steps to Reproduce\r\n # Create a new pull request, and ad some reviewers to it\r\n # Remove one of the reviewers from the repository\r\n # Attempting to perform any of the actions highlighted above will throw a something went wrong error message on the UI. Checking the requests made on the devtools console reveal a message like the following:\r\n{code:java}\r\n{\"type\":\"error\",\"error\":{\"fields\":{\"reviewers\":[\"John Doe is not a member of this workspace and cannot be added to this pull request\"]},\"message\":\"reviewers: John Doe is not a member of this workspace and cannot be added to this pull request\"}}\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nIf a user is no longer part of a workspace, they will get automatically removed from all Pull requests they are the reviewer of.\r\nh3. Actual Results\r\n\r\nThe user will still show up as a reviewer of the PR even after being removed from the repository, causing all PRs they are added as a reviewer to be blocked until that user is removed.\r\nh3. Workaround\r\n\r\nThe current workaround is to remove the reviewer manually from PRs that are blocked due to this problem.\r\n\r\nThis will not work if the reviewer previously approved the PR. In this case, the only workaround is to decline the PR and create a new one.","createDate":"2022-03-21T09:23:31.000+0000","comments":[{"text":"I have this problem and the workaround is not working when the reviewer that no longer has access to the repository has approved the PR, because when trying to remove the user it gives me the error: \"You cannot remove reviewers with status\"","author":"cdelfierro"},{"text":"Similar to https://jira.atlassian.com/browse/BCLOUD-21506","author":"Tao Gómez Gil"},{"text":"The message we got for such a scenario was very vague:\r\n\"We ran into an issue while retargeting the pull request. Refresh the page to try again\"\r\n\r\nNo mention of a reviewer no longer being a workspace user, which was the root cause in our case.\r\nWe were able to retarget after removing the said user from reviewers list, but we couldn't have known without contacting BB support.","author":"darko.grubisic"}]},{"summary":"Code span in bullet point disappear after page refresh","key":"BCLOUD-21660","url":"https://jira.atlassian.com/browse/BCLOUD-21660","type":"Bug","priority":"","description":"h3. Issue Summary\r\nCode span in bullet point disappears after page refresh if there are code spans in the first and second line.\r\n\r\nh3. Steps to Reproduce\r\n # Create a pull request\r\n # Create a text like the following example:\r\n # Save the page and refresh\r\n\r\nh3. Expected Results\r\nThe bullet point remains on the page\r\n\r\nh3. Actual Results\r\nThe bullet points are removed after page refresh\r\n !Screen Recording 2022-02-03 at 5.12.25 PM.gif! \r\n\r\nh3. Workaround\r\nNo workaround is available at this moment.","createDate":"2022-02-03T06:22:00.000+0000","comments":[]},{"summary":"Cannot merge due to conflicts but no conflicts shown in PR","key":"BCLOUD-21616","url":"https://jira.atlassian.com/browse/BCLOUD-21616","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n \r\n\r\nThere is a discrepancy in how we detect conflicts for renamed files that prevent a PR from being merged due to conflicts, but don't surface as conflicts in the Pull Request UI\r\nh3. Steps to Reproduce\r\n # No exact steps\r\n\r\nh3. Expected Results\r\n\r\n \r\n\r\nMerge succeeded\r\nh3. Actual Results\r\n\r\nThe below exception is thrown when merging\r\n{noformat}\r\nYou can\\'t merge until you resolve all merge conflicts {noformat}\r\nh3. Workaround\r\n\r\n\r\nMerge PR locally","createDate":"2022-01-19T21:36:20.000+0000","comments":[{"text":"Hi Rachel S,\r\n\r\nIs there any update on permanent fix for this issue?\r\n\r\n \r\n\r\nThanks,\r\n\r\nPraveen","author":"Praveen Goplani"},{"text":"+1, very annoying not to be able to see the conflict unless u merge locally.","author":"AlexThunder"},{"text":"We see this on our repos, \r\nit mostly pops up on repos that use fast forward as merge strategy and on PRs that were open before the last merge","author":"Jef Verheyden"}]},{"summary":"Pull request page comment input field is cleared during the stepwise page loading","key":"BCLOUD-21597","url":"https://jira.atlassian.com/browse/BCLOUD-21597","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAfter the creation of the pull request, the comment field appears, and if we quickly type a sentence there. The typed sentence is cleared.\r\n\r\nh3. Steps to Reproduce\r\n # Step 1: Create a pull request and type a sentence in the comment field\r\n # Step 2: Wait for the page to fully load and it will eventually clear the typed sentence\r\n\r\nh3. Expected Results\r\nShould not clear/remove the typed sentence\r\n\r\nh3. Actual Results\r\nThe toolbar appears, clearing the typed text.\r\n\r\n\r\nh3. Workaround\r\nLet the page load fully then type the sentence in the comment field\r\n\r\n","createDate":"2022-01-13T08:19:49.000+0000","comments":[]},{"summary":"Non-alphanumeric characters in user group name cause conflicts","key":"BCLOUD-21594","url":"https://jira.atlassian.com/browse/BCLOUD-21594","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWe have a user with the following user group names, they are unable to rename a group to the same number of characters as another group, as it says the group exists:\r\n선행개발셀\r\n경솔개발그룹\r\n경솔기반그룹_선행개발셀\r\n경솔기반그룹_Devops셀\r\n\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n # Replicate same user groups as above\r\n # Try to rename *\"선행개발셀\"* > *\"경솔기반그룹_선행개발셀\"*\r\n # As the URL translates each of the Korean characters into \"-\" characters in the URL, the API is failing to update the name as there is already a group name with the same amount of characters\r\nie https://bitbucket.org/workspacename/settings/groups/----- is the URL for the first group with 5 characters, if you try to name a group with non-alphanumeric characters that is 5 characters long, it will give you an error as it is translated as the same URL\r\n\r\nh3. Expected Results\r\nThe group is renamed, as it is a unique name different to all the other groups names. The non-alphanumeric characters should be encoded accordingly using character codes (ie %EC%82%EB%AC%BC) and not simply as \"dashes\".\r\nh3. Actual Results\r\n\"Group already exists\" error displays\r\n\r\nh3. Workaround\r\nUser will have to include a symbol at the beginning/end of the group name or include an English word in the group name so that the URL is different","createDate":"2022-01-12T04:27:52.000+0000","comments":[]},{"summary":"Pipeline build fails at step git clone while using runners ","key":"BCLOUD-21574","url":"https://jira.atlassian.com/browse/BCLOUD-21574","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThere are cases being reported that pipeline runners failing at step git clone. The issue might have been caused due to auth proxy container crashing in the builds.\r\nh3. Steps to Reproduce\r\n\r\nThe issue is reproducible only on a few customer machines.\r\nh3. Expected Results\r\n\r\nThe Pipeline build should execute without any issues.\r\nh3. Actual Results\r\n\r\nPipeline build fails at step git clone\r\n\r\nOur development is working on a fix. Meanwhile, one can try the below workaround if they come across this issue :\r\nh3. Workaround\r\n * Backup the current /etc/resolv.conf file on your runners host machine.\r\n * Remove all the comment lines (lines starting with the character #) in the file\r\n * Save the file and restart the runners.","createDate":"2022-01-05T16:44:28.000+0000","comments":[]},{"summary":"It's not possible to get the repositories permission through the API when you have multiple repositories under the workspace","key":"BCLOUD-21525","url":"https://jira.atlassian.com/browse/BCLOUD-21525","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIt's not possible to see the repositories permissions through the API when you have multiple repositories under a workspace. \r\nError message: \"Something went wrong\"\r\nh3. Steps to Reproduce\r\n # You'll need to test this in a workspace with multiple repositories (problem occurred in a workspace with 900+ repositories)\r\n # Execute the following request:\r\n{code:java}\r\ncurl -s --user user:Apppassword https://api.bitbucket.org/2.0/workspaces/{workspace}/permissions/repositories?pagelen=10&page=1{code}\r\n\r\nh3. Expected Results\r\n\r\nYou'll see the repositories permissions\r\nh3. Actual Results\r\n\r\nYou receive the following error message:\r\n{code:java}\r\n{\"type\": \"error\", \"error\": {\"message\": \"Something went wrong\", \"id\": \"XXX\"}}%{code}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-12-06T19:43:31.000+0000","comments":[]},{"summary":"Allow removing a reviewer who was a past approver","key":"BCLOUD-21506","url":"https://jira.atlassian.com/browse/BCLOUD-21506","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nRemoving a reviewer that has approved in the past should be allowed if there are no current approvals. Same as a reviewer who has requested changes in the past.\r\nh3. Steps to Reproduce\r\n # User approves PR and reset PR approvals is enabled (this is a feature in branch permissions)\r\n # Push new changes to the PR to reset approval\r\n # Attempt to remove reviewer\r\n\r\nh3. Expected Results\r\n\r\nReviewer is removed\r\nh3. Actual Results\r\n\r\nError popup:\r\n{noformat}\r\nSomething went wrong\r\nError: You cannot remove reviewers with status{noformat}\r\nh3. Workaround\r\n\r\nDecline the existing PR and raise a new one.","createDate":"2021-11-30T22:48:21.000+0000","comments":[{"text":"Please fix this bug. If a colleague is absent (vacation, sickness, etc.) and was previously approver, then the pull request cannot be merged. You have to turn off the request changes option temporally in the branch permissions.","author":"Benjamin Baumgartner"},{"text":"Same issue here. We would like to enforce the merge check \"Check that no changes are requested\" but if someone goes away on vacation, etc.. then we can't remove them and they block the merge. ","author":"Brandon Poe"},{"text":"Same here. ","author":"Ansgar Gallas"},{"text":"Same.","author":"Milan Tornier"},{"text":"Example problem:\r\n\r\nI updated a PR, reviewers that approved stay and I can't remove them. The PR looks like it has been reviewed when there were changes made after those reviews.","author":"Lukas Antanavičius"},{"text":"To add to the list of problems this creates: If an approver left the workspace (because, say, they left the company), the description cannot be updated because \"Firstname Lastname is not a member of this workspace and cannot be added to this pull request\", but they also cannot be removed.","author":"Eric Herot"},{"text":"+1 for being able to remove a reviewer who has a non-approved status but who is also no longer with the company.","author":"Charles Crossan"},{"text":"+1","author":"Lilia Wasserman"},{"text":"+1","author":"Jonas Petrén"},{"text":"+1","author":"Eric Groseclos"},{"text":"+1","author":"Hristijan Bocevski"},{"text":"+1","author":"Marcus Eriksson"},{"text":"Would like this feature. Seems silly to not be able remove a user. Especially if they are not a part of your organization/company anymore. I would actually almost assume that they should be moved by default.","author":"Kevin Coy"},{"text":"Would like this feature (y) ","author":"Andres Mora Estevez"},{"text":"We just had a team member out on vacation... and ran into this exact issue again. We shouldn't have to interrupt the person on vacation or temporarily disable the requirement that all reviewers approve just to handle these situations, especially for larger teams. ","author":"Brandon Poe"},{"text":"Super frustrating for our team","author":"Emmanuel Gabai"},{"text":"+1","author":"Alexey Plekhanov"},{"text":"+1\r\n\r\n ","author":"georgi.velikov"},{"text":"+1","author":"Tao Gómez Gil"},{"text":"This affected our Team today in the following way:\r\n * We release weekly, so we switch open PRs to the new release branch every week\r\n * We had a team member (who was a default reviewer) leave the company recently, so their account was deactivated\r\n ** Because he was still a reviewer on some PRs, their target branch couldn't be updated (the call throws \"reviewers: Malformed reviewers list\")\r\n ** he also had approved a lot of those PRs\r\n * *So:* We have to remove him as a reviewer in order to change our PR's target branch\r\n * *But:* We can't remove him if he has a status\r\n\r\nIf we didn't have premium and the \"auto-unapprove\" feature, it seems there would be no way to remove his status in order to remove him in order to change the target branch of the PR. This would have meant we needed to open new PRs for all PRs where he was still a reviewer.\r\n\r\nRemoving reviewers with status needs to be a feature! I would prefer if it was always possible, but maybe restricted to certain users like those with Admin roles.\r\n\r\nEdit: It doesn't even work with auto-unapprove enabled. The reviewer is still seen as having a status, even though their status is visually removed. Our team members are having to re-open the PR.","author":"Tom Quinders"},{"text":"It doesn't make a lot of sense to me that an admin or someone with permissions wouldn't be able to remove a request for changes from the UI. I see there's an endpoint but it's not clear if it's possible to remove other's request for changes via API.","author":"jflatt"},{"text":"see also \r\n # BCLOUD-23166 which is very similar request","author":"Aaron.Ridout"},{"text":"I have had the situation where someone left the company with a Pull Request with 'Requires Changes' outstanding.\r\n\r\nHad to abandon the PR and re-raise a new PR with a different set of reviewers (loosing all the other review comments).\r\n\r\nIf an Admin could go in at remove the 'Requires Changes' road-block, obviously leaving a suitable message for the log too, ","author":"Aaron.Ridout"}]},{"summary":"Creating Pull Request does not set Reviewers / PR Author as the PR Watchers Intermittently","key":"BCLOUD-21429","url":"https://jira.atlassian.com/browse/BCLOUD-21429","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a Pull Request (PR) is created, the PR Author and Reviewers added should be automatically set as PR Watchers / Followers. This will allow the Reviewer / Author to receive notifications on activities in the PR. \r\n\r\nWe have observed that intermittently, PR Author / Reviewers aren't added to PR Watchers list automatically. This leads to them not receiving notifications on PR Activity\r\n\r\nh3. Steps to Reproduce\r\n(i) Since this is intermittent, it may not be easy to reproduce.\r\n\r\n# Create a new Pull Request on a repository\r\n#* Add Few Reviewers (Including Default Reviewers)\r\n# Click Create PR\r\n# As the PR Author or Reviewer\r\n#* Navigate to the PR page click the \"ellipsis\" (...) at the top right.\r\n#* See if it shows \"Watch\" or \"Stop Watching\". \r\n\r\nh3. Expected Results\r\n\r\nIt shows  \"Stop Watching\" which indicates you are already watching the PR. \r\n\r\nh3. Actual Results\r\n\r\nIt shows \"Watch\" which means as a PR Author or Reviewer, you aren't automatically watching the PR. \r\n\r\nh3. Workaround\r\n* The workaround as of now is to manually watch the PR after creation. ","createDate":"2021-10-18T08:49:17.000+0000","comments":[]},{"summary":"Unable to create a pipeline using the UI when repository requires issue key","key":"BCLOUD-21425","url":"https://jira.atlassian.com/browse/BCLOUD-21425","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n \r\n\r\nCurrently, when the repository has integration with an issue tracker and the *Require issue keys in commit messages* option is enabled, it´s not possible to create a pipeline using the Bitbucket UI's Pipeline section.\r\nh3. Steps to Reproduce\r\n # Link a Bitbucket repository, that has no pipeline configured, to an issue tracker (Jira in this example) **\r\n # Under *Repository Settings > Workflows > Links*, enable the option *Require issue keys in commit messages*\r\n # Go to the repository's Pipeline section and create a new pipeline using any of the templates\r\n # Try to commit the pipeline YAML file, and it will fail with the message: _\"Committing file was unsuccessful. You may have restricted write access to the branch.\"_**\r\n\r\n \r\n\r\nThis happened because the default commit message of the YAML file created when you first commit your pipeline through the UI is \"Initial Bitbucket Pipelines configuration\". This message cannot be changed, and since it has no *Issue Key*, Bitbucket is not allowing the commit, and showing a generic access issue message.\r\nh3. Expected Results\r\n\r\nThe correct error message is shown, stating the commit failed because of a missing issue key, and allow commit message to be edited.\r\nh3. Actual Results\r\n\r\nThe default commit message cannot be changed and a generic error message about branch write permissions was showed.\r\nh3. Workaround\r\n\r\nManually create the *bitbucket-pipelines.yml* file and push it to the repository with a commit message containing an issue Key.\r\n\r\n \r\n\r\n ","createDate":"2021-10-14T14:59:14.000+0000","comments":[]},{"summary":"Merging pull request shows error and PR doesn't close but the merge succeeded","key":"BCLOUD-21415","url":"https://jira.atlassian.com/browse/BCLOUD-21415","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen merging a pull request through the UI, the merge may appear to fail with a \"Something went wrong\" error. However, the merge will have been made in the repository even though the pull request remains open.\r\nh3. Steps to Reproduce\r\n # Merge a pull request with \"Close source branch\" checked in the merge dialog\r\n\r\nThis behavior is intermittent and rare, so it will be difficult to reproduce consistently.\r\nh3. Expected Results\r\n\r\nThe pull request is marked merged, the source branch is merged into the destination branch, and the source branch is closed.\r\nh3. Actual Results\r\n\r\nThe source branch is merged into the destination branch, but is not closed, and the pull request is not marked as merged.\r\nh3. Workaround\r\n\r\nPushing or merging an additional commit into either the source or destination branch of the pull request should cause Bitbucket to detect the merge and update the pull request.","createDate":"2021-10-08T14:45:23.000+0000","comments":[]},{"summary":"Source branch is not deleted during automatic merge of a pull request with build checks passed","key":"BCLOUD-21327","url":"https://jira.atlassian.com/browse/BCLOUD-21327","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSource branch is not deleted during automatic merge of a pull request with all the build checks passed\r\nh3. Steps to Reproduce\r\n # Create a new branch and make some change\r\n # Make a PR from the newly created branch to the master. enable \"source branch deletion\".\r\n # Click on the merge button as soon as you create the PR, notice the information in the PR merge you get\r\n # You will observe that Pull request gets merged as soon as the build on the PR become successful\r\n\r\nh3. Expected Results\r\n\r\nAfter the pull request is merged, the source branch should get deleted.\r\nh3. Actual Results\r\n\r\nThe source branch shown in the list of Active Branches.\r\n\r\nh3. Workaround\r\n\r\nManually merge PR so that source branch gets deleted. In case of automatic merge, user need to delete the source branch manually.","createDate":"2021-09-03T06:10:51.000+0000","comments":[]},{"summary":"Markdown doesn't render the same way on Source (README) and Wiki page","key":"BCLOUD-21269","url":"https://jira.atlassian.com/browse/BCLOUD-21269","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMarkdown doesn't render the same way on the Source (README) and Wiki page\r\nh3. Steps to Reproduce\r\n # Create a README on your repository\r\n # Add the following:\r\n{code:java}\r\nline 1\r\n>\r\n>\r\n> \r\n\r\nline 2{code}\r\n\r\n # Create a Wiki on your repository\r\n # Add the following:\r\n{code:java}\r\nline 1\r\n>\r\n>\r\n> \r\n\r\nline 2{code}\r\n\r\nh3. Expected Results\r\n\r\nThey should show the same results\r\nh3. Actual Results\r\n\r\nOn a README, this is the result:\r\n\r\n!Screen Shot 2021-07-30 at 9.59.51 AM.png|width=333,height=290!\r\n On a Wiki, this is the result:\r\n\r\n!Screen Shot 2021-07-30 at 10.00.52 AM.png|width=432,height=255!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-07-30T14:01:38.000+0000","comments":[]},{"summary":"Integrating Snyk with IP allowlist enabled throws an authentication error (403)","key":"BCLOUD-21244","url":"https://jira.atlassian.com/browse/BCLOUD-21244","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIt is not possible to integrate Snyk if the workspace has the IP allowlist feature enabled.\r\n\r\nh3. Steps to Reproduce\r\n\r\n# Enable Snyk\r\n#* Open a repository\r\n#* Go to \"Security\" tab\r\n#* Click \"Try now\"\r\n#* Click \"Allow\"\r\n#* Connect Bitbucket with Snyk\r\n#** At this point, you might not be able to connect if this is the first time you are authenticating to Snyk with IP allowlist enabled. You might need to disable it.\r\n# If the authentication happens successfully, you'll receive the following error: \r\n{code}\r\nError importing this repository.\r\nInvalid credentials\r\n\r\nAdditional info for support enquires:\r\nsnyk-request-id: a7dbfe68-718e-4eca-81ca-a9c1410e5f13\r\n\r\nPlease try again later or contact our support\r\n{code}\r\n\r\nh3. Expected Results\r\nThe integration with Snyk is completed and the repository has Snyk enabled\r\n\r\nh3. Actual Results\r\nIt is not possible to integrate the repository with Snyk.\r\n\r\nh3. Workaround\r\n\r\nThe only workaround at the moment to complete the integration with Snyk is to disable IP allowlist.","createDate":"2021-07-20T13:00:32.000+0000","comments":[{"text":"It's really strange as it's forcing our company to have unsecured repositories to have them... more secured?\r\n\r\nI need to pay Snyk to have a secured repo but while paying I can't restrict access. Super strange.","author":"Tomasz Swietlikowski"}]},{"summary":"Line-commenting on a PR sometimes times out","key":"BCLOUD-21224","url":"https://jira.atlassian.com/browse/BCLOUD-21224","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen commenting on a line in a PR the UI says \"Sending...\" and the comment never gets saved. In the console, under the network tab there the POST to /!api/2.0/repositories/\\{username}/\\{repo_slug}/pullrequests/\\{pull_request_id}/comments/ will return a 500 response.\r\n\r\nThe best way to reproduce this is to comment on a pull request after the destination branch has changed.\r\nh3. Steps to Reproduce\r\n # Open a PR page for branch XYZ\r\n # Make changes to branch XYZ and push them\r\n # (The already open PR page should be out of date)\r\n # (Open the console and network tab)\r\n # Do a line comment on a PR\r\n # See the 500 error when POST the comment data\r\n\r\nh3. Expected Results\r\n\r\nExpect a 200 response and the UI to stop saying \"Sending...\"\r\nh3. Actual Results\r\n\r\n500 response and the UI says \"Sending...\" forever.\r\nh3. Workaround\r\n\r\nCopy the comment text, refresh the PR page and attempt the comment again.","createDate":"2021-07-14T19:07:58.000+0000","comments":[]},{"summary":"Branch and Pull request side by side diff view is showing multiple \"undefined\" string","key":"BCLOUD-21221","url":"https://jira.atlassian.com/browse/BCLOUD-21221","type":"Bug","priority":"","description":"h3. Issue Summary\r\n*Side by side diff on a branch*\r\nBranch _side by side_ diff view is showing multiple \"undefined\" strings. These \"undefined\" strings are not part of the file being viewed.\r\n\r\n*Side by side diff in pull request creation*\r\nThe _side by side_ diff view when creating a pull request also contains multiple \"undefined\" strings. These \"undefined\" strings are not part of the file being viewed.\r\n\r\nh3. Steps to Reproduce\r\n*Side by side diff on a branch*\r\n # View the branch diff in _side by side_ diff view\r\n\r\n*Side by side diff in pull request creation*\r\n1. Create a pull request\r\n2. Click \"Diff\" to to see the diff\r\n3. Click  the \"Side-by-side\" button.\r\n3. \"Undefined\" appears on lines, normally near the bottom of the file, regardless of blank lines or anything else.\r\n !screenshot-1.png|thumbnail! \r\n\r\nh3. Expected Results\r\nThe branch _side by side_ diff view should display the correct diff\r\n\r\nh3. Actual Results\r\nThe branch _side by side diff_ view display multiple \"{_}undefined{_}\" string along with the file diff\r\n\r\nh3. Workaround\r\nUse the normal branch diff view","createDate":"2021-07-14T17:29:23.000+0000","comments":[{"text":"Can we get some real steps to reproduce this or perhaps even a link to a public repo where we can view this?\r\n\r\nAlso it would be nice to see the response from the network tab that is returned from this request: https://bitbucket.org/!api/internal/repositories/\\{workspace}/\\{repo}/\\{commit}/diff?filename=x&meta=true&w=","author":"seanaty"},{"text":"we created a public repo bitbucket.org:firedup/diff-bcloud21221.git\r\n\r\n \r\n\r\ncommited a wpconfig.php file to master\r\n\r\ncreated a branch and added some new lines to the file.\r\n\r\nopened up side by side diff and lots of \"undefined\" displayed.\r\n\r\n \r\n\r\nbackground info:\r\n\r\nwere on ubuntu so will be line feeds in the file.\r\n\r\n \r\n\r\n ","author":"Martin Richards"},{"text":"Update, it also removes content from the side by side diff.\r\n\r\n \r\n\r\nif you look at the test feature we created in the diff-bcloud21221 repo you'll see it misses off the last couple of lines:\r\n\r\n \r\n /** Sets up WordPress vars and included files. */\r\n require_once ABSPATH . 'wp-settings.php';\r\n  \r\n\r\nFrom Network Inspector:\r\n\r\n \r\n\r\n[https://bitbucket.org/!api/internal/repositories/firedup/diff-bcloud21221/comparefiles/1f869430b639e339dff0cd509f006aa4a86d478d..master?filename=wpconfig.php.php&meta=true&w=]\r\n\r\n \r\n\r\n[{\"from_file\":{\"meta\":{\"numLines\":96,\"position\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,101],\"longestLine\":{\"html\":\" * the\r\n\r\n{@link https:\\/\\/api.wordpress.org\\/secret-key\\/1.1\\/salt\\/ WordPress.org secret-key service}\r\n\r\n.\"},\"name\":\"from\",\"filename\":\"wpconfig.php.php\"},\"pages\":[[\\{\"html\":\"<?php\",\"gutters\":[]},{\"html\":\"\\/**\",\"gutters\":[]},\\{\"html\":\" * The base configuration for WordPress\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * The wp-config.php creation script uses this file during the installation.\",\"gutters\":[]},\\{\"html\":\" * You don't have to use the web site, you can copy this file to \"wp-config.php\"\",\"gutters\":[]},\\{\"html\":\" * and fill in the values.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * This file contains the following configurations:\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * * MySQL settings\",\"gutters\":[]},\\{\"html\":\" * * Secret keys\",\"gutters\":[]},\\{\"html\":\" * * Database table prefix\",\"gutters\":[]},\\{\"html\":\" * * ABSPATH\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @link https:\\/\\/wordpress.org\\/support\\/article\\/editing-wp-config-php\\/\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @package WordPress\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},\\{\"html\":\"\\/\\/ ** MySQL settings - You can get this info from your web host ** \\/\\/\",\"gutters\":[]},{\"html\":\"\\/** The name of the database for WordPress *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_NAME', 'database_name_here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** MySQL database username *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_USER', 'username_here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** MySQL database password *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_PASSWORD', 'password_here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** MySQL hostname *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_HOST', 'localhost' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** Database charset to use in creating database tables. *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_CHARSET', 'utf8' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** The database collate type. Don't change this if in doubt. *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_COLLATE', '' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**#@+\",\"gutters\":[]},\\{\"html\":\" * Authentication unique keys and salts.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * Change these to different unique phrases! You can generate these using\",\"gutters\":[]},{\"html\":\" * the\r\n\r\n{@link https:\\/\\/api.wordpress.org\\/secret-key\\/1.1\\/salt\\/ WordPress.org secret-key service}\r\n\r\n.\",\"gutters\":[]},{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * You can change these at any point in time to invalidate all existing cookies.\",\"gutters\":[]},\\{\"html\":\" * This will force all users to have to log in again.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @since 2.6.0\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'AUTH_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'SECURE_AUTH_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'LOGGED_IN_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'NONCE_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'AUTH_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'SECURE_AUTH_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'LOGGED_IN_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'NONCE_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**#@-*\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**\",\"gutters\":[]},\\{\"html\":\" * WordPress database table prefix.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * You can have multiple installations in one database if you give each\",\"gutters\":[]},\\{\"html\":\" * a unique prefix. Only numbers, letters, and underscores please!\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"$table_prefix = 'wp_';\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**\",\"gutters\":[]},\\{\"html\":\" * For developers: WordPress debugging mode.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * Change this to true to enable the display of notices during development.\",\"gutters\":[]},\\{\"html\":\" * It is strongly recommended that plugin and theme developers use WP_DEBUG\",\"gutters\":[]},\\{\"html\":\" * in their development environments.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * For information on other constants that can be used for debugging,\",\"gutters\":[]},\\{\"html\":\" * visit the documentation.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @link https:\\/\\/wordpress.org\\/support\\/article\\/debugging-in-wordpress\\/\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'WP_DEBUG', false );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/* Add any custom values between this line and the \"stop editing\" line. *\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/* That's all, stop editing! Happy publishing. *\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** Absolute path to the WordPress directory. *\\/\",\"gutters\":[]},{\"html\":\"if ( ! defined( 'ABSPATH' ) )\r\n\r\n{\",\"gutters\":[]}\r\n\r\n,{\"start\":true,\"html\":\"\\tdefine( 'ABSPATH', __DIR__ . '\\/' );\",\"gutters\":[],\"change\":true},\\{\"html\":\"}\",\"gutters\":[],\"change\":true},\\{\"html\":\"\",\"gutters\":[],\"change\":true},\\{\"html\":\"\\/** Sets up WordPress vars and included files. *\\/\",\"gutters\":[],\"change\":true},\\{\"end\":true,\"html\":\"require_once ABSPATH . 'wp-settings.php';\",\"gutters\":[],\"change\":true}]],\"block_num\":0},\"hunks\":[{\"to_lines\":[\"\",\"\",\"\",\"\"],\"from_count\":5,\"to_start\":92,\"from_start\":92,\"to_count\":9,\"type\":\"mod\",\"conflict\":false,\"from_lines\":[]}],\"unified_map\":[null,[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10],[11,11],[12,12],[13,13],[14,14],[15,15],[16,16],[17,17],[18,18],[19,19],[20,20],[21,21],[22,22],[23,23],[24,24],[25,25],[26,26],[27,27],[28,28],[29,29],[30,30],[31,31],[32,32],[33,33],[34,34],[35,35],[36,36],[37,37],[38,38],[39,39],[40,40],[41,41],[42,42],[43,43],[44,44],[45,45],[46,46],[47,47],[48,48],[49,49],[50,50],[51,51],[52,52],[53,53],[54,54],[55,55],[56,56],[57,57],[58,58],[59,59],[60,60],[61,61],[62,62],[63,63],[64,64],[65,65],[66,66],[67,67],[68,68],[69,69],[70,70],[71,71],[72,72],[73,73],[74,74],[75,75],[76,76],[77,77],[78,78],[79,79],[80,80],[81,81],[82,82],[83,83],[84,84],[85,85],[86,86],[87,87],[88,88],[89,89],[90,90],[91,91],[92,null],[93,null],[94,null],[95,null],[96,null],[null,92],[null,93],[null,94],[null,95],[null,96],[null,97],[null,98],[null,99],[null,100]],\"note\":null,\"from_lines_per_page\":100,\"to_file\":{\"meta\":{\"numLines\":100,\"position\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,96,96,96,96,97],\"longestLine\":{\"html\":\" * the\r\n\r\n{@link https:\\/\\/api.wordpress.org\\/secret-key\\/1.1\\/salt\\/ WordPress.org secret-key service}\r\n\r\n.\"},\"name\":\"to\",\"filename\":\"wpconfig.php.php\"},\"pages\":[[\\{\"html\":\"<?php\",\"gutters\":[]},{\"html\":\"\\/**\",\"gutters\":[]},\\{\"html\":\" * The base configuration for WordPress\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * The wp-config.php creation script uses this file during the installation.\",\"gutters\":[]},\\{\"html\":\" * You don't have to use the web site, you can copy this file to \"wp-config.php\"\",\"gutters\":[]},\\{\"html\":\" * and fill in the values.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * This file contains the following configurations:\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * * MySQL settings\",\"gutters\":[]},\\{\"html\":\" * * Secret keys\",\"gutters\":[]},\\{\"html\":\" * * Database table prefix\",\"gutters\":[]},\\{\"html\":\" * * ABSPATH\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @link https:\\/\\/wordpress.org\\/support\\/article\\/editing-wp-config-php\\/\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @package WordPress\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},\\{\"html\":\"\\/\\/ ** MySQL settings - You can get this info from your web host ** \\/\\/\",\"gutters\":[]},{\"html\":\"\\/** The name of the database for WordPress *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_NAME', 'database_name_here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** MySQL database username *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_USER', 'username_here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** MySQL database password *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_PASSWORD', 'password_here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** MySQL hostname *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_HOST', 'localhost' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** Database charset to use in creating database tables. *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_CHARSET', 'utf8' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** The database collate type. Don't change this if in doubt. *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'DB_COLLATE', '' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**#@+\",\"gutters\":[]},\\{\"html\":\" * Authentication unique keys and salts.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * Change these to different unique phrases! You can generate these using\",\"gutters\":[]},{\"html\":\" * the\r\n\r\n{@link https:\\/\\/api.wordpress.org\\/secret-key\\/1.1\\/salt\\/ WordPress.org secret-key service}\r\n\r\n.\",\"gutters\":[]},{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * You can change these at any point in time to invalidate all existing cookies.\",\"gutters\":[]},\\{\"html\":\" * This will force all users to have to log in again.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @since 2.6.0\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'AUTH_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'SECURE_AUTH_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'LOGGED_IN_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'NONCE_KEY', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'AUTH_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'SECURE_AUTH_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'LOGGED_IN_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"define( 'NONCE_SALT', 'put your unique phrase here' );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**#@-*\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**\",\"gutters\":[]},\\{\"html\":\" * WordPress database table prefix.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * You can have multiple installations in one database if you give each\",\"gutters\":[]},\\{\"html\":\" * a unique prefix. Only numbers, letters, and underscores please!\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"$table_prefix = 'wp_';\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/**\",\"gutters\":[]},\\{\"html\":\" * For developers: WordPress debugging mode.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * Change this to true to enable the display of notices during development.\",\"gutters\":[]},\\{\"html\":\" * It is strongly recommended that plugin and theme developers use WP_DEBUG\",\"gutters\":[]},\\{\"html\":\" * in their development environments.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * For information on other constants that can be used for debugging,\",\"gutters\":[]},\\{\"html\":\" * visit the documentation.\",\"gutters\":[]},\\{\"html\":\" *\",\"gutters\":[]},\\{\"html\":\" * @link https:\\/\\/wordpress.org\\/support\\/article\\/debugging-in-wordpress\\/\",\"gutters\":[]},\\{\"html\":\" *\\/\",\"gutters\":[]},\\{\"html\":\"define( 'WP_DEBUG', false );\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/* Add any custom values between this line and the \"stop editing\" line. *\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/* That's all, stop editing! Happy publishing. *\\/\",\"gutters\":[]},\\{\"html\":\"\",\"gutters\":[]},{\"html\":\"\\/** Absolute path to the WordPress directory. *\\/\",\"gutters\":[]},{\"html\":\"if ( ! defined( 'ABSPATH' ) )\r\n\r\n{\",\"gutters\":[]}\r\n\r\n,{\"start\":true,\"html\":\"\\tdefine( 'ABSPATH', __DIR__ . '\\/' );\",\"gutters\":[],\"change\":true},\\{\"html\":\"}\",\"gutters\":[],\"change\":true},\\{\"html\":\"\",\"gutters\":[],\"change\":true},\\{\"html\":\"\",\"gutters\":[],\"change\":true},\\{\"html\":\"\",\"gutters\":[],\"change\":true},\\{\"html\":\"\",\"gutters\":[],\"change\":true},\\{\"html\":\"\",\"gutters\":[],\"change\":true},\\{\"html\":\"\\/** Sets up WordPress vars and included files. *\\/\",\"gutters\":[],\"change\":true},\\{\"end\":true,\"html\":\"require_once ABSPATH . 'wp-settings.php';\",\"gutters\":[],\"change\":true}]],\"block_num\":0},\"from_pages_per_block\":10}]\r\n\r\n ","author":"Martin Richards"},{"text":"I also made an example repo showing this problem. If it helps, it is available at [https://bitbucket.org/mattwilson1024/bitbucket-diff-bug/src/main/] \r\n\r\nHere's a screenshot (Chrome 94 on Mac) comparing the side-by-side diff in a PR vs directly comparing the two branches. It shows lots of lines of `undefined` lines as described in the ticket, but it's worth noting that it also doesn't maintain the correct structure of the file on either side, which makes this view pretty much useless.\r\n\r\n!https://bytebucket.org/mattwilson1024/bitbucket-diff-bug/raw/68771bc88e69e8ebc15f843d2fca8e40b88fbe33/screenshot.png!\r\n\r\nAlso, if you zoom the browser out with `Cmd -` it fails to draw the right side entirely. (I've tried to add a screenshot for that but Jira is erroring when I upload a second image...)\r\n\r\nFor what it's worth, I'm kind of surprised/disappointed that this issue is marked as such low priority. Diffing two branches is a pretty major part of the product and this bug has rendered side-by-side view completely unusable for quite a while now.\r\n\r\nWhen it comes to workarounds, using the non side-by-side view doesn't count as a workaround in my opinion because it's much harder to interpret for large/complex files and that's not achieving the same functionality.\r\n\r\nCreating a PR does allow you to view the diff properly, but that is inconvenient if you just want to quickly compare two branches, and creates noise for the rest of the team because there's a PR in the list that then needs to be rejected when you're done.","author":"Matt Wilson"},{"text":"I agree with Matt, the suggested work around isn't appropriate as it's much harder to interpret. \r\n\r\nThis should be higher priority.\r\n\r\n \r\n\r\nA quick inspection of the data reveals the 'unified map' contains null's when this error occurs:\r\n\r\n\"unified_map\": [\r\n null,\r\n [1,1],\r\n [2,2],\r\n [3,null],\r\n [4,null],\r\n [5,null],\r\n [6,null],\r\n [7,null],\r\n [8,null],\r\n [9,null],\r\n [10,null],\r\n [null,3],\r\n [null,4],\r\n [null,5],\r\n [null,6],\r\n [null,7],\r\n [null,8],\r\n [null,9],\r\n [null,10],\r\n [null,11],\r\n [11,12],\r\n [12,13],\r\n [13,14],\r\n [14,15],\r\n [15,16],\r\n [16,17],\r\n [17,18],\r\n [18,19],\r\n [19,20],\r\n [20,21],\r\n [21,22],\r\n [22,23],\r\n [23,24],\r\n [24,25],\r\n [25,26]\r\n ]","author":"Mike Stainsby"},{"text":"Any update here? The suggestion I saw from an Atlassian worker of \"normal view\" in [https://community.atlassian.com/t5/Bitbucket-questions/DIFF-IS-BROKEN-IN-BITBUCKET/qaq-p/1743603] defeats the purpose of why people use the side-by-side diff in the first place.\r\n\r\n \r\n\r\nI found an actual workaround that worked for me: going in to the specific commit and then doing the side-by-side diff worked. ","author":"Mark Dunstan"},{"text":"Same issue for us now, this is pretty weird behaviour!\r\n\r\n!image-2022-03-15-09-23-17-731.png!","author":"Francis Conroy"},{"text":" \r\n\r\nWe have the same issue.  I will enter a support ticket with details. \r\n\r\nAs a note, this applies to creating the pull request. \r\n\r\nI sent instructions in the ticket on how to duplicate the issue. \r\nIt is happening consistently with us in the following scenario. \r\n # Developer starts to create a pull request\r\n # Since we have a requirement for developers to review changes before submitting the pull request, they select side-by-side to review the pull request. \r\n # “Undefined” appears on lines, normally near the bottom of the file, regardless of blank lines or anything else.  \r\n # Oddly, the behavior does not persist after the pull request is created. \r\n ","author":"Kay Likes"}]},{"summary":"Firefox 89.0+ version returns \"Something went wrong\" error","key":"BCLOUD-21165","url":"https://jira.atlassian.com/browse/BCLOUD-21165","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nFew users are getting the \"Something went wrong\" error in Firefox 89.0+ version. It is occurring in multiple places including Bitbucket Cloud Overview, repository page and pull requests. \r\nh3. Steps to Reproduce\r\n # It is occurring in multiple places including Bitbucket Cloud Overview, repository page and pull requests in Firefox 89.0+ version.\r\n\r\nh3. Expected Results\r\n\r\nThe user should be able to view the Bitbucket Cloud pages without any issues.\r\nh3. Actual Results\r\n\r\nThe user receives a \"something went wrong\" error in UI. \r\nh3. Workaround\r\n\r\nThey may use any other browser other than Firefox. You can get the list of Bitbucket Cloud-supported stable browsers from [here|https://support.atlassian.com/bitbucket-cloud/docs/which-browsers-does-bitbucket-support/]","createDate":"2021-06-24T19:09:31.000+0000","comments":[{"text":"Getting \"Something went wrong\" everyday now.\r\n{code:java}\r\nSomething went wrong\r\n\r\nWait a few moments, then try again. If this keeps happening, check the current operational status of Bitbucket Cloud at bitbucket.status.atlassian.com\r\n\r\n41ddac4483df42f89c10a13d0c23ec2f\r\n\r\nIf the problem persists, contact Support and include the code displayed above, if one is provided. {code}\r\n \r\n\r\nTens of exceptions like these occurring in the console:\r\n{code:java}\r\n09:49:06.469 DOMException: Node.removeChild: The node to be removed is not a child of this node\r\n    React 2\r\n    y scheduler.production.min.js:19\r\n    React 4\r\n    y scheduler.production.min.js:19\r\n    React 4\r\n    u batched-updates.js:10\r\n    i index.tsx:222\r\n    r history.js:155\r\n    notifyListeners history.js:173\r\n    notifyListeners history.js:172\r\n    T history.js:288\r\n    push history.js:369\r\n    confirmTransitionTo history.js:145\r\n    push history.js:350\r\n    S index.ts:88\r\n    Redux 16\r\ninstrument.ts:124:32\r\n {code}","author":"codenet_phuong"},{"text":"I have the same bug, but it doesn't only affect PRs but the whole page after login.","author":"David Krywult"}]},{"summary":"Adding Slack link on a pull request comment cannot be saved","key":"BCLOUD-21145","url":"https://jira.atlassian.com/browse/BCLOUD-21145","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAdding a Slack message link on a pull request comment can not be saved. \r\n\r\n*Issue #1*\r\nIf a link to a Slack message is added to the pull request comment alone (No other text) The message is hidden when saved\r\n\r\n*Issue #2*\r\nIf a link to a Slack message is added to the pull request comment with additional text the comment is in a sending state and the comment is removed when navigating away from the page \r\n\r\nh3. Steps to Reproduce (Issue #1)\r\n# Integrate with Bitbucket Repository with Slack\r\n# Copy a Slack message link \r\n# Paste the Slack message link in with no additional text \r\n# Click Save\r\n# Comment is hidden and does not save\r\n\r\n !Slack_issue1.gif! \r\n\r\nh3. Steps to Reproduce (Issue #2)\r\n# Integrate with Bitbucket Repository with Slack\r\n# Copy a Slack message link \r\n# Paste the Slack message link in with no additional text add some text\r\n# Click Save\r\n# Comment is sending and never saves\r\n\r\n !Slack_issue2.gif! \r\n\r\nh3. Expected Results\r\nComment should save with a preview of the Slack message\r\n\r\nh3. Actual Results\r\n* Issue #1 - Message is hidden and does not save\r\n* Issue #2 - Comment is sending and never saves\r\n\r\nh3. Workaround\r\n* Embed the link into the text\r\n\r\n!Screen Shot 2021-06-23 at 17.55.51.png|thumbnail! \r\n","createDate":"2021-06-19T01:34:21.000+0000","comments":[{"text":"maybe disabling this integration for now could be a good enough quick fix\r\n\r\nIMHO I would like to add link and preview of that Slack message - is something I am not really interested in","author":"Roman Karsev"},{"text":"any news on this one?\r\nthe issue is very annoying - preview is generated automatically and I cannot remove it\r\nat the same time such comments are not added - this breaks the flow!","author":"Roman Karsev"}]},{"summary":"Emojis in a PR description are not rendering","key":"BCLOUD-21116","url":"https://jira.atlassian.com/browse/BCLOUD-21116","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIf you add emojis in a PR description, it is being rendered on the New PR UI.\r\nHowever, it is rendering while editing the description.\r\n\r\nh3. Steps to Reproduce\r\n# In a new or existing PR, add an emoji (e.g. {{:white_check_mark:}})\r\n# Click *Save*\r\n\r\nh3. Expected Results\r\nEmojis will be rendered\r\n\r\nh3. Actual Results\r\nEmojis are not being rendered\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-06-09T02:11:27.000+0000","comments":[{"text":"this is the current issue as i found.\r\n\r\n*View Mode*\r\n\r\n[https://drive.google.com/file/d/1d-018rkecUGf6shGLUYDTs3P1tQyvjlT/view?usp=sharing]\r\n\r\n*Edit Mode* \r\n [https://drive.google.com/file/d/1RnJ7hXxFvcBvvphjQ3o2iHK14tmEyLcn/view?usp=sharing]","author":"Pinyo Chanchaisomphob"}]},{"summary":"2FA SSH recovery method no longer works correctly (BBMICROS-538)","key":"BCLOUD-21107","url":"https://jira.atlassian.com/browse/BCLOUD-21107","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen attempting to use the SSH 2FA method, with the command below:\r\n{code}\r\nssh git@bitbucket.org recovery_codes\r\n{code}\r\n\r\nThe following error message is thrown:\r\n{code}\r\n{\"type\": \"error\", \"error\": {\"message\": \"You cannot administer personal accounts of other users.\"}}\r\n{code}\r\n\r\nOr even, the request is successful but the recovery codes are missing in the response:\r\n{code}\r\nYour single-use recovery codes are\r\n\r\nOnce logged in, you should immediately visit\r\nhttps://bitbucket.org/account/user/git/two-step-verification/\r\nto add a new two-step device.\r\nThank you for using Atlassian Bitbucket.\r\n{code}\r\n\r\nh3. Steps to Reproduce\r\n # Set up an SSH key and 2FA on your account\r\n # On your terminal, run the following command, as described [here|https://support.atlassian.com/bitbucket-cloud/docs/enable-two-step-verification/]:\r\n{code}\r\nssh git@bitbucket.org recovery_codes\r\n{code}\r\n\r\nh3. Expected Results\r\nThe recovery codes are correctly displayed on the terminal.\r\n\r\nh3. Actual Results\r\nThe following error is thrown:\r\n{code}\r\n{\"type\": \"error\", \"error\": {\"message\": \"You cannot administer personal accounts of other users.\"}}\r\n{code}\r\nOr the Recovery Codes are missing in the response body;\r\n\r\nh3. Workaround\r\n\r\nCurrently, the only known workaround is to disable your account 2FA using the e-mail method described here, under \"Disable two-step verification\":\r\nhttps://support.atlassian.com/bitbucket-cloud/docs/enable-two-step-verification/","createDate":"2021-06-04T17:10:29.000+0000","comments":[{"text":"I had this issue. My solution is install Authy app and use a generated token as a recovery code.","author":"Denis Demidiuk"},{"text":"I tried Authy app too but issue still persists , after disabling 2FA I can access Jira and Confluence but Bitbucket is asking for 2FA verification code and after entering the code  it keeps saying you entered incorrect verification code.\r\n\r\nI tried with the email recovery link which gets sent in 24hrs, twice but it is leading back to the 2FA modal.","author":"Priyanka Shetye"}]},{"summary":"Markdown lists without a preceding blank line render as a single line","key":"BCLOUD-21100","url":"https://jira.atlassian.com/browse/BCLOUD-21100","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using a Markdown list without a preceding blank line will render the items on a single line. Note that this is acceptable in traditional Markdown (as per {{Markdown.pl}}), however [in the CommonMark spec, it is noted that lists do not need a preceding blank line|https://spec.commonmark.org/0.29/#example-273].\r\n\r\nh3. Steps to Reproduce\r\n # Suppose the following code is part of a Markdown formatted file:\r\n    {code}\r\n    I need to buy\r\n    - new shoes\r\n    - a coat\r\n    - a plane ticket\r\n    {code}\r\n\r\n\r\nh3. Expected Results\r\nThe code is rendered as follows:\r\n\r\n{quote}\r\nI need to buy\r\n- new shoes\r\n- a coat\r\n- a plane ticket\r\n{quote}\r\n\r\nh3. Actual Results\r\n\r\nThe code is rendered as follows:\r\n{quote}\r\nI need to buy - new shoes - a coat - a plane ticket\r\n{quote}\r\n\r\nh3. Workaround\r\n\r\nUse the {{Markdown.pl}} style lists which require a blank line before the list.","createDate":"2021-06-02T01:08:19.000+0000","comments":[{"text":"Thanks for your help diagnosing this @John van der Loo !","author":"Joel Goransson"},{"text":"[~jvanderloo@atlassian.com] Yes, this is more of a feature request for support of CommonMark.","author":"seanaty"}]},{"summary":"Number of Code Insights integration limit shown on paid plans occasionally","key":"BCLOUD-21095","url":"https://jira.atlassian.com/browse/BCLOUD-21095","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCode insights has a limit of 3  3rd party integrations for Free plan. The is no limit on paid plans. : https://www.atlassian.com/software/bitbucket/pricing\r\n\r\nHowever, occasionally, from a repo which is on a paid plan (Standard / Premium) that has more than 3 Integration for Code Insights, users will see the notice requesting to upgrade to Standard or Premium when trying to view the 4th report. \r\n\r\nReloading the page resolves the issue\r\n\r\nh3. Steps to Reproduce\r\n# On a workspace with paid plans, enable 4 third party integrations with code insights\r\n# View the 4th code insight report\r\n#* You'll get the notification and won't be able to see the report\r\n\r\n\r\nh3. Expected Results\r\n* Code Insight report shows as expected with more than 3 third party integrations\r\n\r\n\r\n\r\nh3. Actual Results\r\n* Error is shows as this screen : \r\n**  !image-3.png|thumbnail! \r\n\r\n\r\nh3. Workaround\r\n\r\n* This is usually resolved by reloading the page and the issue will disappear\r\n\r\n","createDate":"2021-05-28T11:48:45.000+0000","comments":[]},{"summary":"Pipeline deployments with more than 100 commits would not update status in corresponding JIRA tickets","key":"BCLOUD-21070","url":"https://jira.atlassian.com/browse/BCLOUD-21070","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf user trigger a deployment in pipeline that contain more than 100 commits(say 200 commits), those Jira issues that only have its key show in 100-200 commits would not get pick up, and the status in the corresponding Jira issue won't be updated.\r\nh3. Steps to Reproduce\r\n # Create deployment environments in repository settings -> pipelines -> deployment\r\n # Define a step that mark as deployment, like this:\r\n{code:java}\r\npipelines:\r\n  branches:\r\n    ddev:\r\n      step:\r\n          name: Build and Test\r\n          deployment: test\r\n          script:\r\n            - echo test{code}\r\n\r\n # Create a feature branch that have 101 commits, and first commit point to a Jira issue, while the rest of the commits don't point to that issue.\r\n # Merge the feature branch to ddev, and it will trigger the deployment step.\r\n\r\nh3. Expected Results\r\n\r\nYou should see a new item call \"test\" in the *Releases* attribute on the Jira issue sidebar\r\n\r\n!Screen Shot 2021-05-19 at 3.08.06 pm.png!\r\nh3. Actual Results\r\n\r\nNothing shows up in Releases attribute on the Jira Issue sidebar\r\nh3. Workaround\r\n\r\nUnfortunately, we don't have a permanent workaround for it except that reduces the commits in the deployment. To do that, you can either break down the deployment into smaller pieces or you can utilise the `squash` function during PR merge, so it won't include that many commits in the deployment.","createDate":"2021-05-19T05:00:52.000+0000","comments":[{"text":"Could you please elaborate on the priority and on the status of this ticket?\r\n\r\nWe have been told by the Atlassian support team to use automation to move our tickets from \"Ready for deployment\" to \"Done\" columns. However, this issue means that we can't rely on it, because quite often our releases contain big features which were developed separately and the tickets are not being marked as Deployment production due to only looking at 100 commits. It is a major issue for us.","author":"igor"}]},{"summary":"When the names on \"Users on plan\" list have accent or start with uppercase or lowercase, the alphabetical order changes","key":"BCLOUD-21063","url":"https://jira.atlassian.com/browse/BCLOUD-21063","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe names on the \"Users on plan\" list are listed in alphabetical order, but when the name has an accent or starts with a capital letter, the order is changed\r\nh3. Steps to Reproduce\r\n\r\n1. Add users whose names have accents or lowercase and uppercase letters to your plan. Example:\r\n * Luís\r\n * Luiz\r\n * leonardo\r\n\r\n2. Open the *Users on Plan* page\r\nh3. Expected Results\r\n\r\nThe correct order, in this case, should be: \r\n leonardo\r\n Luís \r\n Luiz\r\nh3. Actual Results\r\n\r\nThe names are not showing in the correct alphabetical order\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-05-17T19:53:09.000+0000","comments":[]},{"summary":"Pipelines endpoint returns invalid URLs for self and steps fields","key":"BCLOUD-21062","url":"https://jira.atlassian.com/browse/BCLOUD-21062","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * Responses from the *Pipelines* endpoint returns an invalid URL for both *self* and *steps* fields which can't be accessed with regular *<username:apppassword>* authorization header;\r\n * \r\n{code:java}\r\n\"links\": {\r\n        \"self\": {\r\n          \"href\": \"https://bitbucket-pipelines.prod.public.atl-paas.net//rest/1.0/accounts/{workspace_uuid}/repositories/{repo_uuid}/pipelines/{build_uuid}\"\r\n        },\r\n        \"steps\": {\r\n          \"href\": \"https://bitbucket-pipelines.prod.public.atl-paas.net//rest/1.0/accounts/{workspace_uuid}/repositories/{repo_uuid}/pipelines/{build_uuid}/steps\"\r\n        }\r\n      } {code}\r\n\r\nh3. Steps to Reproduce\r\n # Make an API call to the *Pipelines* endpoint for any repository\r\n # In the results, you will see a *Links* object with two URLs: *self* and *steps;*\r\n # Try to make a GET request to that URL;\r\n\r\nh3. Expected Results\r\n\r\nResults should use the actual *api.bitbucket.org* domain, making it possible to fetch results from these URLs;\r\nh3. Actual Results\r\n\r\nFetching the build and the steps from these URLs fail with authorization error:\r\n{code:java}\r\n{\r\n  \"error\": {\r\n    \"message\": \"Unauthorized\",\r\n    \"detail\": \"No authorization provider header specified.\",\r\n    \"data\": {\r\n      \"key\": \"rest-service.rest-service.unauthorized\",\r\n      \"arguments\": {}\r\n    }\r\n  }\r\n} {code}\r\nh3. Workaround\r\n\r\nDirectly fetch the build and steps from our API sub-domain;\r\n{code:java}\r\n/2.0/repositories/{workspace}/{repo_slug}/pipelines/{pipeline_uuid} {code}\r\nand\r\n{code:java}\r\n/2.0/repositories/{workspace}/{repo_slug}/pipelines/{pipeline_uuid}/steps/ {code}","createDate":"2021-05-17T15:06:54.000+0000","comments":[]},{"summary":"When a commit message is large on a pull request Pipeline build not triggered ","key":"BCLOUD-21021","url":"https://jira.atlassian.com/browse/BCLOUD-21021","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWith the current limitation to our webhook service. Merging a pull request with a large commit message or description fails to trigger an automatic build. \r\n\r\nh3. Steps to Reproduce\r\n# Configure bitbucket-pipelines.yml file to trigger a build when a pull request is merged to target branch\r\n# Open a pull request with a large commit message (e.g. 4K lines) or description\r\n# Merge the pull request\r\n\r\nh3. Expected Results\r\n* Upon merging the pull request a build should automatically trigger on the target branch\r\n* Customers should be notified that the payload is too large and has failed to trigger an automatic build. Doing so will provide a better experience overall. At the moment, there is no indication of what a build was not triggered when customers expect a build to trigger automatically. \r\n\r\nh3. Actual Results\r\n* Build is not triggered on the target branch \r\n* No indication into why the build was not triggered automatically \r\n* This is caused by \"Webhook payload is limited to 256 KB. Webhooks may silently fail to trigger if their payload is too large.\" - Reference: [Troubleshooting webhooks|https://support.atlassian.com/bitbucket-cloud/docs/troubleshoot-webhooks/]\r\n\r\nh3. Workaround\r\nManually trigger build on the branch: Navigate to the \"Branches\" page,  then click on the triple dots (...) at the end of the branch, and then \"Run pipelines for a branch\".","createDate":"2021-04-29T18:19:00.000+0000","comments":[]},{"summary":"Code Search does not include personal workspaces ","key":"BCLOUD-21020","url":"https://jira.atlassian.com/browse/BCLOUD-21020","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nEven if users have access to any personal workspace (outside of their own personal workspace), users will not be able to use the Code Search functionality on those workspaces.\r\nThe dropdown to select the workspace on the Code Search page will not show personal workspaces, only shared workspaces and the personal workspace of the currently logged-in user.\r\nh3. Steps to Reproduce\r\n # Get access to any personal workspace (the workspace that is created automatically under your account when you create it) outside of your own personal workspace\r\n # Go to Code Search\r\n # Click on the dropdown to select the workspace - You will be unable to see it there.\r\n\r\nh3. Expected Results\r\n\r\nAll workspaces that the user has access to must show up on code search.\r\nh3. Actual Results\r\n\r\nPersonal workspaces do not appear on Code Search's dropdown.\r\nh3. Workaround\r\n\r\nThere are three workarounds here:\r\n1. Click on the search icon. Below the search field, you'll see a magnifying glass symbol followed by \"Search for code in <current workspace name>\". Click on this line. If your current workspace is personal, it will take you to the search page. By default, the personal workspace is selected from the dropdown, although it may not be listed there due to this bug.\r\n2. Go directly to the following URL, switching the UUID for the UUID of the workspace that you want to search for:\r\n{code:java}\r\nhttps://bitbucket.org/search?account=%7B<UUID>%7D\r\n{code}\r\n3. Move the repositories from the personal workspace to a shared workspace. This will take some work, but it doesn't require the use of any workaround afterwards.","createDate":"2021-04-29T14:14:17.000+0000","comments":[]},{"summary":"You are able to commit without issue keys in the message via PR from a forked repository to a repo that has the \"Require issue keys in commit messages\" enabled","key":"BCLOUD-21003","url":"https://jira.atlassian.com/browse/BCLOUD-21003","type":"Bug","priority":"","description":"h3. Issue Summary\r\nYou are able to commit without issue keys in the message via PR from a forked repository to a repo that has the \"Require issue keys in commit messages\" enabled. \r\nh3. Steps to Reproduce\r\n # Enable the \"Require issue keys in commit messages\" option in a repository \r\n # Fork this repo \r\n # Do not enable the \"Require issue keys in commit messages\" option in the forked repository \r\n # Commit any changes in the forked repository without adding any issue key in the message \r\n # Create a Pull Request without any issue key and, in the destination branch field, select a branch from the original repository \r\n# Merge the Pull Request  \r\n\r\nh3. Expected Results\r\nYou shouldn't be able to create a PR to the repository that has the \"Require issue keys in commit messages\" enable if you don't have an issue key in your commit\r\n\r\nh3. Actual Results\r\nYou are able to merge the PR without any issue keys in the commit message into a repository that has the \"Require issue keys in commit messages\"  option enabled \r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-04-22T19:29:48.000+0000","comments":[]},{"summary":"Searching file with certain substrings in Code Search has an inconsistent result","key":"BCLOUD-20980","url":"https://jira.atlassian.com/browse/BCLOUD-20980","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Code search feature on Bitbucket cloud is giving an inconsistent result while searching with certain substrings of a file name.\r\n\r\nh3. Steps to Reproduce\r\n # In a repository, create a file with the name \"*_TestFileConnectionWhenContext_Builder.java*\"\r\n # Go to the repository *Source* tab\r\n # Use the Code search feature by clicking the (+) icon on the left side of the repository\r\n # Search the following substring:\r\n ** TestFileConnectionWhenContext = {color:#57d9a3}Found 1 file{color}\r\n ** TestFileConnectionWhenContextBuilder = {color:#57d9a3}Found 1 file{color}\r\n ** TestFileConnectionWhenContextBuild = {color:#de350b}*No result*{color}\r\n\r\nh3. Expected Results\r\n\r\nSearching using substrings of a file name is working\r\nh3. Actual Results\r\n\r\nSearching using substrings of a file name is _not_ working\r\n\r\nh3. Workaround\r\nSearch files locally using a 3rd party code editor","createDate":"2021-04-13T00:53:48.000+0000","comments":[{"text":"\"Workaround: Search files locally using a 3rd party code editor\"\r\nThis misses the point: we need (and used to have, before we migrated from Bitbucket Server to Cloud) the ability to search across *all* our repos at once - doing this locally is not feasible, as we'd have to check out every project in turn and search it separately.","author":"Richard Inglis"}]},{"summary":"Pipelines scripts execution time is not match to the total step time","key":"BCLOUD-20979","url":"https://jira.atlassian.com/browse/BCLOUD-20979","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIf a Pipelines build is still running in the background and it hit the max build time limit (e.g. using *max-time* config), the total time it takes to run the script doesn't match the total step execution time.\r\nh3. Steps to Reproduce\r\n\r\nIn a repository with Pipelines enabled, copy the configuration below and run a Pipeline build\r\n * \r\n ** \r\n{code:java}\r\nimage: atlassian/default-image:2\r\n\r\npipelines:\r\n  default:\r\n    - step:\r\n        name: 'Test'\r\n        max-time: 2\r\n        script:\r\n          - sleep 5m\r\n          - echo \"done\"\r\n{code}\r\n\r\nh3. Expected Results\r\n\r\nThe scripts/commands total time are matched with the total step execution time\r\nh3. Actual Results\r\n\r\nThe scripts/commands total time are _not_ matched with the total step execution time\r\n\r\n*Result:*\r\n !pipelines_execution_time.png|width=548,height=240!\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2021-04-13T00:21:27.000+0000","comments":[{"text":"I have the suspicion that script instructions report the CPU time while step summary report real time. This would explain slow network and disk operations causing a big mismatch in reported times, not to say plain sleep/wait programs.\r\n\r\n \r\n\r\nThis raises big questions about how these times affect the billing of the monthly pipeline minutes quota. What time does Atlassian actually charge you, CPU or real? If Atlassian charges for real time, why would they report CPU times?\r\n\r\nCould script instructions report both real and CPU times?","author":"dmoller"},{"text":"Still having this issue","author":"Jack Pitot de La Beaujardiere"}]},{"summary":"If a repo was transferred, deployment permissions for admins won't work correctly","key":"BCLOUD-20918","url":"https://jira.atlassian.com/browse/BCLOUD-20918","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen a repository is transferred, and a deployment environment exists with the \"Only allow admins to deploy to this environment\" restriction activated, admins will be unable to perform deployments to said environment.\r\nAn error message will state, when attempting to deploy to this environment as an admin, that you do not have access to this environment, regardless of your access level to this repo.\r\n\r\nh3. Steps to Reproduce\r\n # Create a deployment environment on a repository, and check \"Only allow admins to deploy to this environment\". Make sure you are an admin of this repository.\r\n # Transfer the repository where the deployment env was created between workspaces. Make sure to be an admin on the target repo for the transfer\r\n # Attempt to perform a deployment to the target environment\r\n # You will see an error message stating that you are not an admin.\r\n\r\nh3. Expected Results\r\nAdmins should be allowed to deploy to the created environment.\r\n\r\nh3. Actual Results\r\n\r\nThe below error message is thrown in Pipelines:\r\n{noformat}\r\nThe Pipeline was paused because <user_who_triggered_the_build> tried to deploy, but only an admin can deploy to <target_environment>.\r\n{noformat}\r\n\r\nThis error message will show up regardless of whether you are an admin or not.\r\n\r\nh3. Workaround\r\nRe-creating the deployment environment in the transferred repository should fix the issue.","createDate":"2021-03-22T12:50:01.000+0000","comments":[{"text":"I have also experienced this issue. I am currently trying the Workaround.\r\n\r\nEDIT: I was able to create a new production deployment that was able to deploy properly with admin privilege restrictions. ","author":"Nick Main"},{"text":"Seeing that this one is in the \"Long term backlog\", which means it's possible it won't receive a fix for a long time, has anyone thought of at least mentioning this issue and the workaround on your [official documentation page|[https://support.atlassian.com/bitbucket-cloud/docs/transfer-repository-ownership/|https://support.atlassian.com/bitbucket-cloud/docs/transfer-repository-ownership/]?]]?\r\n\r\nWe took many steps to check things before we actually migrated heaps of repositories, but this one got us by surprise and wasn't obvious. It took way more time to figure out what was going on than it should have been.","author":"Jarek"}]},{"summary":"\"Next\" URL response for repository variables and deployments endpoints are incorrect","key":"BCLOUD-20910","url":"https://jira.atlassian.com/browse/BCLOUD-20910","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen querying for repository variables and deployments on a repository wit additional results, you will get a pagination with a next URL to query the remaining results.\r\n\r\nHowever, for repository variables endpoint, it is providing an incorrect URL such as:\r\n{panel}\r\nhttps://SOME_INVALID_DOMAIN_HERE/rest/1.0/accounts/...\r\n{panel}\r\n\r\nOR\r\n{panel}\r\nhttps://SOME_INVALID_DOMAIN_HERE/rest/2.0/accounts/...\r\n{panel}\r\n\r\nAlthough the URL endpoint is clearly incorrect, using it throws the following error:\r\n {\r\n \"error\": {\r\n \"data\": {\r\n \"arguments\": {},\r\n \"key\": \"rest-service.rest-service.unauthorized\"\r\n },\r\n \"detail\": \"No authorization provider header specified.\",\r\n \"message\": \"Unauthorized\"\r\n }\r\n }\r\nh3. Steps to Reproduce\r\nRepository variables:\r\n # Create more than 10 repository variables on a repository\r\n # Run the GET API for /pipelines_config/variables/\r\n # Check the \"Next\" URL given by the above API\r\n\r\nDeployments\r\n# Create multiple deployments in a repository \r\n# User the GET method on the {{/2.0/repositories/workspace/repos_slug/deployments/}} endpoint\r\n# Check the \"Next\" URL given by the above API\r\n\r\n\r\nh3. Expected Results\r\nThe next URL would be given for the /pipelines_config/variables/ or /deployments/ endpoints.\r\n\r\nh3. Actual Results\r\nThe next URL is given for {{/rest/1.0/accounts/}} or {{/rest/2.0/accounts/}} endpoints.\r\n\r\nh3. Workaround\r\n\r\nThe workaround is to add a larger pagelen to get the results without the use of the \"Next\" URL.\r\n Example:\r\n{code:java}\r\ncurl -X GET -u $USERNAME:$APP_PASSWORD \"https://api.bitbucket.org/2.0/repositories/$WORKSPACE_ID/$REPO__SLUG/pipelines_config/variables/?pagelen=100\"\r\n{code}","createDate":"2021-03-18T18:27:36.000+0000","comments":[{"text":"Note that the suggested 'workaround' of increasing pagelen isn't feasible if you don't know how big a page size you need ahead of time or if you're otherwise constrained by how much information can be loaded at a given time.","author":"Scott Haug"}]},{"summary":"Manually running Pipelines builds in Safari throws \"An unidentified error occurred. Please try again.\"","key":"BCLOUD-20875","url":"https://jira.atlassian.com/browse/BCLOUD-20875","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAs per the title, if you attempt to run a Pipelines build manually, you will see the following error message, in case you are using Safari:\r\n{code}\r\nAn unidentified error occurred. Please try again.\r\n{code}\r\n\r\nThe build will execute just fine, but the error will always show up.\r\n\r\nh3. Steps to Reproduce\r\n # Log in to Bitbucket using Safari;\r\n # Navigate to any repository that has a valid bitbucket-pipelines.yml configuration in it;\r\n # Click on the Pipelines tab > Run Pipelines;\r\n # Run any Pipelines build;\r\n # You will see the following error message\r\n{code}\r\nAn unidentified error occurred. Please try again.\r\n{code}\r\n\r\nh3. Expected Results\r\nThe Pipelines build will execute normally, without any error messages showing up in the UI\r\n\r\nh3. Actual Results\r\nThe below exception is thrown:\r\n{noformat}\r\nAn unidentified error occurred. Please try again.\r\n{noformat}\r\n\r\nh3. Workaround\r\n\r\nUse either Chrome or Firefox, which don't have this error message, or ignore the error message altogether.","createDate":"2021-03-08T17:53:42.000+0000","comments":[{"text":"Seems to be fixed. Thank you.","author":"Artem Barbaruk"},{"text":"We are experiencing very same error in all browsers. But error is not deterministic. Error occurs 8 out of 10 attempts - on same branch, same commit (so no code change in repository).\r\n\r\nIt seems to me as a frontend / javascript error, but there is so many errors in browser's console, that I'm not able to investigate further.\r\n\r\n[ Wanted to post screenshot, but I'm not allowed to. ]","author":"Dušan Hlavatý"},{"text":"Hi [~vbapat],\r\n\r\nThe user did log out and log back but the issue still persists ","author":"Lavanya K"},{"text":"Hi [~e0a7f4d48596],\r\n\r\nThis is leo liang from pipeline team. I hope you are doing well. From the description you wrote, it doesn't seem to related to this issue. But do you encounter the error in other branch/commits?\r\n\r\nIf not, then it is very likely caused by other issue, and I would suggest you raise a new issue in \r\n\r\n[https://getsupport.atlassian.com/secure/Dashboard.jspa]\r\n\r\nIn there you should be able to upload screenshot etc, and our support team can help you with initial investigation for the issue.\r\n\r\nCheers\r\n\r\nLeo Liang","author":"lliang2"},{"text":"HI Leo Liang,\r\n\r\nI can confirm that this issue repeats for all my repositories/branches where I use manual pipeline.","author":"victor_savostin"},{"text":"Having the same issue on all of our repositories","author":"Serge"},{"text":"Issue still exists. MacOS 10.14.6. Safari 14.0","author":"Владимир Чупринский"},{"text":"Issue still exists.  MacOS 13.0.0 / Safari 16.1","author":"jschwartz73"},{"text":"I also have exactly the same problem. macOS 13.2 / Safari 16.3 (18614.4.6.1.5)","author":"Patrick Steiner"}]},{"summary":"bitbucket-pipelines.yml doesn't respond after some inactivity ","key":"BCLOUD-20854","url":"https://jira.atlassian.com/browse/BCLOUD-20854","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nbitbucket-pipelines.yml doesn't respond after a few mins of inactivity\r\nh3. Steps to Reproduce\r\n # Open bitbucket-pipelines.yml file in the Pipeline editor in UI\r\n # Change a couple of characters in the main content textbox. Leave the cursor inside the textbox.\r\n # Go away from the editor for 3-4 mins\r\n # Come back to the editor and hit a key on the keyboard. The content editor disappears and is replaced by a perpetual loading screen.\r\n\r\nh3. Expected Results\r\n\r\nThe user should be able to update the bitbucket-pipelines.yml file and previous changes should be preserved\r\nh3. Actual Results\r\n\r\nThe content editor disappears and is replaced by a perpetual loading screen.\r\nh3. Workaround\r\n\r\nCopy bitbucket-pipelines.yml file from the web editor into a local text editor, copy the changes, and commit","createDate":"2021-03-02T00:30:35.000+0000","comments":[{"text":"This could be any file open in the code editor.","author":"Viktor Kaup"}]},{"summary":"Pipeline intermittently keep running for long time and complete with \"Configuration error\"","key":"BCLOUD-20788","url":"https://jira.atlassian.com/browse/BCLOUD-20788","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: (no)\r\nh3. Steps to Reproduce\r\n\r\nDefine a pipeline that meet following condition:\r\n * Have a condition step that would be skip during pipeline execution\r\n * Have steps before condition step that started more than 2 hours, and had a step running 2 hours after pipeline start for more than 5 mins .\r\n * Have step after condition step\r\n\r\nHere is an example pipeline definition that can reproduce the issue:\r\n\r\n \r\n{code:java}\r\n    reproduce-not-run-state:\r\n      - step:\r\n          name: 1st long running step\r\n          script:\r\n            - sleep 1h\r\n            - sleep 30m\r\n      - step:\r\n          name: 2st long running step\r\n          script:\r\n            - sleep 1h\r\n            - sleep 30m\r\n      - step:\r\n          name: conditional step\r\n          script:\r\n            - echo \"conditional step\"\r\n          condition:\r\n            changesets:\r\n              includePaths:\r\n                - bin/**\r\n      - step:\r\n          name: not-run step\r\n          script:\r\n            - echo \"should be in not run state\"{code}\r\nPipeline will errored with \"Configuration error: The pipeline has entered an unknown state. Please rerun or contact support.\" after all steps completed before conditional step.\r\n\r\nThis symptom can also happen with pipelines that include manual deployment step:\r\n{code:java}\r\n    reproduce-not-run-state:\r\n      - step:\r\n          name: 1st round step\r\n          script:\r\n            - echo \"step for 1st run\"\r\n            - sleep 2m\r\n      - step:\r\n          name: manual deploy\r\n          deployment: a\r\n          script:\r\n            - echo \"manual deploy step\"\r\n            - sleep 5m\r\n          trigger: manual\r\n      - step:\r\n          name: conditional step\r\n          script:\r\n            - echo \"conditional step\"\r\n          condition:\r\n            changesets:\r\n              includePaths:\r\n                - bin/**\r\n      - step:\r\n          name: not-run step\r\n          script:\r\n            - echo \"should be in not run state\" {code}\r\nh3. Expected Results\r\n\r\nPipeline can complete with out error\r\nh3. Actual Results\r\n\r\nPipeline is error with: \"Configuration error: The pipeline has entered an unknown state. Please rerun or contact support.\"\r\n\r\nAnd step after conditional step is left in NOT_RUN state\r\nh3. Workaround\r\n\r\nUser can rerun the pipeline and it will continue from first NOT_RUN state","createDate":"2021-02-04T17:10:03.000+0000","comments":[{"text":"I've seen this A LOT in the past few weeks.","author":"Jeff"},{"text":"I agree that this is occurring more frequently.  For me, this seems to happen whenever I have a step (integration tests) that takes longer than 35 minutes, and the subsequent conditional step (apply SQL patches) is skipped, and the following step (push the code live) is manual.  I've even tried to insert a dummy automated step between the integration tests and the SQL patch to see if it helps, but got the same failure today.","author":"robbytx"},{"text":"I see the workaround says:\r\n{quote}User can rerun the pipeline and it will continue from first NOT_RUN state\r\n{quote}\r\nBut my pipeline (ID = \\{8b8ead7c-3be2-42ea-9cd1-9da93e9c1f1f}) just got stuck with this, and I have two options – one is to \"Rerun failed steps\" and the other is to \"Rerun entire pipeline\". When I click \"Rerun failed steps\", then the UI just hangs and the network tab shows a 403 response with the body:\r\n{code:javascript}\r\n{\r\n  \"error\": {\r\n    \"message\": \"Forbidden\",\r\n    \"detail\": \"Can not rerun pipeline because a step is in status PENDING\",\r\n    \"data\": {\r\n      \"key\": \"result-service.step.invalid-step-rerun-state\",\r\n      \"arguments\": {}\r\n    }\r\n  }\r\n}\r\n{code}\r\nIf I click \"Rerun entire pipeline\", then of course it reruns the entire pipeline. So there is in fact no workaround, other than rerunning the pipeline, and trying to make sure it completes in the allotted time by skipping portions of some steps (in my case, force the pipeline to skip running integration tests).","author":"robbytx"},{"text":"My use case is that our integration tests take time and are costly so we run them on branches before merge, and then we run them once on the main branch before releasing to Production. But not everything that merges to main gets pushed to Production – that's a manual decision and performed at an off-peak time – and we have a conditional step to apply SQL patches to the production database, so that's how we end up in this state.\r\n\r\nHere's a summary of the main branch pipeline:\r\n # Initial: Build the code\r\n # Auto: Deploy to QA (Staging) environment\r\n # Manual: Run integration tests in all our target browsers\r\n # Condition (also Manual): Apply SQL patches to Production DB\r\n # Manual: Deploy to Production environment\r\n\r\nIt's very easy to see that more than two hours can pass between the initial build and running the integration tests. This is why we hit this case almost inevitably, unless we've already decided that the main branch is ready to go to Production, and we skip running the integration tests.","author":"robbytx"},{"text":"This has been a real blocker for us and borks the entire pipeline. We can't rerun failed steps so it just takes out any usability of the particular PR's pipeline. ","author":"Robert.Lichenstein"},{"text":"I've not seen this issue in awhile – so long that I thought it had been resolved – but the issue just occurred with a pipeline whose manual step I continued this morning after a delay of almost 8 hours.","author":"robbytx"}]},{"summary":"API Calls that take more than 30 seconds fail with HTTP","key":"BCLOUD-20733","url":"https://jira.atlassian.com/browse/BCLOUD-20733","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAPI Calls that take more than 30 seconds fail with HTTP 500 instead of timeout message\r\n\r\nh3. Steps to Reproduce\r\n # Make an API call that would take more than 30 seconds (ex: huge commits messages)\r\n\r\n\r\nh3. Expected Results\r\n# a timeout error is shown \r\n\r\nh3. Actual Results\r\n# HTTP 500 error\r\n\r\n\r\nh3. Workaround\r\nNo workaround as this is a limitation of Bitbucket API\r\n\r\n*EDIT* Can this API timeout limit be increased past 30 seconds? For users with large workspaces who need to make calls to list repositories/users, the amount of JSON data returned in the HTTP response can actually cause this timeout to occur and does not support scalability very well.","createDate":"2021-01-13T17:40:28.000+0000","comments":[{"text":"This affects a large enterprise in the finance industry that we provide with a pull request workflow solution.\r\nIMO Bitbucket cloud should support paginated workspace group API as it does for [workspace users|https://developer.atlassian.com/cloud/bitbucket/rest/api-group-workspaces/#api-workspaces-workspace-members-get] for enterprise level clients.\r\nIf Atlassian was truly interested in moving enterprise size Bitbucket customers to the cloud - the demand for a simple paginated API can't be of *LOW* priority!","author":"Ulrich Kuhnhardt [IzymesCo]"},{"text":"Awesome support from Ankit (Atlassian)\r\n==== snip ======\r\nThere is a work-around for [https://jira.atlassian.com/browse/BCLOUD-20733] to make this {*}performant{*}: workaround is to use the {{exclude_members=true}} querystring param. This will then list all of the groups without members, which is {*}performant{*}. Then, for each group get the members with a separate API request.\r\n\r\nFetch all groups from [https://api.bitbucket.org/1.0/groups/|https://bitbucket.org/!api/1.0/groups/]<workspace>?exclude_members=true\r\nIteratively fetch all group members from [https://api.bitbucket.org/1.0/groups/|https://bitbucket.org/!api/1.0/groups/]<workspace>/<group>/members\r\n==== end snip ====\r\n\r\n ","author":"Ulrich Kuhnhardt [IzymesCo]"}]},{"summary":"Pipeline onboarding Wizard doesn't appear ","key":"BCLOUD-20669","url":"https://jira.atlassian.com/browse/BCLOUD-20669","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPipeline onboarding Wizard doesn't appear when Click on _*Repository settings->PIPELINES->Settings*_ and enable the Pipeline by toggling _*Enable Pipelines*_\r\nh3. Steps to Reproduce\r\n # Create a new repository\r\n # Click on _*Repository settings->PIPELINES->Settings*_\r\n # Toggle the button _*Enable Pipelines*_ to enable the Pipeline\r\n # A screen appears to configure and commit a *bitbucket-pipelines.yml* file into the repository. Click on _*Configure bitbucket-pipelines.yml*_ button\r\n\r\nh3. Expected Results\r\n\r\nThe Pipeline onboarding Wizard should appear to configure the Bitbucket Pipeline\r\nh3. Actual Results\r\n\r\nWhen you click on the Configure bitbucket-pipelines.yml button, the pipeline onboarding Wizard does not appear, instead, you get the message: \"Hooray! You've successfully set up Pipelines.\"\r\nh3. Workaround\r\n\r\nYou can follow one of the following workarounds:\r\n # Create bitbucket-peipelines.yml file manually and commit into the repository\r\nYou can use the [Validator|https://bitbucket-pipelines.prod.public.atl-paas.net/validator] to check the file.\r\n # Or follow the steps mentioned in the below documentation link to set up the pipelines:[Get started with Bitbucket Pipelines|https://support.atlassian.com/bitbucket-cloud/docs/get-started-with-bitbucket-pipelines/] ","createDate":"2020-12-14T19:45:54.000+0000","comments":[{"text":"Any ETA for this? I'm not going to wait around for a fix obviously but it would be nice if this was working before my next project.\r\n\r\n \r\n\r\n_Edit_ - Honestly, you guys should take down the page that relates the docs for this until you get this fixed. There's little more frustrating than docs that outline something that isn't there.","author":"Scott Douglas Serage"},{"text":"Hi,\r\n\r\n \r\n\r\nAny updates on this please. I am also having issues creating new projects and pipelines","author":"Nakul Bali"},{"text":"Agree with @Scott Douglas Serage. The documentation should not be suggesting a feature that does not exist in prod yet... I just spent 10 minutes trying to figure out how come I wasn't getting a UI prompt like the docs said I should until I found this bug report. ","author":"Yann Van Crombrugge"},{"text":"Once again:\r\n\r\n\"Wait, what's going on, why is this happening?\"\r\n\r\nduckduckgo\r\n\r\n\"Oh, Atlassian community, thanks!\"\r\n\r\n\"Oh, link to yet another unassigned bug report/ticket.\"\r\n\r\n/smh","author":"Walter Davies"}]},{"summary":"Artifacts generated during builds show wrong created data","key":"BCLOUD-20655","url":"https://jira.atlassian.com/browse/BCLOUD-20655","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAfter generating an artifact, it is possible to download it and check it locally, however, its creation date is wrong.\r\neg.\r\n !image-2020-12-09-09-54-57-932.png|thumbnail! \r\n\r\nh3. Steps to Reproduce\r\n# Create an artifact using Pipelines\r\n#* {code}pipelines:\r\n  branches:\r\n    master:\r\n      - step:\r\n          name: Test\r\n          script:\r\n            - echo \"Test Push\"\r\n            - git remote set-url origin ${BITBUCKET_GIT_SSH_ORIGIN}\r\n            - git remote -v\r\n            - touch texting.txt\r\n          artifacts: # defining the artifacts to be passed to each future step.\r\n          - texting.txt{code}\r\n# Download the artifact\r\n# Unzip the artifact\r\n# Check its creation date\r\n\r\nh3. Expected Results\r\n\r\nCreation date be the same as the day that it was created\r\n\r\nh3. Actual Results\r\n\r\nThe creation date is 31 December 1969 21:00\r\n\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-12-09T13:03:25.000+0000","comments":[{"text":"are there any updates about this issue? ","author":"Robert C"}]},{"summary":"Merge race condition can result in merge commits being created twice if squash merge strategy is used","key":"BCLOUD-20652","url":"https://jira.atlassian.com/browse/BCLOUD-20652","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen two users attempt to merge a pull request within two seconds of each other, it will result in the creation of two separate merge commits. \r\nh3. Steps to Reproduce\r\n # Create a PR\r\n # Open the PR in two separate windows and click on the merge button. This will open the merge window \r\n # Select the Squash merge in both the merge window \r\n # Click on both Merge button within a very small window \r\n # Observe that both merges are successful and there are two commits created. One commit is empty and another one has the data\r\n\r\nh3. Expected Results\r\n\r\nIt should create only one merge commit\r\nh3. Actual Results\r\n\r\nTwo separate merge commits are created. One of the commits is empty.\r\nh3. Workaround\r\n\r\nIgnore the empty commit.","createDate":"2020-12-07T07:37:13.000+0000","comments":[{"text":"I can report that this can happen even if the same user clicks the merge button multiple times before the merge has happened. I got double merge commits after I pressed a second time ~1-2 minutes after since the merging spinner was gone (I assumed something failed and I had to click again).","author":"Sebastian"}]},{"summary":"Able to use API to update \"deployment_gate_enabled\" flag without Jira integration","key":"BCLOUD-20550","url":"https://jira.atlassian.com/browse/BCLOUD-20550","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWith [new ITSM feature on JSD|https://bitbucket.org/blog/a-modern-approach-to-change-management-with-bitbucket-and-jira-service-desk], additional field - \"deployment_gate_enabled\" is added to Pipelines' deployment environment.\r\n\r\nHowever, this field can be updated through API ([/2.0/repositories/<workspace>/<repo_slug>/environments/ | https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/environments/]) even thou the repository is not linked to Jira's ITSM project.\r\nThis will *block Pipelines build* from deploying to the environment with the \"Change request pending\" prompt.\r\n !image-2020-10-27-09-11-53-996.png|thumbnail! \r\n\r\nIn addition to it, it's not possible for users to check or toggle the deployment gating flag on Deployment Settings to continue with the build\r\n\r\nh3. Steps to Reproduce\r\n # Run the API [/2.0/repositories/<workspace>/<repo_slug>/environments/ | https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/environments/] with the following payload\r\n{code}\r\n{\r\n      \"deployment_gate_enabled\": true,\r\n      \"environment_type\": {\r\n        \"type\": \"deployment_environment_type\",\r\n        \"name\": \"Test\",\r\n        \"rank\": 0\r\n      },\r\n      \"name\": \"Test\"\r\n    }\r\n{code}\r\n(i) Repo shouldn't connect to any Jira ITSM project while reproducing the issue\r\n # Navigate to \"Repository Settings>Deployment\" and there's no option for users to toggle off the deployment gating flag\r\n !image-2020-10-27-09-14-06-333.png|thumbnail! \r\n\r\nh3. Expected Results\r\n\"deployment_gating\" flag auto-set as \"*false*\" if the repo is not linked to Jira ITSM project or Jira criteria are not met.\r\n\r\nh3. Actual Results\r\nThe API request able to parse  \"deployment_gate_enabled\" as true, which will block Pipelines build to deploy to the specific deployment environment.\r\nAnd there's no option on UI for users to turn off the feature for the deployment environment.\r\n\r\nh3. Workaround\r\n* UI: Re-add the deployment environment through UI\r\n* API: Run API to delete the deployment environment, then run POST request the add new deployment environment with the  \"deployment_gate_enabled\" field as \"false\"","createDate":"2020-10-27T01:38:53.000+0000","comments":[{"text":"[~rchia] I've created a ticket for JSD Flux as this is associated with the changes made to pipelines as part of their deployment gating feature. The ticket exists here: https://jdog.jira-dev.com/browse/FSD-4987","author":"James Szklarz"}]},{"summary":"Markdown failed to render properly if there are multiple lines within the code block","key":"BCLOUD-20503","url":"https://jira.atlassian.com/browse/BCLOUD-20503","type":"Bug","priority":"","description":"h3. Issue Summary\r\nMarkdown failed to render properly if there are multiple lines within the code block\r\n\r\nh3. Steps to Reproduce\r\n # Create Readme.md\r\n # Add the following markdown\r\n{code}\r\n# Test\r\n    ```sh\r\n    # Test\r\n    # Test\r\n    sudo apt install \r\n\r\n    # Test\r\n    # Test\r\n    sudo apt-get update\r\n    ```\r\n{code}\r\n\r\nh3. Expected Results\r\nThe Markdown is properly render\r\nh3. Actual Results\r\nThe markdown is not render properly\r\n\r\nh3. Workaround\r\nThere Workaround is to split the code block into multiple part rather than one code block","createDate":"2020-10-07T06:35:52.000+0000","comments":[{"text":"I think while creating a fenced code block, there shouldn't be any leading spaces. this could be created with something like:\r\n\r\n \r\n{code:java}\r\n# Test\r\n```\r\n    sh\r\n    # Test\r\n    # Test\r\n    sudo apt install \r\n\r\n    # Test\r\n    # Test\r\n    sudo apt-get update\r\n```\r\n{code}\r\n \r\n\r\n ","author":"Mert Çalışkan"},{"text":"Spaces are important when you want to keep a numbered list ordered.\r\n\r\nCompare following examples:\r\n  \r\n{noformat}\r\n1. First item\r\n1. Second item\r\n```sh\r\nsudo apt-get update\r\nsudo apt install\r\n```\r\n1. Third item\r\n{noformat}\r\nSome render tools will render this as \"1, 2, code block, 3\", which is correct. But others, Bitbucket including, will render \"1, 2, code block, 1\". To fix that you can add few spaces to the code block:\r\n{noformat}\r\n1. First item\r\n1. Second item\r\n    ```sh\r\n    sudo apt-get update\r\n    sudo apt install\r\n    ```\r\n1. Third item\r\n{noformat}\r\nThen it will render properly in most of the tools, but once again, not in Bitbucket.\r\n\r\nChecked via\r\n * [https://markdownlivepreview.com/]\r\n * [https://dillinger.io/]\r\n * and few IDE preview plugins","author":"Nikolai Pesochenskii"},{"text":"So... I and co-workers have been struggling with this for quite some time. \"This\" being the inability to embed code (or log) snippets in PR descriptions in BitBucket. That is FUNDAMENTAL functionality for a code review system.\r\n\r\nI finally decided to really dig in and came across this ticket...\r\n\r\nHow on earth do you classify this as low priority and not fix it for 3 YEARS?!?!? Again, this is basic, fundamental, necessary functionality for posting and reviewing PRs.\r\n\r\nAnd how can you call \"break the snippet up (and create a separate snippet for each of many lines)\" a workaround? That's a complete joke.\r\n\r\nThis ranks up there with the Confluence team thinking it is perfectly acceptable for embedding callout quotes in lists to not work right.\r\n\r\nCome on Atlassian...","author":"stan.marshall"},{"text":"Any updates on this? I agree with stan.marshall that this should be considered higher than a \"low\" priority. At least a feasible workaround would be greatly appreciated.","author":"Jon Cantey"}]},{"summary":"Comment on a Pull request is in \"Sending\" status when the destination branch is deleted","key":"BCLOUD-20488","url":"https://jira.atlassian.com/browse/BCLOUD-20488","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nComment on a Pull request is in \"Sending\" status when the destination branch is deleted\r\nh3. Steps to Reproduce\r\n\r\nAdd a comment on a pull request and the comment is in \"Sending\" status under the following scenarios:\r\n\r\n1) Source branch is deleted\r\nDestination branch is deleted\r\n*Bug is reproducible*\r\n\r\n2) Source branch exists\r\nDestination branch is deleted\r\n*Bug is reproducible*\r\nh3. Expected Results\r\nComment should be added successfully\r\nh3. Actual Results\r\n!image-2020-09-28-13-14-30-834.png|width=372,height=125!\r\nh3. Workaround\r\n\r\n Currently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-09-28T07:45:11.000+0000","comments":[]},{"summary":"Occasionally missing Pipelines build logs from the UI","key":"BCLOUD-20351","url":"https://jira.atlassian.com/browse/BCLOUD-20351","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Build step logs generated from Bitbucket pipelines are sometimes incomplete and at times missing from the UI. However, we can obtain the complete logging by download the build log file. That said, it hampers the users from arriving at the error initially.\r\nh3. Steps to Reproduce\r\n # Step 1 Run the pipeline BUILD\r\n # Step 2 The Build steps hits a failure and generates console logs\r\n # Step 3: The logs generated by the failures are inconsistent/Missing\r\n\r\nh3. Expected Results\r\n\r\nThe logs on the UI should include all the activity and help locate the point of failure if any.\r\nh3. Actual Results\r\n\r\nWe see that the logs are missing and not completely available on the UI\r\nh3. Workaround\r\n\r\n\r\n Use the API to automate the logs to be downloaded and stored which can the catalogued per step. The {color:#00875a}GET{color} method to obtain the logs using the below [Download Logs using the API |https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/pipelines/%7Bpipeline_uuid%7D/steps/%7Bstep_uuid%7D/log]","createDate":"2020-08-04T08:49:33.000+0000","comments":[]},{"summary":"\"Recent repositories\" feature does not work correctly","key":"BCLOUD-20341","url":"https://jira.atlassian.com/browse/BCLOUD-20341","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe \"Recent repositories\" feature in the dashboard does not work correctly. It shows only the last visited repository when you open the repositories by direct link.\r\nh3. Steps to Reproduce\r\n # Open repository by direct link one by one:\r\n Example:\r\n [https://bitbucket.org/mirror/git]\r\n [https://bitbucket.org/mirror/cassandra]\r\n [https://bitbucket.org/mirror/apache-directory-server]\r\n # Go to Bitbucket Dashboard [https://bitbucket.org/dashboard/overview].\r\n # You will see there is only one repository in the \"Recent repositories\" block. \r\n\r\nh3. Expected Results\r\n\r\nUnder the \"Recent repositories\" section, I expect to see the 3 repositories which I have visited recently.\r\nh3. Actual Results\r\n\r\nThere is only one repository(the last visited repository) shown under \"Recent repositories\"\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior, however, in order to keep track of the last changes done to repositories that you have access to, you should be able to check the page:\r\n* https://bitbucket.org/dashboard/repositories","createDate":"2020-07-31T11:46:07.000+0000","comments":[{"text":"+1\r\n\r\nThanks for pointing this out, I thought I was missing something here. For me it is even weirder: only the first is ever changed/updated, the other ones should not be there. Funnily enough, two are repos I created 2.5 years ago on the same day.\r\n\r\nIt seems to me that only the last repo is updated, and the rest is seemingly filled with what it was at some point in the past","author":"rene.brandt"}]},{"summary":"PR approvals and unapprovals are not always shown","key":"BCLOUD-20237","url":"https://jira.atlassian.com/browse/BCLOUD-20237","type":"Bug","priority":"","description":"h3. Issue Summary\r\nPR approvals and unapprovals are not always shown\r\n\r\nh3. Steps to Reproduce\r\n# Create a PR\r\n# Approve the PR\r\n# Check the Activity tab\r\n\r\nh3. Expected Results\r\n# Looking at the PR's activity tab, we can see the approve and unapprove events\r\n\r\nh3. Actual Results\r\n# The approval and unapproval events are not shown\r\n\r\nh3. Workaround\r\n\r\n Currently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-06-19T08:11:59.000+0000","comments":[{"text":"Hi,\r\n\r\nI want to let you know that this doesn't only impact the UI. The API itself ({color:#505050}https://api.bitbucket.org/2.0/repositories/WORKSPACEID/REPO/pullrequests/49/activity{color}) does not return the approvals. This is breaking some internal audits on our side.\r\n\r\nThe situation got worst in the last two weeks, even PR that used to show approvals now don't have it anymore","author":"-"}]},{"summary":"Source view URL of branch name with slashes broken  (e.g. \"feat/foo\")","key":"BCLOUD-20223","url":"https://jira.atlassian.com/browse/BCLOUD-20223","type":"Bug","priority":"","description":"Related issue: BCLOUD-408\n\nI maintain a popular utility called [{{git-open}}|http://github.com/paulirish/git-open] which opens a browser to your bitbucket/github/gitlab to view whatever branch you have checked out.\n\nBitbucket makes this pretty difficult if there&#x27;s a slash in the branch name. (Which it surprisingly common :)\n\n----\nFor example, in the {{Guyzmo/git-repo}} project, following [the official docs|https://confluence.atlassian.com/bitbucket/hyperlinking-to-source-code-in-bitbucket-824476709.html] I can view the {{devel}} branch with this URL:\\\\\n[{{https://bitbucket.org/guyzmo/git-repo/src/devel}}|https://bitbucket.org/guyzmo/git-repo/src/devel]\n\nEasy enough, but here&#x27;s the problem:\n\nFor the {{bugfix/conftest_fix}} branch, bitbucket provides a 404 for a similar URL: [{{https://bitbucket.org/guyzmo/git-repo/src/bugfix/conftest_fix}}|https://bitbucket.org/guyzmo/git-repo/src/bugfix/conftest_fix]\\\\\nAnd we get the same result if we URL-encode the slash: [{{https://bitbucket.org/guyzmo/git-repo/src/bugfix%2Fconftest_fix}}|https://bitbucket.org/guyzmo/git-repo/src/bugfix%252Fconftest_fix]\n\n_When using the site to view the branch we get a {{/src/<commit hash>/?at=<branch/name>}} URL.  So while this is a workaround, it makes for more awkward ergonomics. :/_\n\n----\nIdeally, a fix would make either of the above 404&#x27;ing URLs start to work. Thanks!","createDate":"2017-06-18T19:54:22.000+0000","comments":[{"text":"Hi Paul, this should be addressed in the new source browser view that you can opt into via Bitbucket Labs in settings. I am going to close this issue, if you continue to have the problem please open another so we can determine a proper solution. Thanks\n","author":"AmberVH"},{"text":"@avanhecke, the new source browser view *does not solve this problem at all*…\n\nWith the new source browser view, a link of this form _still does not work_ *if* the {{BRANCHNAME}} contains one or more {{/}} characters. (As @paulirish reported, URL-encoding the slash in the branch name makes no difference; still broken.)\n\n{code}\nhttps://bitbucket.org/OWNER/PROJECT/src/BRANCHNAME/PATH_TO_FILE.EXT\n{code}\n\nWhat made you think that the new source browser view _would_ fix this?\n\nPlease reopen rather than make users jump through hoops to duplicate issues that were closed erroneously!\n","author":"Daniel Lenski"},{"text":"Hi Daniel,\n\nI apologize for the mixup. I believe Amber was thinking of [this ticket|BCLOUD-15914], which is similar and which we did recently address.\n\nI&#x27;ve re-opened this ticket, as it is something we want to explore supporting as we continue to work on the new source browsing experience.\n","author":"pwilliams"},{"text":"Thanks, @peterwilliams-atl and @avanhecke.\n\nbq. I&#x27;ve re-opened this ticket, as it is something we want to explore supporting as we continue to work on the new source browsing experience.\n\n\nIt seems like the solution should be just as simple as (percent-decode the branch name from the URL\" before feeding it into {{git rev-parse}})… thereby allowing the web view to handle branch names with slashes, or any other unusual characters in them.\n\nE.g. decode the branch portion of {{https://bitbucket.org/OWNER/REPO/src/BRANCH/PATH/FILE.EXT}} so that {{BRANCH=&#x27;feature/cr%C3%B6mul%C3%A8nt%C3%9Franchname&#x27;}} will lookup the Git branch named {{feature/crömulèntßranchname}}. This is the standards-compliant way of allowing {{/}} characters in URL path components.\n","author":"Daniel Lenski"},{"text":"We have the same issue (need to access a branch named &#x27;prt/feature/pr-17&#x27; for example),  is there a plan to fix this?\n","author":"Francois Lauzon"},{"text":"is there a fix planned for this?\n","author":"luisl"},{"text":"I believe that we might need to grab our pitchforks and torches and angrily mass outside Castle Atlassian in order to get some attention for this issue. :man_facepalming:\n\n!http://4.bp.blogspot.com/_PvaC8eRNFWc/THmIg18NFyI/AAAAAAAAA88/R6uCYU4ifQ8/s1600/Simpsons+Movie+Angry+Mob.jpg!\n","author":"Daniel Lenski"},{"text":"Really annoying when trying to (perma-)link files in a specific branch (with a slash in it) in other documentation resources.","author":"Patrick Bergner"},{"text":"I am looking at a solution that walks the combination of the branch name and path looking for matches to allow for the above URL configurations to work. We already have some built functionality used in other places on the platform doing (nearly) exactly that that I've manually confirmed works when applied to the source browser.\r\n\r\nSo still early on in the effort to allow this (and the priority for getting this fix out admittedly remains low), but it is getting actively worked on and there's a relatively clear path for the fix.","author":"Brandon Reppert"},{"text":"This issue has been a significant blocker for being able to share links in my team. \r\n\r\n \r\n\r\nWhile this issue is still in progress and not resolved, any chance the docs page could be updated also to reflect \"/\" characters not being supported?: https://support.atlassian.com/bitbucket-cloud/docs/hyperlink-to-source-code-in-bitbucket/ \r\n\r\n \r\n\r\nIt is a fairly standard practice to group branches under a \"something/\" prefix, and it therefor seems list a pretty large omission to not have this called out in the docs.\r\n\r\n \r\n\r\nJust my two cents.","author":"AJ Steers"},{"text":"A while back, I opened a separate issue (BBS-132636) in regards to referencing html documents generated from markdown files in branches with \"/\". That issue is now closed in support of this one.\r\n\r\nThe sad thing is that \"/\" is even in the default branching model when configuring Bitbucket Git repositories.\r\n[https://bitbucket.org/blog/introducing-bitbucket-branching-model-support]\r\n\r\nI agree with @AJ Steers that this caveat should be mentioned in the user documentation until this issue is solved.","author":"Kristofer Lundgren"},{"text":"[~a32c6a1f96a9] [~017f1b97ccf8] I agree that we should add this caveat to the documentation and I'll work to get that put in there shortly.\r\n\r\nApologies for how long this ticket has been in progress – I've fixed the core issue but there are quite a few assumptive places where this issue needs to be addressed and I've had this ticket on the back-burner (but not out of my mind) for a while now. I'll look to make some progress in earnest here soon or find someone else who has the availability to do so.","author":"Brandon Reppert"},{"text":"Hello,\r\n\r\nSorry for the lack of traction this issue has been given. For full transparency this was a ticket I started looking at \"on the side\" when I joined Atlassian, and I haven't been able to give it the attention it needs. I'm going to move this back into our backlog to more accurately reflect the state.\r\n\r\nI'm doing this in order to be able to focus on highly voted BCLOUD issues to close those gaps. We've updated the documentation to include this caveat, and I'm not going to forget about this issue, but (as I'm sure is clear by the lack of progress) this isn't isn't a priority at the moment.","author":"Brandon Reppert"},{"text":"Any updates on this? I'm running into this problem when trying to get a list of files from a particular branch of a repo via the API. Example for branch called bugfix/branch-name\r\n\r\nThis...\r\n{code:java}\r\nhttps://api.bitbucket.org/2.0/repositories/{workspace}/automationservices-docker-agents/src/bugfix/branch-name/?pagelen=100{code}\r\nreturns...\r\n{code:java}\r\n{    \"data\": {        \"shas\": [            \"bugfix\"        ]    },    \"type\": \"error\",    \"error\": {        \"message\": \"Commit not found\",        \"data\": {            \"shas\": [                \"bugfix\"            ]        }    }}\r\n{code}\r\n \r\n\r\nTried the ?at= workaround but it just returns the source from the master branch...\r\n{code:java}\r\nhttps://api.bitbucket.org/2.0/repositories/{workspace}/automationservices-docker-agents/src/?at=bugfix/branch-name&pagelen=100\r\n{code}\r\n \r\n\r\n ","author":"Ben Verwey"},{"text":"In one week we have one year \"short term backlog\" anniversary.\r\n\r\n \r\n\r\nFor me this is a major bug because I use gitflow and group by branches with \"feature/\" and other prefixes. Also your sourcetree tool support this kind of grouping.\r\n\r\n \r\n\r\nIf this bug remains we will migrate to another hosting service.","author":"Andre Schlegel-Tylla"},{"text":" \r\n{code:java}\r\nWhen using the site to view the branch we get a /src/<commit hash>/?at=<branch/name> URL. So while this is a workaround, it makes for more awkward ergonomics.{code}\r\n \r\n\r\nThis could be made a viable workaround if we could use meta {color:#0747a6}{{<commit>}}{color} like {color:#0747a6}{{HEAD}}{color} or maybe {color:#0747a6}{{latest}}{color} instead of the hash. But I suspect the {color:#0747a6}{{?at=<branch>}}{color} doesn't actually scope anything but just sets the picker box on the page, so that may not be an easy fix either.\r\n\r\nI have a need to preserve these links for audit purposes, and it's a pain to go back and update them if the branch gets a new commit.","author":"David Becker"},{"text":"I have to agree with @David_Becker here.\r\n\r\n> I have a need to preserve these links for audit purposes, and it's a pain to go back and update them if the branch gets a new commit.\r\n\r\nNot being able to link to a branch in documentation is disastrous for my team. We had someone follow a link which included an old commit hash and chaos cascaded. This is NOT a cosmetic issue. It is crippling. I've had to self host a repo webserver while we wait for a solution.\r\n\r\nThis is exactly why I warn organizations about purchasing solutions for which there are community supported alternatives. The users affected by a bug/deficiency need not be at the mercy of gatekeepers who are unaffected. It's *not a question of if* you will find yourself in this powerless position. It's *a question of how much* it will cost you.","author":"Bruno Bronosky"},{"text":"Once again, Atlassian fails to meet their customers needs. I'm tired of paying for this garbage, FIX THIS PLEASE.\r\n\r\n \r\n\r\nHow come YEARS go by without major things like this being addressed or even acknowledged.\r\n\r\n \r\n\r\nYou guys don't act like a company that should be listed on the NASDAQ. ","author":"Sam"},{"text":"I agree. Very disappointing","author":"Andre Schlegel-Tylla"},{"text":"Hey you slackers at Atneverian! Isn't it strange that this bug exists when:\r\n\r\n\r\n * the gitflow dialog in SourceTree suggests branch names with slashes\r\n * The SourceTree branch view is aware of slashes since it provides a tree view where slashes delineate levels in the hierarchy\r\n * The \"Branching model' page under project settings on the website is also is aware of slashes\r\n\r\nIt seems kind of stupid to have built all that functionality, but somehow simple URLs to these resources are broken. \r\n\r\n \r\n\r\nPerhaps an employ could at least comment on this thread? Are your offices empty? There are a lot of users here that ARE TIRED OF THIS ECHO CHAMBER!!!! There so many issues for major bugs that have been open for YEARS! How about you earn your keep and support the garbage you sold us? \r\n\r\n \r\n\r\nSincerely,\r\n\r\nA very disgruntled PAYING customer","author":"Sam"},{"text":"Hey @Sam, I'm as critical as the next guy, but I'm not sure getting petty, snippy and just plain rude is the best way to go. Ever head the phrase \"you catch more flies with honey than vinegar?\"\r\n\r\nAll in all, I am in awe of everything their suite of tools is capable of. Does it have some warts, for sure, but most things work as advertised.","author":"David Becker"},{"text":"I respectfully disagree. People reasonably tend to get quite upset when they are unreasonably losing their money. \r\n\r\nWe have paid good money for a broad set of Atlassian services for nearly a decade. I have opened and contributed to issues that go ignored for years.  That's an absurd amount of time in any industry, let alone software. I'm tired of being treated this way when my company has invested so heavily in Atlassian's platform.\r\n\r\nWe have built many automated workflows that rely on these naming conventions that seem to be quite common. This bug (and many others like it) are killing my team's productivity and costing us real cash. I'm livid.","author":"Sam"},{"text":"This bug prevents linking content from Bitbucket to Confluence using branch name.\r\n\r\nI'm using Confluence cloud Asciidoc macro to load an Asciidoc file from Bitbucket to Confluence. On branches without slash on their name I can link a file in a branch, so the latest commit is always loaded regardless of how many commits are pushed, but when there is slash on the name, I have to update all pages using Asciidoc with Bitbucket and slash as source branch, meaning when updating the repository I have to also manually update the source url in the Confluence macros, meaning it is so impractical that I would consider it impossible for humans without external scripts.","author":"Jimi Viita-aho EFECTE"},{"text":"For some reason, the urlencode trick works when viewing raw files. For example:\r\n\r\n[https://bitbucket.org/guyzmo/git-repo/raw/bugfix%2Fconftest_fix/tests/conftest.py]\r\n\r\nSo, Atlassian guys could check out that code and integrate the URL decoding solution (one line or function, i suppose) to src view, too. Although, there must have been a reason to use a more complicated way ({_}{{?at=<branch/name>)}}{_} instead.","author":"Antti Boman"},{"text":"This is a CRITICAL bug affecting usability of the tool. Linking to the latest version of the source (or most commonly some .md file) is a key for easily maintaining documentation references.  It is also related to the inexplicable lack of native linking from Confluence to Bitbucket. On top of it, this bug make a 3rd party solution from [mibex|https://docs.mibexsoftware.com/include-bitbucket-confluence/include-bitbucket-for-confluence-cloud] effectively useless.  Atlassian - please get it together...","author":"Paul Bieganski"},{"text":"is there an update / workaround for this issue? as mentioned here in the thread - it's a big issue with using the API..","author":"Eden Hermelin"},{"text":"I don't quite get why the url-encoded approach wouldn't work - it should be extremely easy to implement since existing routing behaviour will not be affected - all you need is to urldecode() the same path segment currently in use.\r\n\r\n \r\n\r\nWe've been waiting 7 years (and counting) for a 5-minute change.","author":"Christian Sciberras"},{"text":"Me too on this one.\r\n\r\nI've been affected when writing release notes. We keep those in Bitbucket too, and so I'd like to be able to put a link to the Readme for an item in another repo, on a {{release/}} branch  in the description. The link is commit-scoped, so I have to update the release note by hand all the time.","author":"Hayden Clark"},{"text":"I'm always shocked to see such simple tickets unsolved for almost a decade.\r\n\r\nThe {{raw}} endpoint does work with {{{}%2F{}}}.","author":"jbsilva"}]},{"summary":"Create branch should automatically suggest the repository linked in the project","key":"BCLOUD-20191","url":"https://jira.atlassian.com/browse/BCLOUD-20191","type":"Bug","priority":"","description":"h3. Summary\r\nThe *Create branch* option in the Jirs issue development panel is not suggesting the repository linked in the project.\r\n\r\n\r\nh3. Steps to Reproduce\r\n# Create a new repository in Bitbucket\r\n# Integrate Bitbucket with Jira in DVCS\r\n# In a project, link the new repository created > In the *Development Tools*, click on *Create branch* option\r\n# In the *Create branch* window, the repository linked to the project is not suggested automatically\r\n\r\nh3. Expected Results\r\nIn the *Create branch* window, the repository linked in the project should be suggested automatically\r\n\r\nh3. Actual Results\r\nThe first repository (alphabetical order) is shown by default\r\n\r\n\r\nh3.Workaround\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-05-26T11:30:55.000+0000","comments":[{"text":"Could I get an update here please?\r\n\r\nNote this behaviour was working previously, but stopped working at some point, so it appears to be a regression in Bitbucket Cloud.","author":"David Arnold"},{"text":"Hello [~darnold3],\r\n\r\nThis currently works as it was designed, let me explain why.\r\n\r\nThe relation between Jira and Bitbucket is established not on the _project – repository_ level but rather on the _instance (site) – workspace_ level. So, all repositories of a Bitbucket workspace become “available” in any project of a Jira site. Moreover, there might be multiple workspaces connected to the same Jira site (and vice versa, but that’s out of scope right now).\r\n\r\nSo, with the current state of things *Create branch* action in the _Development tools_ indeed brings you to the so called _global_ branch creation screen in Bitbucket, where aside from the branch type and name you also need to select a repository to create it in. When we worked on that screen, we decided not to limit the choice of repositories (as users might wonder why it is limited) but rather help by preselecting the relevant repository based on the Jira issue they came from. Does this make sense?\r\n\r\nWe did that by storing the repository which user selected for the given Jira project last time, so next time they want to create a branch against an issue from the same project, we use that information and preselect the same repository from the list. Unfortunately, the implementation of this last bit is becoming suboptimal. These days the browsers are enforcing the rules around expiration time of the local storage records, and the problem is that local storage is where we store the relation between Jira project and last selected repository which I described above. So my guess would be that you face missing saved last repository selection and hence have to pick the repository again.\r\n\r\nI will keep this ticket open to reflect the status of a fix for the local storage expiration time issue.\r\n\r\nCheers,\r\nDaniil\r\n\r\n ","author":"Daniil Penkin"},{"text":"Any update on this?","author":"Yurii Chaikivskyi"}]},{"summary":"Newlines are not supported in details field in Pipeline Reports API","key":"BCLOUD-20132","url":"https://jira.atlassian.com/browse/BCLOUD-20132","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nNewlines are not supported in details field in Pipeline Reports API\r\n\r\nThe [API documentation|https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/commit/%7Bcommit%7D/reports/%7BreportId%7D] says for the details field \"A string to describe the purpose of the report. This string may contain escaped newlines and if it does it will display the content accordingly..\" but it doesn't work.\r\nh3. Steps to Reproduce\r\n # Call the Reports API endpoint to create Pipeline reports as mentioned in the [API documentation|https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/commit/%7Bcommit%7D/reports/%7BreportId%7D]\r\n # Make sure the details fields has new line characters \"\\n\"\r\n\r\nh3. Expected Results\r\n\r\nThe detail field in the generated report should have new line as mentioned in the API call\r\nh3. Actual Results\r\n\r\nThe detail field in the generated report doesn't have new line as mentioned in the API call\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2020-05-08T16:07:12.000+0000","comments":[{"text":"Hello Atlassian folks,\r\n\r\nAny plan on tackling that? It causes formatting issues for PR decoration, it seems like it has been [fixed|https://jira.atlassian.com/browse/BSERV-12633] on the Bitbucket Server ","author":"Jacek Poreda"}]},{"summary":"Cannot create protected branches using the OAuth consumer belonging to the team account/workspace.","key":"BCLOUD-20121","url":"https://jira.atlassian.com/browse/BCLOUD-20121","type":"Bug","priority":"null","description":"Currently, it is not possible to create a protected branch(branch permission set up to restrict access to certain users only) using the API using the Team account/workspace OAuth credentials. We get BRANCH_PERMISSION_VIOLATED error.\r\nh3. Steps to reproduce the error:\r\n * Create oAuth for the TEAM workspace atlas_team123\r\n * Create Access token using oAuth key and secret of atlas_team123 TEAM workspace\r\n{code:java}\r\ncurl -X POST -u key:secret https://bitbucket.org/site/oauth2/access_token -d grant_type=client_credentials\r\n{code}\r\n\r\n * Create repo_bbs repository in atlas_team123 TEAM account\r\n * Setup branch permission for *release/** branch and give Administrators group only write access in atlas_team123/repo_bbs\r\n * Administrators group has only one individual account and not TEAM workspace atlas_team123\r\n * Make an API call to create a branch using the access token for atlas_team123 TEAM account \r\n{code:java}\r\ncurl 'https://api.bitbucket.org/2.0/repositories/atlas_team123/repo_bbs/refs/branches' -A 'bitbucket-api-client/1.1' -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'Authorization: Bearer xxxx' -X POST -d '{\"name\":\"release\\/20.20.20\",\"target\":{\"hash\":\"master\"}}'\r\n{code}\r\n*You will receive the below error*\r\n{code:java}\r\n{\"data\": {\"key\": \"BRANCH_PERMISSION_VIOLATED\"}, \"type\": \"error\", \"error\": {\"message\": \"You are not allowed to create a branch that matches the pattern \\\"release/*\\\".\", \"data\": {\"key\": \"BRANCH_PERMISSION_VIOLATED\"}}}$ {code}\r\n\r\nThis is because we have a branch permission to restrict access to certain users only and team accounts/workspace cannot be added as users in the branch permission.\r\n\r\nHence even though the team account/workspace is the owner of the repository the team account's OAuth cannot be used to create the restricted branch.\r\n\r\nThis affects the customers as they need to add a service account to the group that has branch permission and use the service account's OAuth credentials to create the branch.\r\n\r\nIt would be good to have the ability to use the team account/workspace OAuth instead.\r\n\r\n ","createDate":"2020-05-05T13:16:09.000+0000","comments":[{"text":"My family was in need of a break from the city, so I decided to search for a quiet place where we could relax. I came across [https://alessandra.aktis.villas|https://alessandra.aktis.villas] while browsing, and it looked just right. The site had a lot of detailed info on the villas, including the different family-friendly amenities, like a private pool and large garden spaces. There were also some interesting discounts for longer stays and family packages that made it affordable. With all the clear descriptions and great offers, it was an easy decision to book.","author":"Jamiel Vanser"},{"text":"I wanted to find a website where I could get reliable updates on games and other related resources. That’s how I came across [https://plinkopakistan.games/] . The site is easy to navigate and provides updates on topics that are actually helpful. I also liked that they mention bonuses and other offers, which made the site even more interesting.","author":"Jamiel Vanser"},{"text":"Hey guys, for a boho, earthy vibe, I recommend [https://aktis.design/en/4-outdoor-furniture] . Her designs are full of vibrant colors, lush greenery, and global-inspired decor. I purchased some of her wallpapers and throw pillows for my bedroom, and it instantly added personality to the space. Her blog and books are also packed with tips for creating cozy, layered interiors that feel personal and inviting.","author":"Bogdan Kvintov"},{"text":"You should check out [https://aviatorgame.com.pk/apps/4rabet/]. They have apps with great bonuses for first-time users. I signed up recently and got a fantastic welcome bonus. The app has a sleek design, and the games are super fun. I especially love their slots and live sports options. It’s definitely worth exploring if you’re into online betting.","author":"Maxwell Anderson"},{"text":"From the moment I started engaging with this online casino community, I felt a strong sense of excitement and involvement. [https://aviatorgame.in/game-review/|https://aviatorgame.in/game-review/] The interactive graphics and smooth gameplay have captivated me. I found that the balance between chance and strategy makes every moment unpredictable and fun. The guides and community advice available truly enhance my decision-making skills. This deep dive into the world of online casino games has been both challenging and rewarding, growing my interest and knowledge over time.","author":"Carlos Gucci"}]},{"summary":"Bitbucket browser session gets logged out when an API request is made using the same credentials","key":"BCLOUD-19943","url":"https://jira.atlassian.com/browse/BCLOUD-19943","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you use your credentials to authenticate via API, the same logged in credential on UI session gets logged out. This is an intermittent issue and does not happen all the time.\r\n\r\nExample : Intermittently making any API request using a credential, the browser session which is logged in via the same user shows \"Something Went Wrong\". A refresh shows that the account is logged out.\r\n * The Atlassian Account is still logged in\r\n * Only Bitbucket Account is logged out.\r\n\r\nh3. Steps to Reproduce\r\n # Login to Bitbucket and open Repository in Source View\r\n # Create a PR via API Request using same username and password as you are logged in the browser. (POST or GET) - It does not seem specific to PR API, It could be other API as well.\r\n # Navigate to another view on the Bitbucket UI. Example : on your Bitbucket repository Source View, click Pull Request on the UI, you will see \"Something Went Wrong\"\r\n # Refresh the page and see that you're logged out.\r\n # Click Login and you are redirected back into the account without prompting credentials\r\n ** This indicates that the Atlassian Account session was still valid as opposed to Bitbucket Account Session\r\n\r\nh3. Expected Results\r\n * Regardless of using the same credential on API request, the UI session shouldn't get logged out\r\n\r\nh3. Actual Results\r\n * User session gets logged out on the UI\r\n * Console shows the following error :\r\n * \r\n{code:java}\r\n{\r\n  \"data\": {\r\n    \"key\": \"INSUFFICIENT_RIGHTS\"\r\n  },\r\n  \"type\": \"error\",\r\n  \"error\": {\r\n    \"message\": \"Access denied. You must have write or admin access.\",\r\n    \"data\": {\r\n      \"key\": \"INSUFFICIENT_RIGHTS\"\r\n    }\r\n  }\r\n}\r\n{code}\r\n\r\nh3. Workaround\r\n * There's no direct workaround to this issue.\r\n * You will have to refresh the page and login once again by clicking the Avatar (bottom left) > Login.","createDate":"2020-02-26T01:18:48.000+0000","comments":[]},{"summary":"Image diff functionality in Bitbucket Old PR UI does not work ","key":"BCLOUD-19929","url":"https://jira.atlassian.com/browse/BCLOUD-19929","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBlend/Split/Pixel diff buttons are not working as expected in Old PR view for images diff even for the image of same dimension. A tool tip appears for all three buttons with message- \"Split mode image diff is not available because images are not of the same dimension\" even if the images are of the same dimension.\r\nh3. Steps to Reproduce\r\n # Upload an image via a commit\r\n # Switch to a different branch and upload an edited version of the image via a new commit\r\n # Create a new pull request\r\n # Scroll to the bottom to check the image differences in the \"Files changed\" section.\r\n\r\nh3. Expected Results\r\n\r\nThe \"Blend\", \"Split\" and \"Pixel diff\" buttons should work as per functionality.\r\nh3. Actual Results\r\n\r\nThe \"Blend\", \"Split\" and \"Pixel diff\" buttons are greyed out.\r\nh3. Workaround\r\n\r\nUse new Pull request view and we are making improvements in this.","createDate":"2020-02-20T15:06:41.000+0000","comments":[{"text":"Not a bug, we haven't replicated the functionality yet. ","author":"jarredc"},{"text":"Can confirm that \"Blend\", \"Split\" and \"Pixel diff\" buttons are permanenty disabled even for images of same dimentiones:\r\n Also yesterday I wasnt able to find this ticket so fired another one with screenshot [https://getsupport.atlassian.com/servicedesk/customer/portal/11/BBS-130333\r\n\r\n]\r\n\r\n ","author":"alex@begame.nl"},{"text":"Thanks for filing this. I'm not sure we're going to fix it on the old UI, vs just make improvements to the new UI for everyone's eventual transition. I'll keep it in my backlog.","author":"jarredc"},{"text":"I'm not entirely sure if the old UI is still available, since I don't see any option to switch to the new or the old, but I still see 3 greyed out buttons. Would be very nice to get this fixed.","author":"Gijs Boer"},{"text":"This functionality is still off.\r\nIs there a planned time to enable it?","author":"Roman Karsev"},{"text":"Would be really awesome to have proper image diffs in PR reviews again!","author":"Fabian Jäger"},{"text":"Agree. This is a very powerful, important feature for PR image comparisons. Makes a difference to other PR tools.","author":"MichaelGerstmayr"}]},{"summary":"Inactive Users still shows up in Users on Plan in Account Settings","key":"BCLOUD-19926","url":"https://jira.atlassian.com/browse/BCLOUD-19926","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIn Account settings > \"Users on Plan\", if the user is *Inactive*, it shows up on that list. This can be confusing as it makes admin's think that user is still being counted against the plan on the account. \r\n\r\nHowever, the user isn't actually counted against the account plan. \r\nIf you navigate to \"Plan Details\" in Account Settings, you'll see the correct number of users on plan, which is excluding the inactive users. \r\n\r\nThis is more of a UI bug on the Users on Plan view. \r\n\r\nh3. Steps to Reproduce\r\n# Add a user to a user group in an account which has access to Private Repositories\r\n# Mark that user account as Inactive (probably a *temporary* account deletion to de-activate the account to simulate the scenario)\r\n# Access  \"Users on Plan\" view and you'll see the same user on the list of users. \r\n# Access \"Plan Details\" view and you'll see that the user count is lower than the list of users on \"Users on Plan\" as it excludes the inactive users.\r\n\r\nh3. Expected Results\r\nIt's expected to not include to Inactive users on the \"Users on Plan\" view. This should match the number of users displayed on \"Plan Details\".\r\n\r\nh3. Actual Results\r\nThe \"Inactive User\" is shown in \"Users on Plan View\"\r\n\r\nh3. Workaround\r\nThere's no workaround for this View.","createDate":"2020-02-20T00:32:22.000+0000","comments":[]},{"summary":"Garbage file intermittently counted in the repository size","key":"BCLOUD-19794","url":"https://jira.atlassian.com/browse/BCLOUD-19794","type":"Bug","priority":"","description":"h3. Issue Summary\r\nGarbage file is intermittently counted in the repository size.\r\n\r\nWhen pushing to the remote repository a GC is triggered afterwards which generates a garbage file. This garbage file is cleared on the next subsequent GC.\r\nBetween those two GC's the size of the repository is displayed incorrectly within Bitbucket UI as the garbage file size is intermittently counted towards the repository total size.\r\n\r\n\r\nh3. Steps to Reproduce\r\n * Push files to the remote\r\n\r\nh3. Expected Results\r\n* Local repository size match the repository size of the remote.\r\n\r\nh3. Actual Results\r\n* Repository size of the remote is larger than what is seen locally.\r\n\r\nh3. Workaround\r\n\r\nWorkaround is to request support to run a GC or wait until the next iteration of the GC is run after a push.\r\nIf the repository size + the garbage file size is over 2GB, which is our hard limit for repository size, the repository will be set in read only state and users will not be able to push any further and will necessarily require support assistance to clear their repository size.","createDate":"2020-01-14T20:25:16.000+0000","comments":[]},{"summary":"API and Git operations made within Pipelines build is blocked by IP whitelisting","key":"BCLOUD-19689","url":"https://jira.atlassian.com/browse/BCLOUD-19689","type":"Bug","priority":"null","description":"h3. Issue Summary\r\n\r\nAt this time, if a user clones another repository from the same workspace in pipelines with IP whitelisting enabled, they are required to whitelist the whole IP range that belongs to Bitbucket Pipelines. Considering the fact that both repositories in question belong to the same *premium workspace,* Can't the IP whitelisting feature be overridden in such cases? Or, could there be an option to just whitelist a set of repositories?\r\nh3. Steps to Reproduce\r\n * Enable IP whitelisting on the workspace 'ABC'\r\n * Go to repo 'A' and configure pipelines to clone the repo 'B'. Both repo 'A' and 'B' belongs to workspace 'ABC'\r\n * The pipeline will error out with the following error: \"{color:#ff8b00}_To access this repository, an admin must whitelist your IP._{color}\"\r\n\r\nh3. Expected Results\r\n * Both repositories are part of the same workspace, therefore cloning another repo from the same workspace should be allowed and IP whitelisting check should be overridden.\r\n\r\nh3. Actual Results\r\n * The user is required to add the Bitbucket pipelines IP range to the IP whitelisting section before cloning another repo within pipelines on the same workspace.\r\n\r\nh3. Workaround\r\n * To add the Bitbucket pipelines IP range to the IP whitelisting section\r\n ** \r\n{code:java}\r\n34.199.54.113/32\r\n34.232.25.90/32\r\n34.232.119.183/32\r\n34.236.25.177/32\r\n35.171.175.212/32\r\n52.54.90.98/32\r\n52.202.195.162/32\r\n52.203.14.55/32\r\n52.204.96.37/32\r\n34.218.156.209/32\r\n34.218.168.212/32\r\n52.41.219.63/32\r\n35.155.178.254/32\r\n35.160.177.10/32\r\n34.216.18.129/32\r\n{code}\r\n\r\n ","createDate":"2019-11-29T09:26:30.000+0000","comments":[{"text":"I've raised a bug for this here https://softwareteams.atlassian.net/browse/BBCFR-1460","author":"James Szklarz"},{"text":"One thing here to consider is that adding the Pipelines IP range to the whitelist would kinda defeat the purpose of the whitelist. Effectively it would grant all Pipelines builds access (at least visibility) to the workspace - which the whitelisting tries to avoid. \r\nThis is may be acceptable for some customers that use whitelisting, but others might prefer the whitelisting to be respected in a more strict manner.  ","author":"Jeroen De Raedt"},{"text":"Hi all, is there any update on this?\r\n\r\nAdding 15 IP addresses to the IP Whitelist is a very hard sell for our company, it's quite a security risk. We require private repos, and the submodules we use are also within the same workspace. It seems odd that we have to whitelist external IP addresses (from my company's perspective) to make the build pipeline work.","author":"Carl Cook"},{"text":"Just to add some more details here, it looks like the list of addresses recently changed. For us, the first symptom was a broken pipeline, and it took a long time to trace this back to changed internal IP addresses within Atlassian (and no notification of changed IP addresses).\r\n\r\nThere has to be a better way!","author":"Carl Cook"},{"text":"IP whitelisting works by comparing the IP address of a request to a list of approved IP addresses. If the IP address is not on the list, the request is blocked. In the case of [Sloterman|https://sloterman-greece.gr/] pipelines, API and Git operations are typically made from a variety of IP addresses. This is because casinos often use a variety of cloud-based services, which can be accessed from anywhere in the world.","author":"alexbelov11"},{"text":"I’ve always wanted to buy a property abroad but didn’t know where to look. Finding a good website with real listings was harder than I thought. Then I found [https://cy.estate|https://cy.estate/] . The site is easy to use, with many filters and up-to-date offers. Also site information about different areas and investment options. A great tool for searching(y)","author":"Stanisław Szymański"}]},{"summary":"Inconsistency in Code search","key":"BCLOUD-19661","url":"https://jira.atlassian.com/browse/BCLOUD-19661","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen I search \"backend.tu.ts.egym.coffee\" in the Bitbucket code search I retrieve inline code result that matched the string as shown in the screenshot 1.png\r\n\r\nWhen I change the search to \"tu.ts.egym.coffee\" I retrieve only files whose name has \"tu.ts.egym.coffee\", it does not show the file which has words that match tu.ts.egym.coffee\r\nh3. Steps to Reproduce\r\n # In the code search, search for  *backend.tu.ts.egym.coffee*, it will show the file which has the string backend.tu.ts.egym.coffee. See screenshot 1.png\r\n # If you search for *tu.ts.egym.coffee*, it shows only files whose name has tu.ts.egym.coffee, but not the file which has the string backend.tu.ts.egym.coffee\r\n See screenshot 2.png\r\n\r\nh3. Expected Results\r\n\r\nWhen you search for *tu.ts.egym.coffee*, it should show files whose name has tu.ts.egym.coffee and also the file which has the string backend.tu.ts.egym.coffee \r\nh3. Actual Results\r\n\r\nWhen you search for *tu.ts.egym.coffee*, it shows only files whose name has tu.ts.egym.coffee, but not the file which has the string backend.tu.ts.egym.coffee \r\nh3. Workaround\r\n\r\n1. Search for *tu\\.ts\\.egym\\.coffee* instead of *tu.ts.egym.coffee*, ** it works as expected.\r\n\r\nSee screenshot 3.png\r\n\r\n2. for the syntax with Class1.Class2RRRR, we suggest using the same syntax as a phrase search, in the following way: \"Class1 Class2\" this should help with finding the results you are looking for until our team addresses this issue. ","createDate":"2019-11-20T13:20:22.000+0000","comments":[{"text":"We just noticed that *tu\\.ts\\.egym\\.coffee* also does not lead to the expected result. It actually gives us too many results, as it also includes results only matching *egym*. I would expect results matching exactly the search-term.","author":"Michael Münzer"},{"text":"The query is very important in the searching. If you are typing an accurate query it will give you the same result, otherwise, it will give a lot of different similar results for you. Now you can follow [uk coffee trends|https://coffeextraction.com/coffee-trends/uk-coffee-trends-in-2020-to-watch-out/] to make your coffee better. Algorithms are too good to pick your idea so don’t worry there are chances of your results every time.","author":"Nathan Lade"},{"text":"Can you try as *workaround* searching for\r\n\r\n\"tu ts egym coffee\"\r\n\r\n(replaced dot with space and surround with quotes)?\r\n\r\nWe had similar problem when searching for \"com.ibm.db2.jcc:db2jcc\" which finds nothing but \"com ibm db2 jcc db2jcc\" finding the file contents.\r\n\r\nIn my opinion prio is not low because not finding +exact specified words+ in a search is a no-go. (take a look at the google search, that's [usable|https://www.google.com/search?q=%22com.ibm.db2.jcc:db2jcc%22] !","author":"Stefan C."}]},{"summary":"BITBUCKET_COMMIT returns short form instead full for `pipelines.pull-requests:`","key":"BCLOUD-19393","url":"https://jira.atlassian.com/browse/BCLOUD-19393","type":"Bug","priority":"","description":"{code}\r\npipelines:\r\n  pull-requests:\r\n    &#39;**&#39;:\r\n{code}\r\n\r\nreturns\r\n\r\n!3176947538-image.png|thumbnail!\\\\\r\n‌\r\n\r\ninstead full form like within branch driven pipeline\r\n\r\n{code}\r\npipelines:\r\n  default:\r\n{code}\r\n\r\n!831595848-image.png|thumbnail!\r\n\r\nh3. Expected:\r\nAlways return full form.\r\n\r\nh3. Workaround\r\n\r\nAdd the following command in your script, prior to using the BITBUCKET_COMMIT variable.\r\n{code}\r\n- export BITBUCKET_COMMIT=$(git log -1 --format=\"%H\" $BITBUCKET_COMMIT 2>/dev/null)\r\n- echo $BITBUCKET_COMMIT{code}\r\n\r\nBITBUCKET_COMMIT will then return the full hash.","createDate":"2019-08-29T10:22:35.000+0000","comments":[{"text":"Thanks for reaching out and for bringing this to our attention.\n\nI&#x27;ve raised a ticket in the team&#x27;s backlog to update this - however, given our current projects, this is low priority for us. I&#x27;ll keep you updated on our progress via this issue.\n\nIn the meantime, can you share some more info on why the full commit hash is required?\n","author":"Aneita"},{"text":"@aneita Pity to hear this. It seem like very severe bug. Think about it. Same env var returns different value. This is an ultimate bug I’d say. I am really surprised you say “not important”.\\\\\nTo tag images. One tool picks up commit hash. Then pipeline tries to fetch image by full commit hash which (SURPRISE) sometimes full, sometimes not.\n\nCheers.\n","author":"Serge Nazin"},{"text":"Attachment 3176947538-image.png has been added with description: Originally embedded in Bitbucket issue #19393 in site/master","author":"Serge Nazin"},{"text":"Attachment 831595848-image.png has been added with description: Originally embedded in Bitbucket issue #19393 in site/master","author":"Serge Nazin"},{"text":"How can I edit the description of this ticket after migration? As an author I still seem not having edit bottom.","author":"Serge Nazin"},{"text":"@Aneita Yang\r\nping","author":"Serge Nazin"},{"text":"I was able to work around this with the following bash hack.\r\n\r\nI agree this is a very annoying bug.\r\n\r\n \r\n\r\n{{export COMMIT_ID=$(git log -1 --format=\"%H\" $BITBUCKET_COMMIT 2>/dev/null)}}\r\n\r\n \r\n\r\n ","author":"Kayton"},{"text":"@kayton1 the workaround works great, but indeed this bug is very annoying :( Now we have to patch all our projects...","author":"Filippo Tessarotto"},{"text":"Ran into this issue as some tooling (Applitools Eyes) relies on the long form of the commit SHA.","author":"Philip Bordallo"},{"text":"Hi!\r\n\r\nWe've also run into this issue while using [percy.io|https://percy.io/] - a visual testing tool. It too relies on the long form of the commit SHA.\r\n\r\nAdding onto people's comments, I'd also like to point out that in the _*first*_ pipeline run of the pull request, the commit SHA is short. However, re-running the pipleine results in the long form commit SHA.\r\n\r\nI also found this issue: https://jira.atlassian.com/browse/BCLOUD-18543, which seems related but was marked as invalid and closed by the reporter themselves.\r\n\r\nConsidering this issue has been getting pushed back for a year and a half and has been impacting third party tools that integrate with BitBucket, it'd be nice to see this fixed soon!","author":"Nakshatra Mukhopadhyay"},{"text":"It's hard to find a good reason why this year-and-a-half old bug hasn't been fixed yet, as it seems the fix is really simple. At least providing a normalized variable should be fairly simple. I'm sure many paying users (us included) find themselves wasting a considerable amount of time trying to figure obscure issues with third party tools that are caused by this bug.","author":"Amit Edelshtein"},{"text":"Getting closer to 2 years... We use the commit while building a docker image and then to deploy the image via the hash in a manual pipeline but now the image tags are mismatched","author":"Mathis König"},{"text":"We just ran into this issue, and we're also using the commit while building a docker image. I confirm rerunning the pipeline results in the expected long form of the hash.","author":"Eldad Zack"},{"text":"+1 - it's a really annoying behaviour.","author":"Elderama"},{"text":"Just lost hours not understanding why sometimes my git fetch was working and sometimes it didn't. Turned out that it was caused by $BITBUCKET_COMMIT getting truncated...\r\n\r\nNow I have to fetch everything instead of just the stuff related to the commit of my pipeline. Please fix it!","author":"Romain T."},{"text":"Spent hours troubleshooting why git fetch got flaky error, turns out it was this bug.\r\n\r\nThis bug only needs ~10 minutes to fix. It's pity that the bug has kept open almost 4 years and has wasted so many people hours in troubleshooting and working around. :(","author":"Aaron.Luo"},{"text":"Migrated to github and problem is solved.","author":"Eldad Zack"},{"text":"This is why we have a #gitlab-appreciation channel","author":"richard.smith"},{"text":"That is weird inconsistent behaviour, just got bitten by this as well, when running codecov uploader on image without git support\r\n\r\n ","author":"Kes Kasiulynas"}]},{"summary":"Pipelines validator allows multiple steps deploying to same environment","key":"BCLOUD-18931","url":"https://jira.atlassian.com/browse/BCLOUD-18931","type":"Bug","priority":"","description":"Hi,\r\n\r\nI have this excerpt of code in the Bitbucket pipelines\r\n{code:java}\r\nbranches:\r\n    master:\r\n      - step:\r\n          name: Move code to Databricks\r\n          deployment: production\r\n          caches:\r\n            - pip\r\n          script:\r\n            - pip install -r requirements.txt\r\n            - bash move_code_to_databricks.sh prod\r\n      - step:\r\n          name: Update the job in Databricks\r\n          deployment: production\r\n          script:\r\n            - python configure_job_in_databricks.py prod\r\n{code}\r\n‌\r\n\r\nI tested it in the validator and it passes , but the build fails saying that\r\n{quote}The deployment environment 'production' in your bitbucket-pipelines.yml file occurs multiple times in the pipeline\r\n{quote}\r\n----\r\n*New Update:*\r\n\r\nReopened the bug ticket as pipeline validator still fails to identify error if multiple steps deploying to the same environment with more than one blocks, for example:\r\n{code:java}\r\nimage: atlassian/default-image:2\r\npipelines:\r\n  default:\r\n     - parallel:\r\n         - step:\r\n              name: Build and Test\r\n              script:\r\n                   - echo \"test\"\r\n                   \r\n         - step:\r\n               name: Prod\r\n               script:\r\n                    - echo \"test\"\r\n          \r\n                  \r\n  branches:\r\n      master:\r\n          - step:\r\n               name: Build and Test\r\n               script:\r\n                   - echo \"test\"\r\n          - step:\r\n               name: Deploy to Production numbered\r\n               deployment: Production\r\n               script:\r\n                    - echo \"test\"\r\n                    \r\n          - step:\r\n              name: Deploy to Production latest\r\n              deployment: Production\r\n              script:\r\n                  - echo \"test\"\r\n                 \r\n                   {code}","createDate":"2019-06-17T17:27:29.000+0000","comments":[{"text":"Thanks for reaching out.\n\nWe don’t allow users to define multiple steps within the same pipeline which deploy to the same environment. If you’re interested in multi-step deployments, I suggest you vote for issue BCLOUD-18261 which is the open ticket tracking this request.\n\nOur UI validator is actually incorrect in saying that this is valid configuration. I’ve raised a ticket in our backlog to fix this issue and will rename this ticket so that’s I’ve raised a ticket to fix the bug with our validator.\n","author":"Aneita"}]},{"summary":"Bitbucket code search functionality doesn't return all matches","key":"BCLOUD-18651","url":"https://jira.atlassian.com/browse/BCLOUD-18651","type":"Bug","priority":"","description":"Bitbucket search functionality in Bitbucket UI doesn't return all the matches of the searched string in files.\r\n\r\nAlso, there is no indication in the UI about the file something like “Open the file for seeing all the matches\".\r\n\r\nThis behavior was reproduced by creating a file with of 720 lines. Each line contained the word _as4gUrl_ exactly once.\r\n\r\nWhile searching the word as4gUrl in the repository using Bitbucket search functionality it returned only 215 matches.","createDate":"2019-05-07T14:41:44.000+0000","comments":[{"text":"Hey Bitbucket-friend, I'm sorry this issue has gone without response for so long. We've just changed our bug-tracking workflow to help ensure that user-bugs are tracked more effectively going forward.  \r\n\r\nIf this is still an issue, can you please file a support request at support.atlassian.com/contact so our support engineering team can help diagnose this and create a bug for our engineering team? \r\n\r\nIn the meantime, I'm going to close this issue as obsolete. ","author":"jarredc"}]},{"summary":"Log's on Bitbucket Pipelines shows under a different command","key":"BCLOUD-18574","url":"https://jira.atlassian.com/browse/BCLOUD-18574","type":"Bug","priority":"","description":"Occasionally, in Bitbucket Pipelines, the displayed logs aren't showing under the correct command. The logs are correctly uploaded. However, they aren't mapped to the correct command. Also, the log doesn't download completely when downloaded from the UI.\r\n\r\nAlternatively, the full logs can be obtained via API. The \"Range\" can be adjusted accordingly if the logs are large.\r\n\r\nLink : [https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/pipelines/%7Bpipeline_uuid%7D/steps/%7Bstep_uuid%7D/log]","createDate":"2019-04-24T05:57:56.000+0000","comments":[{"text":"Thanks for raising this.\n\nWe have a ticket in our backlog to investigate this problem in more detail. I&#x27;ll keep you updated on our progress via this ticket.\n","author":"Aneita"},{"text":"My experiences show, that the uploaded logs are also truncated.","author":"Søren Jepsen"},{"text":"We are also facing this issue where large number of logs appear to be truncated in between. ","author":"Aman Pal"},{"text":"We are also facing this issue with large number of commands in a step.","author":"Anshul Shah"},{"text":"This is causing problems for my team as well. \r\n\r\nIt's inconsistent - was very rare, but currently happens over 80% of time on one repo.","author":"Tom Knight"},{"text":"Please fix\r\n\r\n ","author":"Jarek Piotrowiak"},{"text":"I'm encountering this as well.","author":"Kristian Luck"},{"text":"Our logs are getting truncated too. If I export the raw logs I can see everything, but in the web console it just truncates the logs. It's very confusing. Happy to provide examples if needed","author":"Aidan Samuel"},{"text":"disregard","author":"Kubicki, Lane"},{"text":"We're looking to migrate all of our project builds to Bitbucket Pipelines.\r\n\r\nDiscovered this issue while approaching a POC. \r\n\r\nOutput from individual commands is truncated and/or scattered over the wrong visual sections.\r\n\r\nThis happens relatively often. Refreshing the page doesn't help, the effect seems permanent. \r\nThe only solution is to re-run the pipeline. \r\n\r\nAt the current state, this will be a constant source of confusion for our dev team.\r\n\r\n!image-2023-03-22-11-49-31-897.png!","author":"Paul K."},{"text":"This is a really annoying bug","author":"Drew Heasman"},{"text":"h3. Workaround for downloading full log from the UI\r\n # Go to the pipeline you want to see the full log.\r\n # Open your browser's developer tools and filter network requests to {{{}/log{}}}.\r\n # Click on the step you want to see the full log.\r\n # Expand any of the commands of the log.\r\n # Find the {{/log}} request that was just sent and open the URL in a new tab.\r\n\r\nFor more details, check this video: [https://youtu.be/k-MZuKUQlMs]\r\n----\r\n*For Atlassian:* the video linked above also shows the source of the problem which may be useful for the service developers in order to fix the problem.","author":"Marco Gonzalez"},{"text":"The fix from Marco Gonzalez is not working anymore.","author":"nael.machal"},{"text":"I've configured our first Bitbucket pipeline and I am also encountering this issue.  On first run the output appears complete and in the correct sections, but when viewing the pipeline output again I'm sometimes seeing a) not all output is present and b) some output is in the wrong section.  This doesn't seem to affect every run, but it does affect the raw output that I'm able to download.","author":"Joshua Ganger"},{"text":"same here as well, my ECR pipeline is not giving me the needed logs due to this bug. I would say we should change the priority of this bug from *Medium* to {color:#de350b}*high*{color}","author":"Naman_J"},{"text":"can this issue be resolved ASAP, affecting my pipeline","author":"Adewale Adesoba"}]},{"summary":"\"Require two-step verification\"(Premium) feature breaks LFS clone through Access Keys","key":"BCLOUD-18351","url":"https://jira.atlassian.com/browse/BCLOUD-18351","type":"Bug","priority":"","description":"When an account has the Premium feature \"Require two-step verification\" enabled, Access Keys are unable to clone/pull LFS files, retuning _\"To access this repository, enable two-step verification.\"_ even that it&#x27;s not directly related to an account.\n\nWe do have some workarounds which might work for now:\n\n* disable 2FA enforcement for that account to keep using that SSH access key\n* create an [app password|https://confluence.atlassian.com/bitbucket/app-passwords-828781300.html] with read-only scope and access the repo via HTTPS\n* create a bot account with read-only access, with that SSH key configured for that account","createDate":"2019-03-14T14:24:19.000+0000","comments":[{"text":"A big upvote for this issue to get fixed.\n","author":"Christian Uldall Pedersen"},{"text":"Any news on when this will be fixed?","author":"Christian Uldall Pedersen"},{"text":"A big upvote from my side as well. We are facing this issue as well and it's highly important for us to be able to activate 2FA as default and also be able to use LFS.","author":"Andreas Filler"},{"text":"Any news here?","author":"Christian Uldall Pedersen"},{"text":"Just a quick update for everyone following this issue: We are currently looking into the best way to resolve this issue without sacrificing security.\r\n\r\nTom Kane\r\n\r\nEngineering Manager - Bitbucket Cloud","author":"Tom Kane"},{"text":"Yikes. It took a little bit too long to figure out that _this_ was the issue we've been having with LFS. Implementation should be as easy as \"don't enforce SSH keys on read-only service accounts\"-- if that's not an easy fix, I'm sure I'd be terrified of whatever implementation is under the hood. The main reason we use a cloud-based remote repository hosting provider like Bitbucket is to avoid wasting time on engineering solutions for source-hosting when we should be focusing on our project source. Our hope is that this will get resolved quickly (it's been over 5 months since the last reply at this point, and over two years since the ticket was opened in the first place), because if we have to sacrifice security and/or start working on debugging the hosting platform itself, we'll probably just save time and costs and go back to self-hosting.","author":"Caleb Power"},{"text":"This is forcing us to keep 2FA disabled, which is not desirable...","author":"Guillem Vela"},{"text":"\"We are currently looking into the best way to resolve this issue without sacrificing security.\"\r\n\r\nCould you try looking a bit harder? As far as I can see the current situation is the one that forces users to sacrifice security because the SSH access keys don't work.","author":"keto"}]},{"summary":"The YML Validator for Pipelines does not show any syntax errors for yml anchors","key":"BCLOUD-18299","url":"https://jira.atlassian.com/browse/BCLOUD-18299","type":"Bug","priority":"","description":"As per the title, the YML validator for Pipelines (https://bitbucket-pipelines.prod.public.atl-paas.net/validator) does not show any syntax errors for yml anchors.\n\nThis is highlighted in this example public repository: https://bitbucket.org/rtest123/anchor-indentation/addon/pipelines/home#!\n\nAdded by [~tboudale] :\n\nI would also like to add that sometimes a YML anchor also breaks validation in other parts of the yml file.\n\nE.g.\n\n{code}\ndefinitions: \n  steps:\n    - step: &build-test\n      name: Build and test\n      script:\n        - echo \"hello\"\n      artifacts:\n        - target/**\n\npipelines:\n  branches:\n    anchor:\n      -step: *build-test\n    master:\n      - step: *build-test\n\n{code}\n\nAbove^ the lack of a space between &#x27;-&#x27; and &#x27;step&#x27; for the branch named &#x27;anchor&#x27;, is not indicated by the validator.","createDate":"2019-03-08T12:10:20.000+0000","comments":[{"text":"Thanks for raising this.\n\nThis configuration resulted in an error when the pipeline was executed because when the reference was expanded, we detected the pipeline didn&#x27;t include some keywords that it was expecting.\n\nI&#x27;ve created a ticket in the team&#x27;s backlog to look at this bug, however, this is low priority given the other things that we&#x27;re working on. I&#x27;ll update you on our progress on this bug via this ticket.\n","author":"Aneita"},{"text":"As per the title, the YML validator for Pipelines (https://bitbucket-pipelines.prod.public.atl-paas.net/validator) does not show any syntax errors for yml anchors.\n\nThis is highlighted in this example public repository: https://bitbucket.org/rtest123/anchor-indentation/addon/pipelines/home#!\n","author":"Aneita"},{"text":"Issue BCLOUD-18306 was marked as a duplicate of this issue.\n","author":"Aneita"},{"text":"Issue BCLOUD-18894 was marked as a duplicate of this issue.\n","author":"Aneita"},{"text":"Changing this to a Bug as the validator should handle anchors correctly.","author":"Mike Howells"},{"text":"[https://getsupport.atlassian.com/browse/BBS-134470]","author":"Saurabh Singh"},{"text":"YAML anchors also allows adding scripts (and passes validation) but actually trying to use them causes validation errors when running the pipeline. If fixing the validator is a big issue for Atlassian then at least improving the documentation would resolve many of the problems. Most companies provide a \"complete configuration\" yaml which shows examples of every type of resource, configuration, setup etc.\r\n\r\ne.g.\r\n\r\nhttps://circleci.com/docs/2.0/configuration-reference/#example-full-configuration","author":"Rupert Broad"},{"text":"Adding a warning to the \"Validator for bitbucket-pipelines.yml\" page that anchors are not supported would be helpful.\r\n\r\n\"Unable to validate this bitbucket-pipelines.yml file due to the presence of anchors.\"","author":"Jason Harrison"},{"text":"Bump","author":"Asa Baylus"}]},{"summary":"Incorrect build status that is built more than once","key":"BCLOUD-18146","url":"https://jira.atlassian.com/browse/BCLOUD-18146","type":"Bug","priority":"","description":"Bitbucket reports incorrect commit and pull request build status in case the same commit is built more than once, e.g. the first build is failed, but the second one is successful.\r\n\r\nHere is an example:\r\n\r\nCommit build status is failed\r\n\r\n!2197520724-bb_commit_status_1.png|thumbnail!\r\n\r\n... but there is a successful build that occurred later on\r\n\r\n!4285078212-bb_commit_status_2.png|thumbnail!\r\n\r\nThis is also impacting the pull request list, the first build failed and the subsequent build success the build will still shown as failed.\r\n","createDate":"2019-02-12T13:43:04.000+0000","comments":[{"text":"Hi @szhemzhitsky,\n\nThanks for reaching out. I wasn&#x27;t able to reproduce this problem. Are you still experiencing this? If so, can you please [raise a support ticket|https://support.atlassian.com/contact/] so that we can look at your repository in more details?\n\nThanks,\\\\\nAneita\n","author":"Aneita"},{"text":"Attachment 2197520724-bb_commit_status_1.png has been added with description: Originally embedded in Bitbucket issue #18146 in site/master","author":"Sergey Zhemzhitsky"},{"text":"Attachment 4285078212-bb_commit_status_2.png has been added with description: Originally embedded in Bitbucket issue #18146 in site/master","author":"Sergey Zhemzhitsky"},{"text":"Reopened this issue as it's reproducible. \r\n\r\nIf several iterations for pull requests , for example twice failed and then last fix passed. The symbol will be red although last build passed and has green symbol. Because it contains history will failures the summarized symbol will be red","author":"Norbert Csupka"},{"text":"This looks like an issue where the 2 builds are actually separate builds, so the second one uses a different `key` and thus the build status API sees this as 2 builds, one of which has failed (which rolls-up as red), rather than 1 build that ran twice, of which the second one passed (which should roll-up as green).\r\n\r\nThe docs here: [https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D/commit/%7Bnode%7D/statuses/build] could be a bit clearer - if the `key` is the same, then the later status represents a re-run of the same build and thus it reports as green. If the keys are different, they are 2 separate builds.","author":"mwatson"},{"text":"There needs to be an option for pull-request triggered builds to show only the latest build status in the pull-request screen. Even though the latest build was successful, my pull-request screen shows build failure (red icon) just because the first build on the pull-request was a failure. The developer goes back to fix the failure, fixes it and commits it, the pull-request gets updated with everything but the build status stays red even as the build passes after the fix. \r\n\r\nI guess this needs resolving ASAP.\r\n\r\nThanks,\r\nKarthik.","author":"Karthik Arun R"}]},{"summary":"Allow \".\" (dot) in a variable key","key":"BCLOUD-18007","url":"https://jira.atlassian.com/browse/BCLOUD-18007","type":"Bug","priority":"","description":"Dear Engineers,\n\nIf a user would like to use a custom \"cluster.name\" in Pipelines (for example for Elasticsearch), currently it&#x27;s not possible as the Pipelines build fails with the following message:\\\\\n\"A variable key is malformed. All variable keys should contain only\\\\\nalphanumeric characters and underscores and should not begin with a number\"","createDate":"2019-01-22T08:04:47.000+0000","comments":[{"text":"This is a code snippet of bitbucket-pipelines.yml that is not working properly:\n\n{code}\n#!yml\n\ndefinitions:\n  services:\n    elasticsearch:\n      image: docker.elastic.co/elasticsearch/elasticsearch:5.6.14\n      memory: 2560\n      variables:\n        cluster.name: abcd-cluster\n{code}\n\nIn order for our maven build to work, we need to set:\n\n{code}\n#!yml\n\ncluster.name: abcd-cluster\n{code}\n\nWe tried to use single and double quotas for the key and also to escape the dot with \\. but the same message is thrown at the start of the pipeline execution.\n","author":"polustech_sasa"},{"text":"Issue BCLOUD-14892 was marked as a duplicate of this issue.\n","author":"Aneita"},{"text":"It's been a year and it's not fixed yet.... I hit the same issue...","author":"Fyodor Paligin"},{"text":"Still not fixed ...","author":"Michael Tscholl"},{"text":"Yep, still broken. If nothing else, the official validator should be detecting this, but this 'invalid' config is marked as valid. It might actually be faster to ask Elastic Co to allow underscores as alternatives to the period at this rate.","author":"David Bennington"},{"text":"Another bug which will take a looooong journey to be fixed!?","author":"Nepomuk Pajonk"},{"text":"...","author":"Krzysztof Jaworowski"},{"text":"Hi everyone,\r\n\r\nJust wanted to give an update on this ticket.\r\n\r\nWe did a spike on supporting this and found that allowing for variables with “.” characters lead to some significant inconsistencies in usability. The root issue is that a “.” in a variable key is not fully POSIX compliant, and thus different shells and commands handle this case in significantly different ways.\r\n\r\nAs a very quick example, running `echo $DOT.VARIABLE` in Shell or Bash would evaluate `$DOT` as a variable and then append `.VARIABLE` verbatim, rather than evaluate `$DOT.VARIABLE` as a whole. Though there are some scenarios where this does work as expected, such as how Elasticsearch reads the variables.\r\n\r\nAs far as I can tell from this ticket, this feature was needed primarily for the Elasticsearch Docker image. And Elasticsearch has offered a workaround for this problem: [https://github.com/elastic/elasticsearch/issues/74036]\r\n\r\nFor example `discovery.type` would become `ES_SETTING_DISCOVERY_TYPE`. Can you let me know if that works for you?\r\n\r\nPlease let us know if there’s other use-cases that are blocked by this feature and we can review if necessary.\r\n\r\nThanks,\r\nPhilip","author":"Philip Hodder"},{"text":"Opensearch it`s not support such kind ENV variables.","author":"Nikolay"},{"text":"As Nikolay pointed out, the workaround is not available to anyone who is migrating from Elasticsearch to Opensearch.\r\n\r\n \r\n\r\nRelevant tracking issue for the Opensearch docker images.\r\n\r\n[https://github.com/opensearch-project/docker-images/issues/20]\r\n\r\n ","author":"Gowri"}]},{"summary":"API call to endpoint /2.0/worskspace/{username}/permissions/repositories is unusable for large team accounts","key":"BCLOUD-17803","url":"https://jira.atlassian.com/browse/BCLOUD-17803","type":"Bug","priority":"","description":"The following API call is unusable if there are a large number of repositories or account has over 1000 users on the account, the API call times out:\\\\\r\nhttps://developer.atlassian.com/bitbucket/api/2/reference/resource/workspaces/%7Bworkspace%7D/permissions/repositories\r\n\r\nWhen you try to perform a call to a repository, you get a response like this:\r\n\r\n{code}\r\n#!bash\r\n\r\n{\"type\": \"error\", \"error\": {\"message\": \"Something went wrong\", \"id\": \"15240f74db7141bc8cb8764f7b2aa966\"}}\r\n{code}\r\n\r\nUsing pagination does not help either, the same problem occurs.\r\n\r\nViewing the users or groups in the UI will also time out for accounts with over 1000 users due to the same API call timing out","createDate":"2018-12-19T11:29:35.000+0000","comments":[{"text":"This is by design. Need new API or approach for large teams. ","author":"Gayatri Ramesh"},{"text":"The API is currently broken.\r\n\r\nUser and repository endpoints time out.\r\n\r\nI am not able to list groups and their privileges.\r\n\r\nDocker Hub cannot list the available repositories.\r\n\r\nAPI v1.0 is deprecated, but there is no alternative for all features for about 3 or 4 years.\r\n\r\nWhat does the timeline look like?","author":"tomlankhorst"},{"text":"Hello,\r\n\r\nIs there a known workaround for this issue? We're happy to use an alternate set of APIs if possible.\r\n\r\nThanks!","author":"Nitin Sonawane"}]},{"summary":"Maintaining a list of 58 public IPs in a firewall for webhooks seems excessive","key":"BCLOUD-17709","url":"https://jira.atlassian.com/browse/BCLOUD-17709","type":"Bug","priority":"","description":"On [October 30th 2018, BitBucket made a blog post|https://bitbucket.org/blog/update-to-outgoing-webhook-ip-addresses] saying that in addition to [the regular IP CIDR whitelist|https://confluence.atlassian.com/bitbucket/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall-343343385.html] that some webhook requests would come from one of their [(currently) 58 public IPs|https://ip-ranges.atlassian.com/].\n\nConsequently, our webhooks began to fail last week (November 30th) as did [many other users|BCLOUD-17668] with NET_ERR or 403s. We resolved this by adding the full list of *58* public IPs, however, this seems unreasonable. If a request commonly originates from something outside the original list, is that list even meaningful?\n\nAs IPs can and will change (as they have done in the past and [is documented on their firewall page|https://confluence.atlassian.com/bitbucket/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall-343343385.html]). We can check and maintain 3 or so, but 58 IPs? That&#x27;s painful, unless we write a script maintain firewalls.\n\nEven then it does not seem very secure to have literally dozens of end points we have to white list. Yes we have private/public keys, yes we have passwords, yes we limit ports, but we rather have a small and maintainable IP list (or at the very least one that is not a misleading list).","createDate":"2018-12-04T23:39:20.000+0000","comments":[{"text":"This is paining us too.\n\nOn the receiving end, an AWS security group can only take 60 rules so even with automation this is getting dicey.\n\nOn the sending side, I notice the IPs in the list of 58 that I checked are AWS ones. I would think with elastic IPs, which stay the same, and such, even with two or three regions and a private data center, something could be made to work with a handful of fixed addresses.\n","author":"Piers S"},{"text":"Same here, this is madness! I don&#x27;t want to have to create a cron job to keep track of an ever changing list of 50+ public IP addresses to whitelist. I can not make my Jenkins server public either because that&#x27;s just asking for trouble. This has effectively rendered my webhooks _useless_. This is a show stopper for us using Bitbucket because we absolutely need triggered events. Github is looking like an attractive option now:\n\n\"hooks\": [\\\\\n\"192.30.252.0/22\",\\\\\n\"185.199.108.0/22\",\\\\\n\"140.82.112.0/20\"\\\\\n]\n\nI don&#x27;t normally resort to snark but this really is putting a damper on my work, so thanks for making my life more difficult! I look forward to a resolution or we will discontinue use of Bitbucket permanently.\n","author":"Will Tomlinson"}]},{"summary":"Add support for Docker Compose named volumes","key":"BCLOUD-17592","url":"https://jira.atlassian.com/browse/BCLOUD-17592","type":"Bug","priority":"","description":"The Docker authorization plugin currently doesn&#x27;t support named volumes for Docker compose (see https://docs.docker.com/compose/compose-file/#volumes). As a result, mappings to named volumes are being treated as absolute paths and subsequently error.\n\nA workaround is to create and map and empty directory and attach it to both containers.","createDate":"2018-11-19T03:31:43.000+0000","comments":[{"text":"I&#x27;m not sure if this comment is helpful, since I know nothing about Pipelines&#x27; internals, but, assuming this auth check happens before the compose command is run and involves parsing the docker-compose.yml, it might be enough to check if the volume&#x27;s source parameter matches a key in the volumes array. If it does, docker-compose will treat it as a named volume.\n","author":"Thijs Daniels"},{"text":"Thanks for the suggestion.\n\nGiven the team is currently working on higher priority projects, it&#x27;s unlikely that we&#x27;ll work on this anytime soon. In the meantime, however, I&#x27;ll open this ticket to gauge the interest of other users on this feature.\n","author":"Aneita"},{"text":"This is an issue for me right now :confused: The workaround works fine but cannot be put in production because we need this binding in production environment\n","author":"Nicolas-b12"},{"text":"We are also affected by this issue. For the time being we have implemented an ugly workaround. Is the team going to work on this any soon? Thanks","author":"Stefano Angaran"},{"text":"I have a hunch that this may be the cause of:\r\n\r\nA Spring Boot `buildImage`  failing with `Docker API call to 'localhost:2375/v1.24/containers/create' failed with status code 403 \"Forbidden\"`\r\n\r\n \r\n{code:java}\r\ntime=\"2021-03-16T21:00:15Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=POST plugin=pipelines uri=\"/v1.24/images/create?fromImage=gcr.io%2Fpaketo-buildpacks%2Fbuilder%3Abase-platform-api-0.3\"\r\ntime=\"2021-03-16T21:00:26Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=GET plugin=pipelines uri=\"/v1.24/images/gcr.io/paketo-buildpacks/builder@sha256:872e925fe54df9f4392483ef548eb4eda19851139efd71e8d5925db92cfd394d/json\"\r\ntime=\"2021-03-16T21:00:26Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=POST plugin=pipelines uri=\"/v1.24/images/create?fromImage=docker.io%2Fpaketobuildpacks%2Frun%3Abase-cnb\"\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=GET plugin=pipelines uri=\"/v1.24/images/docker.io/paketobuildpacks/run@sha256:367a43536f60c21190cea5c06d040d01d29f4102840d6b3e1dcd72ed2eb71721/json\"\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=POST plugin=pipelines uri=/v1.24/images/load\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Container create request.\" ArgsEscaped=false AttachStderr=false AttachStdin=false AttachStdout=false ExposedPorts=\"map[]\" Healthcheck=\"<nil>\" Labels=\"map[author:spring-boot]\" MacAddress= NetworkDisabled=false OnBuild=\"[]\" OpenStdin=false StdinOnce=false StopSignal= StopTimeout=\"<nil>\" Tty=false plugin=pipelines\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Container create request.\" AutoRemove=false BlkioDeviceReadBps=\"[]\" BlkioDeviceReadIOps=\"[]\" BlkioDeviceWriteBps=\"[]\" BlkioDeviceWriteIOps=\"[]\" BlkioWeight=0 BlkioWeightDevice=\"[]\" CPUCount=0 CPUPercent=0 CPUPeriod=0 CPUQuota=0 CPURealtimePeriod=0 CPURealtimeRuntime=0 CPUShares=0 CapAdd=\"[]\" CapDrop=\"[]\" Capabilities=\"[]\" Cgroup= CgroupParent= ConsoleSize=\"[0 0]\" ContainerIDFile= CpusetCpus= CpusetMems= DNS=\"[]\" DNSOptions=\"[]\" DNSSearch=\"[]\" DeviceCgroupRules=\"[]\" Devices=\"[]\" ExtraHosts=\"[]\" GroupAdd=\"[]\" IOMaximumBandwidth=0 IOMaximumIOps=0 Init=\"<nil>\" IpcMode= Isolations= KernelMemory=0 Links=\"[]\" LogConfig=\"{ map[]}\" MaskedPaths=\"[]\" Memory=0 MemoryReservation=0 MemorySwap=0 MemorySwappiness=\"<nil>\" Mounts=\"[]\" NanoCPUs=0 NetworkMode=default OomKillDisable=\"<nil>\" OomScoreAdj=0 PidMode= PidsLimit=\"<nil>\" PortBindings=\"map[]\" Privileged=false PublishAllPorts=false ReadOnlyPaths=\"[]\" RestartPolicy=\"{ 0}\" Runtime= SecurityOpt=\"[]\" ShmSize=0 StorageOpt=\"map[]\" Sysctls=\"map[]\" Ulimits=\"[]\" UsernsMode= VolumeDriver= VolumesFrom=\"[]\" plugin=pipelines\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=false method=POST plugin=pipelines uri=/v1.24/containers/create\r\ntime=\"2021-03-16T21:00:27.763743186Z\" level=error msg=\"AuthZRequest for POST /v1.24/containers/create returned error: authorization denied by plugin pipelines: -v only supports $BITBUCKET_CLONE_DIR and its subdirectories\"\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=DELETE plugin=pipelines uri=\"/v1.24/volumes/pack-layers-emjtaniasm?force=1\"\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=DELETE plugin=pipelines uri=\"/v1.24/volumes/pack-app-ggwrhmgsws?force=1\"\r\ntime=\"2021-03-16T21:00:27Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=true method=DELETE plugin=pipelines uri=\"/v1.24/images/pack.local/builder/bsjzzxpubv:latest?force=1\"{code}","author":"Deleted Account"},{"text":"Is there an example of how to do this -> \"A workaround is to create and map and empty directory and attach it to both containers.\" \r\n\r\nI'm particularly interested in the context of\r\n{quote}A Spring Boot `buildImage`  failing with `Docker API call to 'localhost:2375/v1.24/containers/create' failed with status code 403 \"Forbidden\"`\r\n{quote}\r\nh4.","author":"Dave Chamberlin-Kidd"},{"text":"Is there any update on this? Would think it would have a higher priority when you can't use the latest from spring boot build image command","author":"John Ahigian"},{"text":"I'm also hitting this issue with SB buildImage :( ","author":"Mimozë Lladrovci"},{"text":"Hitting this issue with a spring native bootBuildImage, \r\n\r\nAny updates on the fix for this issue?\r\n\r\nIs there an article or how to for a viable work around? \r\n\r\n \r\n\r\nedit: \r\nbuilding the docker container with jib. seems to work for my case. \r\n\r\nadding  _id 'com.google.cloud.tools.jib' version '3.2.1'_ to gradle.build\r\n\r\nand using this instead of paketobuildpacks ({_}gradle build{_} {_}jibDockerBuild{_})","author":"Jeroen Horemans"},{"text":"Sprign Boot is one of the most popular frameworks currently and definitely TOP1 framework in Java world.\r\n\r\nBeing able to build image using standard methods with Bitbucket Pipelines is just must have. Yes, there are alternatives like using jib or even own Dockerfile. However it just creates unnecessary work for thouthands (even not millions) of developers. Also it makes almost impossible to benefit from Java native images already supported by Spring team:\r\n\r\n[https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/]\r\n\r\n \r\n\r\nI believe this should be really high priority if you would like Bitbucket to progress. I already know 2 teams switched from Bitbucket to GitHub where it just works and I here same discussions in my team. I don't want to take migration effort, but if there is no other choice....","author":"Viktar Patotski"},{"text":"We are building images using buildpack and hitting the same wall, strange how this did not get resolved since 2018.","author":"Ziad Kiwan"},{"text":"How has this not been addressed yet?","author":"David Engelmann"},{"text":"[~8c9ab21e480a], It's not even 5 years old. What do you expect? :D","author":"Viktar Patotski"},{"text":"We're also affected by this. Maybe the priority should be increased here.","author":"Fabian Köntopp"},{"text":"So are we! It is really dramatic that the way recommended by many experts to run Spring Boot applications on Docker cannot be used. We are thinking about switching to github.","author":"navigium"},{"text":"It's becoming pretty clear that Atlassian has little interest in Bitbucket or the pipelines feature.","author":"Dan Fraser"},{"text":"We are affected, too.","author":"Maciej Jordanek"},{"text":"Really sad to see that there is no progress on this issue for 5 years now \uD83D\uDE15\r\n\r\nwe just migrated recently from Jenkins to pipelines and had to change back from using buildpacks for our Spring Boot Applications to use jib","author":"Thomas Einwaller"},{"text":"Those who ran into this using Spring Boot, please vote for this issue: [https://github.com/spring-projects/spring-boot/issues/28387]\r\n\r\nIf Atlassian do not care(after 5 years it's fair to say that they don't), maybe Spring Boot can work this around.","author":"andrej.urvantsev"},{"text":"We also affected:(","author":"hodaka"},{"text":"I don't think they care about this issue, we are glad at least we had liberty to shift to other platforms.","author":"Omkar Todkar"}]},{"summary":"Junit tests not being parsed","key":"BCLOUD-17369","url":"https://jira.atlassian.com/browse/BCLOUD-17369","type":"Bug","priority":"","description":"Hi,\n\nI&#x27;m using TSLint to generate a Junit XML file to be reported on by Pipelines.\n\nHowever, when I run my builds and the XML I&#x27;ve attached to this ticket gets generated in a folder called &#x27;test-reports&#x27;, I get the following messaging from Pipelines:\n\n_Searching for test report files in directories named [test-results, failsafe-reports, test-reports, surefire-reports] down to a depth of 4\\\\\nFound matching test report file /opt/atlassian/pipelines/agent/build/test-reports/lint.xml\\\\\nLocated test suite containing 0 tests, with 0 failures and 0 errors.\\\\\nLocated test suite containing 0 tests, with 0 failures and 0 errors.\\\\\nFinished scanning for test reports. Found 1 test report files.\\\\\nMerged test suites, total number tests is 0, with 0 failures and 0 errors._\n\nPipelines appears to be locating the file correctly and it&#x27;s even managed to determine that there are two test suites. However, it doesn&#x27;t appear to have noticed that there are some tests in these suites and some of them are failing (as per the XML).\n\nThe only difference I&#x27;ve found between this Junit XML output by TSLint and that of something like a Jest JUnit output is that this is missing some attributes (such as success/failure). However, I would have thought that Pipelines would have been able to infer these figures from the hierarchy?","createDate":"2018-10-17T23:40:17.000+0000","comments":[{"text":"@jxadamb, what TSLint library are you using to generate these results? I can see from the report that each <testsuite> is missing count, failure and error attributes, which we currently use in parsing of test results. If count is empty or 0, we don&#x27;t parse the tests within the testsuite. Whether this is a bug in our test parsing, or a bug with the TSLint lib tooling is still to be determined. Potentially, we could infer these counts based on the contents of the test report file to be more robust against xml reports that don&#x27;t include these totals.\n","author":"Graham Gatus"},{"text":"@ggatus, I&#x27;m using this library here - https://github.com/palantir/tslint/tree/5.11.0. You&#x27;re correct in your assessment though, technically this can be seen as either a bug or an improvement, depending on wether you classify the counts as required. The Junit XML spec obviously documents them being there but it would be good in the case of some Junit XML exporters not adding the totals, for them to be inferred.\n","author":"jxadamb"},{"text":"@jxadamb we&#x27;ve raised a bug / improvement ticket to fix our test report parsing to be &#x27;less strict&#x27;. Keep an eye on this issue for any further updates.\n","author":"Graham Gatus"},{"text":"Issue -#18642- was marked as a duplicate of this issue.\n\nIssue specifically talks about supporting Cucumber reports\n","author":"Aneita"},{"text":"Attachment lint.xml has been added with description: Originally attached to Bitbucket issue #17369 in site/master","author":"jxadamb"}]},{"summary":"Docker builds started failing with \"Container ID cannot be mapped to a host ID\" error","key":"BCLOUD-17319","url":"https://jira.atlassian.com/browse/BCLOUD-17319","type":"Bug","priority":"","description":"Recently, our builds have started failing with the message:\r\n{code:java}\r\nError processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID\r\n{code}\r\nI can't figure out which part is failing, though from browsing other issues it appears to be some issue with user remapping. However, the only existing issues I can find that sound similar are to do with multistage builds. The build is failing some time after the {{apt-get autoremove}} in the following:\r\n{code:java}\r\n# Copy requirements in\r\nCOPY ./requirements.txt /app/\r\nCOPY requirements/ /app/requirements/\r\n\r\nWORKDIR /app\r\n# Install dependencies and requirements\r\n\r\nRUN apt-get update && apt-get install -y pkg-config git build-essential python-dev \\\r\n&& pip install --upgrade pip \\\r\n&& pip install --upgrade setuptools \\\r\n&& pip install -r requirements/server.txt \\\r\n&& rm -rf requirements/dependencies \\\r\n&& apt-get remove -y build-essential git pkg-config \\\r\n&& apt-get autoremove -y \\\r\n&& rm -rf /var/lib/apt/lists/*\r\n\r\n# Copy the rest of the app\r\nCOPY . /app/\r\n\r\n# Custom system config\r\nCOPY server/ /\r\n{code}\r\n \r\n----\r\n*(on) Additional Information*\r\n\r\nIdentifying the right owner of the file/folders being exchanged between Docker containers that result in the error \"Container ID cannot be mapped to a host ID\" during a pipeline run?\r\n{panel}\r\n(i) This is important in resolving related issues, as once the file(s)/folder(s) are identified. Their ownership can be changed to 'root' in order to avoid the resulting error.\r\n\r\nExample error: _\"Container ID 165569 cannot be mapped to a host ID_\" we can make an initial conclusion that the container ID *165569* is unable to map with the host ID. It is important to get the right user ID on the host container from the child container ID *165569* pointing to. Steps below help to find the same:\r\n----\r\nDocker user namespace configurations are stored within the following two files '/etc/subuid' and '/etc/subgid', which looks as follows on Bitbucket Pipelines:\r\n{code:java}\r\npipelines:100000:65536\r\n{code}\r\nFor instance, with \"*pipelines:100000:65536*\" it means that user *pipelines* can use 65536 user ids starting at 100000. Now a user ID 165569 on a host container would refer to *165569 - (100000+65536) = 33*\r\n\r\nAfter getting the host user ID, you can use the following command to find all the files that belong to it:\r\n{code:java}\r\nRUN find / -uid 33 -ls\r\n{code}\r\nIdeally, for a multi-stage build and DinD setup, the easiest trick to make everything working is by changing the ownership of the folder to *root* that is failing to get copied to the child container:\r\n{code:java}\r\nchown -R root:root file/folder{code}\r\n{panel}","createDate":"2018-10-11T15:48:43.000+0000","comments":[{"text":"We&#x27;re also seeing this issue.  [CircleCI&#x27;s docs|https://circleci.com/docs/2.0/high-uid-error/] seems to indicate that this falls on Bitbucket\n","author":"gtall"},{"text":"Thanks for that link @gtall, I&#x27;ve run the {{find}} command they suggested in both my build container and the actual image I&#x27;m building and neither include any files owned by {{165586}}!\n","author":"Alastair McFarlane"},{"text":"For us it happens when we pull a docker image size ~832mb it was never a issue but since 28th September it stops working.. (we also tried CircleCI&#x27;s solution)\n\n*Please fix.*\n","author":"Martin Schneider"},{"text":"This is really frustrating that builds have started failing out of nowhere, and we&#x27;re seeing the exact same {{Container ID 165586}} error. The CircleCI sol&#x27;n did nothing for us either. And our failing images are only ~310MB.\n","author":"wogsland"},{"text":"Same issue here. One of our builds fails 100% of the time.\n\nAre you guys confident this is a Bitbucket bug? Have any of you found a workaround?\n","author":"olivier-lacroix"},{"text":"I&#x27;ve also got a build that fails 100% of the time. The fact that both @wogsland and I have {{Container ID 165586}} makes me more suspicious that it&#x27;s a Bitbucket problem rather than a me problem, though I&#x27;m open to being wrong!\n","author":"Alastair McFarlane"},{"text":"Mine fails with a different ID.  as per below error message.\n\n{code}\n#!bash\n\nError processing tar file(exit status 1): Container ID 165636 cannot be mapped to a host ID\n{code}\n","author":"olivier-lacroix"},{"text":"This looks like the same issue as the one reported in BCLOUD-17241\n\nThere is a workaround described in that issue so please take a look everyone.\n","author":"Yanne Grmek"},{"text":"I looked at that first - unfortunately I haven&#x27;t a multistage build, and my build is already running as root! I tried adding a chown for each of the files, but it didn&#x27;t seem to help. My sense is that this feels like the same issue, but perhaps in a slightly different place, as the workaround doesn&#x27;t appear to apply.\n\nI&#x27;d love to be wrong, but I did try!\n","author":"Alastair McFarlane"},{"text":"I did encounter the problem without multistage build as well. I have not been able to fix the problem yet either.\n","author":"olivier-lacroix"},{"text":"I have contacted support, who rolled-back the introduction of user mapping for our account. builds are back! This is definitely not a fix, but at least allows to get some work done.\n\nI have also been advised that a guide will soon be published as well to deal with that situation. To be notified, you can \"watch\" [this page|https://confluence.atlassian.com/bitbucket/infrastructure-changes-in-bitbucket-pipelines-872135046.html].\n","author":"olivier-lacroix"},{"text":"Thanks @olivier-lacroix! I&#x27;ll do the same and keep an eye on that page for future.\n","author":"Alastair McFarlane"},{"text":"Issue BCLOUD-17405 was marked as a duplicate of this issue.\n","author":"Aneita"},{"text":"I had exactly the same error. When I changed the following line in the Dockerfile:\n\n{code}\nRUN mv $PHP_INI_DIR/php.ini-production $PHP_INI_DIR/php.ini\n{code}\n\nto\n\n{code}\nRUN cp $PHP_INI_DIR/php.ini-production $PHP_INI_DIR/php.ini\n{code}\n\nthe error disappeared.\n\nHope this helps in finding a solution / work around.\n","author":"Joël Wijngaarde"},{"text":"As a part of the ongoing security hardening process in Bitbucket Pipelines, we decided to enable [docker user namespace remap|https://docs.docker.com/engine/security/userns-remap/] to eliminate potential *security* risks that might affect our users.\r\n\r\nThis change affected a small percentage of users using docker in their builds. So, we wanted to share the different limitations that this change introduced, and the actions required to make your builds work with the security enhancement introduced.\r\nh2. Issues caused by limitations of userns remap.\r\n\r\nAs mentioned in the docker documentation linked above, enabling docker userns remap introduces the following limitations:\r\n\r\nThe following standard Docker features are incompatible with running a Docker daemon with user namespaces enabled:\r\n{quote}* sharing PID or NET namespaces with the host (--pid=host or --network=host).\r\n{quote} * external (volume or storage) drivers which are unaware or incapable of using daemon user mappings.\r\n * Using the --privileged mode flag on docker run without also specifying --userns=host.\r\n\r\nWe already disallowed on pipelines {{-{-}pid=host{-}}} and {{-privileged-}} containers however {{-network=host}} is a new limitation.\r\n\r\nIn the interim we have added all users who currently use this feature of docker (as indicated by our analytics) to an exclusion list.\r\n\r\nWe will be making changes to docker to assist you in moving from using {{--network=host}} to a solution that will involve you using container links, port mapping and providing a similar feature to docker for OSX with a host that resolves to the host for the build.\r\n\r\nWe will release further communications as to when these changes will be made and the exclusion list will be removed.\r\nh2. Docker build, removing files doesn't remove them.\r\n\r\nDue to bugs in docker, when files were modified (removed/alterered) during a docker build via RUN/COPY commands the changes weren't being reflected in subsequent layers.\r\n\r\nWe have upgraded docker to pull in the fix for these issues.\r\n\r\n[https://github.com/moby/moby/issues/36648]\r\n\r\n[https://github.com/moby/moby/issues/35709]\r\n\r\n[https://github.com/moby/moby/issues/32919]\r\n\r\n[https://github.com/moby/moby/issues/30110]\r\n\r\nHowever some failures require user intervention, as some commands were modifying the UID/GID (similar to the error below). For these situations docker now supports {{--chown}} as an argument to some dockerfile commands.\r\nh2. Builds fails due to error: “Container ID Cannot Be Mapped to Host ID Error”\r\n\r\nDue to the way userns remap works (by remapping UID/GIDs to another less privileged UID/GID in the hosts namespace), UID/GIDs that are placed on files must be in the range 0-65535.\r\n\r\nIf you recieve this error, you will need to perform a fix on the image that has this invalid UID/GID.\r\n\r\nIf your recieved this error against a file that you created and placed into an image, the fix is to simply change the UID/GID of the file to one within the range.\r\n\r\nTo find the file, first get the invalid UID/GID from the error message and run the following command on the files within the container.\r\n{code:java}\r\nfind / '(' -uid <invalid-uid-or-guid> -or -gid <invalid-uid-or-guid> ')'  -ls {code}\r\nTo fix the ownership of the file use the following command\r\n{code:java}\r\nchown -R UID_IN_RANGE:GID_IN_RANGE filename\r\n{code}\r\nIf you received this error against a file that was already present in a layer of the base image you depend on, you will need to raise a support case and work with the image maintainers of the base image to get this resolved.\r\nh2. Test containers\r\n\r\nIf you use the java library test containers there is currently a bug in that it doesn't run against a docker daemon with userns remap enabled. For more details and questions, please comment on this issue: [https://github.com/testcontainers/testcontainers-java/issues/712]","author":"lassian"},{"text":"I have the same issue \"Error processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID\" When running python3 pip on requirement file.\n","author":"Doron Abram (Nibi.ai)"},{"text":"Same for me. I have this issue when running python2 pip on requirements file and when &#x27;removing intermediate container&#x27;. I tried to change ownership, run as root. The image which I run does not have file with this ID. Weird thing.\n","author":"tomasztyzaj"},{"text":"For us this was caused by {{pip install --upgrade pip}}. Not upgrading pip fixed the build (but may leave you with an old version of pip, of course).\n","author":"evsheino"},{"text":"Issue BCLOUD-18071 was marked as a duplicate of this issue.\n","author":"Aneita"},{"text":"I am experiencing the same issue while doing\n\n{code:python}\n{code}\n\non one of your packages/builds\n","author":"tasubo"},{"text":"Hey just an update on this issue.\n\nAs the pinned post above suggested we are removing the ability to be whitelisted to work around these issues (as we need to leave the change in place for security purposes).\n\nI have written this post however to assist you in fixing these issues for good in your builds (so they can continue to run in docker both with and without user namespace remapping).\n\n[Changes to make your containers more secure on Bitbucket Pipelines.|https://community.atlassian.com/t5/Bitbucket-articles/Changes-to-make-your-containers-more-secure-on-Bitbucket/ba-p/998464#M89]\n\nKind Regards,\n\nNathan Burrell\n","author":"lassian"},{"text":"Hey @nburrell , would help if you or your team actually read these messages. The \"Container ID Cannot Be Mapped to Host ID Error” we are getting is not for a single file, as your pinned post suggests. And simply flagging it as a problem with the base image doesn&#x27;t help any of us relying on python.\n","author":"Ashvin Narayanan"},{"text":"This will probably get worse for python repos as those with pip cache optimizations cycle through caches: I am assuming that the cache feature is unaffected, yet when the cache is out of date or deleted, the image will then be subject to this change.\n\nThe solution of finding the files in the image is null for pip installs.  There appears to be a process where pip may have intermediate files in userns sensitive areas in the setup process that are then deleted.  This makes it impossible to find the files dynamically.\n\nFor a work-around (python pip installers with issues), try using the pip --target flag to control where this process takes place:\n\n{code}\n#!python\n\nRUN mkdir -p /src\nRUN pip install --no-cache-dir --target=/src -r requirements.txt\nRUN export PYTHONPATH=$PYTHONPATH:/src\n{code}\n\nThis way /src should already be user mappable, though you may have to chown of the /src directory.\n\nOn another branch of this issue:\\\\\nhttps://github.com/moby/moby/issues/34645 has not been closed.  Using multi-stage builds to copy files from docker images is now a broken feature in bitbucket pipelines without hacking around.\n","author":"GrahamYennie"},{"text":"Removing pip upgrade fixed the issue temporarily.\n","author":"Shijun Zhou"},{"text":"Our pipelines are experiencing this issue too unfortunately, unable to copy the /vendor/ folder from the composer install for some reason.\n\nUpdate: We managed to ‘fix’ this issue by chowning all our dependencies to root, then copying them and afterwards chown them back to the required user.\n","author":"Maarten van der Heijden"},{"text":"This is related to issue 34645 above I would assume.  If you’re fortunate enough to own the image that you are building from, that is exactly the change you have to make.\n","author":"GrahamYennie"},{"text":"im having this issue:\\\\\n{{Service &#x27;web&#x27; failed to build: failed to copy files: failed to copy directory: Error processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID}}\n\n‌\n\nyour solution does not work at all:\n\nTo find the file, first get the invalid UID/GID from the error message and run the following command on the files within the container.\n\n{code}\nfind / -uid|-gid <invalid-uid-or-guid> -ls\n{code}\n\nTo fix the ownership of the file use the following command\n\n{code}\nchown -R UID_IN_RANGE:GID_IN_RANGE filename\n{code}\n\n‌\n\nthis is what i get when i run the find command:\n\nfind / -uid|-gid 165586 -ls\\\\\nfind: invalid argument {{-uid&#x27; to}}-uid&#x27;\\\\\nTry &#x27;find --help&#x27; for more information.\\\\\nbash: -gid: command not found\n","author":"abdulachik"},{"text":"Use either:\n\n{code}\nfind / -uid 165586 -ls\n{code}\n\n{code}\nfind / -gid 165586 -ls\n{code}\n\n-uid | -gid was meant as a choice.\n","author":"Hector Canto"},{"text":"sorry, i forgot to mention that i did tried that too\n\nroot@85ecddb7a7d8:/opt/app# find / -uid 165586 -ls\\\\\nfind: ‘/proc/62/task/62/fd/6’: No such file or directory\\\\\nfind: ‘/proc/62/task/62/fdinfo/6’: No such file or directory\\\\\nfind: ‘/proc/62/fd/5’: No such file or directory\\\\\nfind: ‘/proc/62/fdinfo/5’: No such file or directory\\\\\nroot@85ecddb7a7d8:/opt/app# find / -gid 165586 -ls\\\\\nfind: ‘/proc/63/task/63/fd/6’: No such file or directory\\\\\nfind: ‘/proc/63/task/63/fdinfo/6’: No such file or directory\\\\\nfind: ‘/proc/63/fd/5’: No such file or directory\\\\\nfind: ‘/proc/63/fdinfo/5’: No such file or directory\\\\\nroot@85ecddb7a7d8:/opt/app#\n\nit really does not return something useful\n","author":"abdulachik"},{"text":"Looks like {{userns}} is not ready for production use given the way is breaks normal Docker builds. We would like to evaluate Pipelines but all of our builds are Docker multi-stage builds so everything is going to be broken right now :cry:\n\nNote that this issue doesn&#x27;t affect Docker in Docker build systems that don&#x27;t use {{userns}}. AWS CodeBuild lets you run multi-stage, and and even {{--priveledged}} builds if you must, without this issue. The downside there is that build layer caches only last hours there whereas Pipelines will keep caches for a week. You can work around that by [pulling your previous builds as caches|https://github.com/aws/aws-codebuild-docker-images/issues/26#issuecomment-386913125] and this might also be useful for larger Bitbucket Pipeline builds since layer caches are limited to 1GB.\n","author":"Aaron Roydhouse"},{"text":"I can build image locally.but it failed when using Bitbucket pipeline.\n\n{code}\nError processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID\n{code}\n","author":"zh_focus"},{"text":"I had this same problem but was able to solve it by using a different python image in my dockerfile. In my case I used \r\n{code:java}\r\nFROM python:3.6\r\n{code}\r\ninstead of\r\n{code:java}\r\nFROM python:3.7\r\n{code}\r\nAnd afterwards the container was built without issue. I imagine one could also use a different image, like an alpine one for example.","author":"wlansu"},{"text":"+1 \r\n\r\nI think I am having the same issue with a multi-stage build\r\n\r\nthe offending line in the Dockerfile is \r\n\r\n{{COPY --from=myimage:latest }}{{/usr/local/lib/myfiles /usr/local/lib/myfiles}}\r\n\r\nthis produces an error\r\n\r\n{{failed to copy files: failed to copy directory: Error processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID}}\r\n\r\nI checked the permissions for the files in myimage:latest and they are owned by root:root\r\n\r\nAny advice would be greatly appreciated\r\n\r\n ","author":"motionsignaltechnologies"},{"text":"I'm noticing this error, but not consistently. My relevant build is multi-stage, and I have seen failures both in starting a new stage as well as copying from a previous stage - the error is always\r\n\r\n{{Error processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID}}","author":"Jay Miller"},{"text":"Same here, saw in back in December once, but now it's started happening more consistently with a multistage build [id in my case: 165569].\r\n\r\n \r\n\r\nRight now no builds are passing, even though just days ago it seemed more or less fine (only one happening before), no changes performed to Dockerfiles or build instructions!\r\n\r\n \r\n\r\nAt the very least, I would expected more helpful information from an error.","author":"Andrei Dascalu"},{"text":"I am wondering if this thing also applies with Pipelines: [https://circleci.com/docs/2.0/high-uid-error/]","author":"Andrei Dascalu"},{"text":"any resolution on this one yet? It has been reported almost 18(!)  months ago and still open. ","author":"Deleted Account"},{"text":"After quite a bit of troubleshooting, here is what I found and finally works for us:\r\n * local dev environment: `Docker version 19.03.5, build 633a0ea`\r\n * the following code works fine locally but fails with the subject error on Bitbucket Pipeline (excerpt from `Dockerfile`):\r\n\r\n{code:java}\r\nFROM tomcat:9-jdk11-openjdk-slim as tomcat\r\nARG JDK_VERSION=\"11\"\r\nENV CATALINA_HOME=/usr/local/tomcat\r\nRUN chown -R 10000:10000 \"${CATALINA_HOME}\" && \\\r\n    chmod -R o-rwx \"${CATALINA_HOME}\" && \\\r\n    chmod 750 \"${CATALINA_HOME}/logs\" \"${CATALINA_HOME}/temp\" && \\\r\n    ...\r\n\r\nFROM debian:buster-slim\r\nARG JDK_VERSION=\"11\"\r\nENV DEBIAN_FRONTEND=noninteractive \\\r\n    JAVA_HOME=/usr/local/openjdk-\"${JDK_VERSION}\" \\\r\n    CATALINA_HOME=/usr/local/tomcat \\\r\n    ...\r\n\r\n# Copy artefacts\r\n# (2020-02-27) Bitbucket still on old Docker version - 18.09.1, that doesn't support UID/username in chown\r\n# hardcoded only\r\n# https://jira.atlassian.com/browse/BCLOUD-19284\r\n# hardcoded UID as per https://github.com/moby/moby/issues/35018 (2019-05-17)\r\n# `--chown=10000:10000` instead of `--chown=${ENV_VAR}:${ENV_VAR}`\r\nCOPY --chown=10000:10000 --from=tomcat \"${JAVA_HOME}\" \"${JAVA_HOME}\"\r\nCOPY --chown=10000:10000 --from=tomcat \"${CATALINA_HOME}\" \"${CATALINA_HOME}\"{code}\r\nCopying OpenJDK worked on Bitbucket with or without direct `chown`.\r\n\r\nThe point of failure was/is the last line, i.e. an attempt to copy Tomcat folder.\r\n\r\n \r\n * Bitbucket env: `Docker version 18.09.1, build 4c52b90` - BCLOUD-19284 has been open since Aug 2019, 18.09.1 more than a year old but Atlassian is still there.\r\n * the final code that works both locally and with Bitbucket Pipeline:\r\n\r\n{code:java}\r\nFROM tomcat:9-jdk11-openjdk-slim as tomcat \r\nARG JDK_VERSION=\"11\"\r\nENV CATALINA_HOME=/usr/local/tomcat \r\nRUN chmod -R o-rwx \"${CATALINA_HOME}\" && \\                                # note removal of the `chown` here, comparing to the above\r\n    chmod 750 \"${CATALINA_HOME}/logs\" \"${CATALINA_HOME}/temp\" && \\\r\n    ...\r\n\r\nFROM debian:buster-slim \r\nARG JDK_VERSION=\"11\"\r\nENV DEBIAN_FRONTEND=noninteractive \\\r\n    JAVA_HOME=/usr/local/openjdk-\"${JDK_VERSION}\" \\\r\n    CATALINA_HOME=/usr/local/tomcat \\\r\n    ...\r\n\r\n# Copy artefacts\r\n# (2020-02-27) Bitbucket still on old Docker version - 18.09.1, that doesn't support UID/username in chown\r\n# hardcoded only\r\n# https://jira.atlassian.com/browse/BCLOUD-19284\r\n# hardcoded UID as per https://github.com/moby/moby/issues/35018 (2019-05-17)\r\n# `--chown=10000:10000` instead of `--chown=${ENV_VAR}:${ENV_VAR}`\r\nCOPY --from=tomcat \"${JAVA_HOME}\" \"${JAVA_HOME}\"                          # chown or not - doesn't matter here\r\nCOPY --chown=10000:10000 --from=tomcat \"${CATALINA_HOME}\" \"${CATALINA_HOME}\"\r\n{code}\r\nTo answer some [potential] questions in advance:\r\n * a specific UID is needed for an app running under Tomcat and its requirement to write to a specific folder outside of `/usr/local/tomcat`\r\n * multi-stage build helped to save about 300MB in the final image (870 vs 578MB)\r\n\r\n ","author":"Deleted Account"},{"text":"@alexp\r\n\r\n \r\n\r\nThis is what I got from Atlassian on a support ticket I opened for this a few days ago\r\n{noformat}\r\nDocker user namespace configurations are stored within the following two files '/etc/subuid' and '/etc/subgid', which looks as follows on Bitbucket Pipelines:pipelines:100000:65536\r\nFor instance, with \"pipelines:100000:65536\" it means that user pipelines can use 65536 user ids starting at 100000. Now a user ID 165569 on a host container would refer to 165569 - (100000+65536) = 33, which is the following user in your case \"www-data\".{noformat}\r\nIn my case the error mentioned user id 165569, which points to my container user id 33 as per pipelines settings. This was confirmed to have to do with user namespacing in pipelines, which is technically a security feature.\r\n\r\nIn my case, the effect was that I could only run build steps that require file changes in the container as \"root\", but in the last steps of my build I could change ownership to the final intended user (www-data).\r\n\r\nIt does feel like a workaround though.\r\n\r\n ","author":"Andrei Dascalu"},{"text":"What worked for me with pip or pip3 was to add the --user parameter to pip install","author":"Walied Othman"},{"text":"I can't build an image from amazon/aws-sam-cli-build-image-nodejs12.x or run this command in my pipeline:\r\n{code:java}docker image pull amazon/aws-sam-cli-build-image-nodejs12.x{code}\r\n\r\nIt says:\r\n{code:java}failed to register layer: Error processing tar file(exit status 1): Container ID 1230228 cannot be mapped to a host ID{code}\r\n\r\nThis manifests itself in a complete inability for Bitbucket Pipelines to use AWS CDK's NodejsFunction.","author":"Joshua Kellendonk"},{"text":"Hey, have you tried to add the user parameter ?\r\n~[{color:#a9a9a9}TweakBox{color}|https://tweakbox.mobi/] [{color:#a9a9a9}Tutuapp{color}|https://tutuappx.com/]~","author":"burbigo deen"},{"text":"@burbigo deen: Were you asking me? If so, what user parameter should I use for docker image pull? All I see are, `all-tags`, `disable-content-trust`, `platform`, and `quiet` options alongside the name, tag, and digest parameters.\r\n\r\nEdit: Fixed markdown strikethroughs.","author":"Joshua Kellendonk"},{"text":"My problem was precisely the same as Andrei's (i.e. www-data). Originally:\r\n * My intermediate stage created files with www-data ownership\r\n * A later stage copied those www-data owned files (which failed on Bitbucket Pipelines for the reasons noted above).\r\n\r\nMy fix was:\r\n * In the intermediate stage, change ownership back to \"root:root\"\r\n * On the later stage, copy the files but chown back to \"www-data:www-data\", e.g. either via separate RUN command or with the \"--chown=...\" parameter in the COPY command.\r\n\r\n*TL;DR:* Ensure the permissions are finally *root:root* in the intermediate stage _prior to moving on_ to subsequent stages, then ensure you update permissions back (if necessary).\r\n\r\nHope this helps anyone else looking for a quick fix. ","author":"Patrick Nelson"},{"text":"I can't believe that i lost a full day on this.. The problem for me was the *pip --upgrade* run in the docker file... I removed that and it magically worked...","author":"luca"},{"text":"It seems like this issue happens when some Linux tool like `tar`, `cp` changes OWNER of files. So, you need to find out that step in your docker image file. And change owner again in the same step (same context).\r\n\r\nFor example. Let's say following line was created file with a different owner \r\n\r\n \r\n{code:java}\r\nRUN curl https://example.com/example.tar.gz | tar xvz \r\n{code}\r\nThen you need to do turn back to your docker \"owner\" user, For example: when the owner is \"root\" should be like follows\r\n{code:java}\r\nRUN curl https://example.com/example.tar.gz | tar xvz && chown -R root:root ./\r\n{code}\r\nif introduces a conditional clause More (Definitions, Synonyms, Translation)","author":"Zogoo"},{"text":"TL;DR: Start from your baseimage and check for the ID that is creating the problem using commands in your dockerfile. Use \"problem_id = error_message_id - 100000 - 65536\" to find the uid or gid that is not supported. Chown copies the files that are modified inflating your docker image.\r\n\r\nThe details:\r\n\r\nWe were using base image tensorflow/tensorflow:2.2.0-gpu and though we tried to find the problem ourselves, we were looking too late in our Dockerfile and making assumptions that were wrong.With help from Atlassian support we found that /usr/local/lib/python3.6 contained many files belonging to group staff (gid = 50)\r\n\r\n*Assumption 1*: Bitbucket pipelines have definitions for the standard \"linux\" user ids and group ids.\r\n\r\n*Reality*: Bitbucket pipelines only define a subset of the standard users and groups. Specifically they do not define group \"staff\" with gid 50. Your Dockerfile base image may define group staff (in /etc/groups) but the Bitbucket pipeline is run in a docker container without that gid. DO NOT USE\r\n{quote}RUN cat /etc/group && RUN /etc/passwd\r\n{quote}\r\nto check for ids. Execute these commands as Bitbucket pipeline commands in your script.\r\n\r\n*Assumption 2*: It was something we were installing that was breaking the build.\r\n\r\n*Reality*: Although we could \"move the build failure around\" by adjusting which packages we installed. This was likely just a case of some packages overwriting the ownership of pre-existing\r\n\r\n \r\n\r\nWe were able to find the files by using the relationship between the id in the error message and the docker build id of\r\n{quote}problem_id = error_message_id - 100000 - 65536\r\n{quote}\r\nAnd used the computed id value (50) to fined the files early in our Dockerfile:\r\n{quote}RUN find / -uid 50-ls\r\n RUN find / -gid 50 -ls\r\n{quote}\r\nFor example: \r\n{quote}Error processing tar file(exit status 1): Container ID 165586 cannot be mapped to a host ID\r\n 50 = 165586 - 100000 - 65536\r\n{quote}\r\n*Final solution* (for us):\r\n\r\nAdding this command early to our Dockerfile: \r\n{quote}RUN chown -R root:root /usr/local/lib/python*\r\n{quote}\r\nFixed the Bitbucket pipeline build problem, but also increases the size of our Docker image because Docker makes a copy of all of the files that are modified (contents or filesystem flags). We will look again at multi-stage builds to reduce the size of our docker images.\r\n\r\n ","author":"Jason Harrison"},{"text":"> Fixed the Bitbucket pipeline build problem, but also increases the size of our Docker image because Docker makes a copy of all of the files that are modified (contents or filesystem flags). We will look again at multi-stage builds to reduce the size of our docker images.\r\n\r\n@Jason Harrison,\r\n\r\nto keep the size of final Docker image small, do NOT override anything related to the prior stages in the final one. For example, the following will lead to the increased size:\r\n{code:java}\r\nFROM ... as stage_1\r\n...\r\n\r\nFROM ... as stage_2\r\n...\r\n\r\nFROM ... # final image\r\n\r\n...\r\nCOPY --from=stage_2 /opt/tomcat /opt/\r\nRUN chown -R root:root /opt/tomcat\r\n...{code}\r\n \r\n\r\na trick will be to copy properly and/or modify at an earlier stage:\r\n{code:java}\r\nFROM ... as stage_1 \r\n... \r\n \r\nFROM tomcat:9-jdk11-openjdk-slim as stage_2 \r\n... \r\n# whatever is needed\r\nRUN chmod -R o-rwx \"${CATALINA_HOME}\" && \\\r\n    chmod 750 \"${CATALINA_HOME}/logs\" \"${CATALINA_HOME}/temp\" && \\\r\n    rm -rf \"${JAVA_HOME}\"/jmods \\\r\n        \"${JAVA_HOME}\"/demo \\\r\n        \"${JAVA_HOME}\"/man \\\r\n        \"${CATALINA_HOME}\"/native-jni-lib \\\r\n        \"${CATALINA_HOME}\"/webapps.dist \\\r\n        \"${CATALINA_HOME}\"/webapps/*\r\n \r\nFROM ... # final image\r\n...\r\nCOPY --chown=${my_user}:${my_group} --from=stage_2 /opt/tomcat /opt/\r\n...\r\n{code}\r\n \r\n\r\n ","author":"Deleted Account"},{"text":"Editing my bitbucket-pipelines.yml with this fixed it for me:\r\n\r\n \r\n        script:\r\n          - export DOCKER_BUILDKIT=1","author":"Ryan Sweny"}]},{"summary":"Pull requests breaking when introducing changes to a submodule","key":"BCLOUD-17250","url":"https://jira.atlassian.com/browse/BCLOUD-17250","type":"Bug","priority":"","description":"Submodules in pull requests are not uncommon, but it appears if there is a change in a submodule or submodule has been removed from Source or Destination branch, or in certain conditions (renames of files + submodules) we throw a 500 error and the customer cannot view the diff nor merge the pull request using Bitbucket UI. \r\n\r\nExample of the error the end user might face is posted on the screen shot, you can view it from the Devtools console > network tab. \r\n\r\n*The workaround in those situations:* \r\n # view the Diff locally and merge it locally and then push the update back to Bitbucket remote repository \r\n # view the Diff locally and use API to merge the PRs\r\n\r\nAlso we should provide a better UI message to the end user to help them identify whey the error is coming up when trying to view the Diff for those PRs","createDate":"2018-09-28T20:55:36.000+0000","comments":[{"text":"Is there any update on this? Bitbucket is mostly useless to us now since I cannot use Pull Requests without doing them locally. We removed a submodule from our project.","author":"Bill Riess"},{"text":"Hey [~bill.riess] sorry for not responding here. Are you still having this problem? I haven't heard much else about it","author":"jarredc"}]},{"summary":"Remove default reviewers when their repository access has been revoked","key":"BCLOUD-17087","url":"https://jira.atlassian.com/browse/BCLOUD-17087","type":"Bug","priority":"","description":"Hi,\r\n\r\nEnv: Bitbucket Cloud\r\nPlan: Standard Plan\r\n\r\nI found the default reviewer for PR in a repo has some issues:\r\n # When an employee left the company, we remove him/her from the bitbucket plan. But the user still stays as a reviewer in the team repositories. And you have to remove him/her as the default reviewer from each repository.\r\n # You have to add individual default reviewers instead of adding the whole user group.\r\n\r\nExpect result:\r\n\r\nOnce the user has been removed from the plan, he/she should be removed from any repositories as the default reviewer.\r\n\r\n \r\n\r\n*The second scenario where this is reproducible*\r\n # Add user to default review.\r\n # Create a PR thru a commit, the user appears in the list as expected.\r\n # Remove the user from WS = the user no longer appears in the Default Reviewer under the Repo settings (as expected).\r\n # Create another PR through a commit, the list appearing contains the current users from Default and the removed user from the Default reviewer list.\r\n\r\n ","createDate":"2018-09-01T21:49:03.000+0000","comments":[{"text":"Thanks for reporting this! We&#x27;ll take a look.\n\n(Your second request is being tracked here: BCLOUD-10833)\n","author":"Alastair Wilkes"},{"text":"This a great inconvenience. My use-case I have 100&#x27;s of affected repos\n","author":"magnuspwhite"},{"text":"Any update about this?\n\nThere are many people asking for there feature since 2015 in Atlassian Community\n\n[How do I remove people from the Recent list on a pull request?|https://community.atlassian.com/t5/Answers-Developer-Questions/How-do-I-remove-people-from-the-Recent-list-on-a-pull-request/qaq-p/532837%3FtempId%3DeyJvaWRjX2NvbnNlbnRfbGFuZ3VhZ2VfdmVyc2lvbiI6IjEuMCIsIm9pZGNfY29uc2VudF9ncmFudGVkX2F0IjoxNTY3NjE5NTI2OTAwfQ%253D%253D]\n","author":"carlosgomezg"},{"text":"Hey Friends,  We're spending a lot of focus on some other key PR related issues such as performance, but we will circle back on this one eventually.  Sorry it's taking us a while, there are some other more pressing issues to fix first.  Sincerely, Bitbucket PM","author":"jarredc"},{"text":"Anyone have a workaround for this with some REST api magic?","author":"halil.at.fb"},{"text":"Any update on this ticket?  Curious if it's planned to be picked up and worked on anytime soon.","author":"kevin.gibbs"},{"text":"Ended up adding a uBlock origin rule in order to remove the element I didn't want to see\r\n\r\n{{##[data-display-name=\"Name to remove\"]}}","author":"Michael Best"},{"text":"Also currently running into this. It's causing some pretty large issues as we have a lot of automation that sends in PRs to our repos. We have a few hundred repos and when someone leaves, all of those automated prs fail forcing us to manually go through every single repo. Is there any status update on this?","author":"Chris Kipp"},{"text":"I should add some further information to this ticket since I was led here from a support issue.\r\n\r\nMy users were UNABLE to create any pull request on repositories where the deactivated user was still a default reviewer, which is how I found the issue.","author":"Alex Harper"},{"text":"We also run into this. If you are deep in automation, this will be a real blocker and exactly the opposite of automation. Would be nice to see this issue getting a little more priority. ","author":"Thomas Kekeisen"},{"text":"This issue still exists. I create a PR and a person who got removed from a company still shows up in there. I checked all repo default reviewer settings and there's no one there.","author":"Kristen Ungur"},{"text":"This problem still persists. I wonder what is the reason why it has not been solved for years?","author":"Sami Çoktalaş"}]},{"summary":"Unable to create Access key at repo or user level","key":"BCLOUD-16565","url":"https://jira.atlassian.com/browse/BCLOUD-16565","type":"Bug","priority":"","description":"Is not posible to add a SSH key from either the Repo -> Settings -> Access keys -> Add key\\\\\nnor User -> Settings -> SSH keys.\n\nThe loading spinner spins forever but the ssh key is not created.\n\nI&#x27;ve tried in Safari and Chrome.\n\nThanks.","createDate":"2018-06-22T11:45:18.000+0000","comments":[{"text":"Same here.\n\n{code}\nError: Syntax error, unrecognized expression: * key\n  * That SSH key is invalid.\njquery.js:1458\n{code}\n","author":"janis_elmeris_magebit"},{"text":"!3636972052-Screen%20Shot%202018-06-22%20at%2019.37.59.png|thumbnail!\n\nYes I found in the developer console that  the api returns error 400  when the key is in invalid format\\\\\nor when the it is already used\n\nbut the UI doesn&#x27;t show any alert or popup, just the spinning loading\n","author":"alfonsnp"},{"text":"Oops, I tried to copy my private key there, not the public one.\n\nStill, an error message should be displayed anyway.\n","author":"janis_elmeris_magebit"},{"text":"Yes, In my case the public key was in wrong format, if anyone has the same problem this could save you some time.\n\nif you extracted your public key in rsa format with\n\n{code}\n\nopenssl rsa -in myPrivateKey.pem -pubout > myPublicKey.pub\n\n{code}\n\nYou can convert the key to right format with\n\n{code}\n\nssh-keygen -f myPublicKey.pub -i -mPKCS8 > myPublicKeyFormated.pub\n\n{code}\n","author":"alfonsnp"},{"text":"Yes, I tried to public keys, one of which worked, the other one - didn&#x27;t.\n","author":"janis_elmeris_magebit"},{"text":"I get the same issue, when adding as a new key the content of a ~/.ssh/id_rsa.pub file. I believe this format of a public key has been accepted, without issues, say a few months ago...?\n","author":"esskov_tc"},{"text":"It turned out that, in my case, the problem was I tried to use the same key to access 2 repos on different accounts - which is apparently not allowed. Yes, an error message would have been nice :)\n","author":"esskov_tc"},{"text":"Attachment 3636972052-Screen%20Shot%202018-06-22%20at%2019.37.59.png has been added with description: Originally embedded in Bitbucket issue #16565 in site/master","author":"alfonsnp"}]},{"summary":"Bug in authorization plugin","key":"BCLOUD-15844","url":"https://jira.atlassian.com/browse/BCLOUD-15844","type":"Bug","priority":"","description":"Summary: *using the Docker API for creating containers is not possible, which prevents us from moving our builds to Bitbucket Pipelines (hence _blocker_). An error occurs in the authorization plugin.*\n\nAs discussed [here|https://community.atlassian.com/t5/Bitbucket-questions/create-continer-authorization-denied-by-plugin-pipelines-Command/qaq-p/731364].\n\nFollowing minimal test in Pipelines configuration ({{bitbucket-pipelines.yml}}):\n\n{code}\n#!yaml\nscript:\n  ...\n  - \"curl -X POST http://localhost:2375/containers/create -d &#x27;{\\\"image\\\":\\\"hello-world\\\", \\\"name\\\":\\\"hello_2\\\"}&#x27; -H &#x27;Content-Type: application/json&#x27;\"\n{code}\n\nThat leads to the following error when you look under the {{docker}} tab:\n\n{code}\n2018/03/14 17:45:11 http: panic serving @: runtime error: invalid memory address or nil pointer dereference\ngoroutine 5 [running]:\nnet/http.(*conn).serve.func1(0xc42008c8c0)\n    /usr/local/go/src/net/http/server.go:1697 +0xd0\npanic(0x6a5000, 0x880800)\n    /usr/local/go/src/runtime/panic.go:491 +0x283\nbitbucket.com/bitbucketci/docker/pkg/authz/request.(*ContainerCreateBodyAuthorizer).Authz(0xc4200e2300, 0xc420348090, 0x29, 0x2a, 0x1)\n    /go/src/bitbucket.com/bitbucketci/docker/pkg/authz/request/body_authorizer.go:25 +0xa6\nbitbucket.com/bitbucketci/docker/pkg/authz/request.(*Authorizer).Authz(0xc4200e2320, 0x0, 0x0, 0x0, 0x0, 0xc420352028, 0x4, 0xc420350020, 0x12, 0xc420348090, ...)\n    /go/src/bitbucket.com/bitbucketci/docker/pkg/authz/request/authorizer.go:31 +0xd5\nbitbucket.com/bitbucketci/docker/pkg/authz/plugin.(*AuthzPlugin).AuthZReq(0xc4200e3240, 0x0, 0x0, 0x0, 0x0, 0xc420352028, 0x4, 0xc420350020, 0x12, 0xc420348090, ...)\n    /go/src/bitbucket.com/bitbucketci/docker/pkg/authz/plugin/authz_plugin.go:90 +0x100\nbitbucket.com/bitbucketci/docker/vendor/github.com/docker/go-plugins-helpers/authorization.(*Handler).initMux.func1(0x0, 0x0, 0x0, 0x0, 0xc420352028, 0x4, 0xc420350020, 0x12, 0xc420348090, 0x29, ...)\n    /go/src/bitbucket.com/bitbucketci/docker/vendor/github.com/docker/go-plugins-helpers/authorization/api.go:118 +0xa0\nbitbucket.com/bitbucketci/docker/vendor/github.com/docker/go-plugins-helpers/authorization.(*Handler).handle.func1(0x8572c0, 0xc42035a000, 0xc420346000)\n    /go/src/bitbucket.com/bitbucketci/docker/vendor/github.com/docker/go-plugins-helpers/authorization/api.go:139 +0x144\nnet/http.HandlerFunc.ServeHTTP(0xc420010af0, 0x8572c0, 0xc42035a000, 0xc420346000)\n    /usr/local/go/src/net/http/server.go:1918 +0x44\nnet/http.(*ServeMux).ServeHTTP(0xc42007af30, 0x8572c0, 0xc42035a000, 0xc420346000)\n    /usr/local/go/src/net/http/server.go:2254 +0x130\nnet/http.serverHandler.ServeHTTP(0xc420089380, 0x8572c0, 0xc42035a000, 0xc420346000)\n    /usr/local/go/src/net/http/server.go:2619 +0xb4\nnet/http.(*conn).serve(0xc42008c8c0, 0x8577c0, 0xc42005c340)\n    /usr/local/go/src/net/http/server.go:1801 +0x71d\ncreated by net/http.(*Server).Serve\n    /usr/local/go/src/net/http/server.go:2720 +0x288\ntime=\"2018-03-14T17:45:11.730269200Z\" level=warning msg=\"Unable to connect to plugin: /run/docker/plugins/pipelines.sock/AuthZPlugin.AuthZReq: Post http://%2Frun%2Fdocker%2Fplugins%2Fpipelines.sock/AuthZPlugin.AuthZReq: EOF, retrying in 1s\"\ntime=\"2018-03-14T17:45:12Z\" level=info msg=\"Pipelines plugin request authorization.\" allowed=false method= plugin=pipelines uri=\ntime=\"2018-03-14T17:45:12.731391033Z\" level=error msg=\"AuthZRequest for POST /containers/create returned error: plugin pipelines failed with error: AuthZPlugin.AuthZReq: EOF\\n{\\\"Allow\\\":false,\\\"Msg\\\":\\\"Command not supported.\\\"}\\n\"\ntime=\"2018-03-14T17:45:12.731446791Z\" level=error msg=\"Handler for POST /containers/create returned error: plugin pipelines failed with error: AuthZPlugin.AuthZReq: EOF\\n{\\\"Allow\\\":false,\\\"Msg\\\":\\\"Command not supported.\\\"}\\n\"\n{code}","createDate":"2018-03-14T18:16:42.000+0000","comments":[{"text":"Thanks for the report, Sander. Does this work locally for you with the same command?\n\nOne potential workaround in Pipelines is to use the Docker CLI which is automatically mounted in your build container for use in your script. In your case, the equivalent command would be something like:\n\n{code:yaml}\nscript:\n  - docker container create --name hello_2 hello-world\n{code}\n\nSo we can prioritise this bug, can you explain a bit more about why you&#x27;re using the Docker REST API rather than the CLI in your build process?\n","author":"Matt Ryall"},{"text":"This is a Java project with JUnit unit tests. Some of these are arguably integration tests. But they are designed such that they are self-contained in the sense that the test class does its own setup and teardown. This means its own database, its own mocked other-service dependencies. This is very beneficial for having tests that are independent and reproducible. A common strategy to do this is having an in-memory (Java) database, but unfortunately our application has hard-wired dependencies on PostgreSQL and some of its extensions. Therefore we&#x27;re using a PostgreSQL Docker container for the database. This container gets spun up and down, before resp. after each individual test class. To do this, we&#x27;re relying on the commonly-used [Spotify Docker Client|https://github.com/spotify/docker-client] (as part of our test setup), which works with the Docker API. In fact, I feel this is an appropriate use of the Docker API, and preferable over using the Docker CLI (as that would require calling the Docker CLI from Java, which isn&#x27;t the most portable solution, or doing the setup before and after the entire test run using some other scripting, in which case we would be losing the granularity of a per-test database). With the Docker API we have a simpler requirement on the build environment, and the build becomes more portable. Except that it doesn&#x27;t work in Bitbucket Pipelines. The same _does_ work in other environments (such as \"locally\"). The Spotify Docker Client is actually widely used for all sorts of similar things. And it&#x27;s in fact only the \"create container\" command that isn&#x27;t working.\n","author":"Sander Verhagen"},{"text":"Hello.\\\\\nSame problem with [bmuschko/gradle-docker-plugin|https://github.com/bmuschko/gradle-docker-plugin]. On a attempt to create container with \"DockerCreateContainer\" the error message from pipeline is {\"message\":\"authorization denied by plugin pipelines: Command not supported.\"}.\\\\\nThank you.\n","author":"robertpancu"},{"text":"Thanks for the explanation, guys. We&#x27;ll see what we can do to fix this.\n\nIn case it&#x27;s useful, another (also non-portable) workaround is to use [service containers|https://confluence.atlassian.com/bitbucket/use-services-and-databases-in-bitbucket-pipelines-874786688.html] for starting your databases or other dependencies, then configure your code under test with an external database like you do in production. I realise you then can&#x27;t use exactly the same code as running via Java locally, but it is probably the best option for running these tests in Pipelines until we can rectify this issue.\n","author":"Matt Ryall"},{"text":"I&#x27;m using {{testcontainers}} ([https://www.testcontainers.org/](Link URL)) for running db instance in container.\n\nHere is the code:\n\n{code}\n@ClassRule\npublic static MySQLContainer mySqlContainer = new MySQLContainer(\"mysql:5.6.40\");\n{code}\n\nHere is my pipeline config:\n\n{code}\n# This is a sample build configuration for Java (Maven).\n# Check our guides at https://confluence.atlassian.com/x/zd-5Mw for more examples.\n# Only use spaces to indent your .yml configuration.\n# -----\n# You can specify a custom docker image from Docker Hub as your build environment.\nimage: maven:3.3.9\n\npipelines:\n  default:\n    - step:\n        caches:\n          - maven\n        script: # Modify the commands below to build your repository.\n          - docker pull mysql:5.6.40\n          - mvn clean install\n          \noptions:\n  docker: true\n{code}\n\nWhile during i&#x27;m having the following errors ({{docker pull}} finished successfully):\n\n{code}\n08:08:56.066 [main] INFO  DockerClientFactory - Docker host IP address is localhost\n08:08:56.227 [main] INFO  DockerClientFactory - Connected to docker: \n  Server Version: 17.12.0-ce\n  API Version: 1.35\n  Operating System: Alpine Linux v3.7 (containerized)\n  Total Memory: 32171 MB\n08:08:57.182 [testcontainers-netty-1-6] ERROR ResultCallbackTemplate - Error during callback\ncom.github.dockerjava.api.exception.DockerException: {\"message\":\"authorization denied by plugin pipelines: Command not supported.\"}\n\tat com.github.dockerjava.netty.handler.HttpResponseHandler.channelRead0(HttpResponseHandler.java:111) [testcontainers-1.7.2.jar:na]\n\tat com.github.dockerjava.netty.handler.HttpResponseHandler.channelRead0(HttpResponseHandler.java:33) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1342) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:934) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) [testcontainers-1.7.2.jar:na]\n\tat org.testcontainers.shaded.io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138) [testcontainers-1.7.2.jar:na]\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.211 sec <<< FAILURE!\nname.antonsmirnov.apptogether.dao.DeveloperDaoTest  Time elapsed: 2.211 sec  <<< ERROR!\njava.lang.ExceptionInInitializerError\n\tat sun.misc.Unsafe.ensureClassInitialized(Native Method)\n\tat sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:43)\n\tat sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:156)\n\tat java.lang.reflect.Field.acquireFieldAccessor(Field.java:1088)\n\tat java.lang.reflect.Field.getFieldAccessor(Field.java:1069)\n\tat java.lang.reflect.Field.get(Field.java:393)\n\tat org.junit.runners.model.FrameworkField.get(FrameworkField.java:73)\n\tat org.junit.runners.model.TestClass.getAnnotatedFieldValues(TestClass.java:230)\n\tat org.junit.runners.ParentRunner.classRules(ParentRunner.java:255)\n\tat org.junit.runners.ParentRunner.withClassRules(ParentRunner.java:244)\n\tat org.junit.runners.ParentRunner.classBlock(ParentRunner.java:194)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:362)\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)\n\tat org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)\n\tat org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)\nCaused by: com.github.dockerjava.api.exception.DockerException: {\"message\":\"authorization denied by plugin pipelines: Command not supported.\"}\n\tat com.github.dockerjava.netty.handler.HttpResponseHandler.channelRead0(HttpResponseHandler.java:111)\n\tat com.github.dockerjava.netty.handler.HttpResponseHandler.channelRead0(HttpResponseHandler.java:33)\n\tat org.testcontainers.shaded.io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n\tat org.testcontainers.shaded.io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:438)\n\tat org.testcontainers.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\n\tat org.testcontainers.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)\n\tat org.testcontainers.shaded.io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:253)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n\tat org.testcontainers.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1342)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n\tat org.testcontainers.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n\tat org.testcontainers.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:934)\n\tat org.testcontainers.shaded.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)\n\tat org.testcontainers.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)\n\tat org.testcontainers.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\n\tat org.testcontainers.shaded.io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138)\n\tat java.lang.Thread.run(Thread.java:745)\n{code}\n","author":"4ntoine"},{"text":"Hi @4ntoine can you raise a ticket with atlassian support to investigate this, or alternatively provide me the logs of the docker daemon (you can get these from the docker tab on the step that has this error :)).\n\nThere is also a bug currently with docker and auth plugins as discussed here BCLOUD-15505 (its not just for the fabric8 maven plugin, almost all docker clients I&#x27;ve encountered will have to provide a work around for the actual bug in docker as they dont usually provide back fixes for bugs :( and for clients to maintain backwards compatibility will have to work around it), not saying that may be the case here but worth noting :)\n","author":"lassian"},{"text":"Hi, Nathan.\n\nI&#x27;m able to run it locally (with the same cmd {{mvn clean install}}) so it looks like i don&#x27;t have the bug and it can work.\n\nI will attach full pipeline log file.\\\\\nLet me know if it&#x27;s enough or if you need anything else.\n","author":"4ntoine"},{"text":"Are you running our auth plugin locally too? If not we have an auth plugin that we apply to the the docker daemon in pipelines :)\n\nThe bug i linked to and mentioned above is in how docker and auth plugins interact when given certain types of content-type headers.\n\nIll dig into your logs but as, maybe the framework you use is trying to use a potential insecure feature of docker that we also disallow via said auth plugin.\n\nThis page has a list of the arguments/commands we specifically disallow in pipelines via our auth plugin.\n\nhttps://confluence.atlassian.com/bitbucket/run-docker-commands-in-bitbucket-pipelines-879254331.html\n","author":"lassian"},{"text":"I just ran it locally with the pipelines auth plugin attached to the docker daemon using\n\n{code}\n#!xml\n\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.atlassian</groupId>\n  <artifactId>testcontainers-test</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>jar</packaging>\n\n  <name>docker</name>\n  <url>http://maven.apache.org</url>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n  </properties>\n\n  <dependencies>\n    <dependency>\n      <groupId>junit</groupId>\n      <artifactId>junit</artifactId>\n      <version>4.12</version>\n      <scope>test</scope>\n    </dependency>\n    <dependency>\n      <groupId>org.testcontainers</groupId>\n      <artifactId>mysql</artifactId>\n      <version>1.7.3</version>\n      <scope>test</scope>\n    </dependency>\n  </dependencies>\n</project>\n\n{code}\n\n{code}\n#!java\n\npackage com.atlassian;\n\nimport org.junit.ClassRule;\nimport org.testcontainers.containers.MySQLContainer;\n\npublic class AppTest {\n    @ClassRule\n    public static MySQLContainer mySqlContainer = new MySQLContainer(\"mysql:5.6.40\");\n\n    @org.junit.Test\n    public void test() {\n        mySqlContainer.getDatabaseName();\n    }\n}\n\n{code}\n\nAnd it failed, I dug into why and it appears that the MySQLContainer in its configure method tried to mount in as the mysql configuration file \"/etc/mysql/conf.d\" the file taken from the value of the parameter TC_MY_CNF which by default is outside of your $BITBUCKET_CLONE_DIR.\n\nIn pipelines the only directory shared between the build container and the docker daemon is the clone directory and we thus we only allow/support mounting of files into containers from directories beneath it.\n\nYou can reconfigure this according to https://www.testcontainers.org/usage/database_containers.html#using-an-init-script, I havent used this library before but so I cant tell to what exactly :(\n","author":"lassian"},{"text":"@nburrell, thanks for quick investigation!\n\nTest source code looks good.\\\\\nI&#x27;m still not sure what is \"pipelines auth plugin\". Can you explain so i will be able to reproduce it?\n\nI&#x27;m having similar tests and they run succesfully locally (but i did not attach any plugin intentionally except {{testcontainers}}), probably it makes sense.\n","author":"4ntoine"},{"text":"Sure, the auth plugin is a docker auth plugin as described here https://docs.docker.com/engine/extend/plugins_authorization. The custom one we run for pipelines simply filters all docker requests sent to the docker daemon and we disallow any potential malicious/exploitable docker arguments, as described here https://confluence.atlassian.com/bitbucket/run-docker-commands-in-bitbucket-pipelines-879254331.html.\n\nNow the reason we run this plugin, is that the pipelines build infrastructure is multi tenanted as in customers builds run on the same hardware, so we run the plugin to protect our customers (amongst a whole range of other protections aswell ;))\n\nNow the volume mount that is causing your pipeline to fail isnt malicious perse but due to the way the docker in daemon and build container interact we can only allow mounting of files beneath the directory at which we clone your repository, and the link above has how to configure test-containers to use a my-sql config script, you would I assume (ive never used this library so Im not 100% sure) have to change that property described in the link TC_MY_CNF to point to a file that is stored somwwhere beneath your clone directory this will than allow the mysql container to start.\n\nAlternatively rather than using this framework you could also setup your step with a service container (which  has examples using mysql as described here https://confluence.atlassian.com/bitbucket/use-services-and-databases-in-bitbucket-pipelines-874786688.html). That would mean however your local testing would be configured differently to your testing in pipelines, however im confident that the setting described above (TC_MY_CNF) will allow you to use that framework in pipelines aswell :)\n\nTo test docker with our auth plugin locally (similarly described here https://confluence.atlassian.com/bitbucket/debug-your-pipelines-locally-with-docker-838273569.html) you can use the following image https://hub.docker.com/r/atlassian/pipelines-docker-daemon/  with the following docker command\n\n{code}\n#!bash\n\ndocker run --privileged --name docker -d -p 2375:2375 --memory=1g --memory-swap=1g --memory-swappiness=0  atlassian/pipelines-docker-daemon:prod-stable\n{code}\n\nAnd than reconfigure test containers to use localhost:2375 (as described here https://www.testcontainers.org/usage.html#docker-environment-discovery) as the docker daemon to run containers in rather than the docker daemon you have on your machine :) This docker daemon with the auth plugin configured the same as we do in pipelines, and with the same memory limits as pipelines (not that I think your hitting those but is also a thing thats different to your machine).\n","author":"lassian"},{"text":"Ran into this issue and whether the docker API accepts the connection depends on whether there is content-length in the headers. A link to a related investigation: https://community.atlassian.com/t5/Bitbucket-questions/create-container-authorization-denied-by-plugin-pipelines/qaq-p/731364 and to a BB pipeline that demonstrate this issue: https://bitbucket.org/rnacher/docker-test-pipelines/addon/pipelines/home#!/results/1 .\\\\\nIt resulted in a pull request into the spotify docker client, so you can use that in the BB pipelines now if you correctly setup your client: https://github.com/spotify/docker-client/pull/1021\n","author":"Tomáš Witzany"},{"text":"I&#x27;m also having this issue. The error is the same :\n\n2018-08-13 07:16:33,085 ERROR - Error during callback\\\\\ncom.github.dockerjava.api.exception.DockerException: {\"message\":\"authorization denied by plugin pipelines: -v only supports $BITBUCKET_CLONE_DIR and its subdirectories\"}\n\nI&#x27;m using MySQL with testcontainers for testing and the build is running fine locally. Having to manually create the docker image is defeating the purpose of using the testcontainers because it&#x27;s main feature is to create the image with no additional effort from the developers.\n","author":"twocachalotes"},{"text":"Hi Pavlin,\n\nThis is currently due to how test containers configures the init script for the mysql test container (they try to mount it from a directory we dont support in pipelines due to security reasons) as discussed here:\n\nhttps://github.com/testcontainers/testcontainers-java/issues/700\n\nTo work around this you can either wait until the \"bug\" is fixed in test-containers or reconfigure where the my.cnf file is mounted from by following the instructions here:\n\nhttps://www.testcontainers.org/usage/database_containers.html#overriding-mysql-mycnf-settings\n\nIt also works locally and not in pipelines as we execute steps on shared infrastructure and use a docker authorization plugin to secure docker.\n\nKind Regards,\n\nNathan Burrell\n","author":"lassian"},{"text":"Attachment pipelineLog-12.txt.zip has been added with description: Originally attached to Bitbucket issue #15844 in site/master","author":"4ntoine"},{"text":"Hey Nathan,\r\n\r\nWhile I understand the purpose of the auth plugin to filter out malicious requests, is there any hopes, you can support Transfer-Encoding: chunked with unknown Content Length?","author":"Omar Sood"},{"text":"Got the same issue.\r\n\r\n \r\n\r\nAny ETA on a fix?","author":"Søren Jepsen"},{"text":"Hello,\r\n\r\nUnfortunately we cant just add support for Transfer-Encoding: Chunked as the issue itself isnt with the transfer-encoding directly.\r\n\r\nWe run an authorization plugin attached to every steps docker in docker daemon that inspects the payloads of all the requests to the docker daemon for potentially malicious arguments that would allow users to subvert the security of containers (such as --privileged containers) as we are running a multi tenanted environment we dont want users to be able to subvert this.\r\n\r\nHow this plugins work is that when the docker daemon receives a request from a client (either the docker-cli, curl, some client in your favourite language etc) it first forwards that request (both the request line e.g. uri and query params and request body) to any authorization plugins which than perform inspections of them and return either an allow or deny (with an optional message) response. see for further information on authorization plugins: [https://docs.docker.com/engine/extend/plugins_authorization/]\r\n\r\nNow unfortunately due to this line of code in the docker daemon [https://github.com/moby/moby/blob/master/pkg/authorization/authz.go#L58] \r\n{code:java}\r\nif sendBody(ctx.requestURI, r.Header) && r.ContentLength > 0 && r.ContentLength < maxBodySize {\r\n{code}\r\nRequest bodies are only forwarded to the docker daemon iff they are not for the /auth endpoint and are of content-type: application/json and have a content length that is > 0 and their content length is not > 1mb.\r\n\r\n \r\n\r\n\r\nNow unfortunately if your using transfer-encoding: chunked the content-length that most docker clients send through is 0 which is valid for that transfer encoding so that means the request body fails this request and the authorization plugin denies the request as we cant validate your request body doesnt contain any potentially malicious arguments.\r\n\r\nWell behaving clients may set the content-length but than there is still and issue in that the body isnt forwarded to the authorization plugin as the docker daemon doesnt first buffer in the request body so if we were to read it it would drain the request body and than the docker daemon would fail the request as it couldnt read the body of the drained stream.\r\n\r\nReally docker should improve as this affects not just pipelines but anyone using authorization plugins we are lucky enough to know of this and this can be exploited in other auth plugins who dont perform these extra validations of content-length.\r\n\r\nSo for now this is the reason why we cant support transfer-encoding: chunked.\r\n\r\n\r\nIll link this to the docker-java ticket as that is the client we see this request on the most and also test containers.\r\n[https://github.com/testcontainers/testcontainers-java/issues/3296]\r\n[https://github.com/docker-java/docker-java/issues/1467]\r\n\r\n\r\n\r\n\r\n ","author":"lassian"},{"text":"-Thank you for your explanation Nathan,-\r\n\r\n-Do you know how this works with the PUT container endpoint? Because they are definitely larger than 1mb in many cases and don't state the content length in the example in the docs?- \r\n\r\n-I'm asking because this is also an [issue when using the spring-boot-plugin|https://github.com/spring-projects/spring-boot/issues/22840] to build docker containers from a spring-boot application, but the team was open to update the POST request to create the container, if they would know that the subsequent PUT wouldn't run into the same issue.-\r\n\r\n \r\n\r\nI answered my question my self. In case of put container, the content type is application/x-tar and therefore, the authZ plugin is not used","author":"Omar Sood"},{"text":"Moved this to Long-term backlog awaiting a fix from Docker that allows us to support this.","author":"Mike Howells"},{"text":"Same issue hier. Trying to build a Graal native image via Micronaut. Getting a \r\n{code:java}\r\nStatus 403: {\"message\":\"authorization denied by plugin pipelines: Invalid request\"} {code}\r\nException is:\r\n{code:java}\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':createLambdaContainer'.\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:188)\tat org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:186)\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:174)\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\tat org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:402)\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:389)\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:382)\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:368)\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:61)Caused by: com.github.dockerjava.api.exception.DockerException: Status 403: {\"message\":\"authorization denied by plugin pipelines: Invalid request\"} \r\n\r\nat com.github.dockerjava.core.DefaultInvocationBuilder.execute(DefaultInvocationBuilder.java:249)\tat com.github.dockerjava.core.DefaultInvocationBuilder.post(DefaultInvocationBuilder.java:125)\tat com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:33)\tat com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:13)\tat com.github.dockerjava.core.exec.AbstrSyncDockerCmdExec.exec(AbstrSyncDockerCmdExec.java:21)\tat com.github.dockerjava.core.command.AbstrDockerCmd.exec(AbstrDockerCmd.java:35){code}\r\nPerhaps a Problem with docker-java or Micronaut.\r\n\r\n ","author":"Malte Hübner"},{"text":"*UPDATE:* I was able to resolve this by overriding the version of Gradle plugin {{com.bmuschko:gradle-docker-plugin}} to {{{}7.1.0{}}}.\r\n\r\nThis dependency had a transitive dependency to\r\n * {{com.github.docker-java:docker-java-core}} and\r\n * {{{}com.github.docker-java:docker-java-api{}}}.\r\n\r\nThese dependencies now are on version 3.2.10. Some more details can be found here: [https://github.com/docker-java/docker-java/issues/1467]\r\n\r\n \r\n\r\n ","author":"Malte Hübner"},{"text":"Malte Hübner, would you be able to share the build.gradle file that you used to achieve this fix? I am running into dependency conflict when trying to do this. Where did you specify those other packages explicitly?\r\n\r\nI have tried this:\r\n{quote}{{buildscript {}}\r\n{{    repositories {}}\r\n{{        gradlePluginPortal()}}\r\n         }\r\n{{    dependencies {}}\r\n{{        classpath 'com.bmuschko:gradle-docker-plugin:7.1.0'}}\r\n         }\r\n{{}}}\r\n{quote}\r\n{quote}{{plugins {}}\r\n{{    id(\"com.github.johnrengelman.shadow\") version \"7.1.2\"}}\r\n{{    id(\"io.micronaut.application\") version \"3.5.1\"}}\r\n{{}}}\r\n{quote}\r\n{quote}{{apply plugin: 'com.bmuschko.docker-remote-api'}}\r\n{quote}\r\n{quote}{{// other stuff}}\r\n{quote}\r\nAnd I get an error about \"docker\" packages conflicting:\r\n\r\n \r\n{quote}{{org.gradle.api.internal.plugins.PluginApplicationException: Failed to apply plugin 'com.bmuschko.docker-remote-api'.}}\r\n{{    ... 170 more}}\r\n{{Caused by: java.lang.IllegalArgumentException: Cannot add extension with name 'docker', as there is an extension already registered with that name.}}\r\n{{    at org.gradle.internal.extensibility.ExtensionsStorage.add(ExtensionsStorage.java:40)}}\r\n{{    at org.gradle.internal.extensibility.DefaultConvention.add(DefaultConvention.java:120)}}\r\n{{    at org.gradle.internal.extensibility.DefaultConvention.addWithDefaultPublicType(DefaultConvention.java:212)}}\r\n{{    at org.gradle.internal.extensibility.DefaultConvention.create(DefaultConvention.java:126)}}\r\n{{    at com.bmuschko.gradle.docker.DockerRemoteApiPlugin.apply(DockerRemoteApiPlugin.groovy:44)}}\r\n{{    at com.bmuschko.gradle.docker.DockerRemoteApiPlugin.apply(DockerRemoteApiPlugin.groovy)}}\r\n{quote}\r\nThank you so much in advance for any insight you could provide.","author":"Tyler Davis"},{"text":"@Tyler Davis sure, here is my (simplified) build.gradle:\r\n\r\n \r\n{code:java}\r\n\r\nbuildscript {\r\n    repositories {\r\n        gradlePluginPortal()\r\n    }\r\n    dependencies {\r\n        classpath 'com.bmuschko:gradle-docker-plugin:7.1.0'\r\n    }\r\n}\r\n\r\nplugins {\r\n    id 'com.github.johnrengelman.shadow' version '7.1.0'\r\n    id 'io.micronaut.application' version '3.0.2'\r\n    id 'groovy'\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\nmicronaut {\r\n    runtime('lambda')\r\n    testRuntime('spock2')\r\n}\r\n\r\ndependencies {\r\n    implementation('com.google.code.gson:gson:2.8.9')\r\n    annotationProcessor('io.micronaut:micronaut-http-validation')\r\n    implementation('io.micronaut:micronaut-http-client')\r\n    implementation('io.micronaut:micronaut-runtime')\r\n    implementation('io.micronaut:micronaut-inject')\r\n    implementation('io.micronaut:micronaut-inject-java')\r\n    implementation('javax.annotation:javax.annotation-api')\r\n    runtimeOnly('ch.qos.logback:logback-classic')\r\n    compileOnly('org.graalvm.nativeimage:svm')\r\n\r\n    implementation('io.micronaut:micronaut-validation')\r\n    implementation('io.micronaut.aws:micronaut-function-aws')\r\n    implementation('io.micronaut.aws:micronaut-function-aws-custom-runtime')\r\n\r\n    testImplementation('org.spockframework:spock-core') {\r\n        exclude group: 'org.codehaus.groovy', module: 'groovy-all'\r\n    }\r\n\r\n    testImplementation 'io.micronaut:micronaut-inject-groovy'\r\n    testImplementation 'io.micronaut.test:micronaut-test-spock'\r\n    testImplementation \"org.mockito:mockito-core:3.+\"\r\n    testImplementation \"org.mockito:mockito-inline:3.+\"\r\n}\r\n\r\ntasks.named('assemble') {\r\n    dependsOn(':shadowJar')\r\n}\r\n\r\n\r\n\r\n\r\n{code}\r\n ","author":"Malte Hübner"},{"text":"Thank you @Malte Hübner! I can't believe it was so simple; that really saved me a lot of headache.\r\n\r\nSeems my problem was that I was also trying to \"apply\" the plugin. Though I'm surprised I hadn't tried exactly what you had there. In any case, thank you again :) .","author":"Tyler Davis"},{"text":"@Tyler Davis - great to hear! Yes, it seems you applied the plugin twice (old syntax and new syntax)\r\n\r\n","author":"Malte Hübner"}]},{"summary":"Email notification for failed scheduled pipelines","key":"BCLOUD-15608","url":"https://jira.atlassian.com/browse/BCLOUD-15608","type":"Bug","priority":"","description":"As a operator\r\n I want to be notified by email when a scheduled task failed to execute\r\n So that I can execute the task manually.\r\n----\r\nh3. Issue Summary\r\n\r\nScheduled pipelines fail to trigger email notifications on build failure events. It turns out to be a serious issue when build fails in non-working hours as the team is not aware of the failed scheduled builds\r\nh3. Steps to Reproduce\r\n # Configure scheduled pipelines that result in failure\r\n # No notifications sent\r\n\r\nh3. Expected Results\r\n\r\nEmail notifications should be sent to the watchers on the repository.\r\nh3. Actual Results\r\n\r\nNo email notifications sent\r\nh3. Workaround\r\n\r\n \r\n\r\nTo use [https://bitbucket.org/atlassian/email-notify/src/master/] pipe to trigger an email\r\n\r\n \r\n{code:java}\r\nimage: atlassian/default-image:2\r\npipelines:\r\n  default:\r\n      - step: \r\n              name: test email pipe\r\n              script:\r\n                - exit 1\r\n              after-script:\r\n                 - pipe: atlassian/email-notify:0.4.0\r\n                   variables:\r\n                      USERNAME: '<string>'\r\n                      PASSWORD: '<string>'\r\n                      FROM: '<string>'\r\n                      TO: '<string>'\r\n                      HOST: '<string>'\r\n                      # PORT: '<string>' # Optional.\r\n                      # TLS: '<boolean>' # Optional.\r\n                      # SUBJECT: '<string>' # Optional.\r\n                      # BODY_PLAIN: '<string>' # Optional.\r\n                      # BODY_HTML: '<string>' # Optional.\r\n                      # ATTACHMENTS: '<string>' # Optional.\r\n                      # DEBUG: '<boolean>' # Optional.\r\n{code}\r\n ","createDate":"2018-02-01T13:58:46.000+0000","comments":[{"text":"Hi Jefferson,\n\nThanks for the suggestion.\n\nCurrently we do not send email notifications for scheduled pipelines. I&#x27;ll open this issue so we can keep track of this request and also to gauge the interest of other users on this functionality. However, the team are currently working on higher priority features so it is unlikely that we&#x27;ll be working on this anytime soon.\n\nAneita\n","author":"Aneita"},{"text":"This really should&#x27;ve been part of the MVP. How else am I supposed to know what&#x27;s going on with my pipelines? The Slack notifications are not granular enough (and far from everyone uses Slack).\n","author":"TheRealJimbo"},{"text":"I agree that this is part of basic functionality for scheduled pipelines. We use them for static analysis tools, and we need to know when they fail. What do you propose as an alternative?\n\nMoreover, it&#x27;s very unclear that I will not get notified for scheduled pipelines. I&#x27;m watching the repository and subscribed to \"all pipelines\". I didn&#x27;t realize that my scheduled pipeline was failing and I just wasn&#x27;t getting notified until I happened to go to the pipelines page for a different issue.\n","author":"Robert Li"},{"text":"Same for us here... our scheduled builds where failing since 1 month and didn&#x27;t get notified at all. This should really be part of the MVP...\n\nSince the scheduled pipelines takes the same \"revision comment\" than the latest commit build, I was expecting that the user that did the latest commit was at least getting notified but it it not the case...\n\nBig issue here, top priority for us. Thanks for listening to your paying subscribers...\n","author":"Martin Lacasse"},{"text":"Really, pain in the a**\n","author":"nezriffic"},{"text":"+1: Scheduled pipelines with failure notification mails would be useful to me. Without mails, not at all.\n","author":"Hannes Reich"},{"text":"+1 from me. We have a nightly pipeline that does a deploy, and we have no way of being notified if the deploy failed. This is a pretty annoying problem - no one wants to just manually check each morning because there&#x27;s a 1% chance it might have failed.\n","author":"mcrittenden"},{"text":"+1  Why it is not already there?\n","author":"Chandramouli BN"},{"text":"+1","author":"Renan Vaz"},{"text":"+1 this is really a must","author":"Ori Saporta"},{"text":"+1 Make sure you vote, not just add a comment!","author":"James Prnich"},{"text":"+1 This is an important feature!","author":"Olha Vovk"},{"text":"+1","author":"Radoslav Dragijev"},{"text":"Any update on this? I dont understand why this is not a feature yet ","author":"Guilherme Vinicius Gorski"},{"text":"+1 Scheduled Pipelines are basically useless without this","author":"Alexander Weickmann"},{"text":"Hello there,\r\n\r\nI have changed the type of this feature request ticket to bug as Bitbucket pipelines fail to trigger email notification when scheduled pipelines fails. The feature becomes important for the scheduled builds running in non-working hours and fails and the teams are unaware of it.\r\n\r\nI have also provided a workaround in the ticket description that suggests using an email-notify pipe, please take a look.\r\n\r\nRegards,\r\nSaurabh S","author":"Saurabh Singh"},{"text":"I had a look at this and noticed that the scheduled pipelines that fail are being processes at completion with the status of IN_PROGRESS.\r\n\r\nI've create a bug in our backlog for this here: https://softwareteams.atlassian.net/browse/BBCFR-1467","author":"James Szklarz"},{"text":"+1 almost useless otherwise","author":"YD"},{"text":"The stated workaround requires a username & password to be stored in plaintext in the yaml file stored in the repo. At the very least, this should be considered an absolute 'no-no' from a security point of view.","author":"Gerard van Soest"},{"text":"+1 Bumping, anyone has an update already?","author":"Kenny Deckers"},{"text":"+1 bump","author":"Matthias Walter"},{"text":"+1","author":"vlazic"},{"text":"Here is my workaround that works well for me.\r\nInside the scheduled pipeline, initiate another pipeline:\r\n\r\nhttps://i.imgur.com/z5jPGlI.png","author":"vlazic"},{"text":"+1 Please prioritize this bug :) ","author":"Aravind Parappil"},{"text":"+1 this seems like such a primitive capability for a modern DevOps platform. ","author":"Adam Setch"},{"text":"+1 - I thought I had a solution to a problem using scheduled pipelines, and it's not happening if there's no notification capabilities on a fail (It's been > 4 years now)","author":"Chris Funston"},{"text":"Sharing my workaround: switched to CircleCI","author":"Brian Maissy"},{"text":"I actually get email notifications for failed scheduled pipelines. Can't control who is getting notified though.","author":"Shay Ben David"}]},{"summary":"Build execution should wait until all services are ready","key":"BCLOUD-15244","url":"https://jira.atlassian.com/browse/BCLOUD-15244","type":"Bug","priority":"","description":"Currently, Pipelines does not wait until all declared services are up and running before the build execution starts. As a result, a build could fail because a service container was not fully started yet (e.g. a test failed because a database service container had not fully started).\r\n\r\nMaybe this should be an optional configurable setting in the YML? This might require user input to define when a service container is considered to be 'ready'.\r\n\r\n*Edit:* this wait is already implemented for Docker and auth proxy services. \r\nh4. Workaround\r\n\r\nIn the meantime you can do this yourselves by adding an initial step to your pipeline that waits for the service to be ready, e.g. poll for 200 OK, before allowing the remaining steps to run.","createDate":"2017-11-19T23:57:24.000+0000","comments":[{"text":"Thanks for the suggestion.\n\nThis is something that we&#x27;ll need to investigate in more detail. However, the team are currently working on higher priority issues, so it is unlikely that we&#x27;ll work on this anytime soon.\n\nIn the meantime, I&#x27;ll open this ticket to see whether this interests other users.\n","author":"Aneita"},{"text":"Definitely interest from me for this feature. Seems very hacky / unnecessary to have to write a bash script that sleeps until the service is ready.\n","author":"hagen00dev"},{"text":"I&#x27;m waiting for it. Does anyone know if this feature will be in roadmap?\n","author":"Clayton Piccinin"},{"text":"+1","author":"Shane Gibson"},{"text":"+1","author":"matteopaoli"},{"text":"+1","author":"Christopher Lucas"},{"text":"+1 ","author":"Antony Lucisano"},{"text":"+1","author":"SergeMorel"},{"text":"+1","author":"catalysm"},{"text":"+1","author":"Oleksandr Natalenko"},{"text":"This is affecting me. From time to time, mysql is not yet ready so we get an error in the pipelines:\r\n\r\nERROR 2002 (HY000): Can't connect to MySQL server on '127.0.0.1' (115)\r\n\r\nTo fix it, I just re-run the failed steps and 80% of the time it completes successfully.\r\nThe only suggestion I've seen is to add a\r\n - sleep 5\r\nbefore the mysql command. Seems like it's not a good fix, since we pay for pipelines by the time it takes to complete them!","author":"Tommo"}]},{"summary":"Bitbucket UI does not distinguish between the author and committer fields for git commits","key":"BCLOUD-13836","url":"https://jira.atlassian.com/browse/BCLOUD-13836","type":"Bug","priority":"","description":"Git allows the author and committer fields of a commit to be set separately. But the UI doesn&#x27;t respect that difference and just shows one of the fields. The choice of fields is inconsistent: sometimes it uses the author field and calls it the committer and vice-versa.","createDate":"2017-02-10T19:46:26.000+0000","comments":[{"text":"I suggest that if they are the same then there is no need to show both fields. If they are different then the values of both fields could be displayed.\n\nI believe that GitHub uses the form &#x27;author name&#x27; with &#x27;commitor name&#x27;.\n","author":"Thomas Turrell-Croft"},{"text":"Issue BCLOUD-14096 was marked as a duplicate of this issue.\n","author":"Abhin Chhabra"},{"text":"github does this: &#x27;author&#x27; committed with &#x27;committer&#x27; .....\n\nWould be a good option for bitbucket as well.\n","author":"michiel-insided"},{"text":"I stumbled upon this today when I imported a patch from one repo into another with Sourcetree. Bitbucket shows the author - and not me - as the committer. And does not show author date. And it seems that this is already solved in BSERVER version 6.9: BSERV-8868. \r\n\r\n ","author":"eydun.nielsen"},{"text":"I experienced this after I cherry picked a commit  that was committed by another person. He was shown as Author/Committer in Bitbucket even if I was the one that committed. In my local repo using TortoiseGit/Eclipse and a several other tools he was shown as Author and I was shown as Committer.","author":"Jarle Jacobsen"}]},{"summary":"API 2.0 does not recognize master_branch when attempting to set main branch of repository.","key":"BCLOUD-13306","url":"https://jira.atlassian.com/browse/BCLOUD-13306","type":"Bug","priority":"","description":"Not sure if this is a bug, or an enhancement because the documentation doesn&#x27;t explicitly reference this:\\\\\nhttps://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Busername%7D/%7Brepo_slug%7D#put\n\nIf you try to use the same Json Object which is used for API 1.0, the output doesn&#x27;t show any error but the repo&#x27;s main_branch is not changed.\n\nFull output:\n\n{code}\n#!python\n\nRonCYJ@RonCYJ-HP MINGW64 ~\n$ curl -X PUT -u rchiateam1:<Password> -H \"Content-Type: application/json\" https://api.bitbucket.org/2.0/repositories/rchiateam1/test -d &#x27;{\"main_branch\": \"master\"}&#x27; #TeamID and API Key\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2283  100  2258  100    25    880      9  0:00:02  0:00:02 --:--:--   880{\"scm\": \"git\", \"website\": \"\", \"has_wiki\": false, \"name\": \"test\", \"links\": {\"watchers\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/watchers\"}, \"branches\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/refs/branches\"}, \"tags\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/refs/tags\"}, \"commits\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/commits\"}, \"clone\": [{\"href\": \"https://rchiateam1@bitbucket.org/rchiateam1/test.git\", \"name\": \"https\"}, {\"href\": \"ssh://git@bitbucket.org/rchiateam1/test.git\", \"name\": \"ssh\"}], \"self\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test\"}, \"html\": {\"href\": \"https://bitbucket.org/rchiateam1/test\"}, \"avatar\": {\"href\": \"https://bitbucket.org/rchiateam1/test/avatar/32/\"}, \"hooks\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/hooks\"}, \"forks\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/forks\"}, \"downloads\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/downloads\"}, \"pullrequests\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/pullrequests\"}}, \"fork_policy\": \"no_public_forks\", \"uuid\": \"{103269e6-0031-4239-9908-22a537f5404a}\", \"project\": {\"key\": \"RCHIAT1\", \"type\": \"project\", \"uuid\": \"{3cdb7610-ac9f-40cb-8f60-f80024f014aa}\", \"links\": {\"self\": {\"href\": \"https://api.bitbucket.org/2.0/teams/rchiateam1/projects/RCHIAT1\"}, \"html\": {\"href\": \"https://bitbucket.org/account/user/rchiateam1/projects/RCHIAT1\"}, \"avatar\": {\"href\": \"https://bitbucket.org/account/user/rchiateam1/projects/RCHIAT1/avatar/32\"}}, \"name\": \"CSIT\"}, \"language\": \"\", \"created_on\": \"2016-08-30T12:07:04.831042+00:00\", \"full_name\": \"rchiateam1/test\", \"has_issues\": false, \"owner\": {\"username\": \"rchiateam1\", \"display_name\": \"RchiaTeam1\", \"type\": \"team\", \"uuid\": \"{07b5291f-231f-4fb2-97e7-8424b33e08d4}\", \"links\": {\"self\": {\"href\": \"https://api.bitbucket.org/2.0/teams/rchiateam1\"}, \"html\": {\"href\": \"https://bitbucket.org/rchiateam1/\"}, \"avatar\": {\"href\": \"https://bitbucket.org/account/rchiateam1/avatar/32/\"}}}, \"updated_on\": \"2016-09-14T15:53:45.391368+00:00\", \"size\": 858930, \"type\": \"repository\", \"is_private\": true, \"description\": \"\"}\n\nRonCYJ@RonCYJ-HP MINGW64 ~\n$ curl -X PUT -u ronaldchia:<Password> -H \"Content-Type: application/json\" https://api.bitbucket.org/2.0/repositories/rchiateam1/test -d &#x27;{\"main_branch\": \"master\"}&#x27; # Team Admin with App password\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  2283  100  2258  100    25    811      8  0:00:03  0:00:02  0:00:01   816{\"scm\": \"git\", \"website\": \"\", \"has_wiki\": false, \"name\": \"test\", \"links\": {\"watchers\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/watchers\"}, \"branches\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/refs/branches\"}, \"tags\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/refs/tags\"}, \"commits\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/commits\"}, \"clone\": [{\"href\": \"https://ronaldchia@bitbucket.org/rchiateam1/test.git\", \"name\": \"https\"}, {\"href\": \"ssh://git@bitbucket.org/rchiateam1/test.git\", \"name\": \"ssh\"}], \"self\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test\"}, \"html\": {\"href\": \"https://bitbucket.org/rchiateam1/test\"}, \"avatar\": {\"href\": \"https://bitbucket.org/rchiateam1/test/avatar/32/\"}, \"hooks\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/hooks\"}, \"forks\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/forks\"}, \"downloads\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/downloads\"}, \"pullrequests\": {\"href\": \"https://api.bitbucket.org/2.0/repositories/rchiateam1/test/pullrequests\"}}, \"fork_policy\": \"no_public_forks\", \"uuid\": \"{103269e6-0031-4239-9908-22a537f5404a}\", \"project\": {\"key\": \"RCHIAT1\", \"type\": \"project\", \"uuid\": \"{3cdb7610-ac9f-40cb-8f60-f80024f014aa}\", \"links\": {\"self\": {\"href\": \"https://api.bitbucket.org/2.0/teams/rchiateam1/projects/RCHIAT1\"}, \"html\": {\"href\": \"https://bitbucket.org/account/user/rchiateam1/projects/RCHIAT1\"}, \"avatar\": {\"href\": \"https://bitbucket.org/account/user/rchiateam1/projects/RCHIAT1/avatar/32\"}}, \"name\": \"CSIT\"}, \"language\": \"\", \"created_on\": \"2016-08-30T12:07:04.831042+00:00\", \"full_name\": \"rchiateam1/test\", \"has_issues\": false, \"owner\": {\"username\": \"rchiateam1\", \"display_name\": \"RchiaTeam1\", \"type\": \"team\", \"uuid\": \"{07b5291f-231f-4fb2-97e7-8424b33e08d4}\", \"links\": {\"self\": {\"href\": \"https://api.bitbucket.org/2.0/teams/rchiateam1\"}, \"html\": {\"href\": \"https://bitbucket.org/rchiateam1/\"}, \"avatar\": {\"href\": \"https://bitbucket.org/account/rchiateam1/avatar/32/\"}}}, \"updated_on\": \"2016-09-14T15:54:13.055318+00:00\", \"size\": 858930, \"type\": \"repository\", \"is_private\": true, \"description\": \"\"}\n\nRonCYJ@RonCYJ-HP MINGW64 ~\n$ curl -X PUT -u AannSmMbGdcNKZw38r:<Secret> -H \"Content-Type: application/json\" https://api.bitbucket.org/2.0/repositories/rchiateam1/test -d &#x27;{\"main_branch\": \"master\"}&#x27; #OAuth\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    25    0     0  100    25      0      9  0:00:02  0:00:02 --:--:--    11\n\n{code}","createDate":"2016-09-15T21:10:24.000+0000","comments":[{"text":"Is there any way this can be prioritized? I am trying to automate repository creation through the API, and our branching strategy dictates that the main branch be set to \"dev\".\n\nThe repo_slug 2.0 endpoint does return this UNDOCUMENTED property:\n\n{code}\n#!json\n \"mainbranch\": {\n    \"type\": \"branch\",\n    \"name\": \"master\"\n  }\n{code}\n\nI have attempted to do a PUT with {{{\"mainbranch\": {\"type\": \"branch\", \"name\": \"dev\"}}}} as the body to the repo_slug endpoint, in hopes that it would set the main branch, but alas, it was not updated.\n","author":"Deleted Account"},{"text":"There is an option to make modifications to the main branch using the v2 API ?","author":"Daniel Vilozni"},{"text":"Joining to the same request, it is pity it does not work, it is needed. is there any other workaround for automating it not via Rest API?","author":"Limor Segal Shevah"},{"text":"For everyone's information, I did find a workaround for this. If you create the repo through the API without any branches, the first branch that you git push to the repo automatically becomes the main branch. So for a concrete example, in order to set the main branch to \"dev\", I clone the repo after I create it, then do a _git branch dev_, and then _git push -u origin dev_.","author":"Deleted Account"},{"text":"Adding my voice to this. Considering the request is for a very simple API call it's wild to me that this has not been implemented after 5 years.","author":"Bill Collier"},{"text":"Still is the same ???","author":"Karthikraj"},{"text":"I doubt that implementing this feature can be very complex and find it unfortunate that this ticket has been ignored since 2016 (6.5 years), even though I find numerous requests for this feature here over the years.\r\n\r\nTo solve this issue for my team, in my ps-script I create a repo, clone it, create my dev-branch and delete the (default) master-branch so that my dev-branch is now the main branch. Normally I would have the release-branch on top and the dev-branch down to it and down to the dev-branch the feature-branches, but for this workaround I need to have the dev-branch on top and the release-branch and feature-branches down to the dev-branch. The release-branch and feature-branches are at the same level.\r\n\r\nnormally: release <- dev <- features\r\n\r\nnow: dev <- release\r\n\r\n               <- features","author":"Alexander Karge"}]},{"summary":"Automated issue comments show up as \"content: null\" in API response (BB-9487)","key":"BCLOUD-13139","url":"https://jira.atlassian.com/browse/BCLOUD-13139","type":"Bug","priority":"","description":"Continuing from Issue BCLOUD-8020,\n\nNull content for automated comments are still not appearing în 2.0 and for the 1.0 they are not showing up at all.\n\n2.0 response\n\n{code}\n#!json\n\n\"content\": {\n    \"raw\": null,\n    \"markup\": \"markdown\",\n    \"html\": \"\"\n  },\n\n{code}","createDate":"2016-08-10T10:33:03.000+0000","comments":[{"text":"For anyone trying to reproduce this, you can see his happening on this issue.\n\nSee https://api.bitbucket.org/2.0/repositories/site/master/issues/13139/comments/29779153 for an example.\n\nI think the problem is that if you don&#x27;t leave a comment on a status update, there won&#x27;t be any content because changing the status of an issue is a special case that we don&#x27;t appear to surface anywhere.\n","author":"belak"}]},{"summary":"Removing Credit Card Information (PUR-10804)","key":"BCLOUD-11724","url":"https://jira.atlassian.com/browse/BCLOUD-11724","type":"Bug","priority":"","description":"No comment on this since it should be obvious...\n\n* Where do I remove credit card information?\n* How do I remove credit card information?","createDate":"2015-08-23T11:04:18.000+0000","comments":[{"text":"Hi Matthias,\\\\\nIf you mean billing information associated with your account, then this data is located at https://bitbucket.org/account/user/user_name/credit-card/.  Note that plain text credit card data is never shown at anytime.\n\nCheers,\n\nGary\n","author":"Gary"},{"text":"This answer is neither satisfying nor right. (or at least I don&#x27;t get it)\\\\\nHave a look at the attached screenshots and point me to where I&#x27;m able to *remove* my credit card information.\n\n!712230561-HTCC.jpg|thumbnail!\n\nCheers,\\\\\nMatthias\n","author":"mviranyi"},{"text":"Hi Matthias,\\\\\nCan you send me a PM with the account name that this screenshot is for - gsackett@atlassian.com.\\\\\nCheers,\n\nGary\n","author":"Gary"},{"text":"So did you find the time to remove my credit card information already?\n","author":"mviranyi"},{"text":"Would you now with the information remove the CC info?\n","author":"mviranyi"},{"text":"Just change your information to 5305 5000 0000 0000 , exp 1-2100 , cardholder name NULL NULL\\\\\nI can&#x27;t say for sure but it should overwrite old data.\n","author":"Wiebe Geertsma"},{"text":"Hi Matthias,\\\\\nCan you login to manage the account at my.atlassian.com, and remove the information there as a workaround?  I am currently filing an issue to allow the removal of the billing info when a plan is downgraded.\n\nCheers,\n\nGary\n","author":"Gary"},{"text":"Issue BCLOUD-11914 was marked as a duplicate of this issue.\n","author":"Gary"},{"text":"I&#x27;m having the same problem, how do I remove my credit card details? Only allows me to update them not fully remove them?\n","author":"MartinHughesIreland"},{"text":"Martin, Just change your information to 5305 5000 0000 0000 , exp 1-2100 , cardholder name NULL NULL I can&#x27;t say for sure but it should overwrite old data.\n","author":"Wiebe Geertsma"},{"text":"It validates the credit card so you can&#x27;t change it to random data. I&#x27;d like to think this isn&#x27;t a ploy to keep an active cc on file, even if it&#x27;s at the free level. Please finally fix this?\n","author":"nickchen42"},{"text":"It&#x27;s a real mess!  just give us possibility to remove card data\n","author":"amsterdamm"},{"text":"I need to remove my PERSONAL credit card from a team I&#x27;m handing over admin of.\n\nWhy isn&#x27;t this an option?\n\nJust did this: information to 5305 5000 0000 0000 , exp 1-2100 , cardholder name NULL NULL.\n","author":"sphvn"},{"text":"Issue BCLOUD-13596 was marked as a duplicate of this issue.\n","author":"Zachary Davis"},{"text":"Issue BCLOUD-13595 was marked as a duplicate of this issue.\n","author":"Zachary Davis"},{"text":"Hi Matthias and others having this issue, we are aware of this limitation, but the current integration with our billing system does not give us the ability to remove credit card details from the Bitbucket UI. This is currently being worked on but we have no timeframe as to when this will be available. As @gsackett mentioned above, you can log in to https://my.atlassian.com with your Atlassian Account credentials (same as what you&#x27;d use to login to Bitbucket) and update your card details there, or [contact Support|https://support.atlassian.com/servicedesk/customer/portal/11] and they will be able to assist in removing your credit card details completely from our systems.\n","author":"Jonathan Poh"},{"text":"Is workaround with \"change information to 5305 5000 0000 0000 , exp 1-2100 , cardholder name NULL NULL.\" not working anymore?\n","author":"AndreyS"},{"text":"Workaround seems to work\n\n# go to https://my.atlassian.com/\n# click &#x27;Edit credit card&#x27;\n# change information to 5305 5000 0000 0000 , exp 1-2042 , cardholder name null null\n\nThis seems to change the credit card information from both bitbucket and my.atlassian.com\n","author":"teppokauppinen_lumoa"},{"text":"Some validation prevents 2100 as an year, but this seems to accept arbitrary year with this credit card.\n\n\"5305 5000 0000 0000 , exp 1-2020 , cardholder name null null\" did it for me.\n\n@Atlassian there are no words to explain [how much you fail|https://i.imgflip.com/1i41rh.jpg] on this specific issue.\n","author":"ssaki"},{"text":"@jpoh, it&#x27;s being 10 months since you stated it&#x27;s being worked on. What&#x27;s the progress? ETA?\n","author":"dinamic"},{"text":"Hi Everyone,\\\\\nWe appreciate your passion, and understand the sensitivity around this issue.  Unfortunately, we do not have a specific eta on when this issue will be solved.  In the meantime, you can use the following workaround to have your information removed from the account:\n\n# Contact our Customer Advocates team using the form at https://www.atlassian.com/company/contact/purchasing-licensing.\n# Please make sure to add the following information in your inquiry:\n\n* Bitbucket account URL.\n* Request the credit card information on file for the account be removed.\n* Make sure the email you enter in the form matches the primary email of the account in Bitbucket Cloud.\n* If the account is a Team, please make sure the email you enter in the form belongs to an Admin of the team.\n\nPlease note, that the account/team in question will have to currently be on the free plan for the current billing period, and have no outstanding charges.  If the account/team in question is on the free plan with overages for Pipelines, or LFS, then we will not be able to remove the card information until the current billing period ends.\n\nOnce our Customer Advocate team process this request, it will take up to a week before the information disappears in Bitbucket Cloud.  You can also feel free to reach out to the support team at https://support.atlassian.com/contact/#/ with any questions.  Feel free to mention my name specifically in your support request, and I will make sure to personally review.\n\nThank you,\n\nGary\n","author":"Gary"},{"text":"5305 5000 0000 0000 , exp 1-2099 , cardholder name null null\n\nthis worked for me, it&#x27;s sad you didn&#x27;t put a delete option, i mean CRUD has just 4 operations, you missed just one\n","author":"ulayera"},{"text":"how do I remove my credit card details? Only allows me to update them not fully remove them?\\\\\n[Clean Master|https://cleanmaster.me/] [Facebook Lite|https://downloader.vip/facebook-lite/] [Mathway |https://mathway.vip/]\n","author":"klimbo12"},{"text":"Same problem here. It sounds like a real GDPR issue because I cannot remove my personal data.\n","author":"Jacek"},{"text":"Attachment 712230561-HTCC.jpg has been added with description: Originally embedded in Bitbucket issue #11724 in site/master","author":"mviranyi"},{"text":"I have still fucking problem! I can't delete account and unlink my credit card. This is sick!\r\n\r\nIt's 2021. Attlasian Fucks the GDPR!","author":"Epic VR"},{"text":"You should only use reliable payment methods that will protect your business from fraud. I can advise you to contact https://virtual-pay.io/ as it not only secures all your transactions but also allows you to accept payments in multiple currencies as well as alternative payment methods. I think this is a great option for you.","author":"John Skinner"}]},{"summary":"Get commit/{revision} API does not accept branch names with \"/\" (BB-10992)","key":"BCLOUD-9969","url":"https://jira.atlassian.com/browse/BCLOUD-9969","type":"Bug","priority":"","description":"My branch is called \"feature/test\" and no matter how I try to hit the:\r\n{noformat}\r\nGET https://bitbucket.org/api/2.0/repositories/{owner}/{repo_slug}/commit/{revision}\r\n{noformat}\r\nAPI with this, it will not bend. Replacing the \"/\" with %2F does not work.\r\n\r\nGoogle helped me find https://bitbucket.org/site/master/issue/408/branches-and-tags-with-slashes-in-their where this seems to have been fixed for every other API call except this one.\r\n\r\nI&#x27;d like to know if there is a plan for this to be fixed, or if there is another way I can get the commit SHA for the tip of a branch whose name has a slash.","createDate":"2014-07-16T08:45:35.000+0000","comments":[{"text":"This has been fixed. Please reopen if you have any issues.\n","author":"belak"},{"text":"Just a note: this will most likely be reverted at some point this week, as it breaks a current endpoint. We will revisit this issue at that point.\n","author":"belak"},{"text":"Hi,\n\nAny updates on this issue?\n\nI am from Semaphore CI and I am in charge for Bitbucket integration. This issue is hurting our users pretty bad and we are taking a lot of heat, since it is essential for their workflow...\n\nThanks in advance.\n\nBest,\\\\\nRastko\n","author":"Legacy Bitbucket Cloud User"},{"text":"Hey folks,\n\nCan I also get an update on this issue?\n\nDom\n","author":"thehodge"},{"text":"Seems related to [10601|https://bitbucket.org/site/master/issue/10601/api-cant-list-files-in-branches-with-a-in]. Seems to me like a general overhaul of url-encoding in the API is needed.\n","author":"aslakhellesoy"},{"text":"[Suspicion confirmed|https://bitbucket.org/site/master/issues%3Fq%3Durl%2Bencode]\n","author":"aslakhellesoy"},{"text":"Issue BCLOUD-10601 was marked as a duplicate of this issue.\n","author":"Legacy Bitbucket Cloud User"},{"text":"The two tickets you marked as a dupe are about different url patterns. I guess that means this is a single bug affecting multiple url patterns?\n","author":"aslakhellesoy"},{"text":"Getting the same issue. \"Remote rejected\"  and \"failed to write\" errors using any branch name with a \"/\" , done locally.  Invalid branch names through BitBucket.\n","author":"hypertd"},{"text":"This currently breaks Shippable (https://github.com/Shippable/support/issues/1205) where Github succeeds :(.\n","author":"bbradbury"},{"text":"Hi!\\\\\nAny update on this? I am using git-flow which has the naming-convention of \"feature/....\" and trying to work the API. Unfortunately this ticket is still open.\n\n+1 to fix this one. :-)\n","author":"Roman"},{"text":"Hi BB folks, any update on this? A lot of our customers are complaining that they need this...\n","author":"avinci"},{"text":"This is a blocker for our teams CI.\n","author":"SethMcLean"},{"text":"@SethMcLean You could use the rawnode-id instead of the branch-name. So your teams CI wouldnt be blocked.\n\nI have fixed that for a mantis-bugtracker plugin. Here you can see the solution:\n\nhttps://github.com/mantisbt-plugins/source-integration/commit/4492cc36caa02595a6b28f2681cb368b728ef236\n","author":"Roman"},{"text":"@\"Roman Allenstein\" We do not have this option with our hosted CI solution.\n","author":"SethMcLean"},{"text":"Looks like this was fixed a while ago.  Please let us know if you still see problems.\n","author":"Zachary Davis"},{"text":"This most certainly is *not* fixed, I just tested it on one of our repos.  For any branch with a slash in it, I get a \"404 not found\" response (even when using %2F to encode the slash).\n\nIt would be nice if you actually *verified* things as fixed instead of just closing them with \"looks like it was fixed\"...this is extremely frustrating to me as an end user!\n","author":"Steve Muskiewicz"},{"text":"Hi Steve,\n\nI am personally trying to reconcile the statuses of issues on our internal tracker with this issue tracker, on the order of slightly more than 14,000 issues, with the goal of narrowing down the list of open issues to ones that actually need attention.  You are correct that I did not verify whether this was actually fixed or not, but I did verify that a pull request was merged and deployed which purported to fix this issue in July of 2014.  Hopefully you can forgive me for not verifying each of the 14,000 issues individually.  I&#x27;m happy to reopen this and the corresponding internal issue.\n\nCheers,\\\\\nZach\n","author":"Zachary Davis"},{"text":"Hi Zach,\n\nI apologize if my response seemed personally directed at you (it was not) but I hope you will also appreciate my source of frustration here.  As you are no doubt well aware, this is one of (too) *many* Bitbucket issues that have remained in an unresolved state for multiple years now, with no comment or acknowledgment from Atlassian, despite multiple user votes, \"+1\"&#x27;s and requests for status updates.  And to me this particular issue is more egregious in that it was (apparently) fixed but then just as quickly reverted with a terse explanation and no follow up despite the comment to the contrary.\n\nSo while I am certainly happy to see that some of these issues are getting some long overdue attention and definitely sympathetic to you as the unlucky dude who is tasked with plowing through this mess, I can&#x27;t help but think that if Atlassian/Bitbucket had not proceeded to ignore them for such a long period of time that they would not be in this position now.\n\nThank you in advance for all your efforts and I would definitely appreciate it if you could reopen this issue so that hopefully someone can give it another look in the near future.\n\nregards,\\\\\n-steve\n","author":"Steve Muskiewicz"},{"text":"Happy belated second birthday to this issue...\n","author":"Bryan"},{"text":"As you can see, I&#x27;ve attempted a fix for this before, however it broke a number of APIs (Everything at https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Busername%7D/%7Brepo_slug%7D/commit aside from the basic one) so it had to be reverted.\n\nThe way our APIs are structured, it will not be possible to add support to this endpoint for branch names until we release a new major revision because for v2, it will either shadow APIs or some branches won&#x27;t be accessible.\n\nHowever, there is a workaround which just involves one additional request to grab the commit hash then using that in any of the endpoints. https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Busername%7D/%7Brepo_slug%7D/refs/branches/%7Bname%7D should work with branch names which contain slashes.\n\nI&#x27;m leaving this open, but dropping the priority because our hands are tied and there is an existing workaround.\n\nSorry for the inconvenience.\n","author":"Kaleb Elwert"},{"text":"2.5 years in and you&#x27;re \"dropping\" the priority? How long do minor issues take to fix if higher priorities take this long?\n","author":"Bryan"},{"text":"As we are currently moving forward to grow our company this disregardful treatment of paying customers (not yet big enough to be heard by Atlassian) is exactly why we now move gradually away from Atlassian and search for more reliable partner which offer their software under a open-source license. Thankfully, I am now in a position to be able to make those decisions.\r\n\r\nThis bug was opened more than 6 (SIX) years ago and nothing was fixed. This is embarrassing!","author":"Holger Becker"},{"text":"Hello all,\r\n\r\nSorry that this has been such a long-standing bug. I don't blame anyone for getting upset!\r\n\r\nI've been looking into this bug and want to point out a couple of things.\r\n # Branch names with '/' *should work* with any API or path where the branch name/revision is the *last part* of the path. This includes, but is not limited to, the following APIs. So the API specifically mentioned on this issue is working today. I'm not sure when (I can look that up) and I'm sorry that this issue was never updated. If you find an API where this is not the case, it can be easily fixed, relatively speaking :)\r\n ## /2.0/repositories/\\{workspace}/\\{repo}/commits/\\{revision}\r\n ## /2.0/repositories/\\{workspace}/\\{repo}/refs/\\{branch_name}\r\n # Branch names with a '/' *will not* work with any API where the revisions is *not the last part* of the path. src being probably the most notable\r\n ## /2.0/repositories/\\{workspace}/\\{repo}/src/\\{revision}/\\{path}\r\n\r\nIt's not to say that there isn't any solution, but any solution comes with trade offs and they're not all that great. Here are some solutions that have been brainstormed.\r\n * escape branch names. URL escaping cannot work and the %2F will be re-written before even reaching the app as this is part of the WSGI spec. We'd need to pick a custom character (that is a character that is an illegal branch name character). `\\` could work, but I've read that these can be treated as '/' on windows. If we chose to use an escaping solution it will be non-standard and unintuitive and I'm unsure how many people would know about it.\r\n * New APIs. This is the most straight forward fix but also the most change and it could be inconsistent with our other URLs. Revisions can just become query params and the problem is solved.\r\n * Branch lookups - this is possible but could entail a performance hit as we now have to keep track what all the current valid branch names are. Furthermore, this solution is even more difficult with the /src/ API because now we have 2 path arguments that both can contain a slash! We'd have to not only search for possible branch names, we'd have to search within files too. And we still wouldn't be able to eliminate all ambiguity.\r\n * Some sort of a query parameter replacement. Replace the revision segment of the path with '\\{branch}' and add a query parameter ?branch= and we will substitute that query parameter into the branch name.\r\n\r\nI hope you can see that none of the solutions are really that optimal. Please advise on which of these solutions makes sense to you.","author":"seanaty"},{"text":"Has there been any progress with this (src)? I'm running into this and it's a real pain. The only potential solution I came up with is to do a request ahead of time to get the commit hash and use that instead of the branch name that contains a slash.","author":"Ben Verwey"},{"text":"*Does not work for*\r\n/2.0/repositories/\\{workspace}/\\{repo_slug}/commit/\\{commit}\r\n response 404:\r\n\r\n\r\n{noformat}\r\n{\r\n    \"type\": \"error\",\r\n    \"error\": {\r\n        \"message\": \"Resource not found\",\r\n        \"detail\": \"There is no API hosted at this URL.\\n\\nFor information about our API's, please refer to the documentation at: https://developer.atlassian.com/bitbucket/api/2/reference/\"\r\n    }\r\n}{noformat}","author":"sushil dive"},{"text":"I confirm that I'm also getting an error on the {{/2.0/repositories/\\{workspace}/\\{repo_slug}/commit/\\{commit}}} endpoint.\r\n\r\nhttps://github.com/mantisbt-plugins/source-integration/issues/376\r\n{quote}Branch names with '/' *should work* with any API or path where the branch name/revision is the *last part* of the path. \r\n\r\nIf you find an API where this is not the case, it can be easily fixed, relatively speaking \r\n{quote}\r\n@seanaty it would be appreciated if you guys could actually fix that one.\r\n\r\n ","author":"dregad"},{"text":"Hello,\r\n\r\nplease check this PR:\r\n\r\n[fix: error fetching sha for branch name with slash in it by sushdive · Pull Request #295 · jenkins-x/go-scm · GitHub|https://github.com/jenkins-x/go-scm/pull/295/]\r\n\r\nI remember fixing this issue for go-scm","author":"sushil dive"}]},{"summary":"Cannot reuse an old branch prefix as a branch name (BB-11256)","key":"BCLOUD-9288","url":"https://jira.atlassian.com/browse/BCLOUD-9288","type":"Bug","priority":"","description":"Some time ago I pushed a branch called &#x27;dev/some_feature&#x27; to a Bitbucket repository. Now I&#x27;ve decided that I want to group my feature branches not with a &#x27;dev/&#x27; prefix but with &#x27;feature/&#x27;, and I want to use a branch called &#x27;dev&#x27; as the integration branch with all finished changes.\n\nSo I merged and deleted all &#x27;dev/*&#x27; branches on Bitbucket and locally. I then created a local &#x27;dev&#x27; branch (branching off of the &#x27;master&#x27; branch). Now if I try to push this branch to Bitbucket (remote &#x27;origin&#x27;), I get the following error:\n\n{code}\n#!bash\n\n ! [remote rejected] dev -> dev (failed to write)\nerror: failed to push some refs to &#x27;https://mjpvandenberg@bitbucket.org/xxx/xxx.git&#x27;\n\n{code}\n\nMy guess is that, although all &#x27;dev/*&#x27; branches have been deleted, there&#x27;s still a &#x27;dev&#x27; folder in .git/refs/heads.  I am not aware of any method by which to actively remove this folder, either thru the web interface or with any git-remote command. I don&#x27;t know how often git-gc runs on Bitbucket and if it will fix this issue. If I use the web interface to create a new branch off of &#x27;master&#x27; directly in the Bitbucket repo, the error message says &#x27;Invalid branch name&#x27;.\n\nIt would be nice if Bitbucket could see that the &#x27;dev&#x27; branch name is in fact available.","createDate":"2014-04-11T18:25:30.000+0000","comments":[{"text":"Hi\n\nFor what repository do you want us to check this on? Maybe you can email support@bitbucket.org with the details if you don&#x27;t want to say here.\n\nCheers\n\nNicolas\n","author":"Nicolas Venegas"},{"text":"This concerns a private repo at https://bitbucket.org/autarco/aqua\n","author":"mjpvandenberg"},{"text":"There doesn&#x27;t seem to be a {{dev}} directory under heads in your repository on our server:\n\n{code:text}\n$ ls --color=never -R refs\nrefs:\nheads  tags\n\nrefs/heads:\nmaster  modules\n\nrefs/tags:\n$\n{code}\n","author":"Nicolas Venegas"},{"text":"Ah, looks like there are still reflog entries:\n\n{code:text}\n$ file `find . -name &#x27;dev&#x27;`\n./logs/refs/heads/dev: directory\n{code}\n","author":"Nicolas Venegas"},{"text":"OK, I&#x27;ve made a backup of your repository and then removed those reflog entries from our server. Can you try pushing again, please?\n","author":"Nicolas Venegas"},{"text":"Yes, I am now able to create a &#x27;dev&#x27; branch. Thanks for your help.\n","author":"mjpvandenberg"},{"text":"We saw another case of this. Can we look into root cause?\n","author":"Legacy Bitbucket Cloud User"},{"text":"Hi, is there an update on this ?\n","author":"dimneg"},{"text":"We are having the same issue with one of our release branch. Is there any new updates on this?\n","author":"Harry Ho"},{"text":"Is there a possibility to do the same thing for us as you did for Mark van den berg?\n","author":"Harry Ho"},{"text":"@harrymho Please file a support issue at support.atlassian.com\n","author":"Legacy Bitbucket Cloud User"},{"text":"Thanks John, we put in a ticket last night. I think you guys are in the process of doing something for us.\n","author":"Harry Ho"},{"text":"Can I know the process to fix this issue?\n","author":"sowmya Samala"},{"text":"same issue here. not able to recreate a branch that was removed - in this case \"release\" was removed and not able to add it again without getting the \"Invalid branch name.\" error.\n","author":"Brian youngblood"},{"text":"If you&#x27;re affected by this issue, go ahead and post the owner, repository, and branch info here on this public issue and I&#x27;ll clear it out for you. Or you can file a private issue at support.atlassian.com\n","author":"Legacy Bitbucket Cloud User"},{"text":"Hi John, we are having the same problem.\n\nowner: shopback (team)\n\nrepo: shopback.com-admin\n\nbranch: release\n","author":"David Chua"},{"text":"@jgarcia4 , @nvenegas\n\n* owner: onitmedia\n* repos: muulla_api, muullamobileclient, muullacms\n* branch: production/dealhound can&#x27;t be created because there are previous branches that looks like production/dealhound/1.00.17, production/dealhound/1.00.18\n\nThanks\n","author":"alejandromagnorskycsb"},{"text":"We have this same issue\n","author":"Legacy Bitbucket Cloud User"},{"text":"owner: solidfire\\\\\nrepo: solidfire-powershell\\\\\nbranch: release\n\nPlease delete the \"release\" branch as it&#x27;s preventing me from creating release/v1.0.1.0\n","author":"adamhaid"},{"text":"Hi @manishdas and @alejandromagnorskycsb\n\nJohn and I no longer work on Bitbucket, so we unfortunately can&#x27;t help you out. If you haven&#x27;t already done so, I&#x27;d suggest opening a support request at https://support.atlassian.com/servicedesk/customer/portal/11\n\nCheers\n\nNic\n","author":"Nicolas Venegas"},{"text":"@nvenegas Thanks for the heads up!\n","author":"manishdas"},{"text":"@nvenegas btw, do you know if it&#x27;s possible to resolve this issue on our own?\n","author":"manishdas"},{"text":"We also have been having problem with this issue, on branch develop. Can someone help us out?\n","author":"andre_tzermias"},{"text":"@andre_tzermias We had to file a ticket to their Bitbucket support team. There must directory on BB, which is causing this. After they remove that directory, you should be good to go.\n","author":"manishdas"},{"text":"Thanks @manishdas ! Will do that.\n","author":"andre_tzermias"},{"text":"@andre_tzermias You are welcome! I wish, there was a way we could do that, it&#x27;s lame filing ticket for this every time it happens. We have another repo where we have similar issue and now we will have to file a ticket for that as well. :/\n","author":"manishdas"},{"text":"Hi @jgarcia4,\n\nwe are having the same problem.\n\nowner: cimri (team)\n\nrepo: cimri-web\n\nbranch: hotfix\n","author":"ertugrul1234"},{"text":"We ran into this as well. This is workaround we used to workaround problem. No need for us to file support ticket.\n\n* Switch to git ssh clone. Set up ssh key too.\\\\\ngit clone git@bitbucket.org:company/gitrepo.git\n* Recreate new branch with same name from ssh cloned repo, ghostbranch in this example.\\\\\ngit push origin master:ghostbranch\n* Delete branch again from ssh cloned repo.\\\\\ngit push origin :ghostbranch\n* Now you can create a new branch that uses name as prefix\\\\\ngit push origin master:ghostbranch/test\n\nIn the end https server is a wrapper of real git developed by bitbucket. It might have a bug not cleaning up file in .git/logs/refs/heads/ghostbranch. Ssh git does this correctly.\n","author":"lcjchengjie"},{"text":"We use git over ssh and are experiencing this problem on weekly basis.\n","author":"Nenad Miksa"},{"text":"Issue BCLOUD-13183 was marked as a duplicate of this issue.\n","author":"belak"},{"text":"This is copied from another bug:\n\nWhen you select &#x27;close branch after the pull request is merged&#x27; and the merge the pull request the reflog is not being cleaned up. This means that any future branches with that name as path prefix cannot be successfully pushed to due to a git error.\n\nSteps to reproduce:\n\n# Create a branch from master called \"foo\"\n# Create a commit on foo and push it to Bitbucket\n# Create a PR from foo to master, selecting close branch after merge\n# Merge the PR\n# Create a branch locally called \"foo/my-new-branch-name\"\n# Attempt to push a commit to \"foo/my-new-branch-name\" on bitbucket\n\nYou will see an error from git that looks something like\\\\\n{{error: unable to create directory for ./logs/refs/heads/foo/my-new-branch-name}}\n","author":"belak"},{"text":"Issue BCLOUD-13203 was marked as a duplicate of this issue.\n","author":"belak"},{"text":"Issue BCLOUD-13554 was marked as a duplicate of this issue.\n","author":"Kaleb Elwert"},{"text":"We&#x27;re currently seeing this too.\n\nCheers, Joel\n","author":"joel"},{"text":"We&#x27;ve got this problem as well, although the bitbucket staff was very quick to repsond to our request to delete the ref log file.\n","author":"11267km"},{"text":"I&#x27;m facing this issue as well.\n","author":"jhabr"},{"text":"The same for me today\n","author":"aleveugle"},{"text":"This has finally been fixed in git with the newest version ([2.13|https://raw.githubusercontent.com/git/git/master/Documentation/RelNotes/2.13.0.txt]):\n\nbq. * Deletion of a branch \"foo/bar\" could remove .git/refs/heads/foo once there no longer is any other branch whose name begins with \"foo/\", but we didn&#x27;t do so so far.  Now we do.\n\n\nI&#x27;ll work with @evzijst to try and update our version on Bitbucket.\n","author":"seanfarley"},{"text":"Note that in the meantime, anyone who runs into this can contact support@bitbucket.org, refer to this issue and get those old directories removed.\n","author":"evzijst"},{"text":"I'm sorry this issue has gone without response for so long. We've just changed our bug-tracking workflow to help ensure that user-bugs are tracked more effectively going forward.\r\n\r\nIf this is still an issue, can you please file a support request at [support.atlassian.com/contact|http://support.atlassian.com/contact] so our support engineering team can help diagnose this and create a bug for our engineering team?\r\n\r\nIn the meantime, I'm going to close this issue as obsolete.","author":"Sean McLucas"},{"text":"We are now using a newer version of git 2.36.1 and this deletes empty directories after a branch has been deleted.\r\n{noformat}\r\n$ curl -sq https://bitbucket.org/site/info|jq .\r\n{\r\n  \"deployed\": {\r\n    \"hex\": \"d47bd4364698\",\r\n    \"media_hex\": \"d47bd4364698\"\r\n  },\r\n  \"system\": {\r\n    \"django\": \"1.11.29\",\r\n    \"python\": \"3.7.12\",\r\n    \"git\": \"2.36.1\"\r\n  }\r\n}{noformat}\r\nI tried the same workflow described by the customer and I could not reproduce the problem.\r\n # Create a branch named `dev/bug-fix-1`\r\n # Push and create a PR\r\n # Merge PR with delete branch on merge enabled/checked\r\n # Delete `dev/bug-fix-1` on client\r\n # Pull from Bitbucket\r\n # Create a branch named `dev`\r\n # Push and create PR (this succeeds). If it fails, it is on client side and running `git remote prune origin` helps","author":"Dhruva"}]},{"summary":"Pet shop game","key":"BCLOUD-3880","url":"https://jira.atlassian.com/browse/BCLOUD-3880","type":"Bug","priority":"","description":"I completed a task called pet happiness and got the bar at the top that kept track of how many treats I had and now it&#x27;s gone and there are tasks I can&#x27;t complete because I can&#x27;t figure out how to get it back because the game won&#x27;t let me go back and redo the pet happiness task. Can anyone help???","createDate":"2012-04-10T02:08:58.000+0000","comments":[{"text":"Hi! Is this game suitable for kids? I have two nephews who always compete with each other about who plays first at a given day. Want to buy them two games or license keys.","author":"webmaster"},{"text":"I am not sure. Actually, this rivalry can be used in your favor, if you understand what I mean. You can save money by buying fnf two players https://fnfmod.online/2-player/ and they will sit together and play. And that will cause the spirit of so-called healthy competition. Kids like this stuff, you know. Or you can do whatever you want, I don't actually mind.","author":"Lourdes Perdon"},{"text":"This is the first time I've heard of such a bug, mine was fine.","author":"Odell Owen"},{"text":"Games are just a good time. In addition, now there are many new games, as well as cool solutions such as cs go gambling. Finding [CSGO gambling sites|https://gamble-csgo.com/] with really good conditions and a variety of gambling or sports betting games is not that difficult. And you won't have to worry about scammers by choosing a truly reliable site. If you are a cs go fan, then why not try this option?","author":"Scott Piligrimm"},{"text":"My gaming preferences span various genres, but one game that truly captivates me is Destiny 2. ","author":"Roger Gallagher"},{"text":"I’ve been a huge fan of video games for as long as I can remember, and my favorite genres tend to change based on my mood. Lately, I’ve been into fast-paced shooters. The adrenaline rush from competitive games is unbeatable! One of my all-time favorites has to be CSGO. The gameplay, community, and constant updates keep it fresh. Plus, I’ve gotten into skin collecting, which adds a whole new level of excitement. If anyone’s interested, I usually use DatDrop [here|https://x.com/DatDrop_Codes] for case openings, and sometimes they offer free codes that are worth checking out.","author":"Helen Walton"},{"text":"A while back, a colleague from Sydney suggested I check out [luckyonezcasino.com|https://luckyonezcasino.com/], and I’m so glad I did. I usually enjoy blackjack, so I was eager to try it out on this site. The tables were well set up, and I had some great hands that led to a decent payout. The best part? The site is super easy to navigate, and payments are quick, which is always a plus for Aussies. I’ve already made this site my go-to for blackjack, and I’d definitely recommend it to anyone looking for a quality online casino experience.","author":"Carlos Gucci"}]},{"summary":"PowerShell script task fails when using single quotes in arguments in Bamboo","key":"BAM-26072","url":"https://jira.atlassian.com/browse/BAM-26072","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPowerShell script task fails when using single quotes in arguments after the Bamboo 10.2.2 upgrade.\r\nh3. Steps to Reproduce\r\n # Link the repository and create a Plan.\r\n # Add a Job with two tasks:\r\n ** Task 1: Checkout\r\n ** Checkout repo into a defined working directory (e.g., test).\r\n ** Task 2: Script Task\r\n ** Interpreter: Windows PowerShell\r\n ** Script Location: File\r\n ** Script file: script1.ps1\r\n ** Arguments: -ScriptPath '.\\script2'\r\n ** Working Subdirectory: Same as the checkout directory\r\n # Run the Plan\r\n\r\nh3. Expected Results\r\n\r\nThe task should execute without any errors\r\nh3. Actual Results\r\n\r\nThe build is failing with the below error in the build logs:\r\n{noformat}\r\nerror\t01-Apr-2025 07:44:19\tC:\\Users\\Administrator\\bamboo-agent-home\\xml-data\\build-dir\\PROJ-BAN2-JOB1\\test\\script1.ps1 : Script not found at path: \r\nerror\t01-Apr-2025 07:44:19\t''.\\script2.ps1''\r\nerror\t01-Apr-2025 07:44:19\t    + CategoryInfo          : NotSpecified: (:) [Write-Error], WriteErrorException\r\nerror\t01-Apr-2025 07:44:19\t    + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException,run.ps1\r\nerror\t01-Apr-2025 07:44:19\t \r\n{noformat}\r\nh3. Workaround\r\n\r\nReplace the single quotes with double quotes.","createDate":"2025-04-01T13:39:06.000+0000","comments":[]},{"summary":"Unattended setup fails with XSRF error","key":"BAM-26071","url":"https://jira.atlassian.com/browse/BAM-26071","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen deploying Bamboo 10.2.3 with unattended setup properties:\r\n{code:java}\r\nbamboo.import.option=clean\r\nbamboo.import.path=/path/to/export.zip {code}\r\nBamboo throws XSRF error: XSRF: Cannot perform mutative operation\r\nh3. Steps to Reproduce\r\n # Start Bamboo 10.2.3, finish installation, export zip\r\n # Start a new instance of bamboo with filled in unattended-setup.properties pointing to this file\r\n\r\nh3. Expected Results\r\n\r\nFully setup Bamboo is up and running\r\nh3. Actual Results\r\n\r\nThe below exception is thrown in logs:\r\n{noformat}\r\n2025-03-31 22:16:18,858 INFO [http-nio-8085-exec-16] [JavaVersionIsSupported] Detected Java version 21.0.6, your version is supported.\r\n2025-03-31 22:16:18,858 INFO [http-nio-8085-exec-16] [SelectSetupStepAction] Current setup step is /setup/setupSelectImport.action\r\n2025-03-31 22:16:18,885 INFO [http-nio-8085-exec-17] [SetupImportDataAction] Following unattended path\r\n2025-03-31 22:16:18,885 INFO [http-nio-8085-exec-17] [SetupImportDataAction] Importing data from /var/atlassian/application-data/shared-home/default-bamboo-dc.zip\r\n2025-03-31 22:16:18,920 WARN [http-nio-8085-exec-17] [XsrfUtils] XSRF: Cannot perform mutative operation\r\n2025-03-31 22:16:18,921 ERROR [http-nio-8085-exec-17] [SetupImportDataAction] Failed to import\r\ncom.atlassian.config.setup.SetupException: java.lang.IllegalStateException: XSRF: Cannot perform mutative operation\r\n    at com.atlassian.bamboo.setup.DefaultSetupPersister.executeSetupStep(DefaultSetupPersister.java:102) ~[atlassian-bamboo-web-10.2.3.jar:?]\r\n    at com.atlassian.bamboo.ww2.actions.setup.SetupImportDataAction.execute(SetupImportDataAction.java:76) ~[atlassian-bamboo-web-10.2.3.jar:?]\r\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[?:?]\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[?:?]\r\n    at ognl.OgnlRuntime.invokeMethodInsideSandbox(OgnlRuntime.java:1266) ~[ognl-3.1.29.jar:?]\r\n    at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:1251) ~[ognl-3.1.29.jar:?]\r\n    at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1969) ~[ognl-3.1.29.jar:?]\r\n    at ognl.ObjectMethodAccessor.callMethod(ObjectMethodAccessor.java:68) ~[ognl-3.1.29.jar:?]\r\n    at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethodWithDebugInfo(XWorkMethodAccessor.java:98) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethod(XWorkMethodAccessor.java:90) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at ognl.OgnlRuntime.callMethod(OgnlRuntime.java:2045) ~[ognl-3.1.29.jar:?]\r\n    at ognl.ASTMethod.getValueBody(ASTMethod.java:97) ~[ognl-3.1.29.jar:?]\r\n    at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:212) ~[ognl-3.1.29.jar:?]\r\n    at ognl.SimpleNode.getValue(SimpleNode.java:258) ~[ognl-3.1.29.jar:?]\r\n    at ognl.Ognl.getValue(Ognl.java:537) ~[ognl-3.1.29.jar:?]\r\n    at ognl.Ognl.getValue(Ognl.java:501) ~[ognl-3.1.29.jar:?]\r\n    at com.opensymphony.xwork2.ognl.OgnlUtil$3.execute(OgnlUtil.java:531) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.ognl.OgnlUtil.compileAndExecuteMethod(OgnlUtil.java:583) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.ognl.OgnlUtil.callMethod(OgnlUtil.java:529) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:438) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:293) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:181) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.atlassian.bamboo.ww2.interceptors.BambooWorkflowInterceptor.validateWorkflow(BambooWorkflowInterceptor.java:36) ~[atlassian-bamboo-web-10.2.3.jar:?]\r\n    at com.atlassian.bamboo.ww2.interceptors.BambooWorkflowInterceptor.doIntercept(BambooWorkflowInterceptor.java:20) ~[atlassian-bamboo-web-10.2.3.jar:?]\r\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:99) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263) ~[struts2-core-2.5.33-atlassian-1.jar:2.5.33-atlassian-1]\r\n{noformat}\r\nh3. Workaround\r\n\r\nN/A","createDate":"2025-04-01T08:06:47.000+0000","comments":[]},{"summary":"Update Postgres version compatibility on Supported Platform documentation","key":"BAM-26069","url":"https://jira.atlassian.com/browse/BAM-26069","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nCurrently our Bamboo 10.2 [Supported Platform|https://confluence.atlassian.com/bamboo/supported-platforms-289276764.html] document currently indicates compatibility with Postgres versions 12 and 13. However, these versions are not compatible.\r\nh3. Steps to Reproduce\r\n # Install and launch Bamboo 10.2.1.\r\n # On the database configuration page, enter the details for a Postgres 13 database.\r\n # You will encounter the following error.\r\n!image (2).png|width=1251,height=165!\r\n\r\nh3. Expected Results\r\n\r\nRemove the Postgres 12 and 13 from the documentation as they are no longer compatible. \r\n!Screenshot 2025-03-28 at 12.24.23.png|width=963,height=278!\r\nh3. Actual Results\r\n\r\n!Screenshot 2025-03-28 at 12.23.39.png|width=932,height=310!","createDate":"2025-03-28T15:31:28.000+0000","comments":[]},{"summary":"Bamboo Deployment  serverStates are not cleanup post Deployment","key":"BAM-26066","url":"https://jira.atlassian.com/browse/BAM-26066","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBamboo Deployment *shared/serverState/secureTokens* are not cleanup post Deployment jobs which caused performance issues over time on starting Bamboo with -Dbamboo.ignore.server.state.on.restart=true. \r\nh3. Steps to Reproduce\r\n # create a plan and deployment project\r\n # Run a deployment \r\n # Check the files inside *<SHARED_HOME>/serverState/* \r\n\r\nh3. Expected Results\r\n\r\nempty directory shared/serverState/secureTokens\r\nh3. Actual Results\r\n\r\nthe files in the shared/serverState/secureTokens was not deleted. This can created significant performance impact when you have millions of secureTokens files.\r\n{code:java}\r\nshared/serverState/secureTokens:\r\ntotal 24\r\n-rw-r----- 1 bamboo bamboo 344 Mar 27 05:59 1114113-1277953-1540097.xml\r\n-rw-r----- 1 bamboo bamboo 350 Mar 27 05:59 859619ef-7b7e-485b-a4de-c6ea13f221e8.xml\r\n-rw-r----- 1 bamboo bamboo 344 Mar 27 06:00 1114113-1277953-1540098.xml\r\n-rw-r----- 1 bamboo bamboo 350 Mar 27 06:00 a756c3ec-085f-4355-96ef-a22d650a51db.xml\r\n-rw-r----- 1 bamboo bamboo 344 Mar 27 06:02 1114113-1277953-1540099.xml\r\n-rw-r----- 1 bamboo bamboo 350 Mar 27 06:02 1d1a0038-aee7-4df0-ac42-0cce63a68b6b.xml\r\n{code}\r\nh3. Workaround\r\n\r\nManually deleting the old files please be aware that this can [impact the build resiliency|https://confluence.atlassian.com/bamboo/build-resiliency-in-bamboo-data-center-1063170557.html] ","createDate":"2025-03-27T06:14:53.000+0000","comments":[]},{"summary":"Bamboo  variables are been read as unique String when setting more than one value","key":"BAM-26065","url":"https://jira.atlassian.com/browse/BAM-26065","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nBamboo 10.2.2 variables are been read as unique String when setting more than one value\r\nh3. Steps to Reproduce\r\n # create a plan\r\n # create a Plan Variable:\r\n{code:java}\r\n - serverlist: server1,server2\r\n# create a script tssk\r\n{code}\r\n*Argument on Script Task:*\r\n{code:java}\r\n - ${bamboo.serverlist}\r\n{code}\r\n*Script Task 1:*\r\n{code:java}\r\nparam (\r\n[string[]]$serverlist = \"\"\r\n)\r\n\r\nForeach ($server in $serverList) {\r\nWrite-Output \"Updating Server: $($server)\"\r\n}{code}\r\n\r\nh3. Expected Results\r\n\r\n*Log Result:*\r\n{code:java}\r\ncommand 25-Mar-2025 17:49:59 Beginning to execute external process for build 'array - test - Default Job #2 (ARRAY-TEST-JOB1-2)'\\n ... running command line: \\nC:\\Users\\Bamboo\\bamboo-agent-home\\temp\\ARRAY-TEST-JOB1-2-ScriptBuildTask-9654200115802238794.ps1 server1,server2\\n ... in: C:\\build\\ARRAY-TEST-JOB1\\n\r\nbuild 25-Mar-2025 17:50:02 Updating Server: server1\r\nbuild 25-Mar-2025 17:50:02 Updating Server: server2\r\nsimple 25-Mar-2025 17:50:02 Finished task 'Script' with result: Success{code}\r\nh3. Actual Results\r\n\r\n*Log Result:*\r\n{code:java}\r\nsimple 25-Mar-2025 17:44:18 Build array - scrpitvaraible - Default Job #3 (ARRAY-SCRPIT-JOB1-3) started building on agent 'Elastic Agent on i-04dfb0d8691d499c6' (Elastic agent on instance i-04dfb0d8691d499c6)\r\ncommand 25-Mar-2025 17:44:19 Substituting variable: ${bamboo.serverlist} with server1,server2\r\nsimple 25-Mar-2025 17:44:19 Starting task 'Script' of type 'com.atlassian.bamboo.plugins.scripttask:task.builder.script'\r\ncommand 25-Mar-2025 17:44:19 Beginning to execute external process for build 'array - scrpitvaraible - Default Job #3 (ARRAY-SCRPIT-JOB1-3)'\\n ... running command line: \\nC:\\Users\\Bamboo\\bamboo-agent-home\\temp\\ARRAY-SCRPIT-JOB1-3-ScriptBuildTask-2050474197974038510.ps1 server1,server2\\n ... in: C:\\build\\ARRAY-SCRPIT-JOB1\\n\r\nbuild 25-Mar-2025 17:44:19 Updating Server: server1,server2\r\nsimple 25-Mar-2025 17:44:19 Finished task 'Script' with result: Success\r\n{code}\r\nh3. Workaround\r\n\r\nmanually splitting arguments in your scripts using the command {_}$serverArray = $serverlist.Split(','){_}, which you have already implemented.","createDate":"2025-03-27T03:11:12.000+0000","comments":[]},{"summary":"Variables are printed multiple times in agent logs","key":"BAM-26060","url":"https://jira.atlassian.com/browse/BAM-26060","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nScript task will print the \"Substituting variable: xxx\" multiple times for the same variable\r\nh3. Steps to Reproduce\r\n # Create a new project & plan\r\n # Add one or more variables (global, project or plan level)\r\n # Add a script task\r\n ## Leave as inline task\r\n ## Add script body using variables created above\r\n ## Save Task\r\n # Build plan\r\n # Verify the log contains the correct number of \"Substituting variable: xxx\" lines\r\n # Edit plan\r\n # Edit task\r\n ## Change from *Inline to File*\r\n ## Use variables in *Script file* line\r\n ## Save Task\r\n # Build plan\r\n\r\nNotes:\r\n # Currently, you can switch back and forth between inline and file and the configuration is not lost. Which is a nice feature.\r\n\r\nh3. Expected Results\r\n\r\nOne \"Substituting variable: xxx\" line per variable\r\nActual Results\r\n\r\nTwo or more \"Substituting variable: xxx\" per variable.\r\n\r\n!Screenshot 2025-03-12 at 5.33.02 PM.png|thumbnail!\r\n\r\nThe below exception is thrown in the xxxxxxx.log file:\r\nNo errors in log\r\nh3. Workaround\r\n\r\nRemove unwanted inline or file configuration","createDate":"2025-03-18T20:00:07.000+0000","comments":[]},{"summary":"Bamboo Cleanup Task fails with NoSuchFileException even when the build directory is cleaned up","key":"BAM-26057","url":"https://jira.atlassian.com/browse/BAM-26057","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen running a Cleanup Task as part of a Job, Bamboo will report a {{NoSuchFileException}} in case one of the to-be-deleted files or folders is not available during the task execution – E.g. it was deleted by an external process during the Task execution – even if the resulting build directory ends up cleaned up.\r\n\r\nThe issue also happens when a symlink on Windows is to be deleted, but Bamboo deletes its target location before the actual symlink. This is an expected behaviour on Windows and Bamboo should be able to gracefully accept the error.\r\nh3. Steps to Reproduce\r\n # Create a Plan with a Job containing:\r\n ** Cleanup Task\r\n ** The following PowerShell Script\r\n{code:visualbasic}\r\n# Define relative paths for the target directory and the link location\r\n$relativeTargetPath = \"custom\\sxa\\celt\"\r\n$relativeLinkBasePath = \"node_modules\\@sxa\"\r\n\r\n# Ensure the target directory exists\r\nif (-Not (Test-Path -Path $relativeTargetPath)) {\r\n    Write-Host \"The target path ($relativeTargetPath) does not exist. Creating it...\"\r\n    New-Item -Path $relativeTargetPath -ItemType Directory -Force\r\n}\r\n\r\n# Resolve the target path to an absolute path\r\n$targetPath = Resolve-Path -Path $relativeTargetPath\r\n\r\n# Create a sample file in the target directory\r\n$sampleFilePath = Join-Path -Path $targetPath -ChildPath \"sample.txt\"\r\nif (-Not (Test-Path -Path $sampleFilePath)) {\r\n    Write-Host \"Creating a sample file at $sampleFilePath\"\r\n    Set-Content -Path $sampleFilePath -Value \"This is a sample file for testing.\"\r\n}\r\n\r\n# Ensure the base directory for the link exists\r\nif (-Not (Test-Path -Path $relativeLinkBasePath)) {\r\n    Write-Host \"Creating directories for the junction path...\"\r\n    New-Item -Path $relativeLinkBasePath -ItemType Directory -Force\r\n}\r\n\r\n# Define the full path for the link\r\n$relativeLinkPath = Join-Path -Path $relativeLinkBasePath -ChildPath \"celt\"\r\n\r\n# Check if the link already exists and remove it if necessary\r\nif (Test-Path -Path $relativeLinkPath) {\r\n    Write-Host \"The junction already exists. Removing the existing junction...\"\r\n    Remove-Item -Path $relativeLinkPath -Force\r\n}\r\n\r\n# Create the junction\r\ntry {\r\n    Write-Host \"Creating junction...\"\r\n    New-Item -Path $relativeLinkPath -ItemType Junction -Target $targetPath\r\n    Write-Host \"Junction created successfully from $relativeLinkPath to $targetPath\"\r\n} catch {\r\n    Write-Host \"Failed to create junction: $_\"\r\n    exit 1\r\n}\r\n\r\n# Verify if the sample file is accessible through the junction\r\n$linkedFilePath = Join-Path -Path $relativeLinkPath -ChildPath \"sample.txt\"\r\nif (Test-Path -Path $linkedFilePath) {\r\n    Write-Host \"The sample file is available through the junction at $linkedFilePath\"\r\n} else {\r\n    Write-Host \"The sample file is NOT available through the junction.\"\r\n}\r\n\r\n# Remove the entire 'celt' source folder\r\nWrite-Host \"Removing the entire 'celt' source folder...\"\r\nRemove-Item -Path $targetPath -Recurse -Force\r\n\r\n# Final verification to ensure the junction still works\r\nif (Test-Path -Path $linkedFilePath) {\r\n    Write-Host \"The junction is still valid, and the 'celt' folder has been removed from the source.\"\r\n} else {\r\n    Write-Host \"The junction is not functioning as expected after removing the source folder.\"\r\n}\r\n{code}\r\n # Associate the Job with a Bamboo Agent running on Windows\r\n # Run the Plan twice\r\n\r\nh3. Expected Results\r\n * The Plan should succeed on both runs\r\n\r\nh3. Actual Results\r\n * The Plan succeeds on the first run but fails on the second time reporting a:\r\n{noformat}\r\nError occurred while running Task '(1)' of type com.atlassian.bamboo.plugins.bamboo-artifact-downloader-plugin:cleanWorkingDirectoryTask.\r\ncom.atlassian.bamboo.task.TaskException: Unable to clean working directory\r\n{noformat}\r\n\r\nh3. Workaround\r\n * Replace the Cleanup Task with a Script Task and remove the contents of the folder","createDate":"2025-03-17T00:16:47.000+0000","comments":[]},{"summary":"'An Unexpected Error has Occurred' window displays when initiating deployments","key":"BAM-26054","url":"https://jira.atlassian.com/browse/BAM-26054","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAn \"Unexpected Error Occurred\" pop-up window appears when selecting a release while initiating a deployment.\r\nh3. Steps to Reproduce\r\n # Navigate to the Deployment Plan.\r\n # Click on the \"Deploy\" drop-down menu in the top-right corner.\r\n # Choose an environment from the list.\r\n\r\nUpon selection, a pop-up window appears with the message: \"An Unexpected Error has Occurred. Please try reloading the page.\" When you click \"Reload,\" the pop-up enters a loop, continuously displaying the message. However, if you click \"Cancel,\" the error window disappears, and you can trigger the deployment normally.\r\nh3. Expected Results\r\n\r\nNo Pop-up Error window should appear.\r\nh3. Actual Results\r\n\r\n!image-2025-03-12-09-21-12-013.png|width=501,height=278!\r\n\r\nWhen experiencing this error, the HAR file indicates Bamboo is returning '{_}LOADING'{_} when retrieving the result_key before returning the correct result_key.\r\n{noformat}\r\n2025-03-05 12:50:49,945 INFO [https-jsse-nio-8443-exec-92 url: /bamboo/rest/api/latest/deploy/preview/versionName] [AccessLogFilter] <IP-Address> <Username> GET https://<bamboo-url>/bamboo/rest/api/latest/deploy/preview/versionName?deploymentProjectId=209879044&resultKey=__LOADING__&_=1741207848621 14189597kb\r\n\r\n2025-03-05 12:50:49,965 INFO [https-jsse-nio-8443-exec-99 url: /bamboo/rest/api/latest/deploy/preview/versionName] [AccessLogFilter] <IP-Address> <Username> GET https://<bamboo-url>/bamboo/rest/api/latest/deploy/preview/versionName?deploymentProjectId=209879044&resultKey=CT-JEN-188&_=1741207848622 14186949kb {noformat}\r\nh3. Workaround\r\n\r\nClick Cancel on pop-window and continue with deployment. ","createDate":"2025-03-12T13:23:37.000+0000","comments":[]},{"summary":"Bamboo SetupDatabaseConnection Ui page dumps exception during any re-attempts with valid DB connection and credentials ","key":"BAM-26049","url":"https://jira.atlassian.com/browse/BAM-26049","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThe Bamboo _SetupDatabaseConnection_ UI page dumps exceptions during any re-attempts with valid DB connections and credentials. While running the Bamboo Initial setup wizard, if we provide an incorrect DB connection/credential details and then attempt to enter valid DB connection/credentials later, the Ui page dumps the exceptions rather than showing the actual error.\r\nh3. Steps to Reproduce\r\n # Install a fresh Bamboo instance.\r\n # Follow the installation setup page and provide the licence details.\r\n # Select any DB provider and enter invalid DB connection/credentials details.\r\nA valid error message can be seen in the UI complaining about a failed connection or authentication.\r\n!image-2025-03-05-20-16-44-785.png|width=429,height=296!\r\n # When attempting to re-enter the valid DB connection/credential in 2nd and subsequent attempts, an exception dump is presented in the UI.\r\n!image-2025-03-05-20-17-04-205.png|width=457,height=235!\r\n\r\nh3. Expected Results\r\n\r\nA valid error message should be displayed to the user to start the setup again with a clean *Bamboo-Home*\r\nh3. Actual Results\r\n\r\nThe user is shown an UI with the exception sump, but there is no clear indication of the cause of failure.\r\n\r\nh3. Workaround\r\n\r\nRestart the setup with a clean *Bamboo-Home* with the correct DB credentials in the first attempt.","createDate":"2025-03-05T14:52:56.000+0000","comments":[]},{"summary":"Plan triggers not enabled after specs update","key":"BAM-26048","url":"https://jira.atlassian.com/browse/BAM-26048","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPlan triggers are not always scheduled after a specs update\r\nh3. Steps to Reproduce\r\n # Create 2 RSS plans with scheduled trigger\r\n # Cause specs scan of 1 plan to fail and commit: this causes both plans to be disabled\r\n # Fix the specs and  commit\r\n\r\nh3. Expected Results\r\n\r\nBoth plans are updated, enabled and their triggers fire and specified time\r\nh3. Actual Results\r\n\r\nScheduled triggers don't fire.\r\nh3. Workaround\r\n * Option 1: force another specs update by making inconsequential change to specs (e.g. change a description of an item)\r\n * Option 2: restart Bamboo server","createDate":"2025-03-05T13:14:45.000+0000","comments":[]},{"summary":"Bamboo DB Setup get stuck when setup H2 database and restart","key":"BAM-26041","url":"https://jira.atlassian.com/browse/BAM-26041","type":"Bug","priority":"","description":"h3. Issue Summary\r\nBamboo DB Setup get stuck when setup H2 database driver and restart.\r\nThis is reproducible on Data Center: Yes\r\nh3. Steps to Reproduce\r\n # Download Bamboo 10.2.1\r\n # Apply the license and go to H2 database setup\r\n # stop there and download the H2 database driver and put in <BAMBOO_INSTALL_DIR>/lib\r\n # Restart Bamboo application\r\n\r\nh3. Expected Results\r\nIt should proceed with the database setup as H2.\r\nh3. Actual Results\r\nIt get stuck on H2 database setup page for a long time. No errors or exceptions thrown as well.\r\n\r\nh3. Workaround\r\nDelete all the content from <BAMBOO_HOME> and restart Bamboo","createDate":"2025-02-24T04:43:07.000+0000","comments":[{"text":"This can be replicated with MySQL and PostgreSQL as well as either a JDBC datasource or manual connection. The difference is that once submitted, it just comes back to the form page with no indication of an error.","author":"Bjorn Harvold"}]},{"summary":"Data import for large datasets fail with unique constraint violation ","key":"BAM-26028","url":"https://jira.atlassian.com/browse/BAM-26028","type":"Bug","priority":"","description":"*Problem Definition*\r\nData import can fail for instances with a large dataset.\r\n\r\nCustomer is moving from MySql to postgres. So, they did a data export. \r\nThen, they setup a new Bamboo instance on a new server and imported zip file as part of starting Bamboo for the first time. Import fails\r\n\r\n*Expected Results*\r\nImport completes without errors\r\n\r\n*Actual Results*\r\nHigh level of Bamboo's import process\r\n # Users, projects, plans, build results are imported as expected. \r\n # The \"AO\" tables are processed\r\n ## The import process starts reading the <export>/db-export/activeObjects.xml file\r\n ## In the database, 40+ tables are created to hold this information\r\n ## The import process starts to load these tables.\r\n ## At some point in the import process, the Support plugin (I believe) thinks it is OK to run in the background. This adds data to some of these AO_* tables.\r\n ## Before the import process can load the AO_4789DD_PROPERTIES, the plugin has already updated the table. This causes the Unique Constraint error we are seeing.\r\n ## The only information in the AO_4789DD_PROPERTIES table is the last time the plugin ran. \r\n ## So, this come down to a timing issue. The export is so large, the plugin fires before the data loading is complete and causes the problem. \r\n\r\n{noformat:title=atlassian=bamboo.log}\r\nImport failed. Please contact Atlassian at https://support.atlassian.com/ and attach your export file. <br /> com.atlassian.activeobjects.spi.ActiveObjectsImportExportException: There was an error during import/export with plugin Atlassian Troubleshooting and Support Tools(com.atlassian.troubleshooting.plugin-bamboo) #1.55.0 (table AO_4789DD_PROPERTIES):\r\n...\r\nCaused by: java.sql.BatchUpdateException: Batch entry 0 INSERT INTO \"AO_4789DD_PROPERTIES\" (\"ID\", \"PROPERTY_NAME\", \"PROPERTY_VALUE\") VALUES (('1'::numeric), ('last-run'), ('1729362844879')) was aborted: ERROR: duplicate key value violates unique constraint \"AO_4789DD_PROPERTIES_pkey\"\r\n  Detail: Key (\"ID\")=(1) already exists.  Call getNextException to see other errors in the batch.\r\n{noformat}\r\n\r\n*Possible Solution*\r\nDon't start the plugins or processing any data until the import is complete.\r\n\r\n*Workaround*\r\n# Unzip the exported zip file\r\n# Edit <export>/db-export/activeObjects.xml\r\n# Remove these line\r\n{code:java}\r\n<data tableName=\"AO_4789DD_PROPERTIES\">\r\n    <column name=\"ID\"/>\r\n    <column name=\"PROPERTY_NAME\"/>\r\n    <column name=\"PROPERTY_VALUE\"/>\r\n    <row>\r\n      <integer>1</integer>\r\n      <string>last-run</string>\r\n      <string>1738718760346</string>\r\n    </row>\r\n  </data>\r\n{code}\r\n# Save the file\r\n# Zip the export data\r\n# Perform the import as usual\r\n","createDate":"2025-02-12T19:15:56.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/BSP-58730","author":"Ricky Fulks"},{"text":"We experience this issue and impacting our migration. Please address it.","author":"Venkateswaran Muthuswamy"}]},{"summary":"Branch specs do not get updated for one of the plans if the same VCS repository is linked to multiple linked repositories for multiple plans in Bamboo with specs enabled","key":"BAM-25996","url":"https://jira.atlassian.com/browse/BAM-25996","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen multiple linked repositories with Bamboo specs enabled are connected to the same version control system (VCS) repository—with specs configured for several Bamboo plans—plan creation and updates for the main branch using specs work smoothly. \r\n\r\nFor plan branches, the first execution of the specs and the conversion to the \"specs branch\" are successful for all plans. However, after the initial update, the specs for one or more plan branches may not get updated. Additionally, a manual specs scan from the Bamboo UI can fail, resulting in the following error:\r\n\r\n !Screenshot 2025-01-10 at 3.21.45 PM.png|thumbnail! \r\n\r\n\r\nThis is reproducible on Data Center: (/)\r\n\r\nh3. Steps to Reproduce\r\n # Create two linked repositories named \"repo1\" and \"repo2\" using the same VCS, with JAVA/YAML Bamboo specs for two plans: \"PlanA\" and \"PlanB\" in the same repository.\r\n# Enable \"Bamboo specs\" for both linked repositories.\r\n# Publish and create 2 plans in Bamboo through these linked repos.\r\n# Both plans \"PlanA\" and \"PlanB\" were created successfully, specs configuration was updated to the \"default\" branch.\r\n# Create a branch in the VCS repo having specs code now.\r\n# Plan branches will be created in both plans \"PlanA\" and \"PlanB\" and converted to \"Specs branches\" successfully with branch specs configuration.\r\n#*  !Screenshot 2025-01-10 at 4.39.42 PM.png|thumbnail! \r\n#*  !Screenshot 2025-01-10 at 4.40.15 PM.png|thumbnail! \r\n# Then, update the specs configuration for the plans in the branch code configuration in VCS repo.\r\n\r\n\r\nh3. Expected Results\r\nBranch specs configuration should be updated to all plan branches if there are any updated configurations in the specs code.\r\n\r\nh3. Actual Results\r\nOnly one branch under the plan has updated specs, while the other does not, as shown below:\r\n*  !Screenshot 2025-01-13 at 1.16.34 PM.png|thumbnail! \r\n*  !Screenshot 2025-01-13 at 1.16.12 PM.png|thumbnail! \r\n\r\nFrom the debug logs, we see in atlassian-bamboo.log file that branch updates for the plan considered empty :\r\n{noformat}\r\n2025-01-10 10:06:39,735 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Received list of VcsRepositoryData with ids: [1212430, 1212429]\r\n2025-01-10 10:06:39,736 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Specs for branches are enabled\r\n2025-01-10 10:06:39,736 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Processing a root repository with id: 1212426\r\n2025-01-10 10:06:39,737 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Processing a vcsBranch with name: admin/bambooyml-1736502187898\r\n2025-01-10 10:06:39,737 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Keys present inside planBranchesToUpdate: \r\n2025-01-10 10:06:39,737 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Plan branches to update are not empty\r\n2025-01-10 10:06:39,737 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Processing a root repository with id: 1212425\r\n2025-01-10 10:06:39,737 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Processing a vcsBranch with name: admin/bambooyml-1736502187898\r\n2025-01-10 10:06:39,745 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Keys present inside planBranchesToUpdate: AURACLOUD-BST\r\n2025-01-10 10:06:39,745 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssTriggeringServiceImpl] Plan branches to update are not empty\r\n2025-01-10 10:06:39,747 DEBUG [AtlassianEvent::1-BAM::EVENTS:pool-2-thread-59] [RssDetectionServiceImpl] Enqueuing Bamboo Specs detection for repository: bamboo-spec-test(1212425)\r\n{noformat}\r\n\r\nThere is no entry for all plan branches in the \"vcs_specs_state\" table with branch code commit. As a result, the manual specs scan for the plan branch from the UI under Bamboo Overview > Linked Repositories > Specs Scan also fails.\r\n\r\nh3. Workaround\r\nMaintain different VCS repositories for specs repositories for different plans in Bamboo and create linked repositories for those in Bamboo. We have seen a few issues in Bamboo before also if multiple linked repositories with specs enabled are created in Bamboo with the same VCS repository.","createDate":"2025-01-13T07:54:20.000+0000","comments":[]},{"summary":"Deleting a deployment leads to orphaned artifacts.","key":"BAM-21563","url":"https://jira.atlassian.com/browse/BAM-21563","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nDeleting a deployment project/environment that is consuming an artifact from globalStorage will leave the artifact orphaned on the disk and will be never deleted by the expiry.\r\nh3. Steps to Reproduce\r\n # Create build plan B that shares an artifact.\r\n # Create a deployment project DP that consumes the artifact of B and deploy the first build result to a stage in DP.\r\n # Build B 4 times and trigger the expiry ( assuming that the expiry will keep last 3 build results and 2 deployments. This will move the first artifact of B to the globalStorage/artifactID).\r\n # Delete DP\r\n\r\nh3. Expected Results\r\n\r\nThe artifact in globalStorage/artifactID is deleted when the deployment is deleted or during expiry.\r\nh3. Actual Results\r\n\r\nThe artifact in globalStorage/artifactID is never deleted.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-01-12T15:55:25.000+0000","comments":[{"text":"[https://support.atlassian.com/requests/BSP-56064/]\r\n\r\nThis is affecting us too. In this linked ticket, we've discussed a workaround where we'll be manually clearing down the orphaned artifacts. We're running Bamboo version 9.2.1.\r\n\r\nThis issue over time caused upwards of 80Gb of used space in the global storage which has resulted in large amounts of instability and downtime.","author":"Jamie Bali"},{"text":"If this ever gets fixed - will you be able to help \"find\" orphaned artifacts that can actually be deleted?","author":"Reese"},{"text":"[~8df24274c54b] How did you clear orphaned artifacts?","author":"Reese"}]},{"summary":"Manual trigger will stuck waiting if quiet period is enabled","key":"BAM-20410","url":"https://jira.atlassian.com/browse/BAM-20410","type":"Bug","priority":"","description":"h3. Issue Summary\r\nIf a build plan is in the middle of quiet period, triggering a build manually will cause the build to wait as well\r\n\r\nh3. Steps to Reproduce\r\n# Create a plan with quiet period repository\r\n# Create a commit to trigger the plan\r\nNo build start due to quiet period\r\nBamboo log will show \"waiting 1 minute to see if there are any more\"\r\n# Before the above trigger work (within the 1 minute), trigger a build manually\r\n\r\nh3. Expected Results\r\nThe manual trigger build will start running immediately without problem\r\n\r\nh3. Actual Results\r\nThe manual trigger build started but it is not added to Build Queue. From the Build Summary, it has not perform change detection yet\r\n\r\nh3. Notes\r\nIt does not work with Concurrent Build too\r\n\r\nh3. Workaround\r\nDisable quiet period setting in the repository","createDate":"2019-04-19T08:52:47.000+0000","comments":[]},{"summary":"RSS processing inside Windows Docker Engine container uses incorrect path representation","key":"BAM-20115","url":"https://jira.atlassian.com/browse/BAM-20115","type":"Bug","priority":"","description":"h3. Summary\r\n\r\nWhen running RSS on Windows the path\r\n{noformat}\r\n/mnt/input{noformat}\r\nis passed to the container using the wrong representation for a Linux container:\r\n{noformat}\r\n\\\\mnt\\\\input{noformat}\r\nh3. Environment\r\n * Windows\r\n * Repository Stored Specs enabled and Process Bamboo Specs in Docker enabled\r\n\r\nh3. Steps to Reproduce\r\n # Run RSS\r\n\r\nh3. Expected Results\r\n\r\nRSS runs successfully.\r\nh3. Actual Results\r\n\r\nAn exception is thrown when Bamboo tries to create the container. Docker complains about the format of the path being sent as argument:\r\n{noformat}\r\nProcessing Specs within Docker containerUnable to scan repository <repository name> for Bamboo Specs\r\ncom.atlassian.bamboo.repository.RepositoryException: Unable to scan repository <repository name> for Bamboo Specs\r\n        at com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.lambda$runSpecsWithDocker$8(RepositoryStoredSpecsServiceImpl.java:739)\r\n...\r\nCaused by: com.spotify.docker.client.exceptions.DockerRequestException: Request error: POST http://localhost:2375/containers/create?name=bamboo-specs-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx: 400, body: {\"message\":\"the working directory '\\\\mnt\\\\input' is invalid, it needs to be an absolute path\"}\r\n\r\n        at com.spotify.docker.client.DefaultDockerClient.propagate(DefaultDockerClient.java:2694)\r\n        at com.spotify.docker.client.DefaultDockerClient.request(DefaultDockerClient.java:2644)\r\n        at com.spotify.docker.client.DefaultDockerClient.createContainer(DefaultDockerClient.java:651)\r\n        at com.atlassian.bamboo.configuration.external.RepositoryStoredSpecsServiceImpl.lambda$runSpecsWithDocker$8(RepositoryStoredSpecsServiceImpl.java:698)\r\n        ... 8 more\r\nCaused by: com.spotify.docker.client.shaded.javax.ws.rs.BadRequestException: HTTP 400 Bad Request\r\n...\r\n{noformat}\r\nh3. Workaround\r\n\r\nThere is no workaround.","createDate":"2018-10-01T12:09:03.000+0000","comments":[]},{"summary":"OAuth requests made using application links will be processed as unauthorized.","key":"BAM-15834","url":"https://jira.atlassian.com/browse/BAM-15834","type":"Bug","priority":"","description":"The following is being thrown into our Bamboo logs quite frequently\r\n\r\n{noformat}\r\n2015-04-09 13:49:02,457 INFO [http-bio-80-exec-98] [AccessLogFilter] 10.40.32.134 GET http://bamboo.starkey.com/rest/remote-event/1/status 1417666kb\r\n2015-04-09 13:49:02,644 WARN [http-bio-80-exec-21] [AuthenticatorImpl] No executing user assigned for 2LO requests\r\n2015-04-09 13:49:02,644 INFO [http-bio-80-exec-21] [AuthenticatorImpl] Authenticated app 'jira:6452512' as user 'null' successfully\r\n{noformat}\r\n\r\nThis looks similar to FE-5126. Requests coming from JIRA along the app link are coming as \"null\", which is throwing these warnings. The apps authenticate just fine, but these warnings are thrown frequently ~ every 30 seconds","createDate":"2015-04-09T19:00:34.000+0000","comments":[{"text":"We have been facing this issue in 6.9.2 and when we upgraded to 7.2.4 also we are seeing this problem","author":"Jagadeesh_M"},{"text":"This is kind-of still a thing in 2023, is it?\r\n\r\nWe see a Problem with Jira 9.4.8 and Bamboo 9.3.1:\r\n * In our bamboo only specific groups can login and see things.\r\n * Jira is connected to bamboo via OAuth with impersonation\r\n * The HTTP Request from Jira contains an `xoauth_requestor_id`\r\n * The HTTP Response from Bamboo is a 403 with `message: \"No global READ permission\"`\r\n * Restoring visibility for Anonymous Users in Bamboo restores Access via Jira\r\n\r\nAs a workaround we changed from \"OAuth with Impersonation\" to regular \"OAuth\" which helps, but is merely a workaround because it requires all Users to authorize, one by one.","author":"Peter Körner"}]},{"summary":"In the Edit Issue action, changes made to Additional Fields (like modifying or adding a JSON snippet) prompt Automation to indicate unsaved changes, even when there aren't any.","key":"AUTO-1762","url":"https://jira.atlassian.com/browse/AUTO-1762","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIn the Edit issue action, when we go to Additional fields only and make any change (e.g., modify or add a JSON snippet). Automation continually prompts that there are unsaved changes even when there are none. Re-saving makes the button reappear momentarily, but it disappears again upon interaction.\r\n\r\n\r\nh3. Steps to Reproduce\r\n # Shared the screen recording to reproduce the issue.\r\n ## [^Screen Recording 2025-03-27 at 6.42.10 PM.mov]\r\n\r\nh3. Expected Results\r\n\r\nIdeally, once the Edit issue action is saved, the action menu button should remain visible and functional. It should not falsely indicate unsaved changes when no further edits are made.\r\nh3. Actual Results\r\n\r\nAutomation continually prompts that there are unsaved changes even when there are none. \r\nh3. Workaround\r\n\r\nWhen we select a field to set, such as Assignee or any other field, it remains Saved and doesn't show unsaved changes.","createDate":"2025-03-28T07:36:45.000+0000","comments":[{"text":"Confirmed this is reproducible and is unrelated to additional fields. It affects create issue action, edit issue action etc. When the “Choose fields to set” dropdown is open and closed despite changing anything, the rule status is updated to unsaved changes despite there being no actual change.","author":"Luna Ye"}]},{"summary":"Automation rules scoped to Business projects only(JWM) and being counted towards JSM usage. ","key":"AUTO-1754","url":"https://jira.atlassian.com/browse/AUTO-1754","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAutomation rules scoped to Business projects only(_JWM_) and being counted towards JSM usage though Jira exists on the site. \r\n\r\nh3. Steps to Reproduce\r\n# Ensure that you have both Jira(Standard plan) and Jira Service Management(Premium plan) subscription on the site. \r\n# Create an _Automation rule_ and scope it to a single Business project. \r\n# Allow the rule to run and verify the usage. \r\n\r\nh3. Expected Results\r\nAs we’re combining _Jira Software_ with _Jira Work Management_ to create a tool for all teams called *Jira* as detailed in the [Welcome to the next era of Jira|https://www.atlassian.com/blog/announcements/the-next-era-of-jira] announcement, the _Business_ projects rule usage should count towards Jira only. \r\n\r\nh3. Actual Results\r\nBefore the Jira licensing changes, _Jira Work Management_ was provided by default with *Jira Service Management* as well and we still have many customers on the [old licensing structure|https://support.atlassian.com/subscriptions-and-billing/docs/understand-the-improved-atlassian-billing-experience/], Business project rules will be counted towards *highest usage limit* out of all products owned. \r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available. ","createDate":"2025-03-25T08:50:15.000+0000","comments":[{"text":"Hi Vaishnavi,\r\n\r\nThe Automation Platform has intentionally made this decision, as explained in this document: [How-to: Customer wants their rules to count towards a different product billing home|https://hello.atlassian.net/wiki/spaces/AUTODEV/pages/3240599330/How-to+Customer+wants+their+rules+to+count+towards+a+different+product+billing+home].\r\n{quote}A note on SPORK:  Despite JWM and JSW combining into a single product “Jira”,  JWM projects aka Business projects still follow the above table and are billed to the product with the highest usage limit.{quote}\r\n \r\n\r\nAs a result, any rules that are specific to a single JWM project (Business project) should be billed to the product with the highest usage limit, rather than to Jira. There are no plans to change this at the moment.\r\n\r\nThank you.","author":"Luna Ye"}]},{"summary":"Automation email limit error sporadically shown on Sandbox","key":"AUTO-1471","url":"https://jira.atlassian.com/browse/AUTO-1471","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhile being on a paid plan on ({*}Production{*} site), sometimes the *Sandbox* site will show an error message about *Automation email limit* being reached.\r\nh3. Steps to Reproduce\r\n\r\n1. On a paid plan ({*}Production{*} site), navigate to the *Sandbox* site and execute Automation rules that use the \"Send Email\" action.\r\nh3. Expected Results\r\n\r\nThe Automation email limit should not be reached on the Sandbox environment, if the Production site is on a paid plan.\r\nh3. Actual Results\r\n\r\nThe Automation email limit error is sporadically shown on the Automation rule's logs and the Send Email action will not work:\r\n\r\n_\"E-mail sending has been disabled globally due to limits reached in the last 24 hours (if you just signed up your sending limit will increase automatically over the coming days). Please contact Atlassian Support if you need more help!\"_\r\nh3. Workaround\r\n\r\nContact Atlassian Support to remove the Automation Email Limit from the Sandbox environment, in the case that the related Production site is on a paid plan.","createDate":"2024-09-18T14:11:44.000+0000","comments":[{"text":"+1, despite the fact that occurs \"sometimes\", it can heavily affect i.e. UATs runs on sandbox environment that is used as a pre-prod environment - it discourages users from Jira when at the beginning of their tests some heavily requested feature is broken and at the beginning some Atlassian Consultant won`t be even sure why have it happened.","author":"Stanisław Białowąs"}]},{"summary":"Automation rule not respecting timezones, e.g. not respecting the custom field date/ time value although converts the time to UTC which is the JIRA default time when a smart value is included","key":"AUTO-594","url":"https://jira.atlassian.com/browse/AUTO-594","type":"Bug","priority":"","description":"*Not respecting timezones*\r\n * Automation rule not respecting the custom field date/ time value although converts the time to UTC which is the JIRA default time when a smart value is included. The Summary should be updated with the same time in the {color:#de350b}'mediumDateTime'{color} format, but Jira converts the time in the custom field to its default time which is UTC and updates the Summary section. Found this [link|https://confluence.atlassian.com/automation073/working-with-dates-1093013348.html] and it looks like for all smart values the time is being converted into Jira's default timezone. *Steps to Reproduce*\r\n ** Create a custom field with date/time picker and add this field to a 'Create Issue' screen on a service project.\r\n ** Create an automation: When an issue is created with a particular verbiage in Summary section, trigger the automation to update the 'Summary' section as following: \"issue.ExactDateTime.{color:#de350b}mediumDateTime{color}\". --/ ExactDateTime is the DateTime custom field\r\n * The smart value {{Now}} returns the current date and time in UTC+00:00, as documented here: [https://support.atlassian.com/cloud-automation/docs/jira-smart-values-date-and-time/#Current-date-and-time---now--]  This is not, however, clearly flagged in the automation rule UI, which leads users to assume that the value will match their own timezone. Given the way this value functions, it would be best not to refer to it in the UI without further info. Workaround: You can set your timezone of choice [https://support.atlassian.com/cloud-automation/docs/jira-smart-values-date-and-time/#Convert-timezone-date---]\r\n * Once automation is triggered and the audit log records this run, timestamps are saved according to the browser timezone and ignore any configuration made in the instance default timezone or user AA account timezone preferences.  Expected result is that Timestamps being updated according to the AA preferences and match the timestamp in the issue history, but actual result is that Automation rule audit log timestamps stay the same no matter the configuration change regarding the timezone preferences. Changing the Instance timezone from jira/settings/system/general-configuration also results in the same behavior\r\n * If a user sets any timezone in personal settings, it is not reflected when using the smart values: {{reporter.timezone}} or {{assignee.timezone}} And instead the system default is used. This occurs even when using the correct cannonical ID found on this [page. |https://joda-time.sourceforge.net/timezones.html]You will see both assignee and reporter timezones being listed as the system default, while the initiator reflects the timezone you've set in your personal settings. All three should be matching if all three are the same user (which they should be since you are the initiator, assignee, and reporter).Additionally, some timezones such as \"America/Moncton\" don't even get recognized despite being a correct timezone ID found in the page linked above (which is referenced in our automation documentation). Jira instead just falls back to the _last_ used timezone instead of the currently set one (you can test this by doing the same above first chaning your timezone to \"America/Chicago\", waiting a few minutes, then changing it to \"America/Moncton\". You will see that \"America/Chicago\" is still being used for initiator.timezone).","createDate":"2022-06-30T23:09:01.000+0000","comments":[{"text":"Why Automation would not respect our Jira instance timezone...\r\n\r\nNow we must not forget to add conversion to all date / time fields in automation (and workflows ?) and double check that date/time fields are correctly handled.","author":"Eric Dagenais"},{"text":"This needs to be addressed because I tried to do the same thing, and while I see how I can compensate as a workaround, I now have to create multiple workarounds to accommodate my organizations multiple locations that are in different time zones (one of which doesn't observe daylight savings time so not even sure how to compensate for that.)  I should be able to parse out to the Summary the user provided time in the datetimepicker custom field as it was submitted.","author":"Justin Racklin"},{"text":"https://getsupport.atlassian.com/browse/JST-1050653","author":"Diego Leitao"},{"text":"This is a real problem for us, too. I am automating ticket assignments based on the user's location. I'm not looking to even do calculations on the value, but for example is the User's timezone is set to US/Pacific, assign it to the US-West team, whereas if the timezone is set to Europe/Amsterdam - assign it to the EMEA team.\r\n\r\nIs there a workaround for that? or do I need to wait for Atlassian for fix this bug?","author":"avishai.avivi"}]},{"summary":"Site switcher displaying list of duplicate sites","key":"ATLAS-180","url":"https://jira.atlassian.com/browse/ATLAS-180","type":"Bug","priority":"","description":"h3. Issue Summary\r\nWhen using the site switcher, there are intermittent issues when the site list displays duplicate sites\r\n\r\nh3. Steps to Reproduce\r\n # Click on the site name on the top right to open the site switcher drop down\r\n\r\n\r\nh3. Expected Results\r\nThe site name only displays once, without duplicates\r\n\r\nh3. Actual Results\r\nIntermittently, the site switcher displays duplicates of the same site name\r\n\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. As this appears to be intermittent, it seems to resolve itself after a refresh.","createDate":"2025-04-02T05:46:48.000+0000","comments":[]},{"summary":"Updating Atlassian Home for Jira Cloud app results in an error","key":"ATLAS-179","url":"https://jira.atlassian.com/browse/ATLAS-179","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAtlassian Home for Jira Cloud app is showing as 'Update available' in Jira's Manage App section. When users click 'Update', there's an error \"The app \"com.atlassian.atlas.jira\" could not be installed as a local app as it has previously been installed from Atlassian Marketplace\"\r\n\r\nh3. Steps to Reproduce\r\n # Navigate to Jira\r\n # Select Apps > 'Manage your apps'\r\n # Under the User-installed apps, find Atlassian Home for Jira Cloud\r\n # Click on the Update button\r\n\r\nh3. Expected Results\r\n # The app updates successfully\r\n\r\nh3. Actual Results\r\nThere's an error \"The app \"com.atlassian.atlas.jira\" could not be installed as a local app as it has previously been installed from Atlassian Marketplace\"\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior, but the Atlassian Home for Jira Cloud integration still works as per usual.","createDate":"2025-03-31T23:51:26.000+0000","comments":[]},{"summary":"Project and Goals user access granted after opting out of Platform Experiences","key":"ATLAS-174","url":"https://jira.atlassian.com/browse/ATLAS-174","type":"Bug","priority":"","description":"h3. Issue Summary\r\nAfter opting out of Platform Experiences, Projects and Goals remain visible as products in https://admin.atlassian.com ([Reported under this bug|https://jira.atlassian.com/browse/CLOUD-12222]) and when I grant a license to Jira to any of my users they're also shown as having the user role for Goals and Projects.\r\n\r\nh3. Steps to Reproduce\r\n # Opt out of Platform Experiences in a site that also has Jira as a product\r\n # Check that Goals and Project still show as products\r\n # Select a user from the Directory to open their profile page\r\n # Click on *Grant access*\r\n # Grant the user role for Jira in the dropdown\r\n\r\nh3. Expected Results\r\nJust access for Jira should be granted\r\n\r\nh3. Actual Results\r\n\r\nOnce the user role for Jira is selected, User is also shown next to Projects and Goals. There's no way to prevent the Projects and Goals showing the Users role.\r\n\r\nh3. Workaround\r\n\r\nNone available","createDate":"2025-03-18T10:28:29.000+0000","comments":[]},{"summary":"Issues integrating team-managed projects and Jira Product Discovery projects with Slack","key":"API-673","url":"https://jira.atlassian.com/browse/API-673","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nIssues integrating team-managed projects and Jira Product Discovery projects with Slack.\r\nh3. Steps to Reproduce\r\n # Integrate team managed project and/or JPD project with Slack (not the case for all customers)\r\n\r\nh3. Expected Results\r\n\r\nThe integration should be added without any errors.\r\nh3. Actual Results\r\n\r\nErrors adding Slack integration - \"{_}App does not have write access to the project{_}\"\r\n\r\n \r\n\r\n!image-2023-06-16-09-18-21-369.png|width=518,height=305!\r\nh3. Workaround\r\n\r\nReach out to Atlassian support to reinstall the Slack app. ","createDate":"2023-06-16T13:20:20.000+0000","comments":[{"text":"https://getsupport.atlassian.com/browse/JST-894851","author":"Meghashrita Kashyap"},{"text":"https://getsupport.atlassian.com/browse/JST-1060291#","author":"Meghashrita Kashyap"}]},{"summary":"Info panel color is not changeable","key":"ANALYTICS-423","url":"https://jira.atlassian.com/browse/ANALYTICS-423","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen adding an info panel, or other panel type, in a content chart in Atlassian Analytics the color of the panel can't be modified. \r\nh3. Steps to Reproduce\r\n # Open a dashboard in Atlassian Analytics\r\n # Select 'Content' from the dashboard sidebar\r\n # Select 'Insert elements' in the top right corner of the Content chart \r\n # Choose 'Info panel' from the list \r\n # Click into the panel as if to type, then click the background color box to attempt changing the color\r\n\r\nh3. Expected Results\r\n\r\nClicking the background color box would cause the other color options to appear. \r\nh3. Actual Results\r\n\r\nThe background color box doesn't appear. \r\nh3. Workaround\r\n\r\nEdit the content chart and click into the info panel as if to begin typing. Then begin clicking the Tab key until the Info box is surrounded in a blue box as shown in the screenshot below. Then use the right arrow key to move across the other panel types until a blue box is around the Background color. Use the space bar to select the Background color box and then make your color choice. \r\n\r\n!Screenshot 2025-04-01 at 12.29.17 PM.png|width=378,height=241!","createDate":"2025-04-01T16:32:57.000+0000","comments":[]},{"summary":"User is not prompted to connect again once authorization has been revoked on Confluence DC","key":"AI-1079","url":"https://jira.atlassian.com/browse/AI-1079","type":"Bug","priority":"","description":"h3. Issue Summary\r\nOn the Cloud environment, the user is not prompted to connect again once authorization has been revoked on Confluence DC\r\n\r\nh3. Steps to Reproduce\r\n# Head to {{<confluence-base-url>/users/revokeoauthtokens.action/users/revokeoauthtokens.action}}\r\n# Click on *Revoke access* \r\n !image-2025-03-21-15-19-08-374.png|thumbnail! \r\n# Head back to Cloud (may need to wait for the sync to happen)\r\n\r\n\r\nh3. Expected Results\r\nUser is prompted to *Connect* again\r\n\r\nh3. Actual Results\r\nSearch results is 0 and user isn't prompted to *Connect* again\r\n !image-2025-03-21-15-24-22-916.png|thumbnail! \r\n\r\nh3. Workaround\r\n# Head to *Manage Account* --> *Connected apps*\r\n# Click on *Revoke* next to the ROVO authorization\r\n !image-2025-03-21-15-26-21-167.png|thumbnail! \r\n# Head back to Rovo search and you will be prompted to *Connect* again\r\n !image-2025-03-21-15-27-22-820.png|thumbnail! ","createDate":"2025-03-21T14:28:45.000+0000","comments":[]},{"summary":"When using Atlassian Intelligence to search for answers, results are sometimes displayed momentarily then disappear","key":"AI-1020","url":"https://jira.atlassian.com/browse/AI-1020","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen using Atlassian Intelligence to search for answers, results are sometimes displayed momentarily then disappear, and the below message is shown:\r\n{quote}Atlassian Intelligence can't provide a response right now. Read more in our support documentation\r\n{quote}\r\nh3. Steps to Reproduce\r\n # Select the search field in the navigation (or use the slash */* shortcut).\r\n # Enter your question.\r\n # Select Ask AI in the box that appears.\r\n(This issue is intermittent )\r\n\r\nh3. Expected Results\r\n\r\nThe search/question answered by Atlassian Intelligence should be displayed for the user. \r\nh3. Actual Results\r\n\r\nThe results are displayed momentarily, then disappear, and the below message is shown:\r\n{quote}Atlassian Intelligence can't provide a response right now. Read more in our support documentation\r\n{quote}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available.","createDate":"2025-03-06T08:55:21.000+0000","comments":[{"text":"good day.\r\n\r\n \r\n\r\nThey can give me a status of progress in this case?","author":"Jonathan Stib Sosa Gomez"}]},{"summary":"Confluence Searches don't work when user is member of too many groups","key":"AI-1017","url":"https://jira.atlassian.com/browse/AI-1017","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen a user is a member of too many groups (for example 900+), the Confluence searches will show an error \"{_}We're having trouble getting your results{_}\" instead of the content matching the criteria.\r\n\r\nThese many group memberships usually result from provisioning all internal groups to Atlassian, instead of only groups used for Product Access and content permissions.\r\n\r\nThe exact number of groups that result in search failures is still not clear, but it was reproducible intermittently between 700-850 group memberships and consistently with 900 group memberships or more. The behavior seems to be affected by factors like filter used in the search (for example, \"include archived content\", \"type\" or \"author\") and also by the content of each instance.\r\nh3. Steps to Reproduce\r\n # Assign 900+ groups to a user\r\n # Login as that user and try to perform a search in Confluence\r\n\r\nh3. Expected Results\r\n\r\nSearch displays results matching the search criteria\r\nh3. Actual Results\r\n\r\nError message displayed:\r\n\r\n\"{_}We're having trouble getting your results{_}\"\r\nh3. Workaround\r\n\r\nThe current workaround consists of reducing the amount of group memberships the user belongs to. That can be achieved by either removing the user from unnecessary groups or filtering out some of the groups provisioned to Atlassian (removing groups used internal or for other applications).\r\n\r\nBased on some testing, the safest approach for now is to keep the max memberships for a single user under 700 groups to completely avoid the bug.","createDate":"2024-11-28T22:04:18.000+0000","comments":[{"text":"This ticket has been marked as 'long term backlog' because it's currently in the planning phase with our principal engineers. The proposed change/fix is relatively small, but we will keep you updated on when the work starts.","author":"Liam Wilburn"}]},{"summary":"Confluence search returns broken characters for emojis","key":"AI-1001","url":"https://jira.atlassian.com/browse/AI-1001","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nThis is reproducible on Data Center: No\r\nh3. Steps to Reproduce\r\n # Create a blogpost in your Confluence Cloud instance with emojis in the title and in the body.\r\n # Search for the blogpost in the Confluence search or in the API ({{{}GET /wiki/rest/api/search?cql=type = \"blogpost\"{}}})\r\n\r\nh3. Expected Results\r\n\r\nThe search will show the emojis, e.g. \uD83E\uDD14\r\nh3. Actual Results\r\n\r\nThe search is returning broken characters for the emojis, e.g. ��\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-01-22T20:12:36.000+0000","comments":[{"text":"In reproducing, it looks like Atlassian style emojis with the colon :someemoji: are fine since it is passed as text. However the emojicons/emoticons using unicode must be having issues being parsed through.\r\n\r\nEg, working :someemoji: vs non-parsed emojis\r\n\r\n...:happy_face: � \r\n\r\nThis sounds like it isn't impacting Search quality, just the UI display of the excerpt from the Search Page result.","author":"Justin Dong"}]},{"summary":"After migrating via CCMA, Confluence Cloud requires reindexing to resolve inaccurate searches and other issues","key":"AI-193","url":"https://jira.atlassian.com/browse/AI-193","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWe've seen 2 instances where users have migrated via CCMA and content is not indexed properly resulting in inaccurate search results or Page Properties Report macro failing to pull accurate data.\r\nh3. Steps to Reproduce\r\n # Migrate Space data via CCMA\r\n # First Path - Search for data that would typically return many results\r\n # Second Path - View a page with Page Properties Report macro\r\n(NOTE: There are additional variables that are not accounted for yet as there have been migrations where Support triggering reindexing is not required.\r\n\r\nh3. Expected Results\r\n * When trying both paths, results should be accurate and match results from Confluence Server\r\n * It would be helpful to have visibility into the state of indexing. This would help users know they were impacted instead of running into a variety of symptoms\r\n\r\nh3. Actual Results\r\n\r\nIn both cases, the results are not valid. The Page Properties Report macro will show only 1 page instead of many. Search by keyword or another filter will not pull the correct number of pages.\r\nh3. Workaround\r\n * For Searches - Manual workaround is to edit a page to see it populate in Search\r\n * For Page Properties Macro - Manual workaround is to perform any type of edit on the page so the macro can locate missing page\r\n * If you need to reindex please reach out to Atlassian Support by using the following link: [https://support.atlassian.com/contact/].","createDate":"2021-08-19T22:14:00.000+0000","comments":[{"text":"Hello. Having a content re-index feature would be valuable to implement for Confluence administrators. Recently, our users were unable to find pages in the cloud we know should be there. While doing a search, pages were not showing in the search in the standard UI. Our users were unable to then view the page which caused concern and confidence for using Confluence cloud. Being able to content re-index as an administrator could give us the autonomy to resolve search issues ourselves and hopefully reduce the amount of inquiries Atlassian handles.","author":"Amy Carey"},{"text":"We just migrated to Confluence cloud and our users are complaining of this issue as well","author":"Ian"}]},{"summary":"Ask AI: Search queries are formulated in a specific language, but AI still responds in some parts in English","key":"AI-105","url":"https://jira.atlassian.com/browse/AI-105","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you perform searches in Confluence using AI, entered in a language other than English, and your [account language preferences|https://id.atlassian.com/manage-profile/account-preferences] are set to the same language, the AI will provide parts of its response in English instead of entirely in the language you have chosen.\r\nh3. Steps to Reproduce\r\n # Make sure that the language set in your [Atlassian account preferences|https://id.atlassian.com/manage-profile/account-preferences] is the same as the language entered in search\r\n # Open Confluence Search bar\r\n # Type a query in your specific language (Dutch for example)\r\n # Click on *Ask AI*\r\n\r\nh3. Expected Results\r\n\r\nThe AI should respond only in the language of your query or account's preferred language.\r\nh3. Actual Results\r\n\r\nCurrently, its response will include some parts in your language and others in English.\r\nh3. Workaround\r\n\r\nYou explicitly add to your prompt the AI answer language you want.\r\n\r\n!image-2024-05-13-17-14-23-251.png!","createDate":"2024-01-26T10:08:08.000+0000","comments":[{"text":"Unfortunatly, this has a significant impact on the utility of the AI funtionality for our users, as we operate entirely in Dutch!","author":"Jor"},{"text":"Hi,\r\n\r\nI see that the priority of this ticket is low and severity is minor.\r\nI appreciate to keep in mind that as @Jor points out the AI functionality cannot be used in languages other than English.\r\nFor all those non-English speaking countries it is not functional and does not cause a good first impression of Atlassian AI on users.\r\n\r\nThanks","author":"Ramiro Justet"}]},{"summary":"Deactivating a user via SCIM results in \"deactivated by Atlassian\" message","key":"ACCESS-2217","url":"https://jira.atlassian.com/browse/ACCESS-2217","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAround 4/1/2025, deactivating a managed, synced via SCIM started showing the following message on the managed account profile page: \"This account is deactivated. <email> no longer has access to Atlassian account services. Their account was deactivated by Atlassian.\"\r\n\r\nBefore this date, only the following message was shown: \"This account is deactivated. <email> no longer has access to Atlassian account services.\"\r\n\r\nWhile neither is particularly helpful, the new message implies that Atlassian did something to deactivate this user, rather than this being an issue with the identity provider requesting that Atlassian deactivate the user.\r\n\r\nh3. Steps to Reproduce\r\n1. On a SCIM synced managed account, SCIM sync a deactivation\r\n2. Navigate to the managed account's profile (https://admin.atlassian.com/o/<orgid>/members/<aaid>)\r\n3. Observe \"Their account was deactivated by Atlassian.\" addition to the typical message. (If this does not occur, refresh the page a few times and it will appear.) \r\n\r\nh3. Expected Results\r\nThe original error message is shown: \"This account is deactivated. <email> no longer has access to Atlassian account services.\"\r\n\r\nh3. Actual Results\r\nThe new error message is shown: \"This account is deactivated. <email> no longer has access to Atlassian account services. Their account was deactivated by Atlassian.\"\r\n\r\nSuggested Solution\r\n---\r\n\r\nIdeal solution is to provide a more helpful error message, like \"This account is deactivated. <email> no longer has access to Atlassian account services. Your identity provider synced an update that requested Atlassian deactivate this account.\"\r\n\r\nOtherwise, reverting back to the original message (\"This account is deactivated. <email> no longer has access to Atlassian account services.\") would help customers understand that Atlassian did not trigger this action, but merely followed through with a request from the identity provider.\r\n\r\nWhy this is important\r\n---\r\nCustomers need to understand why their managed accounts are unable to access any Atlassian Cloud service so they can resolve issues quickly. Without informative error messages, customers are left with no clear resolution path and must contact our support team to learn more, slowing down critical operations.\r\n\r\nh3. Workaround\r\n\r\nMake sure that the user is active in your identity provider and assigned to the Atlassian Cloud App (or otherwise ensure your identity provider is syncing to Atlassian).\r\n\r\nIf this still does not resolve your issue, please [contact Atlassian technical support|https://support.atlassian.com/contact/].","createDate":"2025-04-01T23:13:41.000+0000","comments":[]},{"summary":"The action to \"Add people to all spaces\" is currently not being recorded in the Organization Audit Log","key":"ACCESS-2216","url":"https://jira.atlassian.com/browse/ACCESS-2216","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nAs stated in the [What activities does the audit log include?|https://support.atlassian.com/security-and-access-policies/docs/track-organization-activities-from-the-audit-log/] article, the Organization Audit Log includes several information, including changes to space permissions for Confluence. \r\n{quote} * Changes to space permissions for Confluence{quote}\r\nHowever, when using the \"Add people to all spaces\" feature to bulk edit (add or remove) space permissions, the action is not being registered in the Organization Audit Log.\r\n\r\nConsequently, at the time of writing, only space permissions modifications made individual or manually are being displayed in the Organization Audit Log, but not the bulk space permissions modification. This lack of logging prevents administrators from tracking changes in space permissions directly in the Organization Audit Log, which is crucial for maintaining audit trails and ensuring security compliance. \r\nh3. Steps to Reproduce\r\n # Navigate to the Space Permissions management section in Confluence Cloud ([https://site-name.atlassian.net/wiki/admin/permissions/space-permissions/allspaces]).\r\n # Use the \"Add people to all spaces\" feature to grant permissions to a user or group.\r\n # After that, navigate to the Organization Audit Log (from your Org > Security > Audit Log).\r\n # Search for any entries related to the action performed in step 2.\r\n\r\nh3. Expected Results\r\n\r\nIf the admin goes to Confluence Cloud Audit Log, there will be record for this action (for example: User added to all spaces, excluding personal spaces).\r\n\r\nSince this is a logged action, it should be registered and displayed in the Organization Audit Log too. \r\nh3. Actual Results\r\n\r\nThis bulk action is not being displayed in the Organization Audit Log. It is only available in Confluence Cloud Audit Log. \r\nh3. Workaround\r\n\r\nAccess Confluence Cloud Audit Log ([https://site-name.atlassian.net/wiki/admin/auditlogging.action]) to check this record. ","createDate":"2025-04-01T20:03:52.000+0000","comments":[]},{"summary":"Wrong link sent in response when using Poll Audit log events API","key":"ACCESS-2214","url":"https://jira.atlassian.com/browse/ACCESS-2214","type":"Bug","priority":"","description":"h3. Issue Summary\r\n * When pagination is used in the [Poll audit log events API endpoint|https://developer.atlassian.com/cloud/admin/organization/rest/api-group-events/#api-v1-orgs-orgid-events-stream-get], the next page link within the response redirects to the [Query audit log events API endpoint|https://developer.atlassian.com/cloud/admin/organization/rest/api-group-events/#api-v1-orgs-orgid-events-get]. (it shows */events* instead of */events-streams* as originally used)\r\n\r\nh3. Steps to Reproduce\r\n # Make a paginated API call to the Poll audit log events API endpoint where {*}/events-stream{*}s is used.\r\n # The response is received correctly, however, the next page link is pointing to */events* (instead of keeping */events-streams* as originally queried)\r\n # !image-2025-04-01-15-13-38-833.png|thumbnail!\r\n\r\nh3. Expected Results\r\n\r\nThe next page link continues to use /events-stream aligned with the original query.\r\nh3. Actual Results\r\n\r\nThe next page link uses /events.\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-04-01T13:12:15.000+0000","comments":[]},{"summary":"Product Search in IP Allowlist Rule Is Not Working","key":"ACCESS-2209","url":"https://jira.atlassian.com/browse/ACCESS-2209","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen searching for a product to add to an IP allowlist rule, the search doesn't return any results that match the keywords. In fact, the search doesn't seem to have any effect at all.\r\nh3. Steps to Reproduce\r\n # Under Security > IP Allowlists, click on Create allowlist.\r\n # On the configuration wizard under \"Applies to\" section, click on the 'Select products' section.\r\n # Search for products to be added to the rule.\r\n\r\nh3. Expected Results\r\n\r\nThe search returns products that match the keywork inserted in the search or returns nothing if no match is found.\r\nh3. Actual Results\r\n\r\nThe serach doesn't seem to have any effect.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2025-03-27T12:43:13.000+0000","comments":[{"text":"Hi [~mdhahak@atlassian.com] , I did a quick test and it seems the search box matches on segments of the site URL. Can you confirm this?\r\n\r\nHere's an example when I search \"sandbox\" (note that I used the complete word, otherwise the results didn't show):\r\n\r\n!image-2025-03-28-12-42-56-448.png|width=371,height=208!\r\n\r\n \r\n\r\ncc: [~341ae4134520]","author":"Matthew Wirtz"}]},{"summary":"User can setup Google Workspace connection even the same Google Workspace tenant has been integrated with other Org","key":"ACCESS-2206","url":"https://jira.atlassian.com/browse/ACCESS-2206","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nUser can setup Google Workspace connection even the same Google Workspace tenant has been integrated with other Org\r\nh3. Steps to Reproduce\r\n # Go to Admin Hub of Org A > Directory \r\n # Setup Free Google Workspace connection\r\n # Go to Admin Hub of Org B > Directory\r\n # Setup Free Google Workspace connection with the same Google tenant  \r\n\r\nh3. Expected Results\r\n * Org admin will receive a warning message which will block the Google Workspace connection setup in Org B because same Google tenant has been integrated in Org A ans Gsync doesn't support syncing external users/unclaimed users\r\n\r\nh3. Actual Results\r\n * Org admin can setup the Google Workspace connection successfully in Org B\r\n * It shows the number of synced users, and domains\r\n * All domains are synced through and verified but claim setting is Manual.\r\n * No users are claimed because users are claimed automatically as managed users in Org A\r\n * In the SCIM directory of Org B, all the user entries have been created but not linked to any existing account\r\n\r\nh3. Workaround\r\n\r\nNo workaround","createDate":"2025-03-26T00:20:18.000+0000","comments":[{"text":"This is working as expected, please create a feature request if need be.","author":"Shawn Yang"}]},{"summary":"managed accounts sometimes remains unclaimed","key":"ACCESS-2140","url":"https://jira.atlassian.com/browse/ACCESS-2140","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nSometimes, an inconsistency is observed in claiming the managed accounts, and this currently requires manual work to trigger re-synchronizing.\r\nh3. Steps to Reproduce\r\n\r\nN/A\r\nh3. Expected Results\r\n\r\nAll the users should be claimed automatically when the claim settings are set to automatic. \r\nh3. Actual Results\r\n\r\nSometimes the users are not claimed.\r\nh3. Workaround\r\n\r\nCurrently, the workaround is to unclaim the users and then re-claim the users again. But the above doesn't resolve the issue with any new users that have to be automatically claimed. \r\n\r\nThe solution is to reach out to the support team to initiate a manual re-synchronization. ","createDate":"2025-02-17T06:03:48.000+0000","comments":[]},{"summary":"Atlassian-sending-domain-verification is sometimes failing for CDEN","key":"ACCESS-1851","url":"https://jira.atlassian.com/browse/ACCESS-1851","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\n\r\n_network error_ responses from [Custom Domain Email Notification|https://support.atlassian.com/organization-administration/docs/add-custom-email-addresses-for-product-notifications/] and [Verifying a domain to manage accounts|https://support.atlassian.com/user-management/docs/verify-a-domain-to-manage-accounts/] leads to validation failures only occurring from the TXT lookup of the *\"atlassian-sending-domain-verification\".* \r\n\r\n\r\nThis is sporadically erroring and an email is generated that the TXT lookup record has failed for *\"atlassian-sending-domain-verification\".* When this is checked via DIG command the *\"atlassian-sending-domain-verification\"* is correct and can be successful the next day.\r\n\r\n\r\nOnly *\"atlassian-sending-domain-verification\"* will fail and the other lookups are successful. \r\n \r\nh3. Steps to Reproduce\r\n # There is no current steps to reproduce as the error is sporadic.\r\n # When checking the complete records required for CDEN will be configured within the DNS settings.\r\n # Atlassian support is able to verify based on the logs based on the below.\r\n\r\nh3. Expected Results\r\n\r\nThe DNS lookup successfully collects all records and compares them against CDEN settings in Admin Hub everytime.\r\nh3. Actual Results\r\n\r\n*\"atlassian-sending-domain-verification\"* fails to validate, generating an email to the Atlassian Org Administrators.\r\n\r\nThe Logs found by the Atlassian support team are the below;\r\n{noformat}\r\nError while performing record look up for XYZ.ABC: network error {noformat}\r\nh3. Workaround\r\n\r\nCurrently, there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-06-12T07:44:25.000+0000","comments":[]},{"summary":"External user security does not display Atlassian accounts with JSM access only as external users","key":"ACCESS-1842","url":"https://jira.atlassian.com/browse/ACCESS-1842","type":"Bug","priority":"","description":"h3. Issue Summary\r\nExternal users who have JSM access only (no other product access) will not show up when:\r\n* Exporting external users from any policy.\r\n* Trying to add that external user to a test policy.\r\n* Viewing your total external user count.\r\n\r\nThe security settings of external users is still applied, meaning that these external users will still be asked to enter a one-time passcode, etc.\r\n\r\nThis prevents admins primarily from knowing the true set of external users and from applying test policies to those users.\r\n\r\nh3. Steps to Reproduce\r\n# Invite an unmanaged user with access to your site, but only grant JSM customer access. For clarity, ensure that this user does not have MFA enabled for their Atlassian account.\r\n# Turn on External User Security settings.\r\n# Have the unmanaged user navigate to https://aproducticanvortex.atlassian.net and confirm that they are asked for a one time passcode.\r\n# Navigate to your External User Security settings and confirm that:\r\n## Exporting users does not include this user.\r\n## You are not able to add this user to a test external user security policy.\r\n## Your external user security user count does not include this user.\r\n\r\nh3. Expected Results\r\n\r\nExternal Atlassian accounts with only JSM customer access should be exportable, included in the total external user count, and addeable to a test external user security policy.\r\n\r\nh3. Actual Results\r\n# Exporting users does not include this user.\r\n# You are not able to add this user to a test external user security policy.\r\n# Your external user security user count does not include this user.\r\n\r\nh3. Workaround\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2024-05-31T22:12:15.000+0000","comments":[{"text":"We will aim to fix this issue post [EUS SSO GA|https://www.atlassian.com/wac/roadmap/cloud/enforce-sso-for-external-users---ga?search=enforce%20sso&amp;p=d156b7fb-45]\r\n\r\n \r\n\r\nTo ensure external users with JSM customer access show up in the external user export and can be added to the test policy","author":"David Olive"},{"text":"In my opinion, this is a real lack of security. Because if Customers are provisioned by an IdP, they will have an Atlassian account and won't be considered as ‘Portal-only customers’.\r\nAnd by not appearing in ‘External users’ (their domain cannot be verified because their company is different than the organization), they won't have any authentication policy assigned to them.","author":"Florent Baret"},{"text":"Hello [~66c2a9d5cc86] , \r\n\r\nit would be great if you could fix this soon and implement the same functionality as in https://jira.atlassian.com/browse/ACCESS-1362 (and [https://community.atlassian.com/forums/Articles/Collaborate-more-securely-by-enforcing-single-sign-on-for/ba-p/2813301)] for licenced external users also for Service Desk Customers.\r\n\r\nWe have a lot of Atlassian Account users as  Service Desk Customers that we want to \"migrate\" to IdP, but currently I have no possibility to enforce any policy for them.\r\n\r\n\r\n\r\n.. looking forward to the fix ;-)\r\n\r\nBR Joachim","author":"Joachim Rieger (rgjadmin)"}]},{"summary":"Landing product failing if there is a suspended product in the subscription","key":"ACCESS-1800","url":"https://jira.atlassian.com/browse/ACCESS-1800","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen we have Confluence Cloud subscription with a JIRA Software Free one, in case the landing product is set to Confluence and the JIRA site is suspended, the landing product won't work as it is expected.\r\nh3. Steps to Reproduce\r\n # Make sure you have a Confluence Cloud standard and JIRA Software Free subscriptions;\r\n # Navigate to *Site Administration > Product Access* and [set Confluence as the landing product|https://support.atlassian.com/organization-administration/docs/set-your-sites-landing-product/];\r\n # Get the JIRA subscription suspended\r\n # Acces your site URL without {{.../wiki}}\r\n\r\nh3. Expected Results\r\n\r\nYou are redirected to Confluence.\r\nh3. Actual Results\r\n\r\nYou land in JIRA - as it is suspended, you face a site deactivated message.\r\nh3. Workaround\r\n # The customer can wait for the suspended product to be deleted\r\n # From the billing console, the product can be deleted immediately\r\n ** *Steps to delete the product immediately*\r\n ### Access [admin.atlassian.com|https://admin.atlassian.com/s/82633884-a47f-4941-a9cc-741308aa8541/billing/applications]\r\n ### Click the *Inactive* tab\r\n ### Verify you are in the card for the product that has been unsubscribed to\r\n ### Click the three dots \"...\"\r\n ### Select *Delete Immediately*","createDate":"2021-06-22T13:54:29.000+0000","comments":[{"text":"The resolution would be giving the client an option to pay for the subscription renewal in an easier way.","author":"Fire Fighter"},{"text":"I've moved the ticket to the Atlassian Cloud project with the 'infrastructure' component set as I think based on my reading of our bugfix tool this should be the right place for this.","author":"Martin Meinhold"},{"text":"No, the resolution would be to correctly redirect to Confluence as configured. Also I disagree that this is a minor issues - it scares the crap out of users who expect to land in the wiki and see the deletion notice instead which is totally misleading (since the users assume it's about confluence). Makes for a lot of internal noise.","author":"Christian Wuerdig"},{"text":"It is very annoying that we cant just disable by ourselves the product what was enabled by mistake another team member or user who had admin access. Hope it will be solved soon. ","author":"Valery.Volos"},{"text":"I totally agree with Christian, this is not a minor issue as it is freaking out all the users.\r\n\r\nWhat I also do not understand is, why you do not mention this in advance, when you force customers to delete the product (It is not possible to quote and activate a product, when you have a free product next to it) Then we could have prepared the users. Please tell you sales team to at least inform about this bug.","author":"Corinne Glauser"}]},{"summary":"Restrict access to https://api.media.atlassian.com download to only allowed IP addresses in the configured IP allowlist","key":"ACCESS-1793","url":"https://jira.atlassian.com/browse/ACCESS-1793","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nMedia API links for attachments within products are accessible by external users who are not authenticated on the site and are not part of the IP addresses added to the IP allowlist.\r\nh3. Steps to Reproduce\r\n\r\nIn Confluence with IP allowlist enabled for example\r\n # Create a page\r\n# Add some images/screenshots\r\n# Open the image from the attachment section or try to download the images\r\n# It will generate a request to the Media platform: {{[https://api.media.atlassian.com/file/XXXXXXXXX/binary?client=XXXXXXXXX&token=XXXXXXXX&name=FILE-NAME.png]}}\r\n# Copy the link of the request from the browser Network Tab\r\n# Try accessing it from the device that is not on the list of allowed IP addresses for the site\r\n\r\nh3. Expected Results\r\n\r\nExternal users who do not have access to the site and are not part of the allowed IP addresses should not be able to see the image.\r\nh3. Actual Results\r\n\r\nExternal users can see the image with the link shared.\r\nh3. Workaround\r\n\r\nNo workaround available.","createDate":"2024-03-18T05:50:09.000+0000","comments":[{"text":"Hi all,\r\n\r\nMy name is Kunwar , and I am the product manager for IP allowlisting . I just wanted to circle back on this issue and update that we are targeting to release this change in H2 (Jul - Dec )this year (2024). \r\n\r\nLet me know if there nay questions, happy to talk. \r\n\r\nThanks. ","author":"Kunwardeep Singh"}]},{"summary":"Last Active inform inaccurate time in Users Page","key":"ACCESS-1783","url":"https://jira.atlassian.com/browse/ACCESS-1783","type":"Bug","priority":"","description":"h3. Summary\r\nThe \"Last Active\" date may not consistently align with the actual last instance a user was active in a specific application, such as Jira or Confluence.\r\n !screenshot-1.png|thumbnail! \r\nThis inconsistency in the \"Last Active\" date can be more accurately identified by customers who possess Enterprise licensed applications. They have access to application events in the Audit log, allowing them to observe if a user has viewed a Jira issue, made edits, or interacted with a different section of the application.\r\n !screenshot-2.png|thumbnail! \r\n\r\n(+) The inconsistencies in the 'Last Active' dates are not confined to mere hours. They can, in fact, be inaccurate for an extended period, even beyond weeks.\r\n\r\nh3. Environment\r\n(!) Cloud, New centric User Management experience.\r\nCreate an environment comprised of:\r\n# Jira Work Management\r\n# Jira Service Management\r\n# Jira Software\r\n\r\nGrant some of your users access to either JWM, Software, or JSM\r\n\r\nh3. Steps to Reproduce\r\nCan be more easily reproduced using the following constraints:\r\n|*User A*|JWM access only|\r\n\r\n# User A logs into JWM and creates a ticket.\r\n## This action gets logged and \"Last Active\" updates.\r\n# User A logs after a couple days back in Jira to view a JSW Jira ticket.\r\n## User A has the permissions to view the ticket.\r\n# User A open the ticket and view it for more than 2 seconds\r\n## This activity gets recorded in the *Audit Log* of Atlassian Access for *Enterprise licenses*\r\n\r\nh3. Expected Results\r\n*Last Active* date should be updated to show the last activity of the user in Jira, which was when the user browsed the JSW project Jira ticket.\r\n\r\nh3. Actual Results\r\n*Last Active* date is not updated with the last time the user viewed the JSW Jira ticket.\r\n\r\nh3. Workaround\r\nThere is no workaround besides having the users _create tickets_ or _perform other actions in different Jira project types_.\r\n\r\nh3. Additional notes\r\nThis bug also affects the retrieval of these values through the API, which directly impacts the ability of certain customers to automate their user lifecycles.","createDate":"2024-03-01T14:26:01.000+0000","comments":[{"text":"Hi Team, can you please help to prioritize this defect as we are planning to use this field for managing the user license management based on the last active date using users admin API","author":"Jyothish Pillai"},{"text":"Hi Team, I am running into this issue also, and created a service request and added some logging data of specific users that got reset in a recent, small timeframe.  Please check JST-994452 for details.  If you want a look at the data itself, i can reopen and grant that access.","author":"Dirk Vanhaute"},{"text":"With no workaround available, we would greatly appreciate this bug being prioritized for development.\r\n\r\nAs customers, we should be able to have accurate data to use when assessing whether paid subscription(s) are still needed.","author":"Josh"},{"text":"What is the expected delivery date for a fix?","author":"Raphael Winter"},{"text":"Hi everyone,\r\n\r\nWe are actively working on improving the way we show 'Last active' dates in Admin Hub (admin.atlassian.com).\r\n\r\nOur investigations found there is *no inaccuracy* with the data source of the ‘Last active’ dates on the Users page or in Audit logs.\r\n\r\n*However, as ‘Last active’ on the Users page vs ‘Last active’ in Audit logs are driven by different data sources, they have different definitions based on their events.*\r\n\r\n*Definition of ‘Last active' for the Users page from:* [User's last active dates|https://developer.atlassian.com/cloud/admin/organization/user-last-active-dates/]\r\n * Returns user’s last active date for each product listed in Atlassian Administration.\r\n\r\n * Active is defined as viewing a product's page for a minimum of 2 seconds.\r\n\r\n * The data for the last activity may be delayed by up to 24 hours.\r\n\r\n * If the user has not accessed a product, the product_access response field will be empty.\r\n\r\n*Activity events captured by audit log:* [Track organization activities from the audit log|https://support.atlassian.com/organization-administration/docs/track-organization-activities-from-the-audit-log/]\r\n\r\nSo while both the ‘Last active’ date on the Users page and in Audit logs are accurate based on their individual definitions and data sources, I acknowledge the inconsistency between these pages and the confusion it may cause.\r\n\r\nOur engineering team is working on a long-term solution to reconcile the data sources between these pages. In the interim, we have updated our [public-facing documentation|https://developer.atlassian.com/cloud/admin/organization/user-last-active-dates/] to clarify the differences in definitions.\r\n\r\nThanks a lot for your feedback, I really appreciate your patience while we make these improvements.\r\n\r\nCheers,\r\n\r\nMichelle\r\n\r\nProduct Manager, Atlassian Guard Standard","author":"Michelle Tan"},{"text":"HI Team,\r\n\r\nWhen can we expect this issue to be resolved? It has been nearly a year, and it remains unassigned. This feature is essential for our license management.\r\n\r\nThanks,\r\n\r\nMirkeya","author":"Mirkeya Capellan"},{"text":"Hi [~9cbd3f6e26d9] ,\r\n\r\n \r\n\r\nThis is highly crucial for our license management and affects the whole org enorumously. During billing cycles this plays important role and should build trust between vendor<->company.\r\n\r\nTherefore, while waiting long-term solution, could you provide possible accurate alternative here?\r\n\r\n \r\n\r\n ","author":"Mario Barbaric"}]},{"summary":"Custom Email Domain Verification Updated Time","key":"ACCESS-1755","url":"https://jira.atlassian.com/browse/ACCESS-1755","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen you click on *Run DNS records check* the {*}Last checked{*}: time doesn't get updated even after refreshing the page but you receive an email for the same.\r\n\r\nAs per the user experience, clicking on the Run DNS records check button should trigger a manual record verification however this doesn't reflect on the *See DNS records* domain verification popup.\r\n\r\nh3. Steps to Reproduce\r\n\r\n # Go to [admin.atlassian.com|http://admin.atlassian.com/]. Select your organization if you have more than one.\r\n # Select *Settings* > {*}Emails{*}.\r\n # If you already have domains, you’ll see two tabs. Select {*}Email domains{*}.\r\n # Click on *See DNS records and then* {*}Run DNS records check{*}{*}{*}\r\n\r\nh3. Expected Results\r\n\r\nThe updated date and time for the records should be reflected as soon as the Run DNS records check button is clicked.\r\n\r\nh3. Actual Results\r\n\r\nThe updated date and time for the records don't get updated.\r\n\r\nh3. Workaround\r\n\r\nCurrently, the workaround is to refresh the after a couple minutes for the date and time to get updated.","createDate":"2024-02-16T14:42:15.000+0000","comments":[]},{"summary":"Clicking on \"Claim accounts\" doesn't generate an error, but accounts aren't claimed","key":"ACCESS-1742","url":"https://jira.atlassian.com/browse/ACCESS-1742","type":"Bug","priority":"","description":"When trying to [claim the accounts|#Claim-accounts] from a verified domain to claim all the accounts from that domain, there is no error returned in the UI or developer console. However, the accounts are not claimed.\r\nh3. Steps to Reproduce\r\n # Access the *domains* screen.\r\n # Find the domain from the list. \r\n # Click in the 3 dot menu ({*}...{*}) and select *Claim accounts.* \r\n\r\n{panel}\r\n(!) The issue couldn't be reproduced in a test environment. There might be an additional step not yet found that contributes to this behavior. \r\n{panel}\r\nh3. Expected Results\r\n\r\nThe accounts are claimed and the notification email is received informing that the process of claiming the accounts was successful. \r\nh3. Actual Results\r\n * No error messages in the UI or developer console. \r\n * Accounts are not claimed. \r\n * The notification email is not sent. \r\n\r\nh3. Workaround\r\n # Change the claim settings from manual to automatic option, or vice-versa. \r\n # Change the claim settings back to the desired option. \r\n # Click in the 3 dot menu ({*}...{*}) and select *Claim accounts.*  ","createDate":"2024-02-12T11:14:43.000+0000","comments":[{"text":"Hey I am closing this ticket as this bug is a result of this bug which is tracked here\r\n\r\nhttps://jira.atlassian.com/browse/ACCESS-2140","author":"Hong Shi"}]},{"summary":"SCIM-synced groups in siteless org aren't available in Directory","key":"ACCESS-1700","url":"https://jira.atlassian.com/browse/ACCESS-1700","type":"Bug","priority":"","description":"h3. Issue Summary\r\nGroups synced via SCIM in a siteless organization are not available in the Admin Hub UI and can't be used to assign product access for siteless products. This is especially concerning for Trello Enterprise customers who have migrated to the new Admin Hub experience, as they can no longer manage Trello product access via SCIM unless they have at least one sited product in their organization.\r\n\r\nThis is reproducible on Data Center: n/a\r\nh3. Steps to Reproduce\r\n # Create an organization with only siteless product(s) (for example, Trello).\r\n# Sign up for Atlassian Access.\r\n # Create an identity provider directory and configure SCIM user provisioning.\r\n# Sync at least one group from the IdP to Atlassian.\r\n# In Atlassian Admin Hub, navigate to *Security* > *Identity providers* > [Directory name] > *View groups* to verify that the group(s) have synced successfully.\r\n# Navigate to *Directory* > *Groups*\r\n\r\nh3. Expected Results\r\nGroups synced via SCIM are available.\r\nh3. Actual Results\r\nOnly local groups are available.\r\n\r\nh3. Workaround\r\n* Sign up for at least one sited product (for example, Jira Software), _or_\r\n* [Contact Atlassian Support|https://support.atlassian.com/contact/] to enable SCIM for a siteless organization.","createDate":"2023-12-20T18:49:12.000+0000","comments":[{"text":"How do we bump up the priority of this as this is a major impact to our user base not being automatically added to the correct groups and default workspace","author":"Michelle Golding"}]},{"summary":"The UI message \"This account is deactivated <name> no longer has access to Atlassian account services. Their account was deactivated by Atlassian\" is sometimes shown incorrectly ","key":"ACCESS-1541","url":"https://jira.atlassian.com/browse/ACCESS-1541","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nWhen viewing a user in User Management the UI message \"This account is deactivated <name> no longer has access to Atlassian account services. Their account was deactivated by Atlassian\" sometimes shows on users who were *not* deactivated by Atlassian.\r\nh3. Steps to Reproduce\r\n # Check any random deactivated user from *Directory* >> *Managed accounts* and you should see the Reactivate button in Blue\r\n # Go back to Managed Accounts and search for the same user or directly open the user profile again and the reactivate button is greyed out.So the difference between the first and the second attempt is the error message:\r\n\r\n * During the first attempt when the Reactivate button is enabled, we see the below message\r\n\"{_}*This account is deactivated*{_}\r\n{_}*<Username> no longer has access to Atlassian account services.*{_}\"\r\n\r\n * During the second attempt we see the below message\r\n\"{_}*This account is deactivated*{_}\r\n{_}*<Username> no longer has access to Atlassian account services. Their account was deactivated by Atlassian.*{_}\"\r\n\r\nCome back again and search for the user, you should see the first message for deactivation and the reactivate button is enabled.\r\nh3. Expected Results\r\n\r\nCustomers should only be told a user account has been deactivated by Atlassian if this is true.\r\nh3. Actual Results\r\n\r\nthe UI message \"This account is deactivated <name> no longer has access to Atlassian account services. Their account was deactivated by Atlassian\" shows on some users who were *not* deactivated by Atlassian\r\nh3. Workaround\r\n\r\nn/a","createDate":"2023-05-10T02:15:04.000+0000","comments":[{"text":"Steps to reproduce in our site:\r\n\r\nSelect a random deactivated managed account. The \"Reactivate account\" button is active (shown in blue) and the message is \"This account is deactivated. <username> no longer has access to Atlassian account services.\"\r\n\r\nGo back to managed accounts and then select again the same managed account. Now the \"Reactivate account\" button is inactive (shown in grey) and the message is \"This account is deactivated. <username> no longer has access to Atlassian account services. Their account was deactivated by Atlassian.\"\r\n\r\n\r\nIn our site, from now on the \"Reactivate account\" remains inactive and the message remains the same for this user.\r\n\r\nSo it is only the first time you access a random deactivated managed account that the \"Reactivate account\" button is active.","author":"Nicolau Roca"}]},{"summary":"Provisioning data to sites is very slow at scale","key":"ACCESS-1391","url":"https://jira.atlassian.com/browse/ACCESS-1391","type":"Bug","priority":"","description":"h3. Issue Summary\r\n\r\nPropagating the provisioning data to the site can take days to complete when there is a huge amount of data.\r\nh3. Steps to Reproduce\r\n\r\nSync a large number of groups (e.g 10-30k) via provisioning or delete a provisioning directory with similar sized groups already synced.\r\nh3. Expected Results\r\n\r\nChanges should reflect on the site within a reasonable amount of time.\r\nh3. Actual Results\r\n\r\nPropagation time can take days without any progress status. \r\nNew updates are set behind the propagation queue and so new access and permissions for users are also blocked.\r\nh3. Workaround\r\n\r\nCurrently there is no known workaround for this behavior. A workaround will be added here when available","createDate":"2022-07-04T09:59:42.000+0000","comments":[{"text":"Is there a reason, this Issue went to the long term backlog?\r\n\r\nIsn't that in conflict with the priority set to \"High\"?","author":"HDG"},{"text":"[https://customerfeedback.atlassian.net/browse/AGF-1047]\r\n\r\nA case where there is delay after user logs in for propagating configured groups","author":"Ryan Van"},{"text":"We were affected twice for this error","author":"David Moreno"},{"text":"Hi everyone,\r\n\r\nThanks for your patience on this ticket so far. I just wanted to provide a quick update on some of the planned changes to improve the performance of SCIM provisioning:\r\n * Short term (FY24Q4): an opt-in experience for customers with 500k+ writes (sum of users, groups, and memberships), with expected provisioning time improvements of up to 50%. This short term solution will be opt-in as it involves changes to some admin experiences.\r\n\r\n * Longer term (FY25H2): we are currently working on architectural changes that are expected to reduce provisioning time to 20% of what it is today. These changes will be available to all customers.\r\n\r\nIn the meantime, if you’re expecting to sync a large number of groups (e.g. 10k+) via your IdP, I’d recommend starting your sync a week ahead to avoid any issues with delays in syncing. I acknowledge this is a suboptimal experience at the moment. We’re doing our best to make things better as soon as possible.\r\n\r\nI hope this information is helpful. If you have any questions about anything, please don’t hesitate to get in touch via this ticket.\r\n\r\nCheers,\r\nAneita\r\nProduct Manager, Atlassian Access","author":"Aneita"},{"text":"We have this issue every time we create a new site - blocks us for 3 days. We would wait for the new site to have all users and groups (we can start that earlier), but our daily process of adding new users and groups is also delayed during that time. Atlassian is always helpful and changes priorities to help us.\r\n\r\nIf you do a new architecture here, please be away that everyday business must go on without delay, and new big things like new sites can be filled slowly - nobody expects them to work within minutes. User and group changes that affect existing sites which are in full use must not be delayed.","author":"Bruno Abele"}]},{"summary":"Deleting provisioned user at IdP does not deactivate the user on Atlassian","key":"ACCESS-1388","url":"https://jira.atlassian.com/browse/ACCESS-1388","type":"Bug","priority":"","description":"h3. Issue Summary\r\nDeleting a user from Identity Providers does not deactivate the user in the Atlassian directory and the SCIM data is orphaned for the user.\r\nh3. Steps to Reproduce\r\n # Sync a user from your IdP to the Atlassian directory via user provisioning.\r\n # Delete the user directly in your IdP directory and not from the Atlassian Cloud application.\r\n # This will remove the user assignment from the application and the IdP directory\r\n # The next provisioning does not deactivate the account at Atlassian Cloud; The user stays active in Atlassian and the SCIM data is orphaned.\r\n\r\nh3. Expected Results\r\n\r\nThe user should get deactivated over the next provisioning cycle.\r\nh3. Actual Results\r\n\r\nThe IdP never sends further updates about the user to Atlassian Cloud, causing a desync. The Atlassian Accounts get locked in an orphaned state since the user still belongs to the provisioning scope and their Atlassian Account does not deactivate.\r\nh3. Workaround\r\n # Recreate the user on your IdP, add the user to the provisioning scope, and wait for it to be provisioned. Deactivate the account at the IdP and wait for this to be synced. Then delete the account from the IdP\r\n # Use [User provisioning REST APIs|https://developer.atlassian.com/cloud/admin/user-provisioning/rest/intro] to delete the orphaned provisioning record. Reach Atlassian Support in case help is required\r\n # Run manual provision on-demand after deleting the user from AD. This will deactivate the user in the Atlassian directory\r\n # Delete the current SCIM user provisioning configuration from Atlassian, this will allow you to locally manage accounts on Atlassian AdminHub [admin.atlassian.com|http://admin.atlassian.com/], reconnect after the necessary adjustments are made","createDate":"2021-10-28T07:07:52.000+0000","comments":[{"text":"can we get somebody to work on this , please ?","author":"Andrew Zyman"},{"text":"Yes, I'm hitting the same issue. \r\n\r\n4. The User 'usernamehere' is disabled in Azure Active Directory, but active in AtlassianCloud. They will be disabled in AtlassianCloud.\r\n5. Skipped.  The state of the entry in both the source and target systems already match. No change to the User 'usernamehere' currently needs to be made.\r\n \r\n\r\nResult - The Atlassian user remains enabled even though the AzureAD user has been removed from scope.\r\n\r\n \r\n ","author":"Alistair Stewart"},{"text":"We also experience the same issue, once a user is deleted from Azure Active Directory it stays in the Atlassian Cloud as Managed Account. It is not possible to deactivate it (managed by the identity provider). Furthermore, the account gets email changed to [accountId][previous email] e.g. \"6c129ae00dda4435a99b1cb416823c1ffirstname.lastname@domain.com\".\r\n\r\nRestarting the provisioning didn't seem to solve the issue.\r\n\r\nUser counts toward license use, which is unacceptable!","author":"Vid Kraner"},{"text":"The work-around provided here is not working.\r\nWe have synced an Azure AD group with Atlassian via Provisioning. So technically when we remove a user from the Azure AD group, on the next provisioning cycle, the user should not stay active and as 'Managed Account' in Atlassian. It either needs to be deleted or deactivated. Can't even edit the user details, as it says \"Managed by the identity provider\". \r\n\r\nIs there a fix for it?","author":"ruhi.rezaie"},{"text":"[~ruhi.rezaie] Nicely described, this is exactly our problem.\r\n\r\nBut this issue is Unassigned, hopefully it reaches someone.","author":"Vid Kraner"},{"text":"yeah, it`s a little bit annoying....","author":"Florian Reichl"},{"text":"This issue also describes the problem we have\r\nSomeone please work on this please!","author":"Tobias Nöth"},{"text":"I would like to point out that the \" *Symptom Severity\"* may not be correctly classified.\r\n\r\nDe-provisioning plays one of the most vital roles in an Enterprise org. The whole purpose of having SCIM is the convenience of making changes at one central point and not having to deal with them at multiple points, each of the listed workaround is additional work for an Org Admin.\r\n\r\n ","author":"jehan.bhathena"},{"text":"Thank you for your feedback. This is a known issue that IDPs are not calling our Delete API. We have escalated this issue with Microsoft in the past and will continue to reach out to IDPs to address.\r\n\r\nIn the meantime, please reach out to Microsoft Entra support: [https://learn.microsoft.com/en-us/entra/fundamentals/how-to-get-support]\r\n\r\nTaking this action will help escalate this issue within Microsoft so that they will take action to resolve.","author":"Holly Makris"}]}]